<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#slot\">#</a> slot","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,7\"><code>Vue &#x7684;&#x7ec4;&#x4ef6;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e2a;&#x975e;&#x5e38;&#x6709;&#x7528;&#x7684;&#x7279;&#x6027; &#x2014;&#x2014; `slot` &#x63d2;&#x69fd;&#xff0c;&#x5b83;&#x8ba9;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x73b0;&#x53d8;&#x7684;&#x66f4;&#x52a0;&#x7075;&#x6d3b;&#x3002;&#x6211;&#x4eec;&#x5e73;&#x65f6;&#x5728;&#x5f00;&#x53d1;&#x7ec4;&#x4ef6;&#x5e93;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e3a;&#x4e86;&#x8ba9;&#x7ec4;&#x4ef6;&#x66f4;&#x52a0;&#x7075;&#x6d3b;&#x53ef;&#x5b9a;&#x5236;&#xff0c;&#x7ecf;&#x5e38;&#x7528;&#x63d2;&#x69fd;&#x7684;&#x65b9;&#x5f0f;&#x8ba9;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x81ea;&#x5b9a;&#x4e49;&#x5185;&#x5bb9;&#x3002;&#x63d2;&#x69fd;&#x5206;&#x4e3a;&#x666e;&#x901a;&#x63d2;&#x69fd;&#x548c;&#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;&#xff0c;&#x5b83;&#x4eec;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;&#x4e0d;&#x540c;&#x7684;&#x573a;&#x666f;&#xff0c;&#x4f46;&#x5b83;&#x662f;&#x600e;&#x4e48;&#x5b9e;&#x73b0;&#x7684;&#x5462;&#xff0c;&#x4e0b;&#x9762;&#x6211;&#x4eec;&#x5c31;&#x4ece;&#x6e90;&#x7801;&#x7684;&#x89d2;&#x5ea6;&#x6765;&#x5206;&#x6790;&#x63d2;&#x69fd;&#x7684;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,7"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#%E6%99%AE%E9%80%9A%E6%8F%92%E6%A7%BD\">#</a> &#x666e;&#x901a;&#x63d2;&#x69fd;","children":[{"content":"<pre data-lines=\"11,12\"><code>&#x4e3a;&#x4e86;&#x66f4;&#x52a0;&#x76f4;&#x89c2;&#xff0c;&#x6211;&#x4eec;&#x8fd8;&#x662f;&#x901a;&#x8fc7;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x6765;&#x5206;&#x6790;&#x63d2;&#x69fd;&#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"11,12"}},{"content":"<pre data-lines=\"13,43\"><code data-lines=\"13,43\"><span class=\"language-xml\">let AppLayout = {\n  template: &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">header</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slot</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;header&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slot</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">header</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">main</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slot</span>&gt;</span>&#x9ed8;&#x8ba4;&#x5185;&#x5bb9;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slot</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">main</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">footer</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slot</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;footer&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slot</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">footer</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>&apos;\n}\n\nlet vm = new Vue({\n  el: &apos;#app&apos;,\n  template: &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">app-layout</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">&quot;header&quot;</span>&gt;</span></span><span class=\"hljs-template-variable\">{{<span class=\"hljs-name\">title</span>}}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span></span><span class=\"hljs-template-variable\">{{<span class=\"hljs-name\">msg</span>}}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">&quot;footer&quot;</span>&gt;</span></span><span class=\"hljs-template-variable\">{{<span class=\"hljs-name\">desc</span>}}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">app-layout</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>&apos;,\n  data() {\n    return {\n      title: &apos;&#x6211;&#x662f;&#x6807;&#x9898;&apos;,\n      msg: &apos;&#x6211;&#x662f;&#x5185;&#x5bb9;&apos;,\n      desc: &apos;&#x5176;&#x5b83;&#x4fe1;&#x606f;&apos;\n    }\n  },\n  components: {\n    AppLayout\n  }\n}) \n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"13,43"}},{"content":"<pre data-lines=\"44,45\"><code>&#x8fd9;&#x91cc;&#x6211;&#x4eec;&#x5b9a;&#x4e49;&#x4e86; `AppLayout` &#x5b50;&#x7ec4;&#x4ef6;&#xff0c;&#x5b83;&#x5185;&#x90e8;&#x5b9a;&#x4e49;&#x4e86; 3 &#x4e2a;&#x63d2;&#x69fd;&#xff0c;2 &#x4e2a;&#x4e3a;&#x5177;&#x540d;&#x63d2;&#x69fd;&#xff0c;&#x4e00;&#x4e2a; `name` &#x4e3a; `header`&#xff0c;&#x4e00;&#x4e2a; `name` &#x4e3a; `footer`&#xff0c;&#x8fd8;&#x6709;&#x4e00;&#x4e2a;&#x6ca1;&#x6709;&#x5b9a;&#x4e49; `name` &#x7684;&#x662f;&#x9ed8;&#x8ba4;&#x63d2;&#x69fd;&#x3002; `&lt;slot&gt;` &#x548c; `&lt;/slot&gt;` &#x4e4b;&#x524d;&#x586b;&#x5199;&#x7684;&#x5185;&#x5bb9;&#x4e3a;&#x9ed8;&#x8ba4;&#x5185;&#x5bb9;&#x3002;&#x6211;&#x4eec;&#x7684;&#x7236;&#x7ec4;&#x4ef6;&#x6ce8;&#x518c;&#x548c;&#x5f15;&#x7528;&#x4e86; `AppLayout` &#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5e76;&#x5728;&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x5b9a;&#x4e49;&#x4e86;&#x4e00;&#x4e9b;&#x5143;&#x7d20;&#xff0c;&#x7528;&#x6765;&#x66ff;&#x6362;&#x63d2;&#x69fd;&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684; DOM &#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"44,45"}},{"content":"<pre data-lines=\"46,55\"><code data-lines=\"46,55\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">header</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>&#x6211;&#x662f;&#x6807;&#x9898;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">header</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">main</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>&#x6211;&#x662f;&#x5185;&#x5bb9;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">main</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">footer</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>&#x5176;&#x5b83;&#x4fe1;&#x606f;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">footer</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,55"}}],"payload":{"tag":"h2","lines":"8,10"}},{"content":"<a href=\"#%E7%BC%96%E8%AF%91\">#</a> &#x7f16;&#x8bd1;","children":[{"content":"<pre data-lines=\"59,62\"><code>&#x8fd8;&#x662f;&#x5148;&#x4ece;&#x7f16;&#x8bd1;&#x8bf4;&#x8d77;&#xff0c;&#x6211;&#x4eec;&#x77e5;&#x9053;&#x7f16;&#x8bd1;&#x662f;&#x53d1;&#x751f;&#x5728;&#x8c03;&#x7528; `vm.&#x24;mount` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x6240;&#x4ee5;&#x7f16;&#x8bd1;&#x7684;&#x987a;&#x5e8f;&#x662f;&#x5148;&#x7f16;&#x8bd1;&#x7236;&#x7ec4;&#x4ef6;&#xff0c;&#x518d;&#x7f16;&#x8bd1;&#x5b50;&#x7ec4;&#x4ef6;&#x3002;\n\n&#x9996;&#x5148;&#x7f16;&#x8bd1;&#x7236;&#x7ec4;&#x4ef6;&#xff0c;&#x5728; `parse` &#x9636;&#x6bb5;&#xff0c;&#x4f1a;&#x6267;&#x884c; `processSlot` &#x5904;&#x7406; `slot`&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/parser/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,62"}},{"content":"<pre data-lines=\"63,113\"><code data-lines=\"63,113\"><span class=\"hljs-keyword\">function</span> processSlot (el) {\n  <span class=\"hljs-keyword\">if</span> (el.tag === <span class=\"hljs-string\">&apos;slot&apos;</span>) {\n    el.slotName = getBindingAttr(el, <span class=\"hljs-string\">&apos;name&apos;</span>)\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; el.key) {\n      warn(\n        `\\`key\\` does <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">work</span> <span class=\"hljs-keyword\">on</span> &lt;slot&gt; because slots are abstract outlets ` +\n        `<span class=\"hljs-keyword\">and</span> can possibly expand <span class=\"hljs-keyword\">into</span> multiple elements. ` +\n        `Use the key <span class=\"hljs-keyword\">on</span> a wrapping element <span class=\"hljs-keyword\">instead</span>.`\n      )\n    }\n  } <span class=\"hljs-keyword\">else</span> {\n    let slotScope\n    <span class=\"hljs-keyword\">if</span> (el.tag === <span class=\"hljs-string\">&apos;template&apos;</span>) {\n      slotScope = getAndRemoveAttr(el, <span class=\"hljs-string\">&apos;scope&apos;</span>)\n      <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n      <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; slotScope) {\n        warn(\n          `the &quot;scope&quot; <span class=\"hljs-keyword\">attribute</span> <span class=\"hljs-keyword\">for</span> scoped slots have been deprecated <span class=\"hljs-keyword\">and</span> ` +\n          `replaced <span class=\"hljs-keyword\">by</span> &quot;slot-scope&quot; since <span class=\"hljs-number\">2.5</span>. The <span class=\"hljs-built_in\">new</span> &quot;slot-scope&quot; <span class=\"hljs-keyword\">attribute</span> ` +\n          `can <span class=\"hljs-keyword\">also</span> be used <span class=\"hljs-keyword\">on</span> plain elements <span class=\"hljs-keyword\">in</span> addition <span class=\"hljs-keyword\">to</span> &lt;<span class=\"hljs-keyword\">template</span>&gt; <span class=\"hljs-keyword\">to</span> ` +\n          `denote scoped slots.`,\n          <span class=\"hljs-keyword\">true</span>\n        )\n      }\n      el.slotScope = slotScope || getAndRemoveAttr(el, <span class=\"hljs-string\">&apos;slot-scope&apos;</span>)\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> ((slotScope = getAndRemoveAttr(el, <span class=\"hljs-string\">&apos;slot-scope&apos;</span>))) {\n      <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n      <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; el.attrsMap[<span class=\"hljs-string\">&apos;v-for&apos;</span>]) {\n        warn(\n          `Ambiguous combined <span class=\"hljs-keyword\">usage</span> <span class=\"hljs-keyword\">of</span> slot-scope <span class=\"hljs-keyword\">and</span> v-<span class=\"hljs-keyword\">for</span> <span class=\"hljs-keyword\">on</span> &lt;&#x24;{el.tag}&gt; ` +\n          `(v-<span class=\"hljs-keyword\">for</span> takes higher priority). Use a <span class=\"hljs-keyword\">wrapper</span> &lt;<span class=\"hljs-keyword\">template</span>&gt; <span class=\"hljs-keyword\">for</span> the ` +\n          `scoped slot <span class=\"hljs-keyword\">to</span> make it clearer.`,\n          <span class=\"hljs-keyword\">true</span>\n        )\n      }\n      el.slotScope = slotScope\n    }\n    const slotTarget = getBindingAttr(el, <span class=\"hljs-string\">&apos;slot&apos;</span>)\n    <span class=\"hljs-keyword\">if</span> (slotTarget) {\n      el.slotTarget = slotTarget === <span class=\"hljs-string\">&apos;&quot;&quot;&apos;</span> ? <span class=\"hljs-string\">&apos;&quot;default&quot;&apos;</span> : slotTarget\n      // preserve slot <span class=\"hljs-keyword\">as</span> an <span class=\"hljs-keyword\">attribute</span> <span class=\"hljs-keyword\">for</span> native shadow DOM compat\n      // <span class=\"hljs-keyword\">only</span> <span class=\"hljs-keyword\">for</span> non-scoped slots.\n      <span class=\"hljs-keyword\">if</span> (el.tag !== <span class=\"hljs-string\">&apos;template&apos;</span> &amp;&amp; !el.slotScope) {\n        addAttr(el, <span class=\"hljs-string\">&apos;slot&apos;</span>, slotTarget)\n      }\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"63,113"}},{"content":"<pre data-lines=\"114,115\"><code>&#x5f53;&#x89e3;&#x6790;&#x5230;&#x6807;&#x7b7e;&#x4e0a;&#x6709; `slot` &#x5c5e;&#x6027;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x7ed9;&#x5bf9;&#x5e94;&#x7684; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x6dfb;&#x52a0; `slotTarget` &#x5c5e;&#x6027;&#xff0c;&#x7136;&#x540e;&#x5728; `codegen` &#x9636;&#x6bb5;&#xff0c;&#x5728; `genData` &#x4e2d;&#x4f1a;&#x5904;&#x7406; `slotTarget`&#xff0c;&#x76f8;&#x5173;&#x4ee3;&#x7801;&#x5728; `src/compiler/codegen/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"114,115"}},{"content":"<pre data-lines=\"116,121\"><code data-lines=\"116,121\"><span class=\"hljs-title\">if</span> (el.slotTarget &amp;&amp; !el.slotScope) {\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span> += `slot:&#x24;{<span class=\"hljs-title\">el</span>.<span class=\"hljs-title\">slotTarget</span>},`</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"116,121"}},{"content":"<pre data-lines=\"122,123\"><code>&#x4f1a;&#x7ed9; `data` &#x6dfb;&#x52a0;&#x4e00;&#x4e2a; `slot` &#x5c5e;&#x6027;&#xff0c;&#x5e76;&#x6307;&#x5411; `slotTarget`&#xff0c;&#x4e4b;&#x540e;&#x4f1a;&#x7528;&#x5230;&#x3002;&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;&#x7236;&#x7ec4;&#x4ef6;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"122,123"}},{"content":"<pre data-lines=\"124,138\"><code data-lines=\"124,138\"><span class=\"hljs-selector-tag\">with</span>(this){\n  <span class=\"hljs-selector-tag\">return</span> <span class=\"hljs-selector-tag\">_c</span>(<span class=\"hljs-string\">&apos;div&apos;</span>,\n    [<span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;app-layout&apos;</span>,\n      [<span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;h1&apos;</span>,{<span class=\"hljs-attribute\">attrs</span>:{<span class=\"hljs-string\">&quot;slot&quot;</span>:<span class=\"hljs-string\">&quot;header&quot;</span>},<span class=\"hljs-attribute\">slot</span>:<span class=\"hljs-string\">&quot;header&quot;</span>},\n         [<span class=\"hljs-built_in\">_v</span>(<span class=\"hljs-built_in\">_s</span>(title))]),\n       <span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;p&apos;</span>,[<span class=\"hljs-built_in\">_v</span>(<span class=\"hljs-built_in\">_s</span>(msg))]),\n       <span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;p&apos;</span>,{<span class=\"hljs-attribute\">attrs</span>:{<span class=\"hljs-string\">&quot;slot&quot;</span>:<span class=\"hljs-string\">&quot;footer&quot;</span>},<span class=\"hljs-attribute\">slot</span>:<span class=\"hljs-string\">&quot;footer&quot;</span>},\n         [<span class=\"hljs-built_in\">_v</span>(<span class=\"hljs-built_in\">_s</span>(desc))]\n         )\n       ])\n     ],\n   <span class=\"hljs-number\">1</span>)} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"124,138"}},{"content":"<pre data-lines=\"139,140\"><code>&#x63a5;&#x4e0b;&#x6765;&#x7f16;&#x8bd1;&#x5b50;&#x7ec4;&#x4ef6;&#xff0c;&#x540c;&#x6837;&#x5728; `parser` &#x9636;&#x6bb5;&#x4f1a;&#x6267;&#x884c; `processSlot` &#x5904;&#x7406;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/parser/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"139,140"}},{"content":"<pre data-lines=\"141,149\"><code data-lines=\"141,149\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">processSlot</span> <span class=\"hljs-params\">(el)</span> {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">el</span>.<span class=\"hljs-keyword\">tag</span> === <span class=\"hljs-string\">&apos;slot&apos;</span>) {\n    <span class=\"hljs-keyword\">el</span>.slotName = getBindingAttr(<span class=\"hljs-keyword\">el</span>, <span class=\"hljs-string\">&apos;name&apos;</span>)\n  }\n  // ...\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"141,149"}},{"content":"<pre data-lines=\"150,151\"><code>&#x5f53;&#x9047;&#x5230; `slot` &#x6807;&#x7b7e;&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x7ed9;&#x5bf9;&#x5e94;&#x7684; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x6dfb;&#x52a0; `slotName` &#x5c5e;&#x6027;&#xff0c;&#x7136;&#x540e;&#x5728; `codegen` &#x9636;&#x6bb5;&#xff0c;&#x4f1a;&#x5224;&#x65ad;&#x5982;&#x679c;&#x5f53;&#x524d; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x662f; `slot` &#x6807;&#x7b7e;&#xff0c;&#x5219;&#x6267;&#x884c; `genSlot` &#x51fd;&#x6570;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/codegen/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,151"}},{"content":"<pre data-lines=\"152,171\"><code data-lines=\"152,171\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genSlot</span> (<span class=\"hljs-params\">el: ASTElement, state: CodegenState</span>): string {\n  <span class=\"hljs-keyword\">const</span> slotName = el.<span class=\"hljs-property\">slotName</span> || <span class=\"hljs-string\">&apos;&quot;default&quot;&apos;</span>\n  <span class=\"hljs-keyword\">const</span> children = <span class=\"hljs-title function_\">genChildren</span>(el, state)\n  <span class=\"hljs-keyword\">let</span> res = <span class=\"hljs-string\">`_t(<span class=\"hljs-subst\">&#x24;{slotName}</span><span class=\"hljs-subst\">&#x24;{children ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{children}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span>}</span>`</span>\n  <span class=\"hljs-keyword\">const</span> attrs = el.<span class=\"hljs-property\">attrs</span> &amp;&amp; <span class=\"hljs-string\">`{<span class=\"hljs-subst\">&#x24;{el.attrs.map(a =&gt; <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{camelize(a.name)}</span>:<span class=\"hljs-subst\">&#x24;{a.value}</span>`</span>).join(<span class=\"hljs-string\">&apos;,&apos;</span>)}</span>}`</span>\n  <span class=\"hljs-keyword\">const</span> bind = el.<span class=\"hljs-property\">attrsMap</span>[<span class=\"hljs-string\">&apos;v-bind&apos;</span>]\n  <span class=\"hljs-keyword\">if</span> ((attrs || bind) &amp;&amp; !children) {\n    res += <span class=\"hljs-string\">`,null`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (attrs) {\n    res += <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{attrs}</span>`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (bind) {\n    res += <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{attrs ? <span class=\"hljs-string\">&apos;&apos;</span> : <span class=\"hljs-string\">&apos;,null&apos;</span>}</span>,<span class=\"hljs-subst\">&#x24;{bind}</span>`</span>\n  }\n  <span class=\"hljs-keyword\">return</span> res + <span class=\"hljs-string\">&apos;)&apos;</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"152,171"}},{"content":"<pre data-lines=\"172,173\"><code>&#x6211;&#x4eec;&#x5148;&#x4e0d;&#x8003;&#x8651; `slot` &#x6807;&#x7b7e;&#x4e0a;&#x6709; `attrs` &#x4ee5;&#x53ca; `v-bind` &#x7684;&#x60c5;&#x51b5;&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x53ea;&#x6709;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"172,173"}},{"content":"<pre data-lines=\"174,179\"><code data-lines=\"174,179\"><span class=\"hljs-keyword\">const</span> slotName = el.<span class=\"hljs-property\">slotName</span> || <span class=\"hljs-string\">&apos;&quot;default&quot;&apos;</span>\n<span class=\"hljs-keyword\">const</span> children = <span class=\"hljs-title function_\">genChildren</span>(el, state)\n<span class=\"hljs-keyword\">let</span> res = <span class=\"hljs-string\">`_t(<span class=\"hljs-subst\">&#x24;{slotName}</span><span class=\"hljs-subst\">&#x24;{children ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{children}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span>}</span>`</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"174,179"}},{"content":"<pre data-lines=\"180,181\"><code>&#x8fd9;&#x91cc;&#x7684; `slotName` &#x4ece; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x5bf9;&#x5e94;&#x7684;&#x5c5e;&#x6027;&#x4e0a;&#x53d6;&#xff0c;&#x9ed8;&#x8ba4;&#x662f; `default`&#xff0c;&#x800c; `children` &#x5bf9;&#x5e94;&#x7684;&#x5c31;&#x662f; `slot` &#x5f00;&#x59cb;&#x548c;&#x95ed;&#x5408;&#x6807;&#x7b7e;&#x5305;&#x88f9;&#x7684;&#x5185;&#x5bb9;&#x3002;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x6211;&#x4eec;&#x4f8b;&#x5b50;&#x7684;&#x5b50;&#x7ec4;&#x4ef6;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"180,181"}},{"content":"<pre data-lines=\"182,194\"><code data-lines=\"182,194\"><span class=\"hljs-keyword\">with</span>(this) {\n  return <span class=\"hljs-variable\">_c</span>(<span class=\"hljs-string\">&apos;div&apos;</span>,{\n    staticClass:<span class=\"hljs-string\">&quot;container&quot;</span>\n    },[\n      <span class=\"hljs-variable\">_c</span>(<span class=\"hljs-string\">&apos;header&apos;</span>,[<span class=\"hljs-variable\">_t</span>(<span class=\"hljs-string\">&quot;header&quot;</span>)],<span class=\"hljs-number\">2</span>),\n      <span class=\"hljs-variable\">_c</span>(<span class=\"hljs-string\">&apos;main&apos;</span>,[<span class=\"hljs-variable\">_t</span>(<span class=\"hljs-string\">&quot;default&quot;</span>,[<span class=\"hljs-variable\">_v</span>(<span class=\"hljs-string\">&quot;&#x9ed8;&#x8ba4;&#x5185;&#x5bb9;&quot;</span>)])],<span class=\"hljs-number\">2</span>),\n      <span class=\"hljs-variable\">_c</span>(<span class=\"hljs-string\">&apos;footer&apos;</span>,[<span class=\"hljs-variable\">_t</span>(<span class=\"hljs-string\">&quot;footer&quot;</span>)],<span class=\"hljs-number\">2</span>)\n      ]\n   )\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"182,194"}},{"content":"<pre data-lines=\"195,196\"><code>&#x5728;&#x7f16;&#x8bd1;&#x7ae0;&#x8282;&#x6211;&#x4eec;&#x4e86;&#x89e3;&#x5230;&#xff0c;`_t` &#x51fd;&#x6570;&#x5bf9;&#x5e94;&#x7684;&#x5c31;&#x662f; `renderSlot` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/render-heplpers/render-slot.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"195,196"}},{"content":"<pre data-lines=\"197,245\"><code data-lines=\"197,245\"><span class=\"hljs-comment\">/**\n * Runtime helper for rendering &lt;slot&gt;\n */</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">renderSlot</span> (<span class=\"hljs-params\">\n  name: string,\n  fallback: ?<span class=\"hljs-built_in\">Array</span>&lt;VNode&gt;,\n  props: ?<span class=\"hljs-built_in\">Object</span>,\n  bindObject: ?<span class=\"hljs-built_in\">Object</span>\n</span>): ?<span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">VNode</span>&gt; {\n  <span class=\"hljs-keyword\">const</span> scopedSlotFn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">&#x24;scopedSlots</span>[name]\n  <span class=\"hljs-keyword\">let</span> nodes\n  <span class=\"hljs-keyword\">if</span> (scopedSlotFn) { <span class=\"hljs-comment\">// scoped slot</span>\n    props = props || {}\n    <span class=\"hljs-keyword\">if</span> (bindObject) {\n      <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; !<span class=\"hljs-title function_\">isObject</span>(bindObject)) {\n        <span class=\"hljs-title function_\">warn</span>(\n          <span class=\"hljs-string\">&apos;slot v-bind without argument expects an Object&apos;</span>,\n          <span class=\"hljs-variable language_\">this</span>\n        )\n      }\n      props = <span class=\"hljs-title function_\">extend</span>(<span class=\"hljs-title function_\">extend</span>({}, bindObject), props)\n    }\n    nodes = <span class=\"hljs-title function_\">scopedSlotFn</span>(props) || fallback\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">const</span> slotNodes = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">&#x24;slots</span>[name]\n    <span class=\"hljs-comment\">// warn duplicate slot usage</span>\n    <span class=\"hljs-keyword\">if</span> (slotNodes) {\n      <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; slotNodes.<span class=\"hljs-property\">_rendered</span>) {\n        <span class=\"hljs-title function_\">warn</span>(\n          <span class=\"hljs-string\">`Duplicate presence of slot &quot;<span class=\"hljs-subst\">&#x24;{name}</span>&quot; found in the same render tree `</span> +\n          <span class=\"hljs-string\">`- this will likely cause render errors.`</span>,\n          <span class=\"hljs-variable language_\">this</span>\n        )\n      }\n      slotNodes.<span class=\"hljs-property\">_rendered</span> = <span class=\"hljs-literal\">true</span>\n    }\n    nodes = slotNodes || fallback\n  }\n\n  <span class=\"hljs-keyword\">const</span> target = props &amp;&amp; props.<span class=\"hljs-property\">slot</span>\n  <span class=\"hljs-keyword\">if</span> (target) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.&#x24;createElement(<span class=\"hljs-string\">&apos;template&apos;</span>, { <span class=\"hljs-attr\">slot</span>: target }, nodes)\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">return</span> nodes\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"197,245"}},{"content":"<pre data-lines=\"246,247\"><code>`render-slot` &#x7684;&#x53c2;&#x6570; `name` &#x4ee3;&#x8868;&#x63d2;&#x69fd;&#x540d;&#x79f0; `slotName`&#xff0c;`fallback` &#x4ee3;&#x8868;&#x63d2;&#x69fd;&#x7684;&#x9ed8;&#x8ba4;&#x5185;&#x5bb9;&#x751f;&#x6210;&#x7684; `vnode` &#x6570;&#x7ec4;&#x3002;&#x5148;&#x5ffd;&#x7565; `scoped-slot`&#xff0c;&#x53ea;&#x770b;&#x9ed8;&#x8ba4;&#x63d2;&#x69fd;&#x903b;&#x8f91;&#x3002;&#x5982;&#x679c; `this.&#x24;slot[name]` &#x6709;&#x503c;&#xff0c;&#x5c31;&#x8fd4;&#x56de;&#x5b83;&#x5bf9;&#x5e94;&#x7684; `vnode` &#x6570;&#x7ec4;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de; `fallback`&#x3002;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a; `this.&#x24;slot` &#x662f;&#x54ea;&#x91cc;&#x6765;&#x7684;&#x5462;&#xff1f;&#x6211;&#x4eec;&#x77e5;&#x9053;&#x5b50;&#x7ec4;&#x4ef6;&#x7684; `init` &#x65f6;&#x673a;&#x662f;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x6267;&#x884c; `patch` &#x8fc7;&#x7a0b;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x90a3;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x7236;&#x7ec4;&#x4ef6;&#x5df2;&#x7ecf;&#x7f16;&#x8bd1;&#x5b8c;&#x6210;&#x4e86;&#x3002;&#x5e76;&#x4e14;&#x5b50;&#x7ec4;&#x4ef6;&#x5728; `init` &#x8fc7;&#x7a0b;&#x4e2d;&#x4f1a;&#x6267;&#x884c; `initRender` &#x51fd;&#x6570;&#xff0c;`initRender` &#x7684;&#x65f6;&#x5019;&#x83b7;&#x53d6;&#x5230; `vm.&#x24;slot`&#xff0c;&#x76f8;&#x5173;&#x4ee3;&#x7801;&#x5728; `src/core/instance/render.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"246,247"}},{"content":"<pre data-lines=\"248,256\"><code data-lines=\"248,256\">export <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">initRender</span> (<span class=\"hljs-params\">vm: Component</span>) </span>{\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">parentVnode</span> = vm.<span class=\"hljs-variable\">&#x24;vnode</span> = options._parentVnode <span class=\"hljs-comment\">// the placeholder node in parent tree</span>\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">renderContext</span> = parentVnode &amp;&amp; parentVnode.context\n  vm.<span class=\"hljs-variable\">&#x24;slots</span> = <span class=\"hljs-title function_ invoke__\">resolveSlots</span>(options._renderChildren, renderContext)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"248,256"}},{"content":"<pre data-lines=\"257,258\"><code>`vm.&#x24;slots` &#x662f;&#x901a;&#x8fc7;&#x6267;&#x884c; `resolveSlots(options._renderChildren, renderContext)` &#x8fd4;&#x56de;&#x7684;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/render-helpers/resolve-slots.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"257,258"}},{"content":"<pre data-lines=\"259,303\"><code data-lines=\"259,303\"><span class=\"hljs-comment\">/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */</span>\nexport function resolveSlots (\n  children: ?Array&lt;VNode&gt;,\n  context: ?Component\n): { [key: string]: Array&lt;VNode&gt; } {\n  <span class=\"hljs-keyword\">const</span> slots = {}\n  <span class=\"hljs-keyword\">if</span> (!children) {\n    <span class=\"hljs-keyword\">return</span> slots\n  }\n  <span class=\"hljs-keyword\">for</span> (let i = <span class=\"hljs-number\">0</span>, l = children.length; i &lt; l; i++) {\n    <span class=\"hljs-keyword\">const</span> child = children[i]\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">data</span> = child.<span class=\"hljs-keyword\">data</span>\n    <span class=\"hljs-comment\">// remove slot attribute if the node is resolved as a Vue slot node</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">data</span> &amp;&amp; <span class=\"hljs-keyword\">data</span>.attrs &amp;&amp; <span class=\"hljs-keyword\">data</span>.attrs.slot) {\n      delete <span class=\"hljs-keyword\">data</span>.attrs.slot\n    }\n    <span class=\"hljs-comment\">// named slots should only be respected if the vnode was rendered in the</span>\n    <span class=\"hljs-comment\">// same context.</span>\n    <span class=\"hljs-keyword\">if</span> ((child.context === context || child.fnContext === context) &amp;&amp;\n      <span class=\"hljs-keyword\">data</span> &amp;&amp; <span class=\"hljs-keyword\">data</span>.slot != <span class=\"hljs-literal\">null</span>\n    ) {\n      <span class=\"hljs-keyword\">const</span> name = <span class=\"hljs-keyword\">data</span>.slot\n      <span class=\"hljs-keyword\">const</span> slot = (slots[name] || (slots[name] = []))\n      <span class=\"hljs-keyword\">if</span> (child.tag === <span class=\"hljs-string\">&apos;template&apos;</span>) {\n        slot.push.apply(slot, child.children || [])\n      } <span class=\"hljs-keyword\">else</span> {\n        slot.push(child)\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      (slots.default || (slots.default = [])).push(child)\n    }\n  }\n  <span class=\"hljs-comment\">// ignore slots that contains only whitespace</span>\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">const</span> name <span class=\"hljs-keyword\">in</span> slots) {\n    <span class=\"hljs-keyword\">if</span> (slots[name].every(isWhitespace)) {\n      delete slots[name]\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> slots\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"259,303"}},{"content":"<pre data-lines=\"304,313\"><code>`resolveSlots` &#x65b9;&#x6cd5;&#x63a5;&#x6536; 2 &#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570; `chilren` &#x5bf9;&#x5e94;&#x7684;&#x662f;&#x7236; `vnode` &#x7684; `children`&#xff0c;&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#x5c31;&#x662f; `&lt;app-layout&gt;` &#x548c; `&lt;/app-layout&gt;` &#x5305;&#x88f9;&#x7684;&#x5185;&#x5bb9;&#x3002;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570; `context` &#x662f;&#x7236; `vnode` &#x7684;&#x4e0a;&#x4e0b;&#x6587;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x7236;&#x7ec4;&#x4ef6;&#x7684; `vm` &#x5b9e;&#x4f8b;&#x3002;\n\n`resolveSlots` &#x51fd;&#x6570;&#x7684;&#x903b;&#x8f91;&#x5c31;&#x662f;&#x904d;&#x5386; `chilren`&#xff0c;&#x62ff;&#x5230;&#x6bcf;&#x4e00;&#x4e2a; `child` &#x7684; `data`&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7; `data.slot` &#x83b7;&#x53d6;&#x5230;&#x63d2;&#x69fd;&#x540d;&#x79f0;&#xff0c;&#x8fd9;&#x4e2a; `slot` &#x5c31;&#x662f;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x7f16;&#x8bd1;&#x7236;&#x7ec4;&#x4ef6;&#x5728; `codegen` &#x9636;&#x6bb5;&#x8bbe;&#x7f6e;&#x7684; `data.slot`&#x3002;&#x63a5;&#x7740;&#x4ee5;&#x63d2;&#x69fd;&#x540d;&#x79f0;&#x4e3a; `key` &#x628a; `child` &#x6dfb;&#x52a0;&#x5230; `slots` &#x4e2d;&#xff0c;&#x5982;&#x679c; `data.slot` &#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5219;&#x662f;&#x9ed8;&#x8ba4;&#x63d2;&#x69fd;&#x7684;&#x5185;&#x5bb9;&#xff0c;&#x5219;&#x628a;&#x5bf9;&#x5e94;&#x7684; `child` &#x6dfb;&#x52a0;&#x5230; `slots.defaults` &#x4e2d;&#x3002;&#x8fd9;&#x6837;&#x5c31;&#x83b7;&#x53d6;&#x5230;&#x6574;&#x4e2a; `slots`&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;`key` &#x662f;&#x63d2;&#x69fd;&#x540d;&#x79f0;&#xff0c;`value` &#x662f;&#x4e00;&#x4e2a; `vnode` &#x7c7b;&#x578b;&#x7684;&#x6570;&#x7ec4;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x53ef;&#x4ee5;&#x6709;&#x591a;&#x4e2a;&#x540c;&#x540d;&#x63d2;&#x69fd;&#x3002;\n\n&#x8fd9;&#x6837;&#x6211;&#x4eec;&#x5c31;&#x62ff;&#x5230;&#x4e86; `vm.&#x24;slots` &#x4e86;&#xff0c;&#x56de;&#x5230; `renderSlot` &#x51fd;&#x6570;&#xff0c;`const slotNodes = this.&#x24;slots[name]`&#xff0c;&#x6211;&#x4eec;&#x4e5f;&#x5c31;&#x80fd;&#x6839;&#x636e;&#x63d2;&#x69fd;&#x540d;&#x79f0;&#x83b7;&#x53d6;&#x5230;&#x5bf9;&#x5e94;&#x7684; `vnode` &#x6570;&#x7ec4;&#x4e86;&#xff0c;&#x8fd9;&#x4e2a;&#x6570;&#x7ec4;&#x91cc;&#x7684; `vnode` &#x90fd;&#x662f;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x521b;&#x5efa;&#x7684;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x5b9e;&#x73b0;&#x4e86;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x66ff;&#x6362;&#x5b50;&#x7ec4;&#x4ef6;&#x63d2;&#x69fd;&#x7684;&#x5185;&#x5bb9;&#x4e86;&#x3002;\n\n&#x5bf9;&#x5e94;&#x7684; `slot` &#x6e32;&#x67d3;&#x6210; `vnodes`&#xff0c;&#x4f5c;&#x4e3a;&#x5f53;&#x524d;&#x7ec4;&#x4ef6;&#x6e32;&#x67d3; `vnode` &#x7684; `children`&#xff0c;&#x4e4b;&#x540e;&#x7684;&#x6e32;&#x67d3;&#x8fc7;&#x7a0b;&#x4e4b;&#x524d;&#x5206;&#x6790;&#x8fc7;&#xff0c;&#x4e0d;&#x518d;&#x8d58;&#x8ff0;&#x3002;\n\n&#x6211;&#x4eec;&#x77e5;&#x9053;&#x5728;&#x666e;&#x901a;&#x63d2;&#x69fd;&#x4e2d;&#xff0c;&#x7236;&#x7ec4;&#x4ef6;&#x5e94;&#x7528;&#x5230;&#x5b50;&#x7ec4;&#x4ef6;&#x63d2;&#x69fd;&#x91cc;&#x7684;&#x6570;&#x636e;&#x90fd;&#x662f;&#x7ed1;&#x5b9a;&#x5230;&#x7236;&#x7ec4;&#x4ef6;&#x7684;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x6e32;&#x67d3;&#x6210; `vnode` &#x7684;&#x65f6;&#x673a;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x662f;&#x7236;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x4f8b;&#x3002;&#x4f46;&#x662f;&#x5728;&#x4e00;&#x4e9b;&#x5b9e;&#x9645;&#x5f00;&#x53d1;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x60f3;&#x901a;&#x8fc7;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x4e00;&#x4e9b;&#x6570;&#x636e;&#x6765;&#x51b3;&#x5b9a;&#x7236;&#x7ec4;&#x4ef6;&#x5b9e;&#x73b0;&#x63d2;&#x69fd;&#x7684;&#x903b;&#x8f91;&#xff0c;Vue &#x63d0;&#x4f9b;&#x4e86;&#x53e6;&#x4e00;&#x79cd;&#x63d2;&#x69fd;&#x2014;&#x2014;&#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x5c31;&#x6765;&#x5206;&#x6790;&#x4e00;&#x4e0b;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"304,313"}}],"payload":{"tag":"h2","lines":"56,58"}},{"content":"<a href=\"#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD\">#</a> &#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;","children":[{"content":"<pre data-lines=\"317,318\"><code>&#x4e3a;&#x4e86;&#x66f4;&#x52a0;&#x76f4;&#x89c2;&#xff0c;&#x6211;&#x4eec;&#x4e5f;&#x662f;&#x901a;&#x8fc7;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x6765;&#x5206;&#x6790;&#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;&#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"317,318"}},{"content":"<pre data-lines=\"319,346\"><code data-lines=\"319,346\"><span class=\"language-xml\">let Child = {\n  template: &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;child&quot;</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slot</span> <span class=\"hljs-attr\">text</span>=<span class=\"hljs-string\">&quot;Hello &quot;</span> <span class=\"hljs-attr\">:msg</span>=<span class=\"hljs-string\">&quot;msg&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slot</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>&apos;,\n  data() {\n    return {\n      msg: &apos;Vue&apos;\n    }\n  }\n}\n\nlet vm = new Vue({\n  el: &apos;#app&apos;,\n  template: &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">child</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot-scope</span>=<span class=\"hljs-string\">&quot;props&quot;</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Hello from parent<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span></span><span class=\"hljs-template-variable\">{{ <span class=\"hljs-name\">props.text</span> + props.msg}}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">child</span>&gt;</span>&apos; +\n  &apos;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>&apos;,\n  components: {\n    Child\n  }\n}) \n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"319,346"}},{"content":"<pre data-lines=\"347,348\"><code>&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684; DOM &#x7ed3;&#x6784;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"347,348"}},{"content":"<pre data-lines=\"349,357\"><code data-lines=\"349,357\">&lt;div&gt;\n  &lt;div <span class=\"hljs-keyword\">class</span>=&quot;<span class=\"hljs-symbol\">child</span>&quot;&gt;\n    &lt;<span class=\"hljs-symbol\">p</span>&gt;<span class=\"hljs-symbol\">Hello</span> <span class=\"hljs-symbol\">from</span> <span class=\"hljs-symbol\">parent</span>&lt;/<span class=\"hljs-symbol\">p</span>&gt;\n    &lt;<span class=\"hljs-symbol\">p</span>&gt;<span class=\"hljs-symbol\">Hello</span> <span class=\"hljs-symbol\">Vue</span>&lt;/<span class=\"hljs-symbol\">p</span>&gt;\n  &lt;/<span class=\"hljs-symbol\">div</span>&gt;\n&lt;/<span class=\"hljs-symbol\">div</span>&gt; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"349,357"}},{"content":"<pre data-lines=\"358,361\"><code>&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x5b50;&#x7ec4;&#x4ef6;&#x7684; `slot` &#x6807;&#x7b7e;&#x591a;&#x4e86; `text` &#x5c5e;&#x6027;&#xff0c;&#x4ee5;&#x53ca; `:msg` &#x5c5e;&#x6027;&#x3002;&#x7236;&#x7ec4;&#x4ef6;&#x5b9e;&#x73b0;&#x63d2;&#x69fd;&#x7684;&#x90e8;&#x5206;&#x591a;&#x4e86;&#x4e00;&#x4e2a; `template` &#x6807;&#x7b7e;&#xff0c;&#x4ee5;&#x53ca; `scope-slot` &#x5c5e;&#x6027;&#xff0c;&#x5176;&#x5b9e;&#x5728; Vue 2.5+ &#x7248;&#x672c;&#xff0c;`scoped-slot` &#x53ef;&#x4ee5;&#x4f5c;&#x7528;&#x5728;&#x666e;&#x901a;&#x5143;&#x7d20;&#x4e0a;&#x3002;&#x8fd9;&#x4e9b;&#x5c31;&#x662f;&#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;&#x548c;&#x666e;&#x901a;&#x63d2;&#x69fd;&#x5728;&#x5199;&#x6cd5;&#x4e0a;&#x7684;&#x5dee;&#x522b;&#x3002;\n\n&#x5728;&#x7f16;&#x8bd1;&#x9636;&#x6bb5;&#xff0c;&#x4ecd;&#x7136;&#x662f;&#x5148;&#x7f16;&#x8bd1;&#x7236;&#x7ec4;&#x4ef6;&#xff0c;&#x540c;&#x6837;&#x662f;&#x901a;&#x8fc7; `processSlot` &#x51fd;&#x6570;&#x53bb;&#x5904;&#x7406; `scoped-slot`&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728;&#x5728; `src/compiler/parser/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"358,361"}},{"content":"<pre data-lines=\"362,394\"><code data-lines=\"362,394\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">processSlot</span> <span class=\"hljs-params\">(el)</span> {\n  // ...\n  <span class=\"hljs-keyword\">let</span> slotScope\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">el</span>.<span class=\"hljs-keyword\">tag</span> === <span class=\"hljs-string\">&apos;template&apos;</span>) {\n    slotScope = getAndRemoveAttr(<span class=\"hljs-keyword\">el</span>, <span class=\"hljs-string\">&apos;scope&apos;</span>)\n    /* istanbul ignore <span class=\"hljs-keyword\">if</span> */\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; slotScope) {\n      warn(\n        `the <span class=\"hljs-string\">&quot;scope&quot;</span> attribute <span class=\"hljs-keyword\">for</span> scoped slots have been deprecated <span class=\"hljs-built_in\">and</span> ` +\n        `replaced by <span class=\"hljs-string\">&quot;slot-scope&quot;</span> since <span class=\"hljs-number\">2.5</span>. The <span class=\"hljs-keyword\">new</span> <span class=\"hljs-string\">&quot;slot-scope&quot;</span> attribute ` +\n        `can also <span class=\"hljs-keyword\">be</span> used <span class=\"hljs-keyword\">on</span> plain elements in addition <span class=\"hljs-keyword\">to</span> <span class=\"hljs-symbol\">&lt;template&gt;</span> <span class=\"hljs-keyword\">to</span> ` +\n        `denote scoped slots.`,\n        true\n      )\n    }\n    <span class=\"hljs-keyword\">el</span>.slotScope = slotScope || getAndRemoveAttr(<span class=\"hljs-keyword\">el</span>, <span class=\"hljs-string\">&apos;slot-scope&apos;</span>)\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> ((slotScope = getAndRemoveAttr(<span class=\"hljs-keyword\">el</span>, <span class=\"hljs-string\">&apos;slot-scope&apos;</span>))) {\n    /* istanbul ignore <span class=\"hljs-keyword\">if</span> */\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-keyword\">el</span>.attrsMap[<span class=\"hljs-string\">&apos;v-for&apos;</span>]) {\n      warn(\n        `Ambiguous combined usage of slot-scope <span class=\"hljs-built_in\">and</span> v-<span class=\"hljs-keyword\">for</span> <span class=\"hljs-keyword\">on</span> &lt;&#x24;{<span class=\"hljs-keyword\">el</span>.<span class=\"hljs-keyword\">tag</span>}&gt; ` +\n        `(v-<span class=\"hljs-keyword\">for</span> takes higher priority). Use <span class=\"hljs-keyword\">a</span> wrapper <span class=\"hljs-symbol\">&lt;template&gt;</span> <span class=\"hljs-keyword\">for</span> the ` +\n        `scoped slot <span class=\"hljs-keyword\">to</span> <span class=\"hljs-keyword\">make</span> it clearer.`,\n        true\n      )\n    }\n    <span class=\"hljs-keyword\">el</span>.slotScope = slotScope\n  }\n  // ...\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"362,394"}},{"content":"<pre data-lines=\"395,396\"><code>&#x8fd9;&#x5757;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x8bfb;&#x53d6; `scoped-slot` &#x5c5e;&#x6027;&#x5e76;&#x8d4b;&#x503c;&#x7ed9;&#x5f53;&#x524d; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684; `slotScope` &#x5c5e;&#x6027;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x5728;&#x6784;&#x9020; AST &#x6811;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c;&#x4ee5;&#x4e0b;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"395,396"}},{"content":"<pre data-lines=\"397,409\"><code data-lines=\"397,409\"><span class=\"hljs-keyword\">if</span> (element.elseif || element.<span class=\"hljs-keyword\">else</span>) {\n  processIfConditions(element, currentParent)\n} <span class=\"hljs-function\"><span class=\"hljs-keyword\">else</span> <span class=\"hljs-title\">if</span> <span class=\"hljs-params\">(element.slotScope)</span> </span>{ \n  currentParent.plain = <span class=\"hljs-keyword\">false</span>\n  <span class=\"hljs-keyword\">const</span> name = element.slotTarget || <span class=\"hljs-string\">&apos;&quot;default&quot;&apos;</span>\n  ;(currentParent.scopedSlots || (currentParent.scopedSlots = {}))[name] = element\n} <span class=\"hljs-keyword\">else</span> {\n  currentParent.children.push(element)\n  element.parent = currentParent\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"397,409"}},{"content":"<pre data-lines=\"410,413\"><code>&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x5bf9;&#x4e8e;&#x62e5;&#x6709; `scopedSlot` &#x5c5e;&#x6027;&#x7684; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x800c;&#x8a00;&#xff0c;&#x662f;&#x4e0d;&#x4f1a;&#x4f5c;&#x4e3a; `children` &#x6dfb;&#x52a0;&#x5230;&#x5f53;&#x524d; AST &#x6811;&#x4e2d;&#xff0c;&#x800c;&#x662f;&#x5b58;&#x5230;&#x7236; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684; `scopedSlots` &#x5c5e;&#x6027;&#x4e0a;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x4ee5;&#x63d2;&#x69fd;&#x540d;&#x79f0; `name` &#x4e3a; `key`&#x3002;\n\n&#x7136;&#x540e;&#x5728; `genData` &#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x4f1a;&#x5bf9; `scopedSlots` &#x505a;&#x5904;&#x7406;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"410,413"}},{"content":"<pre data-lines=\"414,448\"><code data-lines=\"414,448\">if (el.scopedSlots) {\n  data += `&#x24;{genScopedSlots(el.scopedSlots, <span class=\"hljs-keyword\">state</span>)},`\n}\n\nfunction genScopedSlots (\n  slots: { [key: string]: ASTElement },\n  <span class=\"hljs-keyword\">state</span>: CodegenState\n): string {\n  return `scopedSlots:_u([&#x24;{\n    Object.keys(slots).map(key =&gt; {\n      return genScopedSlot(key, slots[key], <span class=\"hljs-keyword\">state</span>)\n    }).join(&apos;,&apos;)\n  }])`\n}\n\nfunction genScopedSlot (\n  key: string,\n  el: ASTElement,\n  <span class=\"hljs-keyword\">state</span>: CodegenState\n): string {\n  if (el.<span class=\"hljs-keyword\">for</span> &amp;&amp; !el.<span class=\"hljs-keyword\">for</span>Processed) {\n    return genForScopedSlot(key, el, <span class=\"hljs-keyword\">state</span>)\n  }\n  <span class=\"hljs-keyword\">const</span> fn = `function(&#x24;{String(el.slotScope)}){` +\n    `return &#x24;{el.<span class=\"hljs-keyword\">tag</span> === &apos;template&apos;\n      ? el.if\n        ? `&#x24;{el.if}?&#x24;{genChildren(el, <span class=\"hljs-keyword\">state</span>) || &apos;undefined&apos;}:undefined`\n        : genChildren(el, <span class=\"hljs-keyword\">state</span>) || &apos;undefined&apos;\n      : genElement(el, <span class=\"hljs-keyword\">state</span>)\n    }}`\n  return `{key:&#x24;{key},fn:&#x24;{fn}}`\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"414,448"}},{"content":"<pre data-lines=\"449,452\"><code>`genScopedSlots` &#x5c31;&#x662f;&#x5bf9; `scopedSlots` &#x5bf9;&#x8c61;&#x904d;&#x5386;&#xff0c;&#x6267;&#x884c; `genScopedSlot`&#xff0c;&#x5e76;&#x628a;&#x7ed3;&#x679c;&#x7528;&#x9017;&#x53f7;&#x62fc;&#x63a5;&#xff0c;&#x800c; `genScopedSlot` &#x662f;&#x5148;&#x751f;&#x6210;&#x4e00;&#x6bb5;&#x51fd;&#x6570;&#x4ee3;&#x7801;&#xff0c;&#x5e76;&#x4e14;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x7684; `slotScope`&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x5199;&#x5728;&#x6807;&#x7b7e;&#x5c5e;&#x6027;&#x4e0a;&#x7684; `scoped-slot` &#x5bf9;&#x5e94;&#x7684;&#x503c;&#xff0c;&#x7136;&#x540e;&#x518d;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;`key` &#x4e3a;&#x63d2;&#x69fd;&#x540d;&#x79f0;&#xff0c;`fn` &#x4e3a;&#x751f;&#x6210;&#x7684;&#x51fd;&#x6570;&#x4ee3;&#x7801;&#x3002;\n\n&#x5bf9;&#x4e8e;&#x6211;&#x4eec;&#x8fd9;&#x4e2a;&#x4f8b;&#x5b50;&#x800c;&#x8a00;&#xff0c;&#x7236;&#x7ec4;&#x4ef6;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"449,452"}},{"content":"<pre data-lines=\"453,472\"><code data-lines=\"453,472\"><span class=\"hljs-selector-tag\">with</span>(this){\n  <span class=\"hljs-selector-tag\">return</span> <span class=\"hljs-selector-tag\">_c</span>(<span class=\"hljs-string\">&apos;div&apos;</span>,\n    [<span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;child&apos;</span>,\n      {<span class=\"hljs-attribute\">scopedSlots</span>:<span class=\"hljs-built_in\">_u</span>([\n        {\n          <span class=\"hljs-attribute\">key</span>: <span class=\"hljs-string\">&quot;default&quot;</span>,\n          <span class=\"hljs-attribute\">fn</span>: <span class=\"hljs-built_in\">function</span>(props) {\n            return [\n              <span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;p&apos;</span>,[<span class=\"hljs-built_in\">_v</span>(<span class=\"hljs-string\">&quot;Hello from parent&quot;</span>)]),\n              <span class=\"hljs-built_in\">_c</span>(<span class=\"hljs-string\">&apos;p&apos;</span>,[<span class=\"hljs-built_in\">_v</span>(<span class=\"hljs-built_in\">_s</span>(props.text + props.msg))])\n            ]\n          }\n        }])\n      }\n    )],\n  <span class=\"hljs-number\">1</span>)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"453,472"}},{"content":"<pre data-lines=\"473,474\"><code>&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x5b83;&#x548c;&#x666e;&#x901a;&#x63d2;&#x69fd;&#x7236;&#x7ec4;&#x4ef6;&#x7f16;&#x8bd1;&#x7ed3;&#x679c;&#x7684;&#x4e00;&#x4e2a;&#x5f88;&#x660e;&#x663e;&#x7684;&#x533a;&#x522b;&#x5c31;&#x662f;&#x6ca1;&#x6709; `children` &#x4e86;&#xff0c;`data` &#x90e8;&#x5206;&#x591a;&#x4e86;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5e76;&#x4e14;&#x6267;&#x884c;&#x4e86; `_u` &#x65b9;&#x6cd5;&#xff0c;&#x5728;&#x7f16;&#x8bd1;&#x7ae0;&#x8282;&#x6211;&#x4eec;&#x4e86;&#x89e3;&#x5230;&#xff0c;`_u` &#x51fd;&#x6570;&#x5bf9;&#x7684;&#x5c31;&#x662f; `resolveScopedSlots` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/render-heplpers/resolve-slots.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"473,474"}},{"content":"<pre data-lines=\"475,491\"><code data-lines=\"475,491\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resolveScopedSlots</span> (<span class=\"hljs-params\">\n  fns: ScopedSlotsData, <span class=\"hljs-comment\">// see flow/vnode</span>\n  res?: <span class=\"hljs-built_in\">Object</span>\n</span>): { [<span class=\"hljs-attr\">key</span>: string]: <span class=\"hljs-title class_\">Function</span> } {\n  res = res || {}\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; fns.<span class=\"hljs-property\">length</span>; i++) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(fns[i])) {\n      <span class=\"hljs-title function_\">resolveScopedSlots</span>(fns[i], res)\n    } <span class=\"hljs-keyword\">else</span> {\n      res[fns[i].<span class=\"hljs-property\">key</span>] = fns[i].<span class=\"hljs-property\">fn</span>\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> res\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"475,491"}},{"content":"<pre data-lines=\"492,495\"><code>&#x5176;&#x4e2d;&#xff0c;`fns` &#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x5143;&#x7d20;&#x90fd;&#x6709;&#x4e00;&#x4e2a; `key` &#x548c;&#x4e00;&#x4e2a; `fn`&#xff0c;`key` &#x5bf9;&#x5e94;&#x7684;&#x662f;&#x63d2;&#x69fd;&#x7684;&#x540d;&#x79f0;&#xff0c;`fn` &#x5bf9;&#x5e94;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x3002;&#x6574;&#x4e2a;&#x903b;&#x8f91;&#x5c31;&#x662f;&#x904d;&#x5386;&#x8fd9;&#x4e2a; `fns` &#x6570;&#x7ec4;&#xff0c;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5bf9;&#x8c61;&#x7684; `key` &#x5c31;&#x662f;&#x63d2;&#x69fd;&#x540d;&#x79f0;&#xff0c;`value` &#x5c31;&#x662f;&#x51fd;&#x6570;&#x3002;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x7684;&#x6267;&#x884c;&#x65f6;&#x673a;&#x7a0d;&#x540e;&#x6211;&#x4eec;&#x4f1a;&#x4ecb;&#x7ecd;&#x3002;\n\n&#x63a5;&#x7740;&#x6211;&#x4eec;&#x518d;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x7f16;&#x8bd1;&#xff0c;&#x548c;&#x666e;&#x901a;&#x63d2;&#x69fd;&#x7684;&#x8fc7;&#x7a0b;&#x57fa;&#x672c;&#x76f8;&#x540c;&#xff0c;&#x552f;&#x4e00;&#x4e00;&#x70b9;&#x533a;&#x522b;&#x662f;&#x5728; `genSlot` &#x7684;&#x65f6;&#x5019;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"492,495"}},{"content":"<pre data-lines=\"496,515\"><code data-lines=\"496,515\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genSlot</span> (<span class=\"hljs-params\">el: ASTElement, state: CodegenState</span>): string {\n  <span class=\"hljs-keyword\">const</span> slotName = el.<span class=\"hljs-property\">slotName</span> || <span class=\"hljs-string\">&apos;&quot;default&quot;&apos;</span>\n  <span class=\"hljs-keyword\">const</span> children = <span class=\"hljs-title function_\">genChildren</span>(el, state)\n  <span class=\"hljs-keyword\">let</span> res = <span class=\"hljs-string\">`_t(<span class=\"hljs-subst\">&#x24;{slotName}</span><span class=\"hljs-subst\">&#x24;{children ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{children}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span>}</span>`</span>\n  <span class=\"hljs-keyword\">const</span> attrs = el.<span class=\"hljs-property\">attrs</span> &amp;&amp; <span class=\"hljs-string\">`{<span class=\"hljs-subst\">&#x24;{el.attrs.map(a =&gt; <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{camelize(a.name)}</span>:<span class=\"hljs-subst\">&#x24;{a.value}</span>`</span>).join(<span class=\"hljs-string\">&apos;,&apos;</span>)}</span>}`</span>\n  <span class=\"hljs-keyword\">const</span> bind = el.<span class=\"hljs-property\">attrsMap</span>[<span class=\"hljs-string\">&apos;v-bind&apos;</span>]\n  <span class=\"hljs-keyword\">if</span> ((attrs || bind) &amp;&amp; !children) {\n    res += <span class=\"hljs-string\">`,null`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (attrs) {\n    res += <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{attrs}</span>`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (bind) {\n    res += <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{attrs ? <span class=\"hljs-string\">&apos;&apos;</span> : <span class=\"hljs-string\">&apos;,null&apos;</span>}</span>,<span class=\"hljs-subst\">&#x24;{bind}</span>`</span>\n  }\n  <span class=\"hljs-keyword\">return</span> res + <span class=\"hljs-string\">&apos;)&apos;</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"496,515"}},{"content":"<pre data-lines=\"516,517\"><code>&#x5b83;&#x4f1a;&#x5bf9; `attrs` &#x548c; `v-bind` &#x505a;&#x5904;&#x7406;&#xff0c;&#x5bf9;&#x5e94;&#x5230;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#xff0c;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"516,517"}},{"content":"<pre data-lines=\"518,527\"><code data-lines=\"518,527\"><span class=\"hljs-title function_\">with</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">this</span></span>){\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">_c</span>(<span class=\"hljs-string\">&apos;div&apos;</span>,\n    {<span class=\"hljs-attr\">staticClass</span>:<span class=\"hljs-string\">&quot;child&quot;</span>},\n    [<span class=\"hljs-title function_\">_t</span>(<span class=\"hljs-string\">&quot;default&quot;</span>,<span class=\"hljs-literal\">null</span>,\n      {<span class=\"hljs-attr\">text</span>:<span class=\"hljs-string\">&quot;Hello &quot;</span>,<span class=\"hljs-attr\">msg</span>:msg}\n    )],\n  <span class=\"hljs-number\">2</span>)} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"518,527"}},{"content":"<pre data-lines=\"528,529\"><code>`_t` &#x65b9;&#x6cd5;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x4ecb;&#x7ecd;&#x8fc7;&#xff0c;&#x5bf9;&#x5e94;&#x7684;&#x662f; `renderSlot` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"528,529"}},{"content":"<pre data-lines=\"530,563\"><code data-lines=\"530,563\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">renderSlot</span> (<span class=\"hljs-params\">\n  name: string,\n  fallback: ?<span class=\"hljs-built_in\">Array</span>&lt;VNode&gt;,\n  props: ?<span class=\"hljs-built_in\">Object</span>,\n  bindObject: ?<span class=\"hljs-built_in\">Object</span>\n</span>): ?<span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">VNode</span>&gt; {\n  <span class=\"hljs-keyword\">const</span> scopedSlotFn = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">&#x24;scopedSlots</span>[name]\n  <span class=\"hljs-keyword\">let</span> nodes\n  <span class=\"hljs-keyword\">if</span> (scopedSlotFn) {\n    props = props || {}\n    <span class=\"hljs-keyword\">if</span> (bindObject) {\n      <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; !<span class=\"hljs-title function_\">isObject</span>(bindObject)) {\n        <span class=\"hljs-title function_\">warn</span>(\n          <span class=\"hljs-string\">&apos;slot v-bind without argument expects an Object&apos;</span>,\n          <span class=\"hljs-variable language_\">this</span>\n        )\n      }\n      props = <span class=\"hljs-title function_\">extend</span>(<span class=\"hljs-title function_\">extend</span>({}, bindObject), props)\n    }\n    nodes = <span class=\"hljs-title function_\">scopedSlotFn</span>(props) || fallback\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// ...</span>\n  }\n\n  <span class=\"hljs-keyword\">const</span> target = props &amp;&amp; props.<span class=\"hljs-property\">slot</span>\n  <span class=\"hljs-keyword\">if</span> (target) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.&#x24;createElement(<span class=\"hljs-string\">&apos;template&apos;</span>, { <span class=\"hljs-attr\">slot</span>: target }, nodes)\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">return</span> nodes\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"530,563"}},{"content":"<pre data-lines=\"564,565\"><code>&#x6211;&#x4eec;&#x53ea;&#x5173;&#x6ce8;&#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;&#x7684;&#x903b;&#x8f91;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a; `this.&#x24;scopedSlots` &#x53c8;&#x662f;&#x5728;&#x4ec0;&#x4e48;&#x5730;&#x65b9;&#x5b9a;&#x4e49;&#x7684;&#x5462;&#xff0c;&#x539f;&#x6765;&#x5728;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x6e32;&#x67d3;&#x51fd;&#x6570;&#x6267;&#x884c;&#x524d;&#xff0c;&#x5728; `vm_render` &#x65b9;&#x6cd5;&#x5185;&#xff0c;&#x6709;&#x8fd9;&#x4e48;&#x4e00;&#x6bb5;&#x903b;&#x8f91;&#xff0c;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/render.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,565"}},{"content":"<pre data-lines=\"566,571\"><code data-lines=\"566,571\"> if (_parentVnode) {\n  vm.&#x24;<span class=\"hljs-keyword\">scopedSlots </span>= _parentVnode<span class=\"hljs-meta\">.data</span>.<span class=\"hljs-keyword\">scopedSlots </span><span class=\"hljs-title\">||</span> emptyObject\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"566,571"}},{"content":"<pre data-lines=\"572,575\"><code>&#x8fd9;&#x4e2a; `_parentVNode.data.scopedSlots` &#x5bf9;&#x5e94;&#x7684;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x901a;&#x8fc7;&#x6267;&#x884c; `resolveScopedSlots` &#x8fd4;&#x56de;&#x7684;&#x5bf9;&#x8c61;&#x3002;&#x6240;&#x4ee5;&#x56de;&#x5230; `genSlot` &#x51fd;&#x6570;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x63d2;&#x69fd;&#x7684;&#x540d;&#x79f0;&#x62ff;&#x5230;&#x5bf9;&#x5e94;&#x7684; `scopedSlotFn`&#xff0c;&#x7136;&#x540e;&#x628a;&#x76f8;&#x5173;&#x7684;&#x6570;&#x636e;&#x6269;&#x5c55;&#x5230; `props` &#x4e0a;&#xff0c;&#x4f5c;&#x4e3a;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x539f;&#x6765;&#x4e4b;&#x524d;&#x6211;&#x4eec;&#x63d0;&#x5230;&#x7684;&#x51fd;&#x6570;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x6267;&#x884c;&#xff0c;&#x7136;&#x540e;&#x8fd4;&#x56de;&#x751f;&#x6210;&#x7684; `vnodes`&#xff0c;&#x4e3a;&#x540e;&#x7eed;&#x6e32;&#x67d3;&#x8282;&#x70b9;&#x7528;&#x3002;\n\n&#x540e;&#x7eed;&#x6d41;&#x7a0b;&#x4e4b;&#x524d;&#x5df2;&#x4ecb;&#x7ecd;&#x8fc7;&#xff0c;&#x4e0d;&#x518d;&#x8d58;&#x8ff0;&#xff0c;&#x90a3;&#x4e48;&#x81f3;&#x6b64;&#xff0c;&#x4f5c;&#x7528;&#x57df;&#x63d2;&#x69fd;&#x7684;&#x5b9e;&#x73b0;&#x4e5f;&#x5c31;&#x5206;&#x6790;&#x5b8c;&#x6bd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"572,575"}}],"payload":{"tag":"h2","lines":"314,316"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[],"payload":{"tag":"h2","lines":"576,578"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
