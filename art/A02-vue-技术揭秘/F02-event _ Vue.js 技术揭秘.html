<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#event\">#</a> event","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,9\"><code>&#x6211;&#x4eec;&#x5e73;&#x65f6;&#x5f00;&#x53d1;&#x5de5;&#x4f5c;&#x4e2d;&#xff0c;&#x5904;&#x7406;&#x7ec4;&#x4ef6;&#x95f4;&#x7684;&#x901a;&#x8baf;&#xff0c;&#x539f;&#x751f;&#x7684;&#x4ea4;&#x4e92;&#xff0c;&#x90fd;&#x79bb;&#x4e0d;&#x5f00;&#x4e8b;&#x4ef6;&#x3002;&#x5bf9;&#x4e8e;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x5143;&#x7d20;&#xff0c;&#x6211;&#x4eec;&#x4e0d;&#x4ec5;&#x4ec5;&#x53ef;&#x4ee5;&#x7ed1;&#x5b9a;&#x539f;&#x751f;&#x7684; DOM &#x4e8b;&#x4ef6;&#xff0c;&#x8fd8;&#x53ef;&#x4ee5;&#x7ed1;&#x5b9a;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#xff0c;&#x975e;&#x5e38;&#x7075;&#x6d3b;&#x548c;&#x65b9;&#x4fbf;&#x3002;&#x90a3;&#x4e48;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x4ece;&#x6e90;&#x7801;&#x89d2;&#x5ea6;&#x6765;&#x770b;&#x770b;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x3002;\n\n&#x4e3a;&#x4e86;&#x66f4;&#x52a0;&#x76f4;&#x89c2;&#xff0c;&#x6211;&#x4eec;&#x901a;&#x8fc7;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x6765;&#x5206;&#x6790;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,9"}},{"content":"<pre data-lines=\"10,41\"><code data-lines=\"10,41\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-title class_\">Child</span> = {\n  <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">&apos;&lt;button @click=&quot;clickHandler(&#x24;event)&quot;&gt;&apos;</span> +\n  <span class=\"hljs-string\">&apos;click me&apos;</span> +\n  <span class=\"hljs-string\">&apos;&lt;/button&gt;&apos;</span>,\n  <span class=\"hljs-attr\">methods</span>: {\n    <span class=\"hljs-title function_\">clickHandler</span>(<span class=\"hljs-params\">e</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Button clicked!&apos;</span>, e)\n      <span class=\"hljs-variable language_\">this</span>.&#x24;emit(<span class=\"hljs-string\">&apos;select&apos;</span>)\n    }\n  }\n}\n\n<span class=\"hljs-keyword\">let</span> vm = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Vue</span>({\n  <span class=\"hljs-attr\">el</span>: <span class=\"hljs-string\">&apos;#app&apos;</span>,\n  <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">&apos;&lt;div&gt;&apos;</span> +\n  <span class=\"hljs-string\">&apos;&lt;child @select=&quot;selectHandler&quot; @click.native.prevent=&quot;clickHandler&quot;&gt;&lt;/child&gt;&apos;</span> +\n  <span class=\"hljs-string\">&apos;&lt;/div&gt;&apos;</span>,\n  <span class=\"hljs-attr\">methods</span>: {\n    <span class=\"hljs-title function_\">clickHandler</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Child clicked!&apos;</span>)\n    },\n    <span class=\"hljs-title function_\">selectHandler</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Child select!&apos;</span>)\n    }\n  },\n  <span class=\"hljs-attr\">components</span>: {\n    <span class=\"hljs-title class_\">Child</span>\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"10,41"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#%E7%BC%96%E8%AF%91\">#</a> &#x7f16;&#x8bd1;","children":[{"content":"<pre data-lines=\"45,46\"><code>&#x5148;&#x4ece;&#x7f16;&#x8bd1;&#x9636;&#x6bb5;&#x5f00;&#x59cb;&#x770b;&#x8d77;&#xff0c;&#x5728; `parse` &#x9636;&#x6bb5;&#xff0c;&#x4f1a;&#x6267;&#x884c; `processAttrs` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/parser/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"45,46"}},{"content":"<pre data-lines=\"47,86\"><code data-lines=\"47,86\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> onRE = <span class=\"hljs-regexp\">/^@|^v-on:/</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> dirRE = <span class=\"hljs-regexp\">/^v-|^@|^:/</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> bindRE = <span class=\"hljs-regexp\">/^:|^v-bind:/</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">processAttrs</span> (<span class=\"hljs-params\">el</span>) {\n  <span class=\"hljs-keyword\">const</span> list = el.<span class=\"hljs-property\">attrsList</span>\n  <span class=\"hljs-keyword\">let</span> i, l, name, rawName, value, modifiers, isProp\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>, l = list.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n    name = rawName = list[i].<span class=\"hljs-property\">name</span>\n    value = list[i].<span class=\"hljs-property\">value</span>\n    <span class=\"hljs-keyword\">if</span> (dirRE.<span class=\"hljs-title function_\">test</span>(name)) {   \n      el.<span class=\"hljs-property\">hasBindings</span> = <span class=\"hljs-literal\">true</span>\n      modifiers = <span class=\"hljs-title function_\">parseModifiers</span>(name)\n      <span class=\"hljs-keyword\">if</span> (modifiers) {\n        name = name.<span class=\"hljs-title function_\">replace</span>(modifierRE, <span class=\"hljs-string\">&apos;&apos;</span>)\n      }\n      <span class=\"hljs-keyword\">if</span> (bindRE.<span class=\"hljs-title function_\">test</span>(name)) {\n        <span class=\"hljs-comment\">// ..</span>\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (onRE.<span class=\"hljs-title function_\">test</span>(name)) {\n        name = name.<span class=\"hljs-title function_\">replace</span>(onRE, <span class=\"hljs-string\">&apos;&apos;</span>)\n        <span class=\"hljs-title function_\">addHandler</span>(el, name, value, modifiers, <span class=\"hljs-literal\">false</span>, warn)\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-comment\">// ...</span>\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-comment\">// ...</span>\n    }\n  }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">parseModifiers</span> (<span class=\"hljs-params\">name: string</span>): <span class=\"hljs-title class_\">Object</span> | <span class=\"hljs-keyword\">void</span> {\n  <span class=\"hljs-keyword\">const</span> match = name.<span class=\"hljs-title function_\">match</span>(modifierRE)\n  <span class=\"hljs-keyword\">if</span> (match) {\n    <span class=\"hljs-keyword\">const</span> ret = {}\n    match.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">m</span> =&gt;</span> { ret[m.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>)] = <span class=\"hljs-literal\">true</span> })\n    <span class=\"hljs-keyword\">return</span> ret\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"47,86"}},{"content":"<pre data-lines=\"87,88\"><code>&#x5728;&#x5bf9;&#x6807;&#x7b7e;&#x5c5e;&#x6027;&#x7684;&#x5904;&#x7406;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x5224;&#x65ad;&#x5982;&#x679c;&#x662f;&#x6307;&#x4ee4;&#xff0c;&#x9996;&#x5148;&#x901a;&#x8fc7; `parseModifiers` &#x89e3;&#x6790;&#x51fa;&#x4fee;&#x9970;&#x7b26;&#xff0c;&#x7136;&#x540e;&#x5224;&#x65ad;&#x5982;&#x679c;&#x4e8b;&#x4ef6;&#x7684;&#x6307;&#x4ee4;&#xff0c;&#x5219;&#x6267;&#x884c; `addHandler(el, name, value, modifiers, false, warn)` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/helpers.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"87,88"}},{"content":"<pre data-lines=\"89,166\"><code data-lines=\"89,166\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">addHandler</span> (<span class=\"hljs-params\">\n  <span class=\"hljs-attr\">el</span>: <span class=\"hljs-title class_\">ASTElement</span>,\n  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-built_in\">string</span>,\n  <span class=\"hljs-attr\">value</span>: <span class=\"hljs-built_in\">string</span>,\n  <span class=\"hljs-attr\">modifiers</span>: ?<span class=\"hljs-title class_\">ASTModifiers</span>,\n  <span class=\"hljs-attr\">important</span>?: <span class=\"hljs-built_in\">boolean</span>,\n  <span class=\"hljs-attr\">warn</span>?: <span class=\"hljs-title class_\">Function</span>\n</span>) {\n  modifiers = modifiers || emptyObject\n  <span class=\"hljs-comment\">// warn prevent and passive modifier</span>\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (\n    process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; warn &amp;&amp;\n    modifiers.<span class=\"hljs-property\">prevent</span> &amp;&amp; modifiers.<span class=\"hljs-property\">passive</span>\n  ) {\n    <span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">&apos;passive and prevent can\\&apos;t be used together. &apos;</span> +\n      <span class=\"hljs-string\">&apos;Passive handler can\\&apos;t prevent default event.&apos;</span>\n    )\n  }\n\n  <span class=\"hljs-comment\">// check capture modifier</span>\n  <span class=\"hljs-keyword\">if</span> (modifiers.<span class=\"hljs-property\">capture</span>) {\n    <span class=\"hljs-keyword\">delete</span> modifiers.<span class=\"hljs-property\">capture</span>\n    name = <span class=\"hljs-string\">&apos;!&apos;</span> + name <span class=\"hljs-comment\">// mark the event as captured</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (modifiers.<span class=\"hljs-property\">once</span>) {\n    <span class=\"hljs-keyword\">delete</span> modifiers.<span class=\"hljs-property\">once</span>\n    name = <span class=\"hljs-string\">&apos;~&apos;</span> + name <span class=\"hljs-comment\">// mark the event as once</span>\n  }\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (modifiers.<span class=\"hljs-property\">passive</span>) {\n    <span class=\"hljs-keyword\">delete</span> modifiers.<span class=\"hljs-property\">passive</span>\n    name = <span class=\"hljs-string\">&apos;&amp;&apos;</span> + name <span class=\"hljs-comment\">// mark the event as passive</span>\n  }\n\n  <span class=\"hljs-comment\">// normalize click.right and click.middle since they don&apos;t actually fire</span>\n  <span class=\"hljs-comment\">// this is technically browser-specific, but at least for now browsers are</span>\n  <span class=\"hljs-comment\">// the only target envs that have right/middle clicks.</span>\n  <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&apos;click&apos;</span>) {\n    <span class=\"hljs-keyword\">if</span> (modifiers.<span class=\"hljs-property\">right</span>) {\n      name = <span class=\"hljs-string\">&apos;contextmenu&apos;</span>\n      <span class=\"hljs-keyword\">delete</span> modifiers.<span class=\"hljs-property\">right</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (modifiers.<span class=\"hljs-property\">middle</span>) {\n      name = <span class=\"hljs-string\">&apos;mouseup&apos;</span>\n    }\n  }\n\n  <span class=\"hljs-keyword\">let</span> events\n  <span class=\"hljs-keyword\">if</span> (modifiers.<span class=\"hljs-property\">native</span>) {\n    <span class=\"hljs-keyword\">delete</span> modifiers.<span class=\"hljs-property\">native</span>\n    events = el.<span class=\"hljs-property\">nativeEvents</span> || (el.<span class=\"hljs-property\">nativeEvents</span> = {})\n  } <span class=\"hljs-keyword\">else</span> {\n    events = el.<span class=\"hljs-property\">events</span> || (el.<span class=\"hljs-property\">events</span> = {})\n  }\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">newHandler</span>: <span class=\"hljs-built_in\">any</span> = {\n    <span class=\"hljs-attr\">value</span>: value.<span class=\"hljs-title function_\">trim</span>()\n  }\n  <span class=\"hljs-keyword\">if</span> (modifiers !== emptyObject) {\n    newHandler.<span class=\"hljs-property\">modifiers</span> = modifiers\n  }\n\n  <span class=\"hljs-keyword\">const</span> handlers = events[name]\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(handlers)) {\n    important ? handlers.<span class=\"hljs-title function_\">unshift</span>(newHandler) : handlers.<span class=\"hljs-title function_\">push</span>(newHandler)\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (handlers) {\n    events[name] = important ? [newHandler, handlers] : [handlers, newHandler]\n  } <span class=\"hljs-keyword\">else</span> {\n    events[name] = newHandler\n  }\n\n  el.<span class=\"hljs-property\">plain</span> = <span class=\"hljs-literal\">false</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"89,166"}},{"content":"<pre data-lines=\"167,170\"><code>`addHandler` &#x51fd;&#x6570;&#x770b;&#x8d77;&#x6765;&#x957f;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x505a;&#x4e86; 3 &#x4ef6;&#x4e8b;&#x60c5;&#xff0c;&#x9996;&#x5148;&#x6839;&#x636e; `modifier` &#x4fee;&#x9970;&#x7b26;&#x5bf9;&#x4e8b;&#x4ef6;&#x540d; `name` &#x505a;&#x5904;&#x7406;&#xff0c;&#x63a5;&#x7740;&#x6839;&#x636e; `modifier.native` &#x5224;&#x65ad;&#x662f;&#x4e00;&#x4e2a;&#x7eaf;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x8fd8;&#x662f;&#x666e;&#x901a;&#x4e8b;&#x4ef6;&#xff0c;&#x5206;&#x522b;&#x5bf9;&#x5e94; `el.nativeEvents` &#x548c; `el.events`&#xff0c;&#x6700;&#x540e;&#x6309;&#x7167; `name` &#x5bf9;&#x4e8b;&#x4ef6;&#x505a;&#x5f52;&#x7c7b;&#xff0c;&#x5e76;&#x628a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x4fdd;&#x7559;&#x5230;&#x5bf9;&#x5e94;&#x7684;&#x4e8b;&#x4ef6;&#x4e2d;&#x3002;\n\n&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;&#x7236;&#x7ec4;&#x4ef6;&#x7684; `child` &#x8282;&#x70b9;&#x751f;&#x6210;&#x7684; `el.events` &#x548c; `el.nativeEvents` &#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"167,170"}},{"content":"<pre data-lines=\"171,187\"><code data-lines=\"171,187\">e<span class=\"hljs-attr\">l.events</span> <span class=\"hljs-operator\">=</span> {\n  <span class=\"hljs-params\">select:</span> {\n    <span class=\"hljs-params\">value:</span> &apos;selectHandler&apos;\n  }\n}\n\n<span class=\"hljs-attr\">el.nativeEvents</span> <span class=\"hljs-operator\">=</span> {\n  <span class=\"hljs-params\">click:</span> {\n    <span class=\"hljs-params\">value:</span> &apos;clickHandler&apos;,\n    <span class=\"hljs-params\">modifiers:</span> {\n      <span class=\"hljs-params\">prevent:</span> <span class=\"hljs-literal\">true</span>\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"171,187"}},{"content":"<pre data-lines=\"188,189\"><code>&#x5b50;&#x7ec4;&#x4ef6;&#x7684; `button` &#x8282;&#x70b9;&#x751f;&#x6210;&#x7684; `el.events` &#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"188,189"}},{"content":"<pre data-lines=\"190,197\"><code data-lines=\"190,197\">e<span class=\"hljs-attr\">l.events</span> <span class=\"hljs-operator\">=</span> {\n  <span class=\"hljs-params\">click:</span> {\n    <span class=\"hljs-params\">value:</span> &apos;clickHandler(&#x24;event)&apos;\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"190,197"}},{"content":"<pre data-lines=\"198,199\"><code>&#x7136;&#x540e;&#x5728; `codegen` &#x7684;&#x9636;&#x6bb5;&#xff0c;&#x4f1a;&#x5728; `genData` &#x51fd;&#x6570;&#x4e2d;&#x6839;&#x636e; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x4e0a;&#x7684; `events` &#x548c; `nativeEvents` &#x751f;&#x6210; `data` &#x6570;&#x636e;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/codegen/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"198,199"}},{"content":"<pre data-lines=\"200,214\"><code data-lines=\"200,214\">export function genData (el: ASTElement, <span class=\"hljs-keyword\">state</span>: CodegenState): string {\n  let data = &apos;{&apos;\n  // ...\n  if (el.events) {\n    data += `&#x24;{genHandlers(el.events, false, <span class=\"hljs-keyword\">state</span>.warn)},`\n  }\n  if (el.nativeEvents) {\n    data += `&#x24;{genHandlers(el.nativeEvents, true, <span class=\"hljs-keyword\">state</span>.warn)},`\n  }\n  // ...\n  return data\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"200,214"}},{"content":"<pre data-lines=\"215,216\"><code>&#x5bf9;&#x4e8e;&#x8fd9;&#x4e24;&#x4e2a;&#x5c5e;&#x6027;&#xff0c;&#x4f1a;&#x8c03;&#x7528; `genHandlers` &#x51fd;&#x6570;&#xff0c;&#x5b9a;&#x4e49;&#x5728; `src/compiler/codegen/events.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"215,216"}},{"content":"<pre data-lines=\"217,299\"><code data-lines=\"217,299\">export <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">genHandlers</span> (<span class=\"hljs-params\">\n  events: ASTElementHandlers,\n  isNative: <span class=\"hljs-keyword\">boolean</span>,\n  warn: Function\n</span>): <span class=\"hljs-title\">string</span> </span>{\n  let res = isNative ? <span class=\"hljs-string\">&apos;nativeOn:{&apos;</span> : <span class=\"hljs-string\">&apos;on:{&apos;</span>\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">name</span> in events) {\n    res += `<span class=\"hljs-string\">&quot;&#x24;{name}&quot;</span>:&#x24;{<span class=\"hljs-title function_ invoke__\">genHandler</span>(name, events[name])},`\n  }\n  <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_ invoke__\">slice</span>(<span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&apos;}&apos;</span>\n}\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">fnExpRE</span> = /^\\s*([\\w<span class=\"hljs-variable\">&#x24;_</span>]+|\\([^)]*?\\))\\s*=&gt;|^<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>\\<span class=\"hljs-title\">s</span>*\\(<span class=\"hljs-params\">/\n<span class=\"hljs-keyword\">const</span> simplePathRE = /^\\s*[A-Za-z_&#x24;][\\w&#x24;]*(<span class=\"hljs-params\">?:\\.[A-Za-z_&#x24;][\\w&#x24;]*|\\[<span class=\"hljs-string\">&apos;.*?&apos;</span>]|\\[<span class=\"hljs-string\">&quot;.*?&quot;</span>]|\\[\\d+]|\\[[A-Za-z_&#x24;][\\w&#x24;]*]</span>)*\\s*&#x24;/\nfunction genHandler (<span class=\"hljs-params\">\n  name: <span class=\"hljs-keyword\">string</span>,\n  handler: ASTElementHandler | Array&lt;ASTElementHandler&gt;\n</span>): <span class=\"hljs-keyword\">string</span> {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">!handler</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;function(){}&apos;</span>\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">Array.isArray(<span class=\"hljs-params\">handler</span>)</span>) {\n    <span class=\"hljs-keyword\">return</span> `[&#x24;{handler.map(<span class=\"hljs-params\">handler =&gt; genHandler(<span class=\"hljs-params\">name, handler</span>)</span>).join(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;,&apos;</span></span>)}]`\n  }\n\n  <span class=\"hljs-keyword\">const</span> isMethodPath = simplePathRE.test(<span class=\"hljs-params\">handler.value</span>)\n  <span class=\"hljs-keyword\">const</span> isFunctionExpression = fnExpRE.test(<span class=\"hljs-params\">handler.value</span>)\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">!handler.modifiers</span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">isMethodPath || isFunctionExpression</span>) {\n      <span class=\"hljs-keyword\">return</span> handler.value\n    }\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">__WEEX__ &amp;&amp; handler.params</span>) {\n      <span class=\"hljs-keyword\">return</span> genWeexHandler(<span class=\"hljs-params\">handler.params, handler.value</span>)\n    }\n    <span class=\"hljs-keyword\">return</span> `function(<span class=\"hljs-params\"><span class=\"hljs-variable\">&#x24;event</span></span>){&#x24;{handler.value}}` // inline statement\n  } <span class=\"hljs-keyword\">else</span> {\n    let code = <span class=\"hljs-string\">&apos;&apos;</span>\n    let genModifierCode = <span class=\"hljs-string\">&apos;&apos;</span>\n    <span class=\"hljs-keyword\">const</span> keys = []\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-params\"><span class=\"hljs-keyword\">const</span> key in handler.modifiers</span>) {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">modifierCode[key]</span>) {\n        genModifierCode += modifierCode[key]\n        // left/right\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">keyCodes[key]</span>) {\n          keys.push(<span class=\"hljs-params\">key</span>)\n        }\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">key === <span class=\"hljs-string\">&apos;exact&apos;</span></span>) {\n        <span class=\"hljs-keyword\">const</span> modifiers: ASTModifiers = (<span class=\"hljs-params\">handler.modifiers: any</span>)\n        genModifierCode += genGuard(<span class=\"hljs-params\">\n          [<span class=\"hljs-string\">&apos;ctrl&apos;</span>, <span class=\"hljs-string\">&apos;shift&apos;</span>, <span class=\"hljs-string\">&apos;alt&apos;</span>, <span class=\"hljs-string\">&apos;meta&apos;</span>]\n            .filter(<span class=\"hljs-params\">keyModifier =&gt; !modifiers[keyModifier]</span>)\n            .map(<span class=\"hljs-params\">keyModifier =&gt; `<span class=\"hljs-variable\">&#x24;event</span>.&#x24;{keyModifier}Key`</span>)\n            .join(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;||&apos;</span></span>)\n        </span>)\n      } <span class=\"hljs-keyword\">else</span> {\n        keys.push(<span class=\"hljs-params\">key</span>)\n      }\n    }\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">keys.length</span>) {\n      code += genKeyFilter(<span class=\"hljs-params\">keys</span>)\n    }\n    // Make sure modifiers like prevent <span class=\"hljs-keyword\">and</span> stop get executed after key filtering\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">genModifierCode</span>) {\n      code += genModifierCode\n    }\n    <span class=\"hljs-keyword\">const</span> handlerCode = isMethodPath\n      ? `<span class=\"hljs-keyword\">return</span> &#x24;{handler.value}(<span class=\"hljs-params\"><span class=\"hljs-variable\">&#x24;event</span></span>)`\n      : isFunctionExpression\n        ? `<span class=\"hljs-keyword\">return</span> (<span class=\"hljs-params\">&#x24;{handler.value}</span>)(<span class=\"hljs-params\"><span class=\"hljs-variable\">&#x24;event</span></span>)`\n        : handler.value\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-params\">__WEEX__ &amp;&amp; handler.params</span>) {\n      <span class=\"hljs-keyword\">return</span> genWeexHandler(<span class=\"hljs-params\">handler.params, code + handlerCode</span>)\n    }\n    <span class=\"hljs-keyword\">return</span> `function(<span class=\"hljs-params\"><span class=\"hljs-variable\">&#x24;event</span></span>){&#x24;{code}&#x24;{handlerCode}}`\n  }\n} \n</span></span></code></pre>","children":[],"payload":{"tag":"pre","lines":"217,299"}},{"content":"<pre data-lines=\"300,303\"><code>`genHandlers` &#x65b9;&#x6cd5;&#x904d;&#x5386;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61; `events`&#xff0c;&#x5bf9;&#x540c;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x540d;&#x79f0;&#x7684;&#x4e8b;&#x4ef6;&#x8c03;&#x7528; `genHandler(name, events[name])` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5185;&#x5bb9;&#x770b;&#x8d77;&#x6765;&#x591a;&#xff0c;&#x4f46;&#x5b9e;&#x9645;&#x4e0a;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x9996;&#x5148;&#x5148;&#x5224;&#x65ad;&#x5982;&#x679c; `handler` &#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x5c31;&#x904d;&#x5386;&#x5b83;&#x7136;&#x540e;&#x9012;&#x5f52;&#x8c03;&#x7528; `genHandler` &#x65b9;&#x6cd5;&#x5e76;&#x62fc;&#x63a5;&#x7ed3;&#x679c;&#xff0c;&#x7136;&#x540e;&#x5224;&#x65ad; `hanlder.value` &#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x7684;&#x8c03;&#x7528;&#x8def;&#x5f84;&#x8fd8;&#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x8868;&#x8fbe;&#x5f0f;&#xff0c; &#x63a5;&#x7740;&#x5bf9; `modifiers` &#x505a;&#x5224;&#x65ad;&#xff0c;&#x5bf9;&#x4e8e;&#x6ca1;&#x6709; `modifiers` &#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5c31;&#x6839;&#x636e; `handler.value` &#x4e0d;&#x540c;&#x60c5;&#x51b5;&#x5904;&#x7406;&#xff0c;&#x8981;&#x4e48;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#xff0c;&#x8981;&#x4e48;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x5305;&#x88f9;&#x7684;&#x8868;&#x8fbe;&#x5f0f;&#xff1b;&#x5bf9;&#x4e8e;&#x6709; `modifiers` &#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5219;&#x5bf9;&#x5404;&#x79cd;&#x4e0d;&#x540c;&#x7684; `modifer` &#x60c5;&#x51b5;&#x505a;&#x4e0d;&#x540c;&#x5904;&#x7406;&#xff0c;&#x6dfb;&#x52a0;&#x76f8;&#x5e94;&#x7684;&#x4ee3;&#x7801;&#x4e32;&#x3002;\n\n&#x90a3;&#x4e48;&#x5bf9;&#x4e8e;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x800c;&#x8a00;&#xff0c;&#x7236;&#x7ec4;&#x4ef6;&#x751f;&#x6210;&#x7684; `data` &#x4e32;&#x4e3a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"300,303"}},{"content":"<pre data-lines=\"304,314\"><code data-lines=\"304,314\">{\n  <span class=\"hljs-literal\">on</span>: {<span class=\"hljs-string\">&quot;select&quot;</span>: selectHandler},\n  nativeOn: {<span class=\"hljs-string\">&quot;click&quot;</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-variable\">&#x24;event</span>) {\n      <span class=\"hljs-variable\">&#x24;event.preventDefault</span>()<span class=\"hljs-comment\">;</span>\n      <span class=\"hljs-keyword\">return</span> clickHandler(<span class=\"hljs-variable\">&#x24;event</span>)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"304,314"}},{"content":"<pre data-lines=\"317,325\"><code data-lines=\"317,325\">{\n  <span class=\"hljs-literal\">on</span>: {<span class=\"hljs-string\">&quot;click&quot;</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-variable\">&#x24;event</span>) {\n      clickHandler(<span class=\"hljs-variable\">&#x24;event</span>)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"317,325"}},{"content":"<pre data-lines=\"326,327\"><code>&#x90a3;&#x4e48;&#x5230;&#x8fd9;&#x91cc;&#xff0c;&#x7f16;&#x8bd1;&#x90e8;&#x5206;&#x5b8c;&#x4e86;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x8fd0;&#x884c;&#x65f6;&#x90e8;&#x5206;&#x662f;&#x5982;&#x4f55;&#x5b9e;&#x73b0;&#x7684;&#x3002;&#x5176;&#x5b9e; Vue &#x7684;&#x4e8b;&#x4ef6;&#x6709; 2 &#x79cd;&#xff0c;&#x4e00;&#x79cd;&#x662f;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#xff0c;&#x4e00;&#x79cd;&#x662f;&#x7528;&#x6237;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#xff0c;&#x6211;&#x4eec;&#x5206;&#x522b;&#x6765;&#x770b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"326,327"}}],"payload":{"tag":"h2","lines":"42,44"}},{"content":"<a href=\"#dom-%E4%BA%8B%E4%BB%B6\">#</a> DOM &#x4e8b;&#x4ef6;","children":[{"content":"<pre data-lines=\"331,336\"><code>&#x8fd8;&#x8bb0;&#x5f97;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x5728; `patch` &#x7684;&#x65f6;&#x5019;&#x6267;&#x884c;&#x5404;&#x79cd; `module` &#x7684;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x5417;&#xff0c;&#x5f53;&#x65f6;&#x8fd9;&#x90e8;&#x5206;&#x662f;&#x7565;&#x8fc7;&#x7684;&#xff0c;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x53ea;&#x5206;&#x6790;&#x4e86; DOM &#x662f;&#x5982;&#x4f55;&#x6e32;&#x67d3;&#x7684;&#xff0c;&#x800c; DOM &#x5143;&#x7d20;&#x76f8;&#x5173;&#x7684;&#x5c5e;&#x6027;&#x3001;&#x6837;&#x5f0f;&#x3001;&#x4e8b;&#x4ef6;&#x7b49;&#x90fd;&#x662f;&#x901a;&#x8fc7;&#x8fd9;&#x4e9b; `module` &#x7684;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x5b8c;&#x6210;&#x8bbe;&#x7f6e;&#x7684;&#x3002;\n\n&#x6240;&#x6709;&#x548c; web &#x76f8;&#x5173;&#x7684; `module` &#x90fd;&#x5b9a;&#x4e49;&#x5728; `src/platforms/web/runtime/modules` &#x76ee;&#x5f55;&#x4e0b;&#xff0c;&#x6211;&#x4eec;&#x8fd9;&#x6b21;&#x53ea;&#x5173;&#x6ce8;&#x76ee;&#x5f55;&#x4e0b;&#x7684; `events.js` &#x5373;&#x53ef;&#x3002;\n\n&#x5728; `patch` &#x8fc7;&#x7a0b;&#x4e2d;&#x7684;&#x521b;&#x5efa;&#x9636;&#x6bb5;&#x548c;&#x66f4;&#x65b0;&#x9636;&#x6bb5;&#x90fd;&#x4f1a;&#x6267;&#x884c; `updateDOMListeners`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"331,336"}},{"content":"<pre data-lines=\"337,351\"><code data-lines=\"337,351\"><span class=\"hljs-keyword\">let</span> target: <span class=\"hljs-function\">any\nfunction <span class=\"hljs-title\">updateDOMListeners</span> (<span class=\"hljs-params\">oldVnode: VNodeWithData, vnode: VNodeWithData</span>)</span> {\n  <span class=\"hljs-keyword\">if</span> (isUndef(oldVnode.data.<span class=\"hljs-keyword\">on</span>) &amp;&amp; isUndef(vnode.data.<span class=\"hljs-keyword\">on</span>)) {\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">on</span> = vnode.data.<span class=\"hljs-keyword\">on</span> || {}\n  <span class=\"hljs-keyword\">const</span> oldOn = oldVnode.data.<span class=\"hljs-keyword\">on</span> || {}\n  target = vnode.<span class=\"hljs-function\">elm\n  <span class=\"hljs-title\">normalizeEvents</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">on</span></span>)\n  <span class=\"hljs-title\">updateListeners</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">on</span>, oldOn, <span class=\"hljs-keyword\">add</span>, <span class=\"hljs-keyword\">remove</span>, vnode.context</span>)\n  target</span> = undefined\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"337,351"}},{"content":"<pre data-lines=\"352,353\"><code>&#x9996;&#x5148;&#x83b7;&#x53d6; `vnode.data.on`&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x7684;&#x751f;&#x6210;&#x7684; `data` &#x4e2d;&#x5bf9;&#x5e94;&#x7684;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#xff0c;`target` &#x662f;&#x5f53;&#x524d; `vnode` &#x5bf9;&#x4e8e;&#x7684; DOM &#x5bf9;&#x8c61;&#xff0c;`normalizeEvents` &#x4e3b;&#x8981;&#x662f;&#x5bf9; `v-model` &#x76f8;&#x5173;&#x7684;&#x5904;&#x7406;&#xff0c;&#x6211;&#x4eec;&#x4e4b;&#x540e;&#x5206;&#x6790; `v-model` &#x7684;&#x65f6;&#x5019;&#x4f1a;&#x4ecb;&#x7ecd;&#xff0c;&#x63a5;&#x7740;&#x8c03;&#x7528; `updateListeners(on, oldOn, add, remove, vnode.context)` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/vdom/helpers/update-listeners.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"352,353"}},{"content":"<pre data-lines=\"354,395\"><code data-lines=\"354,395\">export <span class=\"hljs-keyword\">function</span> updateListeners (\n  <span class=\"hljs-keyword\">on</span>: <span class=\"hljs-keyword\">Object</span>,\n  oldOn: <span class=\"hljs-keyword\">Object</span>,\n  <span class=\"hljs-keyword\">add</span>: <span class=\"hljs-keyword\">Function</span>,\n  remove: <span class=\"hljs-keyword\">Function</span>,\n  vm: Component\n) {\n  let <span class=\"hljs-type\">name</span>, def, cur, <span class=\"hljs-built_in\">old</span>, event\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">name</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-keyword\">on</span>) {\n    def = cur = <span class=\"hljs-keyword\">on</span>[<span class=\"hljs-type\">name</span>]\n    <span class=\"hljs-built_in\">old</span> = oldOn[<span class=\"hljs-type\">name</span>]\n    event = normalizeEvent(<span class=\"hljs-type\">name</span>)\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-keyword\">if</span> (__WEEX__ &amp;&amp; isPlainObject(def)) {\n      cur = def.<span class=\"hljs-keyword\">handler</span>\n      event.params = def.params\n    }\n    <span class=\"hljs-keyword\">if</span> (isUndef(cur)) {\n      process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; warn(\n        `Invalid <span class=\"hljs-keyword\">handler</span> <span class=\"hljs-keyword\">for</span> event &quot;&#x24;{event.name}&quot;: got ` + String(cur),\n        vm\n      )\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (isUndef(<span class=\"hljs-built_in\">old</span>)) {\n      <span class=\"hljs-keyword\">if</span> (isUndef(cur.fns)) {\n        cur = <span class=\"hljs-keyword\">on</span>[<span class=\"hljs-type\">name</span>] = createFnInvoker(cur)\n      }\n      <span class=\"hljs-keyword\">add</span>(event.name, cur, event.once, event.capture, event.passive, event.params)\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (cur !== <span class=\"hljs-built_in\">old</span>) {\n      <span class=\"hljs-built_in\">old</span>.fns = cur\n      <span class=\"hljs-keyword\">on</span>[<span class=\"hljs-type\">name</span>] = <span class=\"hljs-built_in\">old</span>\n    }\n  }\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">name</span> <span class=\"hljs-keyword\">in</span> oldOn) {\n    <span class=\"hljs-keyword\">if</span> (isUndef(<span class=\"hljs-keyword\">on</span>[<span class=\"hljs-type\">name</span>])) {\n      event = normalizeEvent(<span class=\"hljs-type\">name</span>)\n      remove(event.name, oldOn[<span class=\"hljs-type\">name</span>], event.capture)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"354,395"}},{"content":"<pre data-lines=\"396,399\"><code>`updateListeners` &#x7684;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x904d;&#x5386; `on` &#x53bb;&#x6dfb;&#x52a0;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#xff0c;&#x904d;&#x5386; `oldOn` &#x53bb;&#x79fb;&#x9664;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#xff0c;&#x5173;&#x4e8e;&#x76d1;&#x542c;&#x548c;&#x79fb;&#x9664;&#x4e8b;&#x4ef6;&#x7684;&#x65b9;&#x6cd5;&#x90fd;&#x662f;&#x5916;&#x90e8;&#x4f20;&#x5165;&#x7684;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x65e2;&#x5904;&#x7406;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x7684;&#x6dfb;&#x52a0;&#x5220;&#x9664;&#xff0c;&#x4e5f;&#x5904;&#x7406;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#x7684;&#x6dfb;&#x52a0;&#x5220;&#x9664;&#x3002;\n\n&#x5bf9;&#x4e8e; `on` &#x7684;&#x904d;&#x5386;&#xff0c;&#x9996;&#x5148;&#x83b7;&#x5f97;&#x6bcf;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x540d;&#xff0c;&#x7136;&#x540e;&#x505a; `normalizeEvent` &#x7684;&#x5904;&#x7406;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"396,399"}},{"content":"<pre data-lines=\"400,423\"><code data-lines=\"400,423\">const normalizeEvent = cached((<span class=\"hljs-type\">name</span>: string): {\n  <span class=\"hljs-type\">name</span>: string,\n  once: <span class=\"hljs-type\">boolean</span>,\n  capture: <span class=\"hljs-type\">boolean</span>,\n  passive: <span class=\"hljs-type\">boolean</span>,\n  <span class=\"hljs-keyword\">handler</span>?: <span class=\"hljs-keyword\">Function</span>,\n  params?: <span class=\"hljs-keyword\">Array</span>&lt;<span class=\"hljs-keyword\">any</span>&gt;\n} =&gt; {\n  const passive = <span class=\"hljs-type\">name</span>.charAt(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;&amp;&apos;</span>\n  <span class=\"hljs-type\">name</span> = passive ? <span class=\"hljs-type\">name</span>.<span class=\"hljs-keyword\">slice</span>(<span class=\"hljs-number\">1</span>) : <span class=\"hljs-type\">name</span>\n  const once = <span class=\"hljs-type\">name</span>.charAt(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;~&apos;</span> // Prefixed last, checked first\n  <span class=\"hljs-type\">name</span> = once ? <span class=\"hljs-type\">name</span>.<span class=\"hljs-keyword\">slice</span>(<span class=\"hljs-number\">1</span>) : <span class=\"hljs-type\">name</span>\n  const capture = <span class=\"hljs-type\">name</span>.charAt(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;!&apos;</span>\n  <span class=\"hljs-type\">name</span> = capture ? <span class=\"hljs-type\">name</span>.<span class=\"hljs-keyword\">slice</span>(<span class=\"hljs-number\">1</span>) : <span class=\"hljs-type\">name</span>\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-type\">name</span>,\n    once,\n    capture,\n    passive\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"400,423"}},{"content":"<pre data-lines=\"424,427\"><code>&#x6839;&#x636e;&#x6211;&#x4eec;&#x7684;&#x7684;&#x4e8b;&#x4ef6;&#x540d;&#x7684;&#x4e00;&#x4e9b;&#x7279;&#x6b8a;&#x6807;&#x8bc6;&#xff08;&#x4e4b;&#x524d;&#x5728; `addHandler` &#x7684;&#x65f6;&#x5019;&#x6dfb;&#x52a0;&#x4e0a;&#x7684;&#xff09;&#x533a;&#x5206;&#x51fa;&#x8fd9;&#x4e2a;&#x4e8b;&#x4ef6;&#x662f;&#x5426;&#x6709; `once`&#x3001;`capture`&#x3001;`passive` &#x7b49;&#x4fee;&#x9970;&#x7b26;&#x3002;\n\n&#x5904;&#x7406;&#x5b8c;&#x4e8b;&#x4ef6;&#x540d;&#x540e;&#xff0c;&#x53c8;&#x5bf9;&#x4e8b;&#x4ef6;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x505a;&#x5904;&#x7406;&#xff0c;&#x5bf9;&#x4e8e;&#x7b2c;&#x4e00;&#x6b21;&#xff0c;&#x6ee1;&#x8db3; `isUndef(old)` &#x5e76;&#x4e14; `isUndef(cur.fns)`&#xff0c;&#x4f1a;&#x6267;&#x884c; `cur = on[name] = createFnInvoker(cur)` &#x65b9;&#x6cd5;&#x53bb;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x7136;&#x540e;&#x5728;&#x6267;&#x884c; `add(event.name, cur, event.once, event.capture, event.passive, event.params)` &#x5b8c;&#x6210;&#x4e00;&#x6b21;&#x4e8b;&#x4ef6;&#x7ed1;&#x5b9a;&#x3002;&#x6211;&#x4eec;&#x5148;&#x770b;&#x4e00;&#x4e0b; `createFnInvoker` &#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"424,427"}},{"content":"<pre data-lines=\"428,445\"><code data-lines=\"428,445\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createFnInvoker</span> (<span class=\"hljs-params\">fns: <span class=\"hljs-built_in\">Function</span> | <span class=\"hljs-built_in\">Array</span>&lt;<span class=\"hljs-built_in\">Function</span>&gt;</span>): <span class=\"hljs-title class_\">Function</span> {\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">invoker</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">const</span> fns = invoker.<span class=\"hljs-property\">fns</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(fns)) {\n      <span class=\"hljs-keyword\">const</span> cloned = fns.<span class=\"hljs-title function_\">slice</span>()\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; cloned.<span class=\"hljs-property\">length</span>; i++) {\n        cloned[i].<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-variable language_\">arguments</span>)\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">return</span> fns.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-variable language_\">arguments</span>)\n    }\n  }\n  invoker.<span class=\"hljs-property\">fns</span> = fns\n  <span class=\"hljs-keyword\">return</span> invoker\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"428,445"}},{"content":"<pre data-lines=\"446,451\"><code>&#x8fd9;&#x91cc;&#x5b9a;&#x4e49;&#x4e86; `invoker` &#x65b9;&#x6cd5;&#x5e76;&#x8fd4;&#x56de;&#xff0c;&#x7531;&#x4e8e;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x53ef;&#x80fd;&#x4f1a;&#x5bf9;&#x5e94;&#x591a;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x6240;&#x4ee5;&#x8fd9;&#x91cc;&#x505a;&#x4e86;&#x6570;&#x7ec4;&#x7684;&#x5224;&#x65ad;&#xff0c;&#x591a;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5c31;&#x4f9d;&#x6b21;&#x8c03;&#x7528;&#x3002;&#x6ce8;&#x610f;&#x6700;&#x540e;&#x7684;&#x8d4b;&#x503c;&#x903b;&#x8f91;&#xff0c; `invoker.fns = fns`&#xff0c;&#x6bcf;&#x4e00;&#x6b21;&#x6267;&#x884c; `invoker` &#x51fd;&#x6570;&#x90fd;&#x662f;&#x4ece; `invoker.fns` &#x91cc;&#x53d6;&#x6267;&#x884c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x56de;&#x5230; `updateListeners`&#xff0c;&#x5f53;&#x6211;&#x4eec;&#x7b2c;&#x4e8c;&#x6b21;&#x6267;&#x884c;&#x8be5;&#x51fd;&#x6570;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5224;&#x65ad;&#x5982;&#x679c; `cur !== old`&#xff0c;&#x90a3;&#x4e48;&#x53ea;&#x9700;&#x8981;&#x66f4;&#x6539; `old.fns = cur` &#x628a;&#x4e4b;&#x524d;&#x7ed1;&#x5b9a;&#x7684; `involer.fns` &#x8d4b;&#x503c;&#x4e3a;&#x65b0;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5373;&#x53ef;&#xff0c;&#x5e76;&#x4e14; &#x901a;&#x8fc7; `on[name] = old` &#x4fdd;&#x7559;&#x5f15;&#x7528;&#x5173;&#x7cfb;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x4fdd;&#x8bc1;&#x4e86;&#x4e8b;&#x4ef6;&#x56de;&#x8c03;&#x53ea;&#x6dfb;&#x52a0;&#x4e00;&#x6b21;&#xff0c;&#x4e4b;&#x540e;&#x4ec5;&#x4ec5;&#x53bb;&#x4fee;&#x6539;&#x5b83;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x5f15;&#x7528;&#x3002;\n\n`updateListeners` &#x51fd;&#x6570;&#x7684;&#x6700;&#x540e;&#x904d;&#x5386; `oldOn` &#x62ff;&#x5230;&#x4e8b;&#x4ef6;&#x540d;&#x79f0;&#xff0c;&#x5224;&#x65ad;&#x5982;&#x679c;&#x6ee1;&#x8db3; `isUndef(on[name])`&#xff0c;&#x5219;&#x6267;&#x884c; `remove(event.name, oldOn[name], event.capture)` &#x53bb;&#x79fb;&#x9664;&#x4e8b;&#x4ef6;&#x56de;&#x8c03;&#x3002;\n\n&#x4e86;&#x89e3;&#x4e86; `updateListeners` &#x7684;&#x5b9e;&#x73b0;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x5728;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x4e2d;&#x771f;&#x6b63;&#x6dfb;&#x52a0;&#x56de;&#x8c03;&#x548c;&#x79fb;&#x9664;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5b83;&#x4eec;&#x7684;&#x5b9a;&#x4e49;&#x90fd;&#x5728; `src/platforms/web/runtime/modules/event.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"446,451"}},{"content":"<pre data-lines=\"452,484\"><code data-lines=\"452,484\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-keyword\">add</span> (\n  event: string,\n  <span class=\"hljs-keyword\">handler</span>: <span class=\"hljs-keyword\">Function</span>,\n  once: <span class=\"hljs-type\">boolean</span>,\n  capture: <span class=\"hljs-type\">boolean</span>,\n  passive: <span class=\"hljs-type\">boolean</span>\n) {\n  <span class=\"hljs-keyword\">handler</span> = withMacroTask(<span class=\"hljs-keyword\">handler</span>)\n  <span class=\"hljs-keyword\">if</span> (once) <span class=\"hljs-keyword\">handler</span> = createOnceHandler(<span class=\"hljs-keyword\">handler</span>, event, capture)\n  target.addEventListener(\n    event,\n    <span class=\"hljs-keyword\">handler</span>,\n    supportsPassive\n      ? { capture, passive }\n      : capture\n  )\n}\n\n<span class=\"hljs-keyword\">function</span> remove (\n  event: string,\n  <span class=\"hljs-keyword\">handler</span>: <span class=\"hljs-keyword\">Function</span>,\n  capture: <span class=\"hljs-type\">boolean</span>,\n  _target?: HTMLElement\n) {\n  (_target || target).removeEventListener(\n    event,\n    <span class=\"hljs-keyword\">handler</span>._withTask || <span class=\"hljs-keyword\">handler</span>,\n    capture\n  )\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"452,484"}},{"content":"<pre data-lines=\"485,486\"><code>`add` &#x548c; `remove` &#x7684;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x5c31;&#x662f;&#x5b9e;&#x9645;&#x4e0a;&#x8c03;&#x7528;&#x539f;&#x751f; `addEventListener` &#x548c; `removeEventListener`&#xff0c;&#x5e76;&#x6839;&#x636e;&#x53c2;&#x6570;&#x4f20;&#x9012;&#x4e00;&#x4e9b;&#x914d;&#x7f6e;&#xff0c;&#x6ce8;&#x610f;&#x8fd9;&#x91cc;&#x7684; `hanlder` &#x4f1a;&#x7528; `withMacroTask(hanlder)` &#x5305;&#x88f9;&#x4e00;&#x4e0b;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/util/next-tick.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"485,486"}},{"content":"<pre data-lines=\"487,497\"><code data-lines=\"487,497\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">withMacroTask</span> (<span class=\"hljs-params\">fn: <span class=\"hljs-built_in\">Function</span></span>): <span class=\"hljs-title class_\">Function</span> {\n  <span class=\"hljs-keyword\">return</span> fn.<span class=\"hljs-property\">_withTask</span> || (fn.<span class=\"hljs-property\">_withTask</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    useMacroTask = <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-keyword\">const</span> res = fn.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-variable language_\">arguments</span>)\n    useMacroTask = <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-keyword\">return</span> res\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"487,497"}},{"content":"<pre data-lines=\"498,499\"><code>&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x5f3a;&#x5236;&#x5728; DOM &#x4e8b;&#x4ef6;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6267;&#x884c;&#x671f;&#x95f4;&#x5982;&#x679c;&#x4fee;&#x6539;&#x4e86;&#x6570;&#x636e;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e9b;&#x6570;&#x636e;&#x66f4;&#x6539;&#x63a8;&#x5165;&#x7684;&#x961f;&#x5217;&#x4f1a;&#x88ab;&#x5f53;&#x505a; `macroTask` &#x5728; `nextTick` &#x540e;&#x6267;&#x884c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"498,499"}}],"payload":{"tag":"h2","lines":"328,330"}},{"content":"<a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6\">#</a> &#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;","children":[{"content":"<pre data-lines=\"503,506\"><code>&#x9664;&#x4e86;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#xff0c;Vue &#x8fd8;&#x652f;&#x6301;&#x4e86;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#xff0c;&#x5e76;&#x4e14;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#x53ea;&#x80fd;&#x4f5c;&#x7528;&#x5728;&#x7ec4;&#x4ef6;&#x4e0a;&#xff0c;&#x5982;&#x679c;&#x5728;&#x7ec4;&#x4ef6;&#x4e0a;&#x4f7f;&#x7528;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#xff0c;&#x9700;&#x8981;&#x52a0; `.native` &#x4fee;&#x9970;&#x7b26;&#xff0c;&#x666e;&#x901a;&#x5143;&#x7d20;&#x4e0a;&#x4f7f;&#x7528; `.native` &#x4fee;&#x9970;&#x7b26;&#x65e0;&#x6548;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x5c31;&#x6765;&#x5206;&#x6790;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#x3002;\n\n&#x5728; `render` &#x9636;&#x6bb5;&#xff0c;&#x5982;&#x679c;&#x662f;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x8282;&#x70b9;&#xff0c;&#x5219;&#x901a;&#x8fc7; `createComponent` &#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6; `vnode`&#xff0c;&#x6211;&#x4eec;&#x518d;&#x6765;&#x56de;&#x987e;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#xff0c;&#x5b9a;&#x4e49;&#x5728; `src/core/vdom/create-component.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"503,506"}},{"content":"<pre data-lines=\"507,532\"><code data-lines=\"507,532\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createComponent</span> (<span class=\"hljs-params\">\n  Ctor: Class&lt;Component&gt; | <span class=\"hljs-built_in\">Function</span> | <span class=\"hljs-built_in\">Object</span> | <span class=\"hljs-keyword\">void</span>,\n  data: ?VNodeData,\n  context: Component,\n  children: ?<span class=\"hljs-built_in\">Array</span>&lt;VNode&gt;,\n  tag?: string\n</span>): <span class=\"hljs-title class_\">VNode</span> | <span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">VNode</span>&gt; | <span class=\"hljs-keyword\">void</span> {\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-keyword\">const</span> listeners = data.<span class=\"hljs-property\">on</span>\n  \n  data.<span class=\"hljs-property\">on</span> = data.<span class=\"hljs-property\">nativeOn</span>\n  \n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-keyword\">const</span> name = <span class=\"hljs-title class_\">Ctor</span>.<span class=\"hljs-property\">options</span>.<span class=\"hljs-property\">name</span> || tag\n  <span class=\"hljs-keyword\">const</span> vnode = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">VNode</span>(\n    <span class=\"hljs-string\">`vue-component-<span class=\"hljs-subst\">&#x24;{Ctor.cid}</span><span class=\"hljs-subst\">&#x24;{name ? <span class=\"hljs-string\">`-<span class=\"hljs-subst\">&#x24;{name}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span>}</span>`</span>,\n    data, <span class=\"hljs-literal\">undefined</span>, <span class=\"hljs-literal\">undefined</span>, <span class=\"hljs-literal\">undefined</span>, context,\n    { <span class=\"hljs-title class_\">Ctor</span>, propsData, listeners, tag, children },\n    asyncFactory\n  )\n\n  <span class=\"hljs-keyword\">return</span> vnode\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"507,532"}},{"content":"<pre data-lines=\"533,536\"><code>&#x6211;&#x4eec;&#x53ea;&#x5173;&#x6ce8;&#x4e8b;&#x4ef6;&#x76f8;&#x5173;&#x7684;&#x903b;&#x8f91;&#xff0c;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#xff0c;&#x5b83;&#x628a; `data.on` &#x8d4b;&#x503c;&#x7ed9;&#x4e86; `listeners`&#xff0c;&#x628a; `data.nativeOn` &#x8d4b;&#x503c;&#x7ed9;&#x4e86; `data.on`&#xff0c;&#x8fd9;&#x6837;&#x6240;&#x6709;&#x7684;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x8ddf;&#x6211;&#x4eec;&#x521a;&#x624d;&#x4ecb;&#x7ecd;&#x7684;&#x4e00;&#x6837;&#xff0c;&#x5b83;&#x662f;&#x5728;&#x5f53;&#x524d;&#x7ec4;&#x4ef6;&#x73af;&#x5883;&#x4e2d;&#x5904;&#x7406;&#x7684;&#x3002;&#x800c;&#x5bf9;&#x4e8e;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#xff0c;&#x6211;&#x4eec;&#x628a; `listeners` &#x4f5c;&#x4e3a; `vnode` &#x7684; `componentOptions` &#x4f20;&#x5165;&#xff0c;&#x5b83;&#x662f;&#x5728;&#x5b50;&#x7ec4;&#x4ef6;&#x521d;&#x59cb;&#x5316;&#x9636;&#x6bb5;&#x4e2d;&#x5904;&#x7406;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5b83;&#x7684;&#x5904;&#x7406;&#x73af;&#x5883;&#x662f;&#x5b50;&#x7ec4;&#x4ef6;&#x3002;\n\n&#x7136;&#x540e;&#x5728;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x521d;&#x59cb;&#x5316;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c; `initInternalComponent` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/init.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"533,536"}},{"content":"<pre data-lines=\"537,547\"><code data-lines=\"537,547\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initInternalComponent</span> (<span class=\"hljs-params\">vm: Component, options: InternalComponentOptions</span>) {\n  <span class=\"hljs-keyword\">const</span> opts = vm.<span class=\"hljs-property\">&#x24;options</span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(vm.<span class=\"hljs-property\">constructor</span>.<span class=\"hljs-property\">options</span>)\n  <span class=\"hljs-comment\">// ....</span>\n  <span class=\"hljs-keyword\">const</span> vnodeComponentOptions = parentVnode.<span class=\"hljs-property\">componentOptions</span>\n \n  opts.<span class=\"hljs-property\">_parentListeners</span> = vnodeComponentOptions.<span class=\"hljs-property\">listeners</span>\n  <span class=\"hljs-comment\">// ...</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"537,547"}},{"content":"<pre data-lines=\"548,549\"><code>&#x8fd9;&#x91cc;&#x62ff;&#x5230;&#x4e86;&#x7236;&#x7ec4;&#x4ef6;&#x4f20;&#x5165;&#x7684; `listeners`&#xff0c;&#x7136;&#x540e;&#x5728;&#x6267;&#x884c; `initEvents` &#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x4f1a;&#x5904;&#x7406;&#x8fd9;&#x4e2a; `listeners`&#xff0c;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/events.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"548,549"}},{"content":"<pre data-lines=\"550,561\"><code data-lines=\"550,561\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initEvents</span> (<span class=\"hljs-params\">vm: Component</span>) {\n  vm.<span class=\"hljs-property\">_events</span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-literal\">null</span>)\n  vm.<span class=\"hljs-property\">_hasHookEvent</span> = <span class=\"hljs-literal\">false</span>\n  <span class=\"hljs-comment\">// init parent attached events</span>\n  <span class=\"hljs-keyword\">const</span> listeners = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentListeners</span>\n  <span class=\"hljs-keyword\">if</span> (listeners) {\n    <span class=\"hljs-title function_\">updateComponentListeners</span>(vm, listeners)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"550,561"}},{"content":"<pre data-lines=\"562,563\"><code>&#x62ff;&#x5230; `listeners` &#x540e;&#xff0c;&#x6267;&#x884c; `updateComponentListeners(vm, listeners)` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"562,563"}},{"content":"<pre data-lines=\"564,576\"><code data-lines=\"564,576\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-attr\">target</span>: any\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateComponentListeners</span> (<span class=\"hljs-params\">\n  vm: Component,\n  listeners: <span class=\"hljs-built_in\">Object</span>,\n  oldListeners: ?<span class=\"hljs-built_in\">Object</span>\n</span>) {\n  target = vm\n  <span class=\"hljs-title function_\">updateListeners</span>(listeners, oldListeners || {}, add, remove, vm)\n  target = <span class=\"hljs-literal\">undefined</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,576"}},{"content":"<pre data-lines=\"577,578\"><code>`updateListeners` &#x6211;&#x4eec;&#x4e4b;&#x524d;&#x4ecb;&#x7ecd;&#x8fc7;&#xff0c;&#x6240;&#x4ee5;&#x5bf9;&#x4e8e;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#x548c;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7684;&#x5dee;&#x5f02;&#x5c31;&#x5728;&#x4e8b;&#x4ef6;&#x6dfb;&#x52a0;&#x548c;&#x5220;&#x9664;&#x7684;&#x5b9e;&#x73b0;&#x4e0a;&#xff0c;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6; `add` &#x548c; `remove` &#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"577,578"}},{"content":"<pre data-lines=\"579,592\"><code data-lines=\"579,592\"><span class=\"hljs-keyword\">function</span> add (event, fn, once) {\n  <span class=\"hljs-keyword\">if</span> (once) {\n    <span class=\"hljs-keyword\">target</span>.&#x24;once(event, fn)\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">target</span>.&#x24;<span class=\"hljs-keyword\">on</span>(event, fn)\n  }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-keyword\">remove</span> (event, fn) {\n  <span class=\"hljs-keyword\">target</span>.&#x24;<span class=\"hljs-keyword\">off</span>(event, fn)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"579,592"}},{"content":"<pre data-lines=\"593,594\"><code>&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x5229;&#x7528; Vue &#x5b9a;&#x4e49;&#x7684;&#x4e8b;&#x4ef6;&#x4e2d;&#x5fc3;&#xff0c;&#x7b80;&#x5355;&#x5206;&#x6790;&#x4e00;&#x4e0b;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"593,594"}},{"content":"<pre data-lines=\"595,694\"><code data-lines=\"595,694\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">eventsMixin</span> (<span class=\"hljs-params\">Vue: Class&lt;Component&gt;</span>) {\n  <span class=\"hljs-keyword\">const</span> hookRE = <span class=\"hljs-regexp\">/^hook:/</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;on</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event: string | <span class=\"hljs-built_in\">Array</span>&lt;string&gt;, fn: <span class=\"hljs-built_in\">Function</span></span>): <span class=\"hljs-title class_\">Component</span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">vm</span>: <span class=\"hljs-title class_\">Component</span> = <span class=\"hljs-variable language_\">this</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(event)) {\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>, l = event.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        <span class=\"hljs-variable language_\">this</span>.&#x24;on(event[i], fn)\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      (vm.<span class=\"hljs-property\">_events</span>[event] || (vm.<span class=\"hljs-property\">_events</span>[event] = [])).<span class=\"hljs-title function_\">push</span>(fn)\n      <span class=\"hljs-comment\">// optimize hook:event cost by using a boolean flag marked at registration</span>\n      <span class=\"hljs-comment\">// instead of a hash lookup</span>\n      <span class=\"hljs-keyword\">if</span> (hookRE.<span class=\"hljs-title function_\">test</span>(event)) {\n        vm.<span class=\"hljs-property\">_hasHookEvent</span> = <span class=\"hljs-literal\">true</span>\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> vm\n  }\n\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;once</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event: string, fn: <span class=\"hljs-built_in\">Function</span></span>): <span class=\"hljs-title class_\">Component</span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">vm</span>: <span class=\"hljs-title class_\">Component</span> = <span class=\"hljs-variable language_\">this</span>\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">on</span> (<span class=\"hljs-params\"></span>) {\n      vm.&#x24;off(event, on)\n      fn.<span class=\"hljs-title function_\">apply</span>(vm, <span class=\"hljs-variable language_\">arguments</span>)\n    }\n    on.<span class=\"hljs-property\">fn</span> = fn\n    vm.&#x24;on(event, on)\n    <span class=\"hljs-keyword\">return</span> vm\n  }\n\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;off</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event?: string | <span class=\"hljs-built_in\">Array</span>&lt;string&gt;, fn?: <span class=\"hljs-built_in\">Function</span></span>): <span class=\"hljs-title class_\">Component</span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">vm</span>: <span class=\"hljs-title class_\">Component</span> = <span class=\"hljs-variable language_\">this</span>\n    <span class=\"hljs-comment\">// all</span>\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">arguments</span>.<span class=\"hljs-property\">length</span>) {\n      vm.<span class=\"hljs-property\">_events</span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-literal\">null</span>)\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-comment\">// array of events</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(event)) {\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>, l = event.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        <span class=\"hljs-variable language_\">this</span>.&#x24;off(event[i], fn)\n      }\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-comment\">// specific event</span>\n    <span class=\"hljs-keyword\">const</span> cbs = vm.<span class=\"hljs-property\">_events</span>[event]\n    <span class=\"hljs-keyword\">if</span> (!cbs) {\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-keyword\">if</span> (!fn) {\n      vm.<span class=\"hljs-property\">_events</span>[event] = <span class=\"hljs-literal\">null</span>\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-keyword\">if</span> (fn) {\n      <span class=\"hljs-comment\">// specific handler</span>\n      <span class=\"hljs-keyword\">let</span> cb\n      <span class=\"hljs-keyword\">let</span> i = cbs.<span class=\"hljs-property\">length</span>\n      <span class=\"hljs-keyword\">while</span> (i--) {\n        cb = cbs[i]\n        <span class=\"hljs-keyword\">if</span> (cb === fn || cb.<span class=\"hljs-property\">fn</span> === fn) {\n          cbs.<span class=\"hljs-title function_\">splice</span>(i, <span class=\"hljs-number\">1</span>)\n          <span class=\"hljs-keyword\">break</span>\n        }\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> vm\n  }\n\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;emit</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event: string</span>): <span class=\"hljs-title class_\">Component</span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">vm</span>: <span class=\"hljs-title class_\">Component</span> = <span class=\"hljs-variable language_\">this</span>\n    <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n      <span class=\"hljs-keyword\">const</span> lowerCaseEvent = event.<span class=\"hljs-title function_\">toLowerCase</span>()\n      <span class=\"hljs-keyword\">if</span> (lowerCaseEvent !== event &amp;&amp; vm.<span class=\"hljs-property\">_events</span>[lowerCaseEvent]) {\n        <span class=\"hljs-title function_\">tip</span>(\n          <span class=\"hljs-string\">`Event &quot;<span class=\"hljs-subst\">&#x24;{lowerCaseEvent}</span>&quot; is emitted in component `</span> +\n          <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{formatComponentName(vm)}</span> but the handler is registered for &quot;<span class=\"hljs-subst\">&#x24;{event}</span>&quot;. `</span> +\n          <span class=\"hljs-string\">`Note that HTML attributes are case-insensitive and you cannot use `</span> +\n          <span class=\"hljs-string\">`v-on to listen to camelCase events when using in-DOM templates. `</span> +\n          <span class=\"hljs-string\">`You should probably use &quot;<span class=\"hljs-subst\">&#x24;{hyphenate(event)}</span>&quot; instead of &quot;<span class=\"hljs-subst\">&#x24;{event}</span>&quot;.`</span>\n        )\n      }\n    }\n    <span class=\"hljs-keyword\">let</span> cbs = vm.<span class=\"hljs-property\">_events</span>[event]\n    <span class=\"hljs-keyword\">if</span> (cbs) {\n      cbs = cbs.<span class=\"hljs-property\">length</span> &gt; <span class=\"hljs-number\">1</span> ? <span class=\"hljs-title function_\">toArray</span>(cbs) : cbs\n      <span class=\"hljs-keyword\">const</span> args = <span class=\"hljs-title function_\">toArray</span>(<span class=\"hljs-variable language_\">arguments</span>, <span class=\"hljs-number\">1</span>)\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>, l = cbs.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        <span class=\"hljs-keyword\">try</span> {\n          cbs[i].<span class=\"hljs-title function_\">apply</span>(vm, args)\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n          <span class=\"hljs-title function_\">handleError</span>(e, vm, <span class=\"hljs-string\">`event handler for &quot;<span class=\"hljs-subst\">&#x24;{event}</span>&quot;`</span>)\n        }\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> vm\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"595,694"}},{"content":"<pre data-lines=\"695,698\"><code>&#x975e;&#x5e38;&#x7ecf;&#x5178;&#x7684;&#x4e8b;&#x4ef6;&#x4e2d;&#x5fc3;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x628a;&#x6240;&#x6709;&#x7684;&#x4e8b;&#x4ef6;&#x7528; `vm._events` &#x5b58;&#x50a8;&#x8d77;&#x6765;&#xff0c;&#x5f53;&#x6267;&#x884c; `vm.&#x24;on(event,fn)` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x6309;&#x4e8b;&#x4ef6;&#x7684;&#x540d;&#x79f0; `event` &#x628a;&#x56de;&#x8c03;&#x51fd;&#x6570; `fn` &#x5b58;&#x50a8;&#x8d77;&#x6765; `vm._events[event].push(fn)`&#x3002;&#x5f53;&#x6267;&#x884c; `vm.&#x24;emit(event)` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x6839;&#x636e;&#x4e8b;&#x4ef6;&#x540d; `event` &#x627e;&#x5230;&#x6240;&#x6709;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570; `let cbs = vm._events[event]`&#xff0c;&#x7136;&#x540e;&#x904d;&#x5386;&#x6267;&#x884c;&#x6240;&#x6709;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x5f53;&#x6267;&#x884c; `vm.&#x24;off(event,fn)` &#x7684;&#x65f6;&#x5019;&#x4f1a;&#x79fb;&#x9664;&#x6307;&#x5b9a;&#x4e8b;&#x4ef6;&#x540d; `event` &#x548c;&#x6307;&#x5b9a;&#x7684; `fn` &#x5f53;&#x6267;&#x884c; `vm.&#x24;once(event,fn)` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x5185;&#x90e8;&#x5c31;&#x662f;&#x6267;&#x884c; `vm.&#x24;on`&#xff0c;&#x5e76;&#x4e14;&#x5f53;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6267;&#x884c;&#x4e00;&#x6b21;&#x540e;&#x518d;&#x901a;&#x8fc7; `vm.&#x24;off` &#x79fb;&#x9664;&#x4e8b;&#x4ef6;&#x7684;&#x56de;&#x8c03;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x786e;&#x4fdd;&#x4e86;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x53ea;&#x6267;&#x884c;&#x4e00;&#x6b21;&#x3002;\n\n&#x6240;&#x4ee5;&#x5bf9;&#x4e8e;&#x7528;&#x6237;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x4e8b;&#x4ef6;&#x6dfb;&#x52a0;&#x548c;&#x5220;&#x9664;&#x5c31;&#x662f;&#x5229;&#x7528;&#x4e86;&#x8fd9;&#x51e0;&#x4e2a;&#x4e8b;&#x4ef6;&#x4e2d;&#x5fc3;&#x7684; API&#x3002;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x4e8b;&#x4e00;&#x70b9;&#xff0c;`vm.&#x24;emit` &#x662f;&#x7ed9;&#x5f53;&#x524d;&#x7684; `vm` &#x4e0a;&#x6d3e;&#x53d1;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x4e4b;&#x6240;&#x4ee5;&#x6211;&#x4eec;&#x5e38;&#x7528;&#x5b83;&#x505a;&#x7236;&#x5b50;&#x7ec4;&#x4ef6;&#x901a;&#x8baf;&#xff0c;&#x662f;&#x56e0;&#x4e3a;&#x5b83;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x5b9a;&#x4e49;&#x662f;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x4e2d;&#xff0c;&#x5bf9;&#x4e8e;&#x6211;&#x4eec;&#x8fd9;&#x4e2a;&#x4f8b;&#x5b50;&#x800c;&#x8a00;&#xff0c;&#x5f53;&#x5b50;&#x7ec4;&#x4ef6;&#x7684; `button` &#x88ab;&#x70b9;&#x51fb;&#x4e86;&#xff0c;&#x5b83;&#x901a;&#x8fc7; `this.&#x24;emit(&apos;select&apos;)` &#x6d3e;&#x53d1;&#x4e8b;&#x4ef6;&#xff0c;&#x90a3;&#x4e48;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x4f8b;&#x5c31;&#x76d1;&#x542c;&#x5230;&#x4e86;&#x8fd9;&#x4e2a; `select` &#x4e8b;&#x4ef6;&#xff0c;&#x5e76;&#x6267;&#x884c;&#x5b83;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x2014;&#x2014;&#x5b9a;&#x4e49;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x4e2d;&#x7684; `selectHandler` &#x65b9;&#x6cd5;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x76f8;&#x5f53;&#x4e8e;&#x5b8c;&#x6210;&#x4e86;&#x4e00;&#x6b21;&#x7236;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x901a;&#x8baf;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"695,698"}}],"payload":{"tag":"h2","lines":"500,502"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"702,703\"><code>&#x90a3;&#x4e48;&#x81f3;&#x6b64;&#x6211;&#x4eec;&#x5bf9; Vue &#x7684;&#x4e8b;&#x4ef6;&#x5b9e;&#x73b0;&#x6709;&#x4e86;&#x8fdb;&#x4e00;&#x6b65;&#x7684;&#x4e86;&#x89e3;&#xff0c;Vue &#x652f;&#x6301; 2 &#x79cd;&#x4e8b;&#x4ef6;&#x7c7b;&#x578b;&#xff0c;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x548c;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#xff0c;&#x5b83;&#x4eec;&#x4e3b;&#x8981;&#x7684;&#x533a;&#x522b;&#x5728;&#x4e8e;&#x6dfb;&#x52a0;&#x548c;&#x5220;&#x9664;&#x4e8b;&#x4ef6;&#x7684;&#x65b9;&#x5f0f;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x5e76;&#x4e14;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#x7684;&#x6d3e;&#x53d1;&#x662f;&#x5f80;&#x5f53;&#x524d;&#x5b9e;&#x4f8b;&#x4e0a;&#x6d3e;&#x53d1;&#xff0c;&#x4f46;&#x662f;&#x53ef;&#x4ee5;&#x5229;&#x7528;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x73af;&#x5883;&#x5b9a;&#x4e49;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6765;&#x5b9e;&#x73b0;&#x7236;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x901a;&#x8baf;&#x3002;&#x53e6;&#x5916;&#x8981;&#x6ce8;&#x610f;&#x4e00;&#x70b9;&#xff0c;&#x53ea;&#x6709;&#x7ec4;&#x4ef6;&#x8282;&#x70b9;&#x624d;&#x53ef;&#x4ee5;&#x6dfb;&#x52a0;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#xff0c;&#x5e76;&#x4e14;&#x6dfb;&#x52a0;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x9700;&#x8981;&#x4f7f;&#x7528; `native` &#x4fee;&#x9970;&#x7b26;&#xff1b;&#x800c;&#x666e;&#x901a;&#x5143;&#x7d20;&#x4f7f;&#x7528; `.native` &#x4fee;&#x9970;&#x7b26;&#x662f;&#x6ca1;&#x6709;&#x4f5c;&#x7528;&#x7684;&#xff0c;&#x4e5f;&#x53ea;&#x80fd;&#x6dfb;&#x52a0;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"702,703"}}],"payload":{"tag":"h2","lines":"699,701"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
