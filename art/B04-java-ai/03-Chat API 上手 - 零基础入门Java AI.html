<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Chat API &#x4e0a;&#x624b;","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,7\"><code>&#x5728;&#x8fd9;&#x7bc7;&#x6587;&#x7ae0;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x5c06;&#x6df1;&#x5165;&#x4e86;&#x89e3;LangChain4j&#x6846;&#x67b6;&#x7684;&#x9ad8;&#x5c42;API&#xff08;AiServices&#xff09;&#xff0c;&#x5e76;&#x5c55;&#x793a;&#x5982;&#x4f55;&#x5c06;&#x5176;&#x4e0e;OpenAI&#x96c6;&#x6210;&#xff0c;&#x4ee5;&#x5b9e;&#x73b0;&#x7b80;&#x5355;&#x7684;&#x804a;&#x5929;&#x529f;&#x80fd;&#x3002;&#x6211;&#x4eec;&#x5c06;&#x8ba8;&#x8bba;LangChain4j&#x652f;&#x6301;&#x7684;&#x5404;&#x79cd;&#x5927;&#x578b;&#x8bed;&#x8a00;&#x6a21;&#x578b;&#xff08;LLMs&#xff09;&#xff0c;&#x5e76;&#x9010;&#x6b65;&#x5c55;&#x793a;&#x5982;&#x4f55;&#x901a;&#x8fc7;&#x793a;&#x4f8b;&#x4ee3;&#x7801;&#x5b9e;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,7"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"LangChain4j&#x652f;&#x6301;&#x7684;LLMs","children":[{"content":"<table data-lines=\"12,32\">\n<thead data-lines=\"12,13\">\n<tr data-lines=\"12,13\">\n<th>&#x4f9b;&#x5e94;&#x5546;</th>\n<th>&#x6d41;&#x5f0f;&#x8c03;&#x7528;</th>\n<th>&#x51fd;&#x6570;</th>\n<th>JSON</th>\n<th>&#x591a;&#x6a21;&#x6001;</th>\n<th>&#x89c2;&#x6d4b;</th>\n</tr>\n</thead>\n<tbody data-lines=\"14,32\">\n<tr data-lines=\"14,15\">\n<td>Amazon Bedrock</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"15,16\">\n<td>Anthropic</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text, image</td>\n<td></td>\n</tr>\n<tr data-lines=\"16,17\">\n<td>Azure OpenAI</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text, image</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"17,18\">\n<td>ChatGLM</td>\n<td></td>\n<td></td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"18,19\">\n<td>DashScope</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text, image, audio</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"19,20\">\n<td>GitHub Models</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"20,21\">\n<td>Google AI Gemini</td>\n<td></td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text, image, audio, video, PDF</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"21,22\">\n<td>Google Vertex AI Gemini</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text, image, audio, video, PDF</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"22,23\">\n<td>Google Vertex AI PaLM 2</td>\n<td></td>\n<td></td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"23,24\">\n<td>Hugging Face</td>\n<td></td>\n<td></td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"24,25\">\n<td>Jlama</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"25,26\">\n<td>LocalAI</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"26,27\">\n<td>Mistral AI</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"27,28\">\n<td>Ollama</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text, image</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"28,29\">\n<td>OpenAI</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td>text, image</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"29,30\">\n<td>Qianfan</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"30,31\">\n<td>Cloudflare Workers AI</td>\n<td></td>\n<td></td>\n<td></td>\n<td>text</td>\n<td></td>\n</tr>\n<tr data-lines=\"31,32\">\n<td>Zhipu AI</td>\n<td>&#x2705;</td>\n<td>&#x2705;</td>\n<td></td>\n<td>text, image</td>\n<td>&#x2705;</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"12,32"}}],"payload":{"tag":"h2","lines":"9,11"}},{"content":"LangChain4j&#x7684;LLM API&#x6982;&#x8ff0;","children":[{"content":"&#x6838;&#x5fc3;&#xff1a;ChatLanguageModel &#x6a21;&#x578b;&#x5143;&#x4fe1;&#x606f;&#x63d0;&#x4f9b;","children":[{"content":"1. &#x4f9d;&#x8d56;&#x5305;","children":[{"content":"<pre data-lines=\"41,42\"><code>&#x5728;`pom.xml`&#x4e2d;&#x6dfb;&#x52a0;&#x4ee5;&#x4e0b;&#x4f9d;&#x8d56;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"41,42"}},{"content":"<pre data-lines=\"45,55\"><code data-lines=\"45,55\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>dev.langchain4j<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>langchain4j<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>dev.langchain4j<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>langchain4j-open-ai<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"45,55"}}],"payload":{"tag":"h4","lines":"39,40"}},{"content":"2. &#x914d;&#x7f6e; ChatLanguageModel &#x63d0;&#x4f9b;&#x6a21;&#x578b;&#x5143;&#x4fe1;&#x606f;","children":[{"content":"<pre data-lines=\"60,70\"><code data-lines=\"60,70\"><span class=\"hljs-meta\">@Bean</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-title class_\">ChatLanguageModel</span> <span class=\"hljs-title function_\">chatLanguageModel</span>(<span class=\"hljs-params\"></span>) {\n <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">OpenAiChatModel</span>.<span class=\"hljs-title function_\">builder</span>()\n .<span class=\"hljs-title function_\">apiKey</span>(<span class=\"hljs-title class_\">System</span>.<span class=\"hljs-title function_\">getenv</span>(<span class=\"hljs-string\">&quot;DASHSCOPE_KEY&quot;</span>))\n .<span class=\"hljs-title function_\">modelName</span>(<span class=\"hljs-string\">&quot;qwen-turbo&quot;</span>)\n .<span class=\"hljs-title function_\">baseUrl</span>(<span class=\"hljs-string\">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>)\n .<span class=\"hljs-title function_\">build</span>();\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"60,70"}}],"payload":{"tag":"h4","lines":"56,57"}}],"payload":{"tag":"h3","lines":"37,38"}},{"content":"&#x4f4e;&#x7ea7;LLM API &#x8c03;&#x7528;","children":[{"content":"<pre data-lines=\"73,74\"><code>&#x4f7f;&#x7528;`ChatLanguageModel`&#x63a5;&#x53e3;&#x4e0e;&#x5927;&#x6a21;&#x578b;&#x8fdb;&#x884c;&#x4ea4;&#x4e92;&#x3002;&#x4ee5;&#x4e0b;&#x662f;&#x63a5;&#x53e3;&#x7684;&#x4e3b;&#x8981;&#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"73,74"}},{"content":"<pre data-lines=\"77,83\"><code data-lines=\"77,83\">public <span class=\"hljs-keyword\">interface</span> ChatLanguageModel {\n String <span class=\"hljs-keyword\">generate</span>(String userMessage);\n Response&lt;AiMessage&gt; <span class=\"hljs-keyword\">generate</span>(List&lt;ChatMessage&gt; messages);\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"77,83"}},{"content":"<pre data-lines=\"86,100\"><code data-lines=\"86,100\">@SpringBootTest\n<span class=\"hljs-keyword\">class</span> SimplechatApplicationTest {\n\n @Autowired\n private ChatLanguageModel chatLanguageModel;\n\n @Test\n public <span class=\"hljs-keyword\">void</span> testChat(){\n String <span class=\"hljs-keyword\">generate</span> = chatLanguageModel<span class=\"hljs-variable\">.generate</span>(<span class=\"hljs-string\">&quot;&#x4f60;&#x597d;&quot;</span>);\n System<span class=\"hljs-variable\">.out</span><span class=\"hljs-variable\">.println</span>(<span class=\"hljs-keyword\">generate</span>);\n }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"86,100"}}],"payload":{"tag":"h3","lines":"71,72"}},{"content":"&#x9ad8;&#x7ea7;LLM API","children":[{"content":"<pre data-lines=\"105,106\"><code>&#x4e3a;&#x4e86;&#x7b80;&#x5316;&#x5f00;&#x53d1;&#xff0c;LangChain4j&#x63d0;&#x4f9b;&#x4e86;&#x9ad8;&#x5c42;API&#xff0c;&#x4f7f;&#x5f00;&#x53d1;&#x8005;&#x80fd;&#x591f;&#x66f4;&#x4e13;&#x6ce8;&#x4e8e;&#x4e1a;&#x52a1;&#x903b;&#x8f91;&#xff0c;&#x800c;&#x65e0;&#x9700;&#x5173;&#x6ce8;&#x5e95;&#x5c42;&#x5b9e;&#x73b0;&#x7ec6;&#x8282;&#x3002;&#x9ad8;&#x5c42;API&#x4e2d;&#xff0c;`AiService` &#x7528;&#x4e8e;&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x96c6;&#x6210;&#x5927;&#x6a21;&#x578b;&#x7684;&#x670d;&#x52a1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"105,106"}},{"content":"1. &#x5b9a;&#x4e49;AI Service","children":[{"content":"<pre data-lines=\"111,121\"><code data-lines=\"111,121\"><span class=\"hljs-keyword\">package</span> com.pig4cloud.ai.service;\n\n<span class=\"hljs-comment\">/**\n *  AI &#x52a9;&#x624b;&#x63a5;&#x53e3;\n*/</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-title class_\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ChatAssistant</span> </span>{\n <span class=\"hljs-keyword\">String</span> chat(<span class=\"hljs-keyword\">String</span> userMessage);\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"111,121"}},{"content":"<pre data-lines=\"122,123\"><code>*   &#x58f0;&#x660e;&#x6210; Spring Bean&#xff0c; &#x6ce8;&#x5165;&#x6a21;&#x578b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"122,123"}},{"content":"<pre data-lines=\"126,134\"><code data-lines=\"126,134\">@Bean\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ChatAssistant <span class=\"hljs-title\">chatAssistant</span>()</span> {\n <span class=\"hljs-keyword\">return</span> AiServices.builder(ChatAssistant.<span class=\"hljs-keyword\">class</span>)\n .chatLanguageModel(chatLanguageModel())\n .build();\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"126,134"}}],"payload":{"tag":"h4","lines":"107,108"}},{"content":"2. &#x6d4b;&#x8bd5;","children":[{"content":"<pre data-lines=\"139,153\"><code data-lines=\"139,153\"><span class=\"hljs-meta\">@SpringBootTest</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ChatAssistantTest</span> {\n <span class=\"hljs-meta\">@Autowired</span>\n <span class=\"hljs-keyword\">private</span> <span class=\"hljs-title class_\">ChatAssistant</span> chatAssistant;\n\n <span class=\"hljs-meta\">@Test</span>\n <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">void</span> <span class=\"hljs-title function_\">testChat</span>(<span class=\"hljs-params\"></span>) {\n <span class=\"hljs-title class_\">String</span> message = <span class=\"hljs-string\">&quot;Hello&quot;</span>;\n <span class=\"hljs-title class_\">String</span> response = chatAssistant.<span class=\"hljs-title function_\">chat</span>(message);\n <span class=\"hljs-title class_\">System</span>.<span class=\"hljs-property\">out</span>.<span class=\"hljs-title function_\">println</span>(response);\n }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"139,153"}}],"payload":{"tag":"h4","lines":"135,136"}}],"payload":{"tag":"h3","lines":"101,102"}}],"payload":{"tag":"h2","lines":"34,36"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
