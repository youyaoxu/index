<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x6388;&#x6743;&#xff1a;OAuth2.0","children":[{"content":"1.1&#x3001;<a href=\"https://so.csdn.net/so/search?q=Base64&amp;spm=1001.2101.3001.7020\">Base64</a>","children":[{"content":"1.1.1&#x3001;Base64&#x7684;&#x4ecb;&#x7ecd;","children":[{"content":"<pre data-lines=\"7,8\"><code>Base64&#x662f;&#x4e00;&#x79cd;&#x7528;64&#x4e2a;&#x5b57;&#x7b26;&#x6765;&#x8868;&#x793a;&#x4efb;&#x610f;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#x7684;&#x7f16;&#x7801;&#x65b9;&#x5f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"7,8"}}],"payload":{"tag":"h3","lines":"5,6"}},{"content":"1.1.2&#x3001;Base64&#x7684;&#x6f14;&#x793a;","children":[{"content":"<pre data-lines=\"11,24\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testEncodeAndDecode</span><span class=\"hljs-params\">()</span> {\n    <span class=\"hljs-type\">byte</span>[] bytes = <span class=\"hljs-string\">&quot;Hello,World&quot;</span>.getBytes();\n\n    bytes = Base64.getEncoder().encode(bytes);\n    System.out.println(<span class=\"hljs-string\">&quot;&#x7f16;&#x7801;&#x540e;&#xff1a;&quot;</span> + <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(bytes));\n\n    bytes = Base64.getDecoder().decode(bytes);\n    System.out.println(<span class=\"hljs-string\">&quot;&#x89e3;&#x7801;&#x540e;&#xff1a;&quot;</span> + <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(bytes));\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"11,24"}},{"content":"<pre data-lines=\"25,30\"><code data-lines=\"25,30\"><span class=\"hljs-attr\">&#x7f16;&#x7801;&#x540e;&#xff1a;SGVsbG8sV29ybGQ</span>=<span class=\"hljs-string\">\n&#x89e3;&#x7801;&#x540e;&#xff1a;Hello,World\n\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"25,30"}}],"payload":{"tag":"h3","lines":"9,10"}}],"payload":{"tag":"h2","lines":"2,4"}},{"content":"1.2&#x3001;JWT","children":[{"content":"1.2.1&#x3001;JWT&#x7684;&#x4ecb;&#x7ecd;","children":[{"content":"<pre data-lines=\"36,37\"><code>JWT&#xff0c;&#x5168;&#x79f0;JSON Web Tokens&#xff0c;&#x5b98;&#x7f51;&#x5730;&#x5740;&#xff1a;https://jwt.io&#xff0c;&#x662f;&#x4e00;&#x6b3e;&#x51fa;&#x8272;&#x7684;&#x5206;&#x5e03;&#x5f0f;&#x8eab;&#x4efd;&#x6821;&#x9a8c;&#x65b9;&#x6848;&#xff0c;&#x53ef;&#x4ee5;&#x751f;&#x6210;token&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x89e3;&#x6790;&#x68c0;&#x9a8c;token&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"36,37"}}],"payload":{"tag":"h3","lines":"34,35"}},{"content":"1.2.2&#x3001;JWT&#x7684;&#x7ec4;&#x6210;","children":[{"content":"<pre data-lines=\"40,49\"><code>JWT&#x7531;&#x4e09;&#x90e8;&#x5206;&#x7ec4;&#x6210;&#xff0c;&#x5b83;&#x4eec;&#x4e4b;&#x95f4;&#x7528;&#x70b9;(.)&#x8fde;&#x63a5;&#xff0c;&#x8fd9;&#x4e09;&#x90e8;&#x5206;&#x5206;&#x522b;&#x662f;&#xff1a;\n\n*   HEADER&#xff1a;&#x5934;&#x90e8;&#xff0c;&#x5934;&#x90e8;&#x4e3b;&#x8981;&#x662f;&#x7528;&#x6765;&#x5b9a;&#x4e49;&#x4ee4;&#x724c;&#x7b7e;&#x540d;&#x4f7f;&#x7528;&#x7684;&#x7b97;&#x6cd5;&#x548c;&#x4ee4;&#x724c;&#x7c7b;&#x578b;&#xff0c;&#x662f;&#x4e00;&#x4e2a;JSON&#x4e32;&#xff0c;&#x9700;&#x8981;&#x4f7f;&#x7528;Base64Url&#x8fdb;&#x884c;&#x7f16;&#x7801;&#x3002;\n*   PAYLOAD&#xff1a;&#x8f7d;&#x8377;&#xff0c;&#x8f7d;&#x8377;&#x4e3b;&#x8981;&#x7528;&#x6765;&#x5b58;&#x653e;&#x4f20;&#x8f93;&#x7684;&#x6570;&#x636e;&#xff0c;&#x662f;&#x4e00;&#x4e2a;JSON&#x4e32;&#xff0c;&#x9700;&#x8981;&#x4f7f;&#x7528;Base64Url&#x8fdb;&#x884c;&#x7f16;&#x7801;&#x3002;\n*   SIGNATURE&#xff1a;&#x7b7e;&#x540d;&#xff0c;&#x6839;&#x636e;&#x4f60;HEADER&#x5b9a;&#x4e49;&#x7684;&#x7b97;&#x6cd5;&#x7c7b;&#x578b;&#xff0c;&#x7b7e;&#x540d;&#x4e3b;&#x8981;&#x7528;&#x4e8e;&#x9632;&#x6b62;&#x6570;&#x636e;&#x88ab;&#x7be1;&#x6539;&#x3002;\n\n&gt; &#x6ce8;&#x610f;&#xff1a;Base64Url&#x8fd9;&#x4e2a;&#x7b97;&#x6cd5;&#x8ddf;Base64&#x7b97;&#x6cd5;&#x57fa;&#x672c;&#x7c7b;&#x4f3c;&#xff0c;&#x4f46;&#x6709;&#x4e00;&#x4e9b;&#x5c0f;&#x7684;&#x4e0d;&#x540c;&#x3002;JWT&#x4f5c;&#x4e3a;&#x4e00;&#x4e2a;&#x4ee4;&#x724c;(token)&#xff0c;&#x6709;&#x4e9b;&#x573a;&#x5408;&#x53ef;&#x80fd;&#x4f1a;&#x653e;&#x5230;URL(&#x6bd4;&#x5982; api.example.com/?token=xxx)&#x3002;Base64&#x6709;&#x4e09;&#x4e2a;&#x5b57;&#x7b26;+&#x3001;/&#x548c;=&#xff0c;&#x5728; URL &#x91cc;&#x9762;&#x6709;&#x7279;&#x6b8a;&#x542b;&#x4e49;&#xff0c;&#x6240;&#x4ee5;&#x8981;&#x88ab;&#x66ff;&#x6362;&#x6389;&#xff1a;=&#x88ab;&#x7701;&#x7565;&#x3001;+&#x66ff;&#x6362;&#x6210;-&#xff0c;/&#x66ff;&#x6362;&#x6210;\\_ &#xff0c;&#x8fd9;&#x5c31;&#x662f;Base64Url&#x7b97;&#x6cd5;&#x3002;\n\n&#x90a3;&#x4e48;&#x6700;&#x7ec8;JWT&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8fd9;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#x7531;&#x4e09;&#x90e8;&#x5206;&#x7ec4;&#x6210;&#xff0c;&#x7b2c;&#x4e00;&#x90e8;&#x5206;&#x5934;&#x90e8;&#xff0c;&#x7b2c;&#x4e8c;&#x90e8;&#x5206;&#x8f7d;&#x8377;&#xff0c;&#x7b2c;&#x4e09;&#x90e8;&#x5206;&#x7b7e;&#x540d;&#xff0c;&#x6700;&#x7ec8;&#x5f62;&#x5f0f;&#xff1a;`Header.Payload.Signature`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"40,49"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/f2982f47cf22ab8c5aed950a22920b97.png\" alt>","children":[],"payload":{"tag":"img","lines":"50,51"}},{"content":"<pre data-lines=\"52,55\"><code>HEADER\n\nHeader&#x90e8;&#x5206;&#x662f;&#x4e00;&#x4e2a;JSON&#x4e32;&#xff0c;&#x63cf;&#x8ff0;JWT&#x7684;&#x5143;&#x6570;&#x636e;&#xff0c;&#x901a;&#x5e38;&#x662f;&#x4e0b;&#x9762;&#x7684;&#x6837;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"52,55"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/e2f80d0f16a79df36f83a47d625dfeb9.png\" alt>","children":[],"payload":{"tag":"img","lines":"56,57"}},{"content":"<pre data-lines=\"58,73\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;alg&#x5c5e;&#x6027;&#x8868;&#x793a;&#x7b7e;&#x540d;&#x7684;&#x7b97;&#x6cd5;(algorithm)&#xff0c;&#x9ed8;&#x8ba4;&#x662f;HMAC SHA256(&#x5199;&#x6210;HS256)&#xff1b;typ&#x5c5e;&#x6027;&#x8868;&#x793a;&#x8fd9;&#x4e2a;&#x4ee4;&#x724c;(token)&#x7684;&#x7c7b;&#x578b;(type)&#xff0c;JWT&#x4ee4;&#x724c;&#x7edf;&#x4e00;&#x5199;&#x4e3a;JWT&#x3002;\n\nPAYLOAD\n\nPayload&#x90e8;&#x5206;&#x4e5f;&#x662f;&#x4e00;&#x4e2a;JSON&#x4e32;&#xff0c;&#x7528;&#x6765;&#x5b58;&#x653e;&#x5b9e;&#x9645;&#x9700;&#x8981;&#x4f20;&#x9012;&#x7684;&#x6570;&#x636e;&#xff0c;JWT &#x89c4;&#x5b9a;&#x4e86;7&#x4e2a;&#x5b98;&#x65b9;&#x5b57;&#x6bb5;&#xff0c;&#x53ef;&#x4f9b;&#x9009;&#x7528;&#x3002;\n\n*   iss (issuer)&#xff1a;&#x7b7e;&#x53d1;&#x4eba;\n*   aud (audience)&#xff1a;&#x63a5;&#x6536;&#x8005;\n*   sub (subject)&#xff1a;&#x4ee4;&#x724c;&#x63cf;&#x8ff0;\n*   iat (Issued At)&#xff1a;&#x7b7e;&#x53d1;&#x65f6;&#x95f4;\n*   exp (expiration time)&#xff1a;&#x8fc7;&#x671f;&#x65f6;&#x95f4;\n*   nbf (Not Before)&#xff1a;&#x751f;&#x6548;&#x65f6;&#x95f4;\n*   jti (JWT ID)&#xff1a;&#x4ee4;&#x724c;&#x7f16;&#x53f7;\n\n&#x9664;&#x4e86;&#x5b98;&#x65b9;&#x5b57;&#x6bb5;&#xff0c;&#x4f60;&#x8fd8;&#x53ef;&#x4ee5;&#x5728;&#x8fd9;&#x4e2a;&#x90e8;&#x5206;&#x5b9a;&#x4e49;&#x79c1;&#x6709;&#x5b57;&#x6bb5;&#xff0c;&#x4e0b;&#x9762;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"58,73"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/4eef063958f108670b18cc559f5244b8.png\" alt>","children":[],"payload":{"tag":"img","lines":"74,75"}},{"content":"<pre data-lines=\"76,79\"><code>SIGNATURE\n\n&#x7531;&#x4e8e;Header&#x5934;&#x90e8;&#x548c;&#x8f7d;&#x8377;Payload&#x7684;&#x6570;&#x636e;&#x662f;&#x4f7f;&#x7528;Base64Url&#x8fdb;&#x884c;&#x7684;&#x7f16;&#x7801;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x53ef;&#x4ee5;&#x8fd9;&#x4e48;&#x8bf4;&#xff0c;&#x53ea;&#x8981;&#x4f60;&#x62ff;&#x5230;&#x4e86;&#x8fd9;&#x4e24;&#x90e8;&#x5206;&#xff0c;&#x5c31;&#x80fd;&#x77e5;&#x9053;&#xff0c;&#x8fd9;&#x4e24;&#x90e8;&#x5206;&#x7684;&#x5185;&#x5bb9;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x5728;Payload&#x8f7d;&#x8377;&#x4e2d;&#x662f;&#x4e0d;&#x53ef;&#x4ee5;&#x5b58;&#x653e;&#x7528;&#x6237;&#x5bc6;&#x7801;&#x7684;&#xff0c;&#x540c;&#x65f6;&#xff0c;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x522b;&#x4eba;&#x9020;&#x5047;&#x8fd9;&#x4e24;&#x90e8;&#x5206;&#x7684;&#x6570;&#x636e;&#xff0c;JWT&#x89c4;&#x5b9a;&#x7b2c;&#x4e09;&#x90e8;&#x5206;&#x662f;&#x4e00;&#x4e2a;&#x7b7e;&#x540d;&#xff0c;&#x8fd9;&#x4e2a;&#x7b7e;&#x540d;&#x662f;&#x901a;&#x8fc7;&#x4f7f;&#x7528;Header&#x5934;&#x90e8;&#x5b9a;&#x4e49;&#x7b7e;&#x540d;&#x7b97;&#x6cd5;&#x7684;&#x7c7b;&#x578b;&#xff0c;&#x5bf9;&#x524d;&#x4e24;&#x90e8;&#x5206;&#x8fdb;&#x884c;&#x52a0;&#x5bc6;&#xff0c;&#x7531;&#x4e8e;&#x524d;&#x4e24;&#x90e8;&#x5206;&#x5f88;&#x5bb9;&#x6613;&#x83b7;&#x5f97;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x6211;&#x4eec;&#x8fd8;&#x9700;&#x8981;&#x52a0;&#x5165;&#x4e00;&#x4e2a;&#x522b;&#x4eba;&#x4e0d;&#x77e5;&#x9053;&#x7684;&#x5bc6;&#x94a5;&#xff08;secret&#xff09;&#x3002;&#x8fd9;&#x4e2a;&#x5bc6;&#x94a5;&#x53ea;&#x6709;&#x670d;&#x52a1;&#x5668;&#x624d;&#x77e5;&#x9053;&#xff0c;&#x4e0d;&#x80fd;&#x6cc4;&#x9732;&#x7ed9;&#x7528;&#x6237;&#x3002;&#x7136;&#x540e;&#x4f7f;&#x7528;Header&#x91cc;&#x9762;&#x6307;&#x5b9a;&#x7684;&#x7b7e;&#x540d;&#x7b97;&#x6cd5;(&#x9ed8;&#x8ba4;&#x662f;HMAC SHA256)&#xff0c;&#x6309;&#x7167;&#x4e0b;&#x9762;&#x7684;&#x516c;&#x5f0f;&#x4ea7;&#x751f;&#x7b7e;&#x540d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,79"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/971ef6275c8bad1d8488fde0e06393df.png\" alt>","children":[],"payload":{"tag":"img","lines":"80,81"}},{"content":"<pre data-lines=\"82,83\"><code>&#x7b97;&#x51fa;&#x7b7e;&#x540d;&#x4ee5;&#x540e;&#xff0c;&#x628a;Header&#x3001;Payload&#x3001;Signature&#x4e09;&#x4e2a;&#x90e8;&#x5206;&#x62fc;&#x6210;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x6bcf;&#x4e2a;&#x90e8;&#x5206;&#x4e4b;&#x95f4;&#x7528;&#x70b9;(.)&#x5206;&#x9694;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x8fd4;&#x56de;&#x7ed9;&#x7528;&#x6237;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"82,83"}}],"payload":{"tag":"h3","lines":"38,39"}},{"content":"1.2.3&#x3001;JWT&#x7684;&#x7279;&#x70b9;","children":[{"content":"1. JWT &#x9ed8;&#x8ba4;&#x662f;&#x4e0d;&#x52a0;&#x5bc6;&#xff0c;&#x4f46;&#x4e5f;&#x662f;&#x53ef;&#x4ee5;&#x52a0;&#x5bc6;&#x7684;&#xff0c;&#x751f;&#x6210;&#x539f;&#x59cb; Token &#x4ee5;&#x540e;&#xff0c;&#x53ef;&#x4ee5;&#x7528;&#x5bc6;&#x94a5;&#x518d;&#x52a0;&#x5bc6;&#x4e00;&#x6b21;&#x3002;","children":[],"payload":{"tag":"li","lines":"86,87","listIndex":1}},{"content":"2. JWT &#x4e0d;&#x52a0;&#x5bc6;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x4e0d;&#x80fd;&#x5c06;&#x79d8;&#x5bc6;&#x6570;&#x636e;&#x5199;&#x5165; JWT&#x3002;","children":[],"payload":{"tag":"li","lines":"87,88","listIndex":2}},{"content":"3. JWT &#x4e0d;&#x4ec5;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x8ba4;&#x8bc1;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x4ea4;&#x6362;&#x4fe1;&#x606f;&#xff0c;&#x6709;&#x6548;&#x4f7f;&#x7528; JWT&#xff0c;&#x53ef;&#x4ee5;&#x964d;&#x4f4e;&#x670d;&#x52a1;&#x5668;&#x67e5;&#x8be2;&#x6570;&#x636e;&#x5e93;&#x7684;&#x6b21;&#x6570;&#x3002;","children":[],"payload":{"tag":"li","lines":"88,89","listIndex":3}},{"content":"4. JWT &#x7684;&#x6700;&#x5927;&#x7f3a;&#x70b9;&#x662f;&#xff0c;&#x7531;&#x4e8e;&#x670d;&#x52a1;&#x5668;&#x4e0d;&#x4fdd;&#x5b58; session &#x72b6;&#x6001;&#xff0c;&#x56e0;&#x6b64;&#x65e0;&#x6cd5;&#x5728;&#x4f7f;&#x7528;&#x8fc7;&#x7a0b;&#x4e2d;&#x5e9f;&#x6b62;&#x67d0;&#x4e2a; token&#xff0c;&#x6216;&#x8005;&#x66f4;&#x6539; token &#x7684;&#x6743;&#x9650;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x4e00;&#x65e6; JWT &#x7b7e;&#x53d1;&#x4e86;&#xff0c;&#x5728;&#x5230;&#x671f;&#x4e4b;&#x524d;&#x5c31;&#x4f1a;&#x59cb;&#x7ec8;&#x6709;&#x6548;&#xff0c;&#x9664;&#x975e;&#x670d;&#x52a1;&#x5668;&#x90e8;&#x7f72;&#x989d;&#x5916;&#x7684;&#x903b;&#x8f91;&#x3002;","children":[],"payload":{"tag":"li","lines":"89,90","listIndex":4}},{"content":"5. JWT &#x672c;&#x8eab;&#x5305;&#x542b;&#x4e86;&#x8ba4;&#x8bc1;&#x4fe1;&#x606f;&#xff0c;&#x4e00;&#x65e6;&#x6cc4;&#x9732;&#xff0c;&#x4efb;&#x4f55;&#x4eba;&#x90fd;&#x53ef;&#x4ee5;&#x83b7;&#x5f97;&#x8be5;&#x4ee4;&#x724c;&#x7684;&#x6240;&#x6709;&#x6743;&#x9650;&#x3002;&#x4e3a;&#x4e86;&#x51cf;&#x5c11;&#x76d7;&#x7528;&#xff0c;JWT &#x7684;&#x6709;&#x6548;&#x671f;&#x5e94;&#x8be5;&#x8bbe;&#x7f6e;&#x5f97;&#x6bd4;&#x8f83;&#x77ed;&#x3002;&#x5bf9;&#x4e8e;&#x4e00;&#x4e9b;&#x6bd4;&#x8f83;&#x91cd;&#x8981;&#x7684;&#x6743;&#x9650;&#xff0c;&#x4f7f;&#x7528;&#x65f6;&#x5e94;&#x8be5;&#x518d;&#x6b21;&#x5bf9;&#x7528;&#x6237;&#x8fdb;&#x884c;&#x8ba4;&#x8bc1;&#x3002;","children":[],"payload":{"tag":"li","lines":"90,91","listIndex":5}},{"content":"6. &#x4e3a;&#x4e86;&#x51cf;&#x5c11;&#x76d7;&#x7528;&#xff0c;JWT &#x4e0d;&#x5e94;&#x8be5;&#x4f7f;&#x7528; HTTP &#x534f;&#x8bae;&#x660e;&#x7801;&#x4f20;&#x8f93;&#xff0c;&#x8981;&#x4f7f;&#x7528; HTTPS &#x534f;&#x8bae;&#x4f20;&#x8f93;&#x3002;","children":[],"payload":{"tag":"li","lines":"91,93","listIndex":6}}],"payload":{"tag":"h3","lines":"84,85"}},{"content":"1.2.4&#x3001;JWT&#x7684;&#x6f14;&#x793a;","children":[{"content":"<pre data-lines=\"95,103\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.jsonwebtoken<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>jjwt<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>0.9.1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"95,103"}},{"content":"<pre data-lines=\"104,136\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testJWTDemo</span><span class=\"hljs-params\">()</span> {\n    <span class=\"hljs-type\">JwtBuilder</span> <span class=\"hljs-variable\">jwtBuilder</span> <span class=\"hljs-operator\">=</span> Jwts.builder();\n\n    \n    \n    jwtBuilder.setIssuer(<span class=\"hljs-string\">&quot;&#x66f9;&#x6668;&#x78ca;&quot;</span>);\n    jwtBuilder.setIssuedAt(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>());\n    jwtBuilder.setAudience(<span class=\"hljs-string\">&quot;&#x4e0d;&#x77e5;&#x540d;&#x7684;&#x5ba2;&#x6237;&#x7aef;&quot;</span>);\n    jwtBuilder.setExpiration(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(System.currentTimeMillis() + <span class=\"hljs-number\">3600000</span>));\n    jwtBuilder.setId(UUID.randomUUID().toString());\n\n    \n    jwtBuilder.signWith(SignatureAlgorithm.HS256, <span class=\"hljs-string\">&quot;123456789abcdefg&quot;</span>);\n\n    \n    Map&lt;String, Object&gt; claims = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();\n    claims.put(<span class=\"hljs-string\">&quot;age&quot;</span>, <span class=\"hljs-number\">24</span>);\n    claims.put(<span class=\"hljs-string\">&quot;money&quot;</span>, <span class=\"hljs-number\">1234</span>);\n    jwtBuilder.addClaims(claims);\n\n    \n    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">token</span> <span class=\"hljs-operator\">=</span> jwtBuilder.compact();\n    System.out.println(token);\n\n    \n    <span class=\"hljs-type\">Claims</span> <span class=\"hljs-variable\">body</span> <span class=\"hljs-operator\">=</span> Jwts.parser().setSigningKey(<span class=\"hljs-string\">&quot;123456789abcdefg&quot;</span>).parseClaimsJws(token).getBody();\n    System.out.println(body);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"104,136"}},{"content":"<pre data-lines=\"137,143\"><code data-lines=\"137,143\">eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiLmm7nmmajno4oiLCJpYXQiOjE2MTI3MDE4NzgsImF1ZCI6IuS4jeefpeWQjeeahOWuouaIt-erryIsImV4cCI6MTYxMjcwNTQ3OCwianRpIjoiYjMwOGE0OWUtZGYyNi00M2M5LThmN2UtMjA2YTVjNWI4M2RlIiwibW9uZXkiOjEyMzQsImFnZSI6MjR9.vgCFmoWKsxWaoKJqwyrcoDavQ_wmNjremjrTqkd6ZvA\n\n{<span class=\"hljs-attribute\">iss</span>=&#x66f9;&#x6668;&#x78ca;, <span class=\"hljs-attribute\">iat</span>=1612701878, <span class=\"hljs-attribute\">aud</span>=&#x4e0d;&#x77e5;&#x540d;&#x7684;&#x5ba2;&#x6237;&#x7aef;, <span class=\"hljs-attribute\">exp</span>=1612705478, <span class=\"hljs-attribute\">jti</span>=b308a49e-df26-43c9-8f7e-206a5c5b83de, <span class=\"hljs-attribute\">money</span>=1234, <span class=\"hljs-attribute\">age</span>=24}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"137,143"}},{"content":"<pre data-lines=\"144,145\"><code>&#x4e0b;&#x9762;&#x8fd9;&#x5e45;&#x56fe;&#x662f;&#x6211;&#x7528;&#x5b98;&#x7f51;&#x7684;&#x53ef;&#x89c6;&#x5316;&#x5de5;&#x5177;&#x8fdb;&#x884c;&#x89e3;&#x6790;&#x7684;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"144,145"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/87293055550581edc04fcdff0f17adf1.png\" alt>","children":[],"payload":{"tag":"img","lines":"146,147"}}],"payload":{"tag":"h3","lines":"93,94"}},{"content":"1.2.5&#x3001;JWT&#x7684;&#x9690;&#x60a3;","children":[{"content":"<pre data-lines=\"150,151\"><code>&#x4ece;JWT&#x751f;&#x6210;&#x7684;token&#x7ec4;&#x6210;&#x4e0a;&#x6765;&#x770b;&#xff0c;&#x8981;&#x60f3;&#x907f;&#x514d;token&#x88ab;&#x4f2a;&#x9020;&#xff0c;&#x4e3b;&#x8981;&#x5c31;&#x5f97;&#x770b;&#x7b7e;&#x540d;&#x90e8;&#x5206;&#x4e86;&#xff0c;&#x800c;&#x7b7e;&#x540d;&#x90e8;&#x5206;&#x53c8;&#x6709;&#x4e09;&#x90e8;&#x5206;&#x7ec4;&#x6210;&#xff0c;&#x5176;&#x4e2d;&#x5934;&#x90e8;&#x548c;&#x8f7d;&#x8377;&#x7684;Base64Url&#x7f16;&#x7801;&#xff0c;&#x51e0;&#x4e4e;&#x662f;&#x900f;&#x660e;&#x7684;&#xff0c;&#x6beb;&#x65e0;&#x5b89;&#x5168;&#x6027;&#x53ef;&#x8a00;&#xff0c;&#x90a3;&#x4e48;&#x6700;&#x7ec8;&#x5b88;&#x62a4;token&#x5b89;&#x5168;&#x7684;&#x91cd;&#x62c5;&#x5c31;&#x843d;&#x5728;&#x4e86;&#x52a0;&#x5165;&#x7684;&#x5bc6;&#x94a5;&#xff08;&#x76d0;&#xff09;&#x4e0a;&#x9762;&#x4e86;&#xff01; &#x8bd5;&#x60f3;&#xff1a;&#x5982;&#x679c;&#x751f;&#x6210;token&#x6240;&#x7528;&#x7684;&#x76d0;&#x4e0e;&#x89e3;&#x6790;token&#x65f6;&#x52a0;&#x5165;&#x7684;&#x76d0;&#x662f;&#x4e00;&#x6837;&#x7684;&#x3002;&#x5c82;&#x4e0d;&#x662f;&#x7c7b;&#x4f3c;&#x4e8e;&#x4e2d;&#x56fd;&#x4eba;&#x6c11;&#x94f6;&#x884c;&#x628a;&#x4eba;&#x6c11;&#x5e01;&#x9632;&#x4f2a;&#x6280;&#x672f;&#x516c;&#x5f00;&#x4e86;&#xff1f;&#x5927;&#x5bb6;&#x53ef;&#x4ee5;&#x7528;&#x8fd9;&#x4e2a;&#x76d0;&#x6765;&#x89e3;&#x6790;token&#xff0c;&#x5c31;&#x80fd;&#x7528;&#x6765;&#x4f2a;&#x9020;token&#x3002; &#x8fd9;&#x65f6;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x9700;&#x8981;&#x5bf9;&#x76d0;&#x91c7;&#x7528;&#x975e;&#x5bf9;&#x79f0;&#x52a0;&#x5bc6;&#x7684;&#x65b9;&#x5f0f;&#x8fdb;&#x884c;&#x52a0;&#x5bc6;&#xff0c;&#x4ee5;&#x8fbe;&#x5230;&#x751f;&#x6210;token&#x4e0e;&#x6821;&#x9a8c;token&#x65b9;&#x6240;&#x7528;&#x7684;&#x76d0;&#x4e0d;&#x4e00;&#x81f4;&#x7684;&#x5b89;&#x5168;&#x6548;&#x679c;&#xff01;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,151"}}],"payload":{"tag":"h3","lines":"148,149"}}],"payload":{"tag":"h2","lines":"31,33"}},{"content":"1.3&#x3001;RSA","children":[{"content":"1.3.1&#x3001;RSA&#x7684;&#x4ecb;&#x7ecd;","children":[{"content":"<pre data-lines=\"157,162\"><code>1976&#x5e74;&#xff0c;&#x4e24;&#x4f4d;&#x7f8e;&#x56fd;&#x8ba1;&#x7b97;&#x673a;&#x5b66;&#x5bb6;Whitfield Diffie&#x548c;Martin Hellman&#xff0c;&#x63d0;&#x51fa;&#x4e86;&#x4e00;&#x79cd;&#x5d2d;&#x65b0;&#x6784;&#x601d;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x4e0d;&#x76f4;&#x63a5;&#x4f20;&#x9012;&#x5bc6;&#x94a5;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5b8c;&#x6210;&#x89e3;&#x5bc6;&#xff0c;&#x8fd9;&#x88ab;&#x79f0;&#x4e3a;&quot;Diffie-Hellman&#x5bc6;&#x94a5;&#x4ea4;&#x6362;&#x7b97;&#x6cd5;&quot;&#x3002;&#x8fd9;&#x4e2a;&#x7b97;&#x6cd5;&#x542f;&#x53d1;&#x4e86;&#x5176;&#x4ed6;&#x79d1;&#x5b66;&#x5bb6;&#xff0c;&#x4eba;&#x4eec;&#x8ba4;&#x8bc6;&#x5230;&#xff0c;&#x52a0;&#x5bc6;&#x548c;&#x89e3;&#x5bc6;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x4e0d;&#x540c;&#x7684;&#x89c4;&#x5219;&#xff0c;&#x53ea;&#x8981;&#x8fd9;&#x4e24;&#x79cd;&#x89c4;&#x5219;&#x4e4b;&#x95f4;&#x5b58;&#x5728;&#x67d0;&#x79cd;&#x5bf9;&#x5e94;&#x5173;&#x7cfb;&#x5373;&#x53ef;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x907f;&#x514d;&#x4e86;&#x76f4;&#x63a5;&#x4f20;&#x9012;&#x5bc6;&#x94a5;&#xff0c;&#x800c;&#x8fd9;&#x79cd;&#x65b0;&#x7684;&#x52a0;&#x5bc6;&#x6a21;&#x5f0f;&#x88ab;&#x79f0;&#x4e3a;&quot;&#x975e;&#x5bf9;&#x79f0;&#x52a0;&#x5bc6;&#x7b97;&#x6cd5;&quot;&#x3002;\n\nRSA&#x662f;1977&#x5e74;&#x7531;&#x7f57;&#x7eb3;&#x5fb7;&#xb7;&#x674e;&#x7ef4;&#x65af;&#x7279;&#xff08;Ron Rivest&#xff09;&#x3001;&#x963f;&#x8fea;&#xb7;&#x8428;&#x83ab;&#x5c14;&#xff08;Adi Shamir&#xff09;&#x548c;&#x4f26;&#x7eb3;&#x5fb7;&#xb7;&#x963f;&#x5fb7;&#x66fc;&#xff08;Leonard Adleman&#xff09;&#x4e00;&#x8d77;&#x63d0;&#x51fa;&#x7684;&#xff0c;&#x5f53;&#x65f6;&#x4ed6;&#x4eec;&#x4e09;&#x4eba;&#x90fd;&#x5728;&#x9ebb;&#x7701;&#x7406;&#x5de5;&#x5b66;&#x9662;&#x5de5;&#x4f5c;&#xff0c;RSA&#x5c31;&#x662f;&#x4ed6;&#x4eec;&#x4e09;&#x4eba;&#x59d3;&#x6c0f;&#x5f00;&#x5934;&#x5b57;&#x6bcd;&#x62fc;&#x5728;&#x4e00;&#x8d77;&#x7ec4;&#x6210;&#x7684; &#x3002;&#x4ece;&#x90a3;&#x65f6;&#x76f4;&#x5230;&#x73b0;&#x5728;&#xff0c;RSA&#x7b97;&#x6cd5;&#x4e00;&#x76f4;&#x662f;&#x6700;&#x5e7f;&#x4e3a;&#x4f7f;&#x7528;&#x7684;&quot;&#x975e;&#x5bf9;&#x79f0;&#x52a0;&#x5bc6;&#x7b97;&#x6cd5;&quot;&#x3002;&#x6beb;&#x4e0d;&#x5938;&#x5f20;&#x5730;&#x8bf4;&#xff0c;&#x53ea;&#x8981;&#x6709;&#x8ba1;&#x7b97;&#x673a;&#x7f51;&#x7edc;&#x7684;&#x5730;&#x65b9;&#xff0c;&#x5c31;&#x6709;RSA&#x7b97;&#x6cd5;&#x3002;\n\n&#x8fd9;&#x79cd;&#x7b97;&#x6cd5;&#x975e;&#x5e38;&#x53ef;&#x9760;&#xff0c;&#x5bc6;&#x94a5;&#x8d8a;&#x957f;&#xff0c;&#x5b83;&#x5c31;&#x8d8a;&#x96be;&#x7834;&#x89e3;&#x3002;&#x6839;&#x636e;&#x5df2;&#x7ecf;&#x62ab;&#x9732;&#x7684;&#x6587;&#x732e;&#xff0c;&#x76ee;&#x524d;&#x88ab;&#x7834;&#x89e3;&#x7684;&#x6700;&#x957f;RSA&#x5bc6;&#x94a5;&#x662f;768&#x4e2a;&#x4e8c;&#x8fdb;&#x5236;&#x4f4d;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x957f;&#x5ea6;&#x8d85;&#x8fc7;768&#x4f4d;&#x7684;&#x5bc6;&#x94a5;&#xff0c;&#x8fd8;&#x65e0;&#x6cd5;&#x7834;&#x89e3;&#xff08;&#x81f3;&#x5c11;&#x6ca1;&#x4eba;&#x516c;&#x5f00;&#x5ba3;&#x5e03;&#xff09;&#x3002;&#x56e0;&#x6b64;&#x53ef;&#x4ee5;&#x8ba4;&#x4e3a;&#xff0c;1024&#x4f4d;&#x7684;RSA&#x5bc6;&#x94a5;&#x57fa;&#x672c;&#x5b89;&#x5168;&#xff0c;2048&#x4f4d;&#x7684;&#x5bc6;&#x94a5;&#x6781;&#x5176;&#x5b89;&#x5168;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"157,162"}}],"payload":{"tag":"h3","lines":"155,156"}},{"content":"1.3.2&#x3001;&#x516c;&#x94a5;<a href=\"https://so.csdn.net/so/search?q=%E7%A7%81%E9%92%A5&amp;spm=1001.2101.3001.7020\">&#x79c1;&#x94a5;</a>&#x7684;&#x4ecb;&#x7ecd;","children":[{"content":"<pre data-lines=\"165,168\"><code>&#x5728;&#x5bf9;&#x79f0;&#x52a0;&#x5bc6;&#x7684;&#x65f6;&#x4ee3;&#xff0c;&#x52a0;&#x5bc6;&#x548c;&#x89e3;&#x5bc6;&#x7528;&#x7684;&#x662f;&#x540c;&#x4e00;&#x4e2a;&#x5bc6;&#x94a5;&#xff0c;&#x8fd9;&#x4e2a;&#x5bc6;&#x94a5;&#x65e2;&#x7528;&#x4e8e;&#x52a0;&#x5bc6;&#xff0c;&#x53c8;&#x7528;&#x4e8e;&#x89e3;&#x5bc6;&#x3002;&#x8fd9;&#x6837;&#x505a;&#x6709;&#x4e00;&#x4e2a;&#x660e;&#x663e;&#x7684;&#x7f3a;&#x70b9;&#xff0c;&#x5982;&#x679c;&#x4e24;&#x4e2a;&#x4eba;&#x4e4b;&#x95f4;&#x4f20;&#x8f93;&#x6587;&#x4ef6;&#xff0c;&#x4e24;&#x4e2a;&#x4eba;&#x90fd;&#x8981;&#x77e5;&#x9053;&#x5bc6;&#x94a5;&#xff0c;&#x5982;&#x679c;&#x662f;&#x4e09;&#x4e2a;&#x4eba;&#x5462;&#xff0c;&#x4e94;&#x4e2a;&#x4eba;&#x5462;&#xff1f;&#x4e8e;&#x662f;&#x5c31;&#x4ea7;&#x751f;&#x4e86;&#x975e;&#x5bf9;&#x79f0;&#x52a0;&#x5bc6;&#xff0c;&#x7528;&#x4e00;&#x4e2a;&#x5bc6;&#x94a5;&#x8fdb;&#x884c;&#x52a0;&#x5bc6;&#xff08;&#x516c;&#x94a5;&#xff09;&#xff0c;&#x7528;&#x53e6;&#x4e00;&#x4e2a;&#x5bc6;&#x94a5;&#x8fdb;&#x884c;&#x89e3;&#x5bc6;&#xff08;&#x79c1;&#x94a5;&#xff09;&#x3002;\n\n&#x6211;&#x4eec;&#x5047;&#x8bbe;&#xff0c;&#x5f20;&#x4e09;&#x6709;&#x4e24;&#x628a;&#x94a5;&#x5319;&#xff0c;&#x4e00;&#x628a;&#x662f;&#x516c;&#x94a5;&#xff0c;&#x53e6;&#x4e00;&#x628a;&#x662f;&#x79c1;&#x94a5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"165,168"}},{"content":"<img src=\"https://gitee.com/caochenlei/blog-images/raw/master/20210207181910.png\" alt>","children":[],"payload":{"tag":"img","lines":"169,170"}},{"content":"<pre data-lines=\"171,172\"><code>&#x5f20;&#x4e09;&#x628a;&#x516c;&#x94a5;&#x9001;&#x7ed9;&#x4ed6;&#x7684;&#x670b;&#x53cb;&#x4eec;&#xff1a;&#x674e;&#x56db;&#x3001;&#x738b;&#x4e94;&#x3001;&#x8d75;&#x516d;&#xff0c;&#x6bcf;&#x4eba;&#x4e00;&#x628a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"171,172"}},{"content":"<img src=\"https://gitee.com/caochenlei/blog-images/raw/master/20210207181923.png\" alt>","children":[],"payload":{"tag":"img","lines":"173,174"}},{"content":"<pre data-lines=\"175,176\"><code>&#x674e;&#x56db;&#x8981;&#x7ed9;&#x5f20;&#x4e09;&#x5199;&#x4e00;&#x5c01;&#x4fdd;&#x5bc6;&#x7684;&#x4fe1;&#xff0c;&#x5979;&#x5199;&#x5b8c;&#x540e;&#x7528;&#x5f20;&#x4e09;&#x7684;&#x516c;&#x94a5;&#x52a0;&#x5bc6;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x8fbe;&#x5230;&#x4fdd;&#x5bc6;&#x7684;&#x6548;&#x679c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"175,176"}},{"content":"<img src=\"https://gitee.com/caochenlei/blog-images/raw/master/20210207181932.png\" alt>","children":[],"payload":{"tag":"img","lines":"177,178"}},{"content":"<pre data-lines=\"179,180\"><code>&#x5f20;&#x4e09;&#x6536;&#x4fe1;&#x540e;&#xff0c;&#x7528;&#x79c1;&#x94a5;&#x89e3;&#x5bc6;&#xff0c;&#x5c31;&#x770b;&#x5230;&#x4e86;&#x4fe1;&#x4ef6;&#x5185;&#x5bb9;&#x3002;&#x8fd9;&#x91cc;&#x8981;&#x5f3a;&#x8c03;&#x7684;&#x662f;&#xff0c;&#x53ea;&#x8981;&#x5f20;&#x4e09;&#x7684;&#x79c1;&#x94a5;&#x4e0d;&#x6cc4;&#x9732;&#xff0c;&#x8fd9;&#x5c01;&#x4fe1;&#x5c31;&#x662f;&#x5b89;&#x5168;&#x7684;&#xff0c;&#x5373;&#x4f7f;&#x843d;&#x5728;&#x522b;&#x4eba;&#x624b;&#x91cc;&#xff0c;&#x4e5f;&#x65e0;&#x6cd5;&#x89e3;&#x5bc6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"179,180"}},{"content":"<img src=\"https://gitee.com/caochenlei/blog-images/raw/master/20210207181946.png\" alt>","children":[],"payload":{"tag":"img","lines":"181,182"}},{"content":"<pre data-lines=\"183,184\"><code>&#x5f20;&#x4e09;&#x7ed9;&#x674e;&#x56db;&#x56de;&#x4fe1;&#xff0c;&#x51b3;&#x5b9a;&#x91c7;&#x7528;&quot;&#x6570;&#x5b57;&#x7b7e;&#x540d;&quot;&#x3002;&#x4ed6;&#x5199;&#x5b8c;&#x540e;&#x5148;&#x7528;Hash&#x51fd;&#x6570;&#xff0c;&#x751f;&#x6210;&#x4fe1;&#x4ef6;&#x7684;&#x6458;&#x8981;&#xff08;digest&#xff09;&#x3002;&#x7136;&#x540e;&#x4f7f;&#x7528;&#x5f20;&#x4e09;&#x81ea;&#x5df1;&#x7684;&#x79c1;&#x94a5;&#x8fdb;&#x884c;&#x52a0;&#x5bc6;&#x5f97;&#x5230;&#x7b7e;&#x540d;&#xff0c;&#x5f20;&#x4e09;&#x5c06;&#x8fd9;&#x4e2a;&#x7b7e;&#x540d;&#xff0c;&#x9644;&#x5728;&#x4fe1;&#x4ef6;&#x4e0a;&#x9762;&#xff0c;&#x4e00;&#x8d77;&#x53d1;&#x7ed9;&#x674e;&#x56db;&#xff0c;&#x7c7b;&#x4f3c;JWT&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"183,184"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/eb86b4a71d32abde8d94b56f21dc3578.png\" alt>","children":[],"payload":{"tag":"img","lines":"185,186"}},{"content":"<pre data-lines=\"187,188\"><code>&#x674e;&#x56db;&#x6536;&#x4fe1;&#x540e;&#xff0c;&#x53d6;&#x4e0b;&#x6570;&#x5b57;&#x7b7e;&#x540d;&#xff0c;&#x7528;&#x5f20;&#x4e09;&#x7684;&#x516c;&#x94a5;&#x89e3;&#x5bc6;&#xff0c;&#x5f97;&#x5230;&#x4fe1;&#x4ef6;&#x7684;&#x6458;&#x8981;&#x3002;&#x674e;&#x56db;&#x518d;&#x5bf9;&#x4fe1;&#x4ef6;&#x672c;&#x8eab;&#x4f7f;&#x7528;Hash&#x51fd;&#x6570;&#xff0c;&#x5c06;&#x5f97;&#x5230;&#x7684;&#x7ed3;&#x679c;&#xff0c;&#x4e0e;&#x4e0a;&#x4e00;&#x6b65;&#x5f97;&#x5230;&#x7684;&#x6458;&#x8981;&#x8fdb;&#x884c;&#x5bf9;&#x6bd4;&#x3002;&#x5982;&#x679c;&#x4e24;&#x8005;&#x4e00;&#x81f4;&#xff0c;&#x5c31;&#x8bc1;&#x660e;&#x8fd9;&#x5c01;&#x4fe1;&#x672a;&#x88ab;&#x4fee;&#x6539;&#x8fc7;&#x3002;&#x7531;&#x6b64;&#x8bc1;&#x660e;&#xff0c;&#x8fd9;&#x5c01;&#x4fe1;&#x786e;&#x5b9e;&#x662f;&#x5f20;&#x4e09;&#x53d1;&#x51fa;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"187,188"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/202f3feba901b00c2c8dae1fd79f98fb.png\" alt>","children":[],"payload":{"tag":"img","lines":"189,190"}},{"content":"<pre data-lines=\"191,192\"><code>&#x6700;&#x7ec8;&#x603b;&#x7ed3;&#xff1a;&#x65e2;&#x7136;&#x662f;&#x52a0;&#x5bc6;&#xff0c;&#x90a3;&#x80af;&#x5b9a;&#x662f;&#x4e0d;&#x5e0c;&#x671b;&#x522b;&#x4eba;&#x77e5;&#x9053;&#x6211;&#x7684;&#x6d88;&#x606f;&#xff0c;&#x6240;&#x4ee5;&#x53ea;&#x6709;&#x6211;&#x624d;&#x80fd;&#x89e3;&#x5bc6;&#xff0c;&#x6240;&#x4ee5;&#x53ef;&#x5f97;&#x51fa;**&#x516c;&#x94a5;&#x8d1f;&#x8d23;&#x52a0;&#x5bc6;&#xff0c;&#x79c1;&#x94a5;&#x8d1f;&#x8d23;&#x89e3;&#x5bc6;**&#xff1b;&#x540c;&#x7406;&#xff0c;&#x65e2;&#x7136;&#x662f;&#x7b7e;&#x540d;&#xff0c;&#x90a3;&#x80af;&#x5b9a;&#x662f;&#x4e0d;&#x5e0c;&#x671b;&#x6709;&#x4eba;&#x5192;&#x5145;&#x6211;&#x53d1;&#x6d88;&#x606f;&#xff0c;&#x53ea;&#x6709;&#x6211;&#x624d;&#x80fd;&#x53d1;&#x5e03;&#x8fd9;&#x4e2a;&#x7b7e;&#x540d;&#xff0c;&#x6240;&#x4ee5;&#x53ef;&#x5f97;&#x51fa;**&#x79c1;&#x94a5;&#x8d1f;&#x8d23;&#x7b7e;&#x540d;&#xff0c;&#x516c;&#x94a5;&#x8d1f;&#x8d23;&#x9a8c;&#x8bc1;**&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"191,192"}}],"payload":{"tag":"h3","lines":"163,164"}},{"content":"1.3.3&#x3001;&#x516c;&#x94a5;&#x79c1;&#x94a5;&#x7684;&#x751f;&#x6210;","children":[{"content":"<pre data-lines=\"195,221\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testGenerateKeyPair</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception {\n    \n    <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">secret</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;123456&quot;</span>;\n\n    \n    <span class=\"hljs-type\">KeyPairGenerator</span> <span class=\"hljs-variable\">keyPairGenerator</span> <span class=\"hljs-operator\">=</span> KeyPairGenerator.getInstance(<span class=\"hljs-string\">&quot;RSA&quot;</span>);\n    <span class=\"hljs-type\">SecureRandom</span> <span class=\"hljs-variable\">secureRandom</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SecureRandom</span>(secret.getBytes());\n    keyPairGenerator.initialize(<span class=\"hljs-number\">2048</span>, secureRandom);\n\n    \n    <span class=\"hljs-type\">KeyPair</span> <span class=\"hljs-variable\">keyPair</span> <span class=\"hljs-operator\">=</span> keyPairGenerator.genKeyPair();\n\n    \n    <span class=\"hljs-type\">byte</span>[] publicKeyBytes = keyPair.getPublic().getEncoded();\n    publicKeyBytes = Base64.getEncoder().encode(publicKeyBytes);\n    System.out.println(<span class=\"hljs-string\">&quot;&#x516c;&#x94a5;Base64&#x7f16;&#x7801;&#x540e;&#xff1a;&quot;</span> + <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(publicKeyBytes));\n\n    \n    <span class=\"hljs-type\">byte</span>[] privateKeyBytes = keyPair.getPrivate().getEncoded();\n    privateKeyBytes = Base64.getEncoder().encode(privateKeyBytes);\n    System.out.println(<span class=\"hljs-string\">&quot;&#x79c1;&#x94a5;Base64&#x7f16;&#x7801;&#x540e;&#xff1a;&quot;</span> + <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(privateKeyBytes));\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"195,221"}},{"content":"<pre data-lines=\"222,227\"><code data-lines=\"222,227\">&#x516c;&#x94a5;<span class=\"hljs-type\">Base64&#x7f16;&#x7801;&#x540e;&#xff1a;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmtyGIVnd2eDDN</span><span class=\"hljs-operator\">+</span>3wQebfUjWd2KtKfuy50T1is1eNkcmI72aYW90FJhgI4vdiNW5G6XDW2MWgIRevqkNZO4tn3oJ5rFEcu2bSY2DuIaDiWdgUI2A1N5JAweZ5GVlxnfqMDMKvI9qT9aEUQanNqAgONtf4AofCiJt8N8ZyzwMiiD7YKjx19Njdwc3MNMscUC4Bcx8QrLcn5wQC27hhTgvcvj09e9V8FlibowSK<span class=\"hljs-operator\">+</span>nURiQAfSQqMQ1SZNIM0WSobLDTZhgYD<span class=\"hljs-regexp\">/5j/</span><span class=\"hljs-type\">SPh3wok1ne2pYAmj01K8EgvQr</span><span class=\"hljs-regexp\">/k/</span><span class=\"hljs-type\">Lk9nIfs41FRLljlSbWTOnr2nb7BHmMbKeYG</span><span class=\"hljs-operator\">+</span>nlZm7SIBV2tKvwIDAQAB\n&#x79c1;&#x94a5;<span class=\"hljs-type\">Base64&#x7f16;&#x7801;&#x540e;&#xff1a;MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCa3IYhWd3Z4MM37fBB5t9SNZ3Yq0p</span><span class=\"hljs-operator\">+</span>7LnRPWKzV42RyYjvZphb3QUmGAji92I1bkbpcNbYxaAhF6<span class=\"hljs-operator\">+</span>qQ1k7i2fegnmsURy7ZtJjYO4hoOJZ2BQjYDU3kkDB5nkZWXGd<span class=\"hljs-operator\">+</span>owMwq8j2pP1oRRBqc2oCA421<span class=\"hljs-regexp\">/gCh8KIm3w3xnLPAyKIPtgqPHX02N3Bzcw0yxxQLgFzHxCstyfnBALbuGFOC9y+PT171XwWWJujBIr6dRGJAB9JCoxDVJk0gzRZKhssNNmGBgP/</span>mP9I<span class=\"hljs-operator\">+</span><span class=\"hljs-type\">HfCiTWd7algCaPTUrwSC9Cv</span><span class=\"hljs-operator\">+</span><span class=\"hljs-type\">T8uT2ch</span><span class=\"hljs-operator\">+</span>zjUVEuWOVJtZM6evadvsEeYxsp5gb6eVmbtIgFXa0q<span class=\"hljs-regexp\">/AgMBAAECggEASmU+mq8NgSoVHr1T+pTrHBdd6UUA2NDow7h1viqFfFARVNE4yIj5fD93pXGq4HhF4MewrxrhvoQeg/</span><span class=\"hljs-type\">Eu4Qgrsh2ETl</span><span class=\"hljs-regexp\">/5KZ5P3CYowEcF9ptzsTr61eOQ8JXD/</span>4WUq4w907ODZ<span class=\"hljs-regexp\">/oNsqbbkF/</span><span class=\"hljs-operator\">+</span>yIZ2Laq7HpwRvIbVugXACes7n6<span class=\"hljs-operator\">+</span>sn2SduP3uMFMPvzF12EbJUVsw<span class=\"hljs-regexp\">/oKxAhrHg5QZOdfvQbXRlv0SK2wqH7Ti0TWlhr+QgRLLbJEEk7mGxqx8HhyXhljkueKLfSx+nmH+QdmrvJezY2EdAAwzojKq8FqeZEUBQCnhUk9tMyXuyrfn8TW4C1x/</span><span class=\"hljs-regexp\">/zLitngMi5vNhwxaYQKBgQD7m6+lu+tq6qLT8EyjgnMoXsCEPrEF9YyjN0mQMS5+6qO2u/</span>riZ5um8hak2NZYTVyvXAQ0GSl5DdDiDOfUmGTzkB6VWNF<span class=\"hljs-operator\">+</span>nAzQkMQfamw66i7rSaoFoSA5pnkBxz6lydkB1<span class=\"hljs-regexp\">/OsBB/</span>dj90i0Ti0v<span class=\"hljs-regexp\">/SmITynwWsU5qU711EtF+K39QKBgQCdkIYjBD2gx3scBrAQMNv6OIhKdNL5vIz9PJXfRxJv/</span>o5HUfbzxXQnTNwOFjuRGDXeTwbUBeZstStKyHnOBUi<span class=\"hljs-operator\">+</span>8JlhjdbHKIN6nM2JsmJTQGOE1NGoaeKdpxAvETiCpWqquxugetafaz7<span class=\"hljs-operator\">+</span>5cK5C0aY<span class=\"hljs-operator\">+</span><span class=\"hljs-type\">CMJzsy4Jbt8j8</span><span class=\"hljs-regexp\">/ov3grYwKBgQDVWsZOHpTZW8/</span>pMip6uIKYKAjN2y9XY0n3mUlK<span class=\"hljs-operator\">+</span><span class=\"hljs-type\">Tl5K9TZfnuXAs5teXmUHb9cr3U5yihSWUfeu8V1</span><span class=\"hljs-operator\">+</span>gWYNAXet0YH1III<span class=\"hljs-regexp\">/6CqNyfnj+Ho724L3LJNBb2CxVR1GpRYF1pqAspBAlpXEcgt3wZb1y5ItYRuqEf6OD7DCKlwOIHrBQKBgG/</span>3YoqBmfWlq4Mn8Xcf8UHnaFpYmA<span class=\"hljs-operator\">+</span>lgB74LZxDmgOBxcNCqJVjy<span class=\"hljs-regexp\">/2dbYaJH/</span>0kUitOxxBlvO<span class=\"hljs-operator\">+</span>k8kWrHntbX<span class=\"hljs-operator\">+</span>1ndedP7r8JuByqTpi57YsxZ0beILpnvATB0gtQVnLob1sxqRkqEVep01M5HF14eMt9EREIJov5LDkAzQKdBRz3AoGBAO7IOzHp<span class=\"hljs-regexp\">/c8pdsVpWdZNdBXPGZTlFHm0V3MemsgOad00ly11NQg8Nh5l2JXF+iDlgqepXJjoSwk5tVvxVB0MrDS1/</span>efFVHyt8PRR<span class=\"hljs-regexp\">/RbNilNSBjQRkKdBt8mdWEpJpiAPBhr4ln04odTsY/</span><span class=\"hljs-type\">QTFPPrHMcu</span><span class=\"hljs-operator\">/</span>pnvHS<span class=\"hljs-operator\">+</span><span class=\"hljs-type\">NIvPHH84YCF9K</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"222,227"}}],"payload":{"tag":"h3","lines":"193,194"}}],"payload":{"tag":"h2","lines":"152,154"}},{"content":"1.4&#x3001;SSO","children":[{"content":"1.4.1&#x3001;SSO&#x7684;&#x4ecb;&#x7ecd;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/df26e83fb1645107f5c30fe8c43c456c.png\" alt>","children":[],"payload":{"tag":"img","lines":"233,234"}},{"content":"<pre data-lines=\"235,238\"><code>&#x5047;&#x8bbe;&#x7528;&#x6237;&#x8bbf;&#x95ee;&#x7684;&#x9879;&#x76ee;&#x4e2d;&#xff0c;&#x81f3;&#x5c11;&#x6709;3&#x4e2a;&#x5fae;&#x670d;&#x52a1;&#x9700;&#x8981;&#x8bc6;&#x522b;&#x7528;&#x6237;&#x8eab;&#x4efd;&#xff0c;&#x5982;&#x679c;&#x7528;&#x6237;&#x8bbf;&#x95ee;&#x6bcf;&#x4e2a;&#x5fae;&#x670d;&#x52a1;&#x90fd;&#x767b;&#x5f55;&#x4e00;&#x6b21;&#x5c31;&#x592a;&#x9ebb;&#x70e6;&#x4e86;&#xff0c;&#x4e3a;&#x4e86;&#x63d0;&#x9ad8;&#x7528;&#x6237;&#x7684;&#x4f53;&#x9a8c;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x5b9e;&#x73b0;&#x8ba9;&#x7528;&#x6237;&#x5728;&#x4e00;&#x4e2a;&#x7cfb;&#x7edf;&#x4e2d;&#x767b;&#x5f55;&#xff0c;&#x5176;&#x4ed6;&#x4efb;&#x610f;&#x53d7;&#x4fe1;&#x4efb;&#x7684;&#x7cfb;&#x7edf;&#x90fd;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#xff0c;&#x8fd9;&#x4e2a;&#x529f;&#x80fd;&#x5c31;&#x53eb;&#x5355;&#x70b9;&#x767b;&#x5f55;&#x3002;\n\n&#x5355;&#x70b9;&#x767b;&#x5f55;&#xff08;Single Sign On&#xff09;&#xff0c;&#x7b80;&#x79f0;&#x4e3a; SSO&#xff0c;&#x662f;&#x76ee;&#x524d;&#x6bd4;&#x8f83;&#x6d41;&#x884c;&#x7684;&#x4f01;&#x4e1a;&#x4e1a;&#x52a1;&#x6574;&#x5408;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x6848;&#x4e4b;&#x4e00;&#x3002; SSO&#x7684;&#x5b9a;&#x4e49;&#x662f;&#x5728;&#x591a;&#x4e2a;&#x5e94;&#x7528;&#x7cfb;&#x7edf;&#x4e2d;&#xff0c;&#x7528;&#x6237;&#x53ea;&#x9700;&#x8981;&#x767b;&#x5f55;&#x4e00;&#x6b21;&#x5c31;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x6240;&#x6709;&#x76f8;&#x4e92;&#x4fe1;&#x4efb;&#x7684;&#x5e94;&#x7528;&#x7cfb;&#x7edf;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"235,238"}}],"payload":{"tag":"h3","lines":"231,232"}},{"content":"1.4.2&#x3001;SSO&#x7684;&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"241,248\"><code>Java&#x4e2d;&#x6709;&#x5f88;&#x591a;&#x7528;&#x6237;&#x8ba4;&#x8bc1;&#x7684;&#x6846;&#x67b6;&#x90fd;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x5355;&#x70b9;&#x767b;&#x5f55;&#xff1a;\n\n1.  Shiro\n2.  CAS\n3.  Spring Security CAS\n4.  Spring Security JWT\n5.  Spring Security OAuth2.0\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"241,248"}}],"payload":{"tag":"h3","lines":"239,240"}}],"payload":{"tag":"h2","lines":"228,230"}},{"content":"2.1&#x3001;OAuth2.0&#x7684;&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"252,262\"><code>OAuth&#x662f;Open Authorization&#x7684;&#x7b80;&#x5199;&#xff0c;OAuth&#x534f;&#x8bae;&#x4e3a;&#x7528;&#x6237;&#x8d44;&#x6e90;&#x7684;&#x6388;&#x6743;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e2a;&#x5b89;&#x5168;&#x7684;&#x3001;&#x5f00;&#x653e;&#x800c;&#x53c8;&#x7b80;&#x6613;&#x7684;&#x6807;&#x51c6;&#x3002;&#x4e0e;&#x4ee5;&#x5f80;&#x7684;&#x6388;&#x6743;&#x65b9;&#x5f0f;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x662f;OAuth&#x7684;&#x6388;&#x6743;&#x4e0d;&#x4f1a;&#x4f7f;&#x7b2c;&#x4e09;&#x65b9;&#x89e6;&#x53ca;&#x5230;&#x7528;&#x6237;&#x7684;&#x5e10;&#x53f7;&#x4fe1;&#x606f;&#xff08;&#x5982;&#x7528;&#x6237;&#x540d;&#x4e0e;&#x5bc6;&#x7801;&#xff09;&#xff0c;&#x5373;&#x7b2c;&#x4e09;&#x65b9;&#x65e0;&#x9700;&#x4f7f;&#x7528;&#x7528;&#x6237;&#x7684;&#x7528;&#x6237;&#x540d;&#x4e0e;&#x5bc6;&#x7801;&#x5c31;&#x53ef;&#x4ee5;&#x7533;&#x8bf7;&#x83b7;&#x5f97;&#x8be5;&#x7528;&#x6237;&#x8d44;&#x6e90;&#x7684;&#x6388;&#x6743;&#xff0c;&#x56e0;&#x6b64;OAuth&#x662f;&#x5b89;&#x5168;&#x7684;&#x3002;\n\nOAuth2.0&#x662f;OAuth&#x534f;&#x8bae;&#x7684;&#x5ef6;&#x7eed;&#x7248;&#x672c;&#xff0c;&#x4f46;&#x4e0d;&#x5411;&#x524d;&#x517c;&#x5bb9;(&#x5373;&#x5b8c;&#x5168;&#x5e9f;&#x6b62;&#x4e86;OAuth1.0)&#x3002;\n\n&#x90a3;&#x4e48;&#xff0c;&#x6211;&#x4eec;&#x63a5;&#x4e0b;&#x6765;&#x7684;&#x5b66;&#x4e60;&#x76ee;&#x6807;&#x662f;&#x4ec0;&#x4e48;&#xff0c;&#x53ef;&#x4ee5;&#x53c2;&#x8003;&#x5982;&#x4e0b;&#x5b66;&#x4e60;&#x5217;&#x8868;&#xff1a;\n\n1.  &#x5b66;&#x4e60;&#x7cbe;&#x786e;&#x5230;&#x6309;&#x94ae;&#x7ea7;&#x522b;&#x7684;&#x6743;&#x9650;&#x63a7;&#x5236;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x7684;&#x8bbe;&#x8ba1;&#xff08;&#x8fd9;&#x4e00;&#x5757;&#x4e0d;&#x7b97;&#x662f;OAuth2.0&#x7684;&#x5185;&#x5bb9;&#xff09;\n2.  &#x5b66;&#x4e60;&#x5982;&#x4f55;&#x4e3a;&#x7b2c;&#x4e09;&#x65b9;&#x5e94;&#x7528;&#x6388;&#x4e88;&#x8bbf;&#x95ee;&#x7cfb;&#x7edf;&#x8d44;&#x6e90;&#x7684;&#x6743;&#x9650;&#xff08;&#x7c7b;&#x4f3c;&#x5b9e;&#x73b0;&#x7f51;&#x7ad9;&#x4e0a;&#x7684;QQ&#x5feb;&#x901f;&#x767b;&#x5f55;&#xff09;\n3.  &#x5b66;&#x4e60;&#x5982;&#x4f55;&#x5728;&#x5fae;&#x670d;&#x52a1;&#x73af;&#x5883;&#x4e0b;&#x5b9e;&#x73b0;&#x7edf;&#x4e00;&#x5355;&#x70b9;&#x767b;&#x5f55;&#x529f;&#x80fd;\n4.  &#x89e3;&#x51b3;&#x5355;&#x70b9;&#x767b;&#x5f55;&#x540e;&#x5982;&#x4f55;&#x5b9e;&#x73b0;&#x670d;&#x52a1;&#x4e0e;&#x670d;&#x52a1;&#x4e4b;&#x95f4;&#x7684;&#x8c03;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"252,262"}}],"payload":{"tag":"h2","lines":"249,251"}},{"content":"2.2&#x3001;OAuth2.0&#x7684;&#x6a21;&#x5f0f;","children":[{"content":"2.2.1&#x3001;&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"270,287\"><code>&#x6a21;&#x5f0f;&#x540d;&#x79f0;\n\nauthorization code\n\n&#x4f7f;&#x7528;&#x6d41;&#x7a0b;\n\n&#x8bf4;&#x660e;&#xff1a;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x9700;&#x8981;&#x7528;&#x5230;&#x3010;B&#x670d;&#x52a1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x3011;&#x4e2d;&#x7684;&#x8d44;&#x6e90;&#x3002;\n\n*   &#x7b2c;&#x4e00;&#x6b65;&#xff1a;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x5c06;&#x7528;&#x6237;&#x81ea;&#x52a8;&#x5bfc;&#x822a;&#x5230;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x7528;&#x6237;&#x9700;&#x8981;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x5730;&#x5740;&#xff0c;&#x4ee5;&#x5907; &#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x8fd4;&#x56de;&#x6388;&#x6743;&#x7801;&#x4f7f;&#x7528;&#x3002;\n*   &#x7b2c;&#x4e8c;&#x6b65;&#xff1a;&#x7528;&#x6237;&#x70b9;&#x51fb;&#x6388;&#x6743;&#x6309;&#x94ae;&#x8868;&#x793a;&#x8ba9;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x4f7f;&#x7528;&#x3010;B&#x670d;&#x52a1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x3011;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x9700;&#x8981;&#x7528;&#x6237;&#x767b;&#x5f55;B&#x670d;&#x52a1;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x7528;&#x6237;&#x8981;&#x4e8b;&#x5148;&#x5177;&#x6709;B&#x670d;&#x52a1;&#x7684;&#x4f7f;&#x7528;&#x6743;&#x9650;&#x3002;\n*   &#x7b2c;&#x4e09;&#x6b65;&#xff1a;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x751f;&#x6210;&#x6388;&#x6743;&#x7801;&#xff0c;&#x6388;&#x6743;&#x7801;&#x5c06;&#x901a;&#x8fc7;&#x7b2c;&#x4e00;&#x6b65;&#x63d0;&#x4f9b;&#x7684;&#x56de;&#x8c03;&#x5730;&#x5740;&#xff0c;&#x8fd4;&#x56de;&#x7ed9;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x3002; &#x6ce8;&#x610f;&#x8fd9;&#x4e2a;&#x6388;&#x6743;&#x7801;&#x5e76;&#x975e;&#x901a;&#x884c;&#x3010;B&#x670d;&#x52a1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x3011;&#x7684;&#x901a;&#x884c;&#x51ed;&#x8bc1;&#x3002;\n*   &#x7b2c;&#x56db;&#x6b65;&#xff1a;&#x3010;A&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x643a;&#x5e26;&#x4e0a;&#x4e00;&#x6b65;&#x5f97;&#x5230;&#x7684;&#x6388;&#x6743;&#x7801;&#x5411;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#xff0c;&#x83b7;&#x53d6;&#x901a;&#x884c;&#x51ed;&#x8bc1;token&#x3002;\n*   &#x7b2c;&#x4e94;&#x6b65;&#xff1a;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x7ed9;&#x3010;A&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x8fd4;&#x56de;&#x4ee4;&#x724c;token&#x548c;&#x66f4;&#x65b0;&#x4ee4;&#x724c;refresh token&#x3002;\n\n&#x4f7f;&#x7528;&#x573a;&#x666f;\n\n&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;&#x662f;OAuth2.0&#x4e2d;&#x6700;&#x5b89;&#x5168;&#x6700;&#x5b8c;&#x5584;&#x7684;&#x4e00;&#x79cd;&#x6a21;&#x5f0f;&#xff0c;&#x5e94;&#x7528;&#x573a;&#x666f;&#x6700;&#x5e7f;&#x6cdb;&#xff0c;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x670d;&#x52a1;&#x4e4b;&#x95f4;&#x7684;&#x8c03;&#x7528;&#xff0c;&#x5e38;&#x89c1;&#x7684;&#x5fae;&#x4fe1;&#xff0c;QQ&#x7b49;&#x7b2c;&#x4e09;&#x65b9;&#x767b;&#x5f55;&#x4e5f;&#x53ef;&#x91c7;&#x7528;&#x8fd9;&#x79cd;&#x65b9;&#x5f0f;&#x5b9e;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"270,287"}}],"payload":{"tag":"h3","lines":"268,269"}},{"content":"2.2.2&#x3001;&#x7b80;&#x5316;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"290,305\"><code>&#x6a21;&#x5f0f;&#x540d;&#x79f0;\n\nimplicit\n\n&#x4f7f;&#x7528;&#x6d41;&#x7a0b;\n\n&#x8bf4;&#x660e;&#xff1a;&#x7b80;&#x5316;&#x6a21;&#x5f0f;&#x4e2d;&#x6ca1;&#x6709;&#x3010;A&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x8fd9;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x5168;&#x90e8;&#x7531;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x4e0e;B&#x670d;&#x52a1;&#x4ea4;&#x4e92;&#xff0c;&#x6574;&#x4e2a;&#x8fc7;&#x7a0b;&#x4e0d;&#x518d;&#x6709;&#x6388;&#x6743;&#x7801;&#xff0c;token&#x76f4;&#x63a5;&#x66b4;&#x9732;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x3002;\n\n*   &#x7b2c;&#x4e00;&#x6b65;&#xff1a;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x5c06;&#x7528;&#x6237;&#x81ea;&#x52a8;&#x5bfc;&#x822a;&#x5230;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x7528;&#x6237;&#x9700;&#x8981;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x5730;&#x5740;&#xff0c;&#x4ee5;&#x5907; &#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x8fd4;&#x56de;token&#x4f7f;&#x7528;&#xff0c;&#x8fd8;&#x4f1a;&#x643a;&#x5e26;&#x4e00;&#x4e2a;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x7684;&#x72b6;&#x6001;&#x6807;&#x8bc6;state&#x3002;\n*   &#x7b2c;&#x4e8c;&#x6b65;&#xff1a;&#x7528;&#x6237;&#x70b9;&#x51fb;&#x6388;&#x6743;&#x6309;&#x94ae;&#x8868;&#x793a;&#x8ba9;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x4f7f;&#x7528;&#x3010;B&#x670d;&#x52a1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x3011;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x9700;&#x8981;&#x7528;&#x6237;&#x767b;&#x5f55;B&#x670d;&#x52a1;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x7528;&#x6237;&#x8981;&#x4e8b;&#x5148;&#x5177;&#x6709;B&#x670d;&#x52a1;&#x7684;&#x4f7f;&#x7528;&#x6743;&#x9650;&#x3002;\n*   &#x7b2c;&#x4e09;&#x6b65;&#xff1a;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x751f;&#x6210;&#x901a;&#x884c;&#x4ee4;&#x724c;token&#xff0c;token&#x5c06;&#x901a;&#x8fc7;&#x7b2c;&#x4e00;&#x6b65;&#x63d0;&#x4f9b;&#x7684;&#x56de;&#x8c03;&#x5730;&#x5740;&#xff0c;&#x8fd4;&#x56de;&#x7ed9;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x3002;\n\n&#x4f7f;&#x7528;&#x573a;&#x666f;\n\n&#x9002;&#x7528;&#x4e8e;A&#x670d;&#x52a1;&#x6ca1;&#x6709;&#x670d;&#x52a1;&#x5668;&#x7684;&#x60c5;&#x51b5;&#x3002;&#x6bd4;&#x5982;&#xff1a;&#x7eaf;&#x624b;&#x673a;&#x5c0f;&#x7a0b;&#x5e8f;&#xff0c;JavaScript&#x8bed;&#x8a00;&#x5b9e;&#x73b0;&#x7684;&#x7f51;&#x9875;&#x63d2;&#x4ef6;&#x7b49;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"290,305"}}],"payload":{"tag":"h3","lines":"288,289"}},{"content":"2.2.3&#x3001;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"308,321\"><code>&#x6a21;&#x5f0f;&#x540d;&#x79f0;\n\nresource owner password credentials\n\n&#x4f7f;&#x7528;&#x6d41;&#x7a0b;\n\n*   &#x7b2c;&#x4e00;&#x6b65;&#xff1a;&#x76f4;&#x63a5;&#x544a;&#x8bc9;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x81ea;&#x5df1;&#x7684;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x7684;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x3002;\n*   &#x7b2c;&#x4e8c;&#x6b65;&#xff1a;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x643a;&#x5e26;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x7684;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x5411;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x53d1;&#x8d77;&#x8bf7;&#x6c42;&#x83b7;&#x53d6; token&#x3002;\n*   &#x7b2c;&#x4e09;&#x6b65;&#xff1a;&#x3010;B&#x670d;&#x52a1;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x3011;&#x7ed9;&#x3010;A&#x670d;&#x52a1;&#x5ba2;&#x6237;&#x7aef;&#x3011;&#x9881;&#x53d1;token&#x3002;\n\n&#x4f7f;&#x7528;&#x573a;&#x666f;\n\n&#x6b64;&#x79cd;&#x6a21;&#x5f0f;&#x867d;&#x7136;&#x7b80;&#x5355;&#xff0c;&#x4f46;&#x662f;&#x7528;&#x6237;&#x5c06;B&#x670d;&#x52a1;&#x7684;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x66b4;&#x9732;&#x7ed9;&#x4e86;A&#x670d;&#x52a1;&#xff0c;&#x9700;&#x8981;&#x4e24;&#x4e2a;&#x670d;&#x52a1;&#x4fe1;&#x4efb;&#x5ea6;&#x975e;&#x5e38;&#x9ad8;&#x624d;&#x80fd;&#x4f7f;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"308,321"}}],"payload":{"tag":"h3","lines":"306,307"}},{"content":"2.2.4&#x3001;&#x5ba2;&#x6237;&#x7aef;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"324,338\"><code>&#x6a21;&#x5f0f;&#x540d;&#x79f0;\n\nclient credentials\n\n&#x4f7f;&#x7528;&#x6d41;&#x7a0b;\n\n&#x8bf4;&#x660e;&#xff1a;&#x8fd9;&#x79cd;&#x6a21;&#x5f0f;&#x5176;&#x5b9e;&#x5df2;&#x7ecf;&#x4e0d;&#x592a;&#x5c5e;&#x4e8e;OAuth2.0&#x7684;&#x8303;&#x7574;&#x4e86;&#x3002;A&#x670d;&#x52a1;&#x5b8c;&#x5168;&#x8131;&#x79bb;&#x7528;&#x6237;&#xff0c;&#x4ee5;&#x81ea;&#x5df1;&#x7684;&#x8eab;&#x4efd;&#x53bb;&#x5411;B&#x670d;&#x52a1;&#x7d22;&#x53d6;token&#x3002;&#x6362;&#x8a00;&#x4e4b;&#xff0c;&#x7528;&#x6237;&#x65e0;&#x9700;&#x5177;&#x5907;B&#x670d;&#x52a1;&#x7684;&#x4f7f;&#x7528;&#x6743;&#x4e5f;&#x53ef;&#x4ee5;&#x3002;&#x5b8c;&#x5168;&#x662f;A&#x670d;&#x52a1;&#x4e0e;B&#x670d;&#x52a1;&#x5185;&#x90e8;&#x7684;&#x4ea4;&#x4e92;&#xff0c;&#x4e0e;&#x7528;&#x6237;&#x65e0;&#x5173;&#x4e86;&#x3002;\n\n*   &#x7b2c;&#x4e00;&#x6b65;&#xff1a;A&#x670d;&#x52a1;&#x5411;B&#x670d;&#x52a1;&#x7d22;&#x53d6;token&#x3002;\n*   &#x7b2c;&#x4e8c;&#x6b65;&#xff1a;B&#x670d;&#x52a1;&#x8fd4;&#x56de;token&#x7ed9;A&#x670d;&#x52a1;&#x3002;\n\n&#x4f7f;&#x7528;&#x573a;&#x666f;\n\nA&#x670d;&#x52a1;&#x672c;&#x8eab;&#x9700;&#x8981;B&#x670d;&#x52a1;&#x8d44;&#x6e90;&#xff0c;&#x4e0e;&#x7528;&#x6237;&#x65e0;&#x5173;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"324,338"}}],"payload":{"tag":"h3","lines":"322,323"}}],"payload":{"tag":"h2","lines":"263,265"}},{"content":"3.1&#x3001;&#x9879;&#x76ee;&#x7684;&#x51c6;&#x5907;&#x4e0e;&#x4ecb;&#x7ecd;","children":[{"content":"<pre data-lines=\"342,343\"><code>&#x8bf7;&#x5230;&#x914d;&#x5957;&#x8d44;&#x6599;&#x4e2d;&#x7684;`01-&#x57fa;&#x7840;&#x4ee3;&#x7801;`&#x4e2d;&#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684;&#x5de5;&#x7a0b;&#x4ee3;&#x7801;&#xff0c;&#x5e76;&#x4f7f;&#x7528;`idea`&#x6253;&#x5f00;&#x8fd9;&#x4e2a;&#x5de5;&#x7a0b;&#xff0c;&#x5982;&#x679c;&#x4e00;&#x5207;&#x6b63;&#x5e38;&#xff0c;&#x90a3;&#x4e48;&#x4f60;&#x5c06;&#x770b;&#x5230;&#x5982;&#x4e0b;&#x754c;&#x9762;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"342,343"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/3c394cfb25d09e1af70e611b459caba2.png\" alt>","children":[],"payload":{"tag":"img","lines":"344,345"}},{"content":"<pre data-lines=\"346,349\"><code>&#x4e3a;&#x4e86;&#x5b66;&#x4e60;&#x7684;&#x65b9;&#x4fbf;&#xff0c;&#x6211;&#x7279;&#x610f;&#x91cd;&#x65b0;&#x5efa;&#x4e86;&#x8fd9;&#x4e2a;&#x5de5;&#x7a0b;&#xff0c;&#x8fd9;&#x91cc;&#x8fb9;&#x6709;&#x56db;&#x4e2a;&#x9879;&#x76ee;&#xff0c;&#x4ed6;&#x4eec;&#x57fa;&#x672c;&#x4e0a;&#x90fd;&#x662f;&#x7a7a;&#x7684;&#xff0c;&#x6211;&#x5df2;&#x7ecf;&#x628a;&#x8981;&#x7528;&#x5230;&#x7684;&#x76f8;&#x5173;&#x4f9d;&#x8d56;&#x3001;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x3001;&#x5305;&#x7ed3;&#x6784;&#x90fd;&#x51c6;&#x5907;&#x597d;&#x4e86;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x6253;&#x5f00;&#x67e5;&#x770b;&#xff0c;&#x57fa;&#x672c;&#x90fd;&#x80fd;&#x770b;&#x61c2; &#xff0c;&#x5e76;&#x6ca1;&#x6709;&#x4ec0;&#x4e48;&#x7279;&#x522b;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x5e76;&#x4e14;&#x8fd9;&#x56db;&#x4e2a;&#x9879;&#x76ee;&#xff0c;&#x5728;&#x5b66;&#x4e60;&#x7684;&#x524d;&#x671f;&#xff0c;&#x6211;&#x4eec;&#x57fa;&#x672c;&#x4e0a;&#x5c31;&#x4f1a;&#x7528;&#x5230;&#x5176;&#x4e2d;&#x7684;&#x4e00;&#x5230;&#x4e24;&#x4e2a;&#xff0c;`oauth2-server-eureka1000`&#x6ce8;&#x518c;&#x4e2d;&#x5fc3;&#x6211;&#x4eec;&#x53ea;&#x8981;&#x5355;&#x7eaf;&#x7684;&#x542f;&#x52a8;&#x5c31;&#x53ef;&#x4ee5;&#x4e86;&#xff0c;&#x672c;&#x7ae0;&#x4e5f;&#x4e0d;&#x5bf9;&#x6ce8;&#x518c;&#x4e2d;&#x5fc3;&#x8fdb;&#x884c;&#x4ecb;&#x7ecd;&#xff0c;&#x91cd;&#x70b9;&#x5b66;&#x4e60;&#x5c06;&#x5728;`oauth2-server-auth1001`&#x548c;`oauth2-resource-order1002`&#x5de5;&#x7a0b;&#x4e2d;&#x3002;\n\n&#x6211;&#x4eec;&#x672c;&#x7ae0;&#x5c06;&#x8981;&#x5b66;&#x4e60;&#x7cbe;&#x786e;&#x5230;&#x6309;&#x94ae;&#x7ea7;&#x522b;&#x7684;&#x6743;&#x9650;&#x63a7;&#x5236;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x7684;&#x8bbe;&#x8ba1;&#xff0c;&#x5927;&#x90e8;&#x5206;&#x90fd;&#x662f;&#x4ee3;&#x7801;&#xff0c;&#x800c;&#x4e14;&#x6d89;&#x53ca;&#x5230;&#x7684;&#x8bed;&#x53e5;&#x90fd;&#x662f;&#x6700;&#x57fa;&#x672c;&#x7684;&#x589e;&#x5220;&#x6539;&#x67e5;&#xff0c;&#x76f8;&#x4fe1;&#x4e0d;&#x96be;&#x7406;&#x89e3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"346,349"}}],"payload":{"tag":"h2","lines":"339,341"}},{"content":"3.2&#x3001;&#x6570;&#x636e;&#x5e93;&#x7684;&#x6570;&#x636e;&#x5bfc;&#x5165;","children":[{"content":"<pre data-lines=\"353,354\"><code>&#x6211;&#x4eec;&#x91c7;&#x7528;&#x7684;&#x6570;&#x636e;&#x5e93;&#x662f;`mysql 5.5`&#xff0c;&#x6211;&#x5efa;&#x8bae;&#x4f60;&#x548c;&#x6211;&#x4fdd;&#x6301;&#x4e00;&#x81f4;&#xff0c;&#x6253;&#x5f00;&#x4f60;&#x7684;&#x56fe;&#x5f62;&#x5316;&#x754c;&#x9762;&#x5de5;&#x5177;&#xff0c;&#x8fd0;&#x884c;&#x4ee5;&#x4e0b;`sql`&#x8bed;&#x53e5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"353,354"}},{"content":"<pre data-lines=\"355,500\"><code class=\"language-sql\">\n<span class=\"hljs-keyword\">CREATE</span> DATABASE `spring<span class=\"hljs-operator\">-</span>cloud<span class=\"hljs-operator\">-</span>oauth2`;\n\n\nUSE `spring<span class=\"hljs-operator\">-</span>cloud<span class=\"hljs-operator\">-</span>oauth2`;\n\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `sys_user` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `sys_user` (\n  `id` <span class=\"hljs-type\">INT</span> (<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> AUTO_INCREMENT COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7f16;&#x53f7;&apos;</span>,\n  `username` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x59d3;&#x540d;&apos;</span>,\n  `password` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x5bc6;&#x7801;&apos;</span>,\n  `avatar` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">128</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x5934;&#x50cf;&apos;</span>,\n  `mobile` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x624b;&#x673a;&apos;</span>,\n  `email` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x90ae;&#x7bb1;&apos;</span>,\n  `status` <span class=\"hljs-type\">INT</span> (<span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">NOT NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">&apos;0&apos;</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x72b6;&#x6001;&apos;</span>,\n  <span class=\"hljs-keyword\">PRIMARY KEY</span> (`id`)\n) ENGINE<span class=\"hljs-operator\">=</span>INNODB AUTO_INCREMENT<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1003</span> <span class=\"hljs-keyword\">DEFAULT</span> CHARSET<span class=\"hljs-operator\">=</span>utf8;\n\n\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user`(`id`,`username`,`password`,`avatar`,`mobile`,`email`,`status`) \n<span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-string\">&apos;zhangsan&apos;</span>,<span class=\"hljs-string\">&apos;&#x24;2a&#x24;10&#x24;M7fmKpMZEkkzrTBiKie.EeAKZhQDrWAltpCA1y/py5AU/8lyiNB8y&apos;</span>,\n<span class=\"hljs-string\">&apos;https://qlogo2.store.qq.com/qzone/774908833/774908833/100&apos;</span>,<span class=\"hljs-string\">&apos;15633029014&apos;</span>,<span class=\"hljs-string\">&apos;774908833@qq.com&apos;</span>,<span class=\"hljs-number\">0</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user`(`id`,`username`,`password`,`avatar`,`mobile`,`email`,`status`) \n<span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-string\">&apos;lisi&apos;</span>,<span class=\"hljs-string\">&apos;&#x24;2a&#x24;10&#x24;M7fmKpMZEkkzrTBiKie.EeAKZhQDrWAltpCA1y/py5AU/8lyiNB8y&apos;</span>,\n<span class=\"hljs-string\">&apos;https://qlogo2.store.qq.com/qzone/774908833/774908833/100&apos;</span>,<span class=\"hljs-string\">&apos;15633029014&apos;</span>,<span class=\"hljs-string\">&apos;774908833@qq.com&apos;</span>,<span class=\"hljs-number\">0</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user`(`id`,`username`,`password`,`avatar`,`mobile`,`email`,`status`) \n<span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-string\">&apos;wangwu&apos;</span>,<span class=\"hljs-string\">&apos;&#x24;2a&#x24;10&#x24;M7fmKpMZEkkzrTBiKie.EeAKZhQDrWAltpCA1y/py5AU/8lyiNB8y&apos;</span>,\n<span class=\"hljs-string\">&apos;https://qlogo2.store.qq.com/qzone/774908833/774908833/100&apos;</span>,<span class=\"hljs-string\">&apos;15633029014&apos;</span>,<span class=\"hljs-string\">&apos;774908833@qq.com&apos;</span>,<span class=\"hljs-number\">0</span>);\n\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `sys_role`;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `sys_role` (\n  `id` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> AUTO_INCREMENT COMMENT <span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7f16;&#x53f7;&apos;</span>,\n  `name` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x540d;&#x79f0;&apos;</span>,\n  <span class=\"hljs-keyword\">PRIMARY KEY</span> (`id`)\n) ENGINE<span class=\"hljs-operator\">=</span>INNODB AUTO_INCREMENT<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1003</span> <span class=\"hljs-keyword\">DEFAULT</span> CHARSET<span class=\"hljs-operator\">=</span>utf8;\n\n\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role`(`id`,`name`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-string\">&apos;&#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;&apos;</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role`(`id`,`name`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x5458;&apos;</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role`(`id`,`name`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&#x7ba1;&#x7406;&#x5458;&apos;</span>);\n\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `sys_menu`;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `sys_menu` (\n  `id` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> AUTO_INCREMENT COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7f16;&#x53f7;&apos;</span>,\n  `name` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x540d;&#x79f0;&apos;</span>,\n  `code` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x6743;&#x9650;&apos;</span>,\n  `type` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7c7b;&#x578b;&#xff08;0&#xff1a;&#x76ee;&#x5f55;&#x3001;1&#xff1a;&#x9875;&#x9762;&#x3001;2&#xff1a;&#x6309;&#x94ae;&#xff09;&apos;</span>,\n  `icon` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x56fe;&#x6807;&apos;</span>,\n  `url` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x5730;&#x5740;&apos;</span>,\n  `level` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7ea7;&#x522b;&#xff08;&#x7528;&#x4e8e;&#x5feb;&#x901f;&#x533a;&#x5206;&#x5f53;&#x524d;&#x83dc;&#x5355;&#x5c42;&#x7ea7;&#xff09;&apos;</span>,\n  `path` <span class=\"hljs-type\">VARCHAR</span>(<span class=\"hljs-number\">256</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x8def;&#x5f84;&#xff08;&#x7528;&#x4e8e;&#x5feb;&#x901f;&#x627e;&#x5230;&#x5f53;&#x524d;&#x83dc;&#x5355;&#x7956;&#x8f88;&#xff09;&apos;</span>,\n  `sort` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x6392;&#x5e8f;&apos;</span>,\n  `status` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-string\">&apos;0&apos;</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x72b6;&#x6001;&#xff08;0&#xff1a;&#x6b63;&#x5e38;&#x3001;1&#xff1a;&#x7981;&#x7528;&#xff09;&apos;</span>,\n  `parent_id` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x4e0a;&#x7ea7;&#x83dc;&#x5355;&apos;</span>,\n  <span class=\"hljs-keyword\">PRIMARY KEY</span> (`id`)\n) ENGINE<span class=\"hljs-operator\">=</span>INNODB AUTO_INCREMENT<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1028</span> <span class=\"hljs-keyword\">DEFAULT</span> CHARSET<span class=\"hljs-operator\">=</span>utf8;\n\n\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-string\">&apos;&#x7cfb;&#x7edf;&apos;</span>,<span class=\"hljs-string\">&apos;system&apos;</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-string\">&apos;el-icon-folder&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7ba1;&#x7406;&apos;</span>,<span class=\"hljs-string\">&apos;userMgr&apos;</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&apos;el-icon-menu&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1000</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7ba1;&#x7406;&apos;</span>,<span class=\"hljs-string\">&apos;roleMgr&apos;</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&apos;el-icon-menu&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1000</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1003</span>,<span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7ba1;&#x7406;&apos;</span>,<span class=\"hljs-string\">&apos;menuMgr&apos;</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&apos;el-icon-menu&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1000</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1004</span>,<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7ba1;&#x7406;:&#x67e5;&#x8be2;&apos;</span>,<span class=\"hljs-string\">&apos;userMgr:find&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-search&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1005</span>,<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7ba1;&#x7406;:&#x65b0;&#x589e;&apos;</span>,<span class=\"hljs-string\">&apos;userMgr:add&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-plus&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1006</span>,<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7ba1;&#x7406;:&#x5220;&#x9664;&apos;</span>,<span class=\"hljs-string\">&apos;userMgr:delete&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-delete&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1007</span>,<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7ba1;&#x7406;:&#x4fee;&#x6539;&apos;</span>,<span class=\"hljs-string\">&apos;userMgr:update&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-edit&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1008</span>,<span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7ba1;&#x7406;:&#x67e5;&#x8be2;&apos;</span>,<span class=\"hljs-string\">&apos;roleMgr:find&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-search&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1002</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1009</span>,<span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7ba1;&#x7406;:&#x65b0;&#x589e;&apos;</span>,<span class=\"hljs-string\">&apos;roleMgr:add&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-plus&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1002</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1010</span>,<span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7ba1;&#x7406;:&#x5220;&#x9664;&apos;</span>,<span class=\"hljs-string\">&apos;roleMgr:delete&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-delete&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1002</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1011</span>,<span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7ba1;&#x7406;:&#x4fee;&#x6539;&apos;</span>,<span class=\"hljs-string\">&apos;roleMgr:update&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-edit&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1002</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1012</span>,<span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7ba1;&#x7406;:&#x67e5;&#x8be2;&apos;</span>,<span class=\"hljs-string\">&apos;menuMgr:find&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-search&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1003</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1013</span>,<span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7ba1;&#x7406;:&#x65b0;&#x589e;&apos;</span>,<span class=\"hljs-string\">&apos;menuMgr:add&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-plus&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1003</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1014</span>,<span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7ba1;&#x7406;:&#x5220;&#x9664;&apos;</span>,<span class=\"hljs-string\">&apos;menuMgr:delete&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-delete&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1003</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1015</span>,<span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7ba1;&#x7406;:&#x4fee;&#x6539;&apos;</span>,<span class=\"hljs-string\">&apos;menuMgr:update&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-edit&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1003</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1016</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&apos;</span>,<span class=\"hljs-string\">&apos;order&apos;</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-string\">&apos;el-icon-folder&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1017</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&apos;</span>,<span class=\"hljs-string\">&apos;orderMgr&apos;</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&apos;el-icon-menu&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1016</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1018</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&#x7ba1;&#x7406;:&#x67e5;&#x8be2;&apos;</span>,<span class=\"hljs-string\">&apos;orderMgr:find&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-search&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1017</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1019</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&#x7ba1;&#x7406;:&#x65b0;&#x589e;&apos;</span>,<span class=\"hljs-string\">&apos;orderMgr:add&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-plus&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1017</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1020</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&#x7ba1;&#x7406;:&#x5220;&#x9664;&apos;</span>,<span class=\"hljs-string\">&apos;orderMgr:delete&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-delete&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1017</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1021</span>,<span class=\"hljs-string\">&apos;&#x8ba2;&#x5355;&#x7ba1;&#x7406;:&#x4fee;&#x6539;&apos;</span>,<span class=\"hljs-string\">&apos;orderMgr:update&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-edit&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1017</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1022</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&apos;</span>,<span class=\"hljs-string\">&apos;goods&apos;</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-string\">&apos;el-icon-folder&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1023</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&#x7ba1;&#x7406;&apos;</span>,<span class=\"hljs-string\">&apos;goodsMgr&apos;</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&apos;el-icon-menu&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1022</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1024</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&#x7ba1;&#x7406;:&#x67e5;&#x8be2;&apos;</span>,<span class=\"hljs-string\">&apos;goodsMgr:find&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-search&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1023</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1025</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&#x7ba1;&#x7406;:&#x65b0;&#x589e;&apos;</span>,<span class=\"hljs-string\">&apos;goodsMgr:add&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-plus&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1023</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1026</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&#x7ba1;&#x7406;:&#x5220;&#x9664;&apos;</span>,<span class=\"hljs-string\">&apos;goodsMgr:delete&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-delete&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1023</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_menu`(`id`,`name`,`code`,`type`,`icon`,`url`,`level`,`path`,`sort`,`status`,`parent_id`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1027</span>,<span class=\"hljs-string\">&apos;&#x5546;&#x54c1;&#x7ba1;&#x7406;:&#x4fee;&#x6539;&apos;</span>,<span class=\"hljs-string\">&apos;goodsMgr:update&apos;</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&apos;el-icon-edit&apos;</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-keyword\">NULL</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1023</span>);\n\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `sys_user_role`;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `sys_user_role` (\n  `uid` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x7f16;&#x53f7;&apos;</span>,\n  `rid` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7f16;&#x53f7;&apos;</span>,\n  <span class=\"hljs-keyword\">PRIMARY KEY</span> (`uid`,`rid`)\n) ENGINE<span class=\"hljs-operator\">=</span>INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET<span class=\"hljs-operator\">=</span>utf8;\n\n\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user_role`(`uid`,`rid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1000</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user_role`(`uid`,`rid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user_role`(`uid`,`rid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1002</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user_role`(`uid`,`rid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_user_role`(`uid`,`rid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1002</span>);\n\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `sys_role_menu`;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `sys_role_menu` (\n  `rid` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x89d2;&#x8272;&#x7f16;&#x53f7;&apos;</span>,\n  `mid` <span class=\"hljs-type\">INT</span>(<span class=\"hljs-number\">11</span>) <span class=\"hljs-keyword\">NOT NULL</span> COMMENT <span class=\"hljs-string\">&apos;&#x83dc;&#x5355;&#x7f16;&#x53f7;&apos;</span>,\n  <span class=\"hljs-keyword\">PRIMARY KEY</span> (`rid`,`mid`)\n) ENGINE<span class=\"hljs-operator\">=</span>INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET<span class=\"hljs-operator\">=</span>utf8;\n\n\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1000</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1001</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1002</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1003</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1004</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1005</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1006</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1007</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1008</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1009</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1010</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1011</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1012</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1013</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1014</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1000</span>,<span class=\"hljs-number\">1015</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1016</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1017</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1018</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1019</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1020</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1001</span>,<span class=\"hljs-number\">1021</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1022</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1023</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1024</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1025</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1026</span>);\n<span class=\"hljs-keyword\">INSERT  INTO</span> `sys_role_menu`(`rid`,`mid`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1002</span>,<span class=\"hljs-number\">1027</span>);\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"355,500"}},{"content":"<pre data-lines=\"501,502\"><code>&#x6570;&#x636e;&#x5bfc;&#x5165;&#x5b8c;&#x6210;&#x4ee5;&#x540e;&#xff0c;&#x8bf7;&#x68c0;&#x67e5;`oauth2-server-auth1001`&#x3001;`oauth2-resource-order1002`&#x3001;`oauth2-resource-goods1003`&#x8fd9;&#x4e09;&#x4e2a;&#x9879;&#x76ee;&#x7684;&#x6570;&#x636e;&#x6e90;&#x7684;&#x914d;&#x7f6e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"501,502"}}],"payload":{"tag":"h2","lines":"350,352"}},{"content":"3.3&#x3001;&#x6570;&#x636e;&#x5e93;&#x8868;&#x8bbe;&#x8ba1;&#x67b6;&#x6784;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ced4e0b9bf179bd2cf80e06e646186f2.png\" alt>","children":[],"payload":{"tag":"img","lines":"506,507"}},{"content":"<pre data-lines=\"508,519\"><code>&#x5728;&#x521d;&#x59cb;&#x5316;&#x7684;&#x6570;&#x636e;&#x4e2d;&#xff0c;&#x6709;&#x4e09;&#x4e2a;&#x7528;&#x6237;&#x5206;&#x522b;&#x662f;&#xff1a;`zhangsan`&#x3001;`lisi`&#x3001;`wangwu`&#xff0c;&#x4ed6;&#x4eec;&#x4e09;&#x4e2a;&#x7528;&#x6237;&#x5206;&#x522b;&#x5177;&#x6709;&#x4ee5;&#x4e0b;&#x7684;&#x89d2;&#x8272;&#x5173;&#x7cfb;&#xff1a;\n\n*   zhangsan&#xff1a;&#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;&#x3001;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x5458;&#x3001;&#x5546;&#x54c1;&#x7ba1;&#x7406;&#x5458;\n*   lisi&#xff1a;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x5458;\n*   wangwu&#xff1a;&#x5546;&#x54c1;&#x7ba1;&#x7406;&#x5458;\n\n&#x5728;&#x521d;&#x59cb;&#x5316;&#x7684;&#x6570;&#x636e;&#x4e2d;&#xff0c;&#x6709;&#x4e09;&#x4e2a;&#x89d2;&#x8272;&#x5206;&#x522b;&#x662f;&#xff1a;`&#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;`&#x3001;`&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x5458;`&#x3001;`&#x5546;&#x54c1;&#x7ba1;&#x7406;&#x5458;`&#xff0c;&#x4ed6;&#x4eec;&#x4e09;&#x4e2a;&#x89d2;&#x8272;&#x5206;&#x522b;&#x5177;&#x6709;&#x4ee5;&#x4e0b;&#x7684;&#x83dc;&#x5355;&#x6743;&#x9650;&#x5173;&#x7cfb;&#xff1a;\n\n*   &#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;&#xff1a;&#x7528;&#x6237;&#x7ba1;&#x7406;&#xff08;&#x589e;&#x5220;&#x6539;&#x67e5;&#xff09;&#x3001;&#x89d2;&#x8272;&#x7ba1;&#x7406;&#xff08;&#x589e;&#x5220;&#x6539;&#x67e5;&#xff09;&#x3001;&#x83dc;&#x5355;&#x7ba1;&#x7406;&#xff08;&#x589e;&#x5220;&#x6539;&#x67e5;&#xff09;\n*   &#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x5458;&#xff1a;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#xff08;&#x589e;&#x5220;&#x6539;&#x67e5;&#xff09;\n*   &#x5546;&#x54c1;&#x7ba1;&#x7406;&#x5458;&#xff1a;&#x5546;&#x54c1;&#x7ba1;&#x7406;&#xff08;&#x589e;&#x5220;&#x6539;&#x67e5;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"508,519"}}],"payload":{"tag":"h2","lines":"503,505"}},{"content":"3.4&#x3001;Domain&#x7684;&#x7f16;&#x5199;","children":[{"content":"<pre data-lines=\"523,524\"><code>&#x9996;&#x5148;&#x6211;&#x4eec;&#x9700;&#x8981;&#x5bfc;&#x5165;`spring-cloud-starter-oauth2`&#x7684;&#x4f9d;&#x8d56;&#x6587;&#x4ef6;&#xff0c;&#x8bf7;&#x628a;&#x4ee5;&#x4e0b;&#x4f9d;&#x8d56;&#x62f7;&#x8d1d;&#x5230;`oauth2-server-auth1001`&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"523,524"}},{"content":"<pre data-lines=\"525,532\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-cloud-starter-oauth2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"525,532"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/79a93c82a6768681954f5c4fe498c682.png\" alt>","children":[],"payload":{"tag":"img","lines":"533,534"}},{"content":"<pre data-lines=\"535,538\"><code>&#x6211;&#x4eec;&#x9700;&#x8981;&#x7f16;&#x5199;&#x5b9e;&#x4f53;&#x6765;&#x4e0e;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x5b57;&#x6bb5;&#x8fdb;&#x884c;&#x5bf9;&#x5e94;&#xff0c;&#x4f46;&#x662f;&#x4e3a;&#x4e86;&#x540e;&#x8fb9;&#x7684;&#x6388;&#x6743;&#x66f4;&#x52a0;&#x65b9;&#x4fbf;&#xff0c;&#x6211;&#x4eec;&#x5206;&#x522b;&#x7ee7;&#x627f;`Spring Security`&#x7279;&#x6709;&#x7684;&#x7c7b;&#xff0c;&#x5728;&#x4ed6;&#x4eec;&#x7684;&#x57fa;&#x7840;&#x4e0a;&#x8fdb;&#x884c;&#x62d3;&#x5c55;&#x3002;\n\ncom.caochenlei.domain.SysMenu\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"535,538"}},{"content":"<pre data-lines=\"539,561\"><code class=\"language-java\"><span class=\"hljs-meta\">@Data</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SysMenu</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">GrantedAuthority</span> {\n    <span class=\"hljs-keyword\">private</span> Integer id;\n    <span class=\"hljs-keyword\">private</span> String name;\n    <span class=\"hljs-keyword\">private</span> String code;\n    <span class=\"hljs-keyword\">private</span> Integer type;\n    <span class=\"hljs-keyword\">private</span> String icon;\n    <span class=\"hljs-keyword\">private</span> String url;\n    <span class=\"hljs-keyword\">private</span> Integer level;\n    <span class=\"hljs-keyword\">private</span> String path;\n    <span class=\"hljs-keyword\">private</span> Integer sort;\n    <span class=\"hljs-keyword\">private</span> Integer status;\n    <span class=\"hljs-keyword\">private</span> Integer parent_id;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getAuthority</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> code;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"539,561"}},{"content":"<pre data-lines=\"562,563\"><code>com.caochenlei.domain.SysRole\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"562,563"}},{"content":"<pre data-lines=\"564,573\"><code class=\"language-java\"><span class=\"hljs-meta\">@Data</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SysRole</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Serializable</span> {\n    <span class=\"hljs-keyword\">private</span> Integer id;\n    <span class=\"hljs-keyword\">private</span> String name;\n    <span class=\"hljs-keyword\">private</span> List&lt;SysMenu&gt; sysMenus;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,573"}},{"content":"<pre data-lines=\"574,575\"><code>com.caochenlei.domain.SysUser\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"574,575"}},{"content":"<pre data-lines=\"576,626\"><code class=\"language-java\"><span class=\"hljs-meta\">@Data</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SysUser</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">UserDetails</span> {\n    <span class=\"hljs-keyword\">private</span> Integer id;\n    <span class=\"hljs-keyword\">private</span> String username;\n    <span class=\"hljs-keyword\">private</span> String password;\n    <span class=\"hljs-keyword\">private</span> String avatar;\n    <span class=\"hljs-keyword\">private</span> String mobile;\n    <span class=\"hljs-keyword\">private</span> String email;\n    <span class=\"hljs-keyword\">private</span> Integer status;\n    <span class=\"hljs-keyword\">private</span> List&lt;SysRole&gt; sysRoles;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> Collection&lt;? <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">GrantedAuthority</span>&gt; getAuthorities() {\n        List&lt;SysMenu&gt; authorities = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();\n\n        <span class=\"hljs-keyword\">for</span> (SysRole sysRole : sysRoles) {\n            List&lt;SysMenu&gt; sysMenus = sysRole.getSysMenus();\n            authorities.addAll(sysMenus);\n        }\n\n        <span class=\"hljs-keyword\">return</span> authorities;\n    }\n\n    \n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isAccountNonExpired</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> status != <span class=\"hljs-number\">1</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isAccountNonLocked</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> status != <span class=\"hljs-number\">2</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isEnabled</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> status != <span class=\"hljs-number\">3</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-title function_\">isCredentialsNonExpired</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> status != <span class=\"hljs-number\">4</span>;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"576,626"}}],"payload":{"tag":"h2","lines":"520,522"}},{"content":"3.5&#x3001;Mapper&#x7684;&#x7f16;&#x5199;","children":[{"content":"<pre data-lines=\"630,631\"><code>com.caochenlei.mapper.SysMenuMapper\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"630,631"}},{"content":"<pre data-lines=\"632,658\"><code class=\"language-java\"><span class=\"hljs-meta\">@Mapper</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">SysMenuMapper</span> {\n    \n    <span class=\"hljs-meta\">@Select(&quot;select * from `sys_menu` where id in (&quot; +\n            &quot;  select mid from `sys_role_menu` where rid = #{rid}&quot; +\n            &quot;)&quot;)</span>\n    <span class=\"hljs-meta\">@Results({\n            \n            @Result(property = &quot;id&quot;, column = &quot;id&quot;, id = true),\n            \n            @Result(property = &quot;name&quot;, column = &quot;name&quot;),\n            @Result(property = &quot;code&quot;, column = &quot;code&quot;),\n            @Result(property = &quot;type&quot;, column = &quot;type&quot;),\n            @Result(property = &quot;icon&quot;, column = &quot;icon&quot;),\n            @Result(property = &quot;url&quot;, column = &quot;url&quot;),\n            @Result(property = &quot;level&quot;, column = &quot;level&quot;),\n            @Result(property = &quot;path&quot;, column = &quot;path&quot;),\n            @Result(property = &quot;sort&quot;, column = &quot;sort&quot;),\n            @Result(property = &quot;status&quot;, column = &quot;status&quot;),\n            @Result(property = &quot;parent_id&quot;, column = &quot;parent_id&quot;)\n    })</span>\n    List&lt;SysMenu&gt; <span class=\"hljs-title function_\">findByRid</span><span class=\"hljs-params\">(Integer rid)</span>;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"632,658"}},{"content":"<pre data-lines=\"659,660\"><code>com.caochenlei.mapper.SysRoleMapper\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"659,660"}},{"content":"<pre data-lines=\"661,683\"><code class=\"language-java\"><span class=\"hljs-meta\">@Mapper</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">SysRoleMapper</span> {\n    \n    <span class=\"hljs-meta\">@Select(&quot;select * from `sys_role` where id in (&quot; +\n            &quot;  select rid from `sys_user_role` where uid = #{uid}&quot; +\n            &quot;)&quot;)</span>\n    <span class=\"hljs-meta\">@Results({\n            \n            @Result(property = &quot;id&quot;, column = &quot;id&quot;, id = true),\n            \n            @Result(property = &quot;name&quot;, column = &quot;name&quot;),\n            \n            @Result(property = &quot;sysMenus&quot;, column = &quot;id&quot;,\n                    javaType = List.class,\n                    many = @Many(select = &quot;com.caochenlei.mapper.SysMenuMapper.findByRid&quot;)\n            )\n    })</span>\n    List&lt;SysRole&gt; <span class=\"hljs-title function_\">findByUid</span><span class=\"hljs-params\">(Integer uid)</span>;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"661,683"}},{"content":"<pre data-lines=\"684,685\"><code>com.caochenlei.mapper.SysUserMapper\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"684,685"}},{"content":"<pre data-lines=\"686,711\"><code class=\"language-java\"><span class=\"hljs-meta\">@Mapper</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">SysUserMapper</span> {\n    \n    <span class=\"hljs-meta\">@Select(&quot;select * from `sys_user` where `username` = #{username}&quot;)</span>\n    <span class=\"hljs-meta\">@Results({\n            \n            @Result(property = &quot;id&quot;, column = &quot;id&quot;, id = true),\n            \n            @Result(property = &quot;username&quot;, column = &quot;username&quot;),\n            @Result(property = &quot;password&quot;, column = &quot;password&quot;),\n            @Result(property = &quot;avatar&quot;, column = &quot;avatar&quot;),\n            @Result(property = &quot;mobile&quot;, column = &quot;mobile&quot;),\n            @Result(property = &quot;email&quot;, column = &quot;email&quot;),\n            @Result(property = &quot;status&quot;, column = &quot;status&quot;),\n            \n            @Result(property = &quot;sysRoles&quot;, column = &quot;id&quot;,\n                    javaType = List.class,\n                    many = @Many(select = &quot;com.caochenlei.mapper.SysRoleMapper.findByUid&quot;)\n            )\n    })</span>\n    SysUser <span class=\"hljs-title function_\">findByUsername</span><span class=\"hljs-params\">(String username)</span>;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"686,711"}}],"payload":{"tag":"h2","lines":"627,629"}},{"content":"3.6&#x3001;Service &#x7684;&#x7f16;&#x5199;","children":[{"content":"<pre data-lines=\"715,716\"><code>com.caochenlei.service.SysUserDetailsService\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"715,716"}},{"content":"<pre data-lines=\"717,723\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">SysUserDetailsService</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">UserDetailsService</span> {\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"717,723"}},{"content":"<pre data-lines=\"724,725\"><code>com.caochenlei.service.impl.SysUserDetailsServiceImpl\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"724,725"}},{"content":"<pre data-lines=\"726,746\"><code class=\"language-java\"><span class=\"hljs-meta\">@Service</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SysUserDetailsServiceImpl</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">SysUserDetailsService</span> {\n    \n    <span class=\"hljs-meta\">@Autowired(required = false)</span>\n    <span class=\"hljs-keyword\">private</span> SysUserMapper sysUserMapper;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> UserDetails <span class=\"hljs-title function_\">loadUserByUsername</span><span class=\"hljs-params\">(String username)</span> <span class=\"hljs-keyword\">throws</span> UsernameNotFoundException {\n        \n        <span class=\"hljs-type\">SysUser</span> <span class=\"hljs-variable\">sysUser</span> <span class=\"hljs-operator\">=</span> sysUserMapper.findByUsername(username);\n        \n        <span class=\"hljs-keyword\">if</span> (sysUser == <span class=\"hljs-literal\">null</span>) {\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">UsernameNotFoundException</span>(<span class=\"hljs-string\">&quot;user not exist.&quot;</span>);\n        }\n        <span class=\"hljs-keyword\">return</span> sysUser;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"726,746"}}],"payload":{"tag":"h2","lines":"712,714"}},{"content":"3.7&#x3001;&#x6838;&#x5fc3;&#x7684;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"750,751\"><code>com.caochenlei.config.WebSecurityConfig\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"750,751"}},{"content":"<pre data-lines=\"752,789\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableWebSecurity</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">WebSecurityConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">WebSecurityConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> SysUserDetailsService userDetailsService;\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> BCryptPasswordEncoder <span class=\"hljs-title function_\">passwordEncoder</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BCryptPasswordEncoder</span>();\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> AuthenticationProvider <span class=\"hljs-title function_\">daoAuthenticationProvider</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">DaoAuthenticationProvider</span> <span class=\"hljs-variable\">daoAuthenticationProvider</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DaoAuthenticationProvider</span>();\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\n        daoAuthenticationProvider.setHideUserNotFoundExceptions(<span class=\"hljs-literal\">false</span>);\n        <span class=\"hljs-keyword\">return</span> daoAuthenticationProvider;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthenticationManagerBuilder auth)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        auth.authenticationProvider(daoAuthenticationProvider());\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(HttpSecurity http)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        http.authorizeRequests()\n                .anyRequest().authenticated()\n                .and().formLogin().permitAll()\n                .and().csrf().disable();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"752,789"}}],"payload":{"tag":"h2","lines":"747,749"}},{"content":"3.8&#x3001;&#x6539;&#x9020;&#x63a7;&#x5236;&#x5c42;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"793,794\"><code>com.caochenlei.controller.OrderController\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"793,794"}},{"content":"<pre data-lines=\"795,844\"><code class=\"language-java\"><span class=\"hljs-meta\">@RestController</span>\n<span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr&apos;)&quot;)</span>\n<span class=\"hljs-meta\">@RequestMapping(&quot;/order&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OrderController</span> {\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findAll&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findAll</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order findAll ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findPage&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findPage</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order findPage ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findById&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findById</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order findById ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:add&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/add&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order add ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:delete&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/delete&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order delete ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:update&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/update&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">update</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order update ...&quot;</span>;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"795,844"}},{"content":"<pre data-lines=\"845,846\"><code>com.caochenlei.controller.GoodstController\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"845,846"}},{"content":"<pre data-lines=\"847,896\"><code class=\"language-java\"><span class=\"hljs-meta\">@RestController</span>\n<span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr&apos;)&quot;)</span>\n<span class=\"hljs-meta\">@RequestMapping(&quot;/goods&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GoodstController</span> {\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findAll&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findAll</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;goods findAll ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findPage&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findPage</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;goods findPage ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findById&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findById</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;goods findById ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr:add&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/add&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;goods add ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr:delete&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/delete&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;goods delete ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;goodsMgr:update&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/update&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">update</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;goods update ...&quot;</span>;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"847,896"}}],"payload":{"tag":"h2","lines":"790,792"}},{"content":"3.9&#x3001;&#x542f;&#x52a8;&#x9879;&#x76ee;&#x5e76;&#x6d4b;&#x8bd5;","children":[{"content":"<pre data-lines=\"900,905\"><code>&#xff08;1&#xff09;&#x9996;&#x5148;&#x542f;&#x52a8;&#x9879;&#x76ee;&#xff1a;oauth2-server-eureka1000\n\n&#xff08;2&#xff09;&#x7136;&#x540e;&#x542f;&#x52a8;&#x9879;&#x76ee;&#xff1a;oauth2-server-auth1001\n\n&#xff08;3&#xff09;&#x67e5;&#x770b;&#x6ce8;&#x518c;&#x4e2d;&#x5fc3;&#xff1a;http://localhost:1000/\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"900,905"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/52cc1d14e631b54bfc6170c2d906ad09.png\" alt>","children":[],"payload":{"tag":"img","lines":"906,907"}},{"content":"<pre data-lines=\"908,909\"><code>&#xff08;4&#xff09;&#x767b;&#x5f55;&#x7528;&#x6237;&#x674e;&#x56db;&#xff1a;http://localhost:1001/login&#xff0c;&#x8d26;&#x6237;&#xff1a;lisi&#xff0c;&#x5bc6;&#x7801;&#xff1a;123456&#xff0c;&#x767b;&#x5f55;&#x6210;&#x529f;&#x4f1a;&#x62a5;&#x9519;&#x4e0d;&#x7528;&#x7ba1;&#xff0c;&#x6d4b;&#x8bd5;&#x5730;&#x5740;&#xff1a;http://localhost:1001/order/findAll\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"908,909"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ba6859789afc69e04eb17ff157720734.png\" alt>","children":[],"payload":{"tag":"img","lines":"910,911"}},{"content":"<pre data-lines=\"912,913\"><code>&#xff08;5&#xff09;&#x767b;&#x5f55;&#x7528;&#x6237;&#x738b;&#x4e94;&#xff1a;http://localhost:1001/login&#xff0c;&#x8d26;&#x6237;&#xff1a;wangwu&#xff0c;&#x5bc6;&#x7801;&#xff1a;123456&#xff0c;&#x767b;&#x5f55;&#x6210;&#x529f;&#x4f1a;&#x62a5;&#x9519;&#x4e0d;&#x7528;&#x7ba1;&#xff0c;&#x6d4b;&#x8bd5;&#x5730;&#x5740;&#xff1a;http://localhost:1001/order/findAll\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"912,913"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/47e24eb08646d6626e9656830a693fc1.png\" alt>","children":[],"payload":{"tag":"img","lines":"914,915"}},{"content":"<pre data-lines=\"916,920\"><code>&#xff08;6&#xff09;&#x6211;&#x4eec;&#x628a;&#x4e4b;&#x524d;&#x6d4b;&#x8bd5;&#x7684;&#x7ed3;&#x679c;&#x603b;&#x7ed3;&#x4e00;&#x4e0b;\n\n1.  &#x767b;&#x5f55;&#x6210;&#x529f;&#x4f1a;&#x62a5;&#x9519;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#x767b;&#x5f55;&#x6210;&#x529f;&#x540e;&#xff0c;&#x9ed8;&#x8ba4;&#x4f1a;&#x8df3;&#x8f6c;&#x5230;&#x9996;&#x9875;&#xff0c;&#x53ef;&#x662f;&#x6211;&#x4eec;&#x6839;&#x672c;&#x6ca1;&#x6709;&#x9996;&#x9875;&#xff0c;&#x6240;&#x4ee5;&#x4f1a;&#x62a5;&#x9519;&#xff0c;&#x8fd9;&#x4e0d;&#x662f;&#x6211;&#x4eec;&#x5b66;&#x4e60;&#x7684;&#x91cd;&#x70b9;&#xff0c;&#x6211;&#x4eec;&#x6682;&#x65f6;&#x5ffd;&#x7565;&#x5373;&#x53ef;&#x3002;\n2.  &#x540c;&#x4e00;&#x4e2a;&#x5730;&#x5740;&#xff0c;&#x674e;&#x56db;&#x80fd;&#x8bbf;&#x95ee;&#xff0c;&#x4f46;&#x662f;&#x738b;&#x4e94;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#x674e;&#x56db;&#x6709;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x7684;&#x6240;&#x6709;&#x83dc;&#x5355;&#x6743;&#x9650;&#xff0c;&#x800c;&#x738b;&#x4e94;&#x53ea;&#x6709;&#x5546;&#x54c1;&#x7ba1;&#x7406;&#x7684;&#x6240;&#x6709;&#x83dc;&#x5355;&#x6743;&#x9650;&#xff0c;&#x8981;&#x60f3;&#x5b9e;&#x73b0;&#x524d;&#x7aef;&#x6309;&#x94ae;&#x7ea7;&#x522b;&#x7684;&#x7684;&#x63a7;&#x5236;&#xff0c;&#x524d;&#x7aef;&#x7684;&#x6309;&#x94ae;&#x4e00;&#x822c;&#x662f;&#x5bf9;&#x5e94;&#x540e;&#x7aef;&#x7684;&#x4e00;&#x4e2a;&#x529f;&#x80fd;&#xff0c;&#x524d;&#x7aef;&#x7684;&#x9875;&#x9762;&#x4e00;&#x822c;&#x662f;&#x5bf9;&#x5e94;&#x540e;&#x7aef;&#x7684;&#x4e00;&#x4e2a;&#x7c7b;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x6309;&#x94ae;&#x7ea7;&#x522b;&#x7684;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x7684;&#x8bbe;&#x8ba1;&#x4e0e;&#x5b9e;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"916,920"}}],"payload":{"tag":"h2","lines":"897,899"}},{"content":"4.1&#x3001;&#x642d;&#x5efa;&#x8ba4;&#x8bc1;&#x4e2d;&#x5fc3;","children":[{"content":"4.1.1&#x3001;&#x6ce8;&#x5165;&#x8ba4;&#x8bc1;&#x7ba1;&#x7406;&#x5668;","children":[{"content":"<pre data-lines=\"926,927\"><code>&#x6211;&#x4eec;&#x7684;OAuth2.0&#x7684;&#x5b9e;&#x73b0;&#x662f;&#x57fa;&#x4e8e;`Spring Security`&#x6846;&#x67b6;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x6211;&#x4eec;&#x5fc5;&#x987b;&#x8981;&#x7528;&#x5230;`Spring Security`&#x7684;&#x8ba4;&#x8bc1;&#x7ba1;&#x7406;&#x5668;`AuthenticationManager`&#xff0c;&#x5177;&#x4f53;&#x505a;&#x6cd5;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"926,927"}},{"content":"<pre data-lines=\"928,942\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableWebSecurity</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">WebSecurityConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">WebSecurityConfigurerAdapter</span> {\n    ...\n    ...\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> AuthenticationManager <span class=\"hljs-title function_\">authenticationManager</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">super</span>.authenticationManager();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"928,942"}}],"payload":{"tag":"h3","lines":"924,925"}},{"content":"4.1.2&#x3001;&#x521b;&#x5efa;&#x5e76;&#x542f;&#x7528;&#x914d;&#x7f6e;","children":[{"content":"<pre data-lines=\"945,946\"><code>com.caochenlei.config.AuthorizationServerConfig\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"945,946"}},{"content":"<pre data-lines=\"947,955\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"947,955"}}],"payload":{"tag":"h3","lines":"943,944"}},{"content":"4.1.3&#x3001;&#x91cd;&#x5199;&#x7236;&#x7c7b;&#x7684;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"958,959\"><code>&#x5728;&#x5f53;&#x524d;&#x7c7b;`AuthorizationServerConfig`&#x6309;&#x4e0b;&#x91cd;&#x5199;&#x7236;&#x7c7b;&#x5feb;&#x6377;&#x952e;`CTRL+O`&#xff0c;&#x5f39;&#x51fa;&#x5bf9;&#x8bdd;&#x6846;&#xff0c;&#x9009;&#x4e2d;&#x8be5;&#x7c7b;&#x7684;&#x76f4;&#x63a5;&#x7236;&#x7c7b;&#x9664;&#x6784;&#x9020;&#x65b9;&#x6cd5;&#x4e4b;&#x5916;&#x7684;&#x4e09;&#x4e2a;&#x4e3b;&#x8981;&#x65b9;&#x6cd5;&#xff0c;&#x7136;&#x540e;&#x91cd;&#x5199;&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"958,959"}},{"content":"<pre data-lines=\"960,981\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ClientDetailsServiceConfigurer clients)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-built_in\">super</span>.configure(clients);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-built_in\">super</span>.configure(endpoints);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerSecurityConfigurer security)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-built_in\">super</span>.configure(security);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"960,981"}},{"content":"<pre data-lines=\"982,987\"><code>&#x4ee5;&#x4e0b;&#x662f;&#x8fd9;&#x4e09;&#x4e2a;&#x65b9;&#x6cd5;&#x7684;&#x4ecb;&#x7ecd;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x7684;&#x6240;&#x6709;&#x914d;&#x7f6e;&#x90fd;&#x662f;&#x56f4;&#x7ed5;&#x8fd9;&#x4e09;&#x4e2a;&#x65b9;&#x6cd5;&#x8fdb;&#x884c;&#x5c55;&#x5f00;&#x7684;&#xff0c;&#x5343;&#x4e07;&#x4e0d;&#x8981;&#x6b7b;&#x8bb0;&#x786c;&#x80cc;&#xff0c;&#x8981;&#x77e5;&#x9053;&#x4e3a;&#x4ec0;&#x4e48;&#x7528;&#x4ed6;&#x4ee5;&#x53ca;&#x600e;&#x4e48;&#x7528;&#x4ed6;&#x3002;\n\n*   ClientDetailsServiceConfigurer clients&#xff1a;&#x7528;&#x6765;&#x914d;&#x7f6e;&#x7b2c;&#x4e09;&#x65b9;&#x5ba2;&#x6237;&#x7aef;&#x63a5;&#x5165;&#x672c;&#x7cfb;&#x7edf;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x4f8b;&#x5982;&#x5ba2;&#x6237;&#x7aef;id&#x3001;&#x5ba2;&#x6237;&#x7aef;secret&#x3001;&#x6388;&#x6743;&#x65b9;&#x5f0f;&#x7b49;&#x7b49;&#x3002;\n*   AuthorizationServerEndpointsConfigurer endpoints&#xff1a;&#x7528;&#x6765;&#x914d;&#x7f6e;&#x4ee4;&#x724c;&#x7684;&#x8bbf;&#x95ee;&#x7aef;&#x70b9;&#x548c;&#x4ee4;&#x724c;&#x670d;&#x52a1;&#x4fe1;&#x606f;&#xff0c;&#x7b2c;&#x4e00;&#x6b65;&#x6ce8;&#x5165;&#x7684;&#x8ba4;&#x8bc1;&#x7ba1;&#x7406;&#x5668;&#x5c31;&#x662f;&#x7528;&#x5728;&#x8fd9;&#x91cc;&#x3002;\n*   AuthorizationServerSecurityConfigurer security&#xff1a;&#x7528;&#x6765;&#x914d;&#x7f6e;&#x4ee4;&#x724c;&#x7aef;&#x70b9;&#x7684;&#x5b89;&#x5168;&#x7ea6;&#x675f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"982,987"}}],"payload":{"tag":"h3","lines":"956,957"}},{"content":"4.1.4&#x3001;&#x914d;&#x7f6e;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x8be6;&#x60c5;","children":[{"content":"<pre data-lines=\"990,1018\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> BCryptPasswordEncoder passwordEncoder;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ClientDetailsServiceConfigurer clients)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        clients.inMemory()\n                .withClient(<span class=\"hljs-string\">&quot;myclient1&quot;</span>)\n                .secret(passwordEncoder.encode(<span class=\"hljs-string\">&quot;123456&quot;</span>))\n                .resourceIds(<span class=\"hljs-string\">&quot;RESOURCE-ORDER&quot;</span>, <span class=\"hljs-string\">&quot;RESOURCE-GOODS&quot;</span>)\n                .authorizedGrantTypes(\n                        <span class=\"hljs-string\">&quot;authorization_code&quot;</span>,\n                        <span class=\"hljs-string\">&quot;implicit&quot;</span>,\n                        <span class=\"hljs-string\">&quot;password&quot;</span>,\n                        <span class=\"hljs-string\">&quot;client_credentials&quot;</span>,\n                        <span class=\"hljs-string\">&quot;refresh_token&quot;</span>)\n                .scopes(<span class=\"hljs-string\">&quot;read&quot;</span>, <span class=\"hljs-string\">&quot;write&quot;</span>)\n                .autoApprove(<span class=\"hljs-literal\">false</span>)\n                .redirectUris(<span class=\"hljs-string\">&quot;http://www.baidu.com&quot;</span>);\n    }\n    ...\n    ...\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"990,1018"}}],"payload":{"tag":"h3","lines":"988,989"}},{"content":"4.1.5&#x3001;&#x914d;&#x7f6e;&#x4ee4;&#x724c;&#x8bbf;&#x95ee;&#x7aef;&#x70b9;","children":[{"content":"<pre data-lines=\"1021,1072\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    ...\n    ...\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AuthenticationManager authenticationManager;\n\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> ClientDetailsService clientDetailsService;\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TokenStore <span class=\"hljs-title function_\">tokenStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InMemoryTokenStore</span>();\n    }\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> AuthorizationCodeServices <span class=\"hljs-title function_\">authorizationCodeServices</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InMemoryAuthorizationCodeServices</span>();\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> AuthorizationServerTokenServices <span class=\"hljs-title function_\">tokenService</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">DefaultTokenServices</span> <span class=\"hljs-variable\">service</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DefaultTokenServices</span>();\n        service.setClientDetailsService(clientDetailsService);\n        service.setTokenStore(tokenStore());\n        service.setSupportRefreshToken(<span class=\"hljs-literal\">true</span>);\n        service.setReuseRefreshToken(<span class=\"hljs-literal\">false</span>);\n        service.setAccessTokenValiditySeconds(<span class=\"hljs-number\">3600</span>);\n        service.setRefreshTokenValiditySeconds(<span class=\"hljs-number\">7200</span>);\n        <span class=\"hljs-keyword\">return</span> service;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        endpoints\n                .authenticationManager(authenticationManager)\n                .tokenServices(tokenService())\n                .authorizationCodeServices(authorizationCodeServices())\n                .allowedTokenEndpointRequestMethods(HttpMethod.POST);\n    }\n    ...\n    ...\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1021,1072"}}],"payload":{"tag":"h3","lines":"1019,1020"}},{"content":"4.1.6&#x3001;&#x914d;&#x7f6e;&#x4ee4;&#x724c;&#x7aef;&#x70b9;&#x5b89;&#x5168;","children":[{"content":"<pre data-lines=\"1075,1091\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    ...\n    ...\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerSecurityConfigurer security)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        security\n                .tokenKeyAccess(<span class=\"hljs-string\">&quot;permitAll()&quot;</span>)\n                .checkTokenAccess(<span class=\"hljs-string\">&quot;permitAll()&quot;</span>)\n                .allowFormAuthenticationForClients();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1075,1091"}}],"payload":{"tag":"h3","lines":"1073,1074"}},{"content":"4.1.7&#x3001;&#x542f;&#x52a8;&#x8ba4;&#x8bc1;&#x7684;&#x670d;&#x52a1;&#x5668;","children":[{"content":"<pre data-lines=\"1094,1095\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x9879;&#x76ee;&#xff1a;oauth2-server-auth1001\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1094,1095"}}],"payload":{"tag":"h3","lines":"1092,1093"}},{"content":"4.1.8&#x3001;&#x6d4b;&#x8bd5;&#x56db;&#x79cd;&#x6a21;&#x5f0f;&#x4f7f;&#x7528;","children":[{"content":"4.1.8.1&#x3001;&#x6d4b;&#x8bd5;&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1100,1103\"><code>&#x9996;&#x5148;&#x8981;&#x83b7;&#x53d6;&#x6388;&#x6743;&#x7801;&#xff0c;&#x6b63;&#x5e38;&#x6765;&#x8bf4;&#xff0c;&#x4e00;&#x65e6;&#x83b7;&#x53d6;&#x5230;&#x6388;&#x6743;&#x7801;&#x5c31;&#x5e94;&#x8be5;&#x8981;&#x7533;&#x8bf7;token&#x4ee4;&#x724c;&#xff0c;&#x4f46;&#x662f;&#x4e3a;&#x4e86;&#x8ba9;&#x5927;&#x5bb6;&#x66f4;&#x52a0;&#x6e05;&#x695a;&#x8fd9;&#x4e2a;&#x6d41;&#x7a0b;&#xff0c;&#x7533;&#x8bf7;&#x6388;&#x6743;&#x7801;&#x548c;&#x7533;&#x8bf7;token&#x4ee4;&#x724c;&#x5206;&#x5f00;&#x6765;&#x505a;&#x3002;\n\n&#x9996;&#x5148;&#x6253;&#x5f00;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x6211;&#x4eec;&#x8981;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x5730;&#x5740;&#x5e76;&#x643a;&#x5e26;&#x6709;&#x6548;&#x53c2;&#x6570;&#x6765;&#x83b7;&#x53d6;&#x6388;&#x6743;&#x7801;&#xff0c;&#x7b2c;&#x4e00;&#x6b21;&#x83b7;&#x53d6;&#x63d0;&#x793a;&#x4f60;&#x9700;&#x8981;&#x767b;&#x5f55;&#xff0c;&#x767b;&#x5f55;&#x4ee5;&#x540e;&#x5c31;&#x4f1a;&#x63d0;&#x793a;&#x4f60;&#x662f;&#x5426;&#x6388;&#x6743;&#x5e94;&#x7528;&#x76f8;&#x5e94;&#x7684;&#x8bbf;&#x95ee;&#x6743;&#x9650;&#xff0c;&#x5982;&#x56fe;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1100,1103"}},{"content":"<pre data-lines=\"1104,1108\"><code class=\"language-bash\">http://localhost:1001/oauth/authorize?client_id=myclient1&amp;response_type=code&amp;scope=<span class=\"hljs-built_in\">read</span>%20write&amp;&amp;redirect_uri=http://www.baidu.com\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1104,1108"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/814e45b44a7314fb58c02d3d410f219b.png\" alt>","children":[],"payload":{"tag":"img","lines":"1109,1110"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0a679d2dbac7444f13bb5b438ccac304.png\" alt>","children":[],"payload":{"tag":"img","lines":"1111,1112"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/44d59c3fee5b1d079540cfa163b52f8a.png\" alt>","children":[],"payload":{"tag":"img","lines":"1113,1114"}},{"content":"<pre data-lines=\"1115,1132\"><code>&#x7b2c;&#x4e8c;&#x6b65;&#x6211;&#x4eec;&#x9700;&#x8981;&#x4f7f;&#x7528;`postman`&#x6765;&#x53d1;&#x9001;`post`&#x8bf7;&#x6c42;&#xff0c;&#x4f7f;&#x7528;&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;&#x6765;&#x7533;&#x8bf7;token&#x4ee4;&#x724c;&#xff0c;&#x5177;&#x4f53;&#x53c2;&#x6570;&#x5982;&#x4e0b;&#xff1a;\n\n&#x8bf7;&#x6c42;&#x5730;&#x5740;&#xff1a;`http://localhost:1001/oauth/token`\n\n&#x8bf7;&#x6c42;&#x7c7b;&#x578b;&#xff1a;`POST`\n\n&#x8bf7;&#x6c42;&#x53c2;&#x6570;&#xff1a;\n\n*   client\\_id&#xff1a;&#x5ba2;&#x6237;&#x7aef;id\n*   client\\_secret&#xff1a;&#x5ba2;&#x6237;&#x7aef;&#x5bc6;&#x7801;\n*   grant\\_type&#xff1a;&#x6388;&#x6743;&#x7c7b;&#x578b;\n*   redirect\\_uri&#xff1a;&#x56de;&#x8c03;&#x5730;&#x5740;\n*   code&#xff1a;&#x6388;&#x6743;&#x7801;\n*   username&#xff1a;&#x7cfb;&#x7edf;&#x5185;&#x67d0;&#x4e2a;&#x7528;&#x6237;&#x540d;&#x79f0;\n*   password&#xff1a;&#x7cfb;&#x7edf;&#x5185;&#x67d0;&#x4e2a;&#x7528;&#x6237;&#x5bc6;&#x7801;\n\n&#x6f14;&#x793a;&#x6548;&#x679c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1115,1132"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/cf03b781f3146c9b97de296ccd55c627.png\" alt>","children":[],"payload":{"tag":"img","lines":"1133,1134"}}],"payload":{"tag":"h4","lines":"1098,1099"}},{"content":"4.1.8.2&#x3001;&#x6d4b;&#x8bd5;&#x7b80;&#x5316;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1137,1138\"><code>&#x8bbf;&#x95ee;&#x5730;&#x5740;&#xff1a;http://localhost:1001/oauth/authorize?client\\_id=myclient1&amp;response\\_type=token&amp;scope=read%20write&amp;redirect\\_uri=http://www.baidu.com\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1137,1138"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/675041ce98fd7d1109071753352efa66.png\" alt>","children":[],"payload":{"tag":"img","lines":"1139,1140"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/3e17dadb2cacf27e70685d65575304e6.png\" alt>","children":[],"payload":{"tag":"img","lines":"1141,1142"}}],"payload":{"tag":"h4","lines":"1135,1136"}},{"content":"4.1.8.3&#x3001;&#x6d4b;&#x8bd5;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1145,1158\"><code>&#x8bf7;&#x6c42;&#x5730;&#x5740;&#xff1a;`http://localhost:1001/oauth/token`\n\n&#x8bf7;&#x6c42;&#x7c7b;&#x578b;&#xff1a;`POST`\n\n&#x8bf7;&#x6c42;&#x53c2;&#x6570;&#xff1a;\n\n*   client\\_id&#xff1a;&#x5ba2;&#x6237;&#x7aef;id\n*   client\\_secret&#xff1a;&#x5ba2;&#x6237;&#x7aef;&#x5bc6;&#x7801;\n*   grant\\_type&#xff1a;&#x6388;&#x6743;&#x7c7b;&#x578b;\n*   username&#xff1a;&#x7cfb;&#x7edf;&#x5185;&#x67d0;&#x4e2a;&#x7528;&#x6237;&#x540d;&#x79f0;\n*   password&#xff1a;&#x7cfb;&#x7edf;&#x5185;&#x67d0;&#x4e2a;&#x7528;&#x6237;&#x5bc6;&#x7801;\n\n&#x6f14;&#x793a;&#x6548;&#x679c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1145,1158"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/932c97f99954fcb98e94b2d61475846d.png\" alt>","children":[],"payload":{"tag":"img","lines":"1159,1160"}}],"payload":{"tag":"h4","lines":"1143,1144"}},{"content":"4.1.8.4&#x3001;&#x6d4b;&#x8bd5;&#x5ba2;&#x6237;&#x7aef;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1163,1174\"><code>&#x8bf7;&#x6c42;&#x5730;&#x5740;&#xff1a;`http://localhost:1001/oauth/token`\n\n&#x8bf7;&#x6c42;&#x7c7b;&#x578b;&#xff1a;`POST`\n\n&#x8bf7;&#x6c42;&#x53c2;&#x6570;&#xff1a;\n\n*   client\\_id&#xff1a;&#x5ba2;&#x6237;&#x7aef;id\n*   client\\_secret&#xff1a;&#x5ba2;&#x6237;&#x7aef;&#x5bc6;&#x7801;\n*   grant\\_type&#xff1a;&#x6388;&#x6743;&#x7c7b;&#x578b;\n\n&#x6f14;&#x793a;&#x6548;&#x679c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1163,1174"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b39fac861bb2f655d913428ad1dcfe9a.png\" alt>","children":[],"payload":{"tag":"img","lines":"1175,1176"}}],"payload":{"tag":"h4","lines":"1161,1162"}},{"content":"4.1.8.5&#x3001;&#x6d4b;&#x8bd5;&#x5237;&#x65b0;Token","children":[{"content":"<pre data-lines=\"1179,1193\"><code>&#x53ea;&#x6709;&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;&#x548c;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x4e2d;&#x542b;&#x6709;`refresh_token`&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x53ea;&#x6709;&#x8fd9;&#x4e24;&#x79cd;&#x6a21;&#x5f0f;&#x53ef;&#x4ee5;&#x8fdb;&#x884c;`token`&#x5237;&#x65b0;&#x3002;\n\n&#x8bf7;&#x6c42;&#x5730;&#x5740;&#xff1a;`http://localhost:1001/oauth/token`\n\n&#x8bf7;&#x6c42;&#x7c7b;&#x578b;&#xff1a;`POST`\n\n&#x8bf7;&#x6c42;&#x53c2;&#x6570;&#xff1a;\n\n*   client\\_id&#xff1a;&#x5ba2;&#x6237;&#x7aef;id\n*   client\\_secret&#xff1a;&#x5ba2;&#x6237;&#x7aef;&#x5bc6;&#x7801;\n*   grant\\_type&#xff1a;&#x6388;&#x6743;&#x7c7b;&#x578b;\n*   refresh\\_token&#xff1a;&#x5237;&#x65b0;&#x7684;token&#x503c;&#xff0c;&#x5bf9;&#x5e94;&#x6bcf;&#x6b21;&#x751f;&#x6210;&#x7684;`refresh_token`\n\n&#x6f14;&#x793a;&#x6548;&#x679c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1179,1193"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/89b31dfa97036ec894e3a03d866bdd1d.png\" alt>","children":[],"payload":{"tag":"img","lines":"1194,1195"}}],"payload":{"tag":"h4","lines":"1177,1178"}}],"payload":{"tag":"h3","lines":"1096,1097"}}],"payload":{"tag":"h2","lines":"921,923"}},{"content":"4.2&#x3001;&#x642d;&#x5efa;&#x8ba2;&#x5355;&#x8d44;&#x6e90;","children":[{"content":"4.2.1&#x3001;&#x5bfc;&#x5165;&#x76f8;&#x5173;&#x7684;&#x4f9d;&#x8d56;","children":[{"content":"<pre data-lines=\"1201,1208\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-cloud-starter-oauth2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1201,1208"}}],"payload":{"tag":"h3","lines":"1199,1200"}},{"content":"4.2.2&#x3001;&#x521b;&#x5efa;&#x5e76;&#x542f;&#x7528;&#x914d;&#x7f6e;","children":[{"content":"<pre data-lines=\"1211,1212\"><code>com.caochenlei.config.ResourceServerConfig\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1211,1212"}},{"content":"<pre data-lines=\"1213,1222\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    \n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1213,1222"}}],"payload":{"tag":"h3","lines":"1209,1210"}},{"content":"4.2.3&#x3001;&#x91cd;&#x5199;&#x7236;&#x7c7b;&#x7684;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"1225,1226\"><code>&#x5728;&#x5f53;&#x524d;&#x7c7b;`ResourceServerConfig`&#x6309;&#x4e0b;&#x91cd;&#x5199;&#x7236;&#x7c7b;&#x5feb;&#x6377;&#x952e;`CTRL+O`&#xff0c;&#x5f39;&#x51fa;&#x5bf9;&#x8bdd;&#x6846;&#xff0c;&#x9009;&#x4e2d;&#x8be5;&#x7c7b;&#x7684;&#x76f4;&#x63a5;&#x7236;&#x7c7b;&#x9664;&#x6784;&#x9020;&#x65b9;&#x6cd5;&#x4e4b;&#x5916;&#x7684;&#x4e24;&#x4e2a;&#x4e3b;&#x8981;&#x65b9;&#x6cd5;&#xff0c;&#x7136;&#x540e;&#x91cd;&#x5199;&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1225,1226"}},{"content":"<pre data-lines=\"1227,1244\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ResourceServerSecurityConfigurer resources)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-built_in\">super</span>.configure(resources);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(HttpSecurity http)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-built_in\">super</span>.configure(http);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1227,1244"}},{"content":"<pre data-lines=\"1245,1249\"><code>&#x4ee5;&#x4e0b;&#x662f;&#x8fd9;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;&#x7684;&#x4ecb;&#x7ecd;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x7684;&#x6240;&#x6709;&#x914d;&#x7f6e;&#x90fd;&#x662f;&#x56f4;&#x7ed5;&#x8fd9;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;&#x8fdb;&#x884c;&#x5c55;&#x5f00;&#x7684;&#xff0c;&#x5343;&#x4e07;&#x4e0d;&#x8981;&#x6b7b;&#x8bb0;&#x786c;&#x80cc;&#xff0c;&#x8981;&#x77e5;&#x9053;&#x4e3a;&#x4ec0;&#x4e48;&#x7528;&#x4ed6;&#x4ee5;&#x53ca;&#x600e;&#x4e48;&#x7528;&#x4ed6;&#x3002;\n\n*   ResourceServerSecurityConfigurer resources&#xff1a;&#x4e13;&#x95e8;&#x7528;&#x4e8e;&#x914d;&#x7f6e;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x3002;\n*   HttpSecurity http&#xff1a;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x8ddf;`Spring Security`&#x7684;&#x914d;&#x7f6e;&#x4e00;&#x6837;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1245,1249"}}],"payload":{"tag":"h3","lines":"1223,1224"}},{"content":"4.2.4&#x3001;&#x914d;&#x7f6e;&#x8d44;&#x6e90;&#x7684;&#x4fe1;&#x606f;","children":[{"content":"<pre data-lines=\"1252,1284\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TokenStore <span class=\"hljs-title function_\">tokenStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InMemoryTokenStore</span>();\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> ResourceServerTokenServices <span class=\"hljs-title function_\">tokenService</span><span class=\"hljs-params\">()</span> {\n        \n        <span class=\"hljs-type\">RemoteTokenServices</span> <span class=\"hljs-variable\">service</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RemoteTokenServices</span>();\n        service.setCheckTokenEndpointUrl(<span class=\"hljs-string\">&quot;http://localhost:1001/oauth/check_token&quot;</span>);\n        service.setClientId(<span class=\"hljs-string\">&quot;myclient1&quot;</span>);\n        service.setClientSecret(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n        <span class=\"hljs-keyword\">return</span> service;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ResourceServerSecurityConfigurer resources)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        resources.resourceId(<span class=\"hljs-string\">&quot;RESOURCE-ORDER&quot;</span>)\n                .tokenStore(tokenStore())\n                .tokenServices(tokenService())\n                .stateless(<span class=\"hljs-literal\">true</span>);\n    }\n    ...\n    ...\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1252,1284"}}],"payload":{"tag":"h3","lines":"1250,1251"}},{"content":"4.2.5&#x3001;&#x914d;&#x7f6e;&#x8d44;&#x6e90;&#x7684;&#x6743;&#x9650;","children":[{"content":"<pre data-lines=\"1287,1313\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    ...\n    ...\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(HttpSecurity http)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        http.authorizeRequests()\n                \n                .antMatchers(HttpMethod.GET, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;read&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.POST, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.PATCH, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.PUT, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.DELETE, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                \n                .and().cors()\n                <span class=\"hljs-comment\">//&#x7981;&#x7528;csrf</span>\n                .and().csrf().disable()\n                <span class=\"hljs-comment\">//&#x7981;&#x7528;session</span>\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1287,1313"}}],"payload":{"tag":"h3","lines":"1285,1286"}},{"content":"4.2.6&#x3001;&#x62f7;&#x8d1d;&#x63a7;&#x5236;&#x5668;&#x4ee3;&#x7801;","children":[{"content":"<pre data-lines=\"1316,1317\"><code>&#x628a;`oauth2-server-auth1001`&#x7684;`OrderController`&#x62f7;&#x8d1d;&#x5230;`oauth2-resource-order1002`&#x7684;`controller`&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1316,1317"}}],"payload":{"tag":"h3","lines":"1314,1315"}},{"content":"4.2.7&#x3001;&#x542f;&#x52a8;&#x8ba2;&#x5355;&#x7684;&#x8d44;&#x6e90;","children":[{"content":"<pre data-lines=\"1320,1321\"><code>&#x542f;&#x52a8;&#x9879;&#x76ee;&#xff1a;oauth2-resource-order1002\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1320,1321"}}],"payload":{"tag":"h3","lines":"1318,1319"}},{"content":"4.2.8&#x3001;&#x6d4b;&#x8bd5;&#x6743;&#x9650;&#x7684;&#x63a7;&#x5236;","children":[{"content":"<pre data-lines=\"1324,1327\"><code>&#x9996;&#x5148;&#x6765;&#x8bf4;&#x4e0b;&#xff0c;&#x8fd9;&#x56db;&#x79cd;&#x6a21;&#x5f0f;&#x751f;&#x6210;&#x7684;token&#x90fd;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x8bbf;&#x95ee;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#xff0c;&#x8fd9;&#x91cc;&#x4ee5;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;&#x4e3a;&#x4f8b;&#x8fdb;&#x884c;&#x6f14;&#x793a;&#xff0c;&#x8bbf;&#x95ee;&#x4e00;&#x4e2a;&#x8d44;&#x6e90;&#x7684;&#x4e00;&#x4e2a;&#x63a7;&#x5236;&#x5668;&#x65b9;&#x6cd5;&#xff0c;&#x9996;&#x5148;&#x8981;&#x770b;&#x4f60;&#x6709;&#x6ca1;&#x6709;&#x5f53;&#x524d;&#x8fd9;&#x4e2a;&#x8d44;&#x6e90;&#x7684;&#x6743;&#x9650;&#x4e5f;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x914d;&#x7f6e;&#x7684;`scope`&#xff0c;&#x5982;&#x679c;&#x4f60;&#x6709;&#x5f53;&#x524d;&#x8d44;&#x6e90;&#x7684;&#x6743;&#x9650;&#xff0c;&#x6211;&#x4eec;&#x518d;&#x6765;&#x770b;&#x770b;&#x4f60;&#x767b;&#x5f55;&#x7684;&#x8d26;&#x6237;&#x5230;&#x5e95;&#x6709;&#x6ca1;&#x6709;&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x6743;&#x9650;&#xff0c;&#x8fd9;&#x90e8;&#x5206;&#x662f;&#x6839;&#x636e;&#x6570;&#x636e;&#x5e93;&#x7528;&#x6237;&#x4e0e;&#x89d2;&#x8272;&#x4e0e;&#x83dc;&#x5355;&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;&#x5f97;&#x51fa;&#x7684;&#x3002;\n\n&#x9996;&#x5148;&#x4f7f;&#x7528;&#x674e;&#x56db;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x674e;&#x56db;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1324,1327"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/1209f1dae614f2c8844e2b36b5abab4a.png\" alt>","children":[],"payload":{"tag":"img","lines":"1328,1329"}},{"content":"<pre data-lines=\"1330,1331\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1330,1331"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a81cb420bfbf8ef4506d0e9464ebfba4.png\" alt>","children":[],"payload":{"tag":"img","lines":"1332,1333"}},{"content":"<pre data-lines=\"1334,1335\"><code>&#x5176;&#x6b21;&#x4f7f;&#x7528;&#x738b;&#x4e94;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x738b;&#x4e94;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6ca1;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1334,1335"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/2b6333d889f67a8c9b98c9f867df10b6.png\" alt>","children":[],"payload":{"tag":"img","lines":"1336,1337"}},{"content":"<pre data-lines=\"1338,1339\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1338,1339"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/740aa71579977432901aae76cbe42c75.png\" alt>","children":[],"payload":{"tag":"img","lines":"1340,1341"}},{"content":"<pre data-lines=\"1342,1343\"><code>&#x6211;&#x4eec;&#x73b0;&#x5728;&#x751f;&#x6210;&#x7684;token&#x3001;&#x5237;&#x65b0;token&#x3001;&#x6388;&#x6743;&#x7801;&#x3001;&#x6388;&#x6743;&#x7684;&#x6743;&#x9650;&#x90fd;&#x662f;&#x5b58;&#x653e;&#x5728;&#x5185;&#x5b58;&#x4e2d;&#x7684;&#xff0c;&#x672c;&#x7ae0;&#x8282;&#x5c06;&#x4f1a;&#x4ecb;&#x7ecd;&#x5982;&#x4f55;&#x5c06;&#x8fd9;&#x4e9b;&#x4fe1;&#x606f;&#x5b58;&#x653e;&#x5230;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1342,1343"}}],"payload":{"tag":"h3","lines":"1322,1323"}}],"payload":{"tag":"h2","lines":"1196,1198"}},{"content":"5.1&#x3001;&#x5347;&#x7ea7;&#x8ba4;&#x8bc1;&#x4e2d;&#x5fc3;","children":[{"content":"5.1.1&#x3001;&#x5bfc;&#x5165;&#x5b98;&#x65b9;&#x6570;&#x636e;&#x5e93;&#x8868;","children":[{"content":"<pre data-lines=\"1349,1437\"><code class=\"language-sql\"><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `oauth_client_details` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `oauth_client_details` (\n  `client_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">255</span>) <span class=\"hljs-keyword\">PRIMARY KEY</span>,\n  `resource_ids` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `client_secret` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `<span class=\"hljs-keyword\">scope</span>` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `authorized_grant_types` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `web_server_redirect_uri` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `authorities` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `access_token_validity` <span class=\"hljs-type\">INTEGER</span>,\n  `refresh_token_validity` <span class=\"hljs-type\">INTEGER</span>,\n  `additional_information` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">4096</span>),\n  `autoapprove` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>)\n) ENGINE <span class=\"hljs-operator\">=</span> INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET <span class=\"hljs-operator\">=</span> utf8 ;\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `oauth_client_token` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `oauth_client_token` (\n  `token_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `token` <span class=\"hljs-type\">BLOB</span>,\n  `authentication_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">255</span>) <span class=\"hljs-keyword\">PRIMARY KEY</span>,\n  `user_name` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `client_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>)\n) ENGINE <span class=\"hljs-operator\">=</span> INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET <span class=\"hljs-operator\">=</span> utf8 ;\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `oauth_access_token` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `oauth_access_token` (\n  `token_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `token` <span class=\"hljs-type\">BLOB</span>,\n  `authentication_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">255</span>) <span class=\"hljs-keyword\">PRIMARY KEY</span>,\n  `user_name` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `client_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `authentication` <span class=\"hljs-type\">BLOB</span>,\n  `refresh_token` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>)\n) ENGINE <span class=\"hljs-operator\">=</span> INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET <span class=\"hljs-operator\">=</span> utf8 ;\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `oauth_refresh_token` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `oauth_refresh_token` (\n  `token_id` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `token` <span class=\"hljs-type\">BLOB</span>,\n  `authentication` <span class=\"hljs-type\">BLOB</span>\n) ENGINE <span class=\"hljs-operator\">=</span> INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET <span class=\"hljs-operator\">=</span> utf8 ;\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `oauth_code` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `oauth_code` (\n  `code` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `authentication` <span class=\"hljs-type\">BLOB</span>\n) ENGINE <span class=\"hljs-operator\">=</span> INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET <span class=\"hljs-operator\">=</span> utf8 ;\n\n<span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> IF <span class=\"hljs-keyword\">EXISTS</span> `oauth_approvals` ;\n<span class=\"hljs-keyword\">CREATE TABLE</span> `oauth_approvals` (\n  `userId` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `clientId` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `<span class=\"hljs-keyword\">scope</span>` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">256</span>),\n  `status` <span class=\"hljs-type\">VARCHAR</span> (<span class=\"hljs-number\">10</span>),\n  `expiresAt` <span class=\"hljs-type\">TIMESTAMP</span>,\n  `lastModifiedAt` <span class=\"hljs-type\">TIMESTAMP</span>\n) ENGINE <span class=\"hljs-operator\">=</span> INNODB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET <span class=\"hljs-operator\">=</span> utf8 ;\n\n<span class=\"hljs-keyword\">INSERT INTO</span> `oauth_client_details` (\n  `client_id`,\n  `resource_ids`,\n  `client_secret`,\n  `<span class=\"hljs-keyword\">scope</span>`,\n  `authorized_grant_types`,\n  `web_server_redirect_uri`,\n  `authorities`,\n  `access_token_validity`,\n  `refresh_token_validity`,\n  `additional_information`,\n  `autoapprove`\n) \n<span class=\"hljs-keyword\">VALUES</span>\n  (\n    <span class=\"hljs-string\">&apos;myclient1&apos;</span>,\n    <span class=\"hljs-string\">&apos;RESOURCE-ORDER,RESOURCE-GOODS&apos;</span>,\n    <span class=\"hljs-string\">&apos;&#x24;2a&#x24;10&#x24;M7fmKpMZEkkzrTBiKie.EeAKZhQDrWAltpCA1y/py5AU/8lyiNB8y&apos;</span>,\n    <span class=\"hljs-string\">&apos;read,write&apos;</span>,\n    <span class=\"hljs-string\">&apos;authorization_code,implicit,password,client_credentials,refresh_token&apos;</span>,\n    <span class=\"hljs-string\">&apos;http://www.baidu.com&apos;</span>,\n    <span class=\"hljs-keyword\">NULL</span>,\n    <span class=\"hljs-number\">3600</span>,\n    <span class=\"hljs-number\">7200</span>,\n    <span class=\"hljs-keyword\">NULL</span>,\n    <span class=\"hljs-string\">&apos;false&apos;</span>\n  ) ;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1349,1437"}}],"payload":{"tag":"h3","lines":"1347,1348"}},{"content":"5.1.2&#x3001;&#x8fd8;&#x539f;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;&#x72b6;&#x6001;","children":[{"content":"<pre data-lines=\"1440,1448\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1440,1448"}}],"payload":{"tag":"h3","lines":"1438,1439"}},{"content":"5.1.3&#x3001;&#x914d;&#x7f6e;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x8be6;&#x60c5;","children":[{"content":"<pre data-lines=\"1451,1474\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> DataSource dataSource;\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> JdbcClientDetailsService <span class=\"hljs-title function_\">jdbcClientDetailsService</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcClientDetailsService</span>(dataSource);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ClientDetailsServiceConfigurer clients)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        clients.withClientDetails(jdbcClientDetailsService());\n    }\n    ...\n    ...\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1451,1474"}}],"payload":{"tag":"h3","lines":"1449,1450"}},{"content":"5.1.4&#x3001;&#x914d;&#x7f6e;&#x4ee4;&#x724c;&#x8bbf;&#x95ee;&#x7aef;&#x70b9;","children":[{"content":"<pre data-lines=\"1477,1523\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    ...\n    ...\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AuthenticationManager authenticationManager;\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> AuthorizationCodeServices <span class=\"hljs-title function_\">authorizationCodeServices</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcAuthorizationCodeServices</span>(dataSource);\n    }\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TokenStore <span class=\"hljs-title function_\">tokenStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcTokenStore</span>(dataSource);\n    }\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> ApprovalStore <span class=\"hljs-title function_\">approvalStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcApprovalStore</span>(dataSource);\n    }\n\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> SysUserDetailsService userDetailsService;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        endpoints\n                .authenticationManager(authenticationManager)\n                .authorizationCodeServices(authorizationCodeServices())\n                .tokenStore(tokenStore())\n                .approvalStore(approvalStore())\n                .userDetailsService(userDetailsService)\n                .allowedTokenEndpointRequestMethods(HttpMethod.POST);\n    }\n    ...\n    ...\n}   \n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1477,1523"}}],"payload":{"tag":"h3","lines":"1475,1476"}},{"content":"5.1.5&#x3001;&#x914d;&#x7f6e;&#x4ee4;&#x724c;&#x7aef;&#x70b9;&#x5b89;&#x5168;","children":[{"content":"<pre data-lines=\"1526,1542\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    ...\n    ...\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerSecurityConfigurer security)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        security\n                .tokenKeyAccess(<span class=\"hljs-string\">&quot;permitAll()&quot;</span>)\n                .checkTokenAccess(<span class=\"hljs-string\">&quot;permitAll()&quot;</span>)\n                .allowFormAuthenticationForClients();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1526,1542"}}],"payload":{"tag":"h3","lines":"1524,1525"}},{"content":"5.1.6&#x3001;&#x91cd;&#x542f;&#x8ba4;&#x8bc1;&#x7684;&#x670d;&#x52a1;&#x5668;","children":[{"content":"<pre data-lines=\"1545,1546\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x9879;&#x76ee;&#xff1a;oauth2-server-auth1001\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1545,1546"}}],"payload":{"tag":"h3","lines":"1543,1544"}},{"content":"5.1.7&#x3001;&#x6d4b;&#x8bd5;&#x56db;&#x79cd;&#x6a21;&#x5f0f;&#x4f7f;&#x7528;","children":[{"content":"5.1.7.1&#x3001;&#x6d4b;&#x8bd5;&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1551,1554\"><code>&#x83b7;&#x53d6;&#x6388;&#x6743;&#x7801;&#xff1a;http://localhost:1001/oauth/authorize?client\\_id=myclient1&amp;response\\_type=code\n\n&#x83b7;&#x53d6;token&#xff1a;http://localhost:1001/oauth/token\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1551,1554"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/4612976a4748f27d48f016c09357c2d8.png\" alt>","children":[],"payload":{"tag":"img","lines":"1555,1556"}}],"payload":{"tag":"h4","lines":"1549,1550"}},{"content":"5.1.7.2&#x3001;&#x6d4b;&#x8bd5;&#x7b80;&#x5316;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1559,1560\"><code>&#x8bbf;&#x95ee;&#x5730;&#x5740;&#xff1a;http://localhost:1001/oauth/authorize?client\\_id=myclient1&amp;response\\_type=token&amp;scope=read%20write&amp;redirect\\_uri=http://www.baidu.com\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1559,1560"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/5905354f0984a4c71e4b7cf971ea184b.png\" alt>","children":[],"payload":{"tag":"img","lines":"1561,1562"}}],"payload":{"tag":"h4","lines":"1557,1558"}},{"content":"5.1.7.3&#x3001;&#x6d4b;&#x8bd5;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/4fe09bc88babf1c3b49be169dcd1054c.png\" alt>","children":[],"payload":{"tag":"img","lines":"1565,1566"}}],"payload":{"tag":"h4","lines":"1563,1564"}},{"content":"5.1.7.4&#x3001;&#x6d4b;&#x8bd5;&#x5ba2;&#x6237;&#x7aef;&#x6a21;&#x5f0f;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/3272b247f0b99f724a93bf3d8d320cfc.png\" alt>","children":[],"payload":{"tag":"img","lines":"1569,1570"}}],"payload":{"tag":"h4","lines":"1567,1568"}},{"content":"5.1.7.5&#x3001;&#x6d4b;&#x8bd5;&#x5237;&#x65b0;token","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/bfb65043cf7b683f6518f16e62840baa.png\" alt>","children":[],"payload":{"tag":"img","lines":"1573,1574"}}],"payload":{"tag":"h4","lines":"1571,1572"}}],"payload":{"tag":"h3","lines":"1547,1548"}}],"payload":{"tag":"h2","lines":"1344,1346"}},{"content":"5.2&#x3001;&#x5347;&#x7ea7;&#x8ba2;&#x5355;&#x8d44;&#x6e90;","children":[{"content":"5.2.1&#x3001;&#x4fee;&#x6539;&#x914d;&#x7f6e;&#x7684;&#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"1580,1630\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> DataSource dataSource;\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TokenStore <span class=\"hljs-title function_\">tokenStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcTokenStore</span>(dataSource);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> ResourceServerTokenServices <span class=\"hljs-title function_\">tokenService</span><span class=\"hljs-params\">()</span> {\n        \n        <span class=\"hljs-type\">RemoteTokenServices</span> <span class=\"hljs-variable\">service</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RemoteTokenServices</span>();\n        service.setCheckTokenEndpointUrl(<span class=\"hljs-string\">&quot;http://localhost:1001/oauth/check_token&quot;</span>);\n        service.setClientId(<span class=\"hljs-string\">&quot;myclient1&quot;</span>);\n        service.setClientSecret(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n        <span class=\"hljs-keyword\">return</span> service;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ResourceServerSecurityConfigurer resources)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        resources.resourceId(<span class=\"hljs-string\">&quot;RESOURCE-ORDER&quot;</span>)\n                .tokenStore(tokenStore())\n                .tokenServices(tokenService())\n                .stateless(<span class=\"hljs-literal\">true</span>);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(HttpSecurity http)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        http.authorizeRequests()\n                \n                .antMatchers(HttpMethod.GET, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;read&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.POST, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.PATCH, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.PUT, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.DELETE, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                \n                .and().cors()\n                <span class=\"hljs-comment\">//&#x7981;&#x7528;csrf</span>\n                .and().csrf().disable()\n                <span class=\"hljs-comment\">//&#x7981;&#x7528;session</span>\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1580,1630"}}],"payload":{"tag":"h3","lines":"1578,1579"}},{"content":"5.2.2&#x3001;&#x91cd;&#x542f;&#x8ba2;&#x5355;&#x7684;&#x8d44;&#x6e90;","children":[{"content":"<pre data-lines=\"1633,1634\"><code>&#x91cd;&#x542f;&#x8ba2;&#x5355;&#x8d44;&#x6e90;`oauth2-resource-order1002`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1633,1634"}}],"payload":{"tag":"h3","lines":"1631,1632"}},{"content":"5.2.3&#x3001;&#x6d4b;&#x8bd5;&#x6743;&#x9650;&#x7684;&#x63a7;&#x5236;","children":[{"content":"<pre data-lines=\"1637,1638\"><code>&#x9996;&#x5148;&#x4f7f;&#x7528;&#x674e;&#x56db;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x674e;&#x56db;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1637,1638"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0040f43d7be3daca19424856909b4fe7.png\" alt>","children":[],"payload":{"tag":"img","lines":"1639,1640"}},{"content":"<pre data-lines=\"1641,1642\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1641,1642"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/799256d083f8db16c22f77d885d2b922.png\" alt>","children":[],"payload":{"tag":"img","lines":"1643,1644"}},{"content":"<pre data-lines=\"1645,1646\"><code>&#x5176;&#x6b21;&#x4f7f;&#x7528;&#x738b;&#x4e94;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x738b;&#x4e94;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6ca1;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1645,1646"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/90975cbf442a800bc6dbc96e76f4ead8.png\" alt>","children":[],"payload":{"tag":"img","lines":"1647,1648"}},{"content":"<pre data-lines=\"1649,1650\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1649,1650"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/29360f7695a11bbc23b9f30b7e55bf55.png\" alt>","children":[],"payload":{"tag":"img","lines":"1651,1652"}},{"content":"<pre data-lines=\"1653,1656\"><code>&#x4e0a;&#x8fb9;&#x7684;&#x67b6;&#x6784;&#x5b58;&#x5728;&#x4e00;&#x79cd;&#x95ee;&#x9898;&#xff0c;&#x6bcf;&#x4e00;&#x6b21;&#x53bb;&#x8bbf;&#x95ee;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x90fd;&#x9700;&#x8981;&#x767b;&#x5f55;&#x5230;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#xff0c;&#x7136;&#x540e;&#x5bf9;token&#x8fdb;&#x884c;&#x6821;&#x9a8c;&#xff0c;&#x8fd9;&#x6837;&#x65e0;&#x7591;&#x964d;&#x4f4e;&#x4e86;&#x7cfb;&#x7edf;&#x7684;&#x6027;&#x80fd;&#xff0c;&#x80fd;&#x4e0d;&#x80fd;&#x6211;&#x4e0d;&#x53bb;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x5668;&#x8ba4;&#x8bc1;&#xff0c;&#x6211;&#x4e5f;&#x77e5;&#x9053;&#x4f60;&#x8fd9;&#x4e2a;token&#x5230;&#x5e95;&#x5408;&#x4e0d;&#x5408;&#x6cd5;&#xff0c;&#x7b54;&#x6848;&#x80af;&#x5b9a;&#x662f;&#x6709;&#x7684;&#x3002;\n\n&#x6211;&#x4eec;&#x5728;&#x8fd9;&#x91cc;&#x91c7;&#x7528;JWT&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x4e4b;&#x524d;&#x4e5f;&#x4ecb;&#x7ecd;&#x8fc7;JWT&#xff0c;&#x4ed6;&#x662f;&#x53ef;&#x4ee5;&#x751f;&#x6210;token&#x7684;&#xff0c;&#x800c;&#x4e14;&#xff0c;&#x4e3a;&#x4e86;&#x5b89;&#x5168;&#xff0c;&#x6211;&#x4eec;&#x5efa;&#x8bae;&#x7b7e;&#x540d;&#x7b97;&#x6cd5;&#x91c7;&#x7528;&#x79c1;&#x94a5;&#x52a0;&#x5bc6;&#xff0c;&#x800c;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x53ea;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x516c;&#x94a5;&#x5c31;&#x53ef;&#x4ee5;&#x9a8c;&#x8bc1;&#x8fd9;&#x4e2a;token&#x5230;&#x5e95;&#x662f;&#x4e0d;&#x662f;&#x5408;&#x6cd5;&#x7684;&#xff0c;&#x8fd9;&#x6837;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x7701;&#x53bb;&#x4e86;&#x4e00;&#x6b21;&#x8bbf;&#x95ee;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x53bb;&#x6821;&#x9a8c;token&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x540c;&#x65f6;&#xff0c;&#x7531;&#x4e8e;&#x4f7f;&#x7528;&#x4e86;RSA&#x7684;&#x516c;&#x94a5;&#x548c;&#x79c1;&#x94a5;&#xff0c;&#x5728;&#x5b89;&#x5168;&#x4e0a;&#x4e5f;&#x5f97;&#x5230;&#x4e86;&#x4fdd;&#x8bc1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1653,1656"}}],"payload":{"tag":"h3","lines":"1635,1636"}}],"payload":{"tag":"h2","lines":"1575,1577"}},{"content":"6.1&#x3001;&#x521b;&#x5efa;&#x5de5;&#x5177;&#x7c7b;&#x5e93;","children":[{"content":"<pre data-lines=\"1660,1663\"><code>&#x628a;&#x4ee5;&#x4e0b;&#x8fd9;&#x4e2a;&#x7c7b;&#x590d;&#x5236;&#x5230;&#x5de5;&#x7a0b;`oauth2-server-auth1001`&#x548c;`oauth2-resource-order1002`&#x4e2d;&#x3002;\n\ncom.caochenlei.utils.RsaUtils\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1660,1663"}},{"content":"<pre data-lines=\"1664,1774\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.utils;\n\n<span class=\"hljs-keyword\">import</span> lombok.extern.slf4j.Slf4j;\n\n<span class=\"hljs-keyword\">import</span> java.io.File;\n<span class=\"hljs-keyword\">import</span> java.nio.file.Files;\n<span class=\"hljs-keyword\">import</span> java.security.*;\n<span class=\"hljs-keyword\">import</span> java.security.interfaces.RSAPrivateKey;\n<span class=\"hljs-keyword\">import</span> java.security.interfaces.RSAPublicKey;\n<span class=\"hljs-keyword\">import</span> java.security.spec.PKCS8EncodedKeySpec;\n<span class=\"hljs-keyword\">import</span> java.security.spec.X509EncodedKeySpec;\n<span class=\"hljs-keyword\">import</span> java.util.Base64;\n\n\n<span class=\"hljs-meta\">@Slf4j</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RsaUtils</span> {\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">DEFAULT_KEY_SIZE</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">2048</span>;\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> RSAPublicKey <span class=\"hljs-title function_\">getRSAPublicKey</span><span class=\"hljs-params\">(String filename)</span> {\n        <span class=\"hljs-keyword\">return</span> (RSAPublicKey) getPublicKey(filename);\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> RSAPrivateKey <span class=\"hljs-title function_\">getRSAPrivateKey</span><span class=\"hljs-params\">(String filename)</span> {\n        <span class=\"hljs-keyword\">return</span> (RSAPrivateKey) (getPrivateKey(filename));\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> PublicKey <span class=\"hljs-title function_\">getPublicKey</span><span class=\"hljs-params\">(String filename)</span> {\n        <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-type\">byte</span>[] bytes = readFile(filename);\n            <span class=\"hljs-keyword\">return</span> getPublicKey(bytes);\n        } <span class=\"hljs-keyword\">catch</span> (Exception e) {\n            log.error(<span class=\"hljs-string\">&quot;&#x83b7;&#x53d6;&#x516c;&#x94a5;&#x5bf9;&#x8c61;&#x5931;&#x8d25;&quot;</span>, e);\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n        }\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> PrivateKey <span class=\"hljs-title function_\">getPrivateKey</span><span class=\"hljs-params\">(String filename)</span> {\n        <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-type\">byte</span>[] bytes = readFile(filename);\n            <span class=\"hljs-keyword\">return</span> getPrivateKey(bytes);\n        } <span class=\"hljs-keyword\">catch</span> (Exception e) {\n            log.error(<span class=\"hljs-string\">&quot;&#x83b7;&#x53d6;&#x79c1;&#x94a5;&#x5bf9;&#x8c61;&#x5931;&#x8d25;&quot;</span>, e);\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n        }\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> PublicKey <span class=\"hljs-title function_\">getPublicKey</span><span class=\"hljs-params\">(<span class=\"hljs-type\">byte</span>[] bytes)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        bytes = Base64.getDecoder().decode(bytes);\n        <span class=\"hljs-type\">X509EncodedKeySpec</span> <span class=\"hljs-variable\">spec</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">X509EncodedKeySpec</span>(bytes);\n        <span class=\"hljs-type\">KeyFactory</span> <span class=\"hljs-variable\">factory</span> <span class=\"hljs-operator\">=</span> KeyFactory.getInstance(<span class=\"hljs-string\">&quot;RSA&quot;</span>);\n        <span class=\"hljs-keyword\">return</span> factory.generatePublic(spec);\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> PrivateKey <span class=\"hljs-title function_\">getPrivateKey</span><span class=\"hljs-params\">(<span class=\"hljs-type\">byte</span>[] bytes)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        bytes = Base64.getDecoder().decode(bytes);\n        <span class=\"hljs-type\">PKCS8EncodedKeySpec</span> <span class=\"hljs-variable\">spec</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">PKCS8EncodedKeySpec</span>(bytes);\n        <span class=\"hljs-type\">KeyFactory</span> <span class=\"hljs-variable\">factory</span> <span class=\"hljs-operator\">=</span> KeyFactory.getInstance(<span class=\"hljs-string\">&quot;RSA&quot;</span>);\n        <span class=\"hljs-keyword\">return</span> factory.generatePrivate(spec);\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">generateKey</span><span class=\"hljs-params\">(String publicKeyFilename, String privateKeyFilename, String secret, <span class=\"hljs-type\">int</span> keySize)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-type\">KeyPairGenerator</span> <span class=\"hljs-variable\">keyPairGenerator</span> <span class=\"hljs-operator\">=</span> KeyPairGenerator.getInstance(<span class=\"hljs-string\">&quot;RSA&quot;</span>);\n        <span class=\"hljs-type\">SecureRandom</span> <span class=\"hljs-variable\">secureRandom</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SecureRandom</span>(secret.getBytes());\n        keyPairGenerator.initialize(Math.max(keySize, DEFAULT_KEY_SIZE), secureRandom);\n        <span class=\"hljs-type\">KeyPair</span> <span class=\"hljs-variable\">keyPair</span> <span class=\"hljs-operator\">=</span> keyPairGenerator.genKeyPair();\n        \n        <span class=\"hljs-type\">byte</span>[] publicKeyBytes = keyPair.getPublic().getEncoded();\n        publicKeyBytes = Base64.getEncoder().encode(publicKeyBytes);\n        writeFile(publicKeyFilename, publicKeyBytes);\n        \n        <span class=\"hljs-type\">byte</span>[] privateKeyBytes = keyPair.getPrivate().getEncoded();\n        privateKeyBytes = Base64.getEncoder().encode(privateKeyBytes);\n        writeFile(privateKeyFilename, privateKeyBytes);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">byte</span>[] readFile(String fileName) <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-keyword\">return</span> Files.readAllBytes(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(fileName).toPath());\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">writeFile</span><span class=\"hljs-params\">(String destPath, <span class=\"hljs-type\">byte</span>[] bytes)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">dest</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">File</span>(destPath);\n        <span class=\"hljs-type\">File</span> <span class=\"hljs-variable\">parentFile</span> <span class=\"hljs-operator\">=</span> dest.getParentFile();\n        <span class=\"hljs-keyword\">if</span> (!parentFile.exists()) {\n            parentFile.mkdirs();\n        }\n        <span class=\"hljs-keyword\">if</span> (!dest.exists()) {\n            dest.createNewFile();\n        }\n        Files.write(dest.toPath(), bytes);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">publicFile</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;D:\\\\auth_key\\\\rsa_key.pub&quot;</span>;\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">privateFile</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;D:\\\\auth_key\\\\rsa_key&quot;</span>;\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">secret</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;123456789&quot;</span>;\n        \n        generateKey(publicFile, privateFile, secret, <span class=\"hljs-number\">2048</span>);\n        System.out.println(<span class=\"hljs-string\">&quot;generateKey done ...&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1664,1774"}}],"payload":{"tag":"h2","lines":"1657,1659"}},{"content":"6.2&#x3001;&#x751f;&#x6210;&#x516c;&#x94a5;&#x79c1;&#x94a5;","children":[{"content":"<pre data-lines=\"1778,1781\"><code>&#x8fd0;&#x884c;`RsaUtils`&#x7684;`main`&#x65b9;&#x6cd5;&#xff0c;&#x751f;&#x6210;&#x516c;&#x94a5;&#x548c;&#x79c1;&#x94a5;&#xff0c;&#x8fd9;&#x91cc;&#x5efa;&#x8bae;&#x4f60;&#x5148;&#x522b;&#x6539;&#x8def;&#x5f84;&#xff0c;&#x8fd9;&#x4e2a;secret&#x4e5f;&#x5c31;&#x662f;&#x76d0;&#x6216;&#x8005;&#x8bf4;&#x5bc6;&#x7801;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x968f;&#x4fbf;&#x6539;&#x3002;\n\n&gt; &#x6ce8;&#x610f;&#xff1a;&#x5982;&#x679c;&#x62a5;&#x9519;&#x8bef;: &#x627e;&#x4e0d;&#x5230;&#x6216;&#x65e0;&#x6cd5;&#x52a0;&#x8f7d;&#x4e3b;&#x7c7b; com.caochenlei.utils.RsaUtils&#xff0c;&#x8bf7;&#x6309;&#x5feb;&#x6377;&#x952e;`CTRL+F9`&#x91cd;&#x65b0;&#x7f16;&#x8bd1;&#x5f53;&#x524d;&#x9879;&#x76ee;&#xff0c;&#x7136;&#x540e;&#x5728;&#x8fd0;&#x884c;&#x5c31;&#x6ca1;&#x4e8b;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1778,1781"}}],"payload":{"tag":"h2","lines":"1775,1777"}},{"content":"6.3&#x3001;&#x4fee;&#x6539;&#x8ba4;&#x8bc1;&#x670d;&#x52a1;&#x914d;&#x7f6e;","children":[{"content":"<pre data-lines=\"1785,1786\"><code>com.caochenlei.config.AuthorizationServerConfig\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1785,1786"}},{"content":"<pre data-lines=\"1787,1857\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableAuthorizationServer</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthorizationServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">AuthorizationServerConfigurerAdapter</span> {\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> DataSource dataSource;\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> JdbcClientDetailsService <span class=\"hljs-title function_\">jdbcClientDetailsService</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcClientDetailsService</span>(dataSource);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ClientDetailsServiceConfigurer clients)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        clients.withClientDetails(jdbcClientDetailsService());\n    }\n\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AuthenticationManager authenticationManager;\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> JwtAccessTokenConverter <span class=\"hljs-title function_\">jwtAccessTokenConverter</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">JwtAccessTokenConverter</span> <span class=\"hljs-variable\">converter</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JwtAccessTokenConverter</span>();\n        \n        converter.setSigner(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RsaSigner</span>(RsaUtils.getRSAPrivateKey(<span class=\"hljs-string\">&quot;D:\\\\auth_key\\\\rsa_key&quot;</span>)));\n        \n        converter.setVerifier(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RsaVerifier</span>(RsaUtils.getRSAPublicKey(<span class=\"hljs-string\">&quot;D:\\\\auth_key\\\\rsa_key.pub&quot;</span>)));\n        <span class=\"hljs-keyword\">return</span> converter;\n    }\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TokenStore <span class=\"hljs-title function_\">tokenStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JwtTokenStore</span>(jwtAccessTokenConverter());\n    }\n\n    \n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> ApprovalStore <span class=\"hljs-title function_\">approvalStore</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JdbcApprovalStore</span>(dataSource);\n    }\n\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> SysUserDetailsService userDetailsService;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        endpoints\n                .authenticationManager(authenticationManager)\n                .accessTokenConverter(jwtAccessTokenConverter())\n                .tokenStore(tokenStore())\n                .approvalStore(approvalStore())\n                .userDetailsService(userDetailsService)\n                .allowedTokenEndpointRequestMethods(HttpMethod.POST);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(AuthorizationServerSecurityConfigurer security)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        security\n                .tokenKeyAccess(<span class=\"hljs-string\">&quot;permitAll()&quot;</span>)\n                .checkTokenAccess(<span class=\"hljs-string\">&quot;permitAll()&quot;</span>)\n                .allowFormAuthenticationForClients();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1787,1857"}},{"content":"<pre data-lines=\"1858,1859\"><code>&#x4fee;&#x6539;&#x5b8c;&#x6bd5;&#x4ee5;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x542f;&#x52a8;`oauth2-server-auth1001`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1858,1859"}}],"payload":{"tag":"h2","lines":"1782,1784"}},{"content":"6.4&#x3001;&#x4fee;&#x6539;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x914d;&#x7f6e;","children":[{"content":"<pre data-lines=\"1865,1908\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> JwtAccessTokenConverter <span class=\"hljs-title function_\">jwtAccessTokenConverter</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">JwtAccessTokenConverter</span> <span class=\"hljs-variable\">converter</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JwtAccessTokenConverter</span>();\n        converter.setVerifier(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RsaVerifier</span>(RsaUtils.getRSAPublicKey(<span class=\"hljs-string\">&quot;D:\\\\auth_key\\\\rsa_key.pub&quot;</span>)));\n        <span class=\"hljs-keyword\">return</span> converter;\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TokenStore <span class=\"hljs-title function_\">tokenStore</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">JwtTokenStore</span>(jwtAccessTokenConverter());\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ResourceServerSecurityConfigurer resources)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        resources.resourceId(<span class=\"hljs-string\">&quot;RESOURCE-ORDER&quot;</span>)\n                .tokenStore(tokenStore())\n                .stateless(<span class=\"hljs-literal\">true</span>);\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(HttpSecurity http)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        http.authorizeRequests()\n                \n                .antMatchers(HttpMethod.GET, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;read&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.POST, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.PATCH, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.PUT, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                .antMatchers(HttpMethod.DELETE, <span class=\"hljs-string\">&quot;/**&quot;</span>).access(<span class=\"hljs-string\">&quot;#oauth2.hasScope(&apos;write&apos;)&quot;</span>)\n                \n                .and().cors()\n                <span class=\"hljs-comment\">//&#x7981;&#x7528;csrf</span>\n                .and().csrf().disable()\n                <span class=\"hljs-comment\">//&#x7981;&#x7528;session</span>\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1865,1908"}},{"content":"<pre data-lines=\"1909,1910\"><code>&#x4fee;&#x6539;&#x5b8c;&#x6bd5;&#x4ee5;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x542f;&#x52a8;`oauth2-resource-order1002`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1909,1910"}}],"payload":{"tag":"h2","lines":"1860,1862"}},{"content":"6.5&#x3001;&#x6d4b;&#x8bd5;&#x56db;&#x79cd;&#x6a21;&#x5f0f;&#x4f7f;&#x7528;","children":[{"content":"6.5.1&#x3001;&#x6d4b;&#x8bd5;&#x6388;&#x6743;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1916,1919\"><code>&#x83b7;&#x53d6;&#x6388;&#x6743;&#x7801;&#xff1a;http://localhost:1001/oauth/authorize?client\\_id=myclient1&amp;response\\_type=code\n\n&#x83b7;&#x53d6;token&#xff1a;http://localhost:1001/oauth/token\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1916,1919"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ea9f52f91b4b46fdd995f8bb279168fa.png\" alt>","children":[],"payload":{"tag":"img","lines":"1920,1921"}},{"content":"<pre data-lines=\"1922,1923\"><code>&#x67e5;&#x770b;token&#xff1a;https://jwt.io/\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1922,1923"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/7fea04574c79af2221c466e64bf8aefc.png\" alt>","children":[],"payload":{"tag":"img","lines":"1924,1925"}}],"payload":{"tag":"h3","lines":"1914,1915"}},{"content":"6.5.2&#x3001;&#x6d4b;&#x8bd5;&#x7b80;&#x5316;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"1928,1929\"><code>&#x8bbf;&#x95ee;&#x5730;&#x5740;&#xff1a;http://localhost:1001/oauth/authorize?client\\_id=myclient1&amp;response\\_type=token&amp;scope=read%20write&amp;redirect\\_uri=http://www.baidu.com\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1928,1929"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/f5896c2294ca183ddae785d19b0812c3.png\" alt>","children":[],"payload":{"tag":"img","lines":"1930,1931"}}],"payload":{"tag":"h3","lines":"1926,1927"}},{"content":"6.5.3&#x3001;&#x6d4b;&#x8bd5;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/baaf39d3df7127444cce6cc95de709a0.png\" alt>","children":[],"payload":{"tag":"img","lines":"1934,1935"}}],"payload":{"tag":"h3","lines":"1932,1933"}},{"content":"6.5.4&#x3001;&#x6d4b;&#x8bd5;&#x5ba2;&#x6237;&#x7aef;&#x6a21;&#x5f0f;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/6e6e1d52e9cc83da01741bfd25bf705f.png\" alt>","children":[],"payload":{"tag":"img","lines":"1938,1939"}}],"payload":{"tag":"h3","lines":"1936,1937"}},{"content":"6.5.5&#x3001;&#x6d4b;&#x8bd5;&#x5237;&#x65b0;token","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b71210a2f5b4e975e3bc6f299397b301.png\" alt>","children":[],"payload":{"tag":"img","lines":"1942,1943"}}],"payload":{"tag":"h3","lines":"1940,1941"}}],"payload":{"tag":"h2","lines":"1911,1913"}},{"content":"6.6&#x3001;&#x6d4b;&#x8bd5;&#x8d44;&#x6e90;&#x6743;&#x9650;&#x63a7;&#x5236;","children":[{"content":"<pre data-lines=\"1947,1948\"><code>&#x9996;&#x5148;&#x4f7f;&#x7528;&#x674e;&#x56db;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x674e;&#x56db;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1947,1948"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/7e812965269224c25f5c29dc7dd6e221.png\" alt>","children":[],"payload":{"tag":"img","lines":"1949,1950"}},{"content":"<pre data-lines=\"1951,1952\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1951,1952"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/6c38027eb8a0b59b9bf515da5870ea3d.png\" alt>","children":[],"payload":{"tag":"img","lines":"1953,1954"}},{"content":"<pre data-lines=\"1955,1956\"><code>&#x5176;&#x6b21;&#x4f7f;&#x7528;&#x738b;&#x4e94;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x738b;&#x4e94;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6ca1;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1955,1956"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0b0fe4b2a27a180718a7c8de8483a14e.png\" alt>","children":[],"payload":{"tag":"img","lines":"1957,1958"}},{"content":"<pre data-lines=\"1959,1960\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1959,1960"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/9eab70c3655a0674b99edf2b7a14f255.png\" alt>","children":[],"payload":{"tag":"img","lines":"1961,1962"}},{"content":"<pre data-lines=\"1963,1964\"><code>&#x5728;&#x8fd9;&#x91cc;&#xff0c;&#x6211;&#x4f7f;&#x7528;&#x4e00;&#x79cd;&#x53d6;&#x5de7;&#x7684;&#x65b9;&#x5f0f;&#x5f00;&#x8fdb;&#x884c;&#x5355;&#x70b9;&#x767b;&#x5f55;&#xff0c;&#x65e2;&#x7136;OAuth2.0&#x53ef;&#x4ee5;&#x4e3a;&#x7b2c;&#x4e09;&#x65b9;&#x5e94;&#x7528;&#x6388;&#x6743;&#x8bbf;&#x95ee;&#x7cfb;&#x7edf;&#x8d44;&#x6e90;&#xff0c;&#x6211;&#x7ed9;&#x5f53;&#x524d;&#x7684;&#x7cfb;&#x7edf;&#x7533;&#x8bf7;&#x4e00;&#x4e2a;&#x62e5;&#x6709;&#x6240;&#x6709;&#x8d44;&#x6e90;&#x6743;&#x9650;&#x7684;&#x5ba2;&#x6237;&#x7aef;id&#x4e0d;&#x5c31;&#x884c;&#x4e86;&#xff0c;&#x8fd9;&#x91cc;&#x4e3a;&#x4e86;&#x7701;&#x4e8b;&#xff0c;&#x6211;&#x8fd8;&#x662f;&#x7528;`myclient1`&#xff0c;&#x5728;&#x767b;&#x5f55;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6211;&#x4eec;&#x4f7f;&#x7528;&#x5bc6;&#x7801;&#x6a21;&#x5f0f;&#x8fdb;&#x884c;&#x767b;&#x5f55;&#xff0c;&#x4f46;&#x662f;&#xff0c;&#x4f60;&#x4e0d;&#x80fd;&#x6bcf;&#x6b21;&#x8ba9;&#x7528;&#x6237;&#x90fd;&#x81ea;&#x5df1;&#x8f93;&#x5165;&#x5ba2;&#x6237;&#x7aef;id&#x548c;&#x5ba2;&#x6237;&#x7aef;&#x5bc6;&#x94a5;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x5199;&#x4e00;&#x4e2a;&#x63a7;&#x5236;&#x5668;&#xff0c;&#x63a5;&#x6536;&#x7528;&#x6237;&#x4f20;&#x9012;&#x8fc7;&#x6765;&#x7684;&#x8d26;&#x6237;&#x548c;&#x5bc6;&#x7801;&#xff0c;&#x6211;&#x4eec;&#x5185;&#x90e8;&#x81ea;&#x5df1;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#xff0c;&#x4ee5;&#x6b64;&#x5b9e;&#x73b0;&#x767b;&#x5f55;&#x6548;&#x679c;&#xff0c;&#x767b;&#x5f55;&#x6210;&#x529f;&#x4ee5;&#x540e;&#x8fd4;&#x56de;&#x7528;&#x6237;&#x6570;&#x636e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1963,1964"}}],"payload":{"tag":"h2","lines":"1944,1946"}},{"content":"7.1&#x3001;&#x6ce8;&#x5165;Rest&#x6a21;&#x677f;","children":[{"content":"<pre data-lines=\"1968,1969\"><code>com.caochenlei.OAuth2Server1001Application\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1968,1969"}},{"content":"<pre data-lines=\"1970,1987\"><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootApplication</span>\n<span class=\"hljs-meta\">@EnableEurekaClient</span>\n<span class=\"hljs-meta\">@EnableFeignClients</span>\n<span class=\"hljs-meta\">@EnableHystrix</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OAuth2Server1001Application</span> {\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n        SpringApplication.run(OAuth2Server1001Application.class, args);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> RestTemplate <span class=\"hljs-title function_\">restTemplate</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RestTemplate</span>();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1970,1987"}}],"payload":{"tag":"h2","lines":"1965,1967"}},{"content":"7.2&#x3001;&#x521b;&#x5efa;&#x63a7;&#x5236;&#x5668;&#x7c7b;","children":[{"content":"<pre data-lines=\"1991,1992\"><code>com.caochenlei.controller.AuthController\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1991,1992"}},{"content":"<pre data-lines=\"1993,2050\"><code class=\"language-java\"><span class=\"hljs-meta\">@RestController</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AuthController</span> {\n    \n    <span class=\"hljs-meta\">@Value(&quot;&#x24;{spring.cloud.client.ip-address}&quot;)</span>\n    <span class=\"hljs-keyword\">private</span> String authIp;\n\n    \n    <span class=\"hljs-meta\">@Value(&quot;&#x24;{server.port}&quot;)</span>\n    <span class=\"hljs-keyword\">private</span> String authPort;\n\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> RestTemplate restTemplate;\n\n    \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">clientId</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;myclient1&quot;</span>;\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">clientSecret</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;123456&quot;</span>;\n\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/user/login&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> Map <span class=\"hljs-title function_\">login</span><span class=\"hljs-params\">(String username, String password)</span> {\n        \n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">url</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;http://&quot;</span> + authIp + <span class=\"hljs-string\">&quot;:&quot;</span> + authPort + <span class=\"hljs-string\">&quot;/oauth/token&quot;</span>;\n\n        \n        MultiValueMap&lt;String, String&gt; headers = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkedMultiValueMap</span>&lt;&gt;();\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">base64</span> <span class=\"hljs-operator\">=</span> Base64.getEncoder().encodeToString(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(clientId + <span class=\"hljs-string\">&quot;:&quot;</span> + clientSecret).getBytes());\n        headers.add(<span class=\"hljs-string\">&quot;Authorization&quot;</span>, <span class=\"hljs-string\">&quot;Basic &quot;</span> + base64);\n\n        \n        MultiValueMap&lt;String, String&gt; formData = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkedMultiValueMap</span>&lt;&gt;();\n        formData.add(<span class=\"hljs-string\">&quot;grant_type&quot;</span>, <span class=\"hljs-string\">&quot;password&quot;</span>);\n        formData.add(<span class=\"hljs-string\">&quot;username&quot;</span>, username);\n        formData.add(<span class=\"hljs-string\">&quot;password&quot;</span>, password);\n\n        \n        \n        HttpEntity&lt;MultiValueMap&gt; requestentity = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HttpEntity</span>&lt;&gt;(formData, headers);\n        ResponseEntity&lt;Map&gt; responseEntity = restTemplate.exchange(url, HttpMethod.POST, requestentity, Map.class);\n\n        \n        <span class=\"hljs-type\">Map</span> <span class=\"hljs-variable\">body</span> <span class=\"hljs-operator\">=</span> responseEntity.getBody();\n\n        \n        Map&lt;String, Object&gt; response = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkedHashMap</span>();\n        response.put(<span class=\"hljs-string\">&quot;access_token&quot;</span>, (String) body.get(<span class=\"hljs-string\">&quot;access_token&quot;</span>));\n        response.put(<span class=\"hljs-string\">&quot;token_type&quot;</span>, (String) body.get(<span class=\"hljs-string\">&quot;token_type&quot;</span>));\n        response.put(<span class=\"hljs-string\">&quot;refresh_token&quot;</span>, (String) body.get(<span class=\"hljs-string\">&quot;refresh_token&quot;</span>));\n        response.put(<span class=\"hljs-string\">&quot;expires_in&quot;</span>, (Integer) body.get(<span class=\"hljs-string\">&quot;expires_in&quot;</span>));\n        response.put(<span class=\"hljs-string\">&quot;scope&quot;</span>, (String) body.get(<span class=\"hljs-string\">&quot;scope&quot;</span>));\n        response.put(<span class=\"hljs-string\">&quot;jti&quot;</span>, (String) body.get(<span class=\"hljs-string\">&quot;jti&quot;</span>));\n\n        \n        <span class=\"hljs-keyword\">return</span> response;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1993,2050"}}],"payload":{"tag":"h2","lines":"1988,1990"}},{"content":"7.3&#x3001;&#x5f00;&#x653e;&#x767b;&#x5f55;&#x7aef;&#x53e3;","children":[{"content":"<pre data-lines=\"2054,2055\"><code>com.caochenlei.config.WebSecurityConfig\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2054,2055"}},{"content":"<pre data-lines=\"2056,2076\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableWebSecurity</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">WebSecurityConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">WebSecurityConfigurerAdapter</span> {\n    ...\n    ...\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(HttpSecurity http)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        http.authorizeRequests()\n                .antMatchers(<span class=\"hljs-string\">&quot;/user/login&quot;</span>).permitAll()\n                .anyRequest().authenticated()\n                .and().formLogin().permitAll()\n                .and().csrf().disable();\n    }\n    ...\n    ...\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2056,2076"}}],"payload":{"tag":"h2","lines":"2051,2053"}},{"content":"7.4&#x3001;&#x6d4b;&#x8bd5;&#x767b;&#x5f55;&#x6548;&#x679c;","children":[{"content":"<pre data-lines=\"2080,2083\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#xff1a;oauth2-server-auth1001\n\n&#x8bbf;&#x95ee;&#x5730;&#x5740;&#xff1a;http://localhost:1001/user/login\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2080,2083"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/083f80c66a63c938da2925ba6dcd33ad.png\" alt>","children":[],"payload":{"tag":"img","lines":"2084,2085"}}],"payload":{"tag":"h2","lines":"2077,2079"}},{"content":"7.5&#x3001;&#x6d4b;&#x8bd5;&#x6743;&#x9650;&#x63a7;&#x5236;","children":[{"content":"<pre data-lines=\"2089,2090\"><code>&#x9996;&#x5148;&#x4f7f;&#x7528;&#x674e;&#x56db;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x674e;&#x56db;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2089,2090"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/8ddb5f1c3940040a511f374271a5f0ee.png\" alt>","children":[],"payload":{"tag":"img","lines":"2091,2092"}},{"content":"<pre data-lines=\"2093,2094\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2093,2094"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/2a129f62ce15eb853bc0b67801ae34a5.png\" alt>","children":[],"payload":{"tag":"img","lines":"2095,2096"}},{"content":"<pre data-lines=\"2097,2098\"><code>&#x5176;&#x6b21;&#x4f7f;&#x7528;&#x738b;&#x4e94;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#xff0c;myclient1&#x62e5;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x548c;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x7684;&#x6743;&#x9650;&#xff0c;&#x800c;&#x738b;&#x4e94;&#x8d26;&#x6237;&#x672c;&#x8eab;&#x6ca1;&#x6709;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x7684;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x6743;&#x9650;&#xff0c;&#x767b;&#x5f55;&#x540e;&#x83b7;&#x53d6;`access_token`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2097,2098"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/7ff6b3cf3d43b3d15251736990726108.png\" alt>","children":[],"payload":{"tag":"img","lines":"2099,2100"}},{"content":"<pre data-lines=\"2101,2102\"><code>&#x5728;&#x8bbf;&#x95ee;&#x5177;&#x4f53;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x628a;token&#x4e5f;&#x4f20;&#x9012;&#x8fc7;&#x53bb;&#xff0c;&#x53c2;&#x6570;&#x5934;&#x4e3a;`Authorization`&#xff0c;&#x53c2;&#x6570;&#x503c;&#x4e3a;`Bearer`+&#x7a7a;&#x683c;+`access_token`&#xff0c;&#x8bbf;&#x95ee;&#x5730;&#x5740;&#x662f;&#x4f60;&#x6b63;&#x5e38;&#x4e1a;&#x52a1;&#x7684;&#x5730;&#x5740;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2101,2102"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/669992ea14cca97471a25cb9448f0961.png\" alt>","children":[],"payload":{"tag":"img","lines":"2103,2104"}}],"payload":{"tag":"h2","lines":"2086,2088"}},{"content":"8.1&#x3001;&#x5546;&#x54c1;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x51c6;&#x5907;","children":[{"content":"<pre data-lines=\"2108,2109\"><code>&#xff08;1&#xff09;`oauth2-resource-goods1003`&#x6dfb;&#x52a0;&#x4f9d;&#x8d56;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2108,2109"}},{"content":"<pre data-lines=\"2110,2117\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-cloud-starter-oauth2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2110,2117"}},{"content":"<pre data-lines=\"2118,2123\"><code>&#xff08;2&#xff09;&#x62f7;&#x8d1d;`oauth2-resource-order1002`&#x7684;`com.caochenlei.utils.RsaUtils`&#x5230;`oauth2-resource-goods1003`\n\n&#xff08;3&#xff09;&#x62f7;&#x8d1d;`oauth2-resource-order1002`&#x7684;`com.caochenlei.config.ResourceServerConfig`&#x5230;`oauth2-resource-goods1003`\n\n&#x4fee;&#x6539;&#x8d44;&#x6e90;&#x540d;&#x79f0;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2118,2123"}},{"content":"<pre data-lines=\"2124,2142\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableResourceServer</span>\n<span class=\"hljs-meta\">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ResourceServerConfig</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ResourceServerConfigurerAdapter</span> {\n    ...\n    ...\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">configure</span><span class=\"hljs-params\">(ResourceServerSecurityConfigurer resources)</span> <span class=\"hljs-keyword\">throws</span> Exception {\n        resources.resourceId(<span class=\"hljs-string\">&quot;RESOURCE-GOODS&quot;</span>)\n                .tokenStore(tokenStore())\n                .stateless(<span class=\"hljs-literal\">true</span>);\n    }\n    ...\n    ...\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2124,2142"}},{"content":"<pre data-lines=\"2143,2146\"><code>&#xff08;4&#xff09;&#x62f7;&#x8d1d;`oauth2-server-auth1001`&#x7684;`com.caochenlei.controller.GoodstController`&#x5230;`oauth2-resource-goods1003`\n\n&#xff08;5&#xff09;&#x542f;&#x52a8;`oauth2-resource-goods1003`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2143,2146"}}],"payload":{"tag":"h2","lines":"2105,2107"}},{"content":"8.2&#x3001;&#x8ba2;&#x5355;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x51c6;&#x5907;","children":[{"content":"<pre data-lines=\"2150,2153\"><code>&#xff08;1&#xff09;&#x5728;`oauth2-resource-order1002`&#x589e;&#x52a0;`com.caochenlei.service.FeginGoodsService`\n\n&#xff08;2&#xff09;&#x5728;`oauth2-resource-order1002`&#x4fee;&#x6539;`com.caochenlei.controller.OrderController`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2150,2153"}},{"content":"<pre data-lines=\"2154,2207\"><code class=\"language-java\"><span class=\"hljs-meta\">@RestController</span>\n<span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr&apos;)&quot;)</span>\n<span class=\"hljs-meta\">@RequestMapping(&quot;/order&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OrderController</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> FeginGoodsService feginGoodsService;\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findAll&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findAll</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order findAll ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findPage&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findPage</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order findPage ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:find&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/findById&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">findById</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">feginGoodsServiceFindById</span> <span class=\"hljs-operator\">=</span> feginGoodsService.findById();\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order findById ... &quot;</span> + feginGoodsServiceFindById;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:add&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/add&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order add ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:delete&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/delete&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">delete</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order delete ...&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasAuthority(&apos;orderMgr:update&apos;)&quot;)</span>\n    <span class=\"hljs-meta\">@RequestMapping(&quot;/update&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">update</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;order update ...&quot;</span>;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2154,2207"}},{"content":"<pre data-lines=\"2208,2209\"><code>&#xff08;3&#xff09;&#x91cd;&#x542f;`oauth2-resource-order1002`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2208,2209"}}],"payload":{"tag":"h2","lines":"2147,2149"}},{"content":"8.3&#x3001;&#x8ba2;&#x5355;&#x8c03;&#x7528;&#x5546;&#x54c1;&#x95ee;&#x9898;","children":[{"content":"<pre data-lines=\"2213,2214\"><code>&#x6211;&#x7528;&#x81ea;&#x5b9a;&#x4e49;&#x5355;&#x70b9;&#x767b;&#x5f55;&#x7684;&#x65b9;&#x5f0f;&#x8fdb;&#x884c;&#x767b;&#x5f55;&#xff0c;&#x8fd9;&#x91cc;&#x4f7f;&#x7528;`zhangsan`&#x6765;&#x8bbf;&#x95ee;&#x67e5;&#x627e;&#x8ba2;&#x5355;&#x670d;&#x52a1;&#xff0c;&#x8ba2;&#x5355;&#x670d;&#x52a1;&#x91cc;&#x8fb9;&#x4f1a;&#x6709;&#x5f88;&#x591a;&#x5546;&#x54c1;&#xff0c;&#x6240;&#x4ee5;&#xff0c;&#x67e5;&#x627e;&#x8ba2;&#x5355;&#x670d;&#x52a1;&#x53c8;&#x8c03;&#x7528;&#x4e86;&#x6839;&#x636e;&#x4e3b;&#x952e;&#x67e5;&#x627e;&#x5546;&#x54c1;&#x670d;&#x52a1;&#xff0c;&#x800c;&#x4e14;&#xff0c;&#x5f20;&#x4e09;&#x62e5;&#x6709;&#x5bf9;&#x8ba2;&#x5355;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x548c;&#x5546;&#x54c1;&#x6240;&#x6709;&#x65b9;&#x6cd5;&#x8bbf;&#x95ee;&#x7684;&#x6743;&#x9650;&#xff0c;&#x4f46;&#x662f;&#x5728;&#x5b9e;&#x9645;&#x8c03;&#x7528;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x5c31;&#x4f1a;&#x62a5;&#x51fa;&#x9519;&#x8bef;&#xff0c;&#x5982;&#x4e0b;&#x56fe;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2213,2214"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/002cf530f1b13c206fc364a30cffbcb1.png\" alt>","children":[],"payload":{"tag":"img","lines":"2215,2216"}},{"content":"<pre data-lines=\"2217,2218\"><code>&#x9020;&#x6210;&#x4e0a;&#x8ff0;&#x95ee;&#x9898;&#x7684;&#x6839;&#x672c;&#x539f;&#x56e0;&#x5c31;&#x662f;&#xff0c;&#x8d44;&#x6e90;&#x670d;&#x52a1;&#x5668;&#x5728;&#x8bf7;&#x6c42;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9700;&#x8981;&#x643a;&#x5e26;token&#xff0c;&#x6765;&#x9a8c;&#x8bc1;&#x8fd9;&#x6b21;&#x8bf7;&#x6c42;&#x662f;&#x4e0d;&#x662f;&#x5408;&#x6cd5;&#xff0c;&#x5f88;&#x663e;&#x7136;&#xff0c;&#x6211;&#x4eec;&#x76f4;&#x63a5;&#x8c03;&#x7528;&#x80af;&#x5b9a;&#x4f1a;&#x62a5;&#x9519;&#xff0c;&#x6211;&#x4eec;&#x5e76;&#x6ca1;&#x6709;&#x643a;&#x5e26;token&#xff0c;&#x8981;&#x89e3;&#x51b3;&#x4e5f;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x5728;&#x6bcf;&#x4e00;&#x6b21;&#x8bf7;&#x6c42;&#x4e4b;&#x524d;&#x90fd;&#x643a;&#x5e26;&#x4e0a;token&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2217,2218"}}],"payload":{"tag":"h2","lines":"2210,2212"}},{"content":"8.4&#x3001;&#x89e3;&#x51b3;&#x670d;&#x52a1;&#x8c03;&#x7528;&#x95ee;&#x9898;","children":[{"content":"<pre data-lines=\"2222,2225\"><code>&#x5728;Feign&#x6240;&#x6709;&#x8bf7;&#x6c42;&#x4e4b;&#x524d;&#xff0c;&#x4f7f;&#x7528;&#x62e6;&#x622a;&#x5668;&#x8fdb;&#x884c;&#x62e6;&#x622a;&#xff0c;&#x5c06;token&#x5934;&#x5b57;&#x6bb5;&#x8ffd;&#x52a0;&#x5230;&#x5934;&#x4e0a;&#x5c31;&#x884c;&#x4e86;&#x3002;\n\ncom.caochenlei.interceptor.FeignInterceptor\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2222,2225"}},{"content":"<pre data-lines=\"2226,2257\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FeignInterceptor</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">RequestInterceptor</span> {\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">apply</span><span class=\"hljs-params\">(RequestTemplate requestTemplate)</span> {\n        <span class=\"hljs-keyword\">try</span> {\n            \n            <span class=\"hljs-type\">ServletRequestAttributes</span> <span class=\"hljs-variable\">attributes</span> <span class=\"hljs-operator\">=</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n            <span class=\"hljs-keyword\">if</span> (attributes != <span class=\"hljs-literal\">null</span>) {\n                \n                <span class=\"hljs-type\">HttpServletRequest</span> <span class=\"hljs-variable\">request</span> <span class=\"hljs-operator\">=</span> attributes.getRequest();\n                \n                Enumeration&lt;String&gt; headerNames = request.getHeaderNames();\n                <span class=\"hljs-keyword\">if</span> (headerNames != <span class=\"hljs-literal\">null</span>) {\n                    <span class=\"hljs-keyword\">while</span> (headerNames.hasMoreElements()) {\n                        \n                        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">name</span> <span class=\"hljs-operator\">=</span> headerNames.nextElement();\n                        \n                        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">values</span> <span class=\"hljs-operator\">=</span> request.getHeader(name);\n                        \n                        requestTemplate.header(name, values);\n                    }\n                }\n            }\n        } <span class=\"hljs-keyword\">catch</span> (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2226,2257"}},{"content":"<pre data-lines=\"2258,2259\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;`oauth2-resource-order1002`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2258,2259"}}],"payload":{"tag":"h2","lines":"2219,2221"}},{"content":"8.5&#x3001;&#x6f14;&#x793a;&#x6700;&#x7ec8;&#x89e3;&#x51b3;&#x6548;&#x679c;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a3e2d584673148af03ca8f211db1b52d.png\" alt>","children":[],"payload":{"tag":"img","lines":"2263,2264"}}],"payload":{"tag":"h2","lines":"2260,2262"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
