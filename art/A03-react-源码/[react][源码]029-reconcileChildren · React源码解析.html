<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"reconcileChild","children":[{"content":"<pre data-lines=\"2,5\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x6700;&#x7ec8;&#x8c03;&#x7528;&#x7684;&#x662f;`reconcileChildFibers`\n\n`mountChildFibers`&#x548c;`reconcileChildFibers`&#x65b9;&#x6cd5;&#x662f;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x552f;&#x4e00;&#x7684;&#x533a;&#x522b;&#x662f;&#x751f;&#x6210;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#x7684;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x4e0d;&#x540c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2,5"}},{"content":"<pre data-lines=\"6,11\"><code data-lines=\"6,11\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-type\">const</span> reconcileChildFibers = <span class=\"hljs-built_in\">ChildReconciler</span>(<span class=\"hljs-literal\">true</span>)\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-type\">const</span> mountChildFibers = <span class=\"hljs-built_in\">ChildReconciler</span>(<span class=\"hljs-literal\">false</span>)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,11"}},{"content":"<pre data-lines=\"12,13\"><code>&#x8fd9;&#x4e2a;&#x53c2;&#x6570;&#x53eb;`shouldTrackSideEffects`&#xff0c;&#x4ed6;&#x7684;&#x4f5c;&#x7528;&#x662f;&#x5224;&#x65ad;&#x662f;&#x5426;&#x8981;&#x589e;&#x52a0;&#x4e00;&#x4e9b;`effectTag`&#xff0c;&#x4e3b;&#x8981;&#x662f;&#x7528;&#x6765;&#x4f18;&#x5316;&#x521d;&#x6b21;&#x6e32;&#x67d3;&#x7684;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"12,13"}},{"content":"<pre data-lines=\"14,20\"><code data-lines=\"14,20\"><span class=\"hljs-keyword\">if</span> (shouldTrackSideEffects <span class=\"hljs-variable\">&amp;&amp;</span> newFiber.alternate === <span class=\"hljs-keyword\">null</span>) {\n  newFiber.effectTag = Placement\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"14,20"}},{"content":"<pre data-lines=\"21,56\"><code data-lines=\"21,56\">\nfunction reconcileChildren(current, workInProgress, nextChildren) {\n  reconcileChildrenAtExpirationTime(\n<span class=\"hljs-built_in\">    current,</span>\n<span class=\"hljs-built_in\">    workInProgress,</span>\n<span class=\"hljs-built_in\">    nextChildren,</span>\n    workInProgress.expirationTime,\n  )\n}\n\nfunction reconcileChildrenAtExpirationTime(\n<span class=\"hljs-built_in\">  current,</span>\n<span class=\"hljs-built_in\">  workInProgress,</span>\n<span class=\"hljs-built_in\">  nextChildren,</span>\n<span class=\"hljs-built_in\">  renderExpirationTime,</span>\n) {\n  if (current === null) {\n    workInProgress.child = mountChildFibers(\n<span class=\"hljs-built_in\">      workInProgress,</span>\n<span class=\"hljs-built_in\">      null,</span>\n<span class=\"hljs-built_in\">      nextChildren,</span>\n<span class=\"hljs-built_in\">      renderExpirationTime,</span>\n    )\n  } else {\n    workInProgress.child = reconcileChildFibers(\n<span class=\"hljs-built_in\">      workInProgress,</span>\n      current.child,\n<span class=\"hljs-built_in\">      nextChildren,</span>\n<span class=\"hljs-built_in\">      renderExpirationTime,</span>\n    )\n  }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"21,56"}},{"content":"<pre data-lines=\"57,152\"><code data-lines=\"57,152\"><span class=\"hljs-function\">function <span class=\"hljs-title\">reconcileChildFibers</span>(<span class=\"hljs-params\">\n  returnFiber: Fiber,\n  currentFirstChild: Fiber | <span class=\"hljs-literal\">null</span>,\n  newChild: any,\n  expirationTime: ExpirationTime,\n</span>): Fiber | <span class=\"hljs-literal\">null</span></span> {\n  <span class=\"hljs-keyword\">const</span> isUnkeyedTopLevelFragment =\n    <span class=\"hljs-keyword\">typeof</span> newChild === <span class=\"hljs-string\">&apos;object&apos;</span> &amp;&amp;\n    newChild !== <span class=\"hljs-literal\">null</span> &amp;&amp;\n    newChild.type === REACT_FRAGMENT_TYPE &amp;&amp;\n    newChild.key === <span class=\"hljs-function\"><span class=\"hljs-literal\">null</span>\n  <span class=\"hljs-title\">if</span> (<span class=\"hljs-params\">isUnkeyedTopLevelFragment</span>)</span> {\n    newChild = newChild.props.children\n  }\n\n  \n  <span class=\"hljs-keyword\">const</span> isObject = <span class=\"hljs-keyword\">typeof</span> newChild === <span class=\"hljs-string\">&apos;object&apos;</span> &amp;&amp; newChild !== <span class=\"hljs-function\"><span class=\"hljs-literal\">null</span>\n\n  <span class=\"hljs-title\">if</span> (<span class=\"hljs-params\">isObject</span>)</span> {\n    <span class=\"hljs-keyword\">switch</span> (newChild.&#x24;&#x24;<span class=\"hljs-keyword\">typeof</span>) {\n      <span class=\"hljs-keyword\">case</span> REACT_ELEMENT_TYPE:\n        <span class=\"hljs-keyword\">return</span> placeSingleChild(\n          reconcileSingleElement(\n            returnFiber,\n            currentFirstChild,\n            newChild,\n            expirationTime,\n          ),\n        )\n      <span class=\"hljs-keyword\">case</span> REACT_PORTAL_TYPE:\n        <span class=\"hljs-keyword\">return</span> placeSingleChild(\n          reconcileSinglePortal(\n            returnFiber,\n            currentFirstChild,\n            newChild,\n            expirationTime,\n          ),\n        )\n    }\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> newChild === <span class=\"hljs-string\">&apos;string&apos;</span> || <span class=\"hljs-keyword\">typeof</span> newChild === <span class=\"hljs-string\">&apos;number&apos;</span>) {\n    <span class=\"hljs-keyword\">return</span> placeSingleChild(\n      reconcileSingleTextNode(\n        returnFiber,\n        currentFirstChild,\n        <span class=\"hljs-string\">&apos;&apos;</span> + newChild,\n        expirationTime,\n      ),\n    )\n  }\n\n  <span class=\"hljs-keyword\">if</span> (isArray(newChild)) {\n    <span class=\"hljs-keyword\">return</span> reconcileChildrenArray(\n      returnFiber,\n      currentFirstChild,\n      newChild,\n      expirationTime,\n    )\n  }\n\n  <span class=\"hljs-keyword\">if</span> (getIteratorFn(newChild)) {\n    <span class=\"hljs-keyword\">return</span> reconcileChildrenIterator(\n      returnFiber,\n      currentFirstChild,\n      newChild,\n      expirationTime,\n    )\n  }\n\n  <span class=\"hljs-keyword\">if</span> (isObject) {\n    throwOnInvalidObjectType(returnFiber, newChild)\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> newChild === <span class=\"hljs-string\">&apos;undefined&apos;</span> &amp;&amp; !isUnkeyedTopLevelFragment) {\n    <span class=\"hljs-keyword\">switch</span> (returnFiber.tag) {\n      <span class=\"hljs-keyword\">case</span> ClassComponent:\n      <span class=\"hljs-keyword\">case</span> FunctionComponent: {\n        <span class=\"hljs-keyword\">const</span> Component = returnFiber.<span class=\"hljs-function\">type\n        <span class=\"hljs-title\">invariant</span>(<span class=\"hljs-params\">\n          <span class=\"hljs-literal\">false</span>,\n          <span class=\"hljs-string\">&apos;%s(...): Nothing was returned from render. This usually means a &apos;</span> +\n            <span class=\"hljs-string\">&apos;return statement is missing. Or, to render nothing, &apos;</span> +\n            <span class=\"hljs-string\">&apos;return null.&apos;</span>,\n          Component.displayName || Component.name || <span class=\"hljs-string\">&apos;Component&apos;</span>,\n        </span>)\n      }\n    }\n  }\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title\">deleteRemainingChildren</span>(<span class=\"hljs-params\">returnFiber, currentFirstChild</span>)\n}\n\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"57,152"}},{"content":"<pre data-lines=\"153,154\"><code>&#x5224;&#x65ad;&#x662f;&#x5426;&#x662f;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#xff0c;&#x5982;&#x679c;&#x662f;&#x7684;&#x8bdd;&#x589e;&#x52a0;`Placement`&#x526f;&#x4f5c;&#x7528;&#xff0c;&#x540e;&#x671f;&#x9700;&#x8981;&#x6302;&#x8f7d; DOM\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"153,154"}},{"content":"<pre data-lines=\"155,164\"><code data-lines=\"155,164\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">placeSingleChild</span><span class=\"hljs-params\">(newFiber: Fiber)</span>: Fiber {\n  <span class=\"hljs-keyword\">if</span> (shouldTrackSideEffects &amp;&amp; newFiber.alternate === <span class=\"hljs-literal\">null</span>) {\n    newFiber.effectTag = Placement\n  }\n  <span class=\"hljs-keyword\">return</span> newFiber\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"155,164"}},{"content":"<img src=\"https://static.coursebetter.com/202112/Jokcy%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81.png\" alt>","children":[],"payload":{"tag":"img","lines":"165,166"}},{"content":"<img src=\"https://static.coursebetter.com/202112/Jokcy%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81.png\" alt>","children":[],"payload":{"tag":"img","lines":"169,170"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
