<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"","children":[{"content":"Day05&#x56de;&#x987e;","children":[{"content":"Ajax&#x52a8;&#x6001;&#x52a0;&#x8f7d;&#x6570;&#x636e;&#x6293;&#x53d6;&#x6d41;&#x7a0b;","children":[{"content":"<pre data-lines=\"4,12\"><code class=\"language-python\">&#x3010;1&#x3011;F12&#x6253;&#x5f00;&#x63a7;&#x5236;&#x53f0;&#xff0c;&#x6267;&#x884c;&#x9875;&#x9762;&#x52a8;&#x4f5c;&#x6293;&#x53d6;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;\n\n&#x3010;2&#x3011;&#x6293;&#x53d6;json&#x6587;&#x4ef6;URL&#x5730;&#x5740;\n   2.1) &#x63a7;&#x5236;&#x53f0;&#x4e2d; XHR &#xff1a;&#x627e;&#x5230;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x7684;&#x6570;&#x636e;&#x5305;\n   2.2) GET&#x8bf7;&#x6c42;: Network -&gt; XHR -&gt; URL &#x548c; Query String Parameters(&#x67e5;&#x8be2;&#x53c2;&#x6570;)\n   2.3) POST&#x8bf7;&#x6c42;:Network -&gt; XHR -&gt; URL &#x548c; Form Data\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,12"}}],"payload":{"tag":"h3","lines":"2,3"}},{"content":"json&#x6a21;&#x5757;","children":[{"content":"<pre data-lines=\"15,26\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6293;&#x53d6;&#x7684;json&#x6570;&#x636e;&#x8f6c;&#x4e3a;python&#x6570;&#x636e;&#x7c7b;&#x578b;\n    <span class=\"hljs-number\">1.1</span>) html = json.loads(<span class=\"hljs-string\">&apos;[{},{},{}]&apos;</span>)\n    <span class=\"hljs-number\">1.2</span>) html = requests.get(url=url,headers=headers).json()\n    <span class=\"hljs-number\">1.3</span>) html = requests.post(url=url,data=data,headers=headers).json()\n    \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x6293;&#x53d6;&#x6570;&#x636e;&#x4fdd;&#x5b58;&#x5230;json&#x6587;&#x4ef6;\n    <span class=\"hljs-keyword\">import</span> json\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;xxx.json&apos;</span>,<span class=\"hljs-string\">&apos;w&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        json.dump([{},{},{}],f,ensure_ascii=<span class=\"hljs-literal\">False</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"15,26"}}],"payload":{"tag":"h3","lines":"13,14"}},{"content":"&#x6570;&#x636e;&#x6293;&#x53d6;&#x6700;&#x7ec8;&#x68b3;&#x7406;","children":[{"content":"<pre data-lines=\"29,52\"><code class=\"language-python\">&#x3010;1&#x3011;&#x54cd;&#x5e94;&#x5185;&#x5bb9;&#x4e2d;&#x5b58;&#x5728;\n   1.1) &#x786e;&#x8ba4;&#x6293;&#x53d6;&#x6570;&#x636e;&#x5728;&#x54cd;&#x5e94;&#x5185;&#x5bb9;&#x4e2d;&#x662f;&#x5426;&#x5b58;&#x5728;\n    \n   1.2) &#x5206;&#x6790;&#x9875;&#x9762;&#x7ed3;&#x6784;&#xff0c;&#x89c2;&#x5bdf;URL&#x5730;&#x5740;&#x89c4;&#x5f8b;\n        a) &#x5927;&#x4f53;&#x67e5;&#x770b;&#x54cd;&#x5e94;&#x5185;&#x5bb9;&#x7ed3;&#x6784;,&#x67e5;&#x770b;&#x662f;&#x5426;&#x6709;&#x66f4;&#x6539; -- (&#x767e;&#x5ea6;&#x89c6;&#x9891;&#x6848;&#x4f8b;)\n        b) &#x67e5;&#x770b;&#x9875;&#x9762;&#x8df3;&#x8f6c;&#x65f6;URL&#x5730;&#x5740;&#x53d8;&#x5316;,&#x67e5;&#x770b;&#x662f;&#x5426;&#x65b0;&#x8df3;&#x8f6c; -- (&#x6c11;&#x653f;&#x90e8;&#x6848;&#x4f8b;)\n        \n   1.3) &#x5f00;&#x59cb;&#x7801;&#x4ee3;&#x7801;&#x8fdb;&#x884c;&#x6570;&#x636e;&#x6293;&#x53d6;\n\n&#x3010;2&#x3011;&#x54cd;&#x5e94;&#x5185;&#x5bb9;&#x4e2d;&#x4e0d;&#x5b58;&#x5728;\n   2.1) &#x786e;&#x8ba4;&#x6293;&#x53d6;&#x6570;&#x636e;&#x5728;&#x54cd;&#x5e94;&#x5185;&#x5bb9;&#x4e2d;&#x662f;&#x5426;&#x5b58;&#x5728;\n    \n   2.2) F12&#x6293;&#x5305;,&#x5f00;&#x59cb;&#x5237;&#x65b0;&#x9875;&#x9762;&#x6216;&#x6267;&#x884c;&#x67d0;&#x4e9b;&#x884c;&#x4e3a;,&#x4e3b;&#x8981;&#x67e5;&#x770b;XHR&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x6570;&#x636e;&#x5305;\n        a) GET&#x8bf7;&#x6c42;: Request URL&#x3001;Request Headers&#x3001;Query String Paramters\n        b) POST&#x8bf7;&#x6c42;:Request URL&#x3001;Request Headers&#x3001;FormData\n            \n   2.3) &#x89c2;&#x5bdf;&#x67e5;&#x8be2;&#x53c2;&#x6570;&#x6216;&#x8005;Form&#x8868;&#x5355;&#x6570;&#x636e;&#x89c4;&#x5f8b;,&#x5982;&#x679c;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x8fdb;&#x4e00;&#x6b65;&#x6293;&#x5305;&#x5206;&#x6790;&#x5904;&#x7406;\n        a) &#x6bd4;&#x5982;&#x6709;&#x9053;&#x7ffb;&#x8bd1;&#x7684; salt+sign,&#x6293;&#x53d6;&#x5e76;&#x5206;&#x6790;JS&#x505a;&#x8fdb;&#x4e00;&#x6b65;&#x5904;&#x7406;\n        b) &#x6b64;&#x5904;&#x6ce8;&#x610f;&#x8bf7;&#x6c42;&#x5934;&#x4e2d;&#x7684;cookie&#x548c;referer&#x4ee5;&#x53ca;User-Agent\n        \n   2.4) &#x4f7f;&#x7528;res.json()&#x83b7;&#x53d6;&#x6570;&#x636e;,&#x5229;&#x7528;&#x5217;&#x8868;&#x6216;&#x8005;&#x5b57;&#x5178;&#x7684;&#x65b9;&#x6cd5;&#x83b7;&#x53d6;&#x6240;&#x9700;&#x6570;&#x636e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"29,52"}}],"payload":{"tag":"h3","lines":"27,28"}},{"content":"&#x591a;&#x7ebf;&#x7a0b;&#x722c;&#x866b;&#x601d;&#x8def;&#x68b3;&#x7406;","children":[{"content":"<pre data-lines=\"55,106\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6240;&#x7528;&#x5230;&#x7684;&#x6a21;&#x5757;\n    <span class=\"hljs-number\">1.1</span>) <span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread\n    <span class=\"hljs-number\">1.2</span>) <span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Lock\n    <span class=\"hljs-number\">1.3</span>) <span class=\"hljs-keyword\">from</span> queue <span class=\"hljs-keyword\">import</span> Queue\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x6574;&#x4f53;&#x601d;&#x8def;\n    <span class=\"hljs-number\">2.1</span>) &#x521b;&#x5efa;URL&#x961f;&#x5217;: q = Queue()\n    <span class=\"hljs-number\">2.2</span>) &#x4ea7;&#x751f;URL&#x5730;&#x5740;,&#x653e;&#x5165;&#x961f;&#x5217;: q.put(url)\n    <span class=\"hljs-number\">2.3</span>) &#x7ebf;&#x7a0b;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;: &#x4ece;&#x961f;&#x5217;&#x4e2d;&#x83b7;&#x53d6;&#x5730;&#x5740;,&#x5f00;&#x59cb;&#x6293;&#x53d6;: url = q.get()\n    <span class=\"hljs-number\">2.4</span>) &#x521b;&#x5efa;&#x591a;&#x7ebf;&#x7a0b;,&#x5e76;&#x8fd0;&#x884c;\n    \n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x4ee3;&#x7801;&#x7ed3;&#x6784;\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x521b;&#x5efa;URL&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.lock = Lock()\n        \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">url_in</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x751f;&#x6210;&#x5f85;&#x722c;&#x53d6;&#x7684;URL&#x5730;&#x5740;,&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">pass</span>\n    \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x7ebf;&#x7a0b;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;,&#x83b7;&#x53d6;&#x5730;&#x5740;,&#x8fdb;&#x884c;&#x6570;&#x636e;&#x6293;&#x53d6;&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.q.empty():\n                url = <span class=\"hljs-variable language_\">self</span>.q.get()\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-keyword\">break</span>\n                \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url_in()\n        t_list = []\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>):\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_html)\n            t_list.append(t)\n            t.start()\n            \n        <span class=\"hljs-keyword\">for</span> th <span class=\"hljs-keyword\">in</span> t_list:\n            th.join()\n            \n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x961f;&#x5217;&#x8981;&#x70b9;: q.get()&#x9632;&#x6b62;&#x963b;&#x585e;&#x65b9;&#x5f0f;\n    <span class=\"hljs-number\">4.1</span>) &#x65b9;&#x6cd5;<span class=\"hljs-number\">1</span>: q.get(block=<span class=\"hljs-literal\">False</span>)\n    <span class=\"hljs-number\">4.2</span>) &#x65b9;&#x6cd5;<span class=\"hljs-number\">2</span>: q.get(block=<span class=\"hljs-literal\">True</span>,timeout=<span class=\"hljs-number\">3</span>)\n    <span class=\"hljs-number\">4.3</span>) &#x65b9;&#x6cd5;<span class=\"hljs-number\">3</span>:\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> q.empty():\n           q.get()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,106"}}],"payload":{"tag":"h3","lines":"53,54"}}],"payload":{"tag":"h1","lines":"0,1"}},{"content":"Day06&#x7b14;&#x8bb0;","children":[{"content":"&#x5c0f;&#x7c73;&#x5e94;&#x7528;&#x5546;&#x5e97;&#x6293;&#x53d6;(&#x591a;&#x7ebf;&#x7a0b;)","children":[{"content":"&#x76ee;&#x6807;","children":[{"content":"<pre data-lines=\"113,120\"><code class=\"language-python\">&#x3010;1&#x3011;&#x7f51;&#x5740; &#xff1a;&#x767e;&#x5ea6;&#x641c; - &#x5c0f;&#x7c73;&#x5e94;&#x7528;&#x5546;&#x5e97;&#xff0c;&#x8fdb;&#x5165;&#x5b98;&#x7f51; http://app.mi.com/\n\n&#x3010;2&#x3011;&#x76ee;&#x6807; &#xff1a;&#x6293;&#x53d6;&#x804a;&#x5929;&#x793e;&#x4ea4;&#x5206;&#x7c7b;&#x4e0b;&#x7684;\n    2.1) &#x5e94;&#x7528;&#x540d;&#x79f0;\n    2.2) &#x5e94;&#x7528;&#x94fe;&#x63a5;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"113,120"}}],"payload":{"tag":"h3","lines":"111,112"}},{"content":"&#x5b9e;&#x73b0;&#x6b65;&#x9aa4;","children":[{"content":"<pre data-lines=\"123,144\"><code class=\"language-python\">&#x3010;1&#x3011;&#x786e;&#x8ba4;&#x662f;&#x5426;&#x4e3a;&#x52a8;&#x6001;&#x52a0;&#x8f7d;\n    1.1) &#x9875;&#x9762;&#x5c40;&#x90e8;&#x5237;&#x65b0;\n    1.2) &#x53f3;&#x952e;&#x67e5;&#x770b;&#x7f51;&#x9875;&#x6e90;&#x4ee3;&#x7801;,&#x641c;&#x7d22;&#x5173;&#x952e;&#x5b57;&#x672a;&#x641c;&#x5230;,&#x4e3a;&#x52a8;&#x6001;&#x52a0;&#x8f7d;&#xff0c;&#x9700;&#x8981;&#x6293;&#x53d6;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;&#x5206;&#x6790;\n\n&#x3010;2&#x3011; F12&#x6293;&#x53d6;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;\n    2.1) &#x6293;&#x53d6;&#x8fd4;&#x56de;json&#x6570;&#x636e;&#x7684;URL&#x5730;&#x5740;&#xff08;Headers&#x4e2d;&#x7684;Request URL&#xff09;\n         http://app.mi.com/categotyAllListApi?page={}&amp;categoryId=2&amp;pageSize=30\n            \n    2.2) &#x67e5;&#x770b;&#x5e76;&#x5206;&#x6790;&#x67e5;&#x8be2;&#x53c2;&#x6570;&#xff08;headers&#x4e2d;&#x7684;Query String Parameters&#xff09;\n         page: 1        &#x53ea;&#x6709;page&#x5728;&#x53d8;&#xff0c;0 1 2 3 ... ... \n         categoryId: 2\n         pageSize: 30\n\n&#x3010;3&#x3011;&#x5c06;&#x6293;&#x53d6;&#x6570;&#x636e;&#x4fdd;&#x5b58;&#x5230;csv&#x6587;&#x4ef6; - &#x6ce8;&#x610f;&#x7ebf;&#x7a0b;&#x9501;&#x95ee;&#x9898;\n    from threading import Lock\n    lock = Lock()\n    # &#x52a0;&#x9501; + &#x91ca;&#x653e;&#x9501;\n    lock.acquire()\n    lock.release()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"123,144"}}],"payload":{"tag":"h3","lines":"121,122"}},{"content":"&#x4ee3;&#x7801;&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"147,232\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">from</span> fake_useragent <span class=\"hljs-keyword\">import</span> UserAgent\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread,Lock\n<span class=\"hljs-keyword\">from</span> queue <span class=\"hljs-keyword\">import</span> Queue\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">import</span> random\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">XiaomiSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url = <span class=\"hljs-string\">&apos;http://app.mi.com/categotyAllListApi?page={}&amp;categoryId=2&amp;pageSize=30&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span>: UserAgent().random}\n        <span class=\"hljs-variable language_\">self</span>.q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.lock = Lock()\n        <span class=\"hljs-comment\"># &#x8ba1;&#x6570;</span>\n        <span class=\"hljs-variable language_\">self</span>.i = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-comment\"># &#x5b58;&#x653e;&#x6240;&#x6709;&#x5b57;&#x5178;&#x7684;&#x5927;&#x5217;&#x8868;</span>\n        <span class=\"hljs-variable language_\">self</span>.all_app_list = []\n\n    <span class=\"hljs-comment\"># URL&#x5165;&#x961f;&#x5217;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">url_in</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">for</span> page <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">67</span>):\n            url = <span class=\"hljs-variable language_\">self</span>.url.<span class=\"hljs-built_in\">format</span>(page)\n            <span class=\"hljs-variable language_\">self</span>.q.put(url)\n\n    <span class=\"hljs-comment\"># &#x7ebf;&#x7a0b;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-comment\"># &#x52a0;&#x9501; - &#x9632;&#x6b62;&#x51fa;&#x73b0;&#x6b7b;&#x9501;(self.q&#x4e2d;&#x5269;&#x4f59;1&#x4e2a;&#x5730;&#x5740;,&#x4f46;&#x662f;&#x88ab;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x5224;&#x65ad;&#x7684;&#x60c5;&#x51b5;)</span>\n            <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.q.empty():\n                url = <span class=\"hljs-variable language_\">self</span>.q.get()\n                <span class=\"hljs-comment\"># &#x83b7;&#x53d6;&#x5730;&#x5740;&#x6210;&#x529f;&#x540e;&#x9a6c;&#x4e0a;&#x91ca;&#x653e;&#x9501;,&#x7ed9;&#x5176;&#x4ed6;&#x7ebf;&#x7a0b;&#x673a;&#x4f1a;,&#x5b89;&#x5168;&#x524d;&#x63d0;&#x4e0b;&#x63d0;&#x5347;&#x6548;&#x7387;</span>\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-comment\"># &#x8bf7;&#x6c42; + &#x89e3;&#x6790;  html: {&apos;count&apos;:2000,&apos;data&apos;:[{},{},{}]}</span>\n                <span class=\"hljs-keyword\">try</span>:\n                    res = requests.get(url=url, headers=<span class=\"hljs-variable language_\">self</span>.headers)\n                    html = json.loads(res.text)\n                    <span class=\"hljs-keyword\">for</span> one_app <span class=\"hljs-keyword\">in</span> html[<span class=\"hljs-string\">&apos;data&apos;</span>]:\n                        item = {}\n                        item[<span class=\"hljs-string\">&apos;app_name&apos;</span>] = one_app[<span class=\"hljs-string\">&apos;displayName&apos;</span>]\n                        item[<span class=\"hljs-string\">&apos;app_type&apos;</span>] = one_app[<span class=\"hljs-string\">&apos;level1CategoryName&apos;</span>]\n                        item[<span class=\"hljs-string\">&apos;app_link&apos;</span>] = one_app[<span class=\"hljs-string\">&apos;packageName&apos;</span>]\n                        <span class=\"hljs-built_in\">print</span>(item)\n\n                        <span class=\"hljs-comment\"># &#x52a0;&#x9501;+&#x91ca;&#x653e;&#x9501;</span>\n                        <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n                        <span class=\"hljs-variable language_\">self</span>.all_app_list.append(item)\n                        <span class=\"hljs-variable language_\">self</span>.i += <span class=\"hljs-number\">1</span>\n                        <span class=\"hljs-variable language_\">self</span>.lock.release()\n                    <span class=\"hljs-comment\"># &#x7b80;&#x5355;&#x63a7;&#x5236;&#x4e00;&#x4e0b;&#x6570;&#x636e;&#x6293;&#x53d6;&#x9891;&#x7387;,&#x56e0;&#x4e3a;&#x6211;&#x4eec;&#x6ca1;&#x6709;&#x4ee3;&#x7406;IP,&#x5bb9;&#x6613;&#x88ab;&#x5c01;&#x6389;IP</span>\n                    time.sleep(random.uniform(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1</span>))\n                <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n                    <span class=\"hljs-built_in\">print</span>(e)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-comment\"># &#x5982;&#x679c;&#x961f;&#x5217;&#x4e3a;&#x7a7a;&#x4e86;,&#x4e0a;&#x9762;&#x5df2;&#x7ecf;&#x4e0a;&#x9501;,&#x6240;&#x4ee5;&#x6b64;&#x5904;&#x91ca;&#x653e;&#x9501;</span>\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-comment\"># &#x5165;&#x53e3;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># 1.&#x5148;&#x8ba9;URL&#x5730;&#x5740;&#x5165;&#x961f;&#x5217;</span>\n        <span class=\"hljs-variable language_\">self</span>.url_in()\n        <span class=\"hljs-comment\"># 2.&#x591a;&#x7ebf;&#x7a0b;,&#x5f00;&#x59cb;&#x6267;&#x884c;</span>\n        t_list = []\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">2</span>):\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_html)\n            t_list.append(t)\n            t.start()\n\n        <span class=\"hljs-keyword\">for</span> j <span class=\"hljs-keyword\">in</span> t_list:\n            j.join()\n\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x91cf;:&apos;</span>, <span class=\"hljs-variable language_\">self</span>.i)\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;xiaomi.json&apos;</span>,<span class=\"hljs-string\">&apos;w&apos;</span>,encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            json.dump(<span class=\"hljs-variable language_\">self</span>.all_app_list,f,ensure_ascii=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    start_time = time.time()\n    spider = XiaomiSpider()\n    spider.run()\n    end_time = time.time()\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6267;&#x884c;&#x65f6;&#x95f4;:%.2f&apos;</span> % (end_time - start_time))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"147,232"}}],"payload":{"tag":"h3","lines":"145,146"}}],"payload":{"tag":"h2","lines":"109,110"}},{"content":"&#x817e;&#x8baf;&#x62db;&#x8058;&#x6570;&#x636e;&#x6293;&#x53d6;(&#x591a;&#x7ebf;&#x7a0b;)","children":[{"content":"&#x786e;&#x5b9a;URL&#x5730;&#x5740;&#x53ca;&#x76ee;&#x6807;","children":[{"content":"<pre data-lines=\"237,247\"><code class=\"language-python\">&#x3010;1&#x3011;URL: &#x767e;&#x5ea6;&#x641c;&#x7d22;&#x817e;&#x8baf;&#x62db;&#x8058; - &#x67e5;&#x770b;&#x5de5;&#x4f5c;&#x5c97;&#x4f4d;\n&#x3010;2&#x3011;&#x76ee;&#x6807;:&#x6293;&#x53d6;&#x804c;&#x4f4d;&#x7684;&#x5982;&#x4e0b;&#x4fe1;&#x606f;\n       a&gt; &#x804c;&#x4f4d;&#x540d;&#x79f0;\n       b&gt; &#x804c;&#x4f4d;&#x5730;&#x5740;\n       c&gt; &#x804c;&#x4f4d;&#x7c7b;&#x522b;&#xff08;&#x6280;&#x672f;&#x7c7b;&#x3001;&#x9500;&#x552e;&#x7c7b;...&#xff09;\n       d&gt; &#x53d1;&#x5e03;&#x65f6;&#x95f4;\n       e&gt; &#x5de5;&#x4f5c;&#x804c;&#x8d23;\n       f&gt; &#x5de5;&#x4f5c;&#x8981;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"237,247"}}],"payload":{"tag":"h3","lines":"235,236"}},{"content":"&#x8981;&#x6c42;&#x4e0e;&#x5206;&#x6790;","children":[{"content":"<pre data-lines=\"250,256\"><code class=\"language-python\">&#x3010;1&#x3011;&#x901a;&#x8fc7;&#x67e5;&#x770b;&#x7f51;&#x9875;&#x6e90;&#x7801;,&#x5f97;&#x77e5;&#x6240;&#x9700;&#x6570;&#x636e;&#x5747;&#x4e3a;&#x52a8;&#x6001;&#x52a0;&#x8f7d;\n&#x3010;2&#x3011;&#x901a;&#x8fc7;F12&#x6293;&#x53d6;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;,&#x8fdb;&#x884c;&#x5206;&#x6790;\n&#x3010;3&#x3011;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x6293;&#x53d6;&#x6570;&#x636e;: postid\n&#x3010;4&#x3011;&#x4e8c;&#x7ea7;&#x9875;&#x9762;&#x6293;&#x53d6;&#x6570;&#x636e;: &#x540d;&#x79f0;+&#x5730;&#x5740;+&#x7c7b;&#x522b;+&#x65f6;&#x95f4;+&#x804c;&#x8d23;+&#x8981;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"250,256"}}],"payload":{"tag":"h3","lines":"248,249"}},{"content":"&#x4e00;&#x7ea7;&#x9875;&#x9762;json&#x5730;&#x5740;","children":[{"content":"<pre data-lines=\"259,263\"><code class=\"language-python\">&quot;&quot;&quot;index&#x5728;&#x53d8;,timestamp&#x672a;&#x68c0;&#x67e5;&quot;&quot;&quot;\nhttps://careers.tencent.com/tencentcareer/api/post/Query?timestamp=1563912271089&amp;countryId=&amp;cityId=&amp;bgIds=&amp;productId=&amp;categoryId=&amp;parentCategoryId=&amp;attrId=&amp;keyword={}&amp;pageIndex={}&amp;pageSize=10&amp;language=zh-cn&amp;area=cn\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"259,263"}}],"payload":{"tag":"h3","lines":"257,258"}},{"content":"&#x4e8c;&#x7ea7;&#x9875;&#x9762;&#x5730;&#x5740;","children":[{"content":"<pre data-lines=\"266,270\"><code class=\"language-python\">&quot;&quot;&quot;postId&#x5728;&#x53d8;,&#x5728;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x4e2d;&#x53ef;&#x62ff;&#x5230;&quot;&quot;&quot;\nhttps://careers.tencent.com/tencentcareer/api/post/ByPostId?timestamp=1563912374645&amp;postId={}&amp;language=zh-cn\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"266,270"}}],"payload":{"tag":"h3","lines":"264,265"}},{"content":"&#x591a;&#x7ebf;&#x7a0b;&#x7f16;&#x5199;&#x601d;&#x8def;&#x63d0;&#x793a;","children":[{"content":"<pre data-lines=\"273,278\"><code class=\"language-python\">&#x3010;&#x601d;&#x8003;&#x3011; &#x4e24;&#x7ea7;&#x9875;&#x9762;&#x662f;&#x5426;&#x9700;&#x8981;&#x6307;&#x5b9a;&#x4e24;&#x4e2a;&#x961f;&#x5217;&#x5206;&#x522b;&#x5b58;&#x653e;&#xff1f;\n        &#x63d0;&#x793a;1: &#x5efa;&#x7acb;2&#x4e2a;&#x961f;&#x5217;,&#x5206;&#x522b;&#x5b58;&#x653e;&#x4e0d;&#x540c;&#x7ea7;&#x7684;URL&#x5730;&#x5740;\n        &#x63d0;&#x793a;2: &#x4ece;&#x5bf9;&#x5217;&#x4e2d;get&#x5730;&#x5740;,&#x6700;&#x597d;&#x4f7f;&#x7528;timeout&#x53c2;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"273,278"}}],"payload":{"tag":"h3","lines":"271,272"}},{"content":"&#x4ee3;&#x7801;&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"281,404\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">from</span> fake_useragent <span class=\"hljs-keyword\">import</span> UserAgent\n<span class=\"hljs-keyword\">from</span> queue <span class=\"hljs-keyword\">import</span> Queue\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread,Lock\n<span class=\"hljs-keyword\">from</span> urllib <span class=\"hljs-keyword\">import</span> parse\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentSpider</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.one_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/Query?timestamp=1563912271089&amp;countryId=&amp;cityId=&amp;bgIds=&amp;productId=&amp;categoryId=&amp;parentCategoryId=&amp;attrId=&amp;keyword={}&amp;pageIndex={}&amp;pageSize=10&amp;language=zh-cn&amp;area=cn&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.two_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/ByPostId?timestamp=1563912374645&amp;postId={}&amp;language=zh-cn&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.one_q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.two_q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.lock1 = Lock()\n        <span class=\"hljs-variable language_\">self</span>.lock2 = Lock()\n        <span class=\"hljs-variable language_\">self</span>.i = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-comment\"># &#x5b58;&#x653e;&#x6240;&#x6709;&#x6570;&#x636e;&#x7684;&#x5927;&#x5217;&#x8868;</span>\n        <span class=\"hljs-variable language_\">self</span>.item_list = []\n\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_html</span>(<span class=\"hljs-params\">self,url</span>):\n        headers = { <span class=\"hljs-string\">&apos;User-Agent&apos;</span>:UserAgent().random }\n        html = requests.get(url=url,headers=headers).text\n        <span class=\"hljs-keyword\">return</span> html\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">url_in</span>(<span class=\"hljs-params\">self</span>):\n        keyword = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&apos;&#x8bf7;&#x8f93;&#x5165;&#x804c;&#x4f4d;&#x7c7b;&#x522b;:&apos;</span>)\n        keyword = parse.quote(keyword)\n        total = <span class=\"hljs-variable language_\">self</span>.get_total(keyword)\n        <span class=\"hljs-keyword\">for</span> page <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>, total+<span class=\"hljs-number\">1</span>):\n            one_url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(keyword,page)\n            <span class=\"hljs-variable language_\">self</span>.one_q.put(one_url)\n\n    <span class=\"hljs-comment\"># &#x83b7;&#x53d6;&#x603b;&#x9875;&#x6570;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_total</span>(<span class=\"hljs-params\">self,keyword</span>):\n        url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(keyword,<span class=\"hljs-number\">1</span>)\n        html = requests.get(url=url,headers={<span class=\"hljs-string\">&apos;User-Agent&apos;</span>:UserAgent().random}).json()\n        n = <span class=\"hljs-built_in\">int</span>(html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Count&apos;</span>])\n        total = n//<span class=\"hljs-number\">10</span> <span class=\"hljs-keyword\">if</span> n%<span class=\"hljs-number\">10</span>==<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">else</span> n//<span class=\"hljs-number\">10</span>+<span class=\"hljs-number\">1</span>\n\n        <span class=\"hljs-keyword\">return</span> total\n\n    <span class=\"hljs-comment\"># &#x7ebf;&#x7a0b;1&#x4e8b;&#x4ef6;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_one_page</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-variable language_\">self</span>.lock1.acquire()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.one_q.empty():\n                one_url = <span class=\"hljs-variable language_\">self</span>.one_q.get()\n                <span class=\"hljs-variable language_\">self</span>.lock1.release()\n                html = json.loads(<span class=\"hljs-variable language_\">self</span>.get_html(one_url))\n                <span class=\"hljs-keyword\">for</span> job <span class=\"hljs-keyword\">in</span> html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Posts&apos;</span>]:\n                    post_id = job[<span class=\"hljs-string\">&apos;PostId&apos;</span>]\n                    two_url = <span class=\"hljs-variable language_\">self</span>.two_url.<span class=\"hljs-built_in\">format</span>(post_id)\n                    <span class=\"hljs-variable language_\">self</span>.lock1.acquire()\n                    <span class=\"hljs-variable language_\">self</span>.two_q.put(two_url)\n                    <span class=\"hljs-variable language_\">self</span>.lock1.release()\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-variable language_\">self</span>.lock1.release()\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-comment\"># &#x7ebf;&#x7a0b;2&#x4e8b;&#x4ef6;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_two_page</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-keyword\">try</span>:\n                <span class=\"hljs-variable language_\">self</span>.lock2.acquire()\n                two_url = <span class=\"hljs-variable language_\">self</span>.two_q.get(block=<span class=\"hljs-literal\">True</span>,timeout=<span class=\"hljs-number\">3</span>)\n                <span class=\"hljs-variable language_\">self</span>.lock2.release()\n                html = json.loads(<span class=\"hljs-variable language_\">self</span>.get_html(two_url))\n                <span class=\"hljs-comment\"># &#x540d;&#x79f0;+&#x5730;&#x5740;+&#x7c7b;&#x522b;+&#x65f6;&#x95f4;+&#x804c;&#x8d23;+&#x8981;&#x6c42;</span>\n                item = {}\n                item[<span class=\"hljs-string\">&apos;name&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;RecruitPostName&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;address&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LocationName&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;type&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;CategoryName&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;time&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LastUpdateTime&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;duty&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Responsibility&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;require&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Requirement&apos;</span>]\n\n                <span class=\"hljs-variable language_\">self</span>.item_list.append(item)\n\n                <span class=\"hljs-built_in\">print</span>(item)\n                <span class=\"hljs-variable language_\">self</span>.lock2.acquire()\n                <span class=\"hljs-variable language_\">self</span>.i += <span class=\"hljs-number\">1</span>\n                <span class=\"hljs-variable language_\">self</span>.lock2.release()\n            <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n                <span class=\"hljs-variable language_\">self</span>.lock2.release()\n                <span class=\"hljs-built_in\">print</span>(e,end=<span class=\"hljs-string\">&quot;&quot;</span>)\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url_in()\n        t1_list = []\n        t2_list = []\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">5</span>):\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_one_page)\n            t1_list.append(t)\n            t.start()\n\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">5</span>):\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_two_page)\n            t2_list.append(t)\n            t.start()\n\n        <span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> t1_list:\n            t.join()\n\n        <span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> t2_list:\n            t.join()\n\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x91cf;:&apos;</span>,<span class=\"hljs-variable language_\">self</span>.i)\n        <span class=\"hljs-comment\"># &#x5c06;&#x6570;&#x636e;&#x5199;&#x5165;&#x5230;json&#x6587;&#x4ef6;</span>\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;tencent.json&apos;</span>, <span class=\"hljs-string\">&apos;w&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            json.dump(<span class=\"hljs-variable language_\">self</span>.item_list, f, ensure_ascii=<span class=\"hljs-literal\">False</span>)\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    start_time = time.time()\n    spider = TencentSpider()\n    spider.run()\n    end_time = time.time()\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6267;&#x884c;&#x65f6;&#x95f4;:%.2f&apos;</span> % (end_time-start_time))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,404"}}],"payload":{"tag":"h3","lines":"279,280"}}],"payload":{"tag":"h2","lines":"233,234"}},{"content":"cookie&#x6a21;&#x62df;&#x767b;&#x5f55;","children":[{"content":"<pre data-lines=\"407,410\"><code class=\"language-python\">&#x3010;1&#x3011;&#x9002;&#x7528;&#x7f51;&#x7ad9;&#x53ca;&#x573a;&#x666f; : &#x6293;&#x53d6;&#x9700;&#x8981;&#x767b;&#x5f55;&#x624d;&#x80fd;&#x8bbf;&#x95ee;&#x7684;&#x9875;&#x9762;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"407,410"}}],"payload":{"tag":"h2","lines":"405,406"}},{"content":"&#x8c46;&#x74e3;&#x7f51;&#x767b;&#x5f55;&#x6848;&#x4f8b;","children":[{"content":"&#x65b9;&#x6cd5;&#x4e00; - &#x767b;&#x5f55;&#x7f51;&#x7ad9;&#x624b;&#x52a8;&#x6293;&#x53d6;Cookie","children":[{"content":"<pre data-lines=\"415,425\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x5148;&#x767b;&#x5f55;&#x6210;&#x529f;<span class=\"hljs-number\">1</span>&#x6b21;,&#x83b7;&#x53d6;&#x5230;&#x643a;&#x5e26;&#x767b;&#x5f55;&#x4fe1;&#x606f;&#x7684;Cookie\n    &#x767b;&#x5f55;&#x6210;&#x529f; - &#x6211;&#x7684;&#x8c46;&#x74e3; - F12&#x6293;&#x5305; - &#x5237;&#x65b0;&#x4e3b;&#x9875; - &#x627e;&#x5230;&#x4e3b;&#x9875;&#x7684;&#x5305;(&#x4e00;&#x822c;&#x4e3a;&#x7b2c;<span class=\"hljs-number\">1</span>&#x4e2a;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;)\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;headers&#x4e2d;&#x643a;&#x5e26;&#x7740;Cookie&#x53d1;&#x8bf7;&#x6c42;\n    headers = {\n        <span class=\"hljs-string\">&apos;Cookie&apos;</span>:<span class=\"hljs-string\">&apos;&apos;</span>,\n        <span class=\"hljs-string\">&apos;User-Agent&apos;</span>:<span class=\"hljs-string\">&apos;&apos;</span>\n    }\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"415,425"}},{"content":"<pre data-lines=\"426,445\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;&#x65b9;&#x6cd5;&#x4e00;&#x4ee3;&#x7801;&#x5b9e;&#x73b0;&quot;&quot;&quot;</span>\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x5c06;url&#x6539;&#x4e3a; &#x4e2a;&#x4eba;&#x4e3b;&#x9875;&#x7684;URL&#x5730;&#x5740;</span>\n<span class=\"hljs-comment\"># 2&#x3001;&#x5c06;Cookie&#x7684;&#x503c;&#x6539;&#x4e3a; &#x767b;&#x5f55;&#x6210;&#x529f;&#x7684;Cookie&#x503c;</span>\n<span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n    url = <span class=\"hljs-string\">&apos;&#x4e2a;&#x4eba;&#x4e3b;&#x9875;&#x7684;URL&#x5730;&#x5740;&apos;</span>\n    headers = {\n        <span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.116 Safari/537.36&apos;</span>,\n        <span class=\"hljs-string\">&apos;Cookie&apos;</span>:<span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x6293;&#x5230;&#x7684;Cookie&#x503c;&apos;</span>,\n    }\n    html = requests.get(url=url,headers=headers).text\n    <span class=\"hljs-comment\"># &#x67e5;&#x770b;html&#x4e2d;&#x662f;&#x5426;&#x5305;&#x542b;&#x4e2a;&#x4eba;&#x4e3b;&#x9875;&#x7684;&#x4fe1;&#x606f; - &#x6bd4;&#x5982;&#x641c;&#x7d22; &quot;&#x4e2a;&#x4eba;&#x4e3b;&#x9875;&quot;</span>\n    <span class=\"hljs-built_in\">print</span>(html)\n\nlogin()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"426,445"}}],"payload":{"tag":"h3","lines":"413,414"}},{"content":"&#x65b9;&#x6cd5;&#x4e8c;","children":[{"content":"<pre data-lines=\"448,461\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x539f;&#x7406;\n    <span class=\"hljs-number\">1.1</span>) &#x628a;&#x6293;&#x53d6;&#x5230;&#x7684;cookie&#x5904;&#x7406;&#x4e3a;&#x5b57;&#x5178;\n    <span class=\"hljs-number\">1.2</span>) &#x4f7f;&#x7528;requests.get()&#x4e2d;&#x7684;&#x53c2;&#x6570;:cookies - &#x683c;&#x5f0f;&#x4e3a;&#x5b57;&#x5178;\n  \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x5904;&#x7406;cookie&#x4e3a;&#x5b57;&#x5178;\n    cookies = {}\n    cookies_str = <span class=\"hljs-string\">&apos;xxxx&apos;</span>\n    <span class=\"hljs-keyword\">for</span> kv <span class=\"hljs-keyword\">in</span> cookies_str.split(<span class=\"hljs-string\">&apos;; &apos;</span>)\n        key = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">0</span>]\n        value = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">1</span>]\n        cookies[key] = value\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"448,461"}},{"content":"<pre data-lines=\"462,486\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;&#x65b9;&#x6cd5;&#x4e8c;&#x4ee3;&#x7801;&#x5b9e;&#x73b0;&quot;&quot;&quot;</span>\n\n<span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n    url = <span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x8d26;&#x53f7;&#x7684;&#x4e2a;&#x4eba;&#x4e3b;&#x9875;&apos;</span>\n    headers = {\n        <span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.116 Safari/537.36&apos;</span>,\n    }\n    <span class=\"hljs-comment\"># &#x5904;&#x7406;cookie&#x4e3a;&#x5b57;&#x5178;</span>\n    cookies_str = <span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x6293;&#x5230;&#x7684;Cookie&apos;</span>\n    cookies = {}\n    <span class=\"hljs-keyword\">for</span> kv <span class=\"hljs-keyword\">in</span> cookies_str.split(<span class=\"hljs-string\">&apos;; &apos;</span>):\n        key = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">0</span>]\n        value = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">1</span>]\n        cookies[key] = value\n\n    <span class=\"hljs-comment\"># &#x786e;&#x8ba4;html</span>\n    html = requests.get(url=url,headers=headers,cookies=cookies).text\n    <span class=\"hljs-built_in\">print</span>(html)\n\nlogin()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"462,486"}}],"payload":{"tag":"h3","lines":"446,447"}},{"content":"&#x65b9;&#x6cd5;&#x4e09; - requests&#x6a21;&#x5757;&#x5904;&#x7406;Cookie","children":[{"content":"<pre data-lines=\"489,520\"><code class=\"language-python\">&#x3010;1&#x3011; &#x601d;&#x8def; : requests&#x6a21;&#x5757;&#x63d0;&#x4f9b;&#x4e86;session&#x7c7b;,&#x6765;&#x5b9e;&#x73b0;&#x5ba2;&#x6237;&#x7aef;&#x548c;&#x670d;&#x52a1;&#x7aef;&#x7684;&#x4f1a;&#x8bdd;&#x4fdd;&#x6301;\n\n&#x3010;2&#x3011;&#x539f;&#x7406;\n    2.1) &#x5b9e;&#x4f8b;&#x5316;session&#x5bf9;&#x8c61; : s = requests.session()\n    2.2) &#x8ba9;session&#x5bf9;&#x8c61;&#x53d1;&#x9001;get&#x6216;&#x8005;post&#x8bf7;&#x6c42;\n       res = s.post(url=url,data=data,headers=headers)\n       res = s.get(url=url,headers=headers)\n\n&#x3010;3&#x3011;&#x601d;&#x8def;&#x68b3;&#x7406;\n    3.1) &#x6d4f;&#x89c8;&#x5668;&#x539f;&#x7406;: &#x8bbf;&#x95ee;&#x9700;&#x8981;&#x767b;&#x5f55;&#x7684;&#x9875;&#x9762;&#x4f1a;&#x5e26;&#x7740;&#x4e4b;&#x524d;&#x767b;&#x5f55;&#x8fc7;&#x7684;cookie\n    3.2) &#x7a0b;&#x5e8f;&#x539f;&#x7406;: &#x540c;&#x6837;&#x5e26;&#x7740;&#x4e4b;&#x524d;&#x767b;&#x5f55;&#x7684;cookie&#x53bb;&#x8bbf;&#x95ee; - &#x7531;session&#x5bf9;&#x8c61;&#x5b8c;&#x6210;\n    3.3) &#x5177;&#x4f53;&#x6b65;&#x9aa4;\n        a&gt; &#x5b9e;&#x4f8b;&#x5316;session&#x5bf9;&#x8c61;\n        b&gt; &#x767b;&#x5f55;&#x7f51;&#x7ad9;: &#x7531;session&#x5bf9;&#x8c61;&#x53d1;&#x9001;&#x8bf7;&#x6c42;,&#x767b;&#x5f55;&#x5bf9;&#x5e94;&#x7f51;&#x7ad9;\n        c&gt; &#x8bbf;&#x95ee;&#x9875;&#x9762;: &#x7531;session&#x5bf9;&#x8c61;&#x8bf7;&#x6c42;&#x9700;&#x8981;&#x767b;&#x5f55;&#x624d;&#x80fd;&#x8bbf;&#x95ee;&#x7684;&#x9875;&#x9762;\n            \n&#x3010;4&#x3011;&#x5982;&#x4f55;&#x628a;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x4fe1;&#x606f;&#x63d0;&#x4ea4;&#x7ed9;&#x670d;&#x52a1;&#x5668;\n    4.1) &#x8f93;&#x5165;&#x7528;&#x6237;&#x540d;&#x548c;&#x9519;&#x8bef;&#x5bc6;&#x7801;,&#x767b;&#x5f55;1&#x6b21;&#x8fdb;&#x884c;&#x6293;&#x5305;\n    4.2) &#x5728;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;&#x4e2d;&#x627e;&#x5230;&#x5177;&#x4f53;&#x63d0;&#x4ea4;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x4fe1;&#x606f;&#x7684;&#x5730;&#x5740;,&#x4e00;&#x822c;&#x4e3a;POST&#x8bf7;&#x6c42;\n    4.3) &#x5c06;&#x6b63;&#x786e;&#x7684;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x4fe1;&#x606f;POST&#x5230;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;&#x7684;URL&#x5730;&#x5740; - Request URL\n    \n&#x3010;5&#x3011;&#x6240;&#x6293;&#x6570;&#x636e;&#x5305;&#x4fe1;&#x606f;\n   5.1) POST_URL: https://accounts.douban.com/j/mobile/login/basic\n   5.2) Form Data:\n        ck: \n        name: &#x81ea;&#x5df1;&#x7684;&#x8d26;&#x53f7;\n        password: &#x81ea;&#x5df1;&#x7684;&#x5bc6;&#x7801;\n        remember: false\n        ticket: \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"489,520"}},{"content":"<pre data-lines=\"521,545\"><code class=\"language-python\">\n  <span class=\"hljs-string\">&quot;&quot;&quot;&#x65b9;&#x6cd5;&#x4e09;&#x4ee3;&#x7801;&#x5b9e;&#x73b0;&quot;&quot;&quot;</span>\n  <span class=\"hljs-keyword\">import</span> requests\n  \n  session = requests.session()\n  \n  <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n      post_url = <span class=\"hljs-string\">&apos;https://accounts.douban.com/j/mobile/login/basic&apos;</span>\n      post_data = {\n          <span class=\"hljs-string\">&apos;ck&apos;</span>:<span class=\"hljs-string\">&apos;&apos;</span>,\n          <span class=\"hljs-string\">&apos;name&apos;</span>: <span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x7684;&#x7528;&#x6237;&#x540d;&apos;</span>,\n          <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x7684;&#x5bc6;&#x7801;&apos;</span>,\n          <span class=\"hljs-string\">&apos;remember&apos;</span>: <span class=\"hljs-string\">&apos;false&apos;</span>,\n          <span class=\"hljs-string\">&apos;ticket&apos;</span>: <span class=\"hljs-string\">&apos;&apos;</span>,\n      }\n      headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.116 Safari/537.36&apos;</span>}\n      session.post(url=post_url,data=post_data,headers=headers)\n      url = <span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x4e2a;&#x4eba;&#x4e3b;&#x9875;&#x7684;URL&#x5730;&#x5740;&apos;</span>\n      html = session.get(url=url,headers=headers).text\n      <span class=\"hljs-built_in\">print</span>(html)\n  \n  login()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"521,545"}}],"payload":{"tag":"h3","lines":"487,488"}},{"content":"&#x6a21;&#x62df;&#x767b;&#x5f55;&#x5c0f;&#x7ed3;","children":[{"content":"<pre data-lines=\"548,562\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x65b9;&#x6cd5;<span class=\"hljs-number\">1</span>\n    &#x5148;&#x767b;&#x5f55;&#x6210;&#x529f;<span class=\"hljs-number\">1</span>&#x6b21;,&#x6293;&#x53d6;&#x5230;Cookie,&#x5b9a;&#x4e49;&#x5230; headers={<span class=\"hljs-string\">&apos;Cookie&apos;</span>:<span class=\"hljs-string\">&apos;&apos;</span>}\n \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x65b9;&#x6cd5;<span class=\"hljs-number\">2</span>\n    &#x5148;&#x767b;&#x5f55;&#x6210;&#x529f;<span class=\"hljs-number\">1</span>&#x6b21;,&#x6293;&#x53d6;&#x5230;Cookie,&#x5e76;&#x5904;&#x7406;&#x6210;&#x5b57;&#x5178;,&#x4f5c;&#x4e3a;requests.get()&#x4e2d;&#x7684;cookies&#x53c2;&#x6570;&#x503c;\n    html = requests.get(url=url,headers=headers,cookies=cookies).text\n    \n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x65b9;&#x6cd5;<span class=\"hljs-number\">3</span>\n    s = requests.session()\n    <span class=\"hljs-number\">3.1</span>) &#x767b;&#x5f55;&#x5931;&#x8d25;<span class=\"hljs-number\">1</span>&#x6b21;&#x6293;&#x5305;,&#x627e;&#x5230; POST &#x7684;&#x5730;&#x5740;&#x548c;Form&#x8868;&#x5355;&#x6570;&#x636e;\n    <span class=\"hljs-number\">3.2</span>) &#x5148;POST&#x767b;&#x5f55;: s.post(url=post_url,data=data,headers=headers)\n    <span class=\"hljs-number\">3.3</span>) &#x518d;GET&#x6293;&#x53d6;:  html = s.get(url=get_url,headers=headers).text\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"548,562"}}],"payload":{"tag":"h3","lines":"546,547"}}],"payload":{"tag":"h2","lines":"411,412"}},{"content":"selenium+phantomjs/Chrome/Firefox","children":[{"content":"selenium","children":[{"content":"<pre data-lines=\"567,584\"><code class=\"language-python\">&#x3010;1&#x3011;&#x5b9a;&#x4e49;\n    1.1) &#x5f00;&#x6e90;&#x7684;Web&#x81ea;&#x52a8;&#x5316;&#x6d4b;&#x8bd5;&#x5de5;&#x5177;\n    \n&#x3010;2&#x3011;&#x7528;&#x9014;\n    2.1) &#x5bf9;Web&#x7cfb;&#x7edf;&#x8fdb;&#x884c;&#x529f;&#x80fd;&#x6027;&#x6d4b;&#x8bd5;,&#x7248;&#x672c;&#x8fed;&#x4ee3;&#x65f6;&#x907f;&#x514d;&#x91cd;&#x590d;&#x52b3;&#x52a8;\n    2.2) &#x517c;&#x5bb9;&#x6027;&#x6d4b;&#x8bd5;(&#x6d4b;&#x8bd5;web&#x7a0b;&#x5e8f;&#x5728;&#x4e0d;&#x540c;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x548c;&#x4e0d;&#x540c;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#x662f;&#x5426;&#x8fd0;&#x884c;&#x6b63;&#x5e38;)\n    2.3) &#x5bf9;web&#x7cfb;&#x7edf;&#x8fdb;&#x884c;&#x5927;&#x6570;&#x91cf;&#x6d4b;&#x8bd5;\n    \n&#x3010;3&#x3011;&#x7279;&#x70b9;\n    3.1) &#x53ef;&#x6839;&#x636e;&#x6307;&#x4ee4;&#x64cd;&#x63a7;&#x6d4f;&#x89c8;&#x5668;\n    3.2) &#x53ea;&#x662f;&#x5de5;&#x5177;&#xff0c;&#x5fc5;&#x987b;&#x4e0e;&#x7b2c;&#x4e09;&#x65b9;&#x6d4f;&#x89c8;&#x5668;&#x7ed3;&#x5408;&#x4f7f;&#x7528;\n    \n&#x3010;4&#x3011;&#x5b89;&#x88c5;\n    4.1) Linux: sudo pip3 install selenium\n    4.2) Windows: python -m pip install selenium\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"567,584"}}],"payload":{"tag":"h3","lines":"565,566"}},{"content":"phantomjs&#x6d4f;&#x89c8;&#x5668;","children":[{"content":"<pre data-lines=\"587,618\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x5b9a;&#x4e49;\n    phantomjs&#x4e3a;&#x65e0;&#x754c;&#x9762;&#x6d4f;&#x89c8;&#x5668;(&#x53c8;&#x79f0;&#x65e0;&#x5934;&#x6d4f;&#x89c8;&#x5668;)&#xff0c;&#x5728;&#x5185;&#x5b58;&#x4e2d;&#x8fdb;&#x884c;&#x9875;&#x9762;&#x52a0;&#x8f7d;,&#x9ad8;&#x6548;\n \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x4e0b;&#x8f7d;&#x5730;&#x5740;\n    <span class=\"hljs-number\">2.1</span>) chromedriver : &#x4e0b;&#x8f7d;&#x5bf9;&#x5e94;&#x7248;&#x672c;\n       http://chromedriver.storage.googleapis.com/index.html\n       http://npm.taobao.org/mirrors/chromedriver/\n    \n    <span class=\"hljs-number\">2.2</span>) geckodriver\n       https://github.com/mozilla/geckodriver/releases\n            \n    <span class=\"hljs-number\">2.3</span>) phantomjs\n       https://phantomjs.org/download.html\n\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;Ubuntu&#x5b89;&#x88c5;\n    <span class=\"hljs-number\">3.1</span>) &#x4e0b;&#x8f7d;&#x540e;&#x89e3;&#x538b; : tar -zxvf geckodriver.tar.gz \n        \n    <span class=\"hljs-number\">3.2</span>) &#x62f7;&#x8d1d;&#x89e3;&#x538b;&#x540e;&#x6587;&#x4ef6;&#x5230; /usr/<span class=\"hljs-built_in\">bin</span>/ &#xff08;&#x6dfb;&#x52a0;&#x73af;&#x5883;&#x53d8;&#x91cf;&#xff09;\n         sudo cp geckodriver /usr/<span class=\"hljs-built_in\">bin</span>/\n        \n    <span class=\"hljs-number\">3.3</span>) &#x6dfb;&#x52a0;&#x53ef;&#x6267;&#x884c;&#x6743;&#x9650;\n         sudo chmod <span class=\"hljs-number\">777</span> /usr/<span class=\"hljs-built_in\">bin</span>/geckodriver\n\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;Windows&#x5b89;&#x88c5;\n    <span class=\"hljs-number\">4.1</span>) &#x4e0b;&#x8f7d;&#x5bf9;&#x5e94;&#x7248;&#x672c;&#x7684;phantomjs&#x3001;chromedriver&#x3001;geckodriver\n    <span class=\"hljs-number\">4.2</span>) &#x628a;chromedriver.exe&#x62f7;&#x8d1d;&#x5230;python&#x5b89;&#x88c5;&#x76ee;&#x5f55;&#x7684;Scripts&#x76ee;&#x5f55;&#x4e0b;(&#x6dfb;&#x52a0;&#x5230;&#x7cfb;&#x7edf;&#x73af;&#x5883;&#x53d8;&#x91cf;)\n         <span class=\"hljs-comment\"># &#x67e5;&#x770b;python&#x5b89;&#x88c5;&#x8def;&#x5f84;: where python</span>\n    <span class=\"hljs-number\">4.3</span>) &#x9a8c;&#x8bc1;\n         cmd&#x547d;&#x4ee4;&#x884c;: chromedriver\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"587,618"}}],"payload":{"tag":"h3","lines":"585,586"}},{"content":"&#x793a;&#x4f8b;&#x4ee3;&#x7801;","children":[{"content":"<pre data-lines=\"621,635\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;&#x793a;&#x4f8b;&#x4ee3;&#x7801;&#x4e00;&#xff1a;&#x4f7f;&#x7528; selenium+&#x6d4f;&#x89c8;&#x5668; &#x6253;&#x5f00;&#x767e;&#x5ea6;&quot;&quot;&quot;</span>\n\n<span class=\"hljs-comment\"># &#x5bfc;&#x5165;seleinum&#x7684;webdriver&#x63a5;&#x53e3;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-comment\"># &#x521b;&#x5efa;&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61;</span>\nbrowser = webdriver.Chrome()\nbrowser.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n<span class=\"hljs-comment\"># 5&#x79d2;&#x949f;&#x540e;&#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;</span>\ntime.sleep(<span class=\"hljs-number\">5</span>)\nbrowser.quit()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"621,635"}},{"content":"<pre data-lines=\"636,651\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;&#x793a;&#x4f8b;&#x4ee3;&#x7801;&#x4e8c;&#xff1a;&#x6253;&#x5f00;&#x767e;&#x5ea6;&#xff0c;&#x641c;&#x7d22;&#x8d75;&#x4e3d;&#x9896;&#xff0c;&#x70b9;&#x51fb;&#x641c;&#x7d22;&#xff0c;&#x67e5;&#x770b;&quot;&quot;&quot;</span>\n\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-comment\"># 1.&#x521b;&#x5efa;&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61; - &#x5df2;&#x7ecf;&#x6253;&#x5f00;&#x4e86;&#x6d4f;&#x89c8;&#x5668;</span>\nbrowser = webdriver.Chrome()\n<span class=\"hljs-comment\"># 2.&#x8f93;&#x5165;: http://www.baidu.com/</span>\nbrowser.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n<span class=\"hljs-comment\"># 3.&#x627e;&#x5230;&#x641c;&#x7d22;&#x6846;,&#x5411;&#x8fd9;&#x4e2a;&#x8282;&#x70b9;&#x53d1;&#x9001;&#x6587;&#x5b57;: &#x8d75;&#x4e3d;&#x9896;</span>\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;kw&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x8d75;&#x4e3d;&#x9896;&apos;</span>)\n<span class=\"hljs-comment\"># 4.&#x627e;&#x5230; &#x767e;&#x5ea6;&#x4e00;&#x4e0b; &#x6309;&#x94ae;,&#x70b9;&#x51fb;&#x4e00;&#x4e0b;</span>\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;su&quot;]&apos;</span>).click()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"636,651"}}],"payload":{"tag":"h3","lines":"619,620"}},{"content":"&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61;(browser)&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"654,663\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;browser.get(url=url)   - &#x5730;&#x5740;&#x680f;&#x8f93;&#x5165;url&#x5730;&#x5740;&#x5e76;&#x786e;&#x8ba4;   \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;browser.quit()         - &#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;browser.close()        - &#x5173;&#x95ed;&#x5f53;&#x524d;&#x9875;\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;browser.page_source    - HTML&#x7ed3;&#x6784;&#x6e90;&#x7801;\n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;browser.page_source.find(<span class=\"hljs-string\">&apos;&#x5b57;&#x7b26;&#x4e32;&apos;</span>)\n    &#x4ece;html&#x6e90;&#x7801;&#x4e2d;&#x641c;&#x7d22;&#x6307;&#x5b9a;&#x5b57;&#x7b26;&#x4e32;,&#x6ca1;&#x6709;&#x627e;&#x5230;&#x8fd4;&#x56de;&#xff1a;-<span class=\"hljs-number\">1</span>,&#x7ecf;&#x5e38;&#x7528;&#x4e8e;&#x5224;&#x65ad;&#x662f;&#x5426;&#x4e3a;&#x6700;&#x540e;&#x4e00;&#x9875;\n&#x3010;<span class=\"hljs-number\">6</span>&#x3011;browser.maximize_window() - &#x6d4f;&#x89c8;&#x5668;&#x7a97;&#x53e3;&#x6700;&#x5927;&#x5316;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"654,663"}}],"payload":{"tag":"h3","lines":"652,653"}},{"content":"&#x5b9a;&#x4f4d;&#x8282;&#x70b9;&#x516b;&#x79cd;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"666,687\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x5355;&#x5143;&#x7d20;&#x67e5;&#x627e;(<span class=\"hljs-string\">&apos;&#x7ed3;&#x679c;&#x4e3a;1&#x4e2a;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&apos;</span>)\n    <span class=\"hljs-number\">1.1</span>) browser.find_element_by_id(<span class=\"hljs-string\">&apos;id&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n    <span class=\"hljs-number\">1.2</span>) browser.find_element_by_name(<span class=\"hljs-string\">&apos;name&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n    <span class=\"hljs-number\">1.3</span>) browser.find_element_by_class_name(<span class=\"hljs-string\">&apos;class&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n    <span class=\"hljs-number\">1.4</span>) browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;xpath&#x8868;&#x8fbe;&#x5f0f;&apos;</span>)\n    <span class=\"hljs-number\">1.5</span>) browser.find_element_by_link_text(<span class=\"hljs-string\">&apos;&#x94fe;&#x63a5;&#x6587;&#x672c;&apos;</span>)\n    <span class=\"hljs-number\">1.6</span>) browser.find_element_by_partical_link_text(<span class=\"hljs-string\">&apos;&#x90e8;&#x5206;&#x94fe;&#x63a5;&#x6587;&#x672c;&apos;</span>)\n    <span class=\"hljs-number\">1.7</span>) browser.find_element_by_tag_name(<span class=\"hljs-string\">&apos;&#x6807;&#x8bb0;&#x540d;&#x79f0;&apos;</span>)\n    <span class=\"hljs-number\">1.8</span>) browser.find_element_by_css_selector(<span class=\"hljs-string\">&apos;css&#x8868;&#x8fbe;&#x5f0f;&apos;</span>)\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x591a;&#x5143;&#x7d20;&#x67e5;&#x627e;(<span class=\"hljs-string\">&apos;&#x7ed3;&#x679c;&#x4e3a;[&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5217;&#x8868;]&apos;</span>)\n    <span class=\"hljs-number\">2.1</span>) browser.find_elements_by_id(<span class=\"hljs-string\">&apos;id&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n    <span class=\"hljs-number\">2.2</span>) browser.find_elements_by_name(<span class=\"hljs-string\">&apos;name&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n    <span class=\"hljs-number\">2.3</span>) browser.find_elements_by_class_name(<span class=\"hljs-string\">&apos;class&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n    <span class=\"hljs-number\">2.4</span>) browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;xpath&#x8868;&#x8fbe;&#x5f0f;&apos;</span>)\n    <span class=\"hljs-number\">2.5</span>) browser.find_elements_by_link_text(<span class=\"hljs-string\">&apos;&#x94fe;&#x63a5;&#x6587;&#x672c;&apos;</span>)\n    <span class=\"hljs-number\">2.6</span>) browser.find_elements_by_partical_link_text(<span class=\"hljs-string\">&apos;&#x90e8;&#x5206;&#x94fe;&#x63a5;&#x6587;&#x672c;&apos;</span>)\n    <span class=\"hljs-number\">2.7</span>) browser.find_elements_by_tag_name(<span class=\"hljs-string\">&apos;&#x6807;&#x8bb0;&#x540d;&#x79f0;&apos;</span>)\n    <span class=\"hljs-number\">2.8</span>) browser.find_elements_by_css_selector(<span class=\"hljs-string\">&apos;css&#x8868;&#x8fbe;&#x5f0f;&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"666,687"}}],"payload":{"tag":"h3","lines":"664,665"}},{"content":"&#x732b;&#x773c;&#x7535;&#x5f71;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"690,723\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\nurl = <span class=\"hljs-string\">&apos;https://maoyan.com/board/4&apos;</span>\nbrowser = webdriver.Chrome()\nbrowser.get(url)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_data</span>():\n    <span class=\"hljs-comment\"># &#x57fa;&#x51c6;xpath: [&lt;selenium xxx li at xxx&gt;,&lt;selenium xxx li at&gt;]</span>\n    li_list = browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;app&quot;]/div/div/div[1]/dl/dd&apos;</span>)\n    <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> li_list:\n        item = {}\n        <span class=\"hljs-comment\"># info_list: [&apos;1&apos;, &apos;&#x9738;&#x738b;&#x522b;&#x59ec;&apos;, &apos;&#x4e3b;&#x6f14;&#xff1a;&#x5f20;&#x56fd;&#x8363;&apos;, &apos;&#x4e0a;&#x6620;&#x65f6;&#x95f4;&#xff1a;1993-01-01&apos;, &apos;9.5&apos;]</span>\n        info_list = li.text.split(<span class=\"hljs-string\">&apos;\\n&apos;</span>)\n        item[<span class=\"hljs-string\">&apos;number&apos;</span>] = info_list[<span class=\"hljs-number\">0</span>]\n        item[<span class=\"hljs-string\">&apos;name&apos;</span>] = info_list[<span class=\"hljs-number\">1</span>]\n        item[<span class=\"hljs-string\">&apos;star&apos;</span>] = info_list[<span class=\"hljs-number\">2</span>]\n        item[<span class=\"hljs-string\">&apos;time&apos;</span>] = info_list[<span class=\"hljs-number\">3</span>]\n        item[<span class=\"hljs-string\">&apos;score&apos;</span>] = info_list[<span class=\"hljs-number\">4</span>]\n\n        <span class=\"hljs-built_in\">print</span>(item)\n\n<span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n    get_data()\n    <span class=\"hljs-keyword\">try</span>:\n        browser.find_element_by_link_text(<span class=\"hljs-string\">&apos;&#x4e0b;&#x4e00;&#x9875;&apos;</span>).click()\n        time.sleep(<span class=\"hljs-number\">2</span>)\n    <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x606d;&#x559c;&#x4f60;!&#x6293;&#x53d6;&#x7ed3;&#x675f;&apos;</span>)\n        browser.quit()\n        <span class=\"hljs-keyword\">break</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"690,723"}}],"payload":{"tag":"h3","lines":"688,689"}},{"content":"&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"726,737\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6587;&#x672c;&#x6846;&#x64cd;&#x4f5c;\n    <span class=\"hljs-number\">1.1</span>) node.send_keys(<span class=\"hljs-string\">&apos;&apos;</span>)  - &#x5411;&#x6587;&#x672c;&#x6846;&#x53d1;&#x9001;&#x5185;&#x5bb9;\n    <span class=\"hljs-number\">1.2</span>) node.clear()        - &#x6e05;&#x7a7a;&#x6587;&#x672c;\n    <span class=\"hljs-number\">1.3</span>) node.get_attribute(<span class=\"hljs-string\">&apos;value&apos;</span>) - &#x83b7;&#x53d6;&#x6587;&#x672c;&#x5185;&#x5bb9;\n    \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x6309;&#x94ae;&#x64cd;&#x4f5c;\n    <span class=\"hljs-number\">1.1</span>) node.click()      - &#x70b9;&#x51fb;\n    <span class=\"hljs-number\">1.2</span>) node.is_enabled() - &#x5224;&#x65ad;&#x6309;&#x94ae;&#x662f;&#x5426;&#x53ef;&#x7528;\n    <span class=\"hljs-number\">1.3</span>) node.get_attribute(<span class=\"hljs-string\">&apos;value&apos;</span>) - &#x83b7;&#x53d6;&#x6309;&#x94ae;&#x6587;&#x672c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"726,737"}}],"payload":{"tag":"h3","lines":"724,725"}}],"payload":{"tag":"h2","lines":"563,564"}},{"content":"&#x4f5c;&#x4e1a;1 - &#x4eac;&#x4e1c;&#x722c;&#x866b;","children":[{"content":"&#x76ee;&#x6807;","children":[{"content":"<pre data-lines=\"742,746\"><code class=\"language-python\">&#x3010;1&#x3011;&#x76ee;&#x6807;&#x7f51;&#x5740; &#xff1a;https://www.jd.com/\n&#x3010;2&#x3011;&#x6293;&#x53d6;&#x76ee;&#x6807; &#xff1a;&#x5546;&#x54c1;&#x540d;&#x79f0;&#x3001;&#x5546;&#x54c1;&#x4ef7;&#x683c;&#x3001;&#x8bc4;&#x4ef7;&#x6570;&#x91cf;&#x3001;&#x5546;&#x54c1;&#x5546;&#x5bb6;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"742,746"}}],"payload":{"tag":"h3","lines":"740,741"}},{"content":"&#x601d;&#x8def;&#x63d0;&#x9192;","children":[{"content":"<pre data-lines=\"749,756\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6253;&#x5f00;&#x4eac;&#x4e1c;&#xff0c;&#x5230;&#x5546;&#x54c1;&#x641c;&#x7d22;&#x9875;\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x5339;&#x914d;&#x6240;&#x6709;&#x5546;&#x54c1;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5217;&#x8868;\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x628a;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x7684;&#x6587;&#x672c;&#x5185;&#x5bb9;&#x53d6;&#x51fa;&#x6765;&#xff0c;&#x67e5;&#x770b;&#x89c4;&#x5f8b;&#xff0c;&#x662f;&#x5426;&#x6709;&#x66f4;&#x597d;&#x7684;&#x5904;&#x7406;&#x529e;&#x6cd5;&#xff1f;\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x63d0;&#x53d6;&#x5b8c;<span class=\"hljs-number\">1</span>&#x9875;&#x540e;&#xff0c;&#x5224;&#x65ad;&#x5982;&#x679c;&#x4e0d;&#x662f;&#x6700;&#x540e;<span class=\"hljs-number\">1</span>&#x9875;&#xff0c;&#x5219;&#x70b9;&#x51fb;&#x4e0b;&#x4e00;&#x9875;\n    <span class=\"hljs-comment\"># &#x5982;&#x4f55;&#x5224;&#x65ad;&#x662f;&#x5426;&#x4e3a;&#x6700;&#x540e;1&#x9875;&#xff1f;&#xff1f;&#xff1f;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"749,756"}}],"payload":{"tag":"h3","lines":"747,748"}},{"content":"&#x5b9e;&#x73b0;&#x6b65;&#x9aa4;-&#x53c2;&#x8003;&#x4e0e;&#x63d0;&#x793a;","children":[{"content":"<pre data-lines=\"759,775\"><code class=\"language-python\"><span class=\"hljs-comment\"># 1. &#x627e;&#x8282;&#x70b9;</span>\n<span class=\"hljs-number\">1</span>&#x3001;&#x9996;&#x9875;&#x641c;&#x7d22;&#x6846; : //*[@<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;key&quot;</span>]\n<span class=\"hljs-number\">2</span>&#x3001;&#x9996;&#x9875;&#x641c;&#x7d22;&#x6309;&#x94ae;   ://*[@<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;search&quot;</span>]/div/div[<span class=\"hljs-number\">2</span>]/button\n<span class=\"hljs-number\">3</span>&#x3001;&#x5546;&#x54c1;&#x9875;&#x7684; &#x5546;&#x54c1;&#x4fe1;&#x606f;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5217;&#x8868; ://*[@<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;J_goodsList&quot;</span>]/ul/li\n<span class=\"hljs-number\">4</span>&#x3001;<span class=\"hljs-keyword\">for</span>&#x5faa;&#x73af;&#x904d;&#x5386;&#x540e;\n  &#x540d;&#x79f0;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-name&quot;</span>]/a/em\n  &#x4ef7;&#x683c;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-price&quot;</span>]\n  &#x8bc4;&#x8bba;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-commit&quot;</span>]/strong\n  &#x5546;&#x5bb6;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-shopnum&quot;</span>]\n    \n<span class=\"hljs-comment\"># 2. &#x6267;&#x884c;JS&#x811a;&#x672c;&#xff0c;&#x83b7;&#x53d6;&#x52a8;&#x6001;&#x52a0;&#x8f7d;&#x6570;&#x636e;</span>\nbrowser.execute_script(\n  <span class=\"hljs-string\">&apos;window.scrollTo(0,document.body.scrollHeight)&apos;</span>\n)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"759,775"}}],"payload":{"tag":"h3","lines":"757,758"}},{"content":"&#x4ee3;&#x7801;&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"778,794\"><code class=\"language-python\">browser.excute_script(\n<span class=\"hljs-string\">&apos;window.scrollTo(0,document.body.scrollHeight)&apos;</span>\n)\ntime.sleep(<span class=\"hljs-number\">2</span>)\n\n&#x3010;<span class=\"hljs-number\">1</span>&#x3011; &#x641c;&#x7d22;&#x5185;&#x5bb9;: &#x722c;&#x866b;&#x4e66;\n    li_list = [&lt;li1&gt;,&lt;li2&gt;,...&lt;lin&gt;]\n    <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> li_list:\n        &#x65b9;&#x6cd5;<span class=\"hljs-number\">1</span>: <span class=\"hljs-built_in\">print</span>(li.text)\n        &#x65b9;&#x6cd5;<span class=\"hljs-number\">2</span>: item[<span class=\"hljs-string\">&apos;name&apos;</span>]=li.find_element_by_xpath(<span class=\"hljs-string\">&apos;&apos;</span>)\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x4e00;&#x5b9a;&#x8981;&#x6ce8;&#x610f;&#x7ed9;&#x9875;&#x9762;&#x5143;&#x7d20;&#x52a0;&#x8f7d;&#x9884;&#x7559;&#x65f6;&#x95f4;\n\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x6267;&#x884c;JS&#x811a;&#x672c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"778,794"}}],"payload":{"tag":"h3","lines":"776,777"}}],"payload":{"tag":"h2","lines":"738,739"}},{"content":"&#x4f5c;&#x4e1a;2","children":[{"content":"&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"804,896\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x8c46;&#x74e3;&#x7535;&#x5f71; - &#x5267;&#x60c5; - &#x6293;&#x53d6;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">from</span> fake_useragent <span class=\"hljs-keyword\">import</span> UserAgent\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">import</span> random\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread,Lock\n<span class=\"hljs-keyword\">from</span> queue <span class=\"hljs-keyword\">import</span> Queue\n<span class=\"hljs-keyword\">import</span> json\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DoubanSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url = <span class=\"hljs-string\">&apos;https://movie.douban.com/j/chart/top_list?type=13&amp;interval_id=100%3A90&amp;action=&amp;start={}&amp;limit=20&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.i = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-comment\"># &#x961f;&#x5217; + &#x9501;</span>\n        <span class=\"hljs-variable language_\">self</span>.q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.lock = Lock()\n        <span class=\"hljs-comment\"># &#x5b9a;&#x4e49;&#x7a7a;&#x5217;&#x8868;,&#x7528;&#x6765;&#x5b58;&#x653e;&#x6240;&#x6709;&#x7535;&#x5f71;&#x4fe1;&#x606f;&#x7684;&#x5b57;&#x5178;</span>\n        <span class=\"hljs-variable language_\">self</span>.all_film_list = []\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_agent</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;&#x968f;&#x673a;&#x7684;User-Agent&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">return</span> UserAgent().random\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">url_in</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x628a;&#x6240;&#x6709;&#x8981;&#x6293;&#x53d6;&#x7684;URL&#x5730;&#x5740;&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">for</span> start <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">684</span>,<span class=\"hljs-number\">20</span>):\n            url = <span class=\"hljs-variable language_\">self</span>.url.<span class=\"hljs-built_in\">format</span>(start)\n            <span class=\"hljs-comment\"># url&#x5165;&#x961f;&#x5217;</span>\n            <span class=\"hljs-variable language_\">self</span>.q.put(url)\n\n    <span class=\"hljs-comment\"># &#x7ebf;&#x7a0b;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;&#xff1a;&#x8bf7;&#x6c42;+&#x89e3;&#x6790;+&#x6570;&#x636e;&#x5904;&#x7406;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-comment\"># &#x4ece;&#x961f;&#x5217;&#x4e2d;&#x83b7;&#x53d6;URL&#x5730;&#x5740;</span>\n            <span class=\"hljs-comment\"># &#x4e00;&#x5b9a;&#x8981;&#x5728;&#x5224;&#x65ad;&#x961f;&#x5217;&#x662f;&#x5426;&#x4e3a;&#x7a7a; &#x548c; get() &#x5730;&#x5740; &#x524d;&#x540e;&#x52a0;&#x9501;,&#x9632;&#x6b62;&#x961f;&#x5217;&#x4e2d;&#x53ea;&#x5269;&#x4e00;&#x4e2a;&#x5730;&#x5740;&#x65f6;&#x51fa;&#x73b0;&#x91cd;&#x590d;&#x5224;&#x65ad;</span>\n            <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.q.empty():\n                headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-variable language_\">self</span>.get_agent()}\n                url = <span class=\"hljs-variable language_\">self</span>.q.get()\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n\n                html = requests.get(url=url, headers=headers).json()\n                <span class=\"hljs-variable language_\">self</span>.parse_html(html)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-comment\"># &#x5982;&#x679c;&#x961f;&#x5217;&#x4e3a;&#x7a7a;,&#x5219;&#x6700;&#x7ec8;&#x5fc5;&#x987b;&#x91ca;&#x653e;&#x9501;</span>\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_html</span>(<span class=\"hljs-params\">self, html</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x89e3;&#x6790;&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># html: [{},{},{},{}]</span>\n        <span class=\"hljs-keyword\">for</span> one_film <span class=\"hljs-keyword\">in</span> html:\n            <span class=\"hljs-comment\"># item &#x5fc5;&#x987b;&#x8981;&#x5b9a;&#x4e49;&#x5230; for &#x5faa;&#x73af;&#x5185;&#x90e8;</span>\n            item = {}\n            item[<span class=\"hljs-string\">&apos;rank&apos;</span>] = one_film[<span class=\"hljs-string\">&apos;rank&apos;</span>]\n            item[<span class=\"hljs-string\">&apos;title&apos;</span>] = one_film[<span class=\"hljs-string\">&apos;title&apos;</span>]\n            item[<span class=\"hljs-string\">&apos;score&apos;</span>] = one_film[<span class=\"hljs-string\">&apos;score&apos;</span>]\n            <span class=\"hljs-built_in\">print</span>(item)\n            <span class=\"hljs-comment\"># &#x52a0;&#x9501; + &#x91ca;&#x653e;&#x9501;</span>\n            <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n            <span class=\"hljs-variable language_\">self</span>.all_film_list.append(item)\n            <span class=\"hljs-variable language_\">self</span>.i += <span class=\"hljs-number\">1</span>\n            <span class=\"hljs-variable language_\">self</span>.lock.release()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># &#x5148;&#x8ba9;URL&#x5730;&#x5740;&#x5165;&#x961f;&#x5217;</span>\n        <span class=\"hljs-variable language_\">self</span>.url_in()\n        <span class=\"hljs-comment\"># &#x521b;&#x5efa;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;,&#x5f00;&#x5e72;&#x5427;</span>\n        t_list = []\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>):\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.get_html)\n            t_list.append(t)\n            t.start()\n\n        <span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> t_list:\n            t.join()\n\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x91cf;:&apos;</span>,<span class=\"hljs-variable language_\">self</span>.i)\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;douban.json&apos;</span>,<span class=\"hljs-string\">&apos;w&apos;</span>,encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            json.dump(<span class=\"hljs-variable language_\">self</span>.all_film_list, f, ensure_ascii=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    start_time = time.time()\n    spider = DoubanSpider()\n    spider.run()\n    end_time = time.time()\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6267;&#x884c;&#x65f6;&#x95f4;:%.2f&apos;</span> % (end_time-start_time))\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"804,896"}},{"content":"<pre data-lines=\"897,976\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x5c0f;&#x7c73;&#x5e94;&#x7528;&#x5546;&#x5e97; - &#x804a;&#x5929;&#x793e;&#x4ea4;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">import</span> random\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread,Lock\n<span class=\"hljs-keyword\">from</span> queue <span class=\"hljs-keyword\">import</span> Queue\n<span class=\"hljs-keyword\">from</span> fake_useragent <span class=\"hljs-keyword\">import</span> UserAgent\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">XiaomiSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url = <span class=\"hljs-string\">&apos;http://app.mi.com/categotyAllListApi?page={}&amp;categoryId=2&amp;pageSize=30&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.lock = Lock()\n        <span class=\"hljs-comment\"># &#x8ba1;&#x6570;</span>\n        <span class=\"hljs-variable language_\">self</span>.i = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-variable language_\">self</span>.all_app_list = []\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">url_in</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;URL&#x5730;&#x5740;&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">for</span> page <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">67</span>):\n            url = <span class=\"hljs-variable language_\">self</span>.url.<span class=\"hljs-built_in\">format</span>(page)\n            <span class=\"hljs-variable language_\">self</span>.q.put(url)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x7ebf;&#x7a0b;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.q.empty():\n                <span class=\"hljs-comment\"># &#x63a7;&#x5236;&#x722c;&#x53d6;&#x9891;&#x7387;</span>\n                time.sleep(random.uniform(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>))\n                url = <span class=\"hljs-variable language_\">self</span>.q.get()\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-keyword\">try</span>:\n                    html = requests.get(url=url, headers={<span class=\"hljs-string\">&apos;User-Agent&apos;</span>:UserAgent().random}).json()\n                    <span class=\"hljs-keyword\">for</span> app <span class=\"hljs-keyword\">in</span> html[<span class=\"hljs-string\">&apos;data&apos;</span>]:\n                        item = {}\n                        item[<span class=\"hljs-string\">&apos;name&apos;</span>] = app[<span class=\"hljs-string\">&apos;displayName&apos;</span>]\n                        item[<span class=\"hljs-string\">&apos;link&apos;</span>] = <span class=\"hljs-string\">&apos;http://app.mi.com/details?id=&apos;</span> + app[<span class=\"hljs-string\">&apos;packageName&apos;</span>]\n                        item[<span class=\"hljs-string\">&apos;type&apos;</span>] = app[<span class=\"hljs-string\">&apos;level1CategoryName&apos;</span>]\n                        <span class=\"hljs-built_in\">print</span>(item)\n\n                        <span class=\"hljs-comment\"># &#x6dfb;&#x52a0;&#x5230;&#x5927;&#x5217;&#x8868;</span>\n                        <span class=\"hljs-variable language_\">self</span>.lock.acquire()\n                        <span class=\"hljs-variable language_\">self</span>.all_app_list.append(item)\n                        <span class=\"hljs-variable language_\">self</span>.i += <span class=\"hljs-number\">1</span>\n                        <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n                    <span class=\"hljs-built_in\">print</span>(e)\n                    <span class=\"hljs-comment\"># &#x5982;&#x679c;URL&#x5730;&#x5740;&#x722c;&#x53d6;&#x5931;&#x8d25;,&#x5219;&#x91cd;&#x65b0;&#x628a;&#x5931;&#x8d25;&#x7684;URL&#x5730;&#x5740;&#x518d;&#x653e;&#x5230;&#x961f;&#x5217;&#x4e2d;</span>\n                    <span class=\"hljs-variable language_\">self</span>.q.put(url)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-variable language_\">self</span>.lock.release()\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x521b;&#x5efa;&#x7ebf;&#x7a0b;&#x5f00;&#x59cb;&#x8fd0;&#x884c;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.url_in()\n        t_list = []\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">2</span>):\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_html)\n            t_list.append(t)\n            t.start()\n\n        <span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> t_list:\n            t.join()\n\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;xiaomi.json&apos;</span>, <span class=\"hljs-string\">&apos;w&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            json.dump(<span class=\"hljs-variable language_\">self</span>.all_app_list, f, ensure_ascii=<span class=\"hljs-literal\">False</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x91cf;:&apos;</span>,<span class=\"hljs-variable language_\">self</span>.i)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    spider = XiaomiSpider()\n    spider.run()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"897,976"}},{"content":"<pre data-lines=\"977,1099\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x817e;&#x8baf;&#x62db;&#x8058;&#x6307;&#x5b9a;&#x7c7b;&#x522b;&#x7684;&#x804c;&#x4f4d;&#x4fe1;&#x606f;&#x6293;&#x53d6;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread,Lock\n<span class=\"hljs-keyword\">from</span> queue <span class=\"hljs-keyword\">import</span> Queue\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">from</span> fake_useragent <span class=\"hljs-keyword\">import</span> UserAgent\n<span class=\"hljs-keyword\">from</span> urllib <span class=\"hljs-keyword\">import</span> parse\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.one_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/Query?timestamp=1563912271089&amp;countryId=&amp;cityId=&amp;bgIds=&amp;productId=&amp;categoryId=&amp;parentCategoryId=&amp;attrId=&amp;keyword={}&amp;pageIndex={}&amp;pageSize=10&amp;language=zh-cn&amp;area=cn&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.two_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/ByPostId?timestamp=1563912374645&amp;postId={}&amp;language=zh-cn&apos;</span>\n        <span class=\"hljs-variable language_\">self</span>.one_q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.two_q = Queue()\n        <span class=\"hljs-variable language_\">self</span>.lock1 = Lock()\n        <span class=\"hljs-variable language_\">self</span>.lock2 = Lock()\n        <span class=\"hljs-variable language_\">self</span>.i = <span class=\"hljs-number\">0</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_html</span>(<span class=\"hljs-params\">self, url</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x529f;&#x80fd;&#x51fd;&#x6570;&quot;&quot;&quot;</span>\n        html = requests.get(url=url, headers={<span class=\"hljs-string\">&apos;User-Agent&apos;</span>:UserAgent().random}).text\n\n        <span class=\"hljs-keyword\">return</span> html\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">url_in</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;URL&#x5730;&#x5740;&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># one_url:  {},{}    keyword   pageIndex</span>\n        keyword = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&apos;&#x8bf7;&#x8f93;&#x5165;&#x804c;&#x4f4d;&#x7c7b;&#x522b;:&apos;</span>)\n        keyword = parse.quote(keyword)\n        total = <span class=\"hljs-variable language_\">self</span>.get_total(keyword)\n        <span class=\"hljs-keyword\">for</span> page <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>,total+<span class=\"hljs-number\">1</span>):\n            url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(keyword, page)\n            <span class=\"hljs-variable language_\">self</span>.one_q.put(url)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_total</span>(<span class=\"hljs-params\">self, keyword</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;&#x603b;&#x9875;&#x6570;&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># &#x5411;&#x67d0;&#x4e2a;&#x7c7b;&#x522b;&#x4e0b;&#x7684;&#x7b2c;1&#x9875;&#x53d1;&#x8bf7;&#x6c42;,&#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x804c;&#x4f4d;&#x603b;&#x6570;</span>\n        url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(keyword, <span class=\"hljs-number\">1</span>)\n        html = json.loads(<span class=\"hljs-variable language_\">self</span>.get_html(url=url))\n        count = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Count&apos;</span>]\n        total = count//<span class=\"hljs-number\">10</span> <span class=\"hljs-keyword\">if</span> count%<span class=\"hljs-number\">10</span>==<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">else</span> count//<span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>\n\n        <span class=\"hljs-keyword\">return</span> total\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_one_page</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x7ebf;&#x7a0b;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;&#xff1a;&#x63d0;&#x53d6;postId&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-variable language_\">self</span>.lock1.acquire()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.one_q.empty():\n                one_url = <span class=\"hljs-variable language_\">self</span>.one_q.get()\n                <span class=\"hljs-variable language_\">self</span>.lock1.release()\n                one_html = json.loads(<span class=\"hljs-variable language_\">self</span>.get_html(url=one_url))\n                <span class=\"hljs-comment\"># &#x4ece;one_html&#x4e2d;&#x63d0;&#x53d6;10&#x4e2a;postId,&#x7528;&#x4e8e;&#x62fc;&#x63a5;&#x804c;&#x4f4d;&#x8be6;&#x60c5;&#x9875;&#x7684;&#x94fe;&#x63a5;</span>\n                <span class=\"hljs-keyword\">for</span> job <span class=\"hljs-keyword\">in</span> one_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Posts&apos;</span>]:\n                    two_url = <span class=\"hljs-variable language_\">self</span>.two_url.<span class=\"hljs-built_in\">format</span>(job[<span class=\"hljs-string\">&apos;PostId&apos;</span>])\n                    <span class=\"hljs-comment\"># &#x62fc;&#x63a5;10&#x4e2a;&#x804c;&#x4f4d;&#x8be6;&#x60c5;&#x9875;&#x7684;&#x94fe;&#x63a5;,&#x653e;&#x5230;&#x4e8c;&#x7ea7;&#x961f;&#x5217;&#x4e2d;</span>\n                    <span class=\"hljs-variable language_\">self</span>.two_q.put(two_url)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-variable language_\">self</span>.lock1.release()\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_two_page</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x7ebf;&#x7a0b;2&#x4e8b;&#x4ef6;&#x51fd;&#x6570;: &#x63d0;&#x53d6;&#x5177;&#x4f53;&#x7684;&#x804c;&#x4f4d;&#x4fe1;&#x606f;&quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-keyword\">try</span>:\n                <span class=\"hljs-variable language_\">self</span>.lock2.acquire()\n                <span class=\"hljs-comment\"># &#x4e8c;&#x7ea7;&#x6216;&#x8005;&#x591a;&#x7ea7;&#x9875;&#x9762;&#x6570;&#x636e;&#x6293;&#x53d6;,&#x4ece;&#x961f;&#x5217;&#x4e2d;&#x83b7;&#x53d6;&#x5730;&#x5740;&#x65f6;&#x8981;&#x4f7f;&#x7528; timeout &#x53c2;&#x6570;</span>\n                two_url = <span class=\"hljs-variable language_\">self</span>.two_q.get(block=<span class=\"hljs-literal\">True</span>,timeout=<span class=\"hljs-number\">3</span>)\n                <span class=\"hljs-variable language_\">self</span>.lock2.release()\n                two_html = json.loads(<span class=\"hljs-variable language_\">self</span>.get_html(url=two_url))\n                item = {}\n                item[<span class=\"hljs-string\">&apos;job_name&apos;</span>] = two_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;RecruitPostName&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;job_address&apos;</span>] = two_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LocationName&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;job_type&apos;</span>] = two_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;CategoryName&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;job_time&apos;</span>] = two_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LastUpdateTime&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;job_resp&apos;</span>] = two_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Responsibility&apos;</span>]\n                item[<span class=\"hljs-string\">&apos;job_require&apos;</span>] = two_html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Requirement&apos;</span>]\n                <span class=\"hljs-built_in\">print</span>(item)\n                <span class=\"hljs-comment\"># &#x8ba1;&#x6570;</span>\n                <span class=\"hljs-variable language_\">self</span>.lock2.acquire()\n                <span class=\"hljs-variable language_\">self</span>.i += <span class=\"hljs-number\">1</span>\n                <span class=\"hljs-variable language_\">self</span>.lock2.release()\n\n            <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n                <span class=\"hljs-variable language_\">self</span>.lock2.release()\n                <span class=\"hljs-built_in\">print</span>(e)\n                <span class=\"hljs-keyword\">break</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url_in()\n        t1_list = []\n        t2_list = []\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">2</span>):\n            t1 = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_one_page)\n            t1_list.append(t1)\n            t1.start()\n\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>):\n            t2 = Thread(target=<span class=\"hljs-variable language_\">self</span>.parse_two_page)\n            t2_list.append(t2)\n            t2.start()\n\n        <span class=\"hljs-keyword\">for</span> t1 <span class=\"hljs-keyword\">in</span> t1_list:\n            t1.join()\n\n        <span class=\"hljs-keyword\">for</span> t2 <span class=\"hljs-keyword\">in</span> t2_list:\n            t2.join()\n\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x91cf;:&apos;</span>,<span class=\"hljs-variable language_\">self</span>.i)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    start_time = time.time()\n    spider = TencentSpider()\n    spider.run()\n    end_time = time.time()\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x65f6;&#x95f4;:%.2f&apos;</span> % (end_time-start_time))\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"977,1099"}},{"content":"<pre data-lines=\"1100,1120\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x6a21;&#x62df;&#x767b;&#x5f55;&#x65b9;&#x6cd5;1&#xff1a;&#x5148;&#x767b;&#x5f55;&#x6210;&#x529f;1&#x6b21;&#x6293;&#x53d6;&#x5230;cookie,&#x653e;&#x5230;headers&#x53c2;&#x6570;&#x4e2d;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login1</span>():\n    url = <span class=\"hljs-string\">&apos;https://www.douban.com/people/184511489/&apos;</span>\n    headers = {\n        <span class=\"hljs-string\">&apos;Cookie&apos;</span> : <span class=\"hljs-string\">&apos;ll=&quot;118097&quot;; bid=OIeiQx906Ao; _vwo_uuid_v2=DF6D7A7A77BA46F7ACB68A8D96CA88A96|aa16a454750021f20d21497f51d0281f; __utmz=30149280.1584941945.2.2.utmcsr=baidu|utmccn=(organic)|utmcmd=organic; __gads=ID=f85e628c9e148933:T=1584968550:S=ALNI_MaBJgnFB2-ivbQE7qJAzWyVtrWk3g; douban-profile-remind=1; push_noty_num=0; push_doumail_num=0; __yadk_uid=01ZB50eekFT7BwoJC8jhgHEKTmnLAcAc; _pk_ses.100001.8cb4=*; __utma=30149280.744802610.1584934896.1584968541.1585021249.6; __utmc=30149280; __utmt=1; dbcl2=&quot;184511489:KZM+1AtWiZ8&quot;; ck=Anhc; ap_v=0,6.0; __utmv=30149280.18451; __utmb=30149280.7.10.1585021249; _pk_id.100001.8cb4=5d4657a22afb29fd.1584968520.3.1585021636.1584973074.&apos;</span>,\n        <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36&apos;</span>\n    }\n    html = requests.get(url=url, headers=headers).text\n    <span class=\"hljs-built_in\">print</span>(html)\n\nlogin1()\n\n<span class=\"hljs-comment\"># cookie_dict: {&apos;ll&apos;:&apos;118097&apos;,&apos;bid&apos;:&apos;OIeiQx906Ao&apos;,&apos;_vwo_uuid_v2&apos;:&apos;DF6D7A7A77BA46&apos;,...}</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1100,1120"}},{"content":"<pre data-lines=\"1121,1143\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x4f7f;&#x7528;cookies&#x53c2;&#x6570;&#x6a21;&#x62df;&#x767b;&#x5f55;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n    url = <span class=\"hljs-string\">&apos;https://www.douban.com/people/184511489/&apos;</span>\n    headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36&apos;</span>}\n    cookie = <span class=\"hljs-string\">&apos;ll=&quot;118097&quot;; bid=OIeiQx906Ao; _vwo_uuid_v2=DF6D7A7A77BA46F7ACB68A8D96CA88A96|aa16a454750021f20d21497f51d0281f; __utmz=30149280.1584941945.2.2.utmcsr=baidu|utmccn=(organic)|utmcmd=organic; __gads=ID=f85e628c9e148933:T=1584968550:S=ALNI_MaBJgnFB2-ivbQE7qJAzWyVtrWk3g; douban-profile-remind=1; push_noty_num=0; push_doumail_num=0; __yadk_uid=01ZB50eekFT7BwoJC8jhgHEKTmnLAcAc; _pk_ses.100001.8cb4=*; __utma=30149280.744802610.1584934896.1584968541.1585021249.6; __utmc=30149280; __utmt=1; dbcl2=&quot;184511489:KZM+1AtWiZ8&quot;; ck=Anhc; ap_v=0,6.0; __utmv=30149280.18451; __utmb=30149280.7.10.1585021249; _pk_id.100001.8cb4=5d4657a22afb29fd.1584968520.3.1585021636.1584973074.&apos;</span>\n    cookies = {}\n    <span class=\"hljs-keyword\">for</span> kv <span class=\"hljs-keyword\">in</span> cookie.split(<span class=\"hljs-string\">&apos;; &apos;</span>):\n        key = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">0</span>]\n        value = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">1</span>]\n        cookies[key] = value\n\n    html = requests.get(url=url, headers=headers, cookies=cookies).text\n    <span class=\"hljs-built_in\">print</span>(html)\n\nlogin()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1121,1143"}},{"content":"<pre data-lines=\"1144,1174\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x4f7f;&#x7528; requests&#x6a21;&#x5757;&#x7684;session&#x7c7b;&#x6a21;&#x62df;&#x767b;&#x5f55;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n    <span class=\"hljs-comment\"># post_url:&#x767b;&#x5f55;&#x5730;&#x5740;  get_url:&#x9700;&#x8981;&#x6293;&#x53d6;&#x7684;&#x9875;&#x9762;</span>\n    post_url = <span class=\"hljs-string\">&apos;https://accounts.douban.com/j/mobile/login/basic&apos;</span>\n    get_url = <span class=\"hljs-string\">&apos;https://www.douban.com/people/184511489/&apos;</span>\n    headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36&apos;</span>}\n    <span class=\"hljs-comment\"># &#x5b9e;&#x4f8b;&#x5316;&#x4f1a;&#x8bdd;&#x4fdd;&#x6301;&#x7684;&#x5bf9;&#x8c61;</span>\n    s = requests.session()\n    <span class=\"hljs-comment\"># 1&#x3001;&#x5148;&#x767b;&#x5f55;</span>\n    data = {\n        <span class=\"hljs-string\">&apos;ck&apos;</span>: <span class=\"hljs-string\">&apos;&apos;</span>,\n        <span class=\"hljs-string\">&apos;name&apos;</span>: <span class=\"hljs-string\">&apos;13603263409&apos;</span>,\n        <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-string\">&apos;zhanshen001&apos;</span>,\n        <span class=\"hljs-string\">&apos;remember&apos;</span>: <span class=\"hljs-string\">&apos;false&apos;</span>,\n        <span class=\"hljs-string\">&apos;ticket&apos;</span>:<span class=\"hljs-string\">&apos;&apos;</span>,\n    }\n    s.post(url=post_url,data=data,headers=headers)\n    <span class=\"hljs-comment\"># 2&#x3001;&#x518d;&#x6293;&#x53d6;</span>\n    html = s.get(url=get_url, headers=headers).text\n    <span class=\"hljs-built_in\">print</span>(html)\n\nlogin()\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1144,1174"}},{"content":"<pre data-lines=\"1175,1193\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x6253;&#x5f00;Chome&#x6d4f;&#x89c8;&#x5668;,&#x8f93;&#x5165;&#x767e;&#x5ea6;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-comment\"># &#x5bfc;&#x5165;selenium &#x7684; webdriver &#x63a5;&#x53e3;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x6253;&#x5f00;&#x6d4f;&#x89c8;&#x5668; - &#x521b;&#x5efa;&#x6d4f;&#x89c8;&#x5668;&#x6d4f;&#x89c8;&#x5668;</span>\nbrowser = webdriver.Chrome()\n<span class=\"hljs-comment\"># 2&#x3001;&#x8f93;&#x5165;&#x5730;&#x5740;&#x6572;&#x56de;&#x8f66;</span>\nbrowser.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n<span class=\"hljs-comment\"># 3&#x3001;&#x83b7;&#x53d6;&#x5c4f;&#x5e55;&#x622a;&#x56fe;</span>\nbrowser.save_screenshot(<span class=\"hljs-string\">&apos;baidu.png&apos;</span>)\n<span class=\"hljs-comment\"># 4&#x3001;&#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;</span>\nbrowser.quit()\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1175,1193"}},{"content":"<pre data-lines=\"1194,1211\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x6253;&#x5f00;&#x767e;&#x5ea6; - &#x8f93;&#x5165;&#x8d75;&#x4e3d;&#x9896; - &#x70b9;&#x51fb;&#x767e;&#x5ea6;&#x4e00;&#x4e0b;&#x6309;&#x94ae;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x6253;&#x5f00;&#x6d4f;&#x89c8;&#x5668;</span>\ndriver = webdriver.Firefox()\n<span class=\"hljs-comment\"># 2&#x3001;&#x8f93;&#x5165;&#x767e;&#x5ea6;</span>\ndriver.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n<span class=\"hljs-comment\"># 3&#x3001;&#x627e;&#x5230;&#x641c;&#x7d22;&#x6846;&#x8282;&#x70b9;,&#x5e76;&#x53d1;&#x9001; &#x8d75;&#x4e3d;&#x9896;</span>\ndriver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;kw&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x8d75;&#x4e3d;&#x9896;&apos;</span>)\n<span class=\"hljs-comment\"># 4&#x3001;&#x627e;&#x5230;&#x767e;&#x5ea6;&#x4e00;&#x4e0b;&#x6309;&#x94ae;&#x8282;&#x70b9;,&#x5e76;&#x70b9;&#x51fb;</span>\ndriver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;su&quot;]&apos;</span>).click()\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1194,1211"}},{"content":"<pre data-lines=\"1212,1228\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61;&#x7684; page_source &#x5c5e;&#x6027;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\nbrowser = webdriver.Chrome()\n<span class=\"hljs-comment\"># &#x7a97;&#x53e3;&#x6700;&#x5927;&#x5316;</span>\nbrowser.maximize_window()\nbrowser.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\ncode = browser.page_source.find(<span class=\"hljs-string\">&apos;familyfamilyfamilyfamilyfamilyfamily&apos;</span>)\n<span class=\"hljs-built_in\">print</span>(code)\n\nbrowser.quit()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1212,1228"}},{"content":"<pre data-lines=\"1229,1266\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x732b;&#x773c;&#x7535;&#x5f71; top100 &#x6293;&#x53d6;,&#x4f7f;&#x7528; selenium+Chrome&#x5b9e;&#x73b0;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\nbrowser = webdriver.Chrome()\n<span class=\"hljs-comment\"># get()&#x65b9;&#x6cd5;&#xff1a;&#x4f1a;&#x7b49;&#x7740;&#x9875;&#x9762;&#x6240;&#x6709;&#x5143;&#x7d20;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x540e;,&#x624d;&#x4f1a;&#x7ee7;&#x7eed;&#x6267;&#x884c;&#x4ee3;&#x7801;</span>\nbrowser.get(<span class=\"hljs-string\">&apos;https://maoyan.com/board/4&apos;</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_one_page</span>():\n    dd_list = browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;app&quot;]/div/div/div[1]/dl/dd&apos;</span>)\n    <span class=\"hljs-keyword\">for</span> dd <span class=\"hljs-keyword\">in</span> dd_list:\n        item = {}\n        <span class=\"hljs-comment\"># text&#x5c5e;&#x6027;&#xff1a;&#x83b7;&#x53d6;&#x5f53;&#x524d;&#x8282;&#x70b9;&#x548c;&#x5b50;&#x8282;&#x70b9;&#x4ee5;&#x53ca;&#x540e;&#x4ee3;&#x8282;&#x70b9;&#x7684;&#x6587;&#x672c;&#x5185;&#x5bb9;</span>\n        li = dd.text.split(<span class=\"hljs-string\">&apos;\\n&apos;</span>)\n        item[<span class=\"hljs-string\">&apos;number&apos;</span>] = li[<span class=\"hljs-number\">0</span>].strip()\n        item[<span class=\"hljs-string\">&apos;name&apos;</span>] = li[<span class=\"hljs-number\">1</span>].strip()\n        item[<span class=\"hljs-string\">&apos;star&apos;</span>] = li[<span class=\"hljs-number\">2</span>].strip()\n        item[<span class=\"hljs-string\">&apos;time&apos;</span>] = li[<span class=\"hljs-number\">3</span>].strip()\n        item[<span class=\"hljs-string\">&apos;score&apos;</span>] = li[<span class=\"hljs-number\">4</span>].strip()\n        <span class=\"hljs-built_in\">print</span>(item)\n\n<span class=\"hljs-comment\"># &#x6293;&#x53d6;&#x6240;&#x6709;&#x9875;&#x7684;&#x6570;&#x636e;</span>\n<span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n    <span class=\"hljs-comment\"># &#x5148;&#x6293;&#x53d6;&#x7b2c;1&#x9875;</span>\n    parse_one_page()\n    <span class=\"hljs-comment\"># selenium&#x5728;&#x9875;&#x9762;&#x4e2d;&#x67e5;&#x627e;&#x8282;&#x70b9;&#x65f6;,&#x5982;&#x679c;&#x627e;&#x4e0d;&#x5230;&#x8be5;&#x8282;&#x70b9;&#x4f1a;&#x629b;&#x51fa;&#x5f02;&#x5e38;</span>\n    <span class=\"hljs-keyword\">try</span>:\n        browser.find_element_by_link_text(<span class=\"hljs-string\">&apos;&#x4e0b;&#x4e00;&#x9875;&apos;</span>).click()\n        time.sleep(<span class=\"hljs-number\">1</span>)\n    <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n        browser.quit()\n        <span class=\"hljs-keyword\">break</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1229,1266"}}],"payload":{"tag":"h3","lines":"802,803"}}],"payload":{"tag":"h2","lines":"795,796"}}],"payload":{"tag":"h1","lines":"107,108"}}]},{})</script>
</body>
</html>
