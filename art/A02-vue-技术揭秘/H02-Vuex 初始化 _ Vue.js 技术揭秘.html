<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#vuex-%E5%88%9D%E5%A7%8B%E5%8C%96\">#</a> Vuex &#x521d;&#x59cb;&#x5316;","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,7\"><code>&#x8fd9;&#x4e00;&#x8282;&#x6211;&#x4eec;&#x4e3b;&#x8981;&#x6765;&#x5206;&#x6790; Vuex &#x7684;&#x521d;&#x59cb;&#x5316;&#x8fc7;&#x7a0b;&#xff0c;&#x5b83;&#x5305;&#x62ec;&#x5b89;&#x88c5;&#x3001;Store &#x5b9e;&#x4f8b;&#x5316;&#x8fc7;&#x7a0b; 2 &#x4e2a;&#x65b9;&#x9762;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,7"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#%E5%AE%89%E8%A3%85\">#</a> &#x5b89;&#x88c5;","children":[{"content":"<pre data-lines=\"11,12\"><code>&#x5f53;&#x6211;&#x4eec;&#x5728;&#x4ee3;&#x7801;&#x4e2d;&#x901a;&#x8fc7; `import Vuex from &apos;vuex&apos;` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x5f15;&#x7528;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"11,12"}},{"content":"<pre data-lines=\"13,25\"><code data-lines=\"13,25\">export default {\n<span class=\"hljs-built_in\">  Store,</span>\n<span class=\"hljs-built_in\">  install,</span>\n<span class=\"hljs-title\">  version:</span> &apos;__VERSION__&apos;,\n<span class=\"hljs-built_in\">  mapState,</span>\n<span class=\"hljs-built_in\">  mapMutations,</span>\n<span class=\"hljs-built_in\">  mapGetters,</span>\n<span class=\"hljs-built_in\">  mapActions,</span>\n  createNamespacedHelpers\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"13,25"}},{"content":"<pre data-lines=\"26,27\"><code>&#x548c; Vue-Router &#x4e00;&#x6837;&#xff0c;Vuex &#x4e5f;&#x540c;&#x6837;&#x5b58;&#x5728;&#x4e00;&#x4e2a;&#x9759;&#x6001;&#x7684; `install` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/store.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"26,27"}},{"content":"<pre data-lines=\"28,42\"><code data-lines=\"28,42\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">install</span> (<span class=\"hljs-params\">_Vue</span>) {\n  <span class=\"hljs-keyword\">if</span> (Vue &amp;&amp; _Vue === Vue) {\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n      <span class=\"hljs-built_in\">console</span>.error(\n        <span class=\"hljs-string\">&apos;[vuex] already installed. Vue.use(Vuex) should be called only once.&apos;</span>\n      )\n    }\n    <span class=\"hljs-keyword\">return</span>\n  }\n  Vue = _Vue\n  applyMixin(Vue)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"28,42"}},{"content":"<pre data-lines=\"43,44\"><code>`install` &#x7684;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x628a;&#x4f20;&#x5165;&#x7684; `_Vue` &#x8d4b;&#x503c;&#x7ed9; `Vue` &#x5e76;&#x6267;&#x884c;&#x4e86; `applyMixin(Vue)` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/mixin.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"43,44"}},{"content":"<pre data-lines=\"45,80\"><code data-lines=\"45,80\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">Vue</span>) {\n  <span class=\"hljs-keyword\">const</span> version = <span class=\"hljs-title class_\">Number</span>(<span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\">version</span>.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&apos;.&apos;</span>)[<span class=\"hljs-number\">0</span>])\n\n  <span class=\"hljs-keyword\">if</span> (version &gt;= <span class=\"hljs-number\">2</span>) {\n    <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-title function_\">mixin</span>({ <span class=\"hljs-attr\">beforeCreate</span>: vuexInit })\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// override init and inject vuex init procedure</span>\n    <span class=\"hljs-comment\">// for 1.x backwards compatibility.</span>\n    <span class=\"hljs-keyword\">const</span> _init = <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">_init</span>\n    <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">_init</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">options = {}</span>) {\n      options.<span class=\"hljs-property\">init</span> = options.<span class=\"hljs-property\">init</span>\n        ? [vuexInit].<span class=\"hljs-title function_\">concat</span>(options.<span class=\"hljs-property\">init</span>)\n        : vuexInit\n      _init.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>, options)\n    }\n  }\n\n  <span class=\"hljs-comment\">/**\n   * Vuex init hook, injected into each instances init hooks list.\n   */</span>\n\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">vuexInit</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">const</span> options = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">&#x24;options</span>\n    <span class=\"hljs-comment\">// store injection</span>\n    <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">store</span>) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">&#x24;store</span> = <span class=\"hljs-keyword\">typeof</span> options.<span class=\"hljs-property\">store</span> === <span class=\"hljs-string\">&apos;function&apos;</span>\n        ? options.<span class=\"hljs-title function_\">store</span>()\n        : options.<span class=\"hljs-property\">store</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">parent</span> &amp;&amp; options.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">&#x24;store</span>) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">&#x24;store</span> = options.<span class=\"hljs-property\">parent</span>.<span class=\"hljs-property\">&#x24;store</span>\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"45,80"}},{"content":"<pre data-lines=\"81,82\"><code>`applyMixin` &#x5c31;&#x662f;&#x8fd9;&#x4e2a; `export default function`&#xff0c;&#x5b83;&#x8fd8;&#x517c;&#x5bb9;&#x4e86; Vue 1.0 &#x7684;&#x7248;&#x672c;&#xff0c;&#x8fd9;&#x91cc;&#x6211;&#x4eec;&#x53ea;&#x5173;&#x6ce8; Vue 2.0 &#x4ee5;&#x4e0a;&#x7248;&#x672c;&#x7684;&#x903b;&#x8f91;&#xff0c;&#x5b83;&#x5176;&#x5b9e;&#x5c31;&#x5168;&#x5c40;&#x6df7;&#x5165;&#x4e86;&#x4e00;&#x4e2a; `beforeCreate` &#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#x975e;&#x5e38;&#x7b80;&#x5355;&#xff0c;&#x5c31;&#x662f;&#x628a; `options.store` &#x4fdd;&#x5b58;&#x5728;&#x6240;&#x6709;&#x7ec4;&#x4ef6;&#x7684; `this.&#x24;store` &#x4e2d;&#xff0c;&#x8fd9;&#x4e2a; `options.store` &#x5c31;&#x662f;&#x6211;&#x4eec;&#x5728;&#x5b9e;&#x4f8b;&#x5316; `Store` &#x5bf9;&#x8c61;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x7a0d;&#x540e;&#x6211;&#x4eec;&#x4f1a;&#x4ecb;&#x7ecd;&#xff0c;&#x8fd9;&#x4e5f;&#x662f;&#x4e3a;&#x4ec0;&#x4e48;&#x6211;&#x4eec;&#x5728;&#x7ec4;&#x4ef6;&#x4e2d;&#x53ef;&#x4ee5;&#x901a;&#x8fc7; `this.&#x24;store` &#x8bbf;&#x95ee;&#x5230;&#x8fd9;&#x4e2a;&#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"81,82"}}],"payload":{"tag":"h2","lines":"8,10"}},{"content":"<a href=\"#store-%E5%AE%9E%E4%BE%8B%E5%8C%96\">#</a> Store &#x5b9e;&#x4f8b;&#x5316;","children":[{"content":"<a href=\"#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%A8%A1%E5%9D%97\">#</a> &#x521d;&#x59cb;&#x5316;&#x6a21;&#x5757;","children":[{"content":"<pre data-lines=\"173,174\"><code>&#x5728;&#x5206;&#x6790;&#x6a21;&#x5757;&#x521d;&#x59cb;&#x5316;&#x4e4b;&#x524d;&#xff0c;&#x6211;&#x4eec;&#x5148;&#x6765;&#x4e86;&#x89e3;&#x4e00;&#x4e0b;&#x6a21;&#x5757;&#x5bf9;&#x4e8e; Vuex &#x7684;&#x610f;&#x4e49;&#xff1a;&#x7531;&#x4e8e;&#x4f7f;&#x7528;&#x5355;&#x4e00;&#x72b6;&#x6001;&#x6811;&#xff0c;&#x5e94;&#x7528;&#x7684;&#x6240;&#x6709;&#x72b6;&#x6001;&#x4f1a;&#x96c6;&#x4e2d;&#x5230;&#x4e00;&#x4e2a;&#x6bd4;&#x8f83;&#x5927;&#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x5f53;&#x5e94;&#x7528;&#x53d8;&#x5f97;&#x975e;&#x5e38;&#x590d;&#x6742;&#x65f6;&#xff0c;`store` &#x5bf9;&#x8c61;&#x5c31;&#x6709;&#x53ef;&#x80fd;&#x53d8;&#x5f97;&#x76f8;&#x5f53;&#x81c3;&#x80bf;&#x3002;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x4ee5;&#x4e0a;&#x95ee;&#x9898;&#xff0c;Vuex &#x5141;&#x8bb8;&#x6211;&#x4eec;&#x5c06; `store` &#x5206;&#x5272;&#x6210;&#x6a21;&#x5757;&#xff08;module&#xff09;&#x3002;&#x6bcf;&#x4e2a;&#x6a21;&#x5757;&#x62e5;&#x6709;&#x81ea;&#x5df1;&#x7684; `state`&#x3001;`mutation`&#x3001;`action`&#x3001;`getter`&#xff0c;&#x751a;&#x81f3;&#x662f;&#x5d4c;&#x5957;&#x5b50;&#x6a21;&#x5757;&#x2014;&#x2014;&#x4ece;&#x4e0a;&#x81f3;&#x4e0b;&#x8fdb;&#x884c;&#x540c;&#x6837;&#x65b9;&#x5f0f;&#x7684;&#x5206;&#x5272;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"173,174"}},{"content":"<pre data-lines=\"175,200\"><code data-lines=\"175,200\"><span class=\"hljs-keyword\">const</span> moduleA = {\n  <span class=\"hljs-keyword\">state</span>: { ... },\n  mutations: { ... },\n  actions: { ... },\n  getters: { ... }\n}\n\n<span class=\"hljs-keyword\">const</span> moduleB = {\n  <span class=\"hljs-keyword\">state</span>: { ... },\n  mutations: { ... },\n  actions: { ... },\n  getters: { ... },\n}\n\n<span class=\"hljs-keyword\">const</span> store = new Vuex.Store({\n  modules: {\n    a: moduleA,\n    b: moduleB\n  }\n})\n\nstore.<span class=\"hljs-keyword\">state</span>.a // -&gt; moduleA &#x7684;&#x72b6;&#x6001;\nstore.<span class=\"hljs-keyword\">state</span>.b // -&gt; moduleB &#x7684;&#x72b6;&#x6001; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"175,200"}},{"content":"<pre data-lines=\"201,202\"><code>&#x6240;&#x4ee5;&#x4ece;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x4e0a;&#x6765;&#x770b;&#xff0c;&#x6a21;&#x5757;&#x7684;&#x8bbe;&#x8ba1;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x6811;&#x578b;&#x7ed3;&#x6784;&#xff0c;`store` &#x672c;&#x8eab;&#x53ef;&#x4ee5;&#x7406;&#x89e3;&#x4e3a;&#x4e00;&#x4e2a; `root module`&#xff0c;&#x5b83;&#x4e0b;&#x9762;&#x7684; `modules` &#x5c31;&#x662f;&#x5b50;&#x6a21;&#x5757;&#xff0c;Vuex &#x9700;&#x8981;&#x5b8c;&#x6210;&#x8fd9;&#x9897;&#x6811;&#x7684;&#x6784;&#x5efa;&#xff0c;&#x6784;&#x5efa;&#x8fc7;&#x7a0b;&#x7684;&#x5165;&#x53e3;&#x5c31;&#x662f;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"201,202"}},{"content":"<pre data-lines=\"203,206\"><code data-lines=\"203,206\"><span class=\"hljs-keyword\">this</span>._modules = <span class=\"hljs-keyword\">new</span> ModuleCollection(<span class=\"hljs-keyword\">options</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"203,206"}},{"content":"<pre data-lines=\"209,264\"><code data-lines=\"209,264\">export default <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ModuleCollection</span> {\n  <span class=\"hljs-keyword\">constructor</span> (rawRootModule) {\n    <span class=\"hljs-comment\">// register root module (Vuex.Store options)</span>\n    <span class=\"hljs-keyword\">this</span>.register([], rawRootModule, <span class=\"hljs-literal\">false</span>)\n  }\n\n  <span class=\"hljs-keyword\">get</span> (path) {\n    <span class=\"hljs-keyword\">return</span> path.reduce((module, key) =&gt; {\n      <span class=\"hljs-keyword\">return</span> module.getChild(key)\n    }, <span class=\"hljs-keyword\">this</span>.root)\n  }\n\n  getNamespace (path) {\n    let module = <span class=\"hljs-keyword\">this</span>.root\n    <span class=\"hljs-keyword\">return</span> path.reduce((namespace, key) =&gt; {\n      module = module.getChild(key)\n      <span class=\"hljs-keyword\">return</span> namespace + (module.namespaced ? key + <span class=\"hljs-string\">&apos;/&apos;</span> : <span class=\"hljs-string\">&apos;&apos;</span>)\n    }, <span class=\"hljs-string\">&apos;&apos;</span>)\n  }\n\n  update (rawRootModule) {\n    update([], <span class=\"hljs-keyword\">this</span>.root, rawRootModule)\n  }\n\n  register (path, rawModule, runtime = <span class=\"hljs-literal\">true</span>) {\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n      assertRawModule(path, rawModule)\n    }\n\n    <span class=\"hljs-keyword\">const</span> newModule = new Module(rawModule, runtime)\n    <span class=\"hljs-keyword\">if</span> (path.length === <span class=\"hljs-number\">0</span>) {\n      <span class=\"hljs-keyword\">this</span>.root = newModule\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">const</span> parent = <span class=\"hljs-keyword\">this</span>.<span class=\"hljs-keyword\">get</span>(path.slice(<span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>))\n      parent.addChild(path[path.length - <span class=\"hljs-number\">1</span>], newModule)\n    }\n\n    <span class=\"hljs-comment\">// register nested modules</span>\n    <span class=\"hljs-keyword\">if</span> (rawModule.modules) {\n      forEachValue(rawModule.modules, (rawChildModule, key) =&gt; {\n        <span class=\"hljs-keyword\">this</span>.register(path.concat(key), rawChildModule, runtime)\n      })\n    }\n  }\n\n  unregister (path) {\n    <span class=\"hljs-keyword\">const</span> parent = <span class=\"hljs-keyword\">this</span>.<span class=\"hljs-keyword\">get</span>(path.slice(<span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>))\n    <span class=\"hljs-keyword\">const</span> key = path[path.length - <span class=\"hljs-number\">1</span>]\n    <span class=\"hljs-keyword\">if</span> (!parent.getChild(key).runtime) <span class=\"hljs-keyword\">return</span>\n\n    parent.removeChild(key)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"209,264"}},{"content":"<pre data-lines=\"265,268\"><code>`ModuleCollection` &#x5b9e;&#x4f8b;&#x5316;&#x7684;&#x8fc7;&#x7a0b;&#x5c31;&#x662f;&#x6267;&#x884c;&#x4e86; `register` &#x65b9;&#x6cd5;&#xff0c; `register` &#x63a5;&#x6536; 3 &#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5176;&#x4e2d; `path` &#x8868;&#x793a;&#x8def;&#x5f84;&#xff0c;&#x56e0;&#x4e3a;&#x6211;&#x4eec;&#x6574;&#x4f53;&#x76ee;&#x6807;&#x662f;&#x8981;&#x6784;&#x5efa;&#x4e00;&#x9897;&#x6a21;&#x5757;&#x6811;&#xff0c;`path` &#x662f;&#x5728;&#x6784;&#x5efa;&#x6811;&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#x7ef4;&#x62a4;&#x7684;&#x8def;&#x5f84;&#xff1b;`rawModule` &#x8868;&#x793a;&#x5b9a;&#x4e49;&#x6a21;&#x5757;&#x7684;&#x539f;&#x59cb;&#x914d;&#x7f6e;&#xff1b;`runtime` &#x8868;&#x793a;&#x662f;&#x5426;&#x662f;&#x4e00;&#x4e2a;&#x8fd0;&#x884c;&#x65f6;&#x521b;&#x5efa;&#x7684;&#x6a21;&#x5757;&#x3002;\n\n`register` &#x65b9;&#x6cd5;&#x9996;&#x5148;&#x901a;&#x8fc7; `const newModule = new Module(rawModule, runtime)` &#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a; `Module` &#x7684;&#x5b9e;&#x4f8b;&#xff0c;`Module` &#x662f;&#x7528;&#x6765;&#x63cf;&#x8ff0;&#x5355;&#x4e2a;&#x6a21;&#x5757;&#x7684;&#x7c7b;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/module/module.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"265,268"}},{"content":"<pre data-lines=\"269,335\"><code data-lines=\"269,335\">export default <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Module</span> {\n  <span class=\"hljs-keyword\">constructor</span> (rawModule, runtime) {\n    <span class=\"hljs-keyword\">this</span>.runtime = runtime\n    <span class=\"hljs-comment\">// Store some children item</span>\n    <span class=\"hljs-keyword\">this</span>._children = Object.create(<span class=\"hljs-literal\">null</span>)\n    <span class=\"hljs-comment\">// Store the origin module object which passed by programmer</span>\n    <span class=\"hljs-keyword\">this</span>._rawModule = rawModule\n    <span class=\"hljs-keyword\">const</span> rawState = rawModule.state\n\n    <span class=\"hljs-comment\">// Store the origin module&apos;s state</span>\n    <span class=\"hljs-keyword\">this</span>.state = (typeof rawState === <span class=\"hljs-string\">&apos;function&apos;</span> ? rawState() : rawState) || {}\n  }\n\n  <span class=\"hljs-keyword\">get</span> namespaced () {\n    <span class=\"hljs-keyword\">return</span> !!<span class=\"hljs-keyword\">this</span>._rawModule.namespaced\n  }\n\n  addChild (key, module) {\n    <span class=\"hljs-keyword\">this</span>._children[key] = module\n  }\n\n  removeChild (key) {\n    delete <span class=\"hljs-keyword\">this</span>._children[key]\n  }\n\n  getChild (key) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._children[key]\n  }\n\n  update (rawModule) {\n    <span class=\"hljs-keyword\">this</span>._rawModule.namespaced = rawModule.namespaced\n    <span class=\"hljs-keyword\">if</span> (rawModule.actions) {\n      <span class=\"hljs-keyword\">this</span>._rawModule.actions = rawModule.actions\n    }\n    <span class=\"hljs-keyword\">if</span> (rawModule.mutations) {\n      <span class=\"hljs-keyword\">this</span>._rawModule.mutations = rawModule.mutations\n    }\n    <span class=\"hljs-keyword\">if</span> (rawModule.getters) {\n      <span class=\"hljs-keyword\">this</span>._rawModule.getters = rawModule.getters\n    }\n  }\n\n  forEachChild (fn) {\n    forEachValue(<span class=\"hljs-keyword\">this</span>._children, fn)\n  }\n\n  forEachGetter (fn) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>._rawModule.getters) {\n      forEachValue(<span class=\"hljs-keyword\">this</span>._rawModule.getters, fn)\n    }\n  }\n\n  forEachAction (fn) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>._rawModule.actions) {\n      forEachValue(<span class=\"hljs-keyword\">this</span>._rawModule.actions, fn)\n    }\n  }\n\n  forEachMutation (fn) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>._rawModule.mutations) {\n      forEachValue(<span class=\"hljs-keyword\">this</span>._rawModule.mutations, fn)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"269,335"}},{"content":"<pre data-lines=\"336,348\"><code>&#x6765;&#x770b;&#x4e00;&#x4e0b; `Module` &#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x5bf9;&#x4e8e;&#x6bcf;&#x4e2a;&#x6a21;&#x5757;&#x800c;&#x8a00;&#xff0c;`this._rawModule` &#x8868;&#x793a;&#x6a21;&#x5757;&#x7684;&#x914d;&#x7f6e;&#xff0c;`this._children` &#x8868;&#x793a;&#x5b83;&#x7684;&#x6240;&#x6709;&#x5b50;&#x6a21;&#x5757;&#xff0c;`this.state` &#x8868;&#x793a;&#x8fd9;&#x4e2a;&#x6a21;&#x5757;&#x5b9a;&#x4e49;&#x7684; `state`&#x3002;\n\n&#x56de;&#x5230; `register`&#xff0c;&#x90a3;&#x4e48;&#x5728;&#x5b9e;&#x4f8b;&#x5316;&#x4e00;&#x4e2a; `Module` &#x540e;&#xff0c;&#x5224;&#x65ad;&#x5f53;&#x524d;&#x7684; `path` &#x7684;&#x957f;&#x5ea6;&#x5982;&#x679c;&#x4e3a; 0&#xff0c;&#x5219;&#x8bf4;&#x660e;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x6839;&#x6a21;&#x5757;&#xff0c;&#x6240;&#x4ee5;&#x628a; `newModule` &#x8d4b;&#x503c;&#x7ed9;&#x4e86; `this.root`&#xff0c;&#x5426;&#x5219;&#x5c31;&#x9700;&#x8981;&#x5efa;&#x7acb;&#x7236;&#x5b50;&#x5173;&#x7cfb;&#x4e86;&#xff1a;\n\n```\nconst parent = this.get(path.slice(0, -1))\nparent.addChild(path[path.length - 1], newModule) \n```\n\n&#x6211;&#x4eec;&#x5148;&#x5927;&#x4f53;&#x4e0a;&#x4e86;&#x89e3;&#x5b83;&#x7684;&#x903b;&#x8f91;&#xff1a;&#x9996;&#x5148;&#x6839;&#x636e;&#x8def;&#x5f84;&#x83b7;&#x53d6;&#x5230;&#x7236;&#x6a21;&#x5757;&#xff0c;&#x7136;&#x540e;&#x518d;&#x8c03;&#x7528;&#x7236;&#x6a21;&#x5757;&#x7684; `addChild` &#x65b9;&#x6cd5;&#x5efa;&#x7acb;&#x7236;&#x5b50;&#x5173;&#x7cfb;&#x3002;\n\n`register` &#x7684;&#x6700;&#x540e;&#x4e00;&#x6b65;&#xff0c;&#x5c31;&#x662f;&#x904d;&#x5386;&#x5f53;&#x524d;&#x6a21;&#x5757;&#x5b9a;&#x4e49;&#x4e2d;&#x7684;&#x6240;&#x6709; `modules`&#xff0c;&#x6839;&#x636e; `key` &#x4f5c;&#x4e3a; `path`&#xff0c;&#x9012;&#x5f52;&#x8c03;&#x7528; `register` &#x65b9;&#x6cd5;&#xff0c;&#x8fd9;&#x6837;&#x6211;&#x4eec;&#x518d;&#x56de;&#x8fc7;&#x5934;&#x770b;&#x4e00;&#x4e0b;&#x5efa;&#x7acb;&#x7236;&#x5b50;&#x5173;&#x7cfb;&#x7684;&#x903b;&#x8f91;&#xff0c;&#x9996;&#x5148;&#x6267;&#x884c;&#x4e86; `this.get(path.slice(0, -1)` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"336,348"}},{"content":"<pre data-lines=\"349,356\"><code data-lines=\"349,356\">get <span class=\"hljs-built_in\">(path</span>) {\n  <span class=\"hljs-keyword\">return</span><span class=\"hljs-built_in\"> path</span>.reduce((<span class=\"hljs-keyword\">module</span>,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">module</span>.getChild<span class=\"hljs-built_in\">(key</span>)\n  }, this<span class=\"hljs-built_in\">.root</span>)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"349,356"}},{"content":"<pre data-lines=\"357,358\"><code>&#x4f20;&#x5165;&#x7684; `path` &#x662f;&#x5b83;&#x7684;&#x7236;&#x6a21;&#x5757;&#x7684; `path`&#xff0c;&#x7136;&#x540e;&#x4ece;&#x6839;&#x6a21;&#x5757;&#x5f00;&#x59cb;&#xff0c;&#x901a;&#x8fc7; `reduce` &#x65b9;&#x6cd5;&#x4e00;&#x5c42;&#x5c42;&#x53bb;&#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684;&#x6a21;&#x5757;&#xff0c;&#x67e5;&#x627e;&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x6267;&#x884c;&#x7684;&#x662f; `module.getChild(key)` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"357,358"}},{"content":"<pre data-lines=\"359,364\"><code data-lines=\"359,364\">getChild (key) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._children[key]\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"359,364"}},{"content":"<pre data-lines=\"365,366\"><code>&#x5176;&#x5b9e;&#x5c31;&#x662f;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x6a21;&#x5757;&#x7684; `_children` &#x4e2d;&#x5bf9;&#x5e94; `key` &#x7684;&#x6a21;&#x5757;&#xff0c;&#x90a3;&#x4e48;&#x6bcf;&#x4e2a;&#x6a21;&#x5757;&#x7684; `_children` &#x662f;&#x5982;&#x4f55;&#x6dfb;&#x52a0;&#x7684;&#x5462;&#xff0c;&#x662f;&#x901a;&#x8fc7;&#x6267;&#x884c; `parent.addChild(path[path.length - 1], newModule)` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"365,366"}},{"content":"<pre data-lines=\"367,372\"><code data-lines=\"367,372\">addChild <span class=\"hljs-built_in\">(key</span>, <span class=\"hljs-keyword\">module</span>) {\n  this._children<span class=\"hljs-built_in\">[key</span>] = <span class=\"hljs-keyword\">module</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"367,372"}},{"content":"<pre data-lines=\"373,374\"><code>&#x6240;&#x4ee5;&#x8bf4;&#x5bf9;&#x4e8e; `root module` &#x7684;&#x4e0b;&#x4e00;&#x5c42; `modules` &#x6765;&#x8bf4;&#xff0c;&#x5b83;&#x4eec;&#x7684; `parent` &#x5c31;&#x662f; `root module`&#xff0c;&#x90a3;&#x4e48;&#x4ed6;&#x4eec;&#x5c31;&#x4f1a;&#x88ab;&#x6dfb;&#x52a0;&#x7684; `root module` &#x7684; `_children` &#x4e2d;&#x3002;&#x6bcf;&#x4e2a;&#x5b50;&#x6a21;&#x5757;&#x901a;&#x8fc7;&#x8def;&#x5f84;&#x627e;&#x5230;&#x5b83;&#x7684;&#x7236;&#x6a21;&#x5757;&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7;&#x7236;&#x6a21;&#x5757;&#x7684; `addChild` &#x65b9;&#x6cd5;&#x5efa;&#x7acb;&#x7236;&#x5b50;&#x5173;&#x7cfb;&#xff0c;&#x9012;&#x5f52;&#x6267;&#x884c;&#x8fd9;&#x6837;&#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x6700;&#x7ec8;&#x5c31;&#x5efa;&#x7acb;&#x4e00;&#x9897;&#x5b8c;&#x6574;&#x7684;&#x6a21;&#x5757;&#x6811;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"373,374"}}],"payload":{"tag":"h3","lines":"171,172"}},{"content":"<a href=\"#%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97\">#</a> &#x5b89;&#x88c5;&#x6a21;&#x5757;","children":[{"content":"<pre data-lines=\"377,378\"><code>&#x521d;&#x59cb;&#x5316;&#x6a21;&#x5757;&#x540e;&#xff0c;&#x6267;&#x884c;&#x5b89;&#x88c5;&#x6a21;&#x5757;&#x7684;&#x76f8;&#x5173;&#x903b;&#x8f91;&#xff0c;&#x5b83;&#x7684;&#x76ee;&#x6807;&#x5c31;&#x662f;&#x5bf9;&#x6a21;&#x5757;&#x4e2d;&#x7684; `state`&#x3001;`getters`&#x3001;`mutations`&#x3001;`actions` &#x505a;&#x521d;&#x59cb;&#x5316;&#x5de5;&#x4f5c;&#xff0c;&#x5b83;&#x7684;&#x5165;&#x53e3;&#x4ee3;&#x7801;&#x662f;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"377,378"}},{"content":"<pre data-lines=\"379,383\"><code data-lines=\"379,383\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">state</span> = this._modules.root.<span class=\"hljs-keyword\">state</span>\ninstallModule(this, <span class=\"hljs-keyword\">state</span>, [], this._modules.root) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"379,383"}},{"content":"<pre data-lines=\"384,385\"><code>&#x6765;&#x770b;&#x4e00;&#x4e0b; `installModule` &#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"384,385"}},{"content":"<pre data-lines=\"386,428\"><code data-lines=\"386,428\"><span class=\"hljs-keyword\">function</span> installModule (store, rootState,<span class=\"hljs-built_in\"> path</span>, <span class=\"hljs-keyword\">module</span>, hot) {\n  const isRoot = <span class=\"hljs-built_in\">!path</span>.length\n  const <span class=\"hljs-type\">namespace</span> = store._modules.getNamespace<span class=\"hljs-built_in\">(path</span>)\n\n  // register <span class=\"hljs-keyword\">in</span> <span class=\"hljs-type\">namespace</span> <span class=\"hljs-keyword\">map</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">module</span>.namespaced) {\n    store._modulesNamespaceMap[<span class=\"hljs-type\">namespace</span>] = <span class=\"hljs-keyword\">module</span>\n  }\n\n  // set state\n  <span class=\"hljs-keyword\">if</span> (!isRoot &amp;&amp; !hot) {\n    const parentState = getNestedState(rootState,<span class=\"hljs-built_in\"> path</span>.slice(<span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>))\n    const moduleName =<span class=\"hljs-built_in\"> path</span><span class=\"hljs-built_in\">[path</span>.length - <span class=\"hljs-number\">1</span>]\n    store._withCommit(() =&gt; {\n      Vue.set(parentState, moduleName, <span class=\"hljs-keyword\">module</span>.state)\n    })\n  }\n\n  const local = <span class=\"hljs-keyword\">module</span>.<span class=\"hljs-keyword\">context</span> = makeLocalContext(store, <span class=\"hljs-type\">namespace</span>,<span class=\"hljs-built_in\"> path</span>)\n\n  <span class=\"hljs-keyword\">module</span>.forEachMutation((mutation,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n    const namespacedType = <span class=\"hljs-type\">namespace</span> +<span class=\"hljs-built_in\"> key</span>\n    registerMutation(store, namespacedType, mutation, local)\n  })\n\n  <span class=\"hljs-keyword\">module</span>.forEachAction((action,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n    const type = action<span class=\"hljs-built_in\">.root</span> ?<span class=\"hljs-built_in\"> key</span> : <span class=\"hljs-type\">namespace</span> +<span class=\"hljs-built_in\"> key</span>\n    const handler = action.handler || action\n    registerAction(store, type, handler, local)\n  })\n\n  <span class=\"hljs-keyword\">module</span>.forEachGetter((getter,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n    const namespacedType = <span class=\"hljs-type\">namespace</span> +<span class=\"hljs-built_in\"> key</span>\n    registerGetter(store, namespacedType, getter, local)\n  })\n\n  <span class=\"hljs-keyword\">module</span>.forEachChild((child,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n    installModule(store, rootState,<span class=\"hljs-built_in\"> path</span><span class=\"hljs-built_in\">.concat</span><span class=\"hljs-built_in\">(key</span>), child, hot)\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"386,428"}},{"content":"<pre data-lines=\"429,432\"><code>`installModule` &#x65b9;&#x6cd5;&#x652f;&#x6301; 5 &#x4e2a;&#x53c2;&#x6570;&#xff0c;`store` &#x8868;&#x793a; `root store`&#xff1b;`state` &#x8868;&#x793a; `root state`&#xff1b;`path` &#x8868;&#x793a;&#x6a21;&#x5757;&#x7684;&#x8bbf;&#x95ee;&#x8def;&#x5f84;&#xff1b;`module` &#x8868;&#x793a;&#x5f53;&#x524d;&#x7684;&#x6a21;&#x5757;&#xff0c;`hot` &#x8868;&#x793a;&#x662f;&#x5426;&#x662f;&#x70ed;&#x66f4;&#x65b0;&#x3002;\n\n&#x63a5;&#x4e0b;&#x6765;&#x770b;&#x51fd;&#x6570;&#x903b;&#x8f91;&#xff0c;&#x8fd9;&#x91cc;&#x6d89;&#x53ca;&#x5230;&#x4e86;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x7684;&#x6982;&#x5ff5;&#xff0c;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x6a21;&#x5757;&#x5185;&#x90e8;&#x7684; `action`&#x3001;`mutation` &#x548c; `getter` &#x662f;&#x6ce8;&#x518c;&#x5728;&#x5168;&#x5c40;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x7684;&#x2014;&#x2014;&#x8fd9;&#x6837;&#x4f7f;&#x5f97;&#x591a;&#x4e2a;&#x6a21;&#x5757;&#x80fd;&#x591f;&#x5bf9;&#x540c;&#x4e00; `mutation` &#x6216; `action` &#x4f5c;&#x51fa;&#x54cd;&#x5e94;&#x3002;&#x5982;&#x679c;&#x6211;&#x4eec;&#x5e0c;&#x671b;&#x6a21;&#x5757;&#x5177;&#x6709;&#x66f4;&#x9ad8;&#x7684;&#x5c01;&#x88c5;&#x5ea6;&#x548c;&#x590d;&#x7528;&#x6027;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x6dfb;&#x52a0; `namespaced: true` &#x7684;&#x65b9;&#x5f0f;&#x4f7f;&#x5176;&#x6210;&#x4e3a;&#x5e26;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x7684;&#x6a21;&#x5757;&#x3002;&#x5f53;&#x6a21;&#x5757;&#x88ab;&#x6ce8;&#x518c;&#x540e;&#xff0c;&#x5b83;&#x7684;&#x6240;&#x6709; `getter`&#x3001;`action` &#x53ca; `mutation` &#x90fd;&#x4f1a;&#x81ea;&#x52a8;&#x6839;&#x636e;&#x6a21;&#x5757;&#x6ce8;&#x518c;&#x7684;&#x8def;&#x5f84;&#x8c03;&#x6574;&#x547d;&#x540d;&#x3002;&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"429,432"}},{"content":"<pre data-lines=\"433,475\"><code data-lines=\"433,475\">const <span class=\"hljs-attr\">store</span> <span class=\"hljs-operator\">=</span> new Vuex.Store(<span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">  modules:</span> <span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">    account:</span> <span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">      namespaced:</span> true,\n\n      <span class=\"hljs-comment\">// &#x6a21;&#x5757;&#x5185;&#x5bb9;&#xff08;module assets&#xff09;</span>\n<span class=\"hljs-symbol\">      state:</span> <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span>, <span class=\"hljs-comment\">// &#x6a21;&#x5757;&#x5185;&#x7684;&#x72b6;&#x6001;&#x5df2;&#x7ecf;&#x662f;&#x5d4c;&#x5957;&#x7684;&#x4e86;&#xff0c;&#x4f7f;&#x7528; `namespaced` &#x5c5e;&#x6027;&#x4e0d;&#x4f1a;&#x5bf9;&#x5176;&#x4ea7;&#x751f;&#x5f71;&#x54cd;</span>\n<span class=\"hljs-symbol\">      getters:</span> <span class=\"hljs-punctuation\">{</span>\n        isAdmin () <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span> <span class=\"hljs-comment\">// -&gt; getters[&apos;account/isAdmin&apos;]</span>\n      <span class=\"hljs-punctuation\">}</span>,\n<span class=\"hljs-symbol\">      actions:</span> <span class=\"hljs-punctuation\">{</span>\n        login () <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span> <span class=\"hljs-comment\">// -&gt; dispatch(&apos;account/login&apos;)</span>\n      <span class=\"hljs-punctuation\">}</span>,\n<span class=\"hljs-symbol\">      mutations:</span> <span class=\"hljs-punctuation\">{</span>\n        login () <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span> <span class=\"hljs-comment\">// -&gt; commit(&apos;account/login&apos;)</span>\n      <span class=\"hljs-punctuation\">}</span>,\n\n      <span class=\"hljs-comment\">// &#x5d4c;&#x5957;&#x6a21;&#x5757;</span>\n<span class=\"hljs-symbol\">      modules:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-comment\">// &#x7ee7;&#x627f;&#x7236;&#x6a21;&#x5757;&#x7684;&#x547d;&#x540d;&#x7a7a;&#x95f4;</span>\n<span class=\"hljs-symbol\">        myPage:</span> <span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">          state:</span> <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span>,\n<span class=\"hljs-symbol\">          getters:</span> <span class=\"hljs-punctuation\">{</span>\n            profile () <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span> <span class=\"hljs-comment\">// -&gt; getters[&apos;account/profile&apos;]</span>\n          <span class=\"hljs-punctuation\">}</span>\n        <span class=\"hljs-punctuation\">}</span>,\n\n        <span class=\"hljs-comment\">// &#x8fdb;&#x4e00;&#x6b65;&#x5d4c;&#x5957;&#x547d;&#x540d;&#x7a7a;&#x95f4;</span>\n<span class=\"hljs-symbol\">        posts:</span> <span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">          namespaced:</span> true,\n<span class=\"hljs-symbol\">\n          state:</span> <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span>,\n<span class=\"hljs-symbol\">          getters:</span> <span class=\"hljs-punctuation\">{</span>\n            popular () <span class=\"hljs-punctuation\">{</span> ... <span class=\"hljs-punctuation\">}</span> <span class=\"hljs-comment\">// -&gt; getters[&apos;account/posts/popular&apos;]</span>\n          <span class=\"hljs-punctuation\">}</span>\n        <span class=\"hljs-punctuation\">}</span>\n      <span class=\"hljs-punctuation\">}</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"433,475"}},{"content":"<pre data-lines=\"476,477\"><code>&#x56de;&#x5230; `installModule` &#x65b9;&#x6cd5;&#xff0c;&#x6211;&#x4eec;&#x9996;&#x5148;&#x6839;&#x636e; `path` &#x83b7;&#x53d6; `namespace`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"476,477"}},{"content":"<pre data-lines=\"478,481\"><code data-lines=\"478,481\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">namespace</span> = store._modules.getNamespace(path) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"478,481"}},{"content":"<pre data-lines=\"482,483\"><code>`getNamespace` &#x7684;&#x5b9a;&#x4e49;&#x5728; `src/module/module-collection.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"482,483"}},{"content":"<pre data-lines=\"484,493\"><code data-lines=\"484,493\">getNamespace <span class=\"hljs-built_in\">(path</span>) {\n  <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">module</span> = this<span class=\"hljs-built_in\">.root</span>\n  <span class=\"hljs-keyword\">return</span><span class=\"hljs-built_in\"> path</span>.reduce((<span class=\"hljs-type\">namespace</span>,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n    <span class=\"hljs-keyword\">module</span> = <span class=\"hljs-keyword\">module</span>.getChild<span class=\"hljs-built_in\">(key</span>)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">namespace</span> + (<span class=\"hljs-keyword\">module</span>.namespaced ?<span class=\"hljs-built_in\"> key</span> + <span class=\"hljs-string\">&apos;/&apos;</span> : <span class=\"hljs-string\">&apos;&apos;</span>)\n  }, <span class=\"hljs-string\">&apos;&apos;</span>)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"484,493"}},{"content":"<pre data-lines=\"494,497\"><code>&#x4ece; `root module` &#x5f00;&#x59cb;&#xff0c;&#x901a;&#x8fc7; `reduce` &#x65b9;&#x6cd5;&#x4e00;&#x5c42;&#x5c42;&#x627e;&#x5b50;&#x6a21;&#x5757;&#xff0c;&#x5982;&#x679c;&#x53d1;&#x73b0;&#x8be5;&#x6a21;&#x5757;&#x914d;&#x7f6e;&#x4e86; `namespaced` &#x4e3a; true&#xff0c;&#x5219;&#x628a;&#x8be5;&#x6a21;&#x5757;&#x7684; `key` &#x62fc;&#x5230; `namesapce` &#x4e2d;&#xff0c;&#x6700;&#x7ec8;&#x8fd4;&#x56de;&#x5b8c;&#x6574;&#x7684; `namespace` &#x5b57;&#x7b26;&#x4e32;&#x3002;\n\n&#x56de;&#x5230; `installModule` &#x65b9;&#x6cd5;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x628a; `namespace` &#x5bf9;&#x5e94;&#x7684;&#x6a21;&#x5757;&#x4fdd;&#x5b58;&#x4e0b;&#x6765;&#xff0c;&#x4e3a;&#x4e86;&#x65b9;&#x4fbf;&#x4ee5;&#x540e;&#x80fd;&#x6839;&#x636e; `namespace` &#x67e5;&#x627e;&#x6a21;&#x5757;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"494,497"}},{"content":"<pre data-lines=\"498,503\"><code data-lines=\"498,503\"><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">module</span>.namespaced) {\n  store._modulesNamespaceMap[<span class=\"hljs-keyword\">namespace</span>] = <span class=\"hljs-keyword\">module</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"498,503"}},{"content":"<pre data-lines=\"504,507\"><code>&#x63a5;&#x4e0b;&#x6765;&#x5224;&#x65ad;&#x975e; `root module` &#x4e14;&#x975e; `hot` &#x7684;&#x60c5;&#x51b5;&#x6267;&#x884c;&#x4e00;&#x4e9b;&#x903b;&#x8f91;&#xff0c;&#x6211;&#x4eec;&#x7a0d;&#x540e;&#x518d;&#x770b;&#x3002;\n\n&#x63a5;&#x7740;&#x662f;&#x5f88;&#x91cd;&#x8981;&#x7684;&#x903b;&#x8f91;&#xff0c;&#x6784;&#x9020;&#x4e86;&#x4e00;&#x4e2a;&#x672c;&#x5730;&#x4e0a;&#x4e0b;&#x6587;&#x73af;&#x5883;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"504,507"}},{"content":"<pre data-lines=\"508,511\"><code data-lines=\"508,511\">const local = <span class=\"hljs-keyword\">module</span>.<span class=\"hljs-keyword\">context</span> = makeLocalContext(store, <span class=\"hljs-type\">namespace</span>,<span class=\"hljs-built_in\"> path</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"508,511"}},{"content":"<pre data-lines=\"512,513\"><code>&#x6765;&#x770b;&#x4e00;&#x4e0b; `makeLocalContext` &#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"512,513"}},{"content":"<pre data-lines=\"514,568\"><code data-lines=\"514,568\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">makeLocalContext</span> (<span class=\"hljs-params\">store, namespace, path</span>) {\n  <span class=\"hljs-keyword\">const</span> noNamespace = namespace === <span class=\"hljs-string\">&apos;&apos;</span>\n\n  <span class=\"hljs-keyword\">const</span> local = {\n    <span class=\"hljs-attr\">dispatch</span>: noNamespace ? store.<span class=\"hljs-property\">dispatch</span> : <span class=\"hljs-function\">(<span class=\"hljs-params\">_type, _payload, _options</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">const</span> args = <span class=\"hljs-title function_\">unifyObjectStyle</span>(_type, _payload, _options)\n      <span class=\"hljs-keyword\">const</span> { payload, options } = args\n      <span class=\"hljs-keyword\">let</span> { <span class=\"hljs-keyword\">type</span> } = args\n\n      <span class=\"hljs-keyword\">if</span> (!options || !options.<span class=\"hljs-property\">root</span>) {\n        <span class=\"hljs-keyword\">type</span> = namespace + <span class=\"hljs-keyword\">type</span>\n        <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; !store.<span class=\"hljs-property\">_actions</span>[<span class=\"hljs-keyword\">type</span>]) {\n          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">`[vuex] unknown local action type: <span class=\"hljs-subst\">&#x24;{args.<span class=\"hljs-keyword\">type</span>}</span>, global type: <span class=\"hljs-subst\">&#x24;{<span class=\"hljs-keyword\">type</span>}</span>`</span>)\n          <span class=\"hljs-keyword\">return</span>\n        }\n      }\n\n      <span class=\"hljs-keyword\">return</span> store.<span class=\"hljs-title function_\">dispatch</span>(<span class=\"hljs-keyword\">type</span>, payload)\n    },\n\n    <span class=\"hljs-attr\">commit</span>: noNamespace ? store.<span class=\"hljs-property\">commit</span> : <span class=\"hljs-function\">(<span class=\"hljs-params\">_type, _payload, _options</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">const</span> args = <span class=\"hljs-title function_\">unifyObjectStyle</span>(_type, _payload, _options)\n      <span class=\"hljs-keyword\">const</span> { payload, options } = args\n      <span class=\"hljs-keyword\">let</span> { <span class=\"hljs-keyword\">type</span> } = args\n\n      <span class=\"hljs-keyword\">if</span> (!options || !options.<span class=\"hljs-property\">root</span>) {\n        <span class=\"hljs-keyword\">type</span> = namespace + <span class=\"hljs-keyword\">type</span>\n        <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; !store.<span class=\"hljs-property\">_mutations</span>[<span class=\"hljs-keyword\">type</span>]) {\n          <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">`[vuex] unknown local mutation type: <span class=\"hljs-subst\">&#x24;{args.<span class=\"hljs-keyword\">type</span>}</span>, global type: <span class=\"hljs-subst\">&#x24;{<span class=\"hljs-keyword\">type</span>}</span>`</span>)\n          <span class=\"hljs-keyword\">return</span>\n        }\n      }\n\n      store.<span class=\"hljs-title function_\">commit</span>(<span class=\"hljs-keyword\">type</span>, payload, options)\n    }\n  }\n\n  <span class=\"hljs-comment\">// getters and state object must be gotten lazily</span>\n  <span class=\"hljs-comment\">// because they will be changed by vm update</span>\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperties</span>(local, {\n    <span class=\"hljs-attr\">getters</span>: {\n      <span class=\"hljs-attr\">get</span>: noNamespace\n        ? <span class=\"hljs-function\">() =&gt;</span> store.<span class=\"hljs-property\">getters</span>\n        : <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">makeLocalGetters</span>(store, namespace)\n    },\n    <span class=\"hljs-attr\">state</span>: {\n      <span class=\"hljs-attr\">get</span>: <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">getNestedState</span>(store.<span class=\"hljs-property\">state</span>, path)\n    }\n  })\n\n  <span class=\"hljs-keyword\">return</span> local\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"514,568"}},{"content":"<pre data-lines=\"569,574\"><code>`makeLocalContext` &#x652f;&#x6301; 3 &#x4e2a;&#x53c2;&#x6570;&#x76f8;&#x5173;&#xff0c;`store` &#x8868;&#x793a; `root store`&#xff1b;`namespace` &#x8868;&#x793a;&#x6a21;&#x5757;&#x7684;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#xff0c;`path` &#x8868;&#x793a;&#x6a21;&#x5757;&#x7684; `path`&#x3002;\n\n&#x8be5;&#x65b9;&#x6cd5;&#x5b9a;&#x4e49;&#x4e86; `local` &#x5bf9;&#x8c61;&#xff0c;&#x5bf9;&#x4e8e; `dispatch` &#x548c; `commit` &#x65b9;&#x6cd5;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709; `namespace`&#xff0c;&#x5b83;&#x4eec;&#x5c31;&#x76f4;&#x63a5;&#x6307;&#x5411;&#x4e86; `root store` &#x7684; `dispatch` &#x548c; `commit` &#x65b9;&#x6cd5;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x521b;&#x5efa;&#x65b9;&#x6cd5;&#xff0c;&#x628a; `type` &#x81ea;&#x52a8;&#x62fc;&#x63a5;&#x4e0a; `namespace`&#xff0c;&#x7136;&#x540e;&#x6267;&#x884c; `store` &#x4e0a;&#x5bf9;&#x5e94;&#x7684;&#x65b9;&#x6cd5;&#x3002;\n\n&#x5bf9;&#x4e8e; `getters` &#x800c;&#x8a00;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709; `namespace`&#xff0c;&#x5219;&#x76f4;&#x63a5;&#x8fd4;&#x56de; `root store` &#x7684; `getters`&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de; `makeLocalGetters(store, namespace)` &#x7684;&#x8fd4;&#x56de;&#x503c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"569,574"}},{"content":"<pre data-lines=\"575,599\"><code data-lines=\"575,599\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">makeLocalGetters</span> (<span class=\"hljs-params\">store, namespace</span>) {\n  <span class=\"hljs-keyword\">const</span> gettersProxy = {}\n\n  <span class=\"hljs-keyword\">const</span> splitPos = namespace.<span class=\"hljs-property\">length</span>\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(store.<span class=\"hljs-property\">getters</span>).<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">type</span> =&gt;</span> {\n    <span class=\"hljs-comment\">// skip if the target getter is not match this namespace</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">type</span>.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>, splitPos) !== namespace) <span class=\"hljs-keyword\">return</span>\n\n    <span class=\"hljs-comment\">// extract local getter type</span>\n    <span class=\"hljs-keyword\">const</span> localType = <span class=\"hljs-keyword\">type</span>.<span class=\"hljs-title function_\">slice</span>(splitPos)\n\n    <span class=\"hljs-comment\">// Add a port to the getters proxy.</span>\n    <span class=\"hljs-comment\">// Define as getter property because</span>\n    <span class=\"hljs-comment\">// we do not want to evaluate the getters in this time.</span>\n    <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(gettersProxy, localType, {\n      <span class=\"hljs-attr\">get</span>: <span class=\"hljs-function\">() =&gt;</span> store.<span class=\"hljs-property\">getters</span>[<span class=\"hljs-keyword\">type</span>],\n      <span class=\"hljs-attr\">enumerable</span>: <span class=\"hljs-literal\">true</span>\n    })\n  })\n\n  <span class=\"hljs-keyword\">return</span> gettersProxy\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"575,599"}},{"content":"<pre data-lines=\"600,603\"><code>`makeLocalGetters` &#x9996;&#x5148;&#x83b7;&#x53d6;&#x4e86; `namespace` &#x7684;&#x957f;&#x5ea6;&#xff0c;&#x7136;&#x540e;&#x904d;&#x5386; `root store` &#x4e0b;&#x7684;&#x6240;&#x6709; `getters`&#xff0c;&#x5148;&#x5224;&#x65ad;&#x5b83;&#x7684;&#x7c7b;&#x578b;&#x662f;&#x5426;&#x5339;&#x914d; `namespace`&#xff0c;&#x53ea;&#x6709;&#x5339;&#x914d;&#x7684;&#x65f6;&#x5019;&#x6211;&#x4eec;&#x4ece; `namespace` &#x7684;&#x4f4d;&#x7f6e;&#x622a;&#x53d6;&#x540e;&#x9762;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x5f97;&#x5230; `localType`&#xff0c;&#x63a5;&#x7740;&#x7528; `Object.defineProperty` &#x5b9a;&#x4e49;&#x4e86; `gettersProxy`&#xff0c;&#x83b7;&#x53d6; `localType` &#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x8bbf;&#x95ee;&#x4e86; `store.getters[type]`&#x3002;\n\n&#x56de;&#x5230; `makeLocalContext` &#x65b9;&#x6cd5;&#xff0c;&#x518d;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x5bf9; `state` &#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5b83;&#x7684;&#x83b7;&#x53d6;&#x5219;&#x662f;&#x901a;&#x8fc7; `getNestedState(store.state, path)` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"600,603"}},{"content":"<pre data-lines=\"604,611\"><code data-lines=\"604,611\">function getNestedState (<span class=\"hljs-keyword\">state</span>, path) {\n  return path.length\n    ? path.reduce((<span class=\"hljs-keyword\">state</span>, key) =&gt; <span class=\"hljs-keyword\">state</span>[key], <span class=\"hljs-keyword\">state</span>)\n    : <span class=\"hljs-keyword\">state</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"604,611"}},{"content":"<pre data-lines=\"612,617\"><code>`getNestedState` &#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x4ece; `root state` &#x5f00;&#x59cb;&#xff0c;&#x901a;&#x8fc7; `path.reduce` &#x65b9;&#x6cd5;&#x4e00;&#x5c42;&#x5c42;&#x67e5;&#x627e;&#x5b50;&#x6a21;&#x5757; `state`&#xff0c;&#x6700;&#x7ec8;&#x627e;&#x5230;&#x76ee;&#x6807;&#x6a21;&#x5757;&#x7684; `state`&#x3002;\n\n&#x90a3;&#x4e48;&#x6784;&#x9020;&#x5b8c; `local` &#x4e0a;&#x4e0b;&#x6587;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x518d;&#x56de;&#x5230; `installModule` &#x65b9;&#x6cd5;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x5b83;&#x5c31;&#x4f1a;&#x904d;&#x5386;&#x6a21;&#x5757;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; `mutations`&#x3001;`actions`&#x3001;`getters`&#xff0c;&#x5206;&#x522b;&#x6267;&#x884c;&#x5b83;&#x4eec;&#x7684;&#x6ce8;&#x518c;&#x5de5;&#x4f5c;&#xff0c;&#x5b83;&#x4eec;&#x7684;&#x6ce8;&#x518c;&#x903b;&#x8f91;&#x90fd;&#x5927;&#x540c;&#x5c0f;&#x5f02;&#x3002;\n\n*   `registerMutation`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"612,617"}},{"content":"<pre data-lines=\"618,631\"><code data-lines=\"618,631\"><span class=\"hljs-keyword\">module</span>.forEachMutation((mutation, key) =&gt; {\n  const namespacedType = namespace + key\n  registerMutation(store, namespacedType, mutation, <span class=\"hljs-keyword\">local</span>)\n})\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span></span> registerMutation (store, <span class=\"hljs-keyword\">type</span>, handler, <span class=\"hljs-keyword\">local</span>) {\n  const <span class=\"hljs-built_in\">entry</span> = store._mutations[<span class=\"hljs-keyword\">type</span>] || (store._mutations[<span class=\"hljs-keyword\">type</span>] = [])\n  <span class=\"hljs-built_in\">entry</span>.push(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span></span> wrappedMutationHandler (payload) {\n    handler.<span class=\"hljs-keyword\">call</span>(store, <span class=\"hljs-keyword\">local</span>.state, payload)\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"618,631"}},{"content":"<pre data-lines=\"632,635\"><code>&#x9996;&#x5148;&#x904d;&#x5386;&#x6a21;&#x5757;&#x4e2d;&#x7684; `mutations` &#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x62ff;&#x5230;&#x6bcf;&#x4e00;&#x4e2a; `mutation` &#x548c; `key`&#xff0c;&#x5e76;&#x628a; `key` &#x62fc;&#x63a5;&#x4e0a; `namespace`&#xff0c;&#x7136;&#x540e;&#x6267;&#x884c; `registerMutation` &#x65b9;&#x6cd5;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x7ed9; `root store` &#x4e0a;&#x7684; `_mutations[types]` &#x6dfb;&#x52a0; `wrappedMutationHandler` &#x65b9;&#x6cd5;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;&#x6211;&#x4eec;&#x4e4b;&#x540e;&#x4f1a;&#x63d0;&#x5230;&#x3002;&#x6ce8;&#x610f;&#xff0c;&#x540c;&#x4e00; `type` &#x7684; `_mutations` &#x53ef;&#x4ee5;&#x5bf9;&#x5e94;&#x591a;&#x4e2a;&#x65b9;&#x6cd5;&#x3002;\n\n*   `registerAction`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"632,635"}},{"content":"<pre data-lines=\"636,668\"><code data-lines=\"636,668\">module.forEachAction((action, key) =&gt; {\n  const <span class=\"hljs-keyword\">type</span> = action.root ? key : namespace + key\n  const <span class=\"hljs-keyword\">handler</span> = action.<span class=\"hljs-keyword\">handler</span> || action\n  registerAction(store, <span class=\"hljs-keyword\">type</span>, <span class=\"hljs-keyword\">handler</span>, <span class=\"hljs-keyword\">local</span>)\n})\n\n<span class=\"hljs-keyword\">function</span> registerAction (store, <span class=\"hljs-keyword\">type</span>, <span class=\"hljs-keyword\">handler</span>, <span class=\"hljs-keyword\">local</span>) {\n  const entry = store._actions[<span class=\"hljs-keyword\">type</span>] || (store._actions[<span class=\"hljs-keyword\">type</span>] = [])\n  entry.push(<span class=\"hljs-keyword\">function</span> wrappedActionHandler (payload, cb) {\n    let res = <span class=\"hljs-keyword\">handler</span>.<span class=\"hljs-keyword\">call</span>(store, {\n      dispatch: <span class=\"hljs-keyword\">local</span>.dispatch,\n      <span class=\"hljs-keyword\">commit</span>: <span class=\"hljs-keyword\">local</span>.<span class=\"hljs-keyword\">commit</span>,\n      getters: <span class=\"hljs-keyword\">local</span>.getters,\n      state: <span class=\"hljs-keyword\">local</span>.state,\n      rootGetters: store.getters,\n      rootState: store.state\n    }, payload, cb)\n    <span class=\"hljs-keyword\">if</span> (!isPromise(res)) {\n      res = Promise.resolve(res)\n    }\n    <span class=\"hljs-keyword\">if</span> (store._devtoolHook) {\n      <span class=\"hljs-keyword\">return</span> res.catch(err =&gt; {\n        store._devtoolHook.emit(<span class=\"hljs-string\">&apos;vuex:error&apos;</span>, err)\n        throw err\n      })\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">return</span> res\n    }\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"636,668"}},{"content":"<pre data-lines=\"669,672\"><code>&#x9996;&#x5148;&#x904d;&#x5386;&#x6a21;&#x5757;&#x4e2d;&#x7684; `actions` &#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x62ff;&#x5230;&#x6bcf;&#x4e00;&#x4e2a; `action` &#x548c; `key`&#xff0c;&#x5e76;&#x5224;&#x65ad; `action.root`&#xff0c;&#x5982;&#x679c;&#x5426;&#x7684;&#x60c5;&#x51b5;&#x628a; `key` &#x62fc;&#x63a5;&#x4e0a; `namespace`&#xff0c;&#x7136;&#x540e;&#x6267;&#x884c; `registerAction` &#x65b9;&#x6cd5;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x7ed9; `root store` &#x4e0a;&#x7684; `_actions[types]` &#x6dfb;&#x52a0; `wrappedActionHandler` &#x65b9;&#x6cd5;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;&#x6211;&#x4eec;&#x4e4b;&#x540e;&#x4f1a;&#x63d0;&#x5230;&#x3002;&#x6ce8;&#x610f;&#xff0c;&#x540c;&#x4e00; `type` &#x7684; `_actions` &#x53ef;&#x4ee5;&#x5bf9;&#x5e94;&#x591a;&#x4e2a;&#x65b9;&#x6cd5;&#x3002;\n\n*   `registerGetter`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"669,672"}},{"content":"<pre data-lines=\"673,696\"><code data-lines=\"673,696\">module.<span class=\"hljs-keyword\">for</span>EachGetter((getter, key) =&gt; {\n  <span class=\"hljs-keyword\">const</span> namespacedType = namespace + key\n  registerGetter(store, namespacedType, getter, local)\n})\n\nfunction registerGetter (store, type, rawGetter, local) {\n  if (store._wrappedGetters[type]) {\n    if (process.env.NODE_ENV !== &apos;production&apos;) {\n      console.error(`[vuex] duplicate getter key: &#x24;{type}`)\n    }\n    return\n  }\n  store._wrappedGetters[type] = function wrappedGetter (store) {\n    return rawGetter(\n      local.<span class=\"hljs-keyword\">state</span>, // local <span class=\"hljs-keyword\">state</span>\n      local.getters, // local getters\n      store.<span class=\"hljs-keyword\">state</span>, // root <span class=\"hljs-keyword\">state</span>\n      store.getters // root getters\n    )\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"673,696"}},{"content":"<pre data-lines=\"697,700\"><code>&#x9996;&#x5148;&#x904d;&#x5386;&#x6a21;&#x5757;&#x4e2d;&#x7684; `getters` &#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x62ff;&#x5230;&#x6bcf;&#x4e00;&#x4e2a; `getter` &#x548c; `key`&#xff0c;&#x5e76;&#x628a; `key` &#x62fc;&#x63a5;&#x4e0a; `namespace`&#xff0c;&#x7136;&#x540e;&#x6267;&#x884c; `registerGetter` &#x65b9;&#x6cd5;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x7ed9; `root store` &#x4e0a;&#x7684; `_wrappedGetters[key]` &#x6307;&#x5b9a; `wrappedGetter` &#x65b9;&#x6cd5;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;&#x6211;&#x4eec;&#x4e4b;&#x540e;&#x4f1a;&#x63d0;&#x5230;&#x3002;&#x6ce8;&#x610f;&#xff0c;&#x540c;&#x4e00; `type` &#x7684; `_wrappedGetters` &#x53ea;&#x80fd;&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x3002;\n\n&#x518d;&#x56de;&#x5230; `installModule` &#x65b9;&#x6cd5;&#xff0c;&#x6700;&#x540e;&#x4e00;&#x6b65;&#x5c31;&#x662f;&#x904d;&#x5386;&#x6a21;&#x5757;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x5b50; `modules`&#xff0c;&#x9012;&#x5f52;&#x6267;&#x884c; `installModule` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"697,700"}},{"content":"<pre data-lines=\"701,706\"><code data-lines=\"701,706\"><span class=\"hljs-keyword\">module</span>.forEachChild((child,<span class=\"hljs-built_in\"> key</span>) =&gt; {\n  installModule(store, rootState,<span class=\"hljs-built_in\"> path</span><span class=\"hljs-built_in\">.concat</span><span class=\"hljs-built_in\">(key</span>), child, hot)\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"701,706"}},{"content":"<pre data-lines=\"707,708\"><code>&#x4e4b;&#x524d;&#x6211;&#x4eec;&#x5ffd;&#x7565;&#x4e86;&#x975e; `root module` &#x4e0b;&#x7684; `state` &#x521d;&#x59cb;&#x5316;&#x903b;&#x8f91;&#xff0c;&#x73b0;&#x5728;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"707,708"}},{"content":"<pre data-lines=\"709,718\"><code data-lines=\"709,718\">if (!isRoot &amp;&amp; !hot) {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">parent</span>State = getNestedState(rootState, path.slice(<span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>))\n  <span class=\"hljs-keyword\">const</span> moduleName = path[path.length - <span class=\"hljs-number\">1</span>]\n  store._withCommit(() =&gt; {\n    Vue.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-keyword\">parent</span>State, moduleName, module.<span class=\"hljs-keyword\">state</span>)\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"709,718"}},{"content":"<pre data-lines=\"719,722\"><code>&#x4e4b;&#x524d;&#x6211;&#x4eec;&#x63d0;&#x5230;&#x8fc7; `getNestedState` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x662f;&#x4ece; `root state` &#x5f00;&#x59cb;&#xff0c;&#x4e00;&#x5c42;&#x5c42;&#x6839;&#x636e;&#x6a21;&#x5757;&#x540d;&#x80fd;&#x8bbf;&#x95ee;&#x5230;&#x5bf9;&#x5e94; `path` &#x7684; `state`&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x6bcf;&#x4e00;&#x5c42;&#x5173;&#x7cfb;&#x7684;&#x5efa;&#x7acb;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x901a;&#x8fc7;&#x8fd9;&#x6bb5; `state` &#x7684;&#x521d;&#x59cb;&#x5316;&#x903b;&#x8f91;&#x3002;`store._withCommit` &#x65b9;&#x6cd5;&#x6211;&#x4eec;&#x4e4b;&#x540e;&#x518d;&#x4ecb;&#x7ecd;&#x3002;\n\n&#x6240;&#x4ee5; `installModule` &#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x5b8c;&#x6210;&#x4e86;&#x6a21;&#x5757;&#x4e0b;&#x7684; `state`&#x3001;`getters`&#x3001;`actions`&#x3001;`mutations` &#x7684;&#x521d;&#x59cb;&#x5316;&#x5de5;&#x4f5c;&#xff0c;&#x5e76;&#x4e14;&#x901a;&#x8fc7;&#x9012;&#x5f52;&#x904d;&#x5386;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x5c31;&#x5b8c;&#x6210;&#x4e86;&#x6240;&#x6709;&#x5b50;&#x6a21;&#x5757;&#x7684;&#x5b89;&#x88c5;&#x5de5;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"719,722"}}],"payload":{"tag":"h3","lines":"375,376"}},{"content":"<a href=\"#%E5%88%9D%E5%A7%8B%E5%8C%96-store-vm\">#</a> &#x521d;&#x59cb;&#x5316; <code>store._vm</code>","children":[{"content":"<pre data-lines=\"725,726\"><code>`Store` &#x5b9e;&#x4f8b;&#x5316;&#x7684;&#x6700;&#x540e;&#x4e00;&#x6b65;&#xff0c;&#x5c31;&#x662f;&#x6267;&#x884c;&#x521d;&#x59cb;&#x5316; `store._vm` &#x7684;&#x903b;&#x8f91;&#xff0c;&#x5b83;&#x7684;&#x5165;&#x53e3;&#x4ee3;&#x7801;&#x662f;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"725,726"}},{"content":"<pre data-lines=\"727,730\"><code data-lines=\"727,730\">resetStoreVM(this, <span class=\"hljs-keyword\">state</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"727,730"}},{"content":"<pre data-lines=\"731,732\"><code>&#x6765;&#x770b;&#x4e00;&#x4e0b; `resetStoreVM` &#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"731,732"}},{"content":"<pre data-lines=\"733,780\"><code data-lines=\"733,780\">function resetStoreVM (store, state, hot) {\n  const oldVm = store._vm\n\n  <span class=\"hljs-comment\">// bind store public getters</span>\n  store<span class=\"hljs-selector-class\">.getters</span> = {}\n  const wrappedGetters = store._wrappedGetters\n  const computed = {}\n  <span class=\"hljs-built_in\">forEachValue</span>(wrappedGetters, (fn, key) =&gt; {\n    <span class=\"hljs-comment\">// use computed to leverage its lazy-caching mechanism</span>\n    computed<span class=\"hljs-selector-attr\">[key]</span> = () =&gt; <span class=\"hljs-built_in\">fn</span>(store)\n    Object<span class=\"hljs-selector-class\">.defineProperty</span>(store<span class=\"hljs-selector-class\">.getters</span>, key, {\n      get: () =&gt; store._vm<span class=\"hljs-selector-attr\">[key]</span>,\n      enumerable: true <span class=\"hljs-comment\">// for local getters</span>\n    })\n  })\n\n  <span class=\"hljs-comment\">// use a Vue instance to store the state tree</span>\n  <span class=\"hljs-comment\">// suppress warnings just in case the user has added</span>\n  <span class=\"hljs-comment\">// some funky global mixins</span>\n  const silent = Vue<span class=\"hljs-selector-class\">.config</span><span class=\"hljs-selector-class\">.silent</span>\n  Vue<span class=\"hljs-selector-class\">.config</span><span class=\"hljs-selector-class\">.silent</span> = true\n  store._vm = new <span class=\"hljs-built_in\">Vue</span>({\n    data: {\n      &#x24;<span class=\"hljs-variable\">&#x24;state</span>: state\n    },\n    computed\n  })\n  Vue<span class=\"hljs-selector-class\">.config</span><span class=\"hljs-selector-class\">.silent</span> = silent\n\n  <span class=\"hljs-comment\">// enable strict mode for new vm</span>\n  <span class=\"hljs-keyword\">if</span> (store.strict) {\n    <span class=\"hljs-built_in\">enableStrictMode</span>(store)\n  }\n\n  <span class=\"hljs-keyword\">if</span> (oldVm) {\n    <span class=\"hljs-keyword\">if</span> (hot) {\n      <span class=\"hljs-comment\">// dispatch changes in all subscribed watchers</span>\n      <span class=\"hljs-comment\">// to force getter re-evaluation for hot reloading.</span>\n      store.<span class=\"hljs-built_in\">_withCommit</span>(() =&gt; {\n        oldVm._data.&#x24;<span class=\"hljs-variable\">&#x24;state</span> = null\n      })\n    }\n    Vue<span class=\"hljs-selector-class\">.nextTick</span>(() =&gt; oldVm.<span class=\"hljs-variable\">&#x24;destroy</span>())\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"733,780"}},{"content":"<pre data-lines=\"781,784\"><code>`resetStoreVM` &#x7684;&#x4f5c;&#x7528;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x60f3;&#x5efa;&#x7acb; `getters` &#x548c; `state` &#x7684;&#x8054;&#x7cfb;&#xff0c;&#x56e0;&#x4e3a;&#x4ece;&#x8bbe;&#x8ba1;&#x4e0a; `getters` &#x7684;&#x83b7;&#x53d6;&#x5c31;&#x4f9d;&#x8d56;&#x4e86; `state` &#xff0c;&#x5e76;&#x4e14;&#x5e0c;&#x671b;&#x5b83;&#x7684;&#x4f9d;&#x8d56;&#x80fd;&#x88ab;&#x7f13;&#x5b58;&#x8d77;&#x6765;&#xff0c;&#x4e14;&#x53ea;&#x6709;&#x5f53;&#x5b83;&#x7684;&#x4f9d;&#x8d56;&#x503c;&#x53d1;&#x751f;&#x4e86;&#x6539;&#x53d8;&#x624d;&#x4f1a;&#x88ab;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;&#x3002;&#x56e0;&#x6b64;&#x8fd9;&#x91cc;&#x5229;&#x7528;&#x4e86; Vue &#x4e2d;&#x7528; `computed` &#x8ba1;&#x7b97;&#x5c5e;&#x6027;&#x6765;&#x5b9e;&#x73b0;&#x3002;\n\n`resetStoreVM` &#x9996;&#x5148;&#x904d;&#x5386;&#x4e86; `_wrappedGetters` &#x83b7;&#x5f97;&#x6bcf;&#x4e2a; `getter` &#x7684;&#x51fd;&#x6570; `fn` &#x548c; `key`&#xff0c;&#x7136;&#x540e;&#x5b9a;&#x4e49;&#x4e86; `computed[key] = () =&gt; fn(store)`&#x3002;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x63d0;&#x5230;&#x8fc7; `_wrappedGetters` &#x7684;&#x521d;&#x59cb;&#x5316;&#x8fc7;&#x7a0b;&#xff0c;&#x8fd9;&#x91cc; `fn(store)` &#x76f8;&#x5f53;&#x4e8e;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"781,784"}},{"content":"<pre data-lines=\"785,795\"><code data-lines=\"785,795\">store._wrappedGetters[type] = function wrappedGetter (store) {\n  return rawGetter(\n    local.<span class=\"hljs-keyword\">state</span>, // local <span class=\"hljs-keyword\">state</span>\n    local.getters, // local getters\n    store.<span class=\"hljs-keyword\">state</span>, // root <span class=\"hljs-keyword\">state</span>\n    store.getters // root getters\n  )\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"785,795"}},{"content":"<pre data-lines=\"796,799\"><code>&#x8fd4;&#x56de;&#x7684;&#x5c31;&#x662f; `rawGetter` &#x7684;&#x6267;&#x884c;&#x51fd;&#x6570;&#xff0c;`rawGetter` &#x5c31;&#x662f;&#x7528;&#x6237;&#x5b9a;&#x4e49;&#x7684; `getter` &#x51fd;&#x6570;&#xff0c;&#x5b83;&#x7684;&#x524d; 2 &#x4e2a;&#x53c2;&#x6570;&#x662f; `local state` &#x548c; `local getters`&#xff0c;&#x540e; 2 &#x4e2a;&#x53c2;&#x6570;&#x662f; `root state` &#x548c; `root getters`&#x3002;\n\n&#x63a5;&#x7740;&#x5b9e;&#x4f8b;&#x5316;&#x4e00;&#x4e2a; Vue &#x5b9e;&#x4f8b; `store._vm`&#xff0c;&#x5e76;&#x628a; `computed` &#x4f20;&#x5165;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"796,799"}},{"content":"<pre data-lines=\"800,808\"><code data-lines=\"800,808\">store._vm = new Vue({\n  data: {\n    &#x24;<span class=\"hljs-variable\">&#x24;state</span>: <span class=\"hljs-keyword\">state</span>\n  },\n  computed\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"800,808"}},{"content":"<pre data-lines=\"809,810\"><code>&#x6211;&#x4eec;&#x53d1;&#x73b0; `data` &#x9009;&#x9879;&#x91cc;&#x5b9a;&#x4e49;&#x4e86; `&#x24;&#x24;state` &#x5c5e;&#x6027;&#xff0c;&#x800c;&#x6211;&#x4eec;&#x8bbf;&#x95ee; `store.state` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x4f1a;&#x8bbf;&#x95ee; `Store` &#x7c7b;&#x4e0a;&#x5b9a;&#x4e49;&#x7684; `state` &#x7684; `get` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"809,810"}},{"content":"<pre data-lines=\"811,816\"><code data-lines=\"811,816\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">get</span> <span class=\"hljs-title\">state</span> ()</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._vm._data.&#x24;&#x24;state\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"811,816"}},{"content":"<pre data-lines=\"817,818\"><code>&#x5b83;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x8bbf;&#x95ee;&#x4e86; `store._vm._data.&#x24;&#x24;state`&#x3002;&#x90a3;&#x4e48; `getters` &#x548c; `state` &#x662f;&#x5982;&#x4f55;&#x5efa;&#x7acb;&#x4f9d;&#x8d56;&#x903b;&#x8f91;&#x7684;&#x5462;&#xff0c;&#x6211;&#x4eec;&#x518d;&#x770b;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"817,818"}},{"content":"<pre data-lines=\"819,829\"><code data-lines=\"819,829\">forEachValue(wrappedGetters, <span class=\"hljs-function\"><span class=\"hljs-params\">(fn, key)</span> =&gt;</span> {\n    <span class=\"hljs-regexp\">//</span> use computed to leverage its lazy-caching mechanism\n    computed[key] = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> fn(store)\n    <span class=\"hljs-built_in\">Object</span>.defineProperty(store.getters, key, {\n      get: <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> store._vm[key],\n      enumerable: <span class=\"hljs-literal\">true</span> <span class=\"hljs-regexp\">//</span> <span class=\"hljs-keyword\">for</span> local getters\n    })\n  }) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"819,829"}},{"content":"<pre data-lines=\"830,833\"><code>&#x5f53;&#x6211;&#x6839;&#x636e; `key` &#x8bbf;&#x95ee; `store.getters` &#x7684;&#x67d0;&#x4e00;&#x4e2a; `getter` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x8bbf;&#x95ee;&#x4e86; `store._vm[key]`&#xff0c;&#x4e5f;&#x5c31;&#x662f; `computed[key]`&#xff0c;&#x5728;&#x6267;&#x884c; `computed[key]` &#x5bf9;&#x5e94;&#x7684;&#x51fd;&#x6570;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c; `rawGetter(local.state,...)` &#x65b9;&#x6cd5;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x4f1a;&#x8bbf;&#x95ee;&#x5230; `store.state`&#xff0c;&#x8fdb;&#x800c;&#x8bbf;&#x95ee;&#x5230; `store._vm._data.&#x24;&#x24;state`&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x5efa;&#x7acb;&#x4e86;&#x4e00;&#x4e2a;&#x4f9d;&#x8d56;&#x5173;&#x7cfb;&#x3002;&#x5f53; `store.state` &#x53d1;&#x751f;&#x53d8;&#x5316;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e0b;&#x4e00;&#x6b21;&#x518d;&#x8bbf;&#x95ee; `store.getters` &#x7684;&#x65f6;&#x5019;&#x4f1a;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;&#x3002;\n\n&#x6211;&#x4eec;&#x518d;&#x6765;&#x770b;&#x4e00;&#x4e0b; `strict mode` &#x7684;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"830,833"}},{"content":"<pre data-lines=\"834,847\"><code data-lines=\"834,847\"><span class=\"hljs-keyword\">if</span> (store.strict) {\n  enableStrictMode(store)\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">enableStrictMode</span> (store) {\n  store._vm.&#x24;watch(<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\"></span>() { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">this._data.&#x24;&#x24;state</span> }, () =&gt; {\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-symbol\">&apos;production</span>&apos;) {\n      assert(store._committing, `<span class=\"hljs-keyword\">Do</span> <span class=\"hljs-keyword\">not</span> mutate vuex store state outside mutation handlers.`)\n    }\n  }, { deep: <span class=\"hljs-literal\">true</span>, sync: <span class=\"hljs-literal\">true</span> })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"834,847"}},{"content":"<pre data-lines=\"848,849\"><code>&#x5f53;&#x4e25;&#x683c;&#x6a21;&#x5f0f;&#x4e0b;&#xff0c;`store._vm` &#x4f1a;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a; `wathcer` &#x6765;&#x89c2;&#x6d4b; `this._data.&#x24;&#x24;state` &#x7684;&#x53d8;&#x5316;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x5f53; `store.state` &#x88ab;&#x4fee;&#x6539;&#x7684;&#x65f6;&#x5019;, `store._committing` &#x5fc5;&#x987b;&#x4e3a; true&#xff0c;&#x5426;&#x5219;&#x5728;&#x5f00;&#x53d1;&#x9636;&#x6bb5;&#x4f1a;&#x62a5;&#x8b66;&#x544a;&#x3002;`store._committing` &#x9ed8;&#x8ba4;&#x503c;&#x662f; `false`&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x4f1a; true &#x5462;&#xff0c;`Store` &#x5b9a;&#x4e49;&#x4e86; `_withCommit` &#x5b9e;&#x4f8b;&#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"848,849"}},{"content":"<pre data-lines=\"850,858\"><code data-lines=\"850,858\">_withCommit (fn) {\n  <span class=\"hljs-keyword\">const</span> committing = <span class=\"hljs-keyword\">this</span>._committing\n  <span class=\"hljs-keyword\">this</span>._committing = <span class=\"hljs-literal\">true</span>\n  fn()\n  <span class=\"hljs-keyword\">this</span>._committing = committing\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"850,858"}},{"content":"<pre data-lines=\"859,860\"><code>&#x5b83;&#x5c31;&#x662f;&#x5bf9; `fn` &#x5305;&#x88c5;&#x4e86;&#x4e00;&#x4e2a;&#x73af;&#x5883;&#xff0c;&#x786e;&#x4fdd;&#x5728; `fn` &#x4e2d;&#x6267;&#x884c;&#x4efb;&#x4f55;&#x903b;&#x8f91;&#x7684;&#x65f6;&#x5019; `this._committing = true`&#x3002;&#x6240;&#x4ee5;&#x5916;&#x90e8;&#x4efb;&#x4f55;&#x975e;&#x901a;&#x8fc7; Vuex &#x63d0;&#x4f9b;&#x7684;&#x63a5;&#x53e3;&#x76f4;&#x63a5;&#x64cd;&#x4f5c;&#x4fee;&#x6539; `state` &#x7684;&#x884c;&#x4e3a;&#x90fd;&#x4f1a;&#x5728;&#x5f00;&#x53d1;&#x9636;&#x6bb5;&#x89e6;&#x53d1;&#x8b66;&#x544a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"859,860"}}],"payload":{"tag":"h3","lines":"723,724"}}],"payload":{"tag":"h2","lines":"83,85"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"864,867\"><code>&#x90a3;&#x4e48;&#x81f3;&#x6b64;&#xff0c;Vuex &#x7684;&#x521d;&#x59cb;&#x5316;&#x8fc7;&#x7a0b;&#x5c31;&#x5206;&#x6790;&#x5b8c;&#x6bd5;&#x4e86;&#xff0c;&#x9664;&#x4e86;&#x5b89;&#x88c5;&#x90e8;&#x5206;&#xff0c;&#x6211;&#x4eec;&#x91cd;&#x70b9;&#x5206;&#x6790;&#x4e86; `Store` &#x7684;&#x5b9e;&#x4f8b;&#x5316;&#x8fc7;&#x7a0b;&#x3002;&#x6211;&#x4eec;&#x8981;&#x628a; `store` &#x60f3;&#x8c61;&#x6210;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x4ed3;&#x5e93;&#xff0c;&#x4e3a;&#x4e86;&#x66f4;&#x65b9;&#x4fbf;&#x7684;&#x7ba1;&#x7406;&#x4ed3;&#x5e93;&#xff0c;&#x6211;&#x4eec;&#x628a;&#x4e00;&#x4e2a;&#x5927;&#x7684; `store` &#x62c6;&#x6210;&#x4e00;&#x4e9b; `modules`&#xff0c;&#x6574;&#x4e2a; `modules` &#x662f;&#x4e00;&#x4e2a;&#x6811;&#x578b;&#x7ed3;&#x6784;&#x3002;&#x6bcf;&#x4e2a; `module` &#x53c8;&#x5206;&#x522b;&#x5b9a;&#x4e49;&#x4e86; `state`&#xff0c;`getters`&#xff0c;`mutations`&#x3001;`actions`&#xff0c;&#x6211;&#x4eec;&#x4e5f;&#x901a;&#x8fc7;&#x9012;&#x5f52;&#x904d;&#x5386;&#x6a21;&#x5757;&#x7684;&#x65b9;&#x5f0f;&#x90fd;&#x5b8c;&#x6210;&#x4e86;&#x5b83;&#x4eec;&#x7684;&#x521d;&#x59cb;&#x5316;&#x3002;&#x4e3a;&#x4e86; `module` &#x5177;&#x6709;&#x66f4;&#x9ad8;&#x7684;&#x5c01;&#x88c5;&#x5ea6;&#x548c;&#x590d;&#x7528;&#x6027;&#xff0c;&#x8fd8;&#x5b9a;&#x4e49;&#x4e86; `namespace` &#x7684;&#x6982;&#x5ff5;&#x3002;&#x6700;&#x540e;&#x6211;&#x4eec;&#x8fd8;&#x5b9a;&#x4e49;&#x4e86;&#x4e00;&#x4e2a;&#x5185;&#x90e8;&#x7684; `Vue` &#x5b9e;&#x4f8b;&#xff0c;&#x7528;&#x6765;&#x5efa;&#x7acb; `state` &#x5230; `getters` &#x7684;&#x8054;&#x7cfb;&#xff0c;&#x5e76;&#x4e14;&#x53ef;&#x4ee5;&#x5728;&#x4e25;&#x683c;&#x6a21;&#x5f0f;&#x4e0b;&#x76d1;&#x6d4b; `state` &#x7684;&#x53d8;&#x5316;&#x662f;&#x4e0d;&#x662f;&#x6765;&#x81ea;&#x5916;&#x90e8;&#xff0c;&#x786e;&#x4fdd;&#x6539;&#x53d8; `state` &#x7684;&#x552f;&#x4e00;&#x9014;&#x5f84;&#x5c31;&#x662f;&#x663e;&#x5f0f;&#x5730;&#x63d0;&#x4ea4; `mutation`&#x3002;\n\n&#x8fd9;&#x4e00;&#x8282;&#x6211;&#x4eec;&#x5df2;&#x7ecf;&#x5efa;&#x7acb;&#x597d; `store`&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x5c31;&#x662f;&#x5bf9;&#x5916;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e9b; API &#x65b9;&#x4fbf;&#x6211;&#x4eec;&#x5bf9;&#x8fd9;&#x4e2a; `store` &#x505a;&#x6570;&#x636e;&#x5b58;&#x53d6;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x4e0b;&#x4e00;&#x8282;&#x6211;&#x4eec;&#x5c31;&#x6765;&#x4ece;&#x6e90;&#x7801;&#x89d2;&#x5ea6;&#x6765;&#x5206;&#x6790; `Vuex` &#x63d0;&#x4f9b;&#x7684;&#x4e00;&#x7cfb;&#x5217; API&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"864,867"}}],"payload":{"tag":"h2","lines":"861,863"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
