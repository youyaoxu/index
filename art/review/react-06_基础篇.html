<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"react-06_&#x57fa;&#x7840;&#x7bc7;","children":[{"content":"&#x4e8c;","children":[{"content":"&#x4e00;&#x3001;&#x7ec4;&#x4ef6;&#x57fa;&#x7840;","children":[{"content":"<pre data-lines=\"6,133\"><code data-lines=\"6,133\"><span class=\"hljs-bullet\">1.</span> React &#x4e8b;&#x4ef6;&#x673a;&#x5236;\n<span class=\"hljs-bullet\">\t-</span> dom\n<span class=\"hljs-bullet\">\t-</span> &#x76d1;&#x542c;&#x4e8b;&#x4ef6;\n\n<span class=\"hljs-code\">\t&#x597d;&#x5904;\n\t- &#x4e8b;&#x4ef6;&#x7edf;&#x4e00;&#x7ba1;&#x7406;\n\t- &#x4e8b;&#x4ef6;&#x8ba2;&#x9605;&#x9500;&#x6bc1;\n\t- &#x6d4f;&#x89c8;&#x5668;&#x5dee;&#x5f02;\n\t- &#x4e8b;&#x4ef6;&#x5bf9;&#x8c61; &#x6d88;&#x8017;&#x5185;&#x5b58;\n2. React&#x7684;&#x4e8b;&#x4ef6;&#x548c;&#x666e;&#x901a;&#x7684;HTML&#x4e8b;&#x4ef6;&#x6709;&#x4ec0;&#x4e48;&#x4e0d;&#x540c;&#xff1f;\n\t- &#x5408;&#x6210;&#x4e8b;&#x4ef6;\n\t- &#x539f;&#x751f;&#x4e8b;&#x4ef6;\n3. React &#x7ec4;&#x4ef6;&#x4e2d;&#x600e;&#x4e48;&#x505a;&#x4e8b;&#x4ef6;&#x4ee3;&#x7406;&#xff1f;&#x5b83;&#x7684;&#x539f;&#x7406;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n4. React &#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#x3001;Render props&#x3001;hooks &#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#xff0c;&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x4e0d;&#x65ad;&#x8fed;&#x4ee3;\n\t- hoc\n\t\t- &#x590d;&#x7528;&#x7ec4;&#x4ef6;\n\t\t- &#x7eaf;&#x51fd;&#x6570;\n\t\t- &#x4f18;&#x70b9;&#xff1a; &#x903b;&#x8f91;&#x590d;&#x7528;\n\t\t- &#x7f3a;&#x70b9;&#xff1a; props &#x8986;&#x76d6;\n\t- render props\n\t\t- &#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x8fd4;&#x56de;react &#x5143;&#x7d20;&#x7684;&#x51fd;&#x6570;\n\t\t- &#x5c06; render&#x6e32;&#x67d3;&#x903b;&#x8f91;&#x6ce8;&#x5165;&#x5230;&#x7ec4;&#x4ef6;&#x5185;\n\t- hook\n\t\t- &#x4f18;&#x70b9;&#xff1a; &#x72b6;&#x6001;&#x670d;&#x7528;&#xff0c;&#x751f;&#x547d;&#x5468;&#x671f;&#xff0c;this &#x6307;&#x5411;&#x95ee;&#x9898;\n5. &#x5bf9;React-Fiber&#x7684;&#x7406;&#x89e3;&#xff0c;&#x5b83;&#x89e3;&#x51b3;&#x4e86;&#x4ec0;&#x4e48;&#x95ee;&#x9898;&#xff1f;\n\t- &#x9012;&#x5f52;&#x904d;&#x5386;&#x8282;&#x70b9;&#xff0c;&#x5360;&#x636e;&#x8d44;&#x6e90;&#xff0c;&#x89e6;&#x53d1;&#x4e8b;&#x4ef6;&#x65e0;&#x54cd;&#x5e94;\n\t- Fiber &#x67b6;&#x6784; &#x6267;&#x884c;&#x8fc7;&#x7a0b;&#x4e2d;&#x65ad;&#xff0c;CPU &#x6267;&#x884c;&#x6743;&#xff0c;\n\t- &#x5206;&#x6279;&#x5ef6;&#x65f6;DOM&#xff0c;&#x907f;&#x514d;&#xff0c;&#x4f53;&#x9a8c;\n\t- &#x5598;&#x606f;&#xff0c;&#x4ee3;&#x7801;&#x7f16;&#x8bd1;&#x4f18;&#x5316;&#xff0c;&#x70ed;&#x4ee3;&#x7801;&#x4f18;&#x5316;\n6. React.Component &#x548c; React.PureComponent &#x7684;&#x533a;&#x522b;\n\t- PureComponent\n\t\t- \n\t\t- &#x7eaf;&#x51fd;&#x6570; &#x51cf;&#x5c11; render &#x63d0;&#x9ad8;&#x6027;&#x80fd;\n\t\t- &#x6d45;&#x6bd4;&#x8f83; &#x6267;&#x884c;shouldComponentUpdate\n7. Component, Element, Instance &#x4e4b;&#x95f4;&#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#x548c;&#x8054;&#x7cfb;&#xff1f;\n\t- &#x7ec4;&#x4ef6; &#x7ec4;&#x4ef6;&#x58f0;&#x660e; render\n\t- &#x5143;&#x7d20; &#x666e;&#x901a;&#x5bf9;&#x8c61;&#xff0c; DOM &#x666e;&#x901a; &#x6216;&#x8005; component &#x7ec4;&#x4ef6;\n\t- &#x5b9e;&#x4f8b; conponent class this\n8. React.createClass&#x548c;extends Component&#x7684;&#x533a;&#x522b;&#x6709;&#x54ea;&#x4e9b;&#xff1f;\n\t- &#x8bed;&#x6cd5;&#x533a;&#x522b;\n\t\t- &#x5de5;&#x5382;&#x51fd;&#x6570; es6 \n\t\t- &#x9017;&#x53f7;\n\t- proptype getDefaultProps\n\t\tproptype getDefaultProps\n\t\tproptype defaultProps\n\t- &#x72b6;&#x6001;\n\t\tgetInitialState\n\t\tconstructor\n\t- this\n\t\t&#x7ed1;&#x5b9a; this\n\t\t&#x624b;&#x52a8;&#x7ed1;&#x5b9a;\n9. React &#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#x662f;&#x4ec0;&#x4e48;&#xff0c;&#x548c;&#x666e;&#x901a;&#x7ec4;&#x4ef6;&#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#xff0c;&#x9002;&#x7528;&#x4ec0;&#x4e48;&#x573a;&#x666f;\n\t- &#x9ad8;&#x7ea7;&#x7ec4;&#x4ef6;\n\t- &#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;\n</span>\n<span class=\"hljs-bullet\">\t-</span> &#x573a;&#x666f;\n<span class=\"hljs-bullet\">\t\t-</span> &#x4ee3;&#x7801;&#x590d;&#x7528;,&#x903b;&#x8f91;&#x62bd;&#x8c61;\n<span class=\"hljs-bullet\">\t\t-</span> &#x6e32;&#x67d3;&#x52ab;&#x6301;,\n<span class=\"hljs-bullet\">\t\t-</span> state&#x62bd;&#x8c61;&#x548c;&#x66f4;&#x6539;\n<span class=\"hljs-bullet\">\t\t-</span> props&#x66f4;&#x6539;\t\n\n<span class=\"hljs-bullet\">\t-</span> &#x6743;&#x9650;&#x63a7;&#x5236;\n<span class=\"hljs-bullet\">\t-</span> &#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x6027;&#x80fd;&#x8ffd;&#x8e2a;\n<span class=\"hljs-bullet\">\t-</span> &#x9875;&#x9762;&#x590d;&#x7528;\n<span class=\"hljs-bullet\">10.</span> &#x5bf9;componentWillReceiveProps &#x7684;&#x7406;&#x89e3;\n<span class=\"hljs-bullet\">11.</span> &#x54ea;&#x4e9b;&#x65b9;&#x6cd5;&#x4f1a;&#x89e6;&#x53d1; React &#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff1f;&#x91cd;&#x65b0;&#x6e32;&#x67d3; render &#x4f1a;&#x505a;&#x4e9b;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> setState null\n<span class=\"hljs-bullet\">\t-</span> &#x7236;&#x7ec4;&#x4ef6;&#x6e32;&#x67d3;\n\n<span class=\"hljs-bullet\">\t-</span> &#x5bf9;&#x6bd4;&#x65b0;&#x65e7;vnode\n<span class=\"hljs-bullet\">\t-</span> &#x6df1;&#x5ea6;&#x4f18;&#x5148;&#x904d;&#x5386;&#xff0c;&#x6807;&#x8bb0;&#x8282;&#x70b9;&#xff0c;&#x6df1;&#x5ea6;&#x904d;&#x5386;&#xff0c;&#x5dee;&#x5f02;\n<span class=\"hljs-bullet\">\t-</span> &#x6839;&#x636e;&#x5dee;&#x5f02;&#x7c7b;&#x578b;\n<span class=\"hljs-bullet\">12.</span> React&#x5982;&#x4f55;&#x5224;&#x65ad;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> props\n<span class=\"hljs-bullet\">\t-</span> setState\n<span class=\"hljs-bullet\">\t-</span> shouldComponentUpdate\n<span class=\"hljs-bullet\">13.</span> React&#x58f0;&#x660e;&#x7ec4;&#x4ef6;&#x6709;&#x54ea;&#x51e0;&#x79cd;&#x65b9;&#x6cd5;&#xff0c;&#x6709;&#x4ec0;&#x4e48;&#x4e0d;&#x540c;&#xff1f;\n<span class=\"hljs-bullet\">14.</span> &#x5bf9;&#x6709;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x548c;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x7684;&#x7406;&#x89e3;&#x53ca;&#x4f7f;&#x7528;&#x573a;&#x666f;\n<span class=\"hljs-code\">\t\n15. &#x5bf9;React&#x4e2d;Fragment&#x7684;&#x7406;&#x89e3;&#xff0c;&#x5b83;&#x7684;&#x4f7f;&#x7528;&#x573a;&#x666f;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n\t- &#x6839;&#x5143;&#x7d20;\n\t- &#x5305;&#x88f9;&#x5143;&#x7d20;\n\t- &#x4e0d;&#x4f1a;&#x6e32;&#x67d3;&#x51fa;&#x4efb;&#x4f55;&#x5143;&#x7d20;\n16. React&#x5982;&#x4f55;&#x83b7;&#x53d6;&#x7ec4;&#x4ef6;&#x5bf9;&#x5e94;&#x7684;DOM&#x5143;&#x7d20;&#xff1f;\n\t&#x4e09;&#x79cd;&#x5199;&#x6cd5;\n17. React&#x4e2d;&#x53ef;&#x4ee5;&#x5728;render&#x8bbf;&#x95ee;refs&#x5417;&#xff1f;&#x4e3a;&#x4ec0;&#x4e48;&#xff1f;\n\t\t- &#x4e0d;&#x53ef;&#x4ee5; &#x4ece;&#x751f;&#x547d;&#x5468;&#x671f;&#x89d2;&#x5ea6;&#x89e3;&#x8bfb;\n18. &#x5bf9;React&#x7684;&#x63d2;&#x69fd;(Portals)&#x7684;&#x7406;&#x89e3;&#xff0c;&#x5982;&#x4f55;&#x4f7f;&#x7528;&#xff0c;&#x6709;&#x54ea;&#x4e9b;&#x4f7f;&#x7528;&#x573a;&#x666f;\n\t- &#x6e32;&#x67d3;&#x5230;&#x7236;&#x8282;&#x70b9;&#x4ee5;&#x5916;&#x7684;&#x573a;&#x666f;\n\t- overflow: hidden; z-index\n19. &#x5728;React&#x4e2d;&#x5982;&#x4f55;&#x907f;&#x514d;&#x4e0d;&#x5fc5;&#x8981;&#x7684;render&#xff1f;\n\t- shouldComponentUpdate &#x6216;&#x8005; PureComponent\n\t- &#x5229;&#x7528;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;\n\t- React.memo\n20. &#x5bf9; React-Intl &#x7684;&#x7406;&#x89e3;&#xff0c;&#x5b83;&#x7684;&#x5de5;&#x4f5c;&#x539f;&#x7406;&#xff1f;\n21. &#x5bf9; React context &#x7684;&#x7406;&#x89e3;\n\t- props &#x5c42;&#x5c42;&#x5d4c;&#x5957;&#x7684;&#x95ee;&#x9898;\n\t- &#x8de8;&#x5c42;&#x7ea7;&#x7684;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;\n</span>\n<span class=\"hljs-bullet\">22.</span> &#x4e3a;&#x4ec0;&#x4e48;React&#x5e76;&#x4e0d;&#x63a8;&#x8350;&#x4f18;&#x5148;&#x8003;&#x8651;&#x4f7f;&#x7528;Context&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> context &#x7834;&#x574f;&#x7ec4;&#x4ef6;&#x6811;&#x4f9d;&#x8d56;&#x5173;&#x7cfb;\n<span class=\"hljs-bullet\">\t-</span> context &#x901a;&#x8fc7; setState &#x6765;&#x66f4;&#x65b0; &#x5982;&#x679c; shouldComponentUpdate &#x8fd4;&#x56de; false &#x4f1a;&#x5bfc;&#x81f4;&#x5b50;&#x7ec4;&#x4ef6;&#x4e0d;&#x66f4;&#x65b0; &#x8fdb;&#x800c;&#x5f71;&#x54cd;&#xff0c;&#x6240;&#x4ee5; context &#x53ef;&#x9760;&#x6027;&#x503c;&#x5f97;&#x5173;&#x6ce8;&#x3002;\n<span class=\"hljs-bullet\">23.</span> React&#x4e2d;&#x4ec0;&#x4e48;&#x662f;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x548c;&#x975e;&#x63a7;&#x7ec4;&#x4ef6;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x53d7;&#x63a7;&#xff1a; &#x591a;&#x4e2a;&#x8f93;&#x5165;&#x7ec4;&#x4ef6; &#x6bcf;&#x4e2a;&#x90fd;&#x6709;&#x4e8b;&#x4ef6; &#x4ee3;&#x7801;&#x81c3;&#x80bf;\n<span class=\"hljs-bullet\">\t-</span> &#x975e;&#xff1a; setState\n<span class=\"hljs-bullet\">24.</span> React&#x4e2d;refs&#x7684;&#x4f5c;&#x7528;&#x662f;&#x4ec0;&#x4e48;&#xff1f;&#x6709;&#x54ea;&#x4e9b;&#x5e94;&#x7528;&#x573a;&#x666f;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> DOM&#x8282;&#x70b9;\n<span class=\"hljs-bullet\">\t-</span> &#x7126;&#x70b9;\n<span class=\"hljs-bullet\">\t-</span> &#x89e6;&#x53d1;&#x52a8;&#x753b;\n<span class=\"hljs-bullet\">\t-</span> &#x96c6;&#x6210;&#x7b2c;&#x4e09;&#x65b9;&#x5e93;\n\n<span class=\"hljs-bullet\">\t-</span> &#x7236;&#x7ec4;&#x4ef6;&#x8bbf;&#x95ee;&#x5b50;&#x7ec4;&#x4ef6; &#x56de;&#x8c03;&#x6216;&#x8005;&#x662f;&#x4f20;&#x9012;\n<span class=\"hljs-bullet\">26.</span> React&#x7ec4;&#x4ef6;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#x6709;&#x4ec0;&#x4e48;&#x4f5c;&#x7528;&#xff1f;&#x5b83;&#x662f;&#x5fc5;&#x987b;&#x7684;&#x5417;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x7c7b;&#x7ec4;&#x4ef6;\n<span class=\"hljs-bullet\">27.</span> React.forwardRef&#x662f;&#x4ec0;&#x4e48;&#xff1f;&#x5b83;&#x6709;&#x4ec0;&#x4e48;&#x4f5c;&#x7528;&#xff1f;\t\n<span class=\"hljs-bullet\">\t-</span> &#x5c06;&#x63a5;&#x53d7;&#x7684;ref&#x5c5e;&#x6027;&#x8f6c;&#x53d1;&#x5230;&#x5176;&#x7ec4;&#x4ef6;&#x6570;&#x4e0b;\n<span class=\"hljs-bullet\">28.</span> &#x7c7b;&#x7ec4;&#x4ef6;&#x4e0e;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x6709;&#x4ec0;&#x4e48;&#x5f02;&#x540c;&#xff1f; ok\n<span class=\"hljs-code\">\t&#x5171;&#x540c;&#x70b9;\n\t\t- &#x521b;&#x5efa;&#x7ec4;&#x4ef6;\n\t\t- &#x7ec4;&#x4ef6;&#x8f6c;&#x6362;\n\t&#x4e0d;&#x540c;&#x70b9; \n\t\t- &#x5f00;&#x53d1;&#x6a21;&#x5f0f; \n\t\t- &#x4f7f;&#x7528;&#x573a;&#x666f; &#x9700;&#x8981;&#x7ee7;&#x627f; &#x6de1;&#x5316;&#x751f;&#x547d;&#x5468;&#x671f;\n\t\t- &#x6027;&#x80fd; shouldComponentUpdate React.memo\n\t\t- &#x8d8b;&#x52bf;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"6,133"}}],"payload":{"tag":"h3","lines":"5,6"}},{"content":"&#x4e8c;&#x3001;&#x6570;&#x636e;&#x7ba1;&#x7406;","children":[{"content":"<pre data-lines=\"134,192\"><code data-lines=\"134,192\"><span class=\"hljs-bullet\">1.</span> React setState &#x8c03;&#x7528;&#x7684;&#x539f;&#x7406;\n<span class=\"hljs-bullet\">\t-</span> \n<span class=\"hljs-bullet\">2.</span> React setState &#x8c03;&#x7528;&#x4e4b;&#x540e;&#x53d1;&#x751f;&#x4e86;&#x4ec0;&#x4e48;&#xff1f;&#x662f;&#x540c;&#x6b65;&#x8fd8;&#x662f;&#x5f02;&#x6b65;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x5408;&#x5e76;\n<span class=\"hljs-bullet\">\t-</span> &#x8c03;&#x548c;\n<span class=\"hljs-bullet\">\t-</span> &#x5143;&#x7d20;&#x6811;\n<span class=\"hljs-bullet\">\t-</span> &#x5dee;&#x5f02;&#x66f4;&#x65b0;\n\n<span class=\"hljs-bullet\">\t-</span> &#x591a;&#x6b21;&#x66f4;&#x65b0; &#x6808;\n\n<span class=\"hljs-bullet\">\t-</span> isBatchingUpdates\n<span class=\"hljs-bullet\">3.</span> React&#x4e2d;&#x7684;setState&#x6279;&#x91cf;&#x66f4;&#x65b0;&#x7684;&#x8fc7;&#x7a0b;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> setState &#x5e76;&#x4e0d;&#x4f1a;&#x7acb;&#x5373;&#x6539;&#x53d8;\n<span class=\"hljs-bullet\">\t-</span> &#x6027;&#x80fd;&#x539f;&#x56e0; &#x591a;&#x6b21; setState &#x8fdb;&#x884c;&#x5408;&#x5e76;\n<span class=\"hljs-bullet\">\t-</span> &#x6700;&#x7ec8; &#x4e00;&#x6b21;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0; &#x5b50;&#x7ec4;&#x4ef6;\n<span class=\"hljs-bullet\">4.</span> React&#x4e2d;&#x6709;&#x4f7f;&#x7528;&#x8fc7;getDefaultProps&#x5417;&#xff1f;&#x5b83;&#x6709;&#x4ec0;&#x4e48;&#x4f5c;&#x7528;&#xff1f;\n<span class=\"hljs-bullet\">5.</span> React&#x4e2d;setState&#x7684;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x4f5c;&#x7528;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x56de;&#x8c03;&#x51fd;&#x6570;\n<span class=\"hljs-bullet\">\t-</span> componentDidUpdate\n<span class=\"hljs-bullet\">6.</span> React&#x4e2d;&#x7684;setState&#x548c;replaceState&#x7684;&#x533a;&#x522b;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x90e8;&#x5206;&#x72b6;&#x6001; Object.assign\n<span class=\"hljs-bullet\">\t-</span> &#x5b8c;&#x5168;&#x66ff;&#x6362;&#x539f;&#x6765;&#x7684;&#x72b6;&#x6001;\n<span class=\"hljs-bullet\">7.</span> &#x5728;React&#x4e2d;&#x7ec4;&#x4ef6;&#x7684;this.state&#x548c;setState&#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x76f4;&#x63a5;&#x4fee;&#x6539; state &#x503c;\n<span class=\"hljs-bullet\">\t\t-</span> &#x53ef;&#x80fd;&#x5bfc;&#x81f4;&#x4e0d;&#x540c;&#x6b65;&#x7684;&#x72b6;&#x6001;&#x66f4;&#x65b0;\n<span class=\"hljs-bullet\">\t\t-</span> &#x53ef;&#x80fd;&#x8fdd;&#x53cd;&#x5355;&#x5411;&#x6570;&#x636e;&#x6d41;\n<span class=\"hljs-bullet\">\t\t-</span> &#x53ef;&#x80fd;&#x5ffd;&#x7565;&#x5fc5;&#x8981;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x65b9;&#x6cd5;\n<span class=\"hljs-bullet\">8.</span> state &#x662f;&#x600e;&#x4e48;&#x6ce8;&#x5165;&#x5230;&#x7ec4;&#x4ef6;&#x7684;&#xff0c;&#x4ece; reducer &#x5230;&#x7ec4;&#x4ef6;&#x7ecf;&#x5386;&#x4e86;&#x4ec0;&#x4e48;&#x6837;&#x7684;&#x8fc7;&#x7a0b;\n<span class=\"hljs-bullet\">\t-</span> mapStateToProps=(state,ownProps)=&gt;{}\n<span class=\"hljs-bullet\">\t-</span> mapDispatchToProps=(dispatch,ownProps)=&gt;{}\n\n<span class=\"hljs-bullet\">\t-</span> reducer &#x5bf9; action &#x8fdb;&#x884c;&#x5904;&#x7406; &#x4fee;&#x6539; store &#x4e2d;&#x72b6;&#x6001;&#x5e76;&#x5c06;&#x7ec4;&#x4ef6; props &#x8fdb;&#x884c;&#x66f4;&#x65b0;\n<span class=\"hljs-bullet\">\t-</span> connect &#x72b6;&#x6001;&#x4ece; store &#x53d6;&#x51fa;&#x5e76;&#x4f5c;&#x4e3a;props&#x4f20;&#x9012;&#x5230;&#x7ec4;&#x4ef6;\n\n<span class=\"hljs-bullet\">9.</span> React&#x7ec4;&#x4ef6;&#x7684;state&#x548c;props&#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#xff1f;\n<span class=\"hljs-code\">\tprops\n\t- &#x53c2;&#x6570; &#x7236;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;&#x5b50;&#x7ec4;&#x4ef6;\n</span>\n<span class=\"hljs-code\">\tstate\n\t- &#x7528;&#x4e8e;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#x4fdd;&#x5b58;\n\t- &#x521d;&#x59cb;&#x5316;\n</span>\n<span class=\"hljs-code\">\t&#x533a;&#x522b;\n\t- props &#x4e0d;&#x53ef;&#x53d8; &#x5916;&#x90e8;&#x4f20;&#x5165; \n\t- state &#x53ef;&#x53d8; &#x901a;&#x8fc7; setState &#x8fdb;&#x884c;&#x4fee;&#x6539;\n</span>\n<span class=\"hljs-bullet\">10.</span> React&#x4e2d;&#x7684;props&#x4e3a;&#x4ec0;&#x4e48;&#x662f;&#x53ea;&#x8bfb;&#x7684;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x9996;&#x5148;&#x662f;&#x5355;&#x5411;&#x6570;&#x636e;&#x6d41;\n<span class=\"hljs-bullet\">\t-</span> &#x51fd;&#x6570;&#x5f0f;&#x7f16;&#x7a0b;&#x601d;&#x60f3;\n<span class=\"hljs-bullet\">\t\t-</span> &#x76f8;&#x540c;&#x7684;&#x8f93;&#x5165; &#x8fd4;&#x56de;&#x76f8;&#x540c;&#x8f93;&#x51fa;\n<span class=\"hljs-bullet\">\t\t-</span> &#x8fc7;&#x7a0b;&#x6ca1;&#x6709;&#x526f;&#x4f5c;&#x7528;\n<span class=\"hljs-bullet\">\t\t-</span> &#x4e0d;&#x4f9d;&#x8d56;&#x5916;&#x90e8;&#x72b6;&#x6001;\n<span class=\"hljs-bullet\">11.</span> &#x5728;React&#x4e2d;&#x7ec4;&#x4ef6;&#x7684;props&#x6539;&#x53d8;&#x65f6;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;&#x6709;&#x54ea;&#x4e9b;&#x65b9;&#x6cd5;&#xff1f;\n\n<span class=\"hljs-bullet\">12.</span> React&#x4e2d;&#x600e;&#x4e48;&#x68c0;&#x9a8c;props&#xff1f;&#x9a8c;&#x8bc1;props&#x7684;&#x76ee;&#x7684;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-code\">\tpropsType\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"134,192"}}],"payload":{"tag":"h3","lines":"133,134"}},{"content":"&#x4e09;&#x3001;&#x751f;&#x547d;&#x5468;&#x671f;","children":[{"content":"<pre data-lines=\"193,211\"><code data-lines=\"193,211\"><span class=\"hljs-number\">1</span>. React&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x6709;&#x54ea;&#x4e9b;&#xff1f;\n<span class=\"hljs-number\">1</span>&#xff09;&#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#x9636;&#x6bb5;\n<span class=\"hljs-number\">2</span>&#xff09;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x9636;&#x6bb5;\n<span class=\"hljs-number\">3</span>&#xff09;&#x7ec4;&#x4ef6;&#x5378;&#x8f7d;&#x9636;&#x6bb5;\n<span class=\"hljs-number\">4</span>&#xff09;&#x9519;&#x8bef;&#x5904;&#x7406;&#x9636;&#x6bb5;\n\tcomponentDidCatch\n<span class=\"hljs-number\">2</span>. React &#x5e9f;&#x5f03;&#x4e86;&#x54ea;&#x4e9b;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1f;&#x4e3a;&#x4ec0;&#x4e48;&#xff1f;\n\t- componentWillMount\n\t- componentWillReceiveProps\n\t- componentWillUpdate\n\t- getSnapshotBeforeUpdate\n<span class=\"hljs-number\">3</span>. React <span class=\"hljs-number\">16</span>.X &#x4e2d; props &#x6539;&#x53d8;&#x540e;&#x5728;&#x54ea;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e2d;&#x5904;&#x7406;\n<span class=\"hljs-number\">4</span>. React &#x6027;&#x80fd;&#x4f18;&#x5316;&#x5728;&#x54ea;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1f;&#x5b83;&#x4f18;&#x5316;&#x7684;&#x539f;&#x7406;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-number\">5</span>. <span class=\"hljs-keyword\">state</span> &#x548c; props &#x89e6;&#x53d1;&#x66f4;&#x65b0;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5206;&#x522b;&#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#xff1f;\n<span class=\"hljs-number\">6</span>. React&#x4e2d;&#x53d1;&#x8d77;&#x7f51;&#x7edc;&#x8bf7;&#x6c42;&#x5e94;&#x8be5;&#x5728;&#x54ea;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e2d;&#x8fdb;&#x884c;&#xff1f;&#x4e3a;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-number\">7</span>. React <span class=\"hljs-number\">16</span>&#x4e2d;&#x65b0;&#x751f;&#x547d;&#x5468;&#x671f;&#x6709;&#x54ea;&#x4e9b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"193,211"}}],"payload":{"tag":"h3","lines":"192,193"}},{"content":"&#x56db;&#x3001;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;","children":[{"content":"<pre data-lines=\"212,225\"><code data-lines=\"212,225\"><span class=\"hljs-bullet\">1.</span> &#x7236;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x901a;&#x4fe1;&#x65b9;&#x5f0f;&#xff1f;\n<span class=\"hljs-bullet\">2.</span> &#x8de8;&#x7ea7;&#x7ec4;&#x4ef6;&#x7684;&#x901a;&#x4fe1;&#x65b9;&#x5f0f;&#xff1f;\n<span class=\"hljs-bullet\">3.</span> &#x975e;&#x5d4c;&#x5957;&#x5173;&#x7cfb;&#x7ec4;&#x4ef6;&#x7684;&#x901a;&#x4fe1;&#x65b9;&#x5f0f;&#xff1f;\n<span class=\"hljs-bullet\">4.</span> &#x5982;&#x4f55;&#x89e3;&#x51b3; props &#x5c42;&#x7ea7;&#x8fc7;&#x6df1;&#x7684;&#x95ee;&#x9898;\n<span class=\"hljs-bullet\">5.</span> &#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#x7684;&#x65b9;&#x5f0f;&#x6709;&#x54ea;&#x4e9b;\n<span class=\"hljs-bullet\">\t-</span> &#x7236;&#x5b50;\n<span class=\"hljs-bullet\">\t-</span> &#x5b50;&#x7236;\n<span class=\"hljs-bullet\">\t-</span> &#x8de8;&#x7ea7;\n<span class=\"hljs-bullet\">\t-</span> &#x5144;&#x5f1f;\n<span class=\"hljs-bullet\">\t-</span> &#x53d1;&#x5e03;&#x8ba2;&#x9605;\n<span class=\"hljs-bullet\">\t-</span> &#x5168;&#x5c40;&#x72b6;&#x6001;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"212,225"}}],"payload":{"tag":"h3","lines":"211,212"}},{"content":"&#x4e94;&#x3001;&#x8def;&#x7531;","children":[{"content":"<pre data-lines=\"226,278\"><code data-lines=\"226,278\"><span class=\"hljs-bullet\">1.</span> React-Router&#x7684;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x662f;&#x4ec0;&#x4e48;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> hash hashchange\n<span class=\"hljs-bullet\">\t-</span> history history.pushState history.replaceState  \n<span class=\"hljs-bullet\">2.</span> &#x5982;&#x4f55;&#x914d;&#x7f6e; React-Router &#x5b9e;&#x73b0;&#x8def;&#x7531;&#x5207;&#x6362;\n<span class=\"hljs-bullet\">\t-</span> Route\n<span class=\"hljs-bullet\">\t-</span> Switch Route\n<span class=\"hljs-bullet\">\t-</span> Link NavLink Redirect\n<span class=\"hljs-bullet\">3.</span> React-Router&#x600e;&#x4e48;&#x8bbe;&#x7f6e;&#x91cd;&#x5b9a;&#x5411;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> Redirect \n<span class=\"hljs-bullet\">\t-</span> to from\n<span class=\"hljs-bullet\">4.</span> react-router &#x91cc;&#x7684; Link &#x6807;&#x7b7e;&#x548c; a &#x6807;&#x7b7e;&#x7684;&#x533a;&#x522b;\n<span class=\"hljs-bullet\">\t-</span> &#x914d;&#x5408; Route&#x4f7f;&#x7528;\n<span class=\"hljs-bullet\">\t-</span> &#x63a5;&#x7ba1;&#x9ed8;&#x8ba4;&#x884c;&#x4e3a; &#x533a;&#x522b;&#x4f20;&#x7edf;&#x8df3;&#x8f6c;\n\n<span class=\"hljs-bullet\">\t-</span> &#x6709;click &#x6267;&#x884c;click\n<span class=\"hljs-bullet\">\t-</span> &#x963b;&#x6b62;&#x9ed8;&#x8ba4;&#x884c;&#x4e3a;\n<span class=\"hljs-bullet\">5.</span> React-Router&#x5982;&#x4f55;&#x83b7;&#x53d6;URL&#x7684;&#x53c2;&#x6570;&#x548c;&#x5386;&#x53f2;&#x5bf9;&#x8c61;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> url&#x53c2;&#x6570;\n<span class=\"hljs-bullet\">\t\t-</span> location.search ?id=123\n<span class=\"hljs-code\">\t\tuseSearchParams\n\t- &#x52a8;&#x6001;&#x8def;&#x7531;&#x4f20;&#x503c;\n\t\tmatch.params\n\t\tuseParams\n\t- &#x72b6;&#x6001;&#x53c2;&#x6570;\n\t\tlocation.state\n\t\tuseLocation\n</span>\n<span class=\"hljs-bullet\">\t-</span> &#x83b7;&#x53d6;&#x5386;&#x53f2;&#x8bb0;&#x5f55;\n<span class=\"hljs-code\">\t\tuseHistory\n\t\thistory\n6. React-Router 4&#x600e;&#x6837;&#x5728;&#x8def;&#x7531;&#x53d8;&#x5316;&#x65f6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x540c;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#xff1f;\n\t- BrowserRouter\n\t\tSwitch\n\t\tRoute\n\t\t\tpath\n\t\t\tcomponent\n\t- HashRouter\n</span>\n<span class=\"hljs-code\">\tv6\n\tBrowserRouter\n\tRoutes\n\tRoute\n\t- path\n\t- element\n  &#x9ed8;&#x8ba4;404&#x9875;\n7. React-Router&#x7684;&#x8def;&#x7531;&#x6709;&#x51e0;&#x79cd;&#x6a21;&#x5f0f;&#xff1f;\n</span>\n<span class=\"hljs-bullet\">8.</span> React-Router 4&#x7684;Switch&#x6709;&#x4ec0;&#x4e48;&#x7528;&#xff1f;\n<span class=\"hljs-bullet\">\t-</span> &#x7528;&#x6765;&#x5305;&#x88f9; Route\n<span class=\"hljs-bullet\">\t-</span> &#x6e32;&#x67d3;&#x548c;&#x5339;&#x914d;&#x7b2c;&#x4e00;&#x4e2a;Route\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"226,278"}}],"payload":{"tag":"h3","lines":"225,226"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"&#x4e00;&#x3001;&#x7ec4;&#x4ef6;&#x57fa;&#x7840;","children":[{"content":"<pre data-lines=\"281,294\"><code data-lines=\"281,294\">javascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;&lt;div onClick={<span class=\"hljs-keyword\">this</span>.handleClick.bind(<span class=\"hljs-keyword\">this</span>)}&gt;&#x70b9;&#x6211;&lt;/div&gt;\n\nReact&#x5e76;&#x4e0d;&#x662f;&#x5c06;click&#x4e8b;&#x4ef6;&#x7ed1;&#x5b9a;&#x5230;&#x4e86;div&#x7684;&#x771f;&#x5b9e;DOM&#x4e0a;&#xff0c;&#x800c;&#x662f;&#x5728;<span class=\"hljs-built_in\">document</span>&#x5904;&#x76d1;&#x542c;&#x4e86;&#x6240;&#x6709;&#x7684;&#x4e8b;&#x4ef6;&#xff0c;&#x5f53;&#x4e8b;&#x4ef6;&#x53d1;&#x751f;&#x5e76;&#x4e14;&#x5192;&#x6ce1;&#x5230;<span class=\"hljs-built_in\">document</span>&#x5904;&#x7684;&#x65f6;&#x5019;&#xff0c;React&#x5c06;&#x4e8b;&#x4ef6;&#x5185;&#x5bb9;&#x5c01;&#x88c5;&#x5e76;&#x4ea4;&#x7531;&#x771f;&#x6b63;&#x7684;&#x5904;&#x7406;&#x51fd;&#x6570;&#x8fd0;&#x884c;&#x3002;&#x8fd9;&#x6837;&#x7684;&#x65b9;&#x5f0f;&#x4e0d;&#x4ec5;&#x4ec5;&#x51cf;&#x5c11;&#x4e86;&#x5185;&#x5b58;&#x7684;&#x6d88;&#x8017;&#xff0c;&#x8fd8;&#x80fd;&#x5728;&#x7ec4;&#x4ef6;&#x6302;&#x5728;&#x9500;&#x6bc1;&#x65f6;&#x7edf;&#x4e00;&#x8ba2;&#x9605;&#x548c;&#x79fb;&#x9664;&#x4e8b;&#x4ef6;&#x3002;\n&#x9664;&#x6b64;&#x4e4b;&#x5916;&#xff0c;&#x5192;&#x6ce1;&#x5230;<span class=\"hljs-built_in\">document</span>&#x4e0a;&#x7684;&#x4e8b;&#x4ef6;&#x4e5f;&#x4e0d;&#x662f;&#x539f;&#x751f;&#x7684;&#x6d4f;&#x89c8;&#x5668;&#x4e8b;&#x4ef6;&#xff0c;&#x800c;&#x662f;&#x7531;react&#x81ea;&#x5df1;&#x5b9e;&#x73b0;&#x7684;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#xff08;SyntheticEvent&#xff09;&#x3002;&#x56e0;&#x6b64;&#x5982;&#x679c;&#x4e0d;&#x60f3;&#x8981;&#x662f;&#x4e8b;&#x4ef6;&#x5192;&#x6ce1;&#x7684;&#x8bdd;&#x5e94;&#x8be5;&#x8c03;&#x7528;event.preventDefault()&#x65b9;&#x6cd5;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x8c03;&#x7528;event.stopProppagation()&#x65b9;&#x6cd5;&#x3002;\n\nJSX &#x4e0a;&#x5199;&#x7684;&#x4e8b;&#x4ef6;&#x5e76;&#x6ca1;&#x6709;&#x7ed1;&#x5b9a;&#x5728;&#x5bf9;&#x5e94;&#x7684;&#x771f;&#x5b9e; DOM &#x4e0a;&#xff0c;&#x800c;&#x662f;&#x901a;&#x8fc7;&#x4e8b;&#x4ef6;&#x4ee3;&#x7406;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x5c06;&#x6240;&#x6709;&#x7684;&#x4e8b;&#x4ef6;&#x90fd;&#x7edf;&#x4e00;&#x7ed1;&#x5b9a;&#x5728;&#x4e86; <span class=\"hljs-built_in\">document</span> &#x4e0a;&#x3002;&#x8fd9;&#x6837;&#x7684;&#x65b9;&#x5f0f;&#x4e0d;&#x4ec5;&#x51cf;&#x5c11;&#x4e86;&#x5185;&#x5b58;&#x6d88;&#x8017;&#xff0c;&#x8fd8;&#x80fd;&#x5728;&#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#x9500;&#x6bc1;&#x65f6;&#x7edf;&#x4e00;&#x8ba2;&#x9605;&#x548c;&#x79fb;&#x9664;&#x4e8b;&#x4ef6;&#x3002;\n&#x53e6;&#x5916;&#x5192;&#x6ce1;&#x5230; <span class=\"hljs-built_in\">document</span> &#x4e0a;&#x7684;&#x4e8b;&#x4ef6;&#x4e5f;&#x4e0d;&#x662f;&#x539f;&#x751f;&#x6d4f;&#x89c8;&#x5668;&#x4e8b;&#x4ef6;&#xff0c;&#x800c;&#x662f; React &#x81ea;&#x5df1;&#x5b9e;&#x73b0;&#x7684;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#xff08;SyntheticEvent&#xff09;&#x3002;&#x56e0;&#x6b64;&#x6211;&#x4eec;&#x5982;&#x679c;&#x4e0d;&#x60f3;&#x8981;&#x4e8b;&#x4ef6;&#x5192;&#x6ce1;&#x7684;&#x8bdd;&#xff0c;&#x8c03;&#x7528; event.stopPropagation &#x662f;&#x65e0;&#x6548;&#x7684;&#xff0c;&#x800c;&#x5e94;&#x8be5;&#x8c03;&#x7528; event.preventDefault&#x3002;\n&#x5b9e;&#x73b0;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x7684;&#x76ee;&#x7684;&#x5982;&#x4e0b;&#xff1a;\n\n&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x9996;&#x5148;&#x62b9;&#x5e73;&#x4e86;&#x6d4f;&#x89c8;&#x5668;&#x4e4b;&#x95f4;&#x7684;&#x517c;&#x5bb9;&#x95ee;&#x9898;&#xff0c;&#x53e6;&#x5916;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x8de8;&#x6d4f;&#x89c8;&#x5668;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x5305;&#x88c5;&#x5668;&#xff0c;&#x8d4b;&#x4e88;&#x4e86;&#x8de8;&#x6d4f;&#x89c8;&#x5668;&#x5f00;&#x53d1;&#x7684;&#x80fd;&#x529b;&#xff1b;\n&#x5bf9;&#x4e8e;&#x539f;&#x751f;&#x6d4f;&#x89c8;&#x5668;&#x4e8b;&#x4ef6;&#x6765;&#x8bf4;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4f1a;&#x7ed9;&#x76d1;&#x542c;&#x5668;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x3002;&#x5982;&#x679c;&#x4f60;&#x6709;&#x5f88;&#x591a;&#x7684;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x9700;&#x8981;&#x5206;&#x914d;&#x5f88;&#x591a;&#x7684;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#xff0c;&#x9020;&#x6210;&#x9ad8;&#x989d;&#x7684;&#x5185;&#x5b58;&#x5206;&#x914d;&#x95ee;&#x9898;&#x3002;&#x4f46;&#x662f;&#x5bf9;&#x4e8e;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x6765;&#x8bf4;&#xff0c;&#x6709;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x6c60;&#x4e13;&#x95e8;&#x6765;&#x7ba1;&#x7406;&#x5b83;&#x4eec;&#x7684;&#x521b;&#x5efa;&#x548c;&#x9500;&#x6bc1;&#xff0c;&#x5f53;&#x4e8b;&#x4ef6;&#x9700;&#x8981;&#x88ab;&#x4f7f;&#x7528;&#x65f6;&#xff0c;&#x5c31;&#x4f1a;&#x4ece;&#x6c60;&#x5b50;&#x4e2d;&#x590d;&#x7528;&#x5bf9;&#x8c61;&#xff0c;&#x4e8b;&#x4ef6;&#x56de;&#x8c03;&#x7ed3;&#x675f;&#x540e;&#xff0c;&#x5c31;&#x4f1a;&#x9500;&#x6bc1;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x4e0a;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4ece;&#x800c;&#x4fbf;&#x4e8e;&#x4e0b;&#x6b21;&#x590d;&#x7528;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,294"}},{"content":"<pre data-lines=\"295,310\"><code data-lines=\"295,310\">&#x533a;&#x522b;&#xff1a;\n\n&#x5bf9;&#x4e8e;&#x4e8b;&#x4ef6;&#x540d;&#x79f0;&#x547d;&#x540d;&#x65b9;&#x5f0f;&#xff0c;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x4e3a;&#x5168;&#x5c0f;&#x5199;&#xff0c;react &#x4e8b;&#x4ef6;&#x91c7;&#x7528;&#x5c0f;&#x9a7c;&#x5cf0;&#xff1b;\n&#x5bf9;&#x4e8e;&#x4e8b;&#x4ef6;&#x51fd;&#x6570;&#x5904;&#x7406;&#x8bed;&#x6cd5;&#xff0c;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x4e3a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;react &#x4e8b;&#x4ef6;&#x4e3a;&#x51fd;&#x6570;&#xff1b;\nreact &#x4e8b;&#x4ef6;&#x4e0d;&#x80fd;&#x91c7;&#x7528; <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">false</span> &#x7684;&#x65b9;&#x5f0f;&#x6765;&#x963b;&#x6b62;&#x6d4f;&#x89c8;&#x5668;&#x7684;&#x9ed8;&#x8ba4;&#x884c;&#x4e3a;&#xff0c;&#x800c;&#x5fc5;&#x987b;&#x8981;&#x5730;&#x660e;&#x786e;&#x5730;&#x8c03;&#x7528;preventDefault()&#x6765;&#x963b;&#x6b62;&#x9ed8;&#x8ba4;&#x884c;&#x4e3a;&#x3002;\n\n&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x662f; react &#x6a21;&#x62df;&#x539f;&#x751f; DOM &#x4e8b;&#x4ef6;&#x6240;&#x6709;&#x80fd;&#x529b;&#x7684;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#xff0c;&#x5176;&#x4f18;&#x70b9;&#x5982;&#x4e0b;&#xff1a;\n\n&#x517c;&#x5bb9;&#x6240;&#x6709;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x66f4;&#x597d;&#x7684;&#x8de8;&#x5e73;&#x53f0;&#xff1b;\n&#x5c06;&#x4e8b;&#x4ef6;&#x7edf;&#x4e00;&#x5b58;&#x653e;&#x5728;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x907f;&#x514d;&#x9891;&#x7e41;&#x7684;&#x65b0;&#x589e;&#x4e0e;&#x5220;&#x9664;&#xff08;&#x5783;&#x573e;&#x56de;&#x6536;&#xff09;&#x3002;\n&#x65b9;&#x4fbf; react &#x7edf;&#x4e00;&#x7ba1;&#x7406;&#x548c;&#x4e8b;&#x52a1;&#x673a;&#x5236;&#x3002;\n\n&#x4e8b;&#x4ef6;&#x7684;&#x6267;&#x884c;&#x987a;&#x5e8f;&#x4e3a;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x5148;&#x6267;&#x884c;&#xff0c;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x540e;&#x6267;&#x884c;&#xff0c;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x4f1a;&#x5192;&#x6ce1;&#x7ed1;&#x5b9a;&#x5230; <span class=\"hljs-built_in\">document</span> &#x4e0a;&#xff0c;&#x6240;&#x4ee5;&#x5c3d;&#x91cf;&#x907f;&#x514d;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x4e0e;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x6df7;&#x7528;&#xff0c;&#x5982;&#x679c;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#x963b;&#x6b62;&#x5192;&#x6ce1;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x5bfc;&#x81f4;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x4e0d;&#x6267;&#x884c;&#xff0c;&#x56e0;&#x4e3a;&#x9700;&#x8981;&#x5192;&#x6ce1;&#x5230;<span class=\"hljs-built_in\">document</span> &#x4e0a;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x624d;&#x4f1a;&#x6267;&#x884c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"295,310"}},{"content":"<pre data-lines=\"311,318\"><code data-lines=\"311,318\">React&#x57fa;&#x4e8e;Virtual DOM&#x5b9e;&#x73b0;&#x4e86;&#x4e00;&#x4e2a;SyntheticEvent&#x5c42;&#xff08;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x5c42;&#xff09;&#xff0c;&#x5b9a;&#x4e49;&#x7684;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x5668;&#x4f1a;&#x63a5;&#x6536;&#x5230;&#x4e00;&#x4e2a;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x5b83;&#x7b26;&#x5408;W3C&#x6807;&#x51c6;&#xff0c;&#x4e14;&#x4e0e;&#x539f;&#x751f;&#x7684;&#x6d4f;&#x89c8;&#x5668;&#x4e8b;&#x4ef6;&#x62e5;&#x6709;&#x540c;&#x6837;&#x7684;&#x63a5;&#x53e3;&#xff0c;&#x652f;&#x6301;&#x5192;&#x6ce1;&#x673a;&#x5236;&#xff0c;&#x6240;&#x6709;&#x7684;&#x4e8b;&#x4ef6;&#x90fd;&#x81ea;&#x52a8;&#x7ed1;&#x5b9a;&#x5728;&#x6700;&#x5916;&#x5c42;&#x4e0a;&#x3002;\n&#x5728;React&#x5e95;&#x5c42;&#xff0c;&#x4e3b;&#x8981;&#x5bf9;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x505a;&#x4e86;&#x4e24;&#x4ef6;&#x4e8b;&#xff1a;\n\n&#x4e8b;&#x4ef6;&#x59d4;&#x6d3e;&#xff1a; React&#x4f1a;&#x628a;&#x6240;&#x6709;&#x7684;&#x4e8b;&#x4ef6;&#x7ed1;&#x5b9a;&#x5230;&#x7ed3;&#x6784;&#x7684;&#x6700;&#x5916;&#x5c42;&#xff0c;&#x4f7f;&#x7528;&#x7edf;&#x4e00;&#x7684;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x5668;&#xff0c;&#x8fd9;&#x4e2a;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x5668;&#x4e0a;&#x7ef4;&#x6301;&#x4e86;&#x4e00;&#x4e2a;&#x6620;&#x5c04;&#x6765;&#x4fdd;&#x5b58;&#x6240;&#x6709;&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x548c;&#x5904;&#x7406;&#x51fd;&#x6570;&#x3002;\n&#x81ea;&#x52a8;&#x7ed1;&#x5b9a;&#xff1a; React&#x7ec4;&#x4ef6;&#x4e2d;&#xff0c;&#x6bcf;&#x4e2a;&#x65b9;&#x6cd5;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x90fd;&#x4f1a;&#x6307;&#x5411;&#x8be5;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x5373;&#x81ea;&#x52a8;&#x7ed1;&#x5b9a;<span class=\"hljs-keyword\">this</span>&#x4e3a;&#x5f53;&#x524d;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"311,318"}},{"content":"<pre data-lines=\"319,420\"><code data-lines=\"319,420\">&#x8fd9;&#x4e09;&#x8005;&#x662f;&#x76ee;&#x524d;react&#x89e3;&#x51b3;&#x4ee3;&#x7801;&#x590d;&#x7528;&#x7684;&#x4e3b;&#x8981;&#x65b9;&#x5f0f;&#xff1a;\n\n&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff08;HOC&#xff09;&#x662f; React &#x4e2d;&#x7528;&#x4e8e;&#x590d;&#x7528;&#x7ec4;&#x4ef6;&#x903b;&#x8f91;&#x7684;&#x4e00;&#x79cd;&#x9ad8;&#x7ea7;&#x6280;&#x5de7;&#x3002;HOC &#x81ea;&#x8eab;&#x4e0d;&#x662f; React API &#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x79cd;&#x57fa;&#x4e8e; React &#x7684;&#x7ec4;&#x5408;&#x7279;&#x6027;&#x800c;&#x5f62;&#x6210;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#x3002;&#x5177;&#x4f53;&#x800c;&#x8a00;&#xff0c;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#x662f;&#x53c2;&#x6570;&#x4e3a;&#x7ec4;&#x4ef6;&#xff0c;&#x8fd4;&#x56de;&#x503c;&#x4e3a;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;&#x51fd;&#x6570;&#x3002;\nrender props&#x662f;&#x6307;&#x4e00;&#x79cd;&#x5728; React &#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x503c;&#x4e3a;&#x51fd;&#x6570;&#x7684; prop &#x5171;&#x4eab;&#x4ee3;&#x7801;&#x7684;&#x7b80;&#x5355;&#x6280;&#x672f;&#xff0c;&#x66f4;&#x5177;&#x4f53;&#x7684;&#x8bf4;&#xff0c;render prop &#x662f;&#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x544a;&#x77e5;&#x7ec4;&#x4ef6;&#x9700;&#x8981;&#x6e32;&#x67d3;&#x4ec0;&#x4e48;&#x5185;&#x5bb9;&#x7684;&#x51fd;&#x6570; prop&#x3002;\n&#x901a;&#x5e38;&#xff0c;render props &#x548c;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#x53ea;&#x6e32;&#x67d3;&#x4e00;&#x4e2a;&#x5b50;&#x8282;&#x70b9;&#x3002;&#x8ba9; Hook &#x6765;&#x670d;&#x52a1;&#x8fd9;&#x4e2a;&#x4f7f;&#x7528;&#x573a;&#x666f;&#x66f4;&#x52a0;&#x7b80;&#x5355;&#x3002;&#x8fd9;&#x4e24;&#x79cd;&#x6a21;&#x5f0f;&#x4ecd;&#x6709;&#x7528;&#x6b66;&#x4e4b;&#x5730;&#xff0c;&#xff08;&#x4f8b;&#x5982;&#xff0c;&#x4e00;&#x4e2a;&#x865a;&#x62df;&#x6eda;&#x52a8;&#x6761;&#x7ec4;&#x4ef6;&#x6216;&#x8bb8;&#x4f1a;&#x6709;&#x4e00;&#x4e2a; renderltem &#x5c5e;&#x6027;&#xff0c;&#x6216;&#x662f;&#x4e00;&#x4e2a;&#x53ef;&#x89c1;&#x7684;&#x5bb9;&#x5668;&#x7ec4;&#x4ef6;&#x6216;&#x8bb8;&#x4f1a;&#x6709;&#x5b83;&#x81ea;&#x5df1;&#x7684; DOM &#x7ed3;&#x6784;&#xff09;&#x3002;&#x4f46;&#x5728;&#x5927;&#x90e8;&#x5206;&#x573a;&#x666f;&#x4e0b;&#xff0c;Hook &#x8db3;&#x591f;&#x4e86;&#xff0c;&#x5e76;&#x4e14;&#x80fd;&#x591f;&#x5e2e;&#x52a9;&#x51cf;&#x5c11;&#x5d4c;&#x5957;&#x3002;\n\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;HOC\n&#x5b98;&#x65b9;&#x89e3;&#x91ca;&#x2236;\n\n&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff08;HOC&#xff09;&#x662f; React &#x4e2d;&#x7528;&#x4e8e;&#x590d;&#x7528;&#x7ec4;&#x4ef6;&#x903b;&#x8f91;&#x7684;&#x4e00;&#x79cd;&#x9ad8;&#x7ea7;&#x6280;&#x5de7;&#x3002;HOC &#x81ea;&#x8eab;&#x4e0d;&#x662f; React API &#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x79cd;&#x57fa;&#x4e8e; React &#x7684;&#x7ec4;&#x5408;&#x7279;&#x6027;&#x800c;&#x5f62;&#x6210;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#x3002;\n\n&#x7b80;&#x8a00;&#x4e4b;&#xff0c;HOC&#x662f;&#x4e00;&#x79cd;&#x7ec4;&#x4ef6;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#xff0c;HOC&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x548c;&#x989d;&#x5916;&#x7684;&#x53c2;&#x6570;&#xff08;&#x5982;&#x679c;&#x9700;&#x8981;&#xff09;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x7ec4;&#x4ef6;&#x3002;HOC &#x662f;&#x7eaf;&#x51fd;&#x6570;&#xff0c;&#x6ca1;&#x6709;&#x526f;&#x4f5c;&#x7528;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// hoc&#x7684;&#x5b9a;&#x4e49;</span>\nfunction withSubscription(WrappedComponent, selectData) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> {\n    <span class=\"hljs-keyword\">constructor</span>(props) {\n      <span class=\"hljs-keyword\">super</span>(props);\n      <span class=\"hljs-keyword\">this</span>.state = {\n        <span class=\"hljs-keyword\">data</span>: selectData(DataSource, props)\n      };\n    }\n    <span class=\"hljs-comment\">// &#x4e00;&#x4e9b;&#x901a;&#x7528;&#x7684;&#x903b;&#x8f91;&#x5904;&#x7406;</span>\n    render() {\n      <span class=\"hljs-comment\">// ... &#x5e76;&#x4f7f;&#x7528;&#x65b0;&#x6570;&#x636e;&#x6e32;&#x67d3;&#x88ab;&#x5305;&#x88c5;&#x7684;&#x7ec4;&#x4ef6;!</span>\n      <span class=\"hljs-keyword\">return</span> &lt;WrappedComponent <span class=\"hljs-keyword\">data</span>={<span class=\"hljs-keyword\">this</span>.state.<span class=\"hljs-keyword\">data</span>} {...<span class=\"hljs-keyword\">this</span>.props} /&gt;;\n    }\n  };\n\n<span class=\"hljs-comment\">// &#x4f7f;&#x7528;</span>\n<span class=\"hljs-keyword\">const</span> BlogPostWithSubscription = withSubscription(BlogPost,\n  (DataSource, props) =&gt; DataSource.getBlogPost(props.id));\n\nHOC&#x7684;&#x4f18;&#x7f3a;&#x70b9;&#x2236;\n\n&#x4f18;&#x70b9;&#x2236; &#x903b;&#x8f91;&#x670d;&#x7528;&#x3001;&#x4e0d;&#x5f71;&#x54cd;&#x88ab;&#x5305;&#x88f9;&#x7ec4;&#x4ef6;&#x7684;&#x5185;&#x90e8;&#x903b;&#x8f91;&#x3002;\n&#x7f3a;&#x70b9;&#x2236; hoc&#x4f20;&#x9012;&#x7ed9;&#x88ab;&#x5305;&#x88f9;&#x7ec4;&#x4ef6;&#x7684;props&#x5bb9;&#x6613;&#x548c;&#x88ab;&#x5305;&#x88f9;&#x540e;&#x7684;&#x7ec4;&#x4ef6;&#x91cd;&#x540d;&#xff0c;&#x8fdb;&#x800c;&#x88ab;&#x8986;&#x76d6;\n\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;Render props\n&#x5b98;&#x65b9;&#x89e3;&#x91ca;&#x2236;\n\n<span class=\"hljs-string\">&quot;render prop&quot;</span>&#x662f;&#x6307;&#x4e00;&#x79cd;&#x5728; React &#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x503c;&#x4e3a;&#x51fd;&#x6570;&#x7684; prop &#x5171;&#x4eab;&#x4ee3;&#x7801;&#x7684;&#x7b80;&#x5355;&#x6280;&#x672f;\n\n&#x5177;&#x6709;render prop &#x7684;&#x7ec4;&#x4ef6;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x8fd4;&#x56de;React&#x5143;&#x7d20;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x5c06;render&#x7684;&#x6e32;&#x67d3;&#x903b;&#x8f91;&#x6ce8;&#x5165;&#x5230;&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x3002;&#x5728;&#x8fd9;&#x91cc;&#xff0c;<span class=\"hljs-string\">&quot;render&quot;</span>&#x7684;&#x547d;&#x540d;&#x53ef;&#x4ee5;&#x662f;&#x4efb;&#x4f55;&#x5176;&#x4ed6;&#x6709;&#x6548;&#x7684;&#x6807;&#x8bc6;&#x7b26;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// DataProvider&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x7684;&#x6e32;&#x67d3;&#x903b;&#x8f91;&#x5982;&#x4e0b;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DataProvider</span> <span class=\"hljs-title\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Components</span> {\n     state = {\n    name: <span class=\"hljs-string\">&apos;Tom&apos;</span>\n  }\n\n    render() {\n    <span class=\"hljs-keyword\">return</span> (\n        &lt;div&gt;\n          &lt;p&gt;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7ec4;&#x4ef6;&#x81ea;&#x5df1;&#x5185;&#x90e8;&#x7684;&#x6e32;&#x67d3;&#x903b;&#x8f91;&lt;/p&gt;\n          { <span class=\"hljs-keyword\">this</span>.props.render(<span class=\"hljs-keyword\">this</span>.state) }\n      &lt;/div&gt;\n    );\n  }\n}\n\n<span class=\"hljs-comment\">// &#x8c03;&#x7528;&#x65b9;&#x5f0f;</span>\n&lt;DataProvider render={<span class=\"hljs-keyword\">data</span> =&gt; (\n  &lt;h1&gt;Hello {<span class=\"hljs-keyword\">data</span>.name}&lt;/h1&gt;\n)}/&gt;\n\n\n&#x7531;&#x6b64;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#xff0c;render props&#x7684;&#x4f18;&#x7f3a;&#x70b9;&#x4e5f;&#x5f88;&#x660e;&#x663e;&#x2236;\n\n&#x4f18;&#x70b9;&#xff1a;&#x6570;&#x636e;&#x5171;&#x4eab;&#x3001;&#x4ee3;&#x7801;&#x590d;&#x7528;&#xff0c;&#x5c06;&#x7ec4;&#x4ef6;&#x5185;&#x7684;state&#x4f5c;&#x4e3a;props&#x4f20;&#x9012;&#x7ed9;&#x8c03;&#x7528;&#x8005;&#xff0c;&#x5c06;&#x6e32;&#x67d3;&#x903b;&#x8f91;&#x4ea4;&#x7ed9;&#x8c03;&#x7528;&#x8005;&#x3002;\n&#x7f3a;&#x70b9;&#xff1a;&#x65e0;&#x6cd5;&#x5728; <span class=\"hljs-keyword\">return</span> &#x8bed;&#x53e5;&#x5916;&#x8bbf;&#x95ee;&#x6570;&#x636e;&#x3001;&#x5d4c;&#x5957;&#x5199;&#x6cd5;&#x4e0d;&#x591f;&#x4f18;&#x96c5;\n\n&#xff08;<span class=\"hljs-number\">3</span>&#xff09;Hooks\n&#x5b98;&#x65b9;&#x89e3;&#x91ca;&#x2236;\n\nHook&#x662f; React <span class=\"hljs-number\">16.8</span> &#x7684;&#x65b0;&#x589e;&#x7279;&#x6027;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x8ba9;&#x4f60;&#x5728;&#x4e0d;&#x7f16;&#x5199; <span class=\"hljs-keyword\">class</span> &#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x4f7f;&#x7528; state &#x4ee5;&#x53ca;&#x5176;&#x4ed6;&#x7684; React &#x7279;&#x6027;&#x3002;&#x901a;&#x8fc7;&#x81ea;&#x5b9a;&#x4e49;hook&#xff0c;&#x53ef;&#x4ee5;&#x590d;&#x7528;&#x4ee3;&#x7801;&#x903b;&#x8f91;&#x3002;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// &#x81ea;&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x83b7;&#x53d6;&#x8ba2;&#x9605;&#x6570;&#x636e;&#x7684;hook</span>\nfunction useSubscription() {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">data</span> = DataSource.getComments();\n  <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-keyword\">data</span>];\n}\n<span class=\"hljs-comment\">// </span>\nfunction CommentList(props) {\n  <span class=\"hljs-keyword\">const</span> {<span class=\"hljs-keyword\">data</span>} = props;\n  <span class=\"hljs-keyword\">const</span> [subData] = useSubscription();\n    ...\n}\n<span class=\"hljs-comment\">// &#x4f7f;&#x7528;</span>\n&lt;CommentList <span class=\"hljs-keyword\">data</span>=<span class=\"hljs-string\">&apos;hello&apos;</span> /&gt;\n\n&#x4ee5;&#x4e0a;&#x53ef;&#x4ee5;&#x770b;&#x51fa;&#xff0c;hook&#x89e3;&#x51b3;&#x4e86;hoc&#x7684;prop&#x8986;&#x76d6;&#x7684;&#x95ee;&#x9898;&#xff0c;&#x540c;&#x65f6;&#x4f7f;&#x7528;&#x7684;&#x65b9;&#x5f0f;&#x89e3;&#x51b3;&#x4e86;render props&#x7684;&#x5d4c;&#x5957;&#x5730;&#x72f1;&#x7684;&#x95ee;&#x9898;&#x3002;hook&#x7684;&#x4f18;&#x70b9;&#x5982;&#x4e0b;&#x2236;\n\n&#x4f7f;&#x7528;&#x76f4;&#x89c2;&#xff1b;\n&#x89e3;&#x51b3;hoc&#x7684;prop &#x91cd;&#x540d;&#x95ee;&#x9898;&#xff1b;\n&#x89e3;&#x51b3;render props &#x56e0;&#x5171;&#x4eab;&#x6570;&#x636e; &#x800c;&#x51fa;&#x73b0;&#x5d4c;&#x5957;&#x5730;&#x72f1;&#x7684;&#x95ee;&#x9898;&#xff1b;\n&#x80fd;&#x5728;<span class=\"hljs-keyword\">return</span>&#x4e4b;&#x5916;&#x4f7f;&#x7528;&#x6570;&#x636e;&#x7684;&#x95ee;&#x9898;&#x3002;\n\n&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff1a;hook&#x53ea;&#x80fd;&#x5728;&#x7ec4;&#x4ef6;&#x9876;&#x5c42;&#x4f7f;&#x7528;&#xff0c;&#x4e0d;&#x53ef;&#x5728;&#x5206;&#x652f;&#x8bed;&#x53e5;&#x4e2d;&#x4f7f;&#x7528;&#x3002;\n&#x603b;&#x7ed3;&#x2236;\nHoc&#x3001;render props&#x548c;hook&#x90fd;&#x662f;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x4ee3;&#x7801;&#x590d;&#x7528;&#x7684;&#x95ee;&#x9898;&#xff0c;&#x4f46;&#x662f;hoc&#x548c;render props&#x90fd;&#x6709;&#x7279;&#x5b9a;&#x7684;&#x4f7f;&#x7528;&#x573a;&#x666f;&#x548c;&#x660e;&#x663e;&#x7684;&#x7f3a;&#x70b9;&#x3002;hook&#x662f;react16<span class=\"hljs-number\">.8</span>&#x66f4;&#x65b0;&#x7684;&#x65b0;&#x7684;API&#xff0c;&#x8ba9;&#x7ec4;&#x4ef6;&#x903b;&#x8f91;&#x590d;&#x7528;&#x66f4;&#x7b80;&#x6d01;&#x660e;&#x4e86;&#xff0c;&#x540c;&#x65f6;&#x4e5f;&#x89e3;&#x51b3;&#x4e86;hoc&#x548c;render props&#x7684;&#x4e00;&#x4e9b;&#x7f3a;&#x70b9;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"319,420"}},{"content":"<pre data-lines=\"421,431\"><code data-lines=\"421,431\">React V15 &#x5728;&#x6e32;&#x67d3;&#x65f6;&#xff0c;&#x4f1a;&#x9012;&#x5f52;&#x6bd4;&#x5bf9; VirtualDOM &#x6811;&#xff0c;&#x627e;&#x51fa;&#x9700;&#x8981;&#x53d8;&#x52a8;&#x7684;&#x8282;&#x70b9;&#xff0c;&#x7136;&#x540e;&#x540c;&#x6b65;&#x66f4;&#x65b0;&#x5b83;&#x4eec;&#xff0c; &#x4e00;&#x6c14;&#x5475;&#x6210;&#x3002;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x671f;&#x95f4;&#xff0c; React &#x4f1a;&#x5360;&#x636e;&#x6d4f;&#x89c8;&#x5668;&#x8d44;&#x6e90;&#xff0c;&#x8fd9;&#x4f1a;&#x5bfc;&#x81f4;&#x7528;&#x6237;&#x89e6;&#x53d1;&#x7684;&#x4e8b;&#x4ef6;&#x5f97;&#x4e0d;&#x5230;&#x54cd;&#x5e94;&#xff0c;&#x5e76;&#x4e14;&#x4f1a;&#x5bfc;&#x81f4;&#x6389;&#x5e27;&#xff0c;&#x5bfc;&#x81f4;&#x7528;&#x6237;&#x611f;&#x89c9;&#x5230;&#x5361;&#x987f;&#x3002;\n&#x4e3a;&#x4e86;&#x7ed9;&#x7528;&#x6237;&#x5236;&#x9020;&#x4e00;&#x79cd;&#x5e94;&#x7528;&#x5f88;&#x5feb;&#x7684;&#x201c;&#x5047;&#x8c61;&#x201d;&#xff0c;&#x4e0d;&#x80fd;&#x8ba9;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x957f;&#x671f;&#x9738;&#x5360;&#x7740;&#x8d44;&#x6e90;&#x3002; &#x53ef;&#x4ee5;&#x5c06;&#x6d4f;&#x89c8;&#x5668;&#x7684;&#x6e32;&#x67d3;&#x3001;&#x5e03;&#x5c40;&#x3001;&#x7ed8;&#x5236;&#x3001;&#x8d44;&#x6e90;&#x52a0;&#x8f7d;(&#x4f8b;&#x5982; HTML &#x89e3;&#x6790;)&#x3001;&#x4e8b;&#x4ef6;&#x54cd;&#x5e94;&#x3001;&#x811a;&#x672c;&#x6267;&#x884c;&#x89c6;&#x4f5c;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x7684;&#x201c;&#x8fdb;&#x7a0b;&#x201d;&#xff0c;&#x9700;&#x8981;&#x901a;&#x8fc7;&#x67d0;&#x4e9b;&#x8c03;&#x5ea6;&#x7b56;&#x7565;&#x5408;&#x7406;&#x5730;&#x5206;&#x914d; <span class=\"hljs-meta\">CPU</span> &#x8d44;&#x6e90;&#xff0c;&#x4ece;&#x800c;&#x63d0;&#x9ad8;&#x6d4f;&#x89c8;&#x5668;&#x7684;&#x7528;&#x6237;&#x54cd;&#x5e94;&#x901f;&#x7387;, &#x540c;&#x65f6;&#x517c;&#x987e;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x6548;&#x7387;&#x3002;\n&#x6240;&#x4ee5; React &#x901a;&#x8fc7;Fiber &#x67b6;&#x6784;&#xff0c;&#x8ba9;&#x8fd9;&#x4e2a;&#x6267;&#x884c;&#x8fc7;&#x7a0b;&#x53d8;&#x6210;&#x53ef;&#x88ab;&#x4e2d;&#x65ad;&#x3002;&#x201c;&#x9002;&#x65f6;&#x201d;&#x5730;&#x8ba9;&#x51fa; <span class=\"hljs-meta\">CPU</span> &#x6267;&#x884c;&#x6743;&#xff0c;&#x9664;&#x4e86;&#x53ef;&#x4ee5;&#x8ba9;&#x6d4f;&#x89c8;&#x5668;&#x53ca;&#x65f6;&#x5730;&#x54cd;&#x5e94;&#x7528;&#x6237;&#x7684;&#x4ea4;&#x4e92;&#xff0c;&#x8fd8;&#x6709;&#x5176;&#x4ed6;&#x597d;&#x5904;:\n\n&#x5206;&#x6279;&#x5ef6;&#x65f6;&#x5bf9;DOM&#x8fdb;&#x884c;&#x64cd;&#x4f5c;&#xff0c;&#x907f;&#x514d;&#x4e00;&#x6b21;&#x6027;&#x64cd;&#x4f5c;&#x5927;&#x91cf; DOM &#x8282;&#x70b9;&#xff0c;&#x53ef;&#x4ee5;&#x5f97;&#x5230;&#x66f4;&#x597d;&#x7684;&#x7528;&#x6237;&#x4f53;&#x9a8c;&#xff1b;\n&#x7ed9;&#x6d4f;&#x89c8;&#x5668;&#x4e00;&#x70b9;&#x5598;&#x606f;&#x7684;&#x673a;&#x4f1a;&#xff0c;&#x5b83;&#x4f1a;&#x5bf9;&#x4ee3;&#x7801;&#x8fdb;&#x884c;&#x7f16;&#x8bd1;&#x4f18;&#x5316;&#xff08;JIT&#xff09;&#x53ca;&#x8fdb;&#x884c;&#x70ed;&#x4ee3;&#x7801;&#x4f18;&#x5316;&#xff0c;&#x6216;&#x8005;&#x5bf9; reflow &#x8fdb;&#x884c;&#x4fee;&#x6b63;&#x3002;\n\n&#x6838;&#x5fc3;&#x601d;&#x60f3;: Fiber &#x4e5f;&#x79f0;&#x534f;&#x7a0b;&#x6216;&#x8005;&#x7ea4;&#x7a0b;&#x3002;&#x5b83;&#x548c;&#x7ebf;&#x7a0b;&#x5e76;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x534f;&#x7a0b;&#x672c;&#x8eab;&#x662f;&#x6ca1;&#x6709;&#x5e76;&#x53d1;&#x6216;&#x8005;&#x5e76;&#x884c;&#x80fd;&#x529b;&#x7684;&#xff08;&#x9700;&#x8981;&#x914d;&#x5408;&#x7ebf;&#x7a0b;&#xff09;&#xff0c;&#x5b83;&#x53ea;&#x662f;&#x4e00;&#x79cd;&#x63a7;&#x5236;&#x6d41;&#x7a0b;&#x7684;&#x8ba9;&#x51fa;&#x673a;&#x5236;&#x3002;&#x8ba9;&#x51fa; <span class=\"hljs-meta\">CPU</span> &#x7684;&#x6267;&#x884c;&#x6743;&#xff0c;&#x8ba9; <span class=\"hljs-meta\">CPU</span> &#x80fd;&#x5728;&#x8fd9;&#x6bb5;&#x65f6;&#x95f4;&#x6267;&#x884c;&#x5176;&#x4ed6;&#x7684;&#x64cd;&#x4f5c;&#x3002;&#x6e32;&#x67d3;&#x7684;&#x8fc7;&#x7a0b;&#x53ef;&#x4ee5;&#x88ab;&#x4e2d;&#x65ad;&#xff0c;&#x53ef;&#x4ee5;&#x5c06;&#x63a7;&#x5236;&#x6743;&#x4ea4;&#x56de;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x8ba9;&#x4f4d;&#x7ed9;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x4efb;&#x52a1;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x7a7a;&#x95f2;&#x540e;&#x518d;&#x6062;&#x590d;&#x6e32;&#x67d3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"421,431"}},{"content":"<pre data-lines=\"432,438\"><code data-lines=\"432,438\">PureComponent&#x8868;&#x793a;&#x4e00;&#x4e2a;&#x7eaf;&#x7ec4;&#x4ef6;&#xff0c;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x4f18;&#x5316;React&#x7a0b;&#x5e8f;&#xff0c;&#x51cf;&#x5c11;render&#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x6b21;&#x6570;&#xff0c;&#x4ece;&#x800c;&#x63d0;&#x9ad8;&#x7ec4;&#x4ef6;&#x7684;&#x6027;&#x80fd;&#x3002;\n&#x5728;React&#x4e2d;&#xff0c;&#x5f53;prop&#x6216;&#x8005;<span class=\"hljs-keyword\">state</span>&#x53d1;&#x751f;&#x53d8;&#x5316;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x5728;shouldComponentUpdate&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#x4e2d;&#x6267;&#x884c;return false&#x6765;&#x963b;&#x6b62;&#x9875;&#x9762;&#x7684;&#x66f4;&#x65b0;&#xff0c;&#x4ece;&#x800c;&#x51cf;&#x5c11;&#x4e0d;&#x5fc5;&#x8981;&#x7684;render&#x6267;&#x884c;&#x3002;React.PureComponent&#x4f1a;&#x81ea;&#x52a8;&#x6267;&#x884c;&#xa0;shouldComponentUpdate&#x3002;\n&#x4e0d;&#x8fc7;&#xff0c;pureComponent&#x4e2d;&#x7684; shouldComponentUpdate()&#xa0;&#x8fdb;&#x884c;&#x7684;&#x662f;&#x6d45;&#x6bd4;&#x8f83;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x5982;&#x679c;&#x662f;&#x5f15;&#x7528;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x7684;&#x6570;&#x636e;&#xff0c;&#x53ea;&#x4f1a;&#x6bd4;&#x8f83;&#x4e0d;&#x662f;&#x540c;&#x4e00;&#x4e2a;&#x5730;&#x5740;&#xff0c;&#x800c;&#x4e0d;&#x4f1a;&#x6bd4;&#x8f83;&#x8fd9;&#x4e2a;&#x5730;&#x5740;&#x91cc;&#x9762;&#x7684;&#x6570;&#x636e;&#x662f;&#x5426;&#x4e00;&#x81f4;&#x3002;&#x6d45;&#x6bd4;&#x8f83;&#x4f1a;&#x5ffd;&#x7565;&#x5c5e;&#x6027;&#x548c;&#x6216;&#x72b6;&#x6001;&#x7a81;&#x53d8;&#x60c5;&#x51b5;&#xff0c;&#x5176;&#x5b9e;&#x4e5f;&#x5c31;&#x662f;&#x6570;&#x636e;&#x5f15;&#x7528;&#x6307;&#x9488;&#x6ca1;&#x6709;&#x53d8;&#x5316;&#xff0c;&#x800c;&#x6570;&#x636e;&#x53d1;&#x751f;&#x6539;&#x53d8;&#x7684;&#x65f6;&#x5019;render&#x662f;&#x4e0d;&#x4f1a;&#x6267;&#x884c;&#x7684;&#x3002;&#x5982;&#x679c;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x90a3;&#x4e48;&#x5c31;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x5f00;&#x8f9f;&#x7a7a;&#x95f4;&#x5f15;&#x7528;&#x6570;&#x636e;&#x3002;PureComponent&#x4e00;&#x822c;&#x4f1a;&#x7528;&#x5728;&#x4e00;&#x4e9b;&#x7eaf;&#x5c55;&#x793a;&#x7ec4;&#x4ef6;&#x4e0a;&#x3002;\n&#x4f7f;&#x7528;pureComponent&#x7684;&#x597d;&#x5904;&#xff1a;&#x5f53;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x65f6;&#xff0c;&#x5982;&#x679c;&#x7ec4;&#x4ef6;&#x7684;props&#x6216;&#x8005;<span class=\"hljs-keyword\">state</span>&#x90fd;&#x6ca1;&#x6709;&#x6539;&#x53d8;&#xff0c;render&#x51fd;&#x6570;&#x5c31;&#x4e0d;&#x4f1a;&#x89e6;&#x53d1;&#x3002;&#x7701;&#x53bb;&#x865a;&#x62df;DOM&#x7684;&#x751f;&#x6210;&#x548c;&#x5bf9;&#x6bd4;&#x8fc7;&#x7a0b;&#xff0c;&#x8fbe;&#x5230;&#x63d0;&#x5347;&#x6027;&#x80fd;&#x7684;&#x76ee;&#x7684;&#x3002;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;react&#x81ea;&#x52a8;&#x505a;&#x4e86;&#x4e00;&#x5c42;&#x6d45;&#x6bd4;&#x8f83;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"432,438"}},{"content":"<pre data-lines=\"439,446\"><code data-lines=\"439,446\">&#x5143;&#x7d20;&#xff1a; &#x4e00;&#x4e2a;&#x5143;&#x7d20;element&#x662f;&#x4e00;&#x4e2a;&#x666e;&#x901a;&#x5bf9;&#x8c61;(plain object)&#xff0c;&#x63cf;&#x8ff0;&#x4e86;&#x5bf9;&#x4e8e;&#x4e00;&#x4e2a;DOM&#x8282;&#x70b9;&#x6216;&#x8005;&#x5176;&#x4ed6;&#x7ec4;&#x4ef6;component&#xff0c;&#x4f60;&#x60f3;&#x8ba9;&#x5b83;&#x5728;&#x5c4f;&#x5e55;&#x4e0a;&#x5448;&#x73b0;&#x6210;&#x4ec0;&#x4e48;&#x6837;&#x5b50;&#x3002;&#x5143;&#x7d20;element&#x53ef;&#x4ee5;&#x5728;&#x5b83;&#x7684;&#x5c5e;&#x6027;props&#x4e2d;&#x5305;&#x542b;&#x5176;&#x4ed6;&#x5143;&#x7d20;(&#x8bd1;&#x6ce8;:&#x7528;&#x4e8e;&#x5f62;&#x6210;&#x5143;&#x7d20;&#x6811;)&#x3002;&#x521b;&#x5efa;&#x4e00;&#x4e2a;React&#x5143;&#x7d20;element&#x6210;&#x672c;&#x5f88;&#x4f4e;&#x3002;&#x5143;&#x7d20;element&#x521b;&#x5efa;&#x4e4b;&#x540e;&#x662f;&#x4e0d;&#x53ef;&#x53d8;&#x7684;&#x3002;\n&#x7ec4;&#x4ef6;&#xff1a; &#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;component&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x591a;&#x79cd;&#x65b9;&#x5f0f;&#x58f0;&#x660e;&#x3002;&#x53ef;&#x4ee5;&#x662f;&#x5e26;&#x6709;&#x4e00;&#x4e2a;render()&#x65b9;&#x6cd5;&#x7684;&#x7c7b;&#xff0c;&#x7b80;&#x5355;&#x70b9;&#x4e5f;&#x53ef;&#x4ee5;&#x5b9a;&#x4e49;&#x4e3a;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x3002;&#x8fd9;&#x4e24;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5b83;&#x90fd;&#x628a;&#x5c5e;&#x6027;props&#x4f5c;&#x4e3a;&#x8f93;&#x5165;&#xff0c;&#x628a;&#x8fd4;&#x56de;&#x7684;&#x4e00;&#x68f5;&#x5143;&#x7d20;&#x6811;&#x4f5c;&#x4e3a;&#x8f93;&#x51fa;&#x3002;\n&#x5b9e;&#x4f8b;&#xff1a; &#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;instance&#x662f;&#x4f60;&#x5728;&#x6240;&#x5199;&#x7684;&#x7ec4;&#x4ef6;&#x7c7b;component <span class=\"hljs-keyword\">class</span>&#x4e2d;&#x4f7f;&#x7528;&#x5173;&#x952e;&#x5b57;<span class=\"hljs-symbol\">this</span>&#x6240;&#x6307;&#x5411;&#x7684;&#x4e1c;&#x897f;(&#x8bd1;&#x6ce8;:&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;)&#x3002;&#x5b83;&#x7528;&#x6765;&#x5b58;&#x50a8;&#x672c;&#x5730;&#x72b6;&#x6001;&#x548c;&#x54cd;&#x5e94;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e8b;&#x4ef6;&#x5f88;&#x6709;&#x7528;&#x3002;\n\n&#x51fd;&#x6570;&#x5f0f;&#x7ec4;&#x4ef6;(<span class=\"hljs-symbol\">Functional</span> <span class=\"hljs-symbol\">component</span>)&#x6839;&#x672c;&#x6ca1;&#x6709;&#x5b9e;&#x4f8b;<span class=\"hljs-symbol\">instance</span>&#x3002;&#x7c7b;&#x7ec4;&#x4ef6;(<span class=\"hljs-symbol\">Class</span> <span class=\"hljs-symbol\">component</span>)&#x6709;&#x5b9e;&#x4f8b;<span class=\"hljs-symbol\">instance</span>&#xff0c;&#x4f46;&#x662f;&#x6c38;&#x8fdc;&#x4e5f;&#x4e0d;&#x9700;&#x8981;&#x76f4;&#x63a5;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x56e0;&#x4e3a;<span class=\"hljs-symbol\">React</span>&#x5e2e;&#x6211;&#x4eec;&#x505a;&#x4e86;&#x8fd9;&#x4e9b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"439,446"}},{"content":"<pre data-lines=\"447,474\"><code data-lines=\"447,474\">React.createClass&#x548c;extends Component&#x7684;bai&#x533a;&#x522b;&#x4e3b;&#x8981;&#x5728;&#x4e8e;&#xff1a;\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x8bed;&#x6cd5;&#x533a;&#x522b;\n\ncreateClass&#x672c;&#x8d28;&#x4e0a;&#x662f;&#x4e00;&#x4e2a;&#x5de5;&#x5382;&#x51fd;&#x6570;&#xff0c;extends&#x7684;&#x65b9;&#x5f0f;&#x66f4;&#x52a0;&#x63a5;&#x8fd1;&#x6700;&#x65b0;&#x7684;ES6&#x89c4;&#x8303;&#x7684;<span class=\"hljs-keyword\">class</span>&#x5199;&#x6cd5;&#x3002;&#x4e24;&#x79cd;&#x65b9;&#x5f0f;&#x5728;&#x8bed;&#x6cd5;&#x4e0a;&#x7684;&#x5dee;&#x522b;&#x4e3b;&#x8981;&#x4f53;&#x73b0;&#x5728;&#x65b9;&#x6cd5;&#x7684;&#x5b9a;&#x4e49;&#x548c;&#x9759;&#x6001;&#x5c5e;&#x6027;&#x7684;&#x58f0;&#x660e;&#x4e0a;&#x3002;\ncreateClass&#x65b9;&#x5f0f;&#x7684;&#x65b9;&#x6cd5;&#x5b9a;&#x4e49;&#x4f7f;&#x7528;&#x9017;&#x53f7;&#xff0c;&#x9694;&#x5f00;&#xff0c;&#x56e0;&#x4e3a;creatClass&#x672c;&#x8d28;&#x4e0a;&#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x4f20;&#x9012;&#x7ed9;&#x5b83;&#x7684;&#x662f;&#x4e00;&#x4e2a;<span class=\"hljs-keyword\">Object</span>&#xff1b;&#x800c;<span class=\"hljs-keyword\">class</span>&#x7684;&#x65b9;&#x5f0f;&#x5b9a;&#x4e49;&#x65b9;&#x6cd5;&#x65f6;&#x52a1;&#x5fc5;&#x8c28;&#x8bb0;&#x4e0d;&#x8981;&#x4f7f;&#x7528;&#x9017;&#x53f7;&#x9694;&#x5f00;&#xff0c;&#x8fd9;&#x662f;ES6 <span class=\"hljs-keyword\">class</span>&#x7684;&#x8bed;&#x6cd5;&#x89c4;&#x8303;&#x3002;\n\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;propType &#x548c; getDefaultProps\n\nReact.createClass&#xff1a;&#x901a;&#x8fc7;proTypes&#x5bf9;&#x8c61;&#x548c;getDefaultProps()&#x65b9;&#x6cd5;&#x6765;&#x8bbe;&#x7f6e;&#x548c;&#x83b7;&#x53d6;props.\nReact.Component&#xff1a;&#x901a;&#x8fc7;&#x8bbe;&#x7f6e;&#x4e24;&#x4e2a;&#x5c5e;&#x6027;propTypes&#x548c;defaultProps\n\n&#xff08;<span class=\"hljs-number\">3</span>&#xff09;&#x72b6;&#x6001;&#x7684;&#x533a;&#x522b;\n\nReact.createClass&#xff1a;&#x901a;&#x8fc7;getInitialState()&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5305;&#x542b;&#x521d;&#x59cb;&#x503c;&#x7684;&#x5bf9;&#x8c61;\nReact.Component&#xff1a;&#x901a;&#x8fc7;<span class=\"hljs-function\"><span class=\"hljs-keyword\">constructor</span>&#x8bbe;&#x7f6e;&#x521d;&#x59cb;&#x72b6;&#x6001;\n\n&#xff08;4&#xff09;<span class=\"hljs-title\">this</span>&#x533a;&#x522b;\n\n<span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">createClass</span>&#xff1a;&#x4f1a;&#x6b63;&#x786e;&#x7ed1;&#x5b9a;<span class=\"hljs-title\">this</span>\n<span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span>&#xff1a;&#x7531;&#x4e8e;&#x4f7f;&#x7528;&#x4e86; <span class=\"hljs-title\">ES6</span>&#xff0c;&#x8fd9;&#x91cc;&#x4f1a;&#x6709;&#x4e9b;&#x5fae;&#x4e0d;&#x540c;&#xff0c;&#x5c5e;&#x6027;&#x5e76;&#x4e0d;&#x4f1a;&#x81ea;&#x52a8;&#x7ed1;&#x5b9a;&#x5230; <span class=\"hljs-title\">React</span> &#x7c7b;&#x7684;&#x5b9e;&#x4f8b;&#x4e0a;&#x3002;\n\n&#xff08;5&#xff09;<span class=\"hljs-title\">Mixins</span>\n\n<span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">createClass</span>&#xff1a;&#x4f7f;&#x7528; <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">createClass</span> &#x7684;&#x8bdd;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x521b;&#x5efa;&#x7ec4;&#x4ef6;&#x65f6;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x53eb;&#x505a; <span class=\"hljs-title\">mixins</span> &#x7684;&#x5c5e;&#x6027;&#xff0c;&#x5e76;&#x5c06;&#x53ef;&#x4f9b;&#x6df7;&#x5408;&#x7684;&#x7c7b;&#x7684;&#x96c6;&#x5408;&#x4ee5;&#x6570;&#x7ec4;&#x7684;&#x5f62;&#x5f0f;&#x8d4b;&#x7ed9; <span class=\"hljs-title\">mixins</span>&#x3002;\n&#x5982;&#x679c;&#x4f7f;&#x7528; <span class=\"hljs-title\">ES6</span> &#x7684;&#x65b9;&#x5f0f;&#x6765;&#x521b;&#x5efa;&#x7ec4;&#x4ef6;&#xff0c;&#x90a3;&#x4e48; <span class=\"hljs-title\">React</span> <span class=\"hljs-title\">mixins</span> &#x7684;&#x7279;&#x6027;&#x5c06;&#x4e0d;&#x80fd;&#x88ab;&#x4f7f;&#x7528;&#x4e86;&#x3002;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"447,474"}},{"content":"<pre data-lines=\"475,632\"><code data-lines=\"475,632\">&#x5b98;&#x65b9;&#x89e3;&#x91ca;&#x2236;\n\n&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff08;<span class=\"hljs-type\">HOC</span>&#xff09;&#x662f; <span class=\"hljs-type\">React</span> &#x4e2d;&#x7528;&#x4e8e;&#x590d;&#x7528;&#x7ec4;&#x4ef6;&#x903b;&#x8f91;&#x7684;&#x4e00;&#x79cd;&#x9ad8;&#x7ea7;&#x6280;&#x5de7;&#x3002;<span class=\"hljs-type\">HOC</span> &#x81ea;&#x8eab;&#x4e0d;&#x662f; <span class=\"hljs-type\">React</span> <span class=\"hljs-type\">API</span> &#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x79cd;&#x57fa;&#x4e8e; <span class=\"hljs-type\">React</span> &#x7684;&#x7ec4;&#x5408;&#x7279;&#x6027;&#x800c;&#x5f62;&#x6210;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#x3002;\n\n&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff08;<span class=\"hljs-type\">HOC</span>&#xff09;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x4e14;&#x8be5;&#x51fd;&#x6570;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x5e76;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5b83;&#x53ea;&#x662f;&#x4e00;&#x79cd;&#x7ec4;&#x4ef6;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#xff0c;&#x8fd9;&#x79cd;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#x662f;&#x7531;react&#x81ea;&#x8eab;&#x7684;&#x7ec4;&#x5408;&#x6027;&#x8d28;&#x5fc5;&#x7136;&#x4ea7;&#x751f;&#x7684;&#x3002;&#x6211;&#x4eec;&#x5c06;&#x5b83;&#x4eec;&#x79f0;&#x4e3a;&#x7eaf;&#x7ec4;&#x4ef6;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x4eec;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4efb;&#x4f55;&#x52a8;&#x6001;&#x63d0;&#x4f9b;&#x7684;&#x5b50;&#x7ec4;&#x4ef6;&#xff0c;&#x4f46;&#x5b83;&#x4eec;&#x4e0d;&#x4f1a;&#x4fee;&#x6539;&#x6216;&#x590d;&#x5236;&#x5176;&#x8f93;&#x5165;&#x7ec4;&#x4ef6;&#x4e2d;&#x7684;&#x4efb;&#x4f55;&#x884c;&#x4e3a;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// hoc&#x7684;&#x5b9a;&#x4e49;</span>\nfunction withSubscription(<span class=\"hljs-type\">WrappedComponent</span>, selectData) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n    constructor(props) {\n      <span class=\"hljs-keyword\">super</span>(props);\n      <span class=\"hljs-keyword\">this</span>.state = {\n        data: selectData(<span class=\"hljs-type\">DataSource</span>, props)\n      };\n    }\n    <span class=\"hljs-comment\">// &#x4e00;&#x4e9b;&#x901a;&#x7528;&#x7684;&#x903b;&#x8f91;&#x5904;&#x7406;</span>\n    render() {\n      <span class=\"hljs-comment\">// ... &#x5e76;&#x4f7f;&#x7528;&#x65b0;&#x6570;&#x636e;&#x6e32;&#x67d3;&#x88ab;&#x5305;&#x88c5;&#x7684;&#x7ec4;&#x4ef6;!</span>\n      <span class=\"hljs-keyword\">return</span> &lt;<span class=\"hljs-type\">WrappedComponent</span> data={<span class=\"hljs-keyword\">this</span>.state.data} {...<span class=\"hljs-keyword\">this</span>.props} /&gt;;\n    }\n  };\n\n<span class=\"hljs-comment\">// &#x4f7f;&#x7528;</span>\nconst <span class=\"hljs-type\">BlogPostWithSubscription</span> = withSubscription(<span class=\"hljs-type\">BlogPost</span>,\n  (<span class=\"hljs-type\">DataSource</span>, props) =&gt; <span class=\"hljs-type\">DataSource</span>.getBlogPost(props.id));\n\n<span class=\"hljs-number\">1</span>&#xff09;<span class=\"hljs-type\">HOC</span>&#x7684;&#x4f18;&#x7f3a;&#x70b9;\n\n&#x4f18;&#x70b9;&#x2236; &#x903b;&#x8f91;&#x670d;&#x7528;&#x3001;&#x4e0d;&#x5f71;&#x54cd;&#x88ab;&#x5305;&#x88f9;&#x7ec4;&#x4ef6;&#x7684;&#x5185;&#x90e8;&#x903b;&#x8f91;&#x3002;\n&#x7f3a;&#x70b9;&#x2236;hoc&#x4f20;&#x9012;&#x7ed9;&#x88ab;&#x5305;&#x88f9;&#x7ec4;&#x4ef6;&#x7684;props&#x5bb9;&#x6613;&#x548c;&#x88ab;&#x5305;&#x88f9;&#x540e;&#x7684;&#x7ec4;&#x4ef6;&#x91cd;&#x540d;&#xff0c;&#x8fdb;&#x800c;&#x88ab;&#x8986;&#x76d6;\n\n<span class=\"hljs-number\">2</span>&#xff09;&#x9002;&#x7528;&#x573a;&#x666f;\n\n&#x4ee3;&#x7801;&#x590d;&#x7528;&#xff0c;&#x903b;&#x8f91;&#x62bd;&#x8c61;\n&#x6e32;&#x67d3;&#x52ab;&#x6301;\n<span class=\"hljs-type\">State</span> &#x62bd;&#x8c61;&#x548c;&#x66f4;&#x6539;\n<span class=\"hljs-type\">Props</span> &#x66f4;&#x6539;\n\n<span class=\"hljs-number\">3</span>&#xff09;&#x5177;&#x4f53;&#x5e94;&#x7528;&#x4f8b;&#x5b50;\n\n&#x6743;&#x9650;&#x63a7;&#x5236;&#xff1a; &#x5229;&#x7528;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#x7684; &#x6761;&#x4ef6;&#x6e32;&#x67d3; &#x7279;&#x6027;&#x53ef;&#x4ee5;&#x5bf9;&#x9875;&#x9762;&#x8fdb;&#x884c;&#x6743;&#x9650;&#x63a7;&#x5236;&#xff0c;&#x6743;&#x9650;&#x63a7;&#x5236;&#x4e00;&#x822c;&#x5206;&#x4e3a;&#x4e24;&#x4e2a;&#x7ef4;&#x5ea6;&#xff1a;&#x9875;&#x9762;&#x7ea7;&#x522b;&#x548c; &#x9875;&#x9762;&#x5143;&#x7d20;&#x7ea7;&#x522b;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// HOC.js</span>\nfunction withAdminAuth(<span class=\"hljs-type\">WrappedComponent</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n        state = {\n            isAdmin: <span class=\"hljs-literal\">false</span>,\n        }\n        async <span class=\"hljs-type\">UNSAFE_componentWillMount</span>() {\n            const currentRole = await getCurrentUserRole();\n            <span class=\"hljs-keyword\">this</span>.setState({\n                isAdmin: currentRole === &apos;<span class=\"hljs-type\">Admin</span>&apos;,\n            });\n        }\n        render() {\n            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.state.isAdmin) {\n                <span class=\"hljs-keyword\">return</span> &lt;<span class=\"hljs-type\">WrappedComponent</span> {...<span class=\"hljs-keyword\">this</span>.props} /&gt;;\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-keyword\">return</span> (&lt;div&gt;&#x60a8;&#x6ca1;&#x6709;&#x6743;&#x9650;&#x67e5;&#x770b;&#x8be5;&#x9875;&#x9762;&#xff0c;&#x8bf7;&#x8054;&#x7cfb;&#x7ba1;&#x7406;&#x5458;&#xff01;&lt;/div&gt;);\n            }\n        }\n    };\n}\n\n<span class=\"hljs-comment\">// pages/page-a.js</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PageA</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n    constructor(props) {\n        <span class=\"hljs-keyword\">super</span>(props);\n        <span class=\"hljs-comment\">// something here...</span>\n    }\n    <span class=\"hljs-type\">UNSAFE_componentWillMount</span>() {\n        <span class=\"hljs-comment\">// fetching data</span>\n    }\n    render() {\n        <span class=\"hljs-comment\">// render page with data</span>\n    }\n}\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> withAdminAuth(<span class=\"hljs-type\">PageA</span>);\n\n\n<span class=\"hljs-comment\">// pages/page-b.js</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PageB</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n    constructor(props) {\n        <span class=\"hljs-keyword\">super</span>(props);\n    <span class=\"hljs-comment\">// something here...</span>\n        }\n    <span class=\"hljs-type\">UNSAFE_componentWillMount</span>() {\n    <span class=\"hljs-comment\">// fetching data</span>\n    }\n    render() {\n    <span class=\"hljs-comment\">// render page with data</span>\n    }\n}\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> withAdminAuth(<span class=\"hljs-type\">PageB</span>);\n\n\n&#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x6027;&#x80fd;&#x8ffd;&#x8e2a;&#xff1a; &#x501f;&#x52a9;&#x7236;&#x7ec4;&#x4ef6;&#x5b50;&#x7ec4;&#x4ef6;&#x751f;&#x547d;&#x5468;&#x671f;&#x89c4;&#x5219;&#x6355;&#x83b7;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#xff0c;&#x53ef;&#x4ee5;&#x65b9;&#x4fbf;&#x7684;&#x5bf9;&#x67d0;&#x4e2a;&#x7ec4;&#x4ef6;&#x7684;&#x6e32;&#x67d3;&#x65f6;&#x95f4;&#x8fdb;&#x884c;&#x8bb0;&#x5f55;&#x2236;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Home</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n        render() {\n            <span class=\"hljs-keyword\">return</span> (&lt;h1&gt;<span class=\"hljs-type\">Hello</span> <span class=\"hljs-type\">World</span>.&lt;/h1&gt;);\n        }\n    }\n    function withTiming(<span class=\"hljs-type\">WrappedComponent</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">WrappedComponent</span> </span>{\n            constructor(props) {\n                <span class=\"hljs-keyword\">super</span>(props);\n                <span class=\"hljs-keyword\">this</span>.start = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">this</span>.end = <span class=\"hljs-number\">0</span>;\n            }\n            <span class=\"hljs-type\">UNSAFE_componentWillMount</span>() {\n                <span class=\"hljs-keyword\">super</span>.componentWillMount &amp;&amp; <span class=\"hljs-keyword\">super</span>.componentWillMount();\n                <span class=\"hljs-keyword\">this</span>.start = <span class=\"hljs-type\">Date</span>.now();\n            }\n            componentDidMount() {\n                <span class=\"hljs-keyword\">super</span>.componentDidMount &amp;&amp; <span class=\"hljs-keyword\">super</span>.componentDidMount();\n                <span class=\"hljs-keyword\">this</span>.end = <span class=\"hljs-type\">Date</span>.now();\n                console.log(`&#x24;{<span class=\"hljs-type\">WrappedComponent</span>.name} &#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x65f6;&#x95f4;&#x4e3a; &#x24;{<span class=\"hljs-keyword\">this</span>.end - <span class=\"hljs-keyword\">this</span>.start} ms`);\n            }\n            render() {\n                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">super</span>.render();\n            }\n        };\n    }\n\n    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> withTiming(<span class=\"hljs-type\">Home</span>);   \n\n\n\n&#x6ce8;&#x610f;&#xff1a;withTiming &#x662f;&#x5229;&#x7528; &#x53cd;&#x5411;&#x7ee7;&#x627f; &#x5b9e;&#x73b0;&#x7684;&#x4e00;&#x4e2a;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff0c;&#x529f;&#x80fd;&#x662f;&#x8ba1;&#x7b97;&#x88ab;&#x5305;&#x88f9;&#x7ec4;&#x4ef6;&#xff08;&#x8fd9;&#x91cc;&#x662f; <span class=\"hljs-type\">Home</span> &#x7ec4;&#x4ef6;&#xff09;&#x7684;&#x6e32;&#x67d3;&#x65f6;&#x95f4;&#x3002;\n\n&#x9875;&#x9762;&#x590d;&#x7528;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;const withFetching = fetching =&gt; <span class=\"hljs-type\">WrappedComponent</span> =&gt; {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n        state = {\n            data: [],\n        }\n        async <span class=\"hljs-type\">UNSAFE_componentWillMount</span>() {\n            const data = await fetching();\n            <span class=\"hljs-keyword\">this</span>.setState({\n                data,\n            });\n        }\n        render() {\n            <span class=\"hljs-keyword\">return</span> &lt;<span class=\"hljs-type\">WrappedComponent</span> data={<span class=\"hljs-keyword\">this</span>.state.data} {...<span class=\"hljs-keyword\">this</span>.props} /&gt;;\n        }\n    }\n}\n\n<span class=\"hljs-comment\">// pages/page-a.js</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> withFetching(fetching(&apos;science-fiction&apos;))(<span class=\"hljs-type\">MovieList</span>);\n<span class=\"hljs-comment\">// pages/page-b.js</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> withFetching(fetching(&apos;action&apos;))(<span class=\"hljs-type\">MovieList</span>);\n<span class=\"hljs-comment\">// pages/page-other.js</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> withFetching(fetching(&apos;some-other-<span class=\"hljs-class\"><span class=\"hljs-keyword\">type</span>&apos;))(<span class=\"hljs-params\"><span class=\"hljs-type\">MovieList</span></span>)</span>;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"475,632"}},{"content":"<pre data-lines=\"633,638\"><code data-lines=\"633,638\">&#x8be5;&#x65b9;&#x6cd5;&#x5f53;props&#x53d1;&#x751f;&#x53d8;&#x5316;&#x65f6;&#x6267;&#x884c;&#xff0c;&#x521d;&#x59cb;&#x5316;render&#x65f6;&#x4e0d;&#x6267;&#x884c;&#xff0c;&#x5728;&#x8fd9;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x91cc;&#x9762;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x5c5e;&#x6027;&#x7684;&#x53d8;&#x5316;&#xff0c;&#x901a;&#x8fc7;&#x8c03;&#x7528;this.<span class=\"hljs-built_in\">set</span>State()&#x6765;&#x66f4;&#x65b0;&#x4f60;&#x7684;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#xff0c;&#x65e7;&#x7684;&#x5c5e;&#x6027;&#x8fd8;&#x662f;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;this.props&#x6765;&#x83b7;&#x53d6;,&#x8fd9;&#x91cc;&#x8c03;&#x7528;&#x66f4;&#x65b0;&#x72b6;&#x6001;&#x662f;&#x5b89;&#x5168;&#x7684;&#xff0c;&#x5e76;&#x4e0d;&#x4f1a;&#x89e6;&#x53d1;&#x989d;&#x5916;&#x7684;render&#x8c03;&#x7528;&#x3002;\n&#x4f7f;&#x7528;&#x597d;&#x5904;&#xff1a; &#x5728;&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;render&#x51fd;&#x6570;&#x6267;&#x884c;&#x524d;&#x83b7;&#x53d6;&#x65b0;&#x7684;props&#xff0c;&#x4ece;&#x800c;&#x66f4;&#x65b0;&#x5b50;&#x7ec4;&#x4ef6;&#x81ea;&#x5df1;&#x7684;<span class=\"hljs-keyword\">state</span>&#x3002;&#xa0;&#x53ef;&#x4ee5;&#x5c06;&#x6570;&#x636e;&#x8bf7;&#x6c42;&#x653e;&#x5728;&#x8fd9;&#x91cc;&#x8fdb;&#x884c;&#x6267;&#x884c;&#xff0c;&#x9700;&#x8981;&#x4f20;&#x7684;&#x53c2;&#x6570;&#x5219;&#x4ece;componentWillReceiveProps(nextProps)&#x4e2d;&#x83b7;&#x53d6;&#x3002;&#x800c;&#x4e0d;&#x5fc5;&#x5c06;&#x6240;&#x6709;&#x7684;&#x8bf7;&#x6c42;&#x90fd;&#x653e;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x4e2d;&#x3002;&#x4e8e;&#x662f;&#x8be5;&#x8bf7;&#x6c42;&#x53ea;&#x4f1a;&#x5728;&#x8be5;&#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x65f6;&#x624d;&#x4f1a;&#x53d1;&#x51fa;&#xff0c;&#x4ece;&#x800c;&#x51cf;&#x8f7b;&#x8bf7;&#x6c42;&#x8d1f;&#x62c5;&#x3002;\ncomponentWillReceiveProps&#x5728;&#x521d;&#x59cb;&#x5316;render&#x7684;&#x65f6;&#x5019;&#x4e0d;&#x4f1a;&#x6267;&#x884c;&#xff0c;&#x5b83;&#x4f1a;&#x5728;Component&#x63a5;&#x53d7;&#x5230;&#x65b0;&#x7684;&#x72b6;&#x6001;(Props)&#x65f6;&#x88ab;&#x89e6;&#x53d1;&#xff0c;&#x4e00;&#x822c;&#x7528;&#x4e8e;&#x7236;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#x66f4;&#x65b0;&#x65f6;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"633,638"}},{"content":"<pre data-lines=\"639,681\"><code data-lines=\"639,681\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x54ea;&#x4e9b;&#x65b9;&#x6cd5;&#x4f1a;&#x89e6;&#x53d1; react &#x91cd;&#x65b0;&#x6e32;&#x67d3;?\n\n<span class=\"hljs-built_in\">set</span>State&#xff08;&#xff09;&#x65b9;&#x6cd5;&#x88ab;&#x8c03;&#x7528;\n\n<span class=\"hljs-built_in\">set</span>State &#x662f; React &#x4e2d;&#x6700;&#x5e38;&#x7528;&#x7684;&#x547d;&#x4ee4;&#xff0c;&#x901a;&#x5e38;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x6267;&#x884c; <span class=\"hljs-built_in\">set</span>State &#x4f1a;&#x89e6;&#x53d1; render&#x3002;&#x4f46;&#x662f;&#x8fd9;&#x91cc;&#x6709;&#x4e2a;&#x70b9;&#x503c;&#x5f97;&#x5173;&#x6ce8;&#xff0c;&#x6267;&#x884c; <span class=\"hljs-built_in\">set</span>State &#x7684;&#x65f6;&#x5019;&#x4e0d;&#x4e00;&#x5b9a;&#x4f1a;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;&#x5f53; <span class=\"hljs-built_in\">set</span>State &#x4f20;&#x5165; null &#x65f6;&#xff0c;&#x5e76;&#x4e0d;&#x4f1a;&#x89e6;&#x53d1; render&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;class App extends React.Component {\n  <span class=\"hljs-keyword\">state</span> = {\n    a: <span class=\"hljs-number\">1</span>\n  };\n\n  render() {\n    console.<span class=\"hljs-keyword\">log</span>(<span class=\"hljs-string\">&quot;render&quot;</span>);\n    return (\n      <span class=\"hljs-variable\">&lt;React.Fragement&gt;</span>\n        <span class=\"hljs-variable\">&lt;p&gt;</span>{this.<span class=\"hljs-keyword\">state</span>.a}&lt;/p&gt;\n        <span class=\"hljs-variable\">&lt;button\n          onClick={() =&gt;</span> {\n            this.<span class=\"hljs-built_in\">set</span>State({ a: <span class=\"hljs-number\">1</span> }); // &#x8fd9;&#x91cc;&#x5e76;&#x6ca1;&#x6709;&#x6539;&#x53d8; a &#x7684;&#x503c;\n          }}\n        &gt;\n          Click me\n        &lt;/button&gt;\n        <span class=\"hljs-variable\">&lt;button onClick={() =&gt;</span> this.<span class=\"hljs-built_in\">set</span>State(null)}&gt;setState null&lt;/button&gt;\n        <span class=\"hljs-variable\">&lt;Child /&gt;</span>\n      &lt;/React.Fragement&gt;\n    );\n  }\n}\n\n\n&#x7236;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;\n\n&#x53ea;&#x8981;&#x7236;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x4e86;&#xff0c;&#x5373;&#x4f7f;&#x4f20;&#x5165;&#x5b50;&#x7ec4;&#x4ef6;&#x7684; props &#x672a;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xff0c;&#x90a3;&#x4e48;&#x5b50;&#x7ec4;&#x4ef6;&#x4e5f;&#x4f1a;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x8fdb;&#x800c;&#x89e6;&#x53d1; render\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;&#x91cd;&#x65b0;&#x6e32;&#x67d3; render &#x4f1a;&#x505a;&#x4e9b;&#x4ec0;&#x4e48;?\n\n&#x4f1a;&#x5bf9;&#x65b0;&#x65e7; VNode &#x8fdb;&#x884c;&#x5bf9;&#x6bd4;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x6240;&#x8bf4;&#x7684;Diff&#x7b97;&#x6cd5;&#x3002;\n&#x5bf9;&#x65b0;&#x65e7;&#x4e24;&#x68f5;&#x6811;&#x8fdb;&#x884c;&#x4e00;&#x4e2a;&#x6df1;&#x5ea6;&#x4f18;&#x5148;&#x904d;&#x5386;&#xff0c;&#x8fd9;&#x6837;&#x6bcf;&#x4e00;&#x4e2a;&#x8282;&#x70b9;&#x90fd;&#x4f1a;&#x4e00;&#x4e2a;&#x6807;&#x8bb0;&#xff0c;&#x5728;&#x5230;&#x6df1;&#x5ea6;&#x904d;&#x5386;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6bcf;&#x904d;&#x5386;&#x5230;&#x4e00;&#x548c;&#x4e2a;&#x8282;&#x70b9;&#xff0c;&#x5c31;&#x628a;&#x8be5;&#x8282;&#x70b9;&#x548c;&#x65b0;&#x7684;&#x8282;&#x70b9;&#x6811;&#x8fdb;&#x884c;&#x5bf9;&#x6bd4;&#xff0c;&#x5982;&#x679c;&#x6709;&#x5dee;&#x5f02;&#x5c31;&#x653e;&#x5230;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x91cc;&#x9762;\n&#x904d;&#x5386;&#x5dee;&#x5f02;&#x5bf9;&#x8c61;&#xff0c;&#x6839;&#x636e;&#x5dee;&#x5f02;&#x7684;&#x7c7b;&#x578b;&#xff0c;&#x6839;&#x636e;&#x5bf9;&#x5e94;&#x5bf9;&#x89c4;&#x5219;&#x66f4;&#x65b0;VNode\n\nReact &#x7684;&#x5904;&#x7406; render &#x7684;&#x57fa;&#x672c;&#x601d;&#x7ef4;&#x6a21;&#x5f0f;&#x662f;&#x6bcf;&#x6b21;&#x4e00;&#x6709;&#x53d8;&#x52a8;&#x5c31;&#x4f1a;&#x53bb;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x6574;&#x4e2a;&#x5e94;&#x7528;&#x3002;&#x5728; Virtual DOM &#x6ca1;&#x6709;&#x51fa;&#x73b0;&#x4e4b;&#x524d;&#xff0c;&#x6700;&#x7b80;&#x5355;&#x7684;&#x65b9;&#x6cd5;&#x5c31;&#x662f;&#x76f4;&#x63a5;&#x8c03;&#x7528; innerHTML&#x3002;Virtual DOM&#x5389;&#x5bb3;&#x7684;&#x5730;&#x65b9;&#x5e76;&#x4e0d;&#x662f;&#x8bf4;&#x5b83;&#x6bd4;&#x76f4;&#x63a5;&#x64cd;&#x4f5c; DOM &#x5feb;&#xff0c;&#x800c;&#x662f;&#x8bf4;&#x4e0d;&#x7ba1;&#x6570;&#x636e;&#x600e;&#x4e48;&#x53d8;&#xff0c;&#x90fd;&#x4f1a;&#x5c3d;&#x91cf;&#x4ee5;&#x6700;&#x5c0f;&#x7684;&#x4ee3;&#x4ef7;&#x53bb;&#x66f4;&#x65b0; DOM&#x3002;React &#x5c06; render &#x51fd;&#x6570;&#x8fd4;&#x56de;&#x7684;&#x865a;&#x62df; DOM &#x6811;&#x4e0e;&#x8001;&#x7684;&#x8fdb;&#x884c;&#x6bd4;&#x8f83;&#xff0c;&#x4ece;&#x800c;&#x786e;&#x5b9a; DOM &#x8981;&#x4e0d;&#x8981;&#x66f4;&#x65b0;&#x3001;&#x600e;&#x4e48;&#x66f4;&#x65b0;&#x3002;&#x5f53; DOM &#x6811;&#x5f88;&#x5927;&#x65f6;&#xff0c;&#x904d;&#x5386;&#x4e24;&#x68f5;&#x6811;&#x8fdb;&#x884c;&#x5404;&#x79cd;&#x6bd4;&#x5bf9;&#x8fd8;&#x662f;&#x76f8;&#x5f53;&#x8017;&#x6027;&#x80fd;&#x7684;&#xff0c;&#x7279;&#x522b;&#x662f;&#x5728;&#x9876;&#x5c42; <span class=\"hljs-built_in\">set</span>State &#x4e00;&#x4e2a;&#x5fae;&#x5c0f;&#x7684;&#x4fee;&#x6539;&#xff0c;&#x9ed8;&#x8ba4;&#x4f1a;&#x53bb;&#x904d;&#x5386;&#x6574;&#x68f5;&#x6811;&#x3002;&#x5c3d;&#x7ba1; React &#x4f7f;&#x7528;&#x9ad8;&#x5ea6;&#x4f18;&#x5316;&#x7684; Diff &#x7b97;&#x6cd5;&#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x4ecd;&#x7136;&#x4f1a;&#x635f;&#x8017;&#x6027;&#x80fd;.\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"639,681"}},{"content":"<pre data-lines=\"682,686\"><code data-lines=\"682,686\">&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#x7684;&#x6539;&#x53d8;&#x53ef;&#x4ee5;&#x56e0;&#x4e3a;props&#x7684;&#x6539;&#x53d8;&#xff0c;&#x6216;&#x8005;&#x76f4;&#x63a5;&#x901a;&#x8fc7;<span class=\"hljs-built_in\">set</span>State&#x65b9;&#x6cd5;&#x6539;&#x53d8;&#x3002;&#x7ec4;&#x4ef6;&#x83b7;&#x5f97;&#x65b0;&#x7684;&#x72b6;&#x6001;&#xff0c;&#x7136;&#x540e;React&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x5e94;&#x8be5;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x3002;&#x53ea;&#x8981;&#x7ec4;&#x4ef6;&#x7684;<span class=\"hljs-keyword\">state</span>&#x53d1;&#x751f;&#x53d8;&#x5316;&#xff0c;React&#x5c31;&#x4f1a;&#x5bf9;&#x7ec4;&#x4ef6;&#x8fdb;&#x884c;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;React&#x4e2d;&#x7684;shouldComponentUpdate&#x65b9;&#x6cd5;&#x9ed8;&#x8ba4;&#x8fd4;&#x56de;true&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x5bfc;&#x81f4;&#x6bcf;&#x6b21;&#x66f4;&#x65b0;&#x90fd;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7684;&#x539f;&#x56e0;&#x3002;\n&#x5f53;React&#x5c06;&#x8981;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x65f6;&#x4f1a;&#x6267;&#x884c;shouldComponentUpdate&#x65b9;&#x6cd5;&#x6765;&#x770b;&#x5b83;&#x662f;&#x5426;&#x8fd4;&#x56de;true&#xff08;&#x7ec4;&#x4ef6;&#x5e94;&#x8be5;&#x66f4;&#x65b0;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff09;&#x3002;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x91cd;&#x5199;shouldComponentUpdate&#x65b9;&#x6cd5;&#x8ba9;&#x5b83;&#x6839;&#x636e;&#x60c5;&#x51b5;&#x8fd4;&#x56de;true&#x6216;&#x8005;false&#x6765;&#x544a;&#x8bc9;React&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x8df3;&#x8fc7;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"682,686"}},{"content":"<pre data-lines=\"687,719\"><code data-lines=\"687,719\">React &#x58f0;&#x660e;&#x7ec4;&#x4ef6;&#x7684;&#x4e09;&#x79cd;&#x65b9;&#x5f0f;&#xff1a;\n\n&#x51fd;&#x6570;&#x5f0f;&#x5b9a;&#x4e49;&#x7684;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;\nES5&#x539f;&#x751f;&#x65b9;&#x5f0f;React.createClass&#x5b9a;&#x4e49;&#x7684;&#x7ec4;&#x4ef6;\nES6&#x5f62;&#x5f0f;&#x7684;extends React.Component&#x5b9a;&#x4e49;&#x7684;&#x7ec4;&#x4ef6;\n\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x65e0;&#x72b6;&#x6001;&#x51fd;&#x6570;&#x5f0f;&#x7ec4;&#x4ef6;\n&#x5b83;&#x662f;&#x4e3a;&#x4e86;&#x521b;&#x5efa;&#x7eaf;&#x5c55;&#x793a;&#x7ec4;&#x4ef6;&#xff0c;&#x8fd9;&#x79cd;&#x7ec4;&#x4ef6;&#x53ea;&#x8d1f;&#x8d23;&#x6839;&#x636e;&#x4f20;&#x5165;&#x7684;props&#x6765;&#x5c55;&#x793a;&#xff0c;&#x4e0d;&#x6d89;&#x53ca;&#x5230;<span class=\"hljs-keyword\">state</span>&#x72b6;&#x6001;&#x7684;&#x64cd;&#x4f5c;\n&#x7ec4;&#x4ef6;&#x4e0d;&#x4f1a;&#x88ab;&#x5b9e;&#x4f8b;&#x5316;&#xff0c;&#x6574;&#x4f53;&#x6e32;&#x67d3;&#x6027;&#x80fd;&#x5f97;&#x5230;&#x63d0;&#x5347;&#xff0c;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;this&#x5bf9;&#x8c61;&#xff0c;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#x751f;&#x547d;&#x5468;&#x671f;&#x7684;&#x65b9;&#x6cd5;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;ES5 &#x539f;&#x751f;&#x65b9;&#x5f0f; React.createClass // RFC\nReact.createClass&#x4f1a;&#x81ea;&#x7ed1;&#x5b9a;&#x51fd;&#x6570;&#x65b9;&#x6cd5;&#xff0c;&#x5bfc;&#x81f4;&#x4e0d;&#x5fc5;&#x8981;&#x7684;&#x6027;&#x80fd;&#x5f00;&#x9500;&#xff0c;&#x589e;&#x52a0;&#x4ee3;&#x7801;&#x8fc7;&#x65f6;&#x7684;&#x53ef;&#x80fd;&#x6027;&#x3002;\n&#xff08;<span class=\"hljs-number\">3</span>&#xff09;E6&#x7ee7;&#x627f;&#x5f62;&#x5f0f; React.Component // RCC\n&#x76ee;&#x524d;&#x6781;&#x4e3a;&#x63a8;&#x8350;&#x7684;&#x521b;&#x5efa;&#x6709;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x6700;&#x7ec8;&#x4f1a;&#x53d6;&#x4ee3;React.createClass&#x5f62;&#x5f0f;&#xff1b;&#x76f8;&#x5bf9;&#x4e8e; React.createClass&#x53ef;&#x4ee5;&#x66f4;&#x597d;&#x5b9e;&#x73b0;&#x4ee3;&#x7801;&#x590d;&#x7528;&#x3002;\n&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x76f8;&#x5bf9;&#x4e8e;&#x4e8e;&#x540e;&#x8005;&#x7684;&#x533a;&#x522b;&#xff1a;\n&#x4e0e;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x76f8;&#x6bd4;&#xff0c;React.createClass&#x548c;React.Component&#x90fd;&#x662f;&#x521b;&#x5efa;&#x6709;&#x72b6;&#x6001;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x8fd9;&#x4e9b;&#x7ec4;&#x4ef6;&#x662f;&#x8981;&#x88ab;&#x5b9e;&#x4f8b;&#x5316;&#x7684;&#xff0c;&#x5e76;&#x4e14;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x7ec4;&#x4ef6;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x65b9;&#x6cd5;&#x3002;\nReact.createClass&#x4e0e;React.Component&#x533a;&#x522b;&#xff1a;\n&#x2460; &#x51fd;&#x6570;this&#x81ea;&#x7ed1;&#x5b9a;\n\nReact.createClass&#x521b;&#x5efa;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5176;&#x6bcf;&#x4e00;&#x4e2a;&#x6210;&#x5458;&#x51fd;&#x6570;&#x7684;this&#x90fd;&#x6709;React&#x81ea;&#x52a8;&#x7ed1;&#x5b9a;&#xff0c;&#x51fd;&#x6570;&#x4e2d;&#x7684;this&#x4f1a;&#x88ab;&#x6b63;&#x786e;&#x8bbe;&#x7f6e;&#x3002;\nReact.Component&#x521b;&#x5efa;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5176;&#x6210;&#x5458;&#x51fd;&#x6570;&#x4e0d;&#x4f1a;&#x81ea;&#x52a8;&#x7ed1;&#x5b9a;this&#xff0c;&#x9700;&#x8981;&#x5f00;&#x53d1;&#x8005;&#x624b;&#x52a8;&#x7ed1;&#x5b9a;&#xff0c;&#x5426;&#x5219;this&#x4e0d;&#x80fd;&#x83b7;&#x53d6;&#x5f53;&#x524d;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x3002;\n\n&#x2461; &#x7ec4;&#x4ef6;&#x5c5e;&#x6027;&#x7c7b;&#x578b;propTypes&#x53ca;&#x5176;&#x9ed8;&#x8ba4;props&#x5c5e;&#x6027;<span class=\"hljs-keyword\">default</span>Props&#x914d;&#x7f6e;&#x4e0d;&#x540c;\n\nReact.createClass&#x5728;&#x521b;&#x5efa;&#x7ec4;&#x4ef6;&#x65f6;&#xff0c;&#x6709;&#x5173;&#x7ec4;&#x4ef6;props&#x7684;&#x5c5e;&#x6027;&#x7c7b;&#x578b;&#x53ca;&#x7ec4;&#x4ef6;&#x9ed8;&#x8ba4;&#x7684;&#x5c5e;&#x6027;&#x4f1a;&#x4f5c;&#x4e3a;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684;&#x5c5e;&#x6027;&#x6765;&#x914d;&#x7f6e;&#xff0c;&#x5176;&#x4e2d;<span class=\"hljs-keyword\">default</span>Props&#x662f;&#x4f7f;&#x7528;getDefaultProps&#x7684;&#x65b9;&#x6cd5;&#x6765;&#x83b7;&#x53d6;&#x9ed8;&#x8ba4;&#x7ec4;&#x4ef6;&#x5c5e;&#x6027;&#x7684;\nReact.Component&#x5728;&#x521b;&#x5efa;&#x7ec4;&#x4ef6;&#x65f6;&#x914d;&#x7f6e;&#x8fd9;&#x4e24;&#x4e2a;&#x5bf9;&#x5e94;&#x4fe1;&#x606f;&#x65f6;&#xff0c;&#x4ed6;&#x4eec;&#x662f;&#x4f5c;&#x4e3a;&#x7ec4;&#x4ef6;&#x7c7b;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4e0d;&#x662f;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x6240;&#x8c13;&#x7684;&#x7c7b;&#x7684;&#x9759;&#x6001;&#x5c5e;&#x6027;&#x6765;&#x914d;&#x7f6e;&#x7684;&#x3002;\n\n&#x2462; &#x7ec4;&#x4ef6;&#x521d;&#x59cb;&#x72b6;&#x6001;<span class=\"hljs-keyword\">state</span>&#x7684;&#x914d;&#x7f6e;&#x4e0d;&#x540c;\n\nReact.createClass&#x521b;&#x5efa;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5176;&#x72b6;&#x6001;<span class=\"hljs-keyword\">state</span>&#x662f;&#x901a;&#x8fc7;getInitialState&#x65b9;&#x6cd5;&#x6765;&#x914d;&#x7f6e;&#x7ec4;&#x4ef6;&#x76f8;&#x5173;&#x7684;&#x72b6;&#x6001;&#xff1b;\nReact.Component&#x521b;&#x5efa;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5176;&#x72b6;&#x6001;<span class=\"hljs-keyword\">state</span>&#x662f;&#x5728;constructor&#x4e2d;&#x50cf;&#x521d;&#x59cb;&#x5316;&#x7ec4;&#x4ef6;&#x5c5e;&#x6027;&#x4e00;&#x6837;&#x58f0;&#x660e;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"687,719"}},{"content":"<pre data-lines=\"720,766\"><code data-lines=\"720,766\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x6709;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;\n&#x7279;&#x70b9;&#xff1a;\n\n&#x662f;&#x7c7b;&#x7ec4;&#x4ef6;\n&#x6709;&#x7ee7;&#x627f;\n&#x53ef;&#x4ee5;&#x4f7f;&#x7528;this\n&#x53ef;&#x4ee5;&#x4f7f;&#x7528;react&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;\n&#x4f7f;&#x7528;&#x8f83;&#x591a;&#xff0c;&#x5bb9;&#x6613;&#x9891;&#x7e41;&#x89e6;&#x53d1;&#x751f;&#x547d;&#x5468;&#x671f;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x5f71;&#x54cd;&#x6027;&#x80fd;\n&#x5185;&#x90e8;&#x4f7f;&#x7528; <span class=\"hljs-keyword\">state</span>&#xff0c;&#x7ef4;&#x62a4;&#x81ea;&#x8eab;&#x72b6;&#x6001;&#x7684;&#x53d8;&#x5316;&#xff0c;&#x6709;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x6839;&#x636e;&#x5916;&#x90e8;&#x7ec4;&#x4ef6;&#x4f20;&#x5165;&#x7684; props &#x548c;&#x81ea;&#x8eab;&#x7684; <span class=\"hljs-keyword\">state</span>&#x8fdb;&#x884c;&#x6e32;&#x67d3;&#x3002;\n\n&#x4f7f;&#x7528;&#x573a;&#x666f;&#xff1a;\n\n&#x9700;&#x8981;&#x4f7f;&#x7528;&#x5230;&#x72b6;&#x6001;&#x7684;&#x3002;\n&#x9700;&#x8981;&#x4f7f;&#x7528;&#x72b6;&#x6001;&#x64cd;&#x4f5c;&#x7ec4;&#x4ef6;&#x7684;&#xff08;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x7684;&#x4e5f;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x65b0;&#x7248;&#x672c;react hooks&#x4e5f;&#x53ef;&#x5b9e;&#x73b0;&#xff09;\n\n&#x603b;&#x7ed3;&#xff1a;\n&#x7c7b;&#x7ec4;&#x4ef6;&#x53ef;&#x4ee5;&#x7ef4;&#x62a4;&#x81ea;&#x8eab;&#x7684;&#x72b6;&#x6001;&#x53d8;&#x91cf;&#xff0c;&#x5373;&#x7ec4;&#x4ef6;&#x7684; <span class=\"hljs-keyword\">state</span> &#xff0c;&#x7c7b;&#x7ec4;&#x4ef6;&#x8fd8;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x65b9;&#x6cd5;&#xff0c;&#x53ef;&#x4ee5;&#x8ba9;&#x5f00;&#x53d1;&#x8005;&#x80fd;&#x591f;&#x5728;&#x7ec4;&#x4ef6;&#x7684;&#x4e0d;&#x540c;&#x9636;&#x6bb5;&#xff08;&#x6302;&#x8f7d;&#x3001;&#x66f4;&#x65b0;&#x3001;&#x5378;&#x8f7d;&#xff09;&#xff0c;&#x5bf9;&#x7ec4;&#x4ef6;&#x505a;&#x66f4;&#x591a;&#x7684;&#x63a7;&#x5236;&#x3002;&#x7c7b;&#x7ec4;&#x4ef6;&#x5219;&#x65e2;&#x53ef;&#x4ee5;&#x5145;&#x5f53;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5145;&#x5f53;&#x6709;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x3002;&#x5f53;&#x4e00;&#x4e2a;&#x7c7b;&#x7ec4;&#x4ef6;&#x4e0d;&#x9700;&#x8981;&#x7ba1;&#x7406;&#x81ea;&#x8eab;&#x72b6;&#x6001;&#x65f6;&#xff0c;&#x4e5f;&#x53ef;&#x79f0;&#x4e3a;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;\n&#x7279;&#x70b9;&#xff1a;\n\n&#x4e0d;&#x4f9d;&#x8d56;&#x81ea;&#x8eab;&#x7684;&#x72b6;&#x6001;<span class=\"hljs-keyword\">state</span>\n&#x53ef;&#x4ee5;&#x662f;&#x7c7b;&#x7ec4;&#x4ef6;&#x6216;&#x8005;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x3002;\n&#x53ef;&#x4ee5;&#x5b8c;&#x5168;&#x907f;&#x514d;&#x4f7f;&#x7528; this &#x5173;&#x952e;&#x5b57;&#x3002;&#xff08;&#x7531;&#x4e8e;&#x4f7f;&#x7528;&#x7684;&#x662f;&#x7bad;&#x5934;&#x51fd;&#x6570;&#x4e8b;&#x4ef6;&#x65e0;&#x9700;&#x7ed1;&#x5b9a;&#xff09;\n&#x6709;&#x66f4;&#x9ad8;&#x7684;&#x6027;&#x80fd;&#x3002;&#x5f53;&#x4e0d;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x751f;&#x547d;&#x5468;&#x671f;&#x94a9;&#x5b50;&#x65f6;&#xff0c;&#x5e94;&#x8be5;&#x9996;&#x5148;&#x4f7f;&#x7528;&#x65e0;&#x72b6;&#x6001;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;\n&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x4e0d;&#x7ef4;&#x62a4; <span class=\"hljs-keyword\">state</span> &#xff0c;&#x53ea;&#x6839;&#x636e;&#x5916;&#x90e8;&#x7ec4;&#x4ef6;&#x4f20;&#x5165;&#x7684; props &#x8fdb;&#x884c;&#x6e32;&#x67d3;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5f53; props &#x6539;&#x53d8;&#x65f6;&#xff0c;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n\n&#x4f7f;&#x7528;&#x573a;&#x666f;&#xff1a;\n\n&#x7ec4;&#x4ef6;&#x4e0d;&#x9700;&#x8981;&#x7ba1;&#x7406; <span class=\"hljs-keyword\">state</span>&#xff0c;&#x7eaf;&#x5c55;&#x793a;\n\n&#x4f18;&#x70b9;&#xff1a;\n\n&#x7b80;&#x5316;&#x4ee3;&#x7801;&#x3001;&#x4e13;&#x6ce8;&#x4e8e; render\n&#x7ec4;&#x4ef6;&#x4e0d;&#x9700;&#x8981;&#x88ab;&#x5b9e;&#x4f8b;&#x5316;&#xff0c;&#x65e0;&#x751f;&#x547d;&#x5468;&#x671f;&#xff0c;&#x63d0;&#x5347;&#x6027;&#x80fd;&#x3002; &#x8f93;&#x51fa;&#xff08;&#x6e32;&#x67d3;&#xff09;&#x53ea;&#x53d6;&#x51b3;&#x4e8e;&#x8f93;&#x5165;&#xff08;&#x5c5e;&#x6027;&#xff09;&#xff0c;&#x65e0;&#x526f;&#x4f5c;&#x7528;\n&#x89c6;&#x56fe;&#x548c;&#x6570;&#x636e;&#x7684;&#x89e3;&#x8026;&#x5206;&#x79bb;\n\n&#x7f3a;&#x70b9;&#xff1a;\n\n&#x65e0;&#x6cd5;&#x4f7f;&#x7528; ref\n&#x65e0;&#x751f;&#x547d;&#x5468;&#x671f;&#x65b9;&#x6cd5;\n&#x65e0;&#x6cd5;&#x63a7;&#x5236;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x6e32;&#x67d3;&#xff0c;&#x56e0;&#x4e3a;&#x65e0;&#x6cd5;&#x4f7f;&#x7528;shouldComponentUpdate &#x65b9;&#x6cd5;&#xff0c;&#x5f53;&#x7ec4;&#x4ef6;&#x63a5;&#x53d7;&#x5230;&#x65b0;&#x7684;&#x5c5e;&#x6027;&#x65f6;&#x5219;&#x4f1a;&#x91cd;&#x6e32;&#x67d3;\n\n&#x603b;&#x7ed3;&#xff1a;\n&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x72b6;&#x6001;&#x4e14;&#x4e0e;&#x5916;&#x90e8;&#x65e0;&#x5173;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x53ef;&#x4ee5;&#x8003;&#x8651;&#x7528;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#xff0c;&#x8fd9;&#x6837;&#x72b6;&#x6001;&#x6811;&#x5c31;&#x4e0d;&#x4f1a;&#x8fc7;&#x4e8e;&#x590d;&#x6742;&#xff0c;&#x6613;&#x4e8e;&#x7406;&#x89e3;&#x548c;&#x7ba1;&#x7406;&#x3002;&#x5f53;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x4e0d;&#x9700;&#x8981;&#x7ba1;&#x7406;&#x81ea;&#x8eab;&#x72b6;&#x6001;&#x65f6;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x65e0;&#x72b6;&#x6001;&#x7ec4;&#x4ef6;&#xff0c;&#x5e94;&#x8be5;&#x4f18;&#x5148;&#x8bbe;&#x8ba1;&#x4e3a;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x3002;&#x6bd4;&#x5982;&#x81ea;&#x5b9a;&#x4e49;&#x7684; <span class=\"hljs-variable\">&lt;Button/&gt;</span>&#x3001; <span class=\"hljs-variable\">&lt;Input /&gt;</span> &#x7b49;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"720,766"}},{"content":"<pre data-lines=\"767,795\"><code data-lines=\"767,795\">&#x5728;<span class=\"hljs-title class_\">React</span>&#x4e2d;&#xff0c;&#x7ec4;&#x4ef6;&#x8fd4;&#x56de;&#x7684;&#x5143;&#x7d20;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x6839;&#x5143;&#x7d20;&#x3002;&#x4e3a;&#x4e86;&#x4e0d;&#x6dfb;&#x52a0;&#x591a;&#x4f59;&#x7684;<span class=\"hljs-variable constant_\">DOM</span>&#x8282;&#x70b9;&#xff0c;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;<span class=\"hljs-title class_\">Fragment</span>&#x6807;&#x7b7e;&#x6765;&#x5305;&#x88f9;&#x6240;&#x6709;&#x7684;&#x5143;&#x7d20;&#xff0c;<span class=\"hljs-title class_\">Fragment</span>&#x6807;&#x7b7e;&#x4e0d;&#x4f1a;&#x6e32;&#x67d3;&#x51fa;&#x4efb;&#x4f55;&#x5143;&#x7d20;&#x3002;<span class=\"hljs-title class_\">React</span>&#x5b98;&#x65b9;&#x5bf9;<span class=\"hljs-title class_\">Fragment</span>&#x7684;&#x89e3;&#x91ca;&#xff1a;\n\n<span class=\"hljs-title class_\">React</span> &#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#x5e38;&#x89c1;&#x6a21;&#x5f0f;&#x662f;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x8fd4;&#x56de;&#x591a;&#x4e2a;&#x5143;&#x7d20;&#x3002;<span class=\"hljs-title class_\">Fragments</span> &#x5141;&#x8bb8;&#x4f60;&#x5c06;&#x5b50;&#x5217;&#x8868;&#x5206;&#x7ec4;&#xff0c;&#x800c;&#x65e0;&#x9700;&#x5411; <span class=\"hljs-variable constant_\">DOM</span> &#x6dfb;&#x52a0;&#x989d;&#x5916;&#x8282;&#x70b9;&#x3002;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { <span class=\"hljs-title class_\">Component</span>, <span class=\"hljs-title class_\">Fragment</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;react&apos;</span>\n\n<span class=\"hljs-comment\">// &#x4e00;&#x822c;&#x5f62;&#x5f0f;</span>\n<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">React.Fragment</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ChildA</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ChildB</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ChildC</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">React.Fragment</span>&gt;</span></span>\n  );\n}\n<span class=\"hljs-comment\">// &#x4e5f;&#x53ef;&#x4ee5;&#x5199;&#x6210;&#x4ee5;&#x4e0b;&#x5f62;&#x5f0f;</span>\n<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ChildA</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ChildB</span> /&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ChildC</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/&gt;</span></span>\n  );\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"767,795"}},{"content":"<pre data-lines=\"796,803\"><code data-lines=\"796,803\">&#x53ef;&#x4ee5;&#x7528;<span class=\"hljs-built_in\">ref</span>&#x6765;&#x83b7;&#x53d6;&#x67d0;&#x4e2a;&#x5b50;&#x8282;&#x70b9;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7;&#x5f53;&#x524d;<span class=\"hljs-keyword\">class</span>&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684;&#x4e00;&#x4e9b;&#x7279;&#x5b9a;&#x5c5e;&#x6027;&#x6765;&#x76f4;&#x63a5;&#x83b7;&#x53d6;&#x5b50;&#x8282;&#x70b9;&#x5b9e;&#x4f8b;&#x3002;<span class=\"hljs-symbol\">ref</span>&#x6709;&#x4e09;&#x79cd;&#x5b9e;&#x73b0;&#x65b9;&#x6cd5;:\n\n&#x5b57;&#x7b26;&#x4e32;&#x683c;&#x5f0f;&#xff1a;&#x5b57;&#x7b26;&#x4e32;&#x683c;&#x5f0f;&#xff0c;&#x8fd9;&#x662f;<span class=\"hljs-symbol\">React16</span>&#x7248;&#x672c;&#x4e4b;&#x524d;&#x7528;&#x5f97;&#x6700;&#x591a;&#x7684;&#xff0c;&#x4f8b;&#x5982;&#xff1a;&lt;<span class=\"hljs-symbol\">p</span> <span class=\"hljs-symbol\">ref</span>=&quot;<span class=\"hljs-symbol\">info</span>&quot;&gt;<span class=\"hljs-symbol\">span</span>&lt;/<span class=\"hljs-symbol\">p</span>&gt;\n&#x51fd;&#x6570;&#x683c;&#x5f0f;&#xff1a;<span class=\"hljs-symbol\">ref</span>&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;&#x65b9;&#x6cd5;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x6709;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x5bf9;&#x5e94;&#x7684;&#x8282;&#x70b9;&#x5b9e;&#x4f8b;&#xff0c;&#x4f8b;&#x5982;&#xff1a;&lt;<span class=\"hljs-symbol\">p</span> <span class=\"hljs-symbol\">ref</span>={ele =&gt; <span class=\"hljs-keyword\">this</span>.info = ele}&gt;&lt;/p&gt;\ncreateRef&#x65b9;&#x6cd5;&#xff1a;React <span class=\"hljs-number\">16</span>&#x63d0;&#x4f9b;&#x7684;&#x4e00;&#x4e2a;API&#xff0c;&#x4f7f;&#x7528;React.createRef()&#x6765;&#x5b9e;&#x73b0; &#x3000;&#x3000;&#x3000;&#x3000;&#x3000;&#x3000;&#xa0;&#xa0;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"796,803"}},{"content":"<pre data-lines=\"804,814\"><code data-lines=\"804,814\"><span class=\"language-xml\">javascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-tag\">&lt;&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;name&quot;</span> <span class=\"hljs-attr\">ref</span>=</span></span><span class=\"hljs-template-variable\">{this.spanRef}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span></span><span class=\"hljs-template-variable\">{this.state.title}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span></span><span class=\"hljs-template-variable\">{\n     this.spanRef.current ? &apos;&#x6709;&#x503c;&apos; : &apos;&#x65e0;&#x503c;&apos;\n  }</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/&gt;</span>\n\n&#x4e0d;&#x53ef;&#x4ee5;&#xff0c;render &#x9636;&#x6bb5; DOM &#x8fd8;&#x6ca1;&#x6709;&#x751f;&#x6210;&#xff0c;&#x65e0;&#x6cd5;&#x83b7;&#x53d6; DOM&#x3002;DOM &#x7684;&#x83b7;&#x53d6;&#x9700;&#x8981;&#x5728; pre-commit &#x9636;&#x6bb5;&#x548c; commit &#x9636;&#x6bb5;&#xff1a;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"804,814"}},{"content":"<pre data-lines=\"815,850\"><code data-lines=\"815,850\"><span class=\"hljs-title class_\">React</span> &#x5b98;&#x65b9;&#x5bf9; <span class=\"hljs-title class_\">Portals</span> &#x7684;&#x5b9a;&#x4e49;&#xff1a;\n\n<span class=\"hljs-title class_\">Portal</span> &#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x79cd;&#x5c06;&#x5b50;&#x8282;&#x70b9;&#x6e32;&#x67d3;&#x5230;&#x5b58;&#x5728;&#x4e8e;&#x7236;&#x7ec4;&#x4ef6;&#x4ee5;&#x5916;&#x7684; <span class=\"hljs-variable constant_\">DOM</span> &#x8282;&#x70b9;&#x7684;&#x4f18;&#x79c0;&#x7684;&#x65b9;&#x6848;\n\n<span class=\"hljs-title class_\">Portals</span> &#x662f;<span class=\"hljs-title class_\">React</span> <span class=\"hljs-number\">16</span>&#x63d0;&#x4f9b;&#x7684;&#x5b98;&#x65b9;&#x89e3;&#x51b3;&#x65b9;&#x6848;&#xff0c;&#x4f7f;&#x5f97;&#x7ec4;&#x4ef6;&#x53ef;&#x4ee5;&#x8131;&#x79bb;&#x7236;&#x7ec4;&#x4ef6;&#x5c42;&#x7ea7;&#x6302;&#x8f7d;&#x5728;<span class=\"hljs-variable constant_\">DOM</span>&#x6811;&#x7684;&#x4efb;&#x4f55;&#x4f4d;&#x7f6e;&#x3002;&#x901a;&#x4fd7;&#x6765;&#x8bb2;&#xff0c;&#x5c31;&#x662f;&#x6211;&#x4eec; render &#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#xff0c;&#x4f46;&#x8fd9;&#x4e2a;&#x7ec4;&#x4ef6;&#x7684; <span class=\"hljs-variable constant_\">DOM</span> &#x7ed3;&#x6784;&#x5e76;&#x4e0d;&#x5728;&#x672c;&#x7ec4;&#x4ef6;&#x5185;&#x3002;\n<span class=\"hljs-title class_\">Portals</span>&#x8bed;&#x6cd5;&#x5982;&#x4e0b;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">createPortal</span>(child, container);\n\n\n&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570; child &#x662f;&#x53ef;&#x6e32;&#x67d3;&#x7684; <span class=\"hljs-title class_\">React</span> &#x5b50;&#x9879;&#xff0c;&#x6bd4;&#x5982;&#x5143;&#x7d20;&#xff0c;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x8005;&#x7247;&#x6bb5;&#x7b49;;\n&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570; container &#x662f;&#x4e00;&#x4e2a; <span class=\"hljs-variable constant_\">DOM</span> &#x5143;&#x7d20;&#x3002;\n\n&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x7ec4;&#x4ef6;&#x7684;render&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x7684;&#x5143;&#x7d20;&#x4f1a;&#x88ab;&#x6302;&#x8f7d;&#x5728;&#x5b83;&#x7684;&#x7236;&#x7ea7;&#x7ec4;&#x4ef6;&#x4e0a;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">DemoComponent</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./DemoComponent&apos;</span>;\n<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">// DemoComponent&#x5143;&#x7d20;&#x4f1a;&#x88ab;&#x6302;&#x8f7d;&#x5728;id&#x4e3a;parent&#x7684;div&#x7684;&#x5143;&#x7d20;&#x4e0a;</span>\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;parent&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DemoComponent</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n}\n\n&#x7136;&#x800c;&#xff0c;&#x6709;&#x4e9b;&#x5143;&#x7d20;&#x9700;&#x8981;&#x88ab;&#x6302;&#x8f7d;&#x5728;&#x66f4;&#x9ad8;&#x5c42;&#x7ea7;&#x7684;&#x4f4d;&#x7f6e;&#x3002;&#x6700;&#x5178;&#x578b;&#x7684;&#x5e94;&#x7528;&#x573a;&#x666f;&#xff1a;&#x5f53;&#x7236;&#x7ec4;&#x4ef6;&#x5177;&#x6709;<span class=\"hljs-attr\">overflow</span>: hidden&#x6216;&#x8005;z-index&#x7684;&#x6837;&#x5f0f;&#x8bbe;&#x7f6e;&#x65f6;&#xff0c;&#x7ec4;&#x4ef6;&#x6709;&#x53ef;&#x80fd;&#x88ab;&#x5176;&#x4ed6;&#x5143;&#x7d20;&#x906e;&#x6321;&#xff0c;&#x8fd9;&#x65f6;&#x5c31;&#x53ef;&#x4ee5;&#x8003;&#x8651;&#x8981;&#x4e0d;&#x8981;&#x4f7f;&#x7528;<span class=\"hljs-title class_\">Portal</span>&#x4f7f;&#x7ec4;&#x4ef6;&#x7684;&#x6302;&#x8f7d;&#x8131;&#x79bb;&#x7236;&#x7ec4;&#x4ef6;&#x3002;&#x4f8b;&#x5982;&#xff1a;&#x5bf9;&#x8bdd;&#x6846;&#xff0c;&#x6a21;&#x6001;&#x7a97;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">DemoComponent</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./DemoComponent&apos;</span>;\n<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">// DemoComponent&#x5143;&#x7d20;&#x4f1a;&#x88ab;&#x6302;&#x8f7d;&#x5728;id&#x4e3a;parent&#x7684;div&#x7684;&#x5143;&#x7d20;&#x4e0a;</span>\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;parent&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DemoComponent</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"815,850"}},{"content":"<pre data-lines=\"851,866\"><code data-lines=\"851,866\">React &#x57fa;&#x4e8e;&#x865a;&#x62df; DOM &#x548c;&#x9ad8;&#x6548; <span class=\"hljs-keyword\">Diff </span>&#x7b97;&#x6cd5;&#x7684;&#x5b8c;&#x7f8e;&#x914d;&#x5408;&#xff0c;&#x5b9e;&#x73b0;&#x4e86;&#x5bf9; DOM &#x6700;&#x5c0f;&#x7c92;&#x5ea6;&#x7684;&#x66f4;&#x65b0;&#x3002;&#x5927;&#x591a;&#x6570;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;React &#x5bf9; DOM &#x7684;&#x6e32;&#x67d3;&#x6548;&#x7387;&#x8db3;&#x4ee5;&#x4e1a;&#x52a1;&#x65e5;&#x5e38;&#x3002;&#x4f46;&#x5728;&#x4e2a;&#x522b;&#x590d;&#x6742;&#x4e1a;&#x52a1;&#x573a;&#x666f;&#x4e0b;&#xff0c;&#x6027;&#x80fd;&#x95ee;&#x9898;&#x4f9d;&#x7136;&#x4f1a;&#x56f0;&#x6270;&#x6211;&#x4eec;&#x3002;&#x6b64;&#x65f6;&#x9700;&#x8981;&#x91c7;&#x53d6;&#x4e00;&#x4e9b;&#x63aa;&#x65bd;&#x6765;&#x63d0;&#x5347;&#x8fd0;&#x884c;&#x6027;&#x80fd;&#xff0c;&#x5176;&#x5f88;&#x91cd;&#x8981;&#x7684;&#x4e00;&#x4e2a;&#x65b9;&#x5411;&#xff0c;&#x5c31;&#x662f;&#x907f;&#x514d;&#x4e0d;&#x5fc5;&#x8981;&#x7684;&#x6e32;&#x67d3;&#xff08;Render&#xff09;&#x3002;&#x8fd9;&#x91cc;&#x63d0;&#x4e0b;&#x4f18;&#x5316;&#x7684;&#x70b9;&#xff1a;\n\n<span class=\"hljs-keyword\">shouldComponentUpdate </span>&#x548c; PureComponent\n\n&#x5728; React &#x7c7b;&#x7ec4;&#x4ef6;&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x5229;&#x7528; <span class=\"hljs-keyword\">shouldComponentUpdate&#x6216;&#x8005; </span>PureComponent &#x6765;&#x51cf;&#x5c11;&#x56e0;&#x7236;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x800c;&#x89e6;&#x53d1;&#x5b50;&#x7ec4;&#x4ef6;&#x7684; render&#xff0c;&#x4ece;&#x800c;&#x8fbe;&#x5230;&#x76ee;&#x7684;&#x3002;<span class=\"hljs-keyword\">shouldComponentUpdate </span>&#x6765;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x7ec4;&#x4ef6;&#x662f;&#x5426;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x5e0c;&#x671b;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x8fd4;&#x56de; false &#x5373;&#x53ef;&#x3002;\n\n&#x5229;&#x7528;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;\n\n&#x5728;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x4e2d;&#xff0c;&#x5e76;&#x6ca1;&#x6709; <span class=\"hljs-keyword\">shouldComponentUpdate </span>&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#xff0c;&#x53ef;&#x4ee5;&#x5229;&#x7528;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff0c;&#x5c01;&#x88c5;&#x4e00;&#x4e2a;&#x7c7b;&#x4f3c; PureComponet &#x7684;&#x529f;&#x80fd;\n\n&#x4f7f;&#x7528; React.memo\n\nReact.memo &#x662f; React <span class=\"hljs-number\">16</span>.<span class=\"hljs-number\">6</span> &#x65b0;&#x7684;&#x4e00;&#x4e2a; API&#xff0c;&#x7528;&#x6765;&#x7f13;&#x5b58;&#x7ec4;&#x4ef6;&#x7684;&#x6e32;&#x67d3;&#xff0c;&#x907f;&#x514d;&#x4e0d;&#x5fc5;&#x8981;&#x7684;&#x66f4;&#x65b0;&#xff0c;&#x5176;&#x5b9e;&#x4e5f;&#x662f;&#x4e00;&#x4e2a;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#xff0c;&#x4e0e; PureComponent &#x5341;&#x5206;&#x7c7b;&#x4f3c;&#xff0c;&#x4f46;&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c; React.memo&#x53ea;&#x80fd;&#x7528;&#x4e8e;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"851,866"}},{"content":"<pre data-lines=\"867,872\"><code data-lines=\"867,872\">React-<span class=\"hljs-built_in\">int</span>l&#x662f;&#x96c5;&#x864e;&#x7684;&#x8bed;&#x8a00;&#x56fd;&#x9645;&#x5316;&#x5f00;&#x6e90;&#x9879;&#x76ee;FormatJS&#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x901a;&#x8fc7;&#x5176;&#x63d0;&#x4f9b;&#x7684;&#x7ec4;&#x4ef6;&#x548c;API&#x53ef;&#x4ee5;&#x4e0e;ReactJS&#x7ed1;&#x5b9a;&#x3002;\nReact-<span class=\"hljs-built_in\">int</span>l&#x63d0;&#x4f9b;&#x4e86;&#x4e24;&#x79cd;&#x4f7f;&#x7528;&#x65b9;&#x6cd5;&#xff0c;&#x4e00;&#x79cd;&#x662f;&#x5f15;&#x7528;React&#x7ec4;&#x4ef6;&#xff0c;&#x53e6;&#x4e00;&#x79cd;&#x662f;&#x76f4;&#x63a5;&#x8c03;&#x53d6;API&#xff0c;&#x5b98;&#x65b9;&#x66f4;&#x52a0;&#x63a8;&#x8350;&#x5728;React&#x9879;&#x76ee;&#x4e2d;&#x4f7f;&#x7528;&#x524d;&#x8005;&#xff0c;&#x53ea;&#x6709;&#x5728;&#x65e0;&#x6cd5;&#x4f7f;&#x7528;React&#x7ec4;&#x4ef6;&#x7684;&#x5730;&#x65b9;&#xff0c;&#x624d;&#x5e94;&#x8be5;&#x8c03;&#x7528;&#x6846;&#x67b6;&#x63d0;&#x4f9b;&#x7684;API&#x3002;&#x5b83;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x7cfb;&#x5217;&#x7684;React&#x7ec4;&#x4ef6;&#xff0c;&#x5305;&#x62ec;&#x6570;&#x5b57;&#x683c;&#x5f0f;&#x5316;&#x3001;&#x5b57;&#x7b26;&#x4e32;&#x683c;&#x5f0f;&#x5316;&#x3001;&#x65e5;&#x671f;&#x683c;&#x5f0f;&#x5316;&#x7b49;&#x3002;\n&#x5728;React-<span class=\"hljs-built_in\">int</span>l&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x914d;&#x7f6e;&#x4e0d;&#x540c;&#x7684;&#x8bed;&#x8a00;&#x5305;&#xff0c;&#x4ed6;&#x7684;&#x5de5;&#x4f5c;&#x539f;&#x7406;&#x5c31;&#x662f;&#x6839;&#x636e;&#x9700;&#x8981;&#xff0c;&#x5728;&#x8bed;&#x8a00;&#x5305;&#x4e4b;&#x95f4;&#x8fdb;&#x884c;&#x5207;&#x6362;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"867,872"}},{"content":"<pre data-lines=\"873,880\"><code data-lines=\"873,880\">&#x5728;React&#x4e2d;&#xff0c;&#x6570;&#x636e;&#x4f20;&#x9012;&#x4e00;&#x822c;&#x4f7f;&#x7528;props&#x4f20;&#x9012;&#x6570;&#x636e;&#xff0c;&#x7ef4;&#x6301;&#x5355;&#x5411;&#x6570;&#x636e;&#x6d41;&#xff0c;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x8ba9;&#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;&#x53d8;&#x5f97;&#x7b80;&#x5355;&#x4e14;&#x53ef;&#x9884;&#x6d4b;&#xff0c;&#x4f46;&#x662f;&#x5355;&#x9879;&#x6570;&#x636e;&#x6d41;&#x5728;&#x67d0;&#x4e9b;&#x573a;&#x666f;&#x4e2d;&#x5e76;&#x4e0d;&#x9002;&#x7528;&#x3002;&#x5355;&#x7eaf;&#x4e00;&#x5bf9;&#x7684;&#x7236;&#x5b50;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;&#x5e76;&#x65e0;&#x95ee;&#x9898;&#xff0c;&#x4f46;&#x8981;&#x662f;&#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x5c42;&#x5c42;&#x4f9d;&#x8d56;&#x6df1;&#x5165;&#xff0c;props&#x5c31;&#x9700;&#x8981;&#x5c42;&#x5c42;&#x4f20;&#x9012;&#x663e;&#x7136;&#xff0c;&#x8fd9;&#x6837;&#x505a;&#x592a;&#x7e41;&#x7410;&#x4e86;&#x3002;\n<span class=\"hljs-built_in\">Context</span> &#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x79cd;&#x5728;&#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x5171;&#x4eab;&#x6b64;&#x7c7b;&#x503c;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x800c;&#x4e0d;&#x5fc5;&#x663e;&#x5f0f;&#x5730;&#x901a;&#x8fc7;&#x7ec4;&#x4ef6;&#x6811;&#x7684;&#x9010;&#x5c42;&#x4f20;&#x9012; props&#x3002;\n&#x53ef;&#x4ee5;&#x628a;<span class=\"hljs-built_in\">context</span>&#x5f53;&#x505a;&#x662f;&#x7279;&#x5b9a;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x6811;&#x5185;&#x5171;&#x4eab;&#x7684;store&#xff0c;&#x7528;&#x6765;&#x505a;&#x6570;&#x636e;&#x4f20;&#x9012;&#x3002;&#x7b80;&#x5355;&#x8bf4;&#x5c31;&#x662f;&#xff0c;&#x5f53;&#x4f60;&#x4e0d;&#x60f3;&#x5728;&#x7ec4;&#x4ef6;&#x6811;&#x4e2d;&#x901a;&#x8fc7;&#x9010;&#x5c42;&#x4f20;&#x9012;props&#x6216;&#x8005;state&#x7684;&#x65b9;&#x5f0f;&#x6765;&#x4f20;&#x9012;&#x6570;&#x636e;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;<span class=\"hljs-built_in\">Context</span>&#x6765;&#x5b9e;&#x73b0;&#x8de8;&#x5c42;&#x7ea7;&#x7684;&#x7ec4;&#x4ef6;&#x6570;&#x636e;&#x4f20;&#x9012;&#x3002;\n<span class=\"hljs-keyword\">JS&#x7684;&#x4ee3;&#x7801;&#x5757;&#x5728;&#x6267;&#x884c;&#x671f;&#x95f4;&#xff0c;&#x4f1a;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x76f8;&#x5e94;&#x7684;&#x4f5c;&#x7528;&#x57df;&#x94fe;&#xff0c;&#x8fd9;&#x4e2a;&#x4f5c;&#x7528;&#x57df;&#x94fe;&#x8bb0;&#x5f55;&#x7740;&#x8fd0;&#x884c;&#x65f6;JS&#x4ee3;&#x7801;&#x5757;&#x6267;&#x884c;&#x671f;&#x95f4;&#x6240;&#x80fd;&#x8bbf;&#x95ee;&#x7684;&#x6d3b;&#x52a8;&#x5bf9;&#x8c61;&#xff0c;&#x5305;&#x62ec;&#x53d8;&#x91cf;&#x548c;&#x51fd;&#x6570;&#xff0c;JS&#x7a0b;&#x5e8f;&#x901a;&#x8fc7;&#x4f5c;&#x7528;&#x57df;&#x94fe;&#x8bbf;&#x95ee;&#x5230;&#x4ee3;&#x7801;&#x5757;&#x5185;&#x90e8;&#x6216;&#x8005;&#x5916;&#x90e8;&#x7684;&#x53d8;&#x91cf;&#x548c;&#x51fd;&#x6570;&#x3002;\n</span>&#x5047;&#x5982;&#x4ee5;<span class=\"hljs-keyword\">JS&#x7684;&#x4f5c;&#x7528;&#x57df;&#x94fe;&#x4f5c;&#x4e3a;&#x7c7b;&#x6bd4;&#xff0c;React&#x7ec4;&#x4ef6;&#x63d0;&#x4f9b;&#x7684;Context&#x5bf9;&#x8c61;&#x5176;&#x5b9e;&#x5c31;&#x597d;&#x6bd4;&#x4e00;&#x4e2a;&#x63d0;&#x4f9b;&#x7ed9;&#x5b50;&#x7ec4;&#x4ef6;&#x8bbf;&#x95ee;&#x7684;&#x4f5c;&#x7528;&#x57df;&#xff0c;&#x800c; </span><span class=\"hljs-built_in\">Context</span>&#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x53ef;&#x4ee5;&#x770b;&#x6210;&#x4f5c;&#x7528;&#x57df;&#x4e0a;&#x7684;&#x6d3b;&#x52a8;&#x5bf9;&#x8c61;&#x3002;&#x7531;&#x4e8e;&#x7ec4;&#x4ef6; &#x7684; <span class=\"hljs-built_in\">Context</span> &#x7531;&#x5176;&#x7236;&#x8282;&#x70b9;&#x94fe;&#x4e0a;&#x6240;&#x6709;&#x7ec4;&#x4ef6;&#x901a; &#x8fc7; getChildContext&#xff08;&#xff09;&#x8fd4;&#x56de;&#x7684;<span class=\"hljs-built_in\">Context</span>&#x5bf9;&#x8c61;&#x7ec4;&#x5408;&#x800c;&#x6210;&#xff0c;&#x6240;&#x4ee5;&#xff0c;&#x7ec4;&#x4ef6;&#x901a;&#x8fc7;<span class=\"hljs-built_in\">Context</span>&#x662f;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x5230;&#x5176;&#x7236;&#x7ec4;&#x4ef6;&#x94fe;&#x4e0a;&#x6240;&#x6709;&#x8282;&#x70b9;&#x7ec4;&#x4ef6;&#x63d0;&#x4f9b;&#x7684;<span class=\"hljs-built_in\">Context</span>&#x7684;&#x5c5e;&#x6027;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"873,880"}},{"content":"<pre data-lines=\"881,887\"><code data-lines=\"881,887\"><span class=\"hljs-built_in\">Context</span>&#x76ee;&#x524d;&#x8fd8;&#x5904;&#x4e8e;&#x5b9e;&#x9a8c;&#x9636;&#x6bb5;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x5728;&#x540e;&#x9762;&#x7684;&#x53d1;&#x884c;&#x7248;&#x672c;&#x4e2d;&#x6709;&#x5f88;&#x5927;&#x7684;&#x53d8;&#x5316;&#xff0c;&#x4e8b;&#x5b9e;&#x4e0a;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x5df2;&#x7ecf;&#x53d1;&#x751f;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x4e3a;&#x4e86;&#x907f;&#x514d;&#x7ed9;&#x4eca;&#x540e;&#x5347;&#x7ea7;&#x5e26;&#x6765;&#x5927;&#x7684;&#x5f71;&#x54cd;&#x548c;&#x9ebb;&#x70e6;&#xff0c;&#x4e0d;&#x5efa;&#x8bae;&#x5728;app&#x4e2d;&#x4f7f;&#x7528;<span class=\"hljs-built_in\">context</span>&#x3002;\n&#x5c3d;&#x7ba1;&#x4e0d;&#x5efa;&#x8bae;&#x5728;app&#x4e2d;&#x4f7f;&#x7528;<span class=\"hljs-built_in\">context</span>&#xff0c;&#x4f46;&#x662f;&#x72ec;&#x6709;&#x7ec4;&#x4ef6;&#x800c;&#x8a00;&#xff0c;&#x7531;&#x4e8e;&#x5f71;&#x54cd;&#x8303;&#x56f4;&#x5c0f;&#x4e8e;app&#xff0c;&#x5982;&#x679c;&#x53ef;&#x4ee5;&#x505a;&#x5230;&#x9ad8;&#x5185;&#x805a;&#xff0c;&#x4e0d;&#x7834;&#x574f;&#x7ec4;&#x4ef6;&#x6811;&#x4e4b;&#x95f4;&#x7684;&#x4f9d;&#x8d56;&#x5173;&#x7cfb;&#xff0c;&#x53ef;&#x4ee5;&#x8003;&#x8651;&#x4f7f;&#x7528;<span class=\"hljs-built_in\">context</span>\n&#x5bf9;&#x4e8e;&#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x7684;&#x6570;&#x636e;&#x901a;&#x4fe1;&#x6216;&#x8005;&#x72b6;&#x6001;&#x7ba1;&#x7406;&#xff0c;&#x6709;&#x6548;&#x4f7f;&#x7528;props&#x6216;&#x8005;state&#x89e3;&#x51b3;&#xff0c;&#x7136;&#x540e;&#x518d;&#x8003;&#x8651;&#x4f7f;&#x7528;&#x7b2c;&#x4e09;&#x65b9;&#x7684;&#x6210;&#x719f;&#x5e93;&#x8fdb;&#x884c;&#x89e3;&#x51b3;&#xff0c;&#x4ee5;&#x4e0a;&#x7684;&#x65b9;&#x6cd5;&#x90fd;&#x4e0d;&#x662f;&#x6700;&#x4f73;&#x7684;&#x65b9;&#x6848;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5728;&#x8003;&#x8651;<span class=\"hljs-built_in\">context</span>&#x3002;\n<span class=\"hljs-built_in\">context</span>&#x7684;&#x66f4;&#x65b0;&#x9700;&#x8981;&#x901a;&#x8fc7;setState()&#x89e6;&#x53d1;&#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x5e76;&#x4e0d;&#x662f;&#x5f88;&#x53ef;&#x9760;&#x7684;&#xff0c;<span class=\"hljs-built_in\">Context</span>&#x652f;&#x6301;&#x8de8;&#x7ec4;&#x4ef6;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x4f46;&#x662f;&#x5982;&#x679c;&#x4e2d;&#x95f4;&#x7684;&#x5b50;&#x7ec4;&#x4ef6;&#x901a;&#x8fc7;&#x4e00;&#x4e9b;&#x65b9;&#x6cd5;&#x4e0d;&#x5f71;&#x54cd;&#x66f4;&#x65b0;&#xff0c;&#x6bd4;&#x5982; <span class=\"hljs-keyword\">shouldComponentUpdate() </span>&#x8fd4;&#x56de;false &#x90a3;&#x4e48;&#x4e0d;&#x80fd;&#x4fdd;&#x8bc1;<span class=\"hljs-built_in\">Context</span>&#x7684;&#x66f4;&#x65b0;&#x4e00;&#x5b9a;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;<span class=\"hljs-built_in\">Context</span>&#x7684;&#x5b50;&#x7ec4;&#x4ef6;&#xff0c;&#x56e0;&#x6b64;&#xff0c;<span class=\"hljs-built_in\">Context</span>&#x7684;&#x53ef;&#x9760;&#x6027;&#x9700;&#x8981;&#x5173;&#x6ce8;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"881,887"}},{"content":"<pre data-lines=\"888,932\"><code data-lines=\"888,932\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;\n&#x5728;&#x4f7f;&#x7528;&#x8868;&#x5355;&#x6765;&#x6536;&#x96c6;&#x7528;&#x6237;&#x8f93;&#x5165;&#x65f6;&#xff0c;&#x4f8b;&#x5982;<span class=\"hljs-variable\">&lt;input&gt;</span><span class=\"hljs-variable\">&lt;select&gt;</span><span class=\"hljs-variable\">&lt;textearea&gt;</span>&#x7b49;&#x5143;&#x7d20;&#x90fd;&#x8981;&#x7ed1;&#x5b9a;&#x4e00;&#x4e2a;change&#x4e8b;&#x4ef6;&#xff0c;&#x5f53;&#x8868;&#x5355;&#x7684;&#x72b6;&#x6001;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xff0c;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;<span class=\"hljs-keyword\">on</span>Change&#x4e8b;&#x4ef6;&#xff0c;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;<span class=\"hljs-keyword\">state</span>&#x3002;&#x8fd9;&#x79cd;&#x7ec4;&#x4ef6;&#x5728;React&#x4e2d;&#x88ab;&#x79f0;&#x4e3a;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#xff0c;&#x5728;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x4e2d;&#xff0c;&#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x51fa;&#x7684;&#x72b6;&#x6001;&#x4e0e;&#x5b83;&#x7684;value&#x6216;checked&#x5c5e;&#x6027;&#x76f8;&#x5bf9;&#x5e94;&#xff0c;react&#x901a;&#x8fc7;&#x8fd9;&#x79cd;&#x65b9;&#x5f0f;&#x6d88;&#x9664;&#x4e86;&#x7ec4;&#x4ef6;&#x7684;&#x5c40;&#x90e8;&#x72b6;&#x6001;&#xff0c;&#x4f7f;&#x6574;&#x4e2a;&#x72b6;&#x6001;&#x53ef;&#x63a7;&#x3002;react&#x5b98;&#x65b9;&#x63a8;&#x8350;&#x4f7f;&#x7528;&#x53d7;&#x63a7;&#x8868;&#x5355;&#x7ec4;&#x4ef6;&#x3002;\n&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;<span class=\"hljs-keyword\">state</span>&#x7684;&#x6d41;&#x7a0b;&#xff1a;\n\n&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x521d;&#x59cb;<span class=\"hljs-keyword\">state</span>&#x4e2d;&#x8bbe;&#x7f6e;&#x8868;&#x5355;&#x7684;&#x9ed8;&#x8ba4;&#x503c;\n&#x6bcf;&#x5f53;&#x8868;&#x5355;&#x7684;&#x503c;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x65f6;&#xff0c;&#x8c03;&#x7528;<span class=\"hljs-keyword\">on</span>Change&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x5668;\n&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x5668;&#x901a;&#x8fc7;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;e&#x62ff;&#x5230;&#x6539;&#x53d8;&#x540e;&#x7684;&#x72b6;&#x6001;&#xff0c;&#x5e76;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;<span class=\"hljs-keyword\">state</span>\n&#x4e00;&#x65e6;&#x901a;&#x8fc7;<span class=\"hljs-built_in\">set</span>State&#x65b9;&#x6cd5;&#x66f4;&#x65b0;<span class=\"hljs-keyword\">state</span>&#xff0c;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;&#x89c6;&#x56fe;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x5b8c;&#x6210;&#x8868;&#x5355;&#x7ec4;&#x4ef6;&#x7684;&#x66f4;&#x65b0;\n\n&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x7f3a;&#x9677;&#xff1a;\n&#x8868;&#x5355;&#x5143;&#x7d20;&#x7684;&#x503c;&#x90fd;&#x662f;&#x7531;React&#x7ec4;&#x4ef6;&#x8fdb;&#x884c;&#x7ba1;&#x7406;&#xff0c;&#x5f53;&#x6709;&#x591a;&#x4e2a;&#x8f93;&#x5165;&#x6846;&#xff0c;&#x6216;&#x8005;&#x591a;&#x4e2a;&#x8fd9;&#x79cd;&#x7ec4;&#x4ef6;&#x65f6;&#xff0c;&#x5982;&#x679c;&#x60f3;&#x540c;&#x65f6;&#x83b7;&#x53d6;&#x5230;&#x5168;&#x90e8;&#x7684;&#x503c;&#x5c31;&#x5fc5;&#x987b;&#x6bcf;&#x4e2a;&#x90fd;&#x8981;&#x7f16;&#x5199;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x4f1a;&#x8ba9;&#x4ee3;&#x7801;&#x770b;&#x7740;&#x5f88;&#x81c3;&#x80bf;&#xff0c;&#x6240;&#x4ee5;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#xff0c;&#x51fa;&#x73b0;&#x4e86;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;\n&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x8868;&#x5355;&#x7ec4;&#x4ef6;&#x6ca1;&#x6709;value props&#xff08;&#x5355;&#x9009;&#x548c;&#x590d;&#x9009;&#x6309;&#x94ae;&#x5bf9;&#x5e94;&#x7684;&#x662f;checked props&#xff09;&#x65f6;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x79f0;&#x4e3a;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x3002;&#x5728;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;ref&#x6765;&#x4ece;DOM&#x83b7;&#x5f97;&#x8868;&#x5355;&#x503c;&#x3002;&#x800c;&#x4e0d;&#x662f;&#x4e3a;&#x6bcf;&#x4e2a;&#x72b6;&#x6001;&#x66f4;&#x65b0;&#x7f16;&#x5199;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;\nReact&#x5b98;&#x65b9;&#x7684;&#x89e3;&#x91ca;&#xff1a;\n\n&#x8981;&#x7f16;&#x5199;&#x4e00;&#x4e2a;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x4e3a;&#x6bcf;&#x4e2a;&#x72b6;&#x6001;&#x66f4;&#x65b0;&#x90fd;&#x7f16;&#x5199;&#x6570;&#x636e;&#x5904;&#x7406;&#x51fd;&#x6570;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; ref&#x6765;&#x4ece; DOM &#x8282;&#x70b9;&#x4e2d;&#x83b7;&#x53d6;&#x8868;&#x5355;&#x6570;&#x636e;&#x3002;\n&#x56e0;&#x4e3a;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x5c06;&#x771f;&#x5b9e;&#x6570;&#x636e;&#x50a8;&#x5b58;&#x5728; DOM &#x8282;&#x70b9;&#x4e2d;&#xff0c;&#x6240;&#x4ee5;&#x5728;&#x4f7f;&#x7528;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x65f6;&#xff0c;&#x6709;&#x65f6;&#x5019;&#x53cd;&#x800c;&#x66f4;&#x5bb9;&#x6613;&#x540c;&#x65f6;&#x96c6;&#x6210; React &#x548c;&#x975e; React &#x4ee3;&#x7801;&#x3002;&#x5982;&#x679c;&#x4f60;&#x4e0d;&#x4ecb;&#x610f;&#x4ee3;&#x7801;&#x7f8e;&#x89c2;&#x6027;&#xff0c;&#x5e76;&#x4e14;&#x5e0c;&#x671b;&#x5feb;&#x901f;&#x7f16;&#x5199;&#x4ee3;&#x7801;&#xff0c;&#x4f7f;&#x7528;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x5f80;&#x5f80;&#x53ef;&#x4ee5;&#x51cf;&#x5c11;&#x4f60;&#x7684;&#x4ee3;&#x7801;&#x91cf;&#x3002;&#x5426;&#x5219;&#xff0c;&#x4f60;&#x5e94;&#x8be5;&#x4f7f;&#x7528;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x4e0b;&#x9762;&#x7684;&#x4ee3;&#x7801;&#x5728;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x4e2d;&#x63a5;&#x6536;&#x5355;&#x4e2a;&#x5c5e;&#x6027;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;class NameForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleSubmit(event) {\n    alert(&apos;A name was submitted: &apos; + this.input.value);\n    event.preventDefault();\n  }\n  render() {\n    return (\n      <span class=\"hljs-variable\">&lt;form onSubmit={this.handleSubmit}&gt;</span>\n        <span class=\"hljs-variable\">&lt;label&gt;</span>\n          Name:\n          <span class=\"hljs-variable\">&lt;input type=&quot;text&quot; ref={(input) =&gt;</span> this.input = input} /&gt;\n        &lt;/label&gt;\n        <span class=\"hljs-variable\">&lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;</span>\n      &lt;/form&gt;\n    );\n  }\n}\n\n&#x603b;&#x7ed3;&#xff1a; &#x9875;&#x9762;&#x4e2d;&#x6240;&#x6709;&#x8f93;&#x5165;&#x7c7b;&#x7684;DOM&#x5982;&#x679c;&#x662f;&#x73b0;&#x7528;&#x73b0;&#x53d6;&#x7684;&#x79f0;&#x4e3a;&#x975e;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#xff0c;&#x800c;&#x901a;&#x8fc7;<span class=\"hljs-built_in\">set</span>State&#x5c06;&#x8f93;&#x5165;&#x7684;&#x503c;&#x7ef4;&#x62a4;&#x5230;&#x4e86;<span class=\"hljs-keyword\">state</span>&#x4e2d;&#xff0c;&#x9700;&#x8981;&#x65f6;&#x518d;&#x4ece;<span class=\"hljs-keyword\">state</span>&#x4e2d;&#x53d6;&#x51fa;&#xff0c;&#x8fd9;&#x91cc;&#x7684;&#x6570;&#x636e;&#x5c31;&#x53d7;&#x5230;&#x4e86;<span class=\"hljs-keyword\">state</span>&#x7684;&#x63a7;&#x5236;&#xff0c;&#x79f0;&#x4e3a;&#x53d7;&#x63a7;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"888,932"}},{"content":"<pre data-lines=\"933,1000\"><code data-lines=\"933,1000\"><span class=\"hljs-title class_\">Refs</span> &#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x79cd;&#x65b9;&#x5f0f;&#xff0c;&#x7528;&#x4e8e;&#x8bbf;&#x95ee;&#x5728; render &#x65b9;&#x6cd5;&#x4e2d;&#x521b;&#x5efa;&#x7684; <span class=\"hljs-title class_\">React</span> &#x5143;&#x7d20;&#x6216; <span class=\"hljs-variable constant_\">DOM</span> &#x8282;&#x70b9;&#x3002;<span class=\"hljs-title class_\">Refs</span> &#x5e94;&#x8be5;&#x8c28;&#x614e;&#x4f7f;&#x7528;&#xff0c;&#x5982;&#x4e0b;&#x573a;&#x666f;&#x4f7f;&#x7528; <span class=\"hljs-title class_\">Refs</span> &#x6bd4;&#x8f83;&#x9002;&#x5408;&#xff1a;\n\n&#x5904;&#x7406;&#x7126;&#x70b9;&#x3001;&#x6587;&#x672c;&#x9009;&#x62e9;&#x6216;&#x8005;&#x5a92;&#x4f53;&#x7684;&#x63a7;&#x5236;\n&#x89e6;&#x53d1;&#x5fc5;&#x8981;&#x7684;&#x52a8;&#x753b;\n&#x96c6;&#x6210;&#x7b2c;&#x4e09;&#x65b9; <span class=\"hljs-variable constant_\">DOM</span> &#x5e93;\n\n<span class=\"hljs-title class_\">Refs</span> &#x662f;&#x4f7f;&#x7528; <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">createRef</span>() &#x65b9;&#x6cd5;&#x521b;&#x5efa;&#x7684;&#xff0c;&#x4ed6;&#x901a;&#x8fc7; ref &#x5c5e;&#x6027;&#x9644;&#x52a0;&#x5230; <span class=\"hljs-title class_\">React</span> &#x5143;&#x7d20;&#x4e0a;&#x3002;&#x8981;&#x5728;&#x6574;&#x4e2a;&#x7ec4;&#x4ef6;&#x4e2d;&#x4f7f;&#x7528; <span class=\"hljs-title class_\">Refs</span>&#xff0c;&#x9700;&#x8981;&#x5c06; ref &#x5728;&#x6784;&#x9020;&#x51fd;&#x6570;&#x4e2d;&#x5206;&#x914d;&#x7ed9;&#x5176;&#x5b9e;&#x4f8b;&#x5c5e;&#x6027;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyComponent</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">React.Component</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">props</span>) {\n    <span class=\"hljs-variable language_\">super</span>(props)\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">myRef</span> = <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">createRef</span>()\n  }\n  <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{this.myRef}</span> /&gt;</span></span>\n  }\n}\n\n&#x7531;&#x4e8e;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x6ca1;&#x6709;&#x5b9e;&#x4f8b;&#xff0c;&#x56e0;&#x6b64;&#x4e0d;&#x80fd;&#x5728;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x4e0a;&#x76f4;&#x63a5;&#x4f7f;&#x7528; ref&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">MyFunctionalComponent</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> /&gt;</span></span>;\n}\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Parent</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">React.Component</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">props</span>) {\n    <span class=\"hljs-variable language_\">super</span>(props);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">textInput</span> = <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">createRef</span>();\n  }\n  <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-comment\">// &#x8fd9;&#x5c06;&#x4e0d;&#x4f1a;&#x5de5;&#x4f5c;&#xff01;</span>\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">MyFunctionalComponent</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{this.textInput}</span> /&gt;</span></span>\n    );\n  }\n}\n\n&#x4f46;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x95ed;&#x5408;&#x7684;&#x5e2e;&#x52a9;&#x5728;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x8fdb;&#x884c;&#x4f7f;&#x7528; <span class=\"hljs-title class_\">Refs</span>&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">CustomTextInput</span>(<span class=\"hljs-params\">props</span>) {\n  <span class=\"hljs-comment\">// &#x8fd9;&#x91cc;&#x5fc5;&#x987b;&#x58f0;&#x660e; textInput&#xff0c;&#x8fd9;&#x6837; ref &#x56de;&#x8c03;&#x624d;&#x53ef;&#x4ee5;&#x5f15;&#x7528;&#x5b83;</span>\n  <span class=\"hljs-keyword\">let</span> textInput = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">handleClick</span>(<span class=\"hljs-params\"></span>) {\n    textInput.<span class=\"hljs-title function_\">focus</span>();\n  }\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span>\n        <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span>\n        <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">{(input)</span> =&gt;</span> { textInput = input; }} /&gt;\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span>\n        <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;button&quot;</span>\n        <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;Focus the text input&quot;</span>\n        <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{handleClick}</span>\n      /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );  \n}\n\n&#x6ce8;&#x610f;&#xff1a;\n\n&#x4e0d;&#x5e94;&#x8be5;&#x8fc7;&#x5ea6;&#x7684;&#x4f7f;&#x7528; <span class=\"hljs-title class_\">Refs</span>\nref &#x7684;&#x8fd4;&#x56de;&#x503c;&#x53d6;&#x51b3;&#x4e8e;&#x8282;&#x70b9;&#x7684;&#x7c7b;&#x578b;&#xff1a;\n\n&#x5f53; ref &#x5c5e;&#x6027;&#x88ab;&#x7528;&#x4e8e;&#x4e00;&#x4e2a;&#x666e;&#x901a;&#x7684; <span class=\"hljs-variable constant_\">HTML</span> &#x5143;&#x7d20;&#x65f6;&#xff0c;<span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">createRef</span>() &#x5c06;&#x63a5;&#x6536;&#x5e95;&#x5c42; <span class=\"hljs-variable constant_\">DOM</span> &#x5143;&#x7d20;&#x4f5c;&#x4e3a;&#x4ed6;&#x7684; current &#x5c5e;&#x6027;&#x4ee5;&#x521b;&#x5efa; ref&#x3002;\n&#x5f53; ref &#x5c5e;&#x6027;&#x88ab;&#x7528;&#x4e8e;&#x4e00;&#x4e2a;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x7c7b;&#x7ec4;&#x4ef6;&#x65f6;&#xff0c;ref &#x5bf9;&#x8c61;&#x5c06;&#x63a5;&#x6536;&#x8be5;&#x7ec4;&#x4ef6;&#x5df2;&#x6302;&#x8f7d;&#x7684;&#x5b9e;&#x4f8b;&#x4f5c;&#x4e3a;&#x4ed6;&#x7684; current&#x3002;\n\n\n&#x5f53;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x4e2d;&#x9700;&#x8981;&#x8bbf;&#x95ee;&#x5b50;&#x7ec4;&#x4ef6;&#x4e2d;&#x7684; ref &#x65f6;&#x53ef;&#x4f7f;&#x7528;&#x4f20;&#x9012; <span class=\"hljs-title class_\">Refs</span> &#x6216;&#x56de;&#x8c03; <span class=\"hljs-title class_\">Refs</span>&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"933,1000"}},{"content":"<pre data-lines=\"1001,1039\"><code data-lines=\"1001,1039\">&#x6784;&#x9020;&#x51fd;&#x6570;&#x4e3b;&#x8981;&#x7528;&#x4e8e;&#x4e24;&#x4e2a;&#x76ee;&#x7684;&#xff1a;\n\n&#x901a;&#x8fc7;&#x5c06;&#x5bf9;&#x8c61;&#x5206;&#x914d;&#x7ed9;<span class=\"hljs-keyword\">this</span>.state&#x6765;&#x521d;&#x59cb;&#x5316;&#x672c;&#x5730;&#x72b6;&#x6001;\n&#x5c06;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x65b9;&#x6cd5;&#x7ed1;&#x5b9a;&#x5230;&#x5b9e;&#x4f8b;&#x4e0a;\n\n&#x6240;&#x4ee5;&#xff0c;&#x5f53;&#x5728;React <span class=\"hljs-keyword\">class</span>&#x4e2d;&#x9700;&#x8981;&#x8bbe;&#x7f6e;state&#x7684;&#x521d;&#x59cb;&#x503c;&#x6216;&#x8005;&#x7ed1;&#x5b9a;&#x4e8b;&#x4ef6;&#x65f6;&#xff0c;&#x9700;&#x8981;&#x52a0;&#x4e0a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x5b98;&#x65b9;Demo&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LikeButton</span> <span class=\"hljs-title\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> {\n  <span class=\"hljs-keyword\">constructor</span>() {\n    <span class=\"hljs-keyword\">super</span>();\n    <span class=\"hljs-keyword\">this</span>.state = {\n      liked: <span class=\"hljs-literal\">false</span>\n    };\n    <span class=\"hljs-keyword\">this</span>.handleClick = <span class=\"hljs-keyword\">this</span>.handleClick.bind(<span class=\"hljs-keyword\">this</span>);\n  }\n  handleClick() {\n    <span class=\"hljs-keyword\">this</span>.setState({liked: !<span class=\"hljs-keyword\">this</span>.state.liked});\n  }\n  render() {\n    <span class=\"hljs-keyword\">const</span> text = <span class=\"hljs-keyword\">this</span>.state.liked ? <span class=\"hljs-string\">&apos;liked&apos;</span> : <span class=\"hljs-string\">&apos;haven\\&apos;t liked&apos;</span>;\n    <span class=\"hljs-keyword\">return</span> (\n      &lt;div onClick={<span class=\"hljs-keyword\">this</span>.handleClick}&gt;\n        You {text} <span class=\"hljs-keyword\">this</span>. Click to toggle.\n      &lt;/div&gt;\n    );\n  }\n}\nReactDOM.render(\n  &lt;LikeButton /&gt;,\n  document.getElementById(<span class=\"hljs-string\">&apos;example&apos;</span>)\n);\n\n&#x6784;&#x9020;&#x51fd;&#x6570;&#x7528;&#x6765;&#x65b0;&#x5efa;&#x7236;&#x7c7b;&#x7684;<span class=\"hljs-keyword\">this</span>&#x5bf9;&#x8c61;&#xff1b;&#x5b50;&#x7c7b;&#x5fc5;&#x987b;&#x5728;<span class=\"hljs-keyword\">constructor</span>&#x65b9;&#x6cd5;&#x4e2d;&#x8c03;&#x7528;<span class=\"hljs-keyword\">super</span>&#x65b9;&#x6cd5;&#xff1b;&#x5426;&#x5219;&#x65b0;&#x5efa;&#x5b9e;&#x4f8b;&#x65f6;&#x4f1a;&#x62a5;&#x9519;&#xff1b;&#x56e0;&#x4e3a;&#x5b50;&#x7c7b;&#x6ca1;&#x6709;&#x81ea;&#x5df1;&#x7684;<span class=\"hljs-keyword\">this</span>&#x5bf9;&#x8c61;&#xff0c;&#x800c;&#x662f;&#x7ee7;&#x627f;&#x7236;&#x7c7b;&#x7684;<span class=\"hljs-keyword\">this</span>&#x5bf9;&#x8c61;&#xff0c;&#x7136;&#x540e;&#x5bf9;&#x5176;&#x8fdb;&#x884c;&#x52a0;&#x5de5;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x8c03;&#x7528;<span class=\"hljs-keyword\">super</span>&#x65b9;&#x6cd5;&#xff1b;&#x5b50;&#x7c7b;&#x5c31;&#x5f97;&#x4e0d;&#x5230;<span class=\"hljs-keyword\">this</span>&#x5bf9;&#x8c61;&#x3002;\n&#x6ce8;&#x610f;&#xff1a;\n\n<span class=\"hljs-keyword\">constructor</span> () &#x5fc5;&#x987b;&#x914d;&#x4e0a; <span class=\"hljs-keyword\">super</span>(), &#x5982;&#x679c;&#x8981;&#x5728;<span class=\"hljs-keyword\">constructor</span> &#x5185;&#x90e8;&#x4f7f;&#x7528; <span class=\"hljs-keyword\">this</span>.props &#x5c31;&#x8981; &#x4f20;&#x5165;props , &#x5426;&#x5219;&#x4e0d;&#x7528;\nJavaScript&#x4e2d;&#x7684; bind &#x6bcf;&#x6b21;&#x90fd;&#x4f1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x51fd;&#x6570;, &#x4e3a;&#x4e86;&#x6027;&#x80fd;&#x7b49;&#x8003;&#x8651;, &#x5c3d;&#x91cf;&#x5728;<span class=\"hljs-keyword\">constructor</span>&#x4e2d;&#x7ed1;&#x5b9a;&#x4e8b;&#x4ef6;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1001,1039"}},{"content":"<pre data-lines=\"1040,1046\"><code data-lines=\"1040,1046\">React.forwardRef &#x4f1a;&#x521b;&#x5efa;&#x4e00;&#x4e2a;React&#x7ec4;&#x4ef6;&#xff0c;&#x8fd9;&#x4e2a;&#x7ec4;&#x4ef6;&#x80fd;&#x591f;&#x5c06;&#x5176;&#x63a5;&#x53d7;&#x7684; <span class=\"hljs-built_in\">ref</span> &#x5c5e;&#x6027;&#x8f6c;&#x53d1;&#x5230;&#x5176;&#x7ec4;&#x4ef6;&#x6811;&#x4e0b;&#x7684;&#x53e6;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x4e2d;&#x3002;&#x8fd9;&#x79cd;&#x6280;&#x672f;&#x5e76;&#x4e0d;&#x5e38;&#x89c1;&#xff0c;&#x4f46;&#x5728;&#x4ee5;&#x4e0b;&#x4e24;&#x79cd;&#x573a;&#x666f;&#x4e2d;&#x7279;&#x522b;&#x6709;&#x7528;&#xff1a;\n\n&#x8f6c;&#x53d1; <span class=\"hljs-built_in\">ref</span>s &#x5230; DOM &#x7ec4;&#x4ef6;\n&#x5728;&#x9ad8;&#x9636;&#x7ec4;&#x4ef6;&#x4e2d;&#x8f6c;&#x53d1; <span class=\"hljs-built_in\">ref</span>s\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1040,1046"}},{"content":"<pre data-lines=\"1047,1059\"><code data-lines=\"1047,1059\">&#x76f8;&#x540c;&#x70b9;&#xff1a;\n&#x7ec4;&#x4ef6;&#x662f; React &#x53ef;&#x590d;&#x7528;&#x7684;&#x6700;&#x5c0f;&#x4ee3;&#x7801;&#x7247;&#x6bb5;&#xff0c;&#x5b83;&#x4eec;&#x4f1a;&#x8fd4;&#x56de;&#x8981;&#x5728;&#x9875;&#x9762;&#x4e2d;&#x6e32;&#x67d3;&#x7684; React &#x5143;&#x7d20;&#x3002;&#x4e5f;&#x6b63;&#x56e0;&#x4e3a;&#x7ec4;&#x4ef6;&#x662f; React &#x7684;&#x6700;&#x5c0f;&#x7f16;&#x7801;&#x5355;&#x4f4d;&#xff0c;&#x6240;&#x4ee5;&#x65e0;&#x8bba;&#x662f;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x8fd8;&#x662f;&#x7c7b;&#x7ec4;&#x4ef6;&#xff0c;&#x5728;&#x4f7f;&#x7528;&#x65b9;&#x5f0f;&#x548c;&#x6700;&#x7ec8;&#x5448;&#x73b0;&#x6548;&#x679c;&#x4e0a;&#x90fd;&#x662f;&#x5b8c;&#x5168;&#x4e00;&#x81f4;&#x7684;&#x3002;\n&#x6211;&#x4eec;&#x751a;&#x81f3;&#x53ef;&#x4ee5;&#x5c06;&#x4e00;&#x4e2a;&#x7c7b;&#x7ec4;&#x4ef6;&#x6539;&#x5199;&#x6210;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#xff0c;&#x6216;&#x8005;&#x628a;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x6539;&#x5199;&#x6210;&#x4e00;&#x4e2a;&#x7c7b;&#x7ec4;&#x4ef6;&#xff08;&#x867d;&#x7136;&#x5e76;&#x4e0d;&#x63a8;&#x8350;&#x8fd9;&#x79cd;&#x91cd;&#x6784;&#x884c;&#x4e3a;&#xff09;&#x3002;&#x4ece;&#x4f7f;&#x7528;&#x8005;&#x7684;&#x89d2;&#x5ea6;&#x800c;&#x8a00;&#xff0c;&#x5f88;&#x96be;&#x4ece;&#x4f7f;&#x7528;&#x4f53;&#x9a8c;&#x4e0a;&#x533a;&#x5206;&#x4e24;&#x8005;&#xff0c;&#x800c;&#x4e14;&#x5728;&#x73b0;&#x4ee3;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#xff0c;&#x95ed;&#x5305;&#x548c;&#x7c7b;&#x7684;&#x6027;&#x80fd;&#x53ea;&#x5728;&#x6781;&#x7aef;&#x573a;&#x666f;&#x4e0b;&#x624d;&#x4f1a;&#x6709;&#x660e;&#x663e;&#x7684;&#x5dee;&#x522b;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x57fa;&#x672c;&#x53ef;&#x8ba4;&#x4e3a;&#x4e24;&#x8005;&#x4f5c;&#x4e3a;&#x7ec4;&#x4ef6;&#x662f;&#x5b8c;&#x5168;&#x4e00;&#x81f4;&#x7684;&#x3002;\n&#x4e0d;&#x540c;&#x70b9;&#xff1a;\n\n&#x5b83;&#x4eec;&#x5728;&#x5f00;&#x53d1;&#x65f6;&#x7684;&#x5fc3;&#x667a;&#x6a21;&#x578b;&#x4e0a;&#x5374;&#x5b58;&#x5728;&#x5de8;&#x5927;&#x7684;&#x5dee;&#x5f02;&#x3002;&#x7c7b;&#x7ec4;&#x4ef6;&#x662f;&#x57fa;&#x4e8e;&#x9762;&#x5411;&#x5bf9;&#x8c61;&#x7f16;&#x7a0b;&#x7684;&#xff0c;&#x5b83;&#x4e3b;&#x6253;&#x7684;&#x662f;&#x7ee7;&#x627f;&#x3001;&#x751f;&#x547d;&#x5468;&#x671f;&#x7b49;&#x6838;&#x5fc3;&#x6982;&#x5ff5;&#xff1b;&#x800c;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x5185;&#x6838;&#x662f;&#x51fd;&#x6570;&#x5f0f;&#x7f16;&#x7a0b;&#xff0c;&#x4e3b;&#x6253;&#x7684;&#x662f; <span class=\"hljs-keyword\">immutable</span>&#x3001;&#x6ca1;&#x6709;&#x526f;&#x4f5c;&#x7528;&#x3001;&#x5f15;&#x7528;&#x900f;&#x660e;&#x7b49;&#x7279;&#x70b9;&#x3002;\n&#x4e4b;&#x524d;&#xff0c;&#x5728;&#x4f7f;&#x7528;&#x573a;&#x666f;&#x4e0a;&#xff0c;&#x5982;&#x679c;&#x5b58;&#x5728;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x751f;&#x547d;&#x5468;&#x671f;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x90a3;&#x4e48;&#x4e3b;&#x63a8;&#x7c7b;&#x7ec4;&#x4ef6;&#xff1b;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#x4e0a;&#xff0c;&#x5982;&#x679c;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x7ee7;&#x627f;&#xff0c;&#x90a3;&#x4e48;&#x4e3b;&#x63a8;&#x7c7b;&#x7ec4;&#x4ef6;&#x3002;&#x4f46;&#x73b0;&#x5728;&#x7531;&#x4e8e; React Hooks &#x7684;&#x63a8;&#x51fa;&#xff0c;&#x751f;&#x547d;&#x5468;&#x671f;&#x6982;&#x5ff5;&#x7684;&#x6de1;&#x51fa;&#xff0c;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x53ef;&#x4ee5;&#x5b8c;&#x5168;&#x53d6;&#x4ee3;&#x7c7b;&#x7ec4;&#x4ef6;&#x3002;&#x5176;&#x6b21;&#x7ee7;&#x627f;&#x5e76;&#x4e0d;&#x662f;&#x7ec4;&#x4ef6;&#x6700;&#x4f73;&#x7684;&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;&#xff0c;&#x5b98;&#x65b9;&#x66f4;&#x63a8;&#x5d07;&#x201c;&#x7ec4;&#x5408;&#x4f18;&#x4e8e;&#x7ee7;&#x627f;&#x201d;&#x7684;&#x8bbe;&#x8ba1;&#x6982;&#x5ff5;&#xff0c;&#x6240;&#x4ee5;&#x7c7b;&#x7ec4;&#x4ef6;&#x5728;&#x8fd9;&#x65b9;&#x9762;&#x7684;&#x4f18;&#x52bf;&#x4e5f;&#x5728;&#x6de1;&#x51fa;&#x3002;\n&#x6027;&#x80fd;&#x4f18;&#x5316;&#x4e0a;&#xff0c;&#x7c7b;&#x7ec4;&#x4ef6;&#x4e3b;&#x8981;&#x4f9d;&#x9760; shouldComponentUpdate&#xa0;&#x963b;&#x65ad;&#x6e32;&#x67d3;&#x6765;&#x63d0;&#x5347;&#x6027;&#x80fd;&#xff0c;&#x800c;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x4f9d;&#x9760; React.memo &#x7f13;&#x5b58;&#x6e32;&#x67d3;&#x7ed3;&#x679c;&#x6765;&#x63d0;&#x5347;&#x6027;&#x80fd;&#x3002;\n&#x4ece;&#x4e0a;&#x624b;&#x7a0b;&#x5ea6;&#x800c;&#x8a00;&#xff0c;&#x7c7b;&#x7ec4;&#x4ef6;&#x66f4;&#x5bb9;&#x6613;&#x4e0a;&#x624b;&#xff0c;&#x4ece;&#x672a;&#x6765;&#x8d8b;&#x52bf;&#x4e0a;&#x770b;&#xff0c;&#x7531;&#x4e8e;React Hooks &#x7684;&#x63a8;&#x51fa;&#xff0c;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x6210;&#x4e86;&#x793e;&#x533a;&#x672a;&#x6765;&#x4e3b;&#x63a8;&#x7684;&#x65b9;&#x6848;&#x3002;\n&#x7c7b;&#x7ec4;&#x4ef6;&#x5728;&#x672a;&#x6765;&#x65f6;&#x95f4;&#x5207;&#x7247;&#x4e0e;&#x5e76;&#x53d1;&#x6a21;&#x5f0f;&#x4e2d;&#xff0c;&#x7531;&#x4e8e;&#x751f;&#x547d;&#x5468;&#x671f;&#x5e26;&#x6765;&#x7684;&#x590d;&#x6742;&#x5ea6;&#xff0c;&#x5e76;&#x4e0d;&#x6613;&#x4e8e;&#x4f18;&#x5316;&#x3002;&#x800c;&#x51fd;&#x6570;&#x7ec4;&#x4ef6;&#x672c;&#x8eab;&#x8f7b;&#x91cf;&#x7b80;&#x5355;&#xff0c;&#x4e14;&#x5728; Hooks &#x7684;&#x57fa;&#x7840;&#x4e0a;&#x63d0;&#x4f9b;&#x4e86;&#x6bd4;&#x539f;&#x5148;&#x66f4;&#x7ec6;&#x7c92;&#x5ea6;&#x7684;&#x903b;&#x8f91;&#x7ec4;&#x7ec7;&#x4e0e;&#x590d;&#x7528;&#xff0c;&#x66f4;&#x80fd;&#x9002;&#x5e94; React &#x7684;&#x672a;&#x6765;&#x53d1;&#x5c55;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1047,1059"}}],"payload":{"tag":"h2","lines":"279,280"}},{"content":"&#x4e8c;&#x3001;&#x6570;&#x636e;&#x7ba1;&#x7406;","children":[{"content":"<pre data-lines=\"1062,1107\"><code data-lines=\"1062,1107\">&#x5177;&#x4f53;&#x7684;&#x6267;&#x884c;&#x8fc7;&#x7a0b;&#x5982;&#x4e0b;&#xff08;&#x6e90;&#x7801;&#x7ea7;&#x89e3;&#x6790;&#xff09;&#xff1a;\n\n&#x9996;&#x5148;&#x8c03;&#x7528;&#x4e86;setState &#x5165;&#x53e3;&#x51fd;&#x6570;&#xff0c;&#x5165;&#x53e3;&#x51fd;&#x6570;&#x5728;&#x8fd9;&#x91cc;&#x5c31;&#x662f;&#x5145;&#x5f53;&#x4e00;&#x4e2a;&#x5206;&#x53d1;&#x5668;&#x7684;&#x89d2;&#x8272;&#xff0c;&#x6839;&#x636e;&#x5165;&#x53c2;&#x7684;&#x4e0d;&#x540c;&#xff0c;&#x5c06;&#x5176;&#x5206;&#x53d1;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x529f;&#x80fd;&#x51fd;&#x6570;&#x4e2d;&#x53bb;&#xff1b;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-title class_\">ReactComponent</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">setState</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">partialState, callback</span>) {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">updater</span>.<span class=\"hljs-title function_\">enqueueSetState</span>(<span class=\"hljs-variable language_\">this</span>, partialState);\n  <span class=\"hljs-keyword\">if</span> (callback) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">updater</span>.<span class=\"hljs-title function_\">enqueueCallback</span>(<span class=\"hljs-variable language_\">this</span>, callback, <span class=\"hljs-string\">&apos;setState&apos;</span>);\n  }\n};\n\n\nenqueueSetState &#x65b9;&#x6cd5;&#x5c06;&#x65b0;&#x7684; state &#x653e;&#x8fdb;&#x7ec4;&#x4ef6;&#x7684;&#x72b6;&#x6001;&#x961f;&#x5217;&#x91cc;&#xff0c;&#x5e76;&#x8c03;&#x7528; enqueueUpdate &#x6765;&#x5904;&#x7406;&#x5c06;&#x8981;&#x66f4;&#x65b0;&#x7684;&#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#xff1b;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-attr\">enqueueSetState</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">publicInstance, partialState</span>) {\n  <span class=\"hljs-comment\">// &#x6839;&#x636e; this &#x62ff;&#x5230;&#x5bf9;&#x5e94;&#x7684;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;</span>\n  <span class=\"hljs-keyword\">var</span> internalInstance = <span class=\"hljs-title function_\">getInternalInstanceReadyForUpdate</span>(publicInstance, <span class=\"hljs-string\">&apos;setState&apos;</span>);\n  <span class=\"hljs-comment\">// &#x8fd9;&#x4e2a; queue &#x5bf9;&#x5e94;&#x7684;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684; state &#x6570;&#x7ec4;</span>\n  <span class=\"hljs-keyword\">var</span> queue = internalInstance.<span class=\"hljs-property\">_pendingStateQueue</span> || (internalInstance.<span class=\"hljs-property\">_pendingStateQueue</span> = []);\n  queue.<span class=\"hljs-title function_\">push</span>(partialState);\n  <span class=\"hljs-comment\">//  enqueueUpdate &#x7528;&#x6765;&#x5904;&#x7406;&#x5f53;&#x524d;&#x7684;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;</span>\n  <span class=\"hljs-title function_\">enqueueUpdate</span>(internalInstance);\n}\n\n\n&#x5728; enqueueUpdate &#x65b9;&#x6cd5;&#x4e2d;&#x5f15;&#x51fa;&#x4e86;&#x4e00;&#x4e2a;&#x5173;&#x952e;&#x7684;&#x5bf9;&#x8c61;&#x2014;&#x2014;batchingStrategy&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x6240;&#x5177;&#x5907;&#x7684;isBatchingUpdates &#x5c5e;&#x6027;&#x76f4;&#x63a5;&#x51b3;&#x5b9a;&#x4e86;&#x5f53;&#x4e0b;&#x662f;&#x8981;&#x8d70;&#x66f4;&#x65b0;&#x6d41;&#x7a0b;&#xff0c;&#x8fd8;&#x662f;&#x5e94;&#x8be5;&#x6392;&#x961f;&#x7b49;&#x5f85;&#xff1b;&#x5982;&#x679c;&#x8f6e;&#x5230;&#x6267;&#x884c;&#xff0c;&#x5c31;&#x8c03;&#x7528; batchedUpdates &#x65b9;&#x6cd5;&#x6765;&#x76f4;&#x63a5;&#x53d1;&#x8d77;&#x66f4;&#x65b0;&#x6d41;&#x7a0b;&#x3002;&#x7531;&#x6b64;&#x53ef;&#x4ee5;&#x63a8;&#x6d4b;&#xff0c;batchingStrategy &#x6216;&#x8bb8;&#x6b63;&#x662f; <span class=\"hljs-title class_\">React</span> &#x5185;&#x90e8;&#x4e13;&#x95e8;&#x7528;&#x4e8e;&#x7ba1;&#x63a7;&#x6279;&#x91cf;&#x66f4;&#x65b0;&#x7684;&#x5bf9;&#x8c61;&#x3002;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">enqueueUpdate</span>(<span class=\"hljs-params\">component</span>) {\n  <span class=\"hljs-title function_\">ensureInjected</span>();\n  <span class=\"hljs-comment\">// &#x6ce8;&#x610f;&#x8fd9;&#x4e00;&#x53e5;&#x662f;&#x95ee;&#x9898;&#x7684;&#x5173;&#x952e;&#xff0c;isBatchingUpdates&#x6807;&#x8bc6;&#x7740;&#x5f53;&#x524d;&#x662f;&#x5426;&#x5904;&#x4e8e;&#x6279;&#x91cf;&#x521b;&#x5efa;/&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;&#x9636;&#x6bb5;</span>\n  <span class=\"hljs-keyword\">if</span> (!batchingStrategy.<span class=\"hljs-property\">isBatchingUpdates</span>) {\n    <span class=\"hljs-comment\">// &#x82e5;&#x5f53;&#x524d;&#x6ca1;&#x6709;&#x5904;&#x4e8e;&#x6279;&#x91cf;&#x521b;&#x5efa;/&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;&#x9636;&#x6bb5;&#xff0c;&#x5219;&#x7acb;&#x5373;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;</span>\n    batchingStrategy.<span class=\"hljs-title function_\">batchedUpdates</span>(enqueueUpdate, component);\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-comment\">// &#x5426;&#x5219;&#xff0c;&#x5148;&#x628a;&#x7ec4;&#x4ef6;&#x585e;&#x5165; dirtyComponents &#x961f;&#x5217;&#x91cc;&#xff0c;&#x8ba9;&#x5b83;&#x201c;&#x518d;&#x7b49;&#x7b49;&#x201d;</span>\n  dirtyComponents.<span class=\"hljs-title function_\">push</span>(component);\n  <span class=\"hljs-keyword\">if</span> (component.<span class=\"hljs-property\">_updateBatchNumber</span> == <span class=\"hljs-literal\">null</span>) {\n    component.<span class=\"hljs-property\">_updateBatchNumber</span> = updateBatchNumber + <span class=\"hljs-number\">1</span>;\n  }\n}\n\n&#x6ce8;&#x610f;&#xff1a;batchingStrategy &#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x7406;&#x89e3;&#x4e3a;&#x201c;&#x9501;&#x7ba1;&#x7406;&#x5668;&#x201d;&#x3002;&#x8fd9;&#x91cc;&#x7684;&#x201c;&#x9501;&#x201d;&#xff0c;&#x662f;&#x6307; <span class=\"hljs-title class_\">React</span> &#x5168;&#x5c40;&#x552f;&#x4e00;&#x7684; isBatchingUpdates &#x53d8;&#x91cf;&#xff0c;isBatchingUpdates &#x7684;&#x521d;&#x59cb;&#x503c;&#x662f; <span class=\"hljs-literal\">false</span>&#xff0c;&#x610f;&#x5473;&#x7740;&#x201c;&#x5f53;&#x524d;&#x5e76;&#x672a;&#x8fdb;&#x884c;&#x4efb;&#x4f55;&#x6279;&#x91cf;&#x66f4;&#x65b0;&#x64cd;&#x4f5c;&#x201d;&#x3002;&#x6bcf;&#x5f53; <span class=\"hljs-title class_\">React</span> &#x8c03;&#x7528; batchedUpdate &#x53bb;&#x6267;&#x884c;&#x66f4;&#x65b0;&#x52a8;&#x4f5c;&#x65f6;&#xff0c;&#x4f1a;&#x5148;&#x628a;&#x8fd9;&#x4e2a;&#x9501;&#x7ed9;&#x201c;&#x9501;&#x4e0a;&#x201d;&#xff08;&#x7f6e;&#x4e3a; <span class=\"hljs-literal\">true</span>&#xff09;&#xff0c;&#x8868;&#x660e;&#x201c;&#x73b0;&#x5728;&#x6b63;&#x5904;&#x4e8e;&#x6279;&#x91cf;&#x66f4;&#x65b0;&#x8fc7;&#x7a0b;&#x4e2d;&#x201d;&#x3002;&#x5f53;&#x9501;&#x88ab;&#x201c;&#x9501;&#x4e0a;&#x201d;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4efb;&#x4f55;&#x9700;&#x8981;&#x66f4;&#x65b0;&#x7684;&#x7ec4;&#x4ef6;&#x90fd;&#x53ea;&#x80fd;&#x6682;&#x65f6;&#x8fdb;&#x5165; dirtyComponents &#x91cc;&#x6392;&#x961f;&#x7b49;&#x5019;&#x4e0b;&#x4e00;&#x6b21;&#x7684;&#x6279;&#x91cf;&#x66f4;&#x65b0;&#xff0c;&#x800c;&#x4e0d;&#x80fd;&#x968f;&#x610f;&#x201c;&#x63d2;&#x961f;&#x201d;&#x3002;&#x6b64;&#x5904;&#x4f53;&#x73b0;&#x7684;&#x201c;&#x4efb;&#x52a1;&#x9501;&#x201d;&#x7684;&#x601d;&#x60f3;&#xff0c;&#x662f; <span class=\"hljs-title class_\">React</span> &#x9762;&#x5bf9;&#x5927;&#x91cf;&#x72b6;&#x6001;&#x4ecd;&#x7136;&#x80fd;&#x591f;&#x5b9e;&#x73b0;&#x6709;&#x5e8f;&#x5206;&#x6279;&#x5904;&#x7406;&#x7684;&#x57fa;&#x77f3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1062,1107"}},{"content":"<pre data-lines=\"1108,1125\"><code data-lines=\"1108,1125\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;React&#x4e2d;<span class=\"hljs-built_in\">set</span>State&#x540e;&#x53d1;&#x751f;&#x4e86;&#x4ec0;&#x4e48;\n&#x5728;&#x4ee3;&#x7801;&#x4e2d;&#x8c03;&#x7528;<span class=\"hljs-built_in\">set</span>State&#x51fd;&#x6570;&#x4e4b;&#x540e;&#xff0c;React &#x4f1a;&#x5c06;&#x4f20;&#x5165;&#x7684;&#x53c2;&#x6570;&#x5bf9;&#x8c61;&#x4e0e;&#x7ec4;&#x4ef6;&#x5f53;&#x524d;&#x7684;&#x72b6;&#x6001;&#x5408;&#x5e76;&#xff0c;&#x7136;&#x540e;&#x89e6;&#x53d1;&#x8c03;&#x548c;&#x8fc7;&#x7a0b;(Reconciliation)&#x3002;&#x7ecf;&#x8fc7;&#x8c03;&#x548c;&#x8fc7;&#x7a0b;&#xff0c;React &#x4f1a;&#x4ee5;&#x76f8;&#x5bf9;&#x9ad8;&#x6548;&#x7684;&#x65b9;&#x5f0f;&#x6839;&#x636e;&#x65b0;&#x7684;&#x72b6;&#x6001;&#x6784;&#x5efa; React &#x5143;&#x7d20;&#x6811;&#x5e76;&#x4e14;&#x7740;&#x624b;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x6574;&#x4e2a;UI&#x754c;&#x9762;&#x3002;\n&#x5728; React &#x5f97;&#x5230;&#x5143;&#x7d20;&#x6811;&#x4e4b;&#x540e;&#xff0c;React &#x4f1a;&#x81ea;&#x52a8;&#x8ba1;&#x7b97;&#x51fa;&#x65b0;&#x7684;&#x6811;&#x4e0e;&#x8001;&#x6811;&#x7684;&#x8282;&#x70b9;&#x5dee;&#x5f02;&#xff0c;&#x7136;&#x540e;&#x6839;&#x636e;&#x5dee;&#x5f02;&#x5bf9;&#x754c;&#x9762;&#x8fdb;&#x884c;&#x6700;&#x5c0f;&#x5316;&#x91cd;&#x6e32;&#x67d3;&#x3002;&#x5728;&#x5dee;&#x5f02;&#x8ba1;&#x7b97;&#x7b97;&#x6cd5;&#x4e2d;&#xff0c;React &#x80fd;&#x591f;&#x76f8;&#x5bf9;&#x7cbe;&#x786e;&#x5730;&#x77e5;&#x9053;&#x54ea;&#x4e9b;&#x4f4d;&#x7f6e;&#x53d1;&#x751f;&#x4e86;&#x6539;&#x53d8;&#x4ee5;&#x53ca;&#x5e94;&#x8be5;&#x5982;&#x4f55;&#x6539;&#x53d8;&#xff0c;&#x8fd9;&#x5c31;&#x4fdd;&#x8bc1;&#x4e86;&#x6309;&#x9700;&#x66f4;&#x65b0;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x5168;&#x90e8;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n&#x5982;&#x679c;&#x5728;&#x77ed;&#x65f6;&#x95f4;&#x5185;&#x9891;&#x7e41;<span class=\"hljs-built_in\">set</span>State&#x3002;React&#x4f1a;&#x5c06;<span class=\"hljs-keyword\">state</span>&#x7684;&#x6539;&#x53d8;&#x538b;&#x5165;&#x6808;&#x4e2d;&#xff0c;&#x5728;&#x5408;&#x9002;&#x7684;&#x65f6;&#x673a;&#xff0c;&#x6279;&#x91cf;&#x66f4;&#x65b0;<span class=\"hljs-keyword\">state</span>&#x548c;&#x89c6;&#x56fe;&#xff0c;&#x8fbe;&#x5230;&#x63d0;&#x9ad8;&#x6027;&#x80fd;&#x7684;&#x6548;&#x679c;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;<span class=\"hljs-built_in\">set</span>State &#x662f;&#x540c;&#x6b65;&#x8fd8;&#x662f;&#x5f02;&#x6b65;&#x7684;\n&#x5047;&#x5982;&#x6240;&#x6709;<span class=\"hljs-built_in\">set</span>State&#x662f;&#x540c;&#x6b65;&#x7684;&#xff0c;&#x610f;&#x5473;&#x7740;&#x6bcf;&#x6267;&#x884c;&#x4e00;&#x6b21;<span class=\"hljs-built_in\">set</span>State&#x65f6;&#xff08;&#x6709;&#x53ef;&#x80fd;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x591a;&#x6b21;<span class=\"hljs-built_in\">set</span>State&#xff09;&#xff0c;&#x90fd;&#x91cd;&#x65b0;vnode diff + dom&#x4fee;&#x6539;&#xff0c;&#x8fd9;&#x5bf9;&#x6027;&#x80fd;&#x6765;&#x8bf4;&#x662f;&#x6781;&#x4e3a;&#x4e0d;&#x597d;&#x7684;&#x3002;&#x5982;&#x679c;&#x662f;&#x5f02;&#x6b65;&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x628a;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4ee3;&#x7801;&#x4e2d;&#x7684;&#x591a;&#x4e2a;<span class=\"hljs-built_in\">set</span>State&#x5408;&#x5e76;&#x6210;&#x4e00;&#x6b21;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x3002;&#x6240;&#x4ee5;&#x9ed8;&#x8ba4;&#x662f;&#x5f02;&#x6b65;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x5728;&#x4e00;&#x4e9b;&#x60c5;&#x51b5;&#x4e0b;&#x662f;&#x540c;&#x6b65;&#x7684;&#x3002;\n<span class=\"hljs-built_in\">set</span>State &#x5e76;&#x4e0d;&#x662f;&#x5355;&#x7eaf;&#x540c;&#x6b65;/&#x5f02;&#x6b65;&#x7684;&#xff0c;&#x5b83;&#x7684;&#x8868;&#x73b0;&#x4f1a;&#x56e0;&#x8c03;&#x7528;&#x573a;&#x666f;&#x7684;&#x4e0d;&#x540c;&#x800c;&#x4e0d;&#x540c;&#x3002;&#x5728;&#x6e90;&#x7801;&#x4e2d;&#xff0c;&#x901a;&#x8fc7; isBatchingUpdates &#x6765;&#x5224;&#x65ad;<span class=\"hljs-built_in\">set</span>State &#x662f;&#x5148;&#x5b58;&#x8fdb; <span class=\"hljs-keyword\">state</span> &#x961f;&#x5217;&#x8fd8;&#x662f;&#x76f4;&#x63a5;&#x66f4;&#x65b0;&#xff0c;&#x5982;&#x679c;&#x503c;&#x4e3a; true &#x5219;&#x6267;&#x884c;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x4e3a; false &#x5219;&#x76f4;&#x63a5;&#x66f4;&#x65b0;&#x3002;\n\n&#x5f02;&#x6b65;&#xff1a; &#x5728; React &#x53ef;&#x4ee5;&#x63a7;&#x5236;&#x7684;&#x5730;&#x65b9;&#xff0c;&#x5c31;&#x4e3a; true&#xff0c;&#x6bd4;&#x5982;&#x5728; React &#x751f;&#x547d;&#x5468;&#x671f;&#x4e8b;&#x4ef6;&#x548c;&#x5408;&#x6210;&#x4e8b;&#x4ef6;&#x4e2d;&#xff0c;&#x90fd;&#x4f1a;&#x8d70;&#x5408;&#x5e76;&#x64cd;&#x4f5c;&#xff0c;&#x5ef6;&#x8fdf;&#x66f4;&#x65b0;&#x7684;&#x7b56;&#x7565;&#x3002;\n&#x540c;&#x6b65;&#xff1a; &#x5728; React &#x65e0;&#x6cd5;&#x63a7;&#x5236;&#x7684;&#x5730;&#x65b9;&#xff0c;&#x6bd4;&#x5982;&#x539f;&#x751f;&#x4e8b;&#x4ef6;&#xff0c;&#x5177;&#x4f53;&#x5c31;&#x662f;&#x5728; addEventListener&#xa0;&#x3001;<span class=\"hljs-built_in\">set</span>Timeout&#x3001;<span class=\"hljs-built_in\">set</span>Interval &#x7b49;&#x4e8b;&#x4ef6;&#x4e2d;&#xff0c;&#x5c31;&#x53ea;&#x80fd;&#x540c;&#x6b65;&#x66f4;&#x65b0;&#x3002;\n\n&#x4e00;&#x822c;&#x8ba4;&#x4e3a;&#xff0c;&#x505a;&#x5f02;&#x6b65;&#x8bbe;&#x8ba1;&#x662f;&#x4e3a;&#x4e86;&#x6027;&#x80fd;&#x4f18;&#x5316;&#x3001;&#x51cf;&#x5c11;&#x6e32;&#x67d3;&#x6b21;&#x6570;&#xff1a;\n\n<span class=\"hljs-built_in\">set</span>State&#x8bbe;&#x8ba1;&#x4e3a;&#x5f02;&#x6b65;&#xff0c;&#x53ef;&#x4ee5;&#x663e;&#x8457;&#x7684;&#x63d0;&#x5347;&#x6027;&#x80fd;&#x3002;&#x5982;&#x679c;&#x6bcf;&#x6b21;&#x8c03;&#x7528; <span class=\"hljs-built_in\">set</span>State&#x90fd;&#x8fdb;&#x884c;&#x4e00;&#x6b21;&#x66f4;&#x65b0;&#xff0c;&#x90a3;&#x4e48;&#x610f;&#x5473;&#x7740;render&#x51fd;&#x6570;&#x4f1a;&#x88ab;&#x9891;&#x7e41;&#x8c03;&#x7528;&#xff0c;&#x754c;&#x9762;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x8fd9;&#x6837;&#x6548;&#x7387;&#x662f;&#x5f88;&#x4f4e;&#x7684;&#xff1b;&#x6700;&#x597d;&#x7684;&#x529e;&#x6cd5;&#x5e94;&#x8be5;&#x662f;&#x83b7;&#x53d6;&#x5230;&#x591a;&#x4e2a;&#x66f4;&#x65b0;&#xff0c;&#x4e4b;&#x540e;&#x8fdb;&#x884c;&#x6279;&#x91cf;&#x66f4;&#x65b0;&#xff1b;\n&#x5982;&#x679c;&#x540c;&#x6b65;&#x66f4;&#x65b0;&#x4e86;<span class=\"hljs-keyword\">state</span>&#xff0c;&#x4f46;&#x662f;&#x8fd8;&#x6ca1;&#x6709;&#x6267;&#x884c;render&#x51fd;&#x6570;&#xff0c;&#x90a3;&#x4e48;<span class=\"hljs-keyword\">state</span>&#x548c;props&#x4e0d;&#x80fd;&#x4fdd;&#x6301;&#x540c;&#x6b65;&#x3002;<span class=\"hljs-keyword\">state</span>&#x548c;props&#x4e0d;&#x80fd;&#x4fdd;&#x6301;&#x4e00;&#x81f4;&#x6027;&#xff0c;&#x4f1a;&#x5728;&#x5f00;&#x53d1;&#x4e2d;&#x4ea7;&#x751f;&#x5f88;&#x591a;&#x7684;&#x95ee;&#x9898;&#xff1b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1108,1125"}},{"content":"<pre data-lines=\"1126,1141\"><code data-lines=\"1126,1141\">&#x8c03;&#x7528; <span class=\"hljs-built_in\">set</span>State &#x65f6;&#xff0c;&#x7ec4;&#x4ef6;&#x7684; <span class=\"hljs-keyword\">state</span> &#x5e76;&#x4e0d;&#x4f1a;&#x7acb;&#x5373;&#x6539;&#x53d8;&#xff0c; <span class=\"hljs-built_in\">set</span>State &#x53ea;&#x662f;&#x628a;&#x8981;&#x4fee;&#x6539;&#x7684; <span class=\"hljs-keyword\">state</span> &#x653e;&#x5165;&#x4e00;&#x4e2a;&#x961f;&#x5217;&#xff0c; React &#x4f1a;&#x4f18;&#x5316;&#x771f;&#x6b63;&#x7684;&#x6267;&#x884c;&#x65f6;&#x673a;&#xff0c;&#x5e76;&#x51fa;&#x4e8e;&#x6027;&#x80fd;&#x539f;&#x56e0;&#xff0c;&#x4f1a;&#x5c06; React &#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x7684;&#x591a;&#x6b21;React &#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x7684;&#x591a;&#x6b21; <span class=\"hljs-built_in\">set</span>State &#x7684;&#x72b6;&#x6001;&#x4fee;&#x6539;&#x5408;&#x5e76;&#x6210;&#x4e00;&#x6b21;&#x72b6;&#x6001;&#x4fee;&#x6539;&#x3002; &#x6700;&#x7ec8;&#x66f4;&#x65b0;&#x53ea;&#x4ea7;&#x751f;&#x4e00;&#x6b21;&#x7ec4;&#x4ef6;&#x53ca;&#x5176;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x8fd9;&#x5bf9;&#x4e8e;&#x5927;&#x578b;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x7684;&#x6027;&#x80fd;&#x63d0;&#x5347;&#x81f3;&#x5173;&#x91cd;&#x8981;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;this.<span class=\"hljs-built_in\">set</span>State({\n  count: this.<span class=\"hljs-keyword\">state</span>.count + <span class=\"hljs-number\">1</span>    ===&gt;    &#x5165;&#x961f;&#xff0c;[count+<span class=\"hljs-number\">1</span>&#x7684;&#x4efb;&#x52a1;]\n});\nthis.<span class=\"hljs-built_in\">set</span>State({\n  count: this.<span class=\"hljs-keyword\">state</span>.count + <span class=\"hljs-number\">1</span>    ===&gt;    &#x5165;&#x961f;&#xff0c;[count+<span class=\"hljs-number\">1</span>&#x7684;&#x4efb;&#x52a1;&#xff0c;count+<span class=\"hljs-number\">1</span>&#x7684;&#x4efb;&#x52a1;]\n});\n                                          &#x2193;\n                                         &#x5408;&#x5e76; <span class=\"hljs-keyword\">state</span>&#xff0c;[count+<span class=\"hljs-number\">1</span>&#x7684;&#x4efb;&#x52a1;]\n                                          &#x2193;\n                                         &#x6267;&#x884c; count+<span class=\"hljs-number\">1</span>&#x7684;&#x4efb;&#x52a1;\n\n&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x53ea;&#x8981;&#x540c;&#x6b65;&#x4ee3;&#x7801;&#x8fd8;&#x5728;&#x6267;&#x884c;&#xff0c;&#x201c;&#x6512;&#x8d77;&#x6765;&#x201d;&#x8fd9;&#x4e2a;&#x52a8;&#x4f5c;&#x5c31;&#x4e0d;&#x4f1a;&#x505c;&#x6b62;&#x3002;&#xff08;&#x6ce8;&#xff1a;&#x8fd9;&#x91cc;&#x4e4b;&#x6240;&#x4ee5;&#x591a;&#x6b21; +<span class=\"hljs-number\">1</span> &#x6700;&#x7ec8;&#x53ea;&#x6709;&#x4e00;&#x6b21;&#x751f;&#x6548;&#xff0c;&#x662f;&#x56e0;&#x4e3a;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x65b9;&#x6cd5;&#x4e2d;&#x591a;&#x6b21; <span class=\"hljs-built_in\">set</span>State &#x7684;&#x5408;&#x5e76;&#x52a8;&#x4f5c;&#x4e0d;&#x662f;&#x5355;&#x7eaf;&#x5730;&#x5c06;&#x66f4;&#x65b0;&#x7d2f;&#x52a0;&#x3002;&#x6bd4;&#x5982;&#x8fd9;&#x91cc;&#x5bf9;&#x4e8e;&#x76f8;&#x540c;&#x5c5e;&#x6027;&#x7684;&#x8bbe;&#x7f6e;&#xff0c;React &#x53ea;&#x4f1a;&#x4e3a;&#x5176;&#x4fdd;&#x7559;&#x6700;&#x540e;&#x4e00;&#x6b21;&#x7684;&#x66f4;&#x65b0;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1126,1141"}},{"content":"<pre data-lines=\"1142,1155\"><code data-lines=\"1142,1155\">&#x901a;&#x8fc7;&#x5b9e;&#x73b0;&#x7ec4;&#x4ef6;&#x7684;getDefaultProps&#xff0c;&#x5bf9;&#x5c5e;&#x6027;&#x8bbe;&#x7f6e;&#x9ed8;&#x8ba4;&#x503c;&#xff08;<span class=\"hljs-title class_\">ES5</span>&#x7684;&#x5199;&#x6cd5;&#xff09;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">ShowTitle</span> = <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-title function_\">createClass</span>({\n  <span class=\"hljs-attr\">getDefaultProps</span>:<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">return</span>{\n      title : <span class=\"hljs-string\">&quot;React&quot;</span>\n    }\n  },\n  render : <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>{this.props.title}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span></span>\n  }\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1142,1155"}},{"content":"<pre data-lines=\"1156,1164\"><code data-lines=\"1156,1164\"><span class=\"hljs-built_in\">set</span>State &#x7684;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x53ef;&#x9009;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x8fd9;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5c06;&#x5728;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x540e;&#x6267;&#x884c;&#x3002;&#x7b49;&#x4ef7;&#x4e8e;&#x5728; componentDidUpdate &#x751f;&#x547d;&#x5468;&#x671f;&#x5185;&#x6267;&#x884c;&#x3002;&#x901a;&#x5e38;&#x5efa;&#x8bae;&#x4f7f;&#x7528; componentDidUpdate &#x6765;&#x4ee3;&#x66ff;&#x6b64;&#x65b9;&#x5f0f;&#x3002;&#x5728;&#x8fd9;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e2d;&#x4f60;&#x53ef;&#x4ee5;&#x62ff;&#x5230;&#x66f4;&#x65b0;&#x540e; <span class=\"hljs-keyword\">state</span> &#x7684;&#x503c;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;this.<span class=\"hljs-built_in\">set</span>State({\n    key1: newState1,\n    key2: newState2,\n    ...\n}, callback) // &#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f; <span class=\"hljs-keyword\">state</span> &#x66f4;&#x65b0;&#x5b8c;&#x6210;&#x540e;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1156,1164"}},{"content":"<pre data-lines=\"1165,1185\"><code data-lines=\"1165,1185\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;<span class=\"hljs-built_in\">set</span>State()\n<span class=\"hljs-built_in\">set</span>State()&#x7528;&#x4e8e;&#x8bbe;&#x7f6e;&#x72b6;&#x6001;&#x5bf9;&#x8c61;&#xff0c;&#x5176;&#x8bed;&#x6cd5;&#x5982;&#x4e0b;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-built_in\">set</span>State(object nextState[, function callback])\n\n\nnextState&#xff0c;&#x5c06;&#x8981;&#x8bbe;&#x7f6e;&#x7684;&#x65b0;&#x72b6;&#x6001;&#xff0c;&#x8be5;&#x72b6;&#x6001;&#x4f1a;&#x548c;&#x5f53;&#x524d;&#x7684;<span class=\"hljs-keyword\">state</span>&#x5408;&#x5e76;\ncallback&#xff0c;&#x53ef;&#x9009;&#x53c2;&#x6570;&#xff0c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x8be5;&#x51fd;&#x6570;&#x4f1a;&#x5728;<span class=\"hljs-built_in\">set</span>State&#x8bbe;&#x7f6e;&#x6210;&#x529f;&#xff0c;&#x4e14;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x540e;&#x8c03;&#x7528;&#x3002;\n\n&#x5408;&#x5e76;nextState&#x548c;&#x5f53;&#x524d;<span class=\"hljs-keyword\">state</span>&#xff0c;&#x5e76;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x3002;<span class=\"hljs-built_in\">set</span>State&#x662f;React&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x51fd;&#x6570;&#x4e2d;&#x548c;&#x8bf7;&#x6c42;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e2d;&#x89e6;&#x53d1;UI&#x66f4;&#x65b0;&#x7684;&#x4e3b;&#x8981;&#x65b9;&#x6cd5;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;replaceState()\nreplaceState()&#x65b9;&#x6cd5;&#x4e0e;<span class=\"hljs-built_in\">set</span>State()&#x7c7b;&#x4f3c;&#xff0c;&#x4f46;&#x662f;&#x65b9;&#x6cd5;&#x53ea;&#x4f1a;&#x4fdd;&#x7559;nextState&#x4e2d;&#x72b6;&#x6001;&#xff0c;&#x539f;<span class=\"hljs-keyword\">state</span>&#x4e0d;&#x5728;nextState&#x4e2d;&#x7684;&#x72b6;&#x6001;&#x90fd;&#x4f1a;&#x88ab;&#x5220;&#x9664;&#x3002;&#x5176;&#x8bed;&#x6cd5;&#x5982;&#x4e0b;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;replaceState(object nextState[, function callback])\n\n\nnextState&#xff0c;&#x5c06;&#x8981;&#x8bbe;&#x7f6e;&#x7684;&#x65b0;&#x72b6;&#x6001;&#xff0c;&#x8be5;&#x72b6;&#x6001;&#x4f1a;&#x66ff;&#x6362;&#x5f53;&#x524d;&#x7684;<span class=\"hljs-keyword\">state</span>&#x3002;\ncallback&#xff0c;&#x53ef;&#x9009;&#x53c2;&#x6570;&#xff0c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x8be5;&#x51fd;&#x6570;&#x4f1a;&#x5728;replaceState&#x8bbe;&#x7f6e;&#x6210;&#x529f;&#xff0c;&#x4e14;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x540e;&#x8c03;&#x7528;&#x3002;\n\n&#x603b;&#x7ed3;&#xff1a; <span class=\"hljs-built_in\">set</span>State&#xa0;&#x662f;&#x4fee;&#x6539;&#x5176;&#x4e2d;&#x7684;&#x90e8;&#x5206;&#x72b6;&#x6001;&#xff0c;&#x76f8;&#x5f53;&#x4e8e; Object.assign&#xff0c;&#x53ea;&#x662f;&#x8986;&#x76d6;&#xff0c;&#x4e0d;&#x4f1a;&#x51cf;&#x5c11;&#x539f;&#x6765;&#x7684;&#x72b6;&#x6001;&#x3002;&#x800c;replaceState &#x662f;&#x5b8c;&#x5168;&#x66ff;&#x6362;&#x539f;&#x6765;&#x7684;&#x72b6;&#x6001;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x8d4b;&#x503c;&#xff0c;&#x5c06;&#x539f;&#x6765;&#x7684; <span class=\"hljs-keyword\">state</span> &#x66ff;&#x6362;&#x4e3a;&#x53e6;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5982;&#x679c;&#x65b0;&#x72b6;&#x6001;&#x5c5e;&#x6027;&#x51cf;&#x5c11;&#xff0c;&#x90a3;&#x4e48; <span class=\"hljs-keyword\">state</span> &#x4e2d;&#x5c31;&#x6ca1;&#x6709;&#x8fd9;&#x4e2a;&#x72b6;&#x6001;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1165,1185"}},{"content":"<pre data-lines=\"1186,1189\"><code data-lines=\"1186,1189\">this.<span class=\"hljs-keyword\">state</span>&#x901a;&#x5e38;&#x662f;&#x7528;&#x6765;&#x521d;&#x59cb;&#x5316;<span class=\"hljs-keyword\">state</span>&#x7684;&#xff0c;this.<span class=\"hljs-built_in\">set</span>State&#x662f;&#x7528;&#x6765;&#x4fee;&#x6539;<span class=\"hljs-keyword\">state</span>&#x503c;&#x7684;&#x3002;&#x5982;&#x679c;&#x521d;&#x59cb;&#x5316;&#x4e86;<span class=\"hljs-keyword\">state</span>&#x4e4b;&#x540e;&#x518d;&#x4f7f;&#x7528;this.<span class=\"hljs-keyword\">state</span>&#xff0c;&#x4e4b;&#x524d;&#x7684;<span class=\"hljs-keyword\">state</span>&#x4f1a;&#x88ab;&#x8986;&#x76d6;&#x6389;&#xff0c;&#x5982;&#x679c;&#x4f7f;&#x7528;this.<span class=\"hljs-built_in\">set</span>State&#xff0c;&#x53ea;&#x4f1a;&#x66ff;&#x6362;&#x6389;&#x76f8;&#x5e94;&#x7684;<span class=\"hljs-keyword\">state</span>&#x503c;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x5982;&#x679c;&#x60f3;&#x8981;&#x4fee;&#x6539;<span class=\"hljs-keyword\">state</span>&#x7684;&#x503c;&#xff0c;&#x5c31;&#x9700;&#x8981;&#x4f7f;&#x7528;<span class=\"hljs-built_in\">set</span>State&#xff0c;&#x800c;&#x4e0d;&#x80fd;&#x76f4;&#x63a5;&#x4fee;&#x6539;<span class=\"hljs-keyword\">state</span>&#xff0c;&#x76f4;&#x63a5;&#x4fee;&#x6539;<span class=\"hljs-keyword\">state</span>&#x4e4b;&#x540e;&#x9875;&#x9762;&#x662f;&#x4e0d;&#x4f1a;&#x66f4;&#x65b0;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1186,1189"}},{"content":"<pre data-lines=\"1190,1221\"><code data-lines=\"1190,1221\">&#x901a;&#x8fc7;connect&#x548c;mapStateToProps&#x5c06;<span class=\"hljs-keyword\">state</span>&#x6ce8;&#x5165;&#x5230;&#x7ec4;&#x4ef6;&#x4e2d;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;import { connect } <span class=\"hljs-keyword\">from</span> &apos;react-redux&apos;\nimport { <span class=\"hljs-built_in\">set</span>VisibilityFilter } <span class=\"hljs-keyword\">from</span> &apos;@/reducers/Todo/actions&apos;\nimport Link <span class=\"hljs-keyword\">from</span> &apos;@/containers/Todo/components/Link&apos;\n\n<span class=\"hljs-keyword\">const</span> mapStateToProps = (<span class=\"hljs-keyword\">state</span>, ownProps) =&gt; ({\n    active: ownProps.filter === <span class=\"hljs-keyword\">state</span>.visibilityFilter\n})\n\n<span class=\"hljs-keyword\">const</span> mapDispatchToProps = (dispatch, ownProps) =&gt; ({\n    <span class=\"hljs-built_in\">set</span>Filter: () =&gt; {\n        dispatch(<span class=\"hljs-built_in\">set</span>VisibilityFilter(ownProps.filter))\n    }\n})\n\nexport <span class=\"hljs-keyword\">default</span> connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Link)\n\n&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;active&#x5c31;&#x662f;&#x6ce8;&#x5165;&#x5230;Link&#x7ec4;&#x4ef6;&#x4e2d;&#x7684;&#x72b6;&#x6001;&#x3002; mapStateToProps&#xff08;<span class=\"hljs-keyword\">state</span>&#xff0c;ownProps&#xff09;&#x4e2d;&#x5e26;&#x6709;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x542b;&#x4e49;&#x662f;&#x2236;\n\nstate-store&#x7ba1;&#x7406;&#x7684;&#x5168;&#x5c40;&#x72b6;&#x6001;&#x5bf9;&#x8c61;&#xff0c;&#x6240;&#x6709;&#x90fd;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#x6570;&#x636e;&#x90fd;&#x5b58;&#x50a8;&#x5728;&#x8be5;&#x5bf9;&#x8c61;&#x4e2d;&#x3002;\nownProps &#x7ec4;&#x4ef6;&#x901a;&#x8fc7;props&#x4f20;&#x5165;&#x7684;&#x53c2;&#x6570;&#x3002;\n\nreducer &#x5230;&#x7ec4;&#x4ef6;&#x7ecf;&#x5386;&#x7684;&#x8fc7;&#x7a0b;&#xff1a;\n\nreducer&#x5bf9;action&#x5bf9;&#x8c61;&#x5904;&#x7406;&#xff0c;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#xff0c;&#x5e76;&#x5c06;&#x65b0;&#x7684;&#x72b6;&#x6001;&#x503c;&#x8fd4;&#x56de;store&#x3002;\n&#x901a;&#x8fc7;connect&#xff08;mapStateToProps&#xff0c;mapDispatchToProps&#xff09;&#xff08;Component&#xff09;&#x5bf9;&#x7ec4;&#x4ef6; Component&#x8fdb;&#x884c;&#x5347;&#x7ea7;&#xff0c;&#x6b64;&#x65f6;&#x5c06;&#x72b6;&#x6001;&#x503c;&#x4ece;store&#x53d6;&#x51fa;&#x5e76;&#x4f5c;&#x4e3a;props&#x53c2;&#x6570;&#x4f20;&#x9012;&#x5230;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1190,1221"}},{"content":"<pre data-lines=\"1224,1275\"><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;react&apos;</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">PropTypes</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;prop-types&apos;</span>\n\n<span class=\"hljs-comment\">// &#x9ad8;&#x9636;&#x7ec4;&#x4ef6; contect </span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">connect</span> = (<span class=\"hljs-params\">mapStateToProps, mapDispatchToProps</span>) =&gt; <span class=\"hljs-function\">(<span class=\"hljs-params\">WrappedComponent</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Connect</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">React.Component</span> {\n        <span class=\"hljs-comment\">// &#x901a;&#x8fc7;&#x5bf9;context&#x8c03;&#x7528;&#x83b7;&#x53d6;store</span>\n        <span class=\"hljs-keyword\">static</span> contextTypes = {\n            <span class=\"hljs-attr\">store</span>: <span class=\"hljs-title class_\">PropTypes</span>.<span class=\"hljs-property\">object</span>\n        }\n\n        <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-variable language_\">super</span>()\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = {\n                <span class=\"hljs-attr\">allProps</span>: {}\n            }\n        }\n\n        <span class=\"hljs-comment\">// &#x7b2c;&#x4e00;&#x904d;&#x9700;&#x521d;&#x59cb;&#x5316;&#x6240;&#x6709;&#x7ec4;&#x4ef6;&#x521d;&#x59cb;&#x72b6;&#x6001;</span>\n        <span class=\"hljs-title function_\">componentWillMount</span>(<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-keyword\">const</span> store = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">context</span>.<span class=\"hljs-property\">store</span>\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">_updateProps</span>()\n            store.<span class=\"hljs-title function_\">subscribe</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">_updateProps</span>()); <span class=\"hljs-comment\">// &#x52a0;&#x5165;_updateProps()&#x81f3;store&#x91cc;&#x7684;&#x76d1;&#x542c;&#x4e8b;&#x4ef6;&#x5217;&#x8868;</span>\n        }\n\n        <span class=\"hljs-comment\">// &#x6267;&#x884c;action&#x540e;&#x66f4;&#x65b0;props&#xff0c;&#x4f7f;&#x7ec4;&#x4ef6;&#x53ef;&#x4ee5;&#x66f4;&#x65b0;&#x81f3;&#x6700;&#x65b0;&#x72b6;&#x6001;&#xff08;&#x7c7b;&#x4f3c;&#x4e8e;setState&#xff09;</span>\n        <span class=\"hljs-title function_\">_updateProps</span>(<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-keyword\">const</span> store = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">context</span>.<span class=\"hljs-property\">store</span>;\n            <span class=\"hljs-keyword\">let</span> stateProps = mapStateToProps ?\n                <span class=\"hljs-title function_\">mapStateToProps</span>(store.<span class=\"hljs-title function_\">getState</span>(), <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">props</span>) : {} <span class=\"hljs-comment\">// &#x9632;&#x6b62; mapStateToProps &#x6ca1;&#x6709;&#x4f20;&#x5165;</span>\n            <span class=\"hljs-keyword\">let</span> dispatchProps = mapDispatchToProps ?\n                <span class=\"hljs-title function_\">mapDispatchToProps</span>(store.<span class=\"hljs-property\">dispatch</span>, <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">props</span>) : {\n                                    <span class=\"hljs-attr\">dispatch</span>: store.<span class=\"hljs-property\">dispatch</span>\n                                } <span class=\"hljs-comment\">// &#x9632;&#x6b62; mapDispatchToProps &#x6ca1;&#x6709;&#x4f20;&#x5165;</span>\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setState</span>({\n                <span class=\"hljs-attr\">allProps</span>: {\n                    ...stateProps,\n                    ...dispatchProps,\n                    ...<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">props</span>\n                }\n            })\n        }\n\n        <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">WrappedComponent</span> {<span class=\"hljs-attr\">...this.state.allProps</span>} /&gt;</span></span>\n        }\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Connect</span>\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1224,1275"}},{"content":"<pre data-lines=\"1276,1287\"><code data-lines=\"1276,1287\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;props\nprops&#x662f;&#x4e00;&#x4e2a;&#x4ece;&#x5916;&#x90e8;&#x4f20;&#x8fdb;&#x7ec4;&#x4ef6;&#x7684;&#x53c2;&#x6570;&#xff0c;&#x4e3b;&#x8981;&#x4f5c;&#x4e3a;&#x5c31;&#x662f;&#x4ece;&#x7236;&#x7ec4;&#x4ef6;&#x5411;&#x5b50;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;&#x6570;&#x636e;&#xff0c;&#x5b83;&#x5177;&#x6709;&#x53ef;&#x8bfb;&#x6027;&#x548c;&#x4e0d;&#x53d8;&#x6027;&#xff0c;&#x53ea;&#x80fd;&#x901a;&#x8fc7;&#x5916;&#x90e8;&#x7ec4;&#x4ef6;&#x4e3b;&#x52a8;&#x4f20;&#x5165;&#x65b0;&#x7684;props&#x6765;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x5b50;&#x7ec4;&#x4ef6;&#xff0c;&#x5426;&#x5219;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;props&#x4ee5;&#x53ca;&#x5c55;&#x73b0;&#x5f62;&#x5f0f;&#x4e0d;&#x4f1a;&#x6539;&#x53d8;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;<span class=\"hljs-keyword\">state</span>\n<span class=\"hljs-keyword\">state</span>&#x7684;&#x4e3b;&#x8981;&#x4f5c;&#x7528;&#x662f;&#x7528;&#x4e8e;&#x7ec4;&#x4ef6;&#x4fdd;&#x5b58;&#x3001;&#x63a7;&#x5236;&#x4ee5;&#x53ca;&#x4fee;&#x6539;&#x81ea;&#x5df1;&#x7684;&#x72b6;&#x6001;&#xff0c;&#x5b83;&#x53ea;&#x80fd;&#x5728;constructor&#x4e2d;&#x521d;&#x59cb;&#x5316;&#xff0c;&#x5b83;&#x7b97;&#x662f;&#x7ec4;&#x4ef6;&#x7684;&#x79c1;&#x6709;&#x5c5e;&#x6027;&#xff0c;&#x4e0d;&#x53ef;&#x901a;&#x8fc7;&#x5916;&#x90e8;&#x8bbf;&#x95ee;&#x548c;&#x4fee;&#x6539;&#xff0c;&#x53ea;&#x80fd;&#x901a;&#x8fc7;&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x7684;this.<span class=\"hljs-built_in\">set</span>State&#x6765;&#x4fee;&#x6539;&#xff0c;&#x4fee;&#x6539;<span class=\"hljs-keyword\">state</span>&#x5c5e;&#x6027;&#x4f1a;&#x5bfc;&#x81f4;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n&#xff08;<span class=\"hljs-number\">3</span>&#xff09;&#x533a;&#x522b;\n\nprops &#x662f;&#x4f20;&#x9012;&#x7ed9;&#x7ec4;&#x4ef6;&#x7684;&#xff08;&#x7c7b;&#x4f3c;&#x4e8e;&#x51fd;&#x6570;&#x7684;&#x5f62;&#x53c2;&#xff09;&#xff0c;&#x800c;<span class=\"hljs-keyword\">state</span> &#x662f;&#x5728;&#x7ec4;&#x4ef6;&#x5185;&#x88ab;&#x7ec4;&#x4ef6;&#x81ea;&#x5df1;&#x7ba1;&#x7406;&#x7684;&#xff08;&#x7c7b;&#x4f3c;&#x4e8e;&#x5728;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x5185;&#x58f0;&#x660e;&#x7684;&#x53d8;&#x91cf;&#xff09;&#x3002;\nprops &#x662f;&#x4e0d;&#x53ef;&#x4fee;&#x6539;&#x7684;&#xff0c;&#x6240;&#x6709; React &#x7ec4;&#x4ef6;&#x90fd;&#x5fc5;&#x987b;&#x50cf;&#x7eaf;&#x51fd;&#x6570;&#x4e00;&#x6837;&#x4fdd;&#x62a4;&#x5b83;&#x4eec;&#x7684; props &#x4e0d;&#x88ab;&#x66f4;&#x6539;&#x3002;\n<span class=\"hljs-keyword\">state</span> &#x662f;&#x5728;&#x7ec4;&#x4ef6;&#x4e2d;&#x521b;&#x5efa;&#x7684;&#xff0c;&#x4e00;&#x822c;&#x5728; constructor&#x4e2d;&#x521d;&#x59cb;&#x5316; <span class=\"hljs-keyword\">state</span>&#x3002;<span class=\"hljs-keyword\">state</span> &#x662f;&#x591a;&#x53d8;&#x7684;&#x3001;&#x53ef;&#x4ee5;&#x4fee;&#x6539;&#xff0c;&#x6bcf;&#x6b21;<span class=\"hljs-built_in\">set</span>State&#x90fd;&#x5f02;&#x6b65;&#x66f4;&#x65b0;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1276,1287"}},{"content":"<pre data-lines=\"1288,1298\"><code data-lines=\"1288,1298\"><span class=\"hljs-keyword\">this</span>.props&#x662f;&#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x6c9f;&#x901a;&#x7684;&#x4e00;&#x4e2a;&#x63a5;&#x53e3;&#xff0c;&#x539f;&#x5219;&#x4e0a;&#x6765;&#x8bb2;&#xff0c;&#x5b83;&#x53ea;&#x80fd;&#x4ece;&#x7236;&#x7ec4;&#x4ef6;&#x6d41;&#x5411;&#x5b50;&#x7ec4;&#x4ef6;&#x3002;React&#x5177;&#x6709;&#x6d53;&#x91cd;&#x7684;&#x51fd;&#x6570;&#x5f0f;&#x7f16;&#x7a0b;&#x7684;&#x601d;&#x60f3;&#x3002;\n&#x63d0;&#x5230;&#x51fd;&#x6570;&#x5f0f;&#x7f16;&#x7a0b;&#x5c31;&#x8981;&#x63d0;&#x4e00;&#x4e2a;&#x6982;&#x5ff5;&#xff1a;&#x7eaf;&#x51fd;&#x6570;&#x3002;&#x5b83;&#x6709;&#x51e0;&#x4e2a;&#x7279;&#x70b9;&#xff1a;\n\n&#x7ed9;&#x5b9a;&#x76f8;&#x540c;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x603b;&#x662f;&#x8fd4;&#x56de;&#x76f8;&#x540c;&#x7684;&#x8f93;&#x51fa;&#x3002;\n&#x8fc7;&#x7a0b;&#x6ca1;&#x6709;&#x526f;&#x4f5c;&#x7528;&#x3002;\n&#x4e0d;&#x4f9d;&#x8d56;&#x5916;&#x90e8;&#x72b6;&#x6001;&#x3002;\n\n<span class=\"hljs-keyword\">this</span>.props&#x5c31;&#x662f;&#x6c72;&#x53d6;&#x4e86;&#x7eaf;&#x51fd;&#x6570;&#x7684;&#x601d;&#x60f3;&#x3002;props&#x7684;&#x4e0d;&#x53ef;&#x4ee5;&#x53d8;&#x6027;&#x5c31;&#x4fdd;&#x8bc1;&#x7684;&#x76f8;&#x540c;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x9875;&#x9762;&#x663e;&#x793a;&#x7684;&#x5185;&#x5bb9;&#x662f;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x5e76;&#x4e14;&#x4e0d;&#x4f1a;&#x4ea7;&#x751f;&#x526f;&#x4f5c;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1288,1298"}},{"content":"<pre data-lines=\"1299,1320\"><code data-lines=\"1299,1320\">&#x5728;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x4f20;&#x5165;&#x7684;props&#x66f4;&#x65b0;&#x65f6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x8be5;&#x7ec4;&#x4ef6;&#x5e38;&#x7528;&#x7684;&#x65b9;&#x6cd5;&#x662f;&#x5728;componentWillReceiveProps&#x4e2d;&#x5c06;&#x65b0;&#x7684;props&#x66f4;&#x65b0;&#x5230;&#x7ec4;&#x4ef6;&#x7684;<span class=\"hljs-keyword\">state</span>&#x4e2d;&#xff08;&#x8fd9;&#x79cd;<span class=\"hljs-keyword\">state</span>&#x88ab;&#x6210;&#x4e3a;&#x6d3e;&#x751f;&#x72b6;&#x6001;&#xff08;Derived State&#xff09;&#xff09;&#xff0c;&#x4ece;&#x800c;&#x5b9e;&#x73b0;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;React <span class=\"hljs-number\">16.3</span>&#x4e2d;&#x8fd8;&#x5f15;&#x5165;&#x4e86;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x94a9;&#x5b50;&#x51fd;&#x6570;getDerivedStateFromProps&#x6765;&#x4e13;&#x95e8;&#x5b9e;&#x73b0;&#x8fd9;&#x4e00;&#x9700;&#x6c42;&#x3002;\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;componentWillReceiveProps&#xff08;&#x5df2;&#x5e9f;&#x5f03;&#xff09;\n&#x5728;react&#x7684;componentWillReceiveProps(nextProps)&#x751f;&#x547d;&#x5468;&#x671f;&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;render&#x51fd;&#x6570;&#x6267;&#x884c;&#x524d;&#xff0c;&#x901a;&#x8fc7;this.props&#x83b7;&#x53d6;&#x65e7;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x901a;&#x8fc7;nextProps&#x83b7;&#x53d6;&#x65b0;&#x7684;props&#xff0c;&#x5bf9;&#x6bd4;&#x4e24;&#x6b21;props&#x662f;&#x5426;&#x76f8;&#x540c;&#xff0c;&#x4ece;&#x800c;&#x66f4;&#x65b0;&#x5b50;&#x7ec4;&#x4ef6;&#x81ea;&#x5df1;&#x7684;<span class=\"hljs-keyword\">state</span>&#x3002;\n&#x8fd9;&#x6837;&#x7684;&#x597d;&#x5904;&#x662f;&#xff0c;&#x53ef;&#x4ee5;&#x5c06;&#x6570;&#x636e;&#x8bf7;&#x6c42;&#x653e;&#x5728;&#x8fd9;&#x91cc;&#x8fdb;&#x884c;&#x6267;&#x884c;&#xff0c;&#x9700;&#x8981;&#x4f20;&#x7684;&#x53c2;&#x6570;&#x5219;&#x4ece;componentWillReceiveProps(nextProps)&#x4e2d;&#x83b7;&#x53d6;&#x3002;&#x800c;&#x4e0d;&#x5fc5;&#x5c06;&#x6240;&#x6709;&#x7684;&#x8bf7;&#x6c42;&#x90fd;&#x653e;&#x5728;&#x7236;&#x7ec4;&#x4ef6;&#x4e2d;&#x3002;&#x4e8e;&#x662f;&#x8be5;&#x8bf7;&#x6c42;&#x53ea;&#x4f1a;&#x5728;&#x8be5;&#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x65f6;&#x624d;&#x4f1a;&#x53d1;&#x51fa;&#xff0c;&#x4ece;&#x800c;&#x51cf;&#x8f7b;&#x8bf7;&#x6c42;&#x8d1f;&#x62c5;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;getDerivedStateFromProps&#xff08;<span class=\"hljs-number\">16.3</span>&#x5f15;&#x5165;&#xff09;\n&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#x662f;&#x4e3a;&#x4e86;&#x66ff;&#x4ee3;componentWillReceiveProps&#x5b58;&#x5728;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5728;&#x9700;&#x8981;&#x4f7f;&#x7528;componentWillReceiveProps&#x65f6;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x8003;&#x8651;&#x4f7f;&#x7528;getDerivedStateFromProps&#x6765;&#x8fdb;&#x884c;&#x66ff;&#x4ee3;&#x3002;\n&#x4e24;&#x8005;&#x7684;&#x53c2;&#x6570;&#x662f;&#x4e0d;&#x76f8;&#x540c;&#x7684;&#xff0c;&#x800c;getDerivedStateFromProps&#x662f;&#x4e00;&#x4e2a;&#x9759;&#x6001;&#x51fd;&#x6570;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x4e0d;&#x80fd;&#x901a;&#x8fc7;this&#x8bbf;&#x95ee;&#x5230;class&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4e5f;&#x5e76;&#x4e0d;&#x63a8;&#x8350;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;&#x5c5e;&#x6027;&#x3002;&#x800c;&#x662f;&#x5e94;&#x8be5;&#x901a;&#x8fc7;&#x53c2;&#x6570;&#x63d0;&#x4f9b;&#x7684;nextProps&#x4ee5;&#x53ca;prevState&#x6765;&#x8fdb;&#x884c;&#x5224;&#x65ad;&#xff0c;&#x6839;&#x636e;&#x65b0;&#x4f20;&#x5165;&#x7684;props&#x6765;&#x6620;&#x5c04;&#x5230;<span class=\"hljs-keyword\">state</span>&#x3002;\n&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x5982;&#x679c;props&#x4f20;&#x5165;&#x7684;&#x5185;&#x5bb9;&#x4e0d;&#x9700;&#x8981;&#x5f71;&#x54cd;&#x5230;&#x4f60;&#x7684;<span class=\"hljs-keyword\">state</span>&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x9700;&#x8981;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;null&#xff0c;&#x8fd9;&#x4e2a;&#x8fd4;&#x56de;&#x503c;&#x662f;&#x5fc5;&#x987b;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5c3d;&#x91cf;&#x5c06;&#x5176;&#x5199;&#x5230;&#x51fd;&#x6570;&#x7684;&#x672b;&#x5c3e;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;static getDerivedStateFromProps(nextProps, prevState) {\n    <span class=\"hljs-keyword\">const</span> {type} = nextProps;\n    // &#x5f53;&#x4f20;&#x5165;&#x7684;type&#x53d1;&#x751f;&#x53d8;&#x5316;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x66f4;&#x65b0;<span class=\"hljs-keyword\">state</span>\n    if (type !== prevState.type) {\n        return {\n            type,\n        };\n    }\n    // &#x5426;&#x5219;&#xff0c;&#x5bf9;&#x4e8e;<span class=\"hljs-keyword\">state</span>&#x4e0d;&#x8fdb;&#x884c;&#x4efb;&#x4f55;&#x64cd;&#x4f5c;\n    return null;\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1299,1320"}},{"content":"<pre data-lines=\"1321,1339\"><code data-lines=\"1321,1339\"><span class=\"hljs-type\">React</span>&#x4e3a;&#x6211;&#x4eec;&#x63d0;&#x4f9b;&#x4e86;<span class=\"hljs-type\">PropTypes</span>&#x4ee5;&#x4f9b;&#x9a8c;&#x8bc1;&#x4f7f;&#x7528;&#x3002;&#x5f53;&#x6211;&#x4eec;&#x5411;<span class=\"hljs-type\">Props</span>&#x4f20;&#x5165;&#x7684;&#x6570;&#x636e;&#x65e0;&#x6548;&#xff08;&#x5411;<span class=\"hljs-type\">Props</span>&#x4f20;&#x5165;&#x7684;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x548c;&#x9a8c;&#x8bc1;&#x7684;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x4e0d;&#x7b26;&#xff09;&#x5c31;&#x4f1a;&#x5728;&#x63a7;&#x5236;&#x53f0;&#x53d1;&#x51fa;&#x8b66;&#x544a;&#x4fe1;&#x606f;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x907f;&#x514d;&#x968f;&#x7740;&#x5e94;&#x7528;&#x8d8a;&#x6765;&#x8d8a;&#x590d;&#x6742;&#x4ece;&#x800c;&#x51fa;&#x73b0;&#x7684;&#x95ee;&#x9898;&#x3002;&#x5e76;&#x4e14;&#xff0c;&#x5b83;&#x8fd8;&#x53ef;&#x4ee5;&#x8ba9;&#x7a0b;&#x5e8f;&#x53d8;&#x5f97;&#x66f4;&#x6613;&#x8bfb;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">import</span> <span class=\"hljs-type\">PropTypes</span> from &apos;prop-types&apos;;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Greeting</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n  render() {\n    <span class=\"hljs-keyword\">return</span> (\n      &lt;h1&gt;<span class=\"hljs-type\">Hello</span>, {<span class=\"hljs-keyword\">this</span>.props.name}&lt;/h1&gt;\n    );\n  }\n}\n\n<span class=\"hljs-type\">Greeting</span>.propTypes = {\n  name: <span class=\"hljs-type\">PropTypes</span>.string\n};\n\n&#x5f53;&#x7136;&#xff0c;&#x5982;&#x679c;&#x9879;&#x76ee;&#x6c47;&#x4e2d;&#x4f7f;&#x7528;&#x4e86;<span class=\"hljs-type\">TypeScript</span>&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x53ef;&#x4ee5;&#x4e0d;&#x7528;<span class=\"hljs-type\">PropTypes</span>&#x6765;&#x6821;&#x9a8c;&#xff0c;&#x800c;&#x4f7f;&#x7528;<span class=\"hljs-type\">TypeScript</span>&#x5b9a;&#x4e49;&#x63a5;&#x53e3;&#x6765;&#x6821;&#x9a8c;props&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1321,1339"}}],"payload":{"tag":"h2","lines":"1059,1060"}},{"content":"&#x4e09;&#x3001;&#x751f;&#x547d;&#x5468;&#x671f;","children":[{"content":"<pre data-lines=\"1342,1559\"><code data-lines=\"1342,1559\">React &#x901a;&#x5e38;&#x5c06;&#x7ec4;&#x4ef6;&#x751f;&#x547d;&#x5468;&#x671f;&#x5206;&#x4e3a;&#x4e09;&#x4e2a;&#x9636;&#x6bb5;&#xff1a;\n\n&#x88c5;&#x8f7d;&#x9636;&#x6bb5;&#xff08;Mount&#xff09;&#xff0c;&#x7ec4;&#x4ef6;&#x7b2c;&#x4e00;&#x6b21;&#x5728;DOM&#x6811;&#x4e2d;&#x88ab;&#x6e32;&#x67d3;&#x7684;&#x8fc7;&#x7a0b;&#xff1b;\n&#x66f4;&#x65b0;&#x8fc7;&#x7a0b;&#xff08;Update&#xff09;&#xff0c;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xff0c;&#x91cd;&#x65b0;&#x66f4;&#x65b0;&#x6e32;&#x67d3;&#x7684;&#x8fc7;&#x7a0b;&#xff1b;\n&#x5378;&#x8f7d;&#x8fc7;&#x7a0b;&#xff08;Unmount&#xff09;&#xff0c;&#x7ec4;&#x4ef6;&#x4ece;DOM&#x6811;&#x4e2d;&#x88ab;&#x79fb;&#x9664;&#x7684;&#x8fc7;&#x7a0b;&#xff1b;\n\n\n<span class=\"hljs-number\">1</span>&#xff09;&#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#x9636;&#x6bb5;\n&#x6302;&#x8f7d;&#x9636;&#x6bb5;&#x7ec4;&#x4ef6;&#x88ab;&#x521b;&#x5efa;&#xff0c;&#x7136;&#x540e;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x63d2;&#x5165;&#x5230; DOM &#x4e2d;&#xff0c;&#x5b8c;&#x6210;&#x7ec4;&#x4ef6;&#x7684;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#xff0c;&#x8be5;&#x8fc7;&#x7a0b;&#x53ea;&#x4f1a;&#x53d1;&#x751f;&#x4e00;&#x6b21;&#xff0c;&#x5728;&#x6b64;&#x9636;&#x6bb5;&#x4f1a;&#x4f9d;&#x6b21;&#x8c03;&#x7528;&#x4ee5;&#x4e0b;&#x8fd9;&#x4e9b;&#x65b9;&#x6cd5;&#xff1a;\n\n<span class=\"hljs-keyword\">constructor</span>\ngetDerivedStateFromProps\nrender\ncomponentDidMount\n\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;<span class=\"hljs-keyword\">constructor</span>\n&#x7ec4;&#x4ef6;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x88ab;&#x6267;&#x884c;&#xff0c;&#x82e5;&#x6ca1;&#x6709;&#x663e;&#x5f0f;&#x5b9a;&#x4e49;&#x5b83;&#xff0c;&#x4f1a;&#x6709;&#x4e00;&#x4e2a;&#x9ed8;&#x8ba4;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x4f46;&#x662f;&#x82e5;&#x663e;&#x5f0f;&#x5b9a;&#x4e49;&#x4e86;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x6211;&#x4eec;&#x5fc5;&#x987b;&#x5728;&#x6784;&#x9020;&#x51fd;&#x6570;&#x4e2d;&#x6267;&#x884c; <span class=\"hljs-keyword\">super</span>(props)&#xff0c;&#x5426;&#x5219;&#x65e0;&#x6cd5;&#x5728;&#x6784;&#x9020;&#x51fd;&#x6570;&#x4e2d;&#x62ff;&#x5230;<span class=\"hljs-keyword\">this</span>&#x3002;\n&#x5982;&#x679c;&#x4e0d;&#x521d;&#x59cb;&#x5316; state &#x6216;&#x4e0d;&#x8fdb;&#x884c;&#x65b9;&#x6cd5;&#x7ed1;&#x5b9a;&#xff0c;&#x5219;&#x4e0d;&#x9700;&#x8981;&#x4e3a; React &#x7ec4;&#x4ef6;&#x5b9e;&#x73b0;&#x6784;&#x9020;&#x51fd;&#x6570;Constructor&#x3002;\n<span class=\"hljs-keyword\">constructor</span>&#x4e2d;&#x901a;&#x5e38;&#x53ea;&#x505a;&#x4e24;&#x4ef6;&#x4e8b;&#xff1a;\n\n&#x521d;&#x59cb;&#x5316;&#x7ec4;&#x4ef6;&#x7684; state\n&#x7ed9;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x65b9;&#x6cd5;&#x7ed1;&#x5b9a; <span class=\"hljs-keyword\">this</span>\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">constructor</span>(props) {\n  <span class=\"hljs-keyword\">super</span>(props);\n  <span class=\"hljs-comment\">// &#x4e0d;&#x8981;&#x5728;&#x6784;&#x9020;&#x51fd;&#x6570;&#x4e2d;&#x8c03;&#x7528; setState&#xff0c;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x7ed9; state &#x8bbe;&#x7f6e;&#x521d;&#x59cb;&#x503c;</span>\n  <span class=\"hljs-keyword\">this</span>.state = { counter: <span class=\"hljs-number\">0</span> }\n  <span class=\"hljs-keyword\">this</span>.handleClick = <span class=\"hljs-keyword\">this</span>.handleClick.bind(<span class=\"hljs-keyword\">this</span>)\n}\n\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;getDerivedStateFromProps\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;static getDerivedStateFromProps(props, state)\n\n&#x8fd9;&#x662f;&#x4e2a;&#x9759;&#x6001;&#x65b9;&#x6cd5;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x80fd;&#x5728;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x91cc;&#x4f7f;&#x7528; <span class=\"hljs-keyword\">this</span>&#xff0c;&#x6709;&#x4e24;&#x4e2a;&#x53c2;&#x6570; props &#x548c; state&#xff0c;&#x5206;&#x522b;&#x6307;&#x63a5;&#x6536;&#x5230;&#x7684;&#x65b0;&#x53c2;&#x6570;&#x548c;&#x5f53;&#x524d;&#x7ec4;&#x4ef6;&#x7684; state &#x5bf9;&#x8c61;&#xff0c;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x4f1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x7528;&#x6765;&#x66f4;&#x65b0;&#x5f53;&#x524d;&#x7684; state &#x5bf9;&#x8c61;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x9700;&#x8981;&#x66f4;&#x65b0;&#x53ef;&#x4ee5;&#x8fd4;&#x56de; <span class=\"hljs-literal\">null</span>&#x3002;\n&#x8be5;&#x51fd;&#x6570;&#x4f1a;&#x5728;&#x88c5;&#x8f7d;&#x65f6;&#xff0c;&#x63a5;&#x6536;&#x5230;&#x65b0;&#x7684; props &#x6216;&#x8005;&#x8c03;&#x7528;&#x4e86; setState &#x548c; forceUpdate &#x65f6;&#x88ab;&#x8c03;&#x7528;&#x3002;&#x5982;&#x5f53;&#x63a5;&#x6536;&#x5230;&#x65b0;&#x7684;&#x5c5e;&#x6027;&#x60f3;&#x4fee;&#x6539; state &#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// &#x5f53; props.counter &#x53d8;&#x5316;&#x65f6;&#xff0c;&#x8d4b;&#x503c;&#x7ed9; state </span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">App</span> <span class=\"hljs-title\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> {\n  <span class=\"hljs-keyword\">constructor</span>(props) {\n    <span class=\"hljs-keyword\">super</span>(props)\n    <span class=\"hljs-keyword\">this</span>.state = {\n      counter: <span class=\"hljs-number\">0</span>\n    }\n  }\n  static getDerivedStateFromProps(props, state) {\n    <span class=\"hljs-keyword\">if</span> (props.counter !== state.counter) {\n      <span class=\"hljs-keyword\">return</span> {\n        counter: props.counter\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>\n  }\n  \n  handleClick = () =&gt; {\n    <span class=\"hljs-keyword\">this</span>.setState({\n      counter: <span class=\"hljs-keyword\">this</span>.state.counter + <span class=\"hljs-number\">1</span>\n    })\n  }\n  render() {\n    <span class=\"hljs-keyword\">return</span> (\n      &lt;div&gt;\n        &lt;h1 onClick={<span class=\"hljs-keyword\">this</span>.handleClick}&gt;Hello, world!{<span class=\"hljs-keyword\">this</span>.state.counter}&lt;/h1&gt;\n      &lt;/div&gt;\n    )\n  }\n}\n\n&#x73b0;&#x5728;&#x53ef;&#x4ee5;&#x663e;&#x5f0f;&#x4f20;&#x5165; counter &#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x91cc;&#x6709;&#x4e2a;&#x95ee;&#x9898;&#xff0c;&#x5982;&#x679c;&#x60f3;&#x8981;&#x901a;&#x8fc7;&#x70b9;&#x51fb;&#x5b9e;&#x73b0; state.counter &#x7684;&#x589e;&#x52a0;&#xff0c;&#x4f46;&#x8fd9;&#x65f6;&#x4f1a;&#x53d1;&#x73b0;&#x503c;&#x4e0d;&#x4f1a;&#x53d1;&#x751f;&#x4efb;&#x4f55;&#x53d8;&#x5316;&#xff0c;&#x4e00;&#x76f4;&#x4fdd;&#x6301; props &#x4f20;&#x8fdb;&#x6765;&#x7684;&#x503c;&#x3002;&#x8fd9;&#x662f;&#x7531;&#x4e8e;&#x5728; React <span class=\"hljs-number\">16.4</span>^ &#x7684;&#x7248;&#x672c;&#x4e2d; setState &#x548c; forceUpdate &#x4e5f;&#x4f1a;&#x89e6;&#x53d1;&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#xff0c;&#x6240;&#x4ee5;&#x5f53;&#x7ec4;&#x4ef6;&#x5185;&#x90e8; state &#x53d8;&#x5316;&#x540e;&#xff0c;&#x5c31;&#x4f1a;&#x91cd;&#x65b0;&#x8d70;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#xff0c;&#x540c;&#x65f6;&#x4f1a;&#x628a; state &#x503c;&#x8d4b;&#x503c;&#x4e3a; props &#x7684;&#x503c;&#x3002;&#x56e0;&#x6b64;&#x9700;&#x8981;&#x591a;&#x52a0;&#x4e00;&#x4e2a;&#x5b57;&#x6bb5;&#x6765;&#x8bb0;&#x5f55;&#x4e4b;&#x524d;&#x7684; props &#x503c;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x4f1a;&#x89e3;&#x51b3;&#x4e0a;&#x8ff0;&#x95ee;&#x9898;&#x3002;&#x5177;&#x4f53;&#x5982;&#x4e0b;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// &#x8fd9;&#x91cc;&#x53ea;&#x5217;&#x51fa;&#x9700;&#x8981;&#x53d8;&#x5316;&#x7684;&#x5730;&#x65b9;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">App</span> <span class=\"hljs-title\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> {\n  <span class=\"hljs-keyword\">constructor</span>(props) {\n    <span class=\"hljs-keyword\">super</span>(props)\n    <span class=\"hljs-keyword\">this</span>.state = {\n      <span class=\"hljs-comment\">// &#x589e;&#x52a0;&#x4e00;&#x4e2a; preCounter &#x6765;&#x8bb0;&#x5f55;&#x4e4b;&#x524d;&#x7684; props &#x4f20;&#x6765;&#x7684;&#x503c;</span>\n      preCounter: <span class=\"hljs-number\">0</span>,\n      counter: <span class=\"hljs-number\">0</span>\n    }\n  }\n  static getDerivedStateFromProps(props, state) {\n    <span class=\"hljs-comment\">// &#x8ddf; state.preCounter &#x8fdb;&#x884c;&#x6bd4;&#x8f83;</span>\n    <span class=\"hljs-keyword\">if</span> (props.counter !== state.preCounter) {\n      <span class=\"hljs-keyword\">return</span> {\n        counter: props.counter,\n        preCounter: props.counter\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>\n  }\n  handleClick = () =&gt; {\n    <span class=\"hljs-keyword\">this</span>.setState({\n      counter: <span class=\"hljs-keyword\">this</span>.state.counter + <span class=\"hljs-number\">1</span>\n    })\n  }\n  render() {\n    <span class=\"hljs-keyword\">return</span> (\n      &lt;div&gt;\n        &lt;h1 onClick={<span class=\"hljs-keyword\">this</span>.handleClick}&gt;Hello, world!{<span class=\"hljs-keyword\">this</span>.state.counter}&lt;/h1&gt;\n      &lt;/div&gt;\n    )\n  }\n}\n\n&#xff08;<span class=\"hljs-number\">3</span>&#xff09;render\nrender&#x662f;React &#x4e2d;&#x6700;&#x6838;&#x5fc3;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x4e2d;&#x5fc5;&#x987b;&#x8981;&#x6709;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x4f1a;&#x6839;&#x636e;&#x72b6;&#x6001; state &#x548c;&#x5c5e;&#x6027; props &#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x3002;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x53ea;&#x505a;&#x4e00;&#x4ef6;&#x4e8b;&#xff0c;&#x5c31;&#x662f;&#x8fd4;&#x56de;&#x9700;&#x8981;&#x6e32;&#x67d3;&#x7684;&#x5185;&#x5bb9;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x8981;&#x5728;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x5185;&#x505a;&#x5176;&#x4ed6;&#x4e1a;&#x52a1;&#x903b;&#x8f91;&#xff0c;&#x901a;&#x5e38;&#x8c03;&#x7528;&#x8be5;&#x65b9;&#x6cd5;&#x4f1a;&#x8fd4;&#x56de;&#x4ee5;&#x4e0b;&#x7c7b;&#x578b;&#x4e2d;&#x4e00;&#x4e2a;&#xff1a;\n\nReact &#x5143;&#x7d20;&#xff1a;&#x8fd9;&#x91cc;&#x5305;&#x62ec;&#x539f;&#x751f;&#x7684; DOM &#x4ee5;&#x53ca; React &#x7ec4;&#x4ef6;&#xff1b;\n&#x6570;&#x7ec4;&#x548c; Fragment&#xff08;&#x7247;&#x6bb5;&#xff09;&#xff1a;&#x53ef;&#x4ee5;&#x8fd4;&#x56de;&#x591a;&#x4e2a;&#x5143;&#x7d20;&#xff1b;\nPortals&#xff08;&#x63d2;&#x69fd;&#xff09;&#xff1a;&#x53ef;&#x4ee5;&#x5c06;&#x5b50;&#x5143;&#x7d20;&#x6e32;&#x67d3;&#x5230;&#x4e0d;&#x540c;&#x7684; DOM &#x5b50;&#x6811;&#x79cd;&#xff1b;\n&#x5b57;&#x7b26;&#x4e32;&#x548c;&#x6570;&#x5b57;&#xff1a;&#x88ab;&#x6e32;&#x67d3;&#x6210; DOM &#x4e2d;&#x7684; text &#x8282;&#x70b9;&#xff1b;\n&#x5e03;&#x5c14;&#x503c;&#x6216; <span class=\"hljs-literal\">null</span>&#xff1a;&#x4e0d;&#x6e32;&#x67d3;&#x4efb;&#x4f55;&#x5185;&#x5bb9;&#x3002;\n\n&#xff08;<span class=\"hljs-number\">4</span>&#xff09;componentDidMount()\ncomponentDidMount()&#x4f1a;&#x5728;&#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#x540e;&#xff08;&#x63d2;&#x5165; DOM &#x6811;&#x4e2d;&#xff09;&#x7acb;&#x5373;&#x8c03;&#x3002;&#x8be5;&#x9636;&#x6bb5;&#x901a;&#x5e38;&#x8fdb;&#x884c;&#x4ee5;&#x4e0b;&#x64cd;&#x4f5c;&#xff1a;\n\n&#x6267;&#x884c;&#x4f9d;&#x8d56;&#x4e8e;DOM&#x7684;&#x64cd;&#x4f5c;&#xff1b;\n&#x53d1;&#x9001;&#x7f51;&#x7edc;&#x8bf7;&#x6c42;&#xff1b;&#xff08;&#x5b98;&#x65b9;&#x5efa;&#x8bae;&#xff09;\n&#x6dfb;&#x52a0;&#x8ba2;&#x9605;&#x6d88;&#x606f;&#xff08;&#x4f1a;&#x5728;componentWillUnmount&#x53d6;&#x6d88;&#x8ba2;&#x9605;&#xff09;&#xff1b;\n\n&#x5982;&#x679c;&#x5728; componentDidMount &#x4e2d;&#x8c03;&#x7528; setState &#xff0c;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;&#x4e00;&#x6b21;&#x989d;&#x5916;&#x7684;&#x6e32;&#x67d3;&#xff0c;&#x591a;&#x8c03;&#x7528;&#x4e86;&#x4e00;&#x6b21; render &#x51fd;&#x6570;&#xff0c;&#x7531;&#x4e8e;&#x5b83;&#x662f;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x5237;&#x65b0;&#x5c4f;&#x5e55;&#x524d;&#x6267;&#x884c;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x7528;&#x6237;&#x5bf9;&#x6b64;&#x662f;&#x6ca1;&#x6709;&#x611f;&#x77e5;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x6211;&#x5e94;&#x5f53;&#x907f;&#x514d;&#x8fd9;&#x6837;&#x4f7f;&#x7528;&#xff0c;&#x8fd9;&#x6837;&#x4f1a;&#x5e26;&#x6765;&#x4e00;&#x5b9a;&#x7684;&#x6027;&#x80fd;&#x95ee;&#x9898;&#xff0c;&#x5c3d;&#x91cf;&#x662f;&#x5728; <span class=\"hljs-keyword\">constructor</span> &#x4e2d;&#x521d;&#x59cb;&#x5316; state &#x5bf9;&#x8c61;&#x3002;\n&#x5728;&#x7ec4;&#x4ef6;&#x88c5;&#x8f7d;&#x4e4b;&#x540e;&#xff0c;&#x5c06;&#x8ba1;&#x6570;&#x6570;&#x5b57;&#x53d8;&#x4e3a;<span class=\"hljs-number\">1</span>&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">App</span> <span class=\"hljs-title\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span>  {\n  <span class=\"hljs-keyword\">constructor</span>(props) {\n    <span class=\"hljs-keyword\">super</span>(props)\n    <span class=\"hljs-keyword\">this</span>.state = {\n      counter: <span class=\"hljs-number\">0</span>\n    }\n  }\n  componentDidMount () {\n    <span class=\"hljs-keyword\">this</span>.setState({\n      counter: <span class=\"hljs-number\">1</span>\n    })\n  }\n  render ()  {\n    <span class=\"hljs-keyword\">return</span> (\n      &lt;div className=<span class=\"hljs-string\">&quot;counter&quot;</span>&gt;\n        counter&#x503c;: { <span class=\"hljs-keyword\">this</span>.state.counter }\n      &lt;/div&gt;\n    )\n  }\n}\n\n<span class=\"hljs-number\">2</span>&#xff09;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x9636;&#x6bb5;\n&#x5f53;&#x7ec4;&#x4ef6;&#x7684; props &#x6539;&#x53d8;&#x4e86;&#xff0c;&#x6216;&#x7ec4;&#x4ef6;&#x5185;&#x90e8;&#x8c03;&#x7528;&#x4e86; setState/forceUpdate&#xff0c;&#x4f1a;&#x89e6;&#x53d1;&#x66f4;&#x65b0;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x53ef;&#x80fd;&#x4f1a;&#x53d1;&#x751f;&#x591a;&#x6b21;&#x3002;&#x8fd9;&#x4e2a;&#x9636;&#x6bb5;&#x4f1a;&#x4f9d;&#x6b21;&#x8c03;&#x7528;&#x4e0b;&#x9762;&#x8fd9;&#x4e9b;&#x65b9;&#x6cd5;&#xff1a;\n\ngetDerivedStateFromProps\nshouldComponentUpdate\nrender\ngetSnapshotBeforeUpdate\ncomponentDidUpdate\n\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;shouldComponentUpdate\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;shouldComponentUpdate(nextProps, nextState)\n\n&#x5728;&#x8bf4;&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#x4e4b;&#x524d;&#xff0c;&#x6765;&#x770b;&#x4e24;&#x4e2a;&#x95ee;&#x9898;&#xff1a;\n\nsetState &#x51fd;&#x6570;&#x5728;&#x4efb;&#x4f55;&#x60c5;&#x51b5;&#x4e0b;&#x90fd;&#x4f1a;&#x5bfc;&#x81f4;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x5417;&#xff1f;&#x4f8b;&#x5982;&#x4e0b;&#x9762;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#xff1a;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">this</span>.setState({number: <span class=\"hljs-keyword\">this</span>.state.number})\n\n\n&#x5982;&#x679c;&#x6ca1;&#x6709;&#x8c03;&#x7528; setState&#xff0c;props &#x503c;&#x4e5f;&#x6ca1;&#x6709;&#x53d8;&#x5316;&#xff0c;&#x662f;&#x4e0d;&#x662f;&#x7ec4;&#x4ef6;&#x5c31;&#x4e0d;&#x4f1a;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff1f;\n\n&#x7b2c;&#x4e00;&#x4e2a;&#x95ee;&#x9898;&#x7b54;&#x6848;&#x662f; &#x4f1a; &#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x95ee;&#x9898;&#x5982;&#x679c;&#x662f;&#x7236;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x65f6;&#xff0c;&#x4e0d;&#x7ba1;&#x4f20;&#x5165;&#x7684; props &#x6709;&#x6ca1;&#x6709;&#x53d8;&#x5316;&#xff0c;&#x90fd;&#x4f1a;&#x5f15;&#x8d77;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n&#x90a3;&#x4e48;&#x6709;&#x6ca1;&#x6709;&#x4ec0;&#x4e48;&#x65b9;&#x6cd5;&#x89e3;&#x51b3;&#x5728;&#x8fd9;&#x4e24;&#x4e2a;&#x573a;&#x666f;&#x4e0b;&#x4e0d;&#x8ba9;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x8fdb;&#x800c;&#x63d0;&#x5347;&#x6027;&#x80fd;&#x5462;&#xff1f;&#x8fd9;&#x4e2a;&#x65f6;&#x5019; shouldComponentUpdate &#x767b;&#x573a;&#x4e86;&#xff0c;&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#x662f;&#x7528;&#x6765;&#x63d0;&#x5347;&#x901f;&#x5ea6;&#x7684;&#xff0c;&#x5b83;&#x662f;&#x5728;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x5f00;&#x59cb;&#x524d;&#x89e6;&#x53d1;&#x7684;&#xff0c;&#x9ed8;&#x8ba4;&#x8fd4;&#x56de; <span class=\"hljs-literal\">true</span>&#xff0c;&#x53ef;&#x4ee5;&#x6bd4;&#x8f83; <span class=\"hljs-keyword\">this</span>.props &#x548c; nextProps &#xff0c;<span class=\"hljs-keyword\">this</span>.state &#x548c; nextState &#x503c;&#x662f;&#x5426;&#x53d8;&#x5316;&#xff0c;&#x6765;&#x786e;&#x8ba4;&#x8fd4;&#x56de; <span class=\"hljs-literal\">true</span> &#x6216;&#x8005; <span class=\"hljs-literal\">false</span>&#x3002;&#x5f53;&#x8fd4;&#x56de; <span class=\"hljs-literal\">false</span> &#x65f6;&#xff0c;&#x7ec4;&#x4ef6;&#x7684;&#x66f4;&#x65b0;&#x8fc7;&#x7a0b;&#x505c;&#x6b62;&#xff0c;&#x540e;&#x7eed;&#x7684; render&#x3001;componentDidUpdate &#x4e5f;&#x4e0d;&#x4f1a;&#x88ab;&#x8c03;&#x7528;&#x3002;\n&#x6ce8;&#x610f;&#xff1a; &#x6dfb;&#x52a0; shouldComponentUpdate &#x65b9;&#x6cd5;&#x65f6;&#xff0c;&#x4e0d;&#x5efa;&#x8bae;&#x4f7f;&#x7528;&#x6df1;&#x5ea6;&#x76f8;&#x7b49;&#x68c0;&#x67e5;&#xff08;&#x5982;&#x4f7f;&#x7528; JSON.stringify()&#xff09;&#xff0c;&#x56e0;&#x4e3a;&#x6df1;&#x6bd4;&#x8f83;&#x6548;&#x7387;&#x5f88;&#x4f4e;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x6bd4;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x6548;&#x7387;&#x8fd8;&#x4f4e;&#x3002;&#x800c;&#x4e14;&#x8be5;&#x65b9;&#x6cd5;&#x7ef4;&#x62a4;&#x6bd4;&#x8f83;&#x56f0;&#x96be;&#xff0c;&#x5efa;&#x8bae;&#x4f7f;&#x7528;&#x8be5;&#x65b9;&#x6cd5;&#x4f1a;&#x4ea7;&#x751f;&#x660e;&#x663e;&#x7684;&#x6027;&#x80fd;&#x63d0;&#x5347;&#x65f6;&#x4f7f;&#x7528;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;getSnapshotBeforeUpdate\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;getSnapshotBeforeUpdate(prevProps, prevState)\n\n&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x5728; render &#x4e4b;&#x540e;&#xff0c;componentDidUpdate &#x4e4b;&#x524d;&#x8c03;&#x7528;&#xff0c;&#x6709;&#x4e24;&#x4e2a;&#x53c2;&#x6570; prevProps &#x548c; prevState&#xff0c;&#x8868;&#x793a;&#x66f4;&#x65b0;&#x4e4b;&#x524d;&#x7684; props &#x548c; state&#xff0c;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x5fc5;&#x987b;&#x8981;&#x548c; componentDidUpdate &#x4e00;&#x8d77;&#x4f7f;&#x7528;&#xff0c;&#x5e76;&#x4e14;&#x8981;&#x6709;&#x4e00;&#x4e2a;&#x8fd4;&#x56de;&#x503c;&#xff0c;&#x9ed8;&#x8ba4;&#x662f; <span class=\"hljs-literal\">null</span>&#xff0c;&#x8fd9;&#x4e2a;&#x8fd4;&#x56de;&#x503c;&#x4f5c;&#x4e3a;&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x4f20;&#x7ed9; componentDidUpdate&#x3002;\n&#xff08;<span class=\"hljs-number\">3</span>&#xff09;componentDidUpdate\ncomponentDidUpdate() &#x4f1a;&#x5728;&#x66f4;&#x65b0;&#x540e;&#x4f1a;&#x88ab;&#x7acb;&#x5373;&#x8c03;&#x7528;&#xff0c;&#x9996;&#x6b21;&#x6e32;&#x67d3;&#x4e0d;&#x4f1a;&#x6267;&#x884c;&#x6b64;&#x65b9;&#x6cd5;&#x3002; &#x8be5;&#x9636;&#x6bb5;&#x901a;&#x5e38;&#x8fdb;&#x884c;&#x4ee5;&#x4e0b;&#x64cd;&#x4f5c;&#xff1a;\n\n&#x5f53;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x540e;&#xff0c;&#x5bf9; DOM &#x8fdb;&#x884c;&#x64cd;&#x4f5c;&#xff1b;\n&#x5982;&#x679c;&#x4f60;&#x5bf9;&#x66f4;&#x65b0;&#x524d;&#x540e;&#x7684; props &#x8fdb;&#x884c;&#x4e86;&#x6bd4;&#x8f83;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x9009;&#x62e9;&#x5728;&#x6b64;&#x5904;&#x8fdb;&#x884c;&#x7f51;&#x7edc;&#x8bf7;&#x6c42;&#xff1b;&#xff08;&#x4f8b;&#x5982;&#xff0c;&#x5f53; props &#x672a;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x65f6;&#xff0c;&#x5219;&#x4e0d;&#x4f1a;&#x6267;&#x884c;&#x7f51;&#x7edc;&#x8bf7;&#x6c42;&#xff09;&#x3002;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;componentDidUpdate(prevProps, prevState, snapshot){}\n\n&#x8be5;&#x65b9;&#x6cd5;&#x6709;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#xff1a;\n\nprevProps: &#x66f4;&#x65b0;&#x524d;&#x7684;props\nprevState: &#x66f4;&#x65b0;&#x524d;&#x7684;state\nsnapshot: getSnapshotBeforeUpdate()&#x751f;&#x547d;&#x5468;&#x671f;&#x7684;&#x8fd4;&#x56de;&#x503c;\n\n<span class=\"hljs-number\">3</span>&#xff09;&#x7ec4;&#x4ef6;&#x5378;&#x8f7d;&#x9636;&#x6bb5;\n&#x5378;&#x8f7d;&#x9636;&#x6bb5;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#xff0c;componentWillUnmount() &#x4f1a;&#x5728;&#x7ec4;&#x4ef6;&#x5378;&#x8f7d;&#x53ca;&#x9500;&#x6bc1;&#x4e4b;&#x524d;&#x76f4;&#x63a5;&#x8c03;&#x7528;&#x3002;&#x5728;&#x6b64;&#x65b9;&#x6cd5;&#x4e2d;&#x6267;&#x884c;&#x5fc5;&#x8981;&#x7684;&#x6e05;&#x7406;&#x64cd;&#x4f5c;&#xff1a;\n\n&#x6e05;&#x9664; timer&#xff0c;&#x53d6;&#x6d88;&#x7f51;&#x7edc;&#x8bf7;&#x6c42;&#x6216;&#x6e05;&#x9664;\n&#x53d6;&#x6d88;&#x5728; componentDidMount() &#x4e2d;&#x521b;&#x5efa;&#x7684;&#x8ba2;&#x9605;&#x7b49;&#xff1b;\n\n&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x5728;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x88ab;&#x5378;&#x8f7d;&#x548c;&#x9500;&#x6bc1;&#x4e4b;&#x524d;&#x88ab;&#x8c03;&#x7528;&#xff0c;&#x56e0;&#x6b64;&#x4f60;&#x4e0d;&#x5e94;&#x8be5;&#x518d;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x4e2d;&#x4f7f;&#x7528; setState&#xff0c;&#x56e0;&#x4e3a;&#x7ec4;&#x4ef6;&#x4e00;&#x65e6;&#x88ab;&#x5378;&#x8f7d;&#xff0c;&#x5c31;&#x4e0d;&#x4f1a;&#x518d;&#x88c5;&#x8f7d;&#xff0c;&#x4e5f;&#x5c31;&#x4e0d;&#x4f1a;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;\n<span class=\"hljs-number\">4</span>&#xff09;&#x9519;&#x8bef;&#x5904;&#x7406;&#x9636;&#x6bb5;\ncomponentDidCatch(error, info)&#xff0c;&#x6b64;&#x751f;&#x547d;&#x5468;&#x671f;&#x5728;&#x540e;&#x4ee3;&#x7ec4;&#x4ef6;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x540e;&#x88ab;&#x8c03;&#x7528;&#x3002; &#x5b83;&#x63a5;&#x6536;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x2236;\n\nerror&#xff1a;&#x629b;&#x51fa;&#x7684;&#x9519;&#x8bef;&#x3002;\ninfo&#xff1a;&#x5e26;&#x6709; componentStack key &#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x5176;&#x4e2d;&#x5305;&#x542b;&#x6709;&#x5173;&#x7ec4;&#x4ef6;&#x5f15;&#x53d1;&#x9519;&#x8bef;&#x7684;&#x6808;&#x4fe1;&#x606f;\n\nReact&#x5e38;&#x89c1;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5982;&#x4e0b;&#xff1a;\n\nReact&#x5e38;&#x89c1;&#x751f;&#x547d;&#x5468;&#x671f;&#x7684;&#x8fc7;&#x7a0b;&#x5927;&#x81f4;&#x5982;&#x4e0b;&#xff1a;\n\n&#x6302;&#x8f7d;&#x9636;&#x6bb5;&#xff0c;&#x9996;&#x5148;&#x6267;&#x884c;<span class=\"hljs-keyword\">constructor</span>&#x6784;&#x9020;&#x65b9;&#x6cd5;&#xff0c;&#x6765;&#x521b;&#x5efa;&#x7ec4;&#x4ef6;\n&#x521b;&#x5efa;&#x5b8c;&#x6210;&#x4e4b;&#x540e;&#xff0c;&#x5c31;&#x4f1a;&#x6267;&#x884c;render&#x65b9;&#x6cd5;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x4f1a;&#x8fd4;&#x56de;&#x9700;&#x8981;&#x6e32;&#x67d3;&#x7684;&#x5185;&#x5bb9;\n&#x968f;&#x540e;&#xff0c;React&#x4f1a;&#x5c06;&#x9700;&#x8981;&#x6e32;&#x67d3;&#x7684;&#x5185;&#x5bb9;&#x6302;&#x8f7d;&#x5230;DOM&#x6811;&#x4e0a;\n&#x6302;&#x8f7d;&#x5b8c;&#x6210;&#x4e4b;&#x540e;&#x5c31;&#x4f1a;&#x6267;&#x884c;componentDidMount&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;\n&#x5982;&#x679c;&#x6211;&#x4eec;&#x7ed9;&#x7ec4;&#x4ef6;&#x521b;&#x5efa;&#x4e00;&#x4e2a;props&#xff08;&#x7528;&#x4e8e;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#xff09;&#x3001;&#x8c03;&#x7528;setState&#xff08;&#x66f4;&#x6539;state&#x4e2d;&#x7684;&#x6570;&#x636e;&#xff09;&#x3001;&#x8c03;&#x7528;forceUpdate&#xff08;&#x5f3a;&#x5236;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#xff09;&#x65f6;&#xff0c;&#x90fd;&#x4f1a;&#x91cd;&#x65b0;&#x8c03;&#x7528;render&#x51fd;&#x6570;\nrender&#x51fd;&#x6570;&#x91cd;&#x65b0;&#x6267;&#x884c;&#x4e4b;&#x540e;&#xff0c;&#x5c31;&#x4f1a;&#x91cd;&#x65b0;&#x8fdb;&#x884c;DOM&#x6811;&#x7684;&#x6302;&#x8f7d;\n&#x6302;&#x8f7d;&#x5b8c;&#x6210;&#x4e4b;&#x540e;&#x5c31;&#x4f1a;&#x6267;&#x884c;componentDidUpdate&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;\n&#x5f53;&#x79fb;&#x9664;&#x7ec4;&#x4ef6;&#x65f6;&#xff0c;&#x5c31;&#x4f1a;&#x6267;&#x884c;componentWillUnmount&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;\n\nReact&#x4e3b;&#x8981;&#x751f;&#x547d;&#x5468;&#x671f;&#x603b;&#x7ed3;&#xff1a;\n\ngetDefaultProps&#xff1a;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x4f1a;&#x5728;&#x7ec4;&#x4ef6;&#x521b;&#x5efa;&#x4e4b;&#x524d;&#x88ab;&#x8c03;&#x7528;&#x4e00;&#x6b21;&#xff08;&#x6709;&#x4e14;&#x4ec5;&#x6709;&#x4e00;&#x6b21;&#xff09;&#xff0c;&#x5b83;&#x88ab;&#x7528;&#x6765;&#x521d;&#x59cb;&#x5316;&#x7ec4;&#x4ef6;&#x7684; Props&#xff1b;\ngetInitialState&#xff1a;&#x7528;&#x4e8e;&#x521d;&#x59cb;&#x5316;&#x7ec4;&#x4ef6;&#x7684; state &#x503c;&#xff1b;\ncomponentWillMount&#xff1a;&#x5728;&#x7ec4;&#x4ef6;&#x521b;&#x5efa;&#x540e;&#x3001;render &#x4e4b;&#x524d;&#xff0c;&#x4f1a;&#x8d70;&#x5230; componentWillMount &#x9636;&#x6bb5;&#x3002;&#x8fd9;&#x4e2a;&#x9636;&#x6bb5;&#x6211;&#x4e2a;&#x4eba;&#x4e00;&#x76f4;&#x6ca1;&#x7528;&#x8fc7;&#x3001;&#x975e;&#x5e38;&#x9e21;&#x808b;&#x3002;&#x540e;&#x6765;React &#x5b98;&#x65b9;&#x5df2;&#x7ecf;&#x4e0d;&#x63a8;&#x8350;&#x5927;&#x5bb6;&#x5728; componentWillMount &#x91cc;&#x505a;&#x4efb;&#x4f55;&#x4e8b;&#x60c5;&#x3001;&#x5230;&#x73b0;&#x5728; React16 &#x76f4;&#x63a5;&#x5e9f;&#x5f03;&#x4e86;&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#xff0c;&#x8db3;&#x89c1;&#x5176;&#x9e21;&#x808b;&#x7a0b;&#x5ea6;&#x4e86;&#xff1b;\nrender&#xff1a;&#x8fd9;&#x662f;&#x6240;&#x6709;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e2d;&#x552f;&#x4e00;&#x4e00;&#x4e2a;&#x4f60;&#x5fc5;&#x987b;&#x8981;&#x5b9e;&#x73b0;&#x7684;&#x65b9;&#x6cd5;&#x3002;&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x9700;&#x8981;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; jsx &#x5143;&#x7d20;&#xff0c;&#x8fd9;&#x65f6; React &#x4f1a;&#x6839;&#x636e; props &#x548c; state &#x6765;&#x628a;&#x7ec4;&#x4ef6;&#x6e32;&#x67d3;&#x5230;&#x754c;&#x9762;&#x4e0a;&#xff1b;&#x4e0d;&#x8fc7;&#x6709;&#x65f6;&#xff0c;&#x4f60;&#x53ef;&#x80fd;&#x4e0d;&#x60f3;&#x6e32;&#x67d3;&#x4efb;&#x4f55;&#x4e1c;&#x897f;&#xff0c;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#x8ba9;&#x5b83;&#x8fd4;&#x56de; <span class=\"hljs-literal\">null</span> &#x6216;&#x8005; <span class=\"hljs-literal\">false</span> &#x5373;&#x53ef;&#xff1b;\ncomponentDidMount&#xff1a;&#x4f1a;&#x5728;&#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#x540e;&#xff08;&#x63d2;&#x5165; DOM &#x6811;&#x4e2d;&#x540e;&#xff09;&#x7acb;&#x5373;&#x8c03;&#x7528;&#xff0c;&#x6807;&#x5fd7;&#x7740;&#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#x5b8c;&#x6210;&#x3002;&#x4e00;&#x4e9b;&#x64cd;&#x4f5c;&#x5982;&#x679c;&#x4f9d;&#x8d56;&#x83b7;&#x53d6;&#x5230; DOM &#x8282;&#x70b9;&#x4fe1;&#x606f;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x4f1a;&#x653e;&#x5728;&#x8fd9;&#x4e2a;&#x9636;&#x6bb5;&#x6765;&#x505a;&#x3002;&#x6b64;&#x5916;&#xff0c;&#x8fd9;&#x8fd8;&#x662f; React &#x5b98;&#x65b9;&#x63a8;&#x8350;&#x7684;&#x53d1;&#x8d77; ajax &#x8bf7;&#x6c42;&#x7684;&#x65f6;&#x673a;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x548c; componentWillMount &#x4e00;&#x6837;&#xff0c;&#x6709;&#x4e14;&#x4ec5;&#x6709;&#x4e00;&#x6b21;&#x8c03;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1342,1559"}},{"content":"<pre data-lines=\"1560,1609\"><code data-lines=\"1560,1609\">&#x88ab;&#x5e9f;&#x5f03;&#x7684;&#x4e09;&#x4e2a;&#x51fd;&#x6570;&#x90fd;&#x662f;&#x5728;render&#x4e4b;&#x524d;&#xff0c;&#x56e0;&#x4e3a;fber&#x7684;&#x51fa;&#x73b0;&#xff0c;&#x5f88;&#x53ef;&#x80fd;&#x56e0;&#x4e3a;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x4efb;&#x52a1;&#x7684;&#x51fa;&#x73b0;&#x800c;&#x6253;&#x65ad;&#x73b0;&#x6709;&#x4efb;&#x52a1;&#x5bfc;&#x81f4;&#x5b83;&#x4eec;&#x4f1a;&#x88ab;&#x6267;&#x884c;&#x591a;&#x6b21;&#x3002;&#x53e6;&#x5916;&#x7684;&#x4e00;&#x4e2a;&#x539f;&#x56e0;&#x5219;&#x662f;&#xff0c;React&#x60f3;&#x7ea6;&#x675f;&#x4f7f;&#x7528;&#x8005;&#xff0c;&#x597d;&#x7684;&#x6846;&#x67b6;&#x80fd;&#x591f;&#x8ba9;&#x4eba;&#x4e0d;&#x5f97;&#x5df2;&#x5199;&#x51fa;&#x5bb9;&#x6613;&#x7ef4;&#x62a4;&#x548c;&#x6269;&#x5c55;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x8fd9;&#x4e00;&#x70b9;&#x53c8;&#x662f;&#x4ece;&#x4f55;&#x8c08;&#x8d77;&#xff0c;&#x53ef;&#x4ee5;&#x4ece;&#x65b0;&#x589e;&#x52a0;&#x4ee5;&#x53ca;&#x5373;&#x5c06;&#x5e9f;&#x5f03;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5206;&#x6790;&#x5165;&#x624b;\n<span class=\"hljs-number\">1</span>) componentWillMount\n&#x9996;&#x5148;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x7684;&#x529f;&#x80fd;&#x5b8c;&#x5168;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;componentDidMount&#x548c; <span class=\"hljs-keyword\">constructor</span>&#x6765;&#x4ee3;&#x66ff;&#xff0c;&#x5f02;&#x6b65;&#x83b7;&#x53d6;&#x7684;&#x6570;&#x636e;&#x7684;&#x60c5;&#x51b5;&#x4e0a;&#x9762;&#x5df2;&#x7ecf;&#x8bf4;&#x660e;&#x4e86;&#xff0c;&#x800c;&#x5982;&#x679c;&#x629b;&#x53bb;&#x5f02;&#x6b65;&#x83b7;&#x53d6;&#x6570;&#x636e;&#xff0c;&#x5176;&#x4f59;&#x7684;&#x5373;&#x662f;&#x521d;&#x59cb;&#x5316;&#x800c;&#x5df2;&#xff0c;&#x8fd9;&#x4e9b;&#x529f;&#x80fd;&#x90fd;&#x53ef;&#x4ee5;&#x5728;<span class=\"hljs-keyword\">constructor</span>&#x4e2d;&#x6267;&#x884c;&#xff0c;&#x9664;&#x6b64;&#x4e4b;&#x5916;&#xff0c;&#x5982;&#x679c;&#x5728; willMount &#x4e2d;&#x8ba2;&#x9605;&#x4e8b;&#x4ef6;&#xff0c;&#x4f46;&#x5728;&#x670d;&#x52a1;&#x7aef;&#x8fd9;&#x5e76;&#x4e0d;&#x4f1a;&#x6267;&#x884c; willUnMount&#x4e8b;&#x4ef6;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x670d;&#x52a1;&#x7aef;&#x4f1a;&#x5bfc;&#x81f4;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x6240;&#x4ee5;componentWilIMount&#x5b8c;&#x5168;&#x53ef;&#x4ee5;&#x4e0d;&#x4f7f;&#x7528;&#xff0c;&#x4f46;&#x4f7f;&#x7528;&#x8005;&#x6709;&#x65f6;&#x5019;&#x96be;&#x514d;&#x56e0;&#x4e3a;&#x5404; &#x79cd;&#x5404;&#x6837;&#x7684;&#x60c5;&#x51b5;&#x5728; componentWilMount&#x4e2d;&#x505a;&#x4e00;&#x4e9b;&#x64cd;&#x4f5c;&#xff0c;&#x90a3;&#x4e48;React&#x4e3a;&#x4e86;&#x7ea6;&#x675f;&#x5f00;&#x53d1;&#x8005;&#xff0c;&#x5e72;&#x8106;&#x5c31;&#x629b;&#x6389;&#x4e86;&#x8fd9;&#x4e2a;API\n<span class=\"hljs-number\">2</span>) componentWillReceiveProps\n&#x5728;&#x8001;&#x7248;&#x672c;&#x7684; React &#x4e2d;&#xff0c;&#x5982;&#x679c;&#x7ec4;&#x4ef6;&#x81ea;&#x8eab;&#x7684;&#x67d0;&#x4e2a; state &#x8ddf;&#x5176; props &#x5bc6;&#x5207;&#x76f8;&#x5173;&#x7684;&#x8bdd;&#xff0c;&#x4e00;&#x76f4;&#x90fd;&#x6ca1;&#x6709;&#x4e00;&#x79cd;&#x5f88;&#x4f18;&#x96c5;&#x7684;&#x5904;&#x7406;&#x65b9;&#x5f0f;&#x53bb;&#x66f4;&#x65b0; state&#xff0c;&#x800c;&#x662f;&#x9700;&#x8981;&#x5728; componentWilReceiveProps &#x4e2d;&#x5224;&#x65ad;&#x524d;&#x540e;&#x4e24;&#x4e2a; props &#x662f;&#x5426;&#x76f8;&#x540c;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x540c;&#x518d;&#x5c06;&#x65b0;&#x7684; props&#x66f4;&#x65b0;&#x5230;&#x76f8;&#x5e94;&#x7684; state &#x4e0a;&#x53bb;&#x3002;&#x8fd9;&#x6837;&#x505a;&#x4e00;&#x6765;&#x4f1a;&#x7834;&#x574f; state &#x6570;&#x636e;&#x7684;&#x5355;&#x4e00;&#x6570;&#x636e;&#x6e90;&#xff0c;&#x5bfc;&#x81f4;&#x7ec4;&#x4ef6;&#x72b6;&#x6001;&#x53d8;&#x5f97;&#x4e0d;&#x53ef;&#x9884;&#x6d4b;&#xff0c;&#x53e6;&#x4e00;&#x65b9;&#x9762;&#x4e5f;&#x4f1a;&#x589e;&#x52a0;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x7ed8;&#x6b21;&#x6570;&#x3002;&#x7c7b;&#x4f3c;&#x7684;&#x4e1a;&#x52a1;&#x9700;&#x6c42;&#x4e5f;&#x6709;&#x5f88;&#x591a;&#xff0c;&#x5982;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x6a2a;&#x5411;&#x6ed1;&#x52a8;&#x7684;&#x5217;&#x8868;&#xff0c;&#x5f53;&#x524d;&#x9ad8;&#x4eae;&#x7684; Tab &#x663e;&#x7136;&#x96b6;&#x5c5e;&#x4e8e;&#x5217;&#x8868;&#x81ea;&#x8eab;&#x7684;&#x65f6;&#xff0c;&#x6839;&#x636e;&#x4f20;&#x5165;&#x7684;&#x67d0;&#x4e2a;&#x503c;&#xff0c;&#x76f4;&#x63a5;&#x5b9a;&#x4f4d;&#x5230;&#x67d0;&#x4e2a; Tab&#x3002;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x8fd9;&#x4e9b;&#x95ee;&#x9898;&#xff0c;React&#x5f15;&#x5165;&#x4e86;&#x7b2c;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1a;getDerivedStateFromProps&#x3002;&#x5b83;&#x6709;&#x4ee5;&#x4e0b;&#x7684;&#x4f18;&#x70b9;&#x2236;\n\ngetDSFP&#x662f;&#x9759;&#x6001;&#x65b9;&#x6cd5;&#xff0c;&#x5728;&#x8fd9;&#x91cc;&#x4e0d;&#x80fd;&#x4f7f;&#x7528;<span class=\"hljs-keyword\">this</span>&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x7eaf;&#x51fd;&#x6570;&#xff0c;&#x5f00;&#x53d1;&#x8005;&#x4e0d;&#x80fd;&#x5199;&#x51fa;&#x526f;&#x4f5c;&#x7528;&#x7684;&#x4ee3;&#x7801;\n&#x5f00;&#x53d1;&#x8005;&#x53ea;&#x80fd;&#x901a;&#x8fc7;prevState&#x800c;&#x4e0d;&#x662f;prevProps&#x6765;&#x505a;&#x5bf9;&#x6bd4;&#xff0c;&#x4fdd;&#x8bc1;&#x4e86;state&#x548c;props&#x4e4b;&#x95f4;&#x7684;&#x7b80;&#x5355;&#x5173;&#x7cfb;&#x4ee5;&#x53ca;&#x4e0d;&#x9700;&#x8981;&#x5904;&#x7406;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#x65f6;prevProps&#x4e3a;&#x7a7a;&#x7684;&#x60c5;&#x51b5;\n&#x57fa;&#x4e8e;&#x7b2c;&#x4e00;&#x70b9;&#xff0c;&#x5c06;&#x72b6;&#x6001;&#x53d8;&#x5316;&#xff08;setState&#xff09;&#x548c;&#x6602;&#x8d35;&#x64cd;&#x4f5c;&#xff08;tabChange&#xff09;&#x533a;&#x5206;&#x5f00;&#xff0c;&#x66f4;&#x52a0;&#x4fbf;&#x4e8e; render &#x548c; commit &#x9636;&#x6bb5;&#x64cd;&#x4f5c;&#x6216;&#x8005;&#x8bf4;&#x4f18;&#x5316;&#x3002;\n\n<span class=\"hljs-number\">3</span>) componentWillUpdate\n&#x4e0e; componentWillReceiveProps &#x7c7b;&#x4f3c;&#xff0c;&#x8bb8;&#x591a;&#x5f00;&#x53d1;&#x8005;&#x4e5f;&#x4f1a;&#x5728; componentWillUpdate &#x4e2d;&#x6839;&#x636e; props &#x7684;&#x53d8;&#x5316;&#x53bb;&#x89e6;&#x53d1;&#x4e00;&#x4e9b;&#x56de;&#x8c03; &#x3002; &#x4f46;&#x4e0d;&#x8bba;&#x662f; componentWilReceiveProps &#x8fd8; &#x662f; componentWilUpdate&#xff0c;&#x90fd;&#x6709;&#x53ef;&#x80fd;&#x5728;&#x4e00;&#x6b21;&#x66f4;&#x65b0;&#x4e2d;&#x88ab;&#x8c03;&#x7528;&#x591a;&#x6b21;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x5199;&#x5728;&#x8fd9;&#x91cc;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e5f;&#x6709;&#x53ef;&#x80fd;&#x4f1a;&#x88ab;&#x8c03;&#x7528;&#x591a;&#x6b21;&#xff0c;&#x8fd9;&#x663e;&#x7136;&#x662f;&#x4e0d;&#x53ef;&#x53d6;&#x7684;&#x3002;&#x4e0e; componentDidMount &#x7c7b; &#x4f3c;&#xff0c; componentDidUpdate &#x4e5f;&#x4e0d;&#x5b58;&#x5728;&#x8fd9;&#x6837;&#x7684;&#x95ee;&#x9898;&#xff0c;&#x4e00;&#x6b21;&#x66f4;&#x65b0;&#x4e2d; componentDidUpdate &#x53ea;&#x4f1a;&#x88ab;&#x8c03;&#x7528;&#x4e00;&#x6b21;&#xff0c;&#x6240;&#x4ee5;&#x5c06;&#x539f;&#x5148;&#x5199;&#x5728; componentWillUpdate &#x4e2d; &#x7684; &#x56de; &#x8c03; &#x8fc1; &#x79fb; &#x81f3; componentDidUpdate &#x5c31;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x3002;\n&#x53e6;&#x5916;&#x4e00;&#x79cd;&#x60c5;&#x51b5;&#x5219;&#x662f;&#x9700;&#x8981;&#x83b7;&#x53d6;DOM&#x5143;&#x7d20;&#x72b6;&#x6001;&#xff0c;&#x4f46;&#x662f;&#x7531;&#x4e8e;&#x5728;fber&#x4e2d;&#xff0c;render&#x53ef;&#x6253;&#x65ad;&#xff0c;&#x53ef;&#x80fd;&#x5728;wilMount&#x4e2d;&#x83b7;&#x53d6;&#x5230;&#x7684;&#x5143;&#x7d20;&#x72b6;&#x6001;&#x5f88;&#x53ef;&#x80fd;&#x4e0e;&#x5b9e;&#x9645;&#x9700;&#x8981;&#x7684;&#x4e0d;&#x540c;&#xff0c;&#x8fd9;&#x4e2a;&#x901a;&#x5e38;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x7b2c;&#x4e8c;&#x4e2a;&#x65b0;&#x589e;&#x7684;&#x751f;&#x547d;&#x51fd;&#x6570;&#x7684;&#x89e3;&#x51b3; getSnapshotBeforeUpdate(prevProps, prevState)\n<span class=\"hljs-number\">4</span>) getSnapshotBeforeUpdate(prevProps, prevState)\n&#x8fd4;&#x56de;&#x7684;&#x503c;&#x4f5c;&#x4e3a;componentDidUpdate&#x7684;&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x3002;&#x4e0e;willMount&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;getSnapshotBeforeUpdate&#x4f1a;&#x5728;&#x6700;&#x7ec8;&#x786e;&#x5b9a;&#x7684;render&#x6267;&#x884c;&#x4e4b;&#x524d;&#x6267;&#x884c;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x80fd;&#x4fdd;&#x8bc1;&#x5176;&#x83b7;&#x53d6;&#x5230;&#x7684;&#x5143;&#x7d20;&#x72b6;&#x6001;&#x4e0e;didUpdate&#x4e2d;&#x83b7;&#x53d6;&#x5230;&#x7684;&#x5143;&#x7d20;&#x72b6;&#x6001;&#x76f8;&#x540c;&#x3002;&#x5b98;&#x65b9;&#x53c2;&#x8003;&#x4ee3;&#x7801;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ScrollingList</span> <span class=\"hljs-title\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> {\n  <span class=\"hljs-keyword\">constructor</span>(props) {\n    <span class=\"hljs-keyword\">super</span>(props);\n    <span class=\"hljs-keyword\">this</span>.listRef = React.createRef();\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    <span class=\"hljs-comment\">// &#x6211;&#x4eec;&#x662f;&#x5426;&#x5728; list &#x4e2d;&#x6dfb;&#x52a0;&#x65b0;&#x7684; items &#xff1f;</span>\n    <span class=\"hljs-comment\">// &#x6355;&#x83b7;&#x6eda;&#x52a8;&#x200b;&#x200b;&#x4f4d;&#x7f6e;&#x4ee5;&#x4fbf;&#x6211;&#x4eec;&#x7a0d;&#x540e;&#x8c03;&#x6574;&#x6eda;&#x52a8;&#x4f4d;&#x7f6e;&#x3002;</span>\n    <span class=\"hljs-keyword\">if</span> (prevProps.list.length &lt; <span class=\"hljs-keyword\">this</span>.props.list.length) {\n      <span class=\"hljs-keyword\">const</span> list = <span class=\"hljs-keyword\">this</span>.listRef.current;\n      <span class=\"hljs-keyword\">return</span> list.scrollHeight - list.scrollTop;\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x6211;&#x4eec; snapshot &#x6709;&#x503c;&#xff0c;&#x8bf4;&#x660e;&#x6211;&#x4eec;&#x521a;&#x521a;&#x6dfb;&#x52a0;&#x4e86;&#x65b0;&#x7684; items&#xff0c;</span>\n    <span class=\"hljs-comment\">// &#x8c03;&#x6574;&#x6eda;&#x52a8;&#x4f4d;&#x7f6e;&#x4f7f;&#x5f97;&#x8fd9;&#x4e9b;&#x65b0; items &#x4e0d;&#x4f1a;&#x5c06;&#x65e7;&#x7684; items &#x63a8;&#x51fa;&#x89c6;&#x56fe;&#x3002;</span>\n    <span class=\"hljs-comment\">//&#xff08;&#x8fd9;&#x91cc;&#x7684; snapshot &#x662f; getSnapshotBeforeUpdate &#x7684;&#x8fd4;&#x56de;&#x503c;&#xff09;</span>\n    <span class=\"hljs-keyword\">if</span> (snapshot !== <span class=\"hljs-literal\">null</span>) {\n      <span class=\"hljs-keyword\">const</span> list = <span class=\"hljs-keyword\">this</span>.listRef.current;\n      list.scrollTop = list.scrollHeight - snapshot;\n    }\n  }\n\n  render() {\n    <span class=\"hljs-keyword\">return</span> (\n      &lt;div ref={<span class=\"hljs-keyword\">this</span>.listRef}&gt;{<span class=\"hljs-comment\">/* ...contents... */</span>}&lt;/div&gt;\n    );\n  }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1560,1609"}},{"content":"<pre data-lines=\"1610,1627\"><code data-lines=\"1610,1627\">&#x5728;getDerivedStateFromProps&#x4e2d;&#x8fdb;&#x884c;&#x5904;&#x7406;&#x3002;\n&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#x662f;&#x4e3a;&#x4e86;&#x66ff;&#x4ee3;componentWillReceiveProps&#x5b58;&#x5728;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5728;&#x9700;&#x8981;&#x4f7f;&#x7528;componentWillReceiveProps&#x65f6;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x8003;&#x8651;&#x4f7f;&#x7528;getDerivedStateFromProps&#x6765;&#x8fdb;&#x884c;&#x66ff;&#x4ee3;&#x3002;\n&#x4e24;&#x8005;&#x7684;&#x53c2;&#x6570;&#x662f;&#x4e0d;&#x76f8;&#x540c;&#x7684;&#xff0c;&#x800c;getDerivedStateFromProps&#x662f;&#x4e00;&#x4e2a;&#x9759;&#x6001;&#x51fd;&#x6570;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x4e0d;&#x80fd;&#x901a;&#x8fc7;<span class=\"hljs-keyword\">this</span>&#x8bbf;&#x95ee;&#x5230;<span class=\"hljs-keyword\">class</span>&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4e5f;&#x5e76;&#x4e0d;&#x63a8;&#x8350;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;&#x5c5e;&#x6027;&#x3002;&#x800c;&#x662f;&#x5e94;&#x8be5;&#x901a;&#x8fc7;&#x53c2;&#x6570;&#x63d0;&#x4f9b;&#x7684;<span class=\"hljs-symbol\">nextProps</span>&#x4ee5;&#x53ca;<span class=\"hljs-symbol\">prevState</span>&#x6765;&#x8fdb;&#x884c;&#x5224;&#x65ad;&#xff0c;&#x6839;&#x636e;&#x65b0;&#x4f20;&#x5165;&#x7684;<span class=\"hljs-symbol\">props</span>&#x6765;&#x6620;&#x5c04;&#x5230;<span class=\"hljs-symbol\">state</span>&#x3002;\n&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x5982;&#x679c;<span class=\"hljs-symbol\">props</span>&#x4f20;&#x5165;&#x7684;&#x5185;&#x5bb9;&#x4e0d;&#x9700;&#x8981;&#x5f71;&#x54cd;&#x5230;&#x4f60;&#x7684;<span class=\"hljs-symbol\">state</span>&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x9700;&#x8981;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;<span class=\"hljs-symbol\">null</span>&#xff0c;&#x8fd9;&#x4e2a;&#x8fd4;&#x56de;&#x503c;&#x662f;&#x5fc5;&#x987b;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5c3d;&#x91cf;&#x5c06;&#x5176;&#x5199;&#x5230;&#x51fd;&#x6570;&#x7684;&#x672b;&#x5c3e;&#xff1a;\n<span class=\"hljs-symbol\">javascript</span> &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-symbol\">static</span> <span class=\"hljs-symbol\">getDerivedStateFromProps</span>(<span class=\"hljs-symbol\">nextProps, <span class=\"hljs-symbol\">prevState</span></span>) {\n    <span class=\"hljs-keyword\">const</span> {type} = nextProps;\n    <span class=\"hljs-comment\">// &#x5f53;&#x4f20;&#x5165;&#x7684;type&#x53d1;&#x751f;&#x53d8;&#x5316;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x66f4;&#x65b0;state</span>\n    <span class=\"hljs-keyword\">if</span> (type !== prevState.type) {\n        <span class=\"hljs-keyword\">return</span> {\n            type,\n        };\n    }\n    <span class=\"hljs-comment\">// &#x5426;&#x5219;&#xff0c;&#x5bf9;&#x4e8e;state&#x4e0d;&#x8fdb;&#x884c;&#x4efb;&#x4f55;&#x64cd;&#x4f5c;</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1610,1627"}},{"content":"<pre data-lines=\"1628,1655\"><code data-lines=\"1628,1655\">react&#x7684;&#x7236;&#x7ea7;&#x7ec4;&#x4ef6;&#x7684;render&#x51fd;&#x6570;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x4f1a;&#x5f15;&#x8d77;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;render&#x65b9;&#x6cd5;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x6709;&#x7684;&#x65f6;&#x5019;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x63a5;&#x53d7;&#x7236;&#x7ec4;&#x4ef6;&#x7684;&#x6570;&#x636e;&#x6ca1;&#x6709;&#x53d8;&#x52a8;&#x3002;&#x5b50;&#x7ec4;&#x4ef6;render&#x7684;&#x6267;&#x884c;&#x4f1a;&#x5f71;&#x54cd;&#x6027;&#x80fd;&#xff0c;&#x8fd9;&#x65f6;&#x5c31;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;shouldComponentUpdate&#x6765;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x3002;\n&#x4f7f;&#x7528;&#x65b9;&#x6cd5;&#x5982;&#x4e0b;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-title function_\">shouldComponentUpdate</span>(<span class=\"hljs-params\">nexrProps</span>) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">props</span>.<span class=\"hljs-property\">num</span> === nexrProps.<span class=\"hljs-property\">num</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n}\n\nshouldComponentUpdate&#x63d0;&#x4f9b;&#x4e86;&#x4e24;&#x4e2a;&#x53c2;&#x6570;nextProps&#x548c;nextState&#xff0c;&#x8868;&#x793a;&#x4e0b;&#x4e00;&#x6b21;props&#x548c;&#x4e00;&#x6b21;state&#x7684;&#x503c;&#xff0c;&#x5f53;&#x51fd;&#x6570;&#x8fd4;&#x56de;<span class=\"hljs-literal\">false</span>&#x65f6;&#x5019;&#xff0c;<span class=\"hljs-title function_\">render</span>()&#x65b9;&#x6cd5;&#x4e0d;&#x6267;&#x884c;&#xff0c;&#x7ec4;&#x4ef6;&#x4e5f;&#x5c31;&#x4e0d;&#x4f1a;&#x6e32;&#x67d3;&#xff0c;&#x8fd4;&#x56de;<span class=\"hljs-literal\">true</span>&#x65f6;&#xff0c;&#x7ec4;&#x4ef6;&#x7167;&#x5e38;&#x91cd;&#x6e32;&#x67d3;&#x3002;&#x6b64;&#x65b9;&#x6cd5;&#x5c31;&#x662f;&#x62ff;&#x5f53;&#x524d;props&#x4e2d;&#x503c;&#x548c;&#x4e0b;&#x4e00;&#x6b21;props&#x4e2d;&#x7684;&#x503c;&#x8fdb;&#x884c;&#x5bf9;&#x6bd4;&#xff0c;&#x6570;&#x636e;&#x76f8;&#x7b49;&#x65f6;&#xff0c;&#x8fd4;&#x56de;<span class=\"hljs-literal\">false</span>&#xff0c;&#x53cd;&#x4e4b;&#x8fd4;&#x56de;<span class=\"hljs-literal\">true</span>&#x3002;\n&#x9700;&#x8981;&#x6ce8;&#x610f;&#xff0c;&#x5728;&#x8fdb;&#x884c;&#x65b0;&#x65e7;&#x5bf9;&#x6bd4;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x662f;**&#x6d45;&#x5bf9;&#x6bd4;&#xff0c;**&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x5982;&#x679c;&#x6bd4;&#x8f83;&#x7684;&#x6570;&#x636e;&#x65f6;&#x5f15;&#x7528;&#x6570;&#x636e;&#x7c7b;&#x578b;&#xff0c;&#x53ea;&#x8981;&#x6570;&#x636e;&#x7684;&#x5f15;&#x7528;&#x7684;&#x5730;&#x5740;&#x6ca1;&#x53d8;&#xff0c;&#x5373;&#x4f7f;&#x5185;&#x5bb9;&#x53d8;&#x4e86;&#xff0c;&#x4e5f;&#x4f1a;&#x88ab;&#x5224;&#x5b9a;&#x4e3a;<span class=\"hljs-literal\">true</span>&#x3002;\n&#x9762;&#x5bf9;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x5982;&#x4e0b;&#x65b9;&#x6cd5;&#x8fdb;&#x884c;&#x89e3;&#x51b3;&#xff1a;\n&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x4f7f;&#x7528;setState&#x6539;&#x53d8;&#x6570;&#x636e;&#x4e4b;&#x524d;&#xff0c;&#x5148;&#x91c7;&#x7528;<span class=\"hljs-title class_\">ES6</span>&#x4e2d;assgin&#x8fdb;&#x884c;&#x62f7;&#x8d1d;&#xff0c;&#x4f46;&#x662f;assgin&#x53ea;&#x6df1;&#x62f7;&#x8d1d;&#x7684;&#x6570;&#x636e;&#x7684;&#x7b2c;&#x4e00;&#x5c42;&#xff0c;&#x6240;&#x4ee5;&#x8bf4;&#x4e0d;&#x662f;&#x6700;&#x5b8c;&#x7f8e;&#x7684;&#x89e3;&#x51b3;&#x529e;&#x6cd5;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">const</span> o2 = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">assign</span>({},<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span>.<span class=\"hljs-property\">obj</span>)\n    o2.<span class=\"hljs-property\">student</span>.<span class=\"hljs-property\">count</span> = <span class=\"hljs-string\">&apos;00000&apos;</span>;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setState</span>({\n        <span class=\"hljs-attr\">obj</span>: o2,\n    })\n\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;&#x4f7f;&#x7528;<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringfy</span>())&#x8fdb;&#x884c;&#x6df1;&#x62f7;&#x8d1d;&#xff0c;&#x4f46;&#x662f;&#x9047;&#x5230;&#x6570;&#x636e;&#x4e3a;<span class=\"hljs-literal\">undefined</span>&#x548c;&#x51fd;&#x6570;&#x65f6;&#x5c31;&#x4f1a;&#x9519;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">const</span> o2 = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span>.<span class=\"hljs-property\">obj</span>))\n    o2.<span class=\"hljs-property\">student</span>.<span class=\"hljs-property\">count</span> = <span class=\"hljs-string\">&apos;00000&apos;</span>;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setState</span>({\n        <span class=\"hljs-attr\">obj</span>: o2,\n    })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1628,1655"}},{"content":"<pre data-lines=\"1656,1677\"><code data-lines=\"1656,1677\"><span class=\"hljs-keyword\">state</span> &#x66f4;&#x65b0;&#x6d41;&#x7a0b;&#xff1a;\n\n&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x5f53;&#x4e2d;&#x6d89;&#x53ca;&#x7684;&#x51fd;&#x6570;&#xff1a;\n\nshouldComponentUpdate: &#x5f53;&#x7ec4;&#x4ef6;&#x7684; <span class=\"hljs-keyword\">state</span> &#x6216; props &#x53d1;&#x751f;&#x6539;&#x53d8;&#x65f6;&#xff0c;&#x90fd;&#x4f1a;&#x9996;&#x5148;&#x89e6;&#x53d1;&#x8fd9;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x51fd;&#x6570;&#x3002;&#x5b83;&#x4f1a;&#x63a5;&#x6536;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff1a;nextProps, nextState&#x2014;&#x2014;&#x5b83;&#x4eec;&#x5206;&#x522b;&#x4ee3;&#x8868;&#x4f20;&#x5165;&#x7684;&#x65b0; props &#x548c;&#x65b0;&#x7684; <span class=\"hljs-keyword\">state</span> &#x503c;&#x3002;&#x62ff;&#x5230;&#x8fd9;&#x4e24;&#x4e2a;&#x503c;&#x4e4b;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x4e00;&#x4e9b;&#x5bf9;&#x6bd4;&#x903b;&#x8f91;&#x6765;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x6709; re-render&#xff08;&#x91cd;&#x6e32;&#x67d3;&#xff09;&#x7684;&#x5fc5;&#x8981;&#x4e86;&#x3002;&#x5982;&#x679c;&#x8be5;&#x51fd;&#x6570;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x4e3a; false&#xff0c;&#x5219;&#x751f;&#x547d;&#x5468;&#x671f;&#x7ec8;&#x6b62;&#xff0c;&#x53cd;&#x4e4b;&#x7ee7;&#x7eed;&#xff1b;\n\n\n&#x6ce8;&#x610f;&#xff1a;&#x6b64;&#x65b9;&#x6cd5;&#x4ec5;&#x4f5c;&#x4e3a;&#x6027;&#x80fd;&#x4f18;&#x5316;&#x7684;&#x65b9;&#x5f0f;&#x800c;&#x5b58;&#x5728;&#x3002;&#x4e0d;&#x8981;&#x4f01;&#x56fe;&#x4f9d;&#x9760;&#x6b64;&#x65b9;&#x6cd5;&#x6765;&#x201c;&#x963b;&#x6b62;&#x201d;&#x6e32;&#x67d3;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x53ef;&#x80fd;&#x4f1a;&#x4ea7;&#x751f; bug&#x3002;&#x5e94;&#x8be5;&#x8003;&#x8651;&#x4f7f;&#x7528;&#x5185;&#x7f6e;&#x7684; PureComponent &#x7ec4;&#x4ef6;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x624b;&#x52a8;&#x7f16;&#x5199; shouldComponentUpdate()\n\n\ncomponentWillUpdate&#xff1a;&#x5f53;&#x7ec4;&#x4ef6;&#x7684; <span class=\"hljs-keyword\">state</span> &#x6216; props &#x53d1;&#x751f;&#x6539;&#x53d8;&#x65f6;&#xff0c;&#x4f1a;&#x5728;&#x6e32;&#x67d3;&#x4e4b;&#x524d;&#x8c03;&#x7528; componentWillUpdate&#x3002;componentWillUpdate &#x662f; React16 &#x5e9f;&#x5f03;&#x7684;&#x4e09;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e4b;&#x4e00;&#x3002;&#x8fc7;&#x53bb;&#xff0c;&#x6211;&#x4eec;&#x53ef;&#x80fd;&#x5e0c;&#x671b;&#x80fd;&#x5728;&#x8fd9;&#x4e2a;&#x9636;&#x6bb5;&#x53bb;&#x6536;&#x96c6;&#x4e00;&#x4e9b;&#x5fc5;&#x8981;&#x7684;&#x4fe1;&#x606f;&#xff08;&#x6bd4;&#x5982;&#x66f4;&#x65b0;&#x524d;&#x7684; DOM &#x4fe1;&#x606f;&#x7b49;&#x7b49;&#xff09;&#xff0c;&#x73b0;&#x5728;&#x6211;&#x4eec;&#x5b8c;&#x5168;&#x53ef;&#x4ee5;&#x5728; React16 &#x7684; getSnapshotBeforeUpdate &#x4e2d;&#x53bb;&#x505a;&#x8fd9;&#x4e9b;&#x4e8b;&#xff1b;\ncomponentDidUpdate&#xff1a;componentDidUpdate() &#x4f1a;&#x5728;UI&#x66f4;&#x65b0;&#x540e;&#x4f1a;&#x88ab;&#x7acb;&#x5373;&#x8c03;&#x7528;&#x3002;&#x5b83;&#x63a5;&#x6536; prevProps&#xff08;&#x4e0a;&#x4e00;&#x6b21;&#x7684; props &#x503c;&#xff09;&#x4f5c;&#x4e3a;&#x5165;&#x53c2;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x5728;&#x6b64;&#x5904;&#x6211;&#x4eec;&#x4ecd;&#x7136;&#x53ef;&#x4ee5;&#x8fdb;&#x884c; props &#x503c;&#x5bf9;&#x6bd4;&#xff08;&#x518d;&#x6b21;&#x8bf4;&#x660e; componentWillUpdate &#x786e;&#x5b9e;&#x9e21;&#x808b;&#x54c8;&#xff09;&#x3002;\n\n&#x200b;\nprops &#x66f4;&#x65b0;&#x6d41;&#x7a0b;&#xff1a;\n\n&#x76f8;&#x5bf9;&#x4e8e; <span class=\"hljs-keyword\">state</span> &#x66f4;&#x65b0;&#xff0c;props &#x66f4;&#x65b0;&#x540e;&#x552f;&#x4e00;&#x7684;&#x533a;&#x522b;&#x662f;&#x589e;&#x52a0;&#x4e86;&#x5bf9; componentWillReceiveProps &#x7684;&#x8c03;&#x7528;&#x3002;&#x5173;&#x4e8e; componentWillReceiveProps&#xff0c;&#x9700;&#x8981;&#x77e5;&#x9053;&#x8fd9;&#x4e9b;&#x4e8b;&#x60c5;&#xff1a;\n\ncomponentWillReceiveProps&#xff1a;&#x5b83;&#x5728;Component&#x63a5;&#x53d7;&#x5230;&#x65b0;&#x7684; props &#x65f6;&#x88ab;&#x89e6;&#x53d1;&#x3002;componentWillReceiveProps &#x4f1a;&#x63a5;&#x6536;&#x4e00;&#x4e2a;&#x540d;&#x4e3a; nextProps &#x7684;&#x53c2;&#x6570;&#xff08;&#x5bf9;&#x5e94;&#x65b0;&#x7684; props &#x503c;&#xff09;&#x3002;&#x8be5;&#x751f;&#x547d;&#x5468;&#x671f;&#x662f; React16 &#x5e9f;&#x5f03;&#x6389;&#x7684;&#x4e09;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e4b;&#x4e00;&#x3002;&#x5728;&#x5b83;&#x88ab;&#x5e9f;&#x5f03;&#x524d;&#xff0c;&#x53ef;&#x4ee5;&#x7528;&#x5b83;&#x6765;&#x6bd4;&#x8f83; this.props &#x548c; nextProps &#x6765;&#x91cd;&#x65b0;<span class=\"hljs-built_in\">set</span>State&#x3002;&#x5728; React16 &#x4e2d;&#xff0c;&#x7528;&#x4e00;&#x4e2a;&#x7c7b;&#x4f3c;&#x7684;&#x65b0;&#x751f;&#x547d;&#x5468;&#x671f; getDerivedStateFromProps &#x6765;&#x4ee3;&#x66ff;&#x5b83;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1656,1677"}},{"content":"<pre data-lines=\"1678,1694\"><code data-lines=\"1678,1694\">&#x5bf9;&#x4e8e;&#x5f02;&#x6b65;&#x8bf7;&#x6c42;&#xff0c;&#x6700;&#x597d;&#x653e;&#x5728;componentDidMount&#x4e2d;&#x53bb;&#x64cd;&#x4f5c;&#xff0c;&#x5bf9;&#x4e8e;&#x540c;&#x6b65;&#x7684;&#x72b6;&#x6001;&#x6539;&#x53d8;&#xff0c;&#x53ef;&#x4ee5;&#x653e;&#x5728;componentWillMount&#x4e2d;&#xff0c;&#x4e00;&#x822c;&#x7528;&#x7684;&#x6bd4;&#x8f83;&#x5c11;&#x3002;\n&#x5982;&#x679c;&#x8ba4;&#x4e3a;&#x5728;componentWillMount&#x91cc;&#x53d1;&#x8d77;&#x8bf7;&#x6c42;&#x80fd;&#x63d0;&#x65e9;&#x83b7;&#x5f97;&#x7ed3;&#x679c;&#xff0c;&#x8fd9;&#x79cd;&#x60f3;&#x6cd5;&#x5176;&#x5b9e;&#x662f;&#x9519;&#x8bef;&#x7684;&#xff0c;&#x901a;&#x5e38;componentWillMount&#x6bd4;componentDidMount&#x65e9;&#x4e0d;&#x4e86;&#x591a;&#x5c11;&#x5fae;&#x79d2;&#xff0c;&#x7f51;&#x7edc;&#x4e0a;&#x4efb;&#x4f55;&#x4e00;&#x70b9;&#x5ef6;&#x8fdf;&#xff0c;&#x8fd9;&#x4e00;&#x70b9;&#x5dee;&#x5f02;&#x90fd;&#x53ef;&#x5ffd;&#x7565;&#x4e0d;&#x8ba1;&#x3002;\nreact&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1a; <span class=\"hljs-function\"><span class=\"hljs-keyword\">constructor</span><span class=\"hljs-params\">()</span> -&gt; <span class=\"hljs-title\">componentWillMount</span><span class=\"hljs-params\">()</span> -&gt; <span class=\"hljs-title\">render</span><span class=\"hljs-params\">()</span> -&gt; <span class=\"hljs-title\">componentDidMount</span><span class=\"hljs-params\">()</span>\n&#x4e0a;&#x9762;&#x8fd9;&#x4e9b;&#x65b9;&#x6cd5;&#x7684;&#x8c03;&#x7528;&#x662f;&#x6709;&#x6b21;&#x5e8f;&#x7684;&#xff0c;&#x7531;&#x4e0a;&#x800c;&#x4e0b;&#x4f9d;&#x6b21;&#x8c03;&#x7528;&#x3002;\n\n<span class=\"hljs-title\">constructor</span>&#x88ab;&#x8c03;&#x7528;&#x662f;&#x5728;&#x7ec4;&#x4ef6;&#x51c6;&#x5907;&#x8981;&#x6302;&#x8f7d;&#x7684;&#x6700;&#x5f00;&#x59cb;&#xff0c;&#x6b64;&#x65f6;&#x7ec4;&#x4ef6;&#x5c1a;&#x672a;&#x6302;&#x8f7d;&#x5230;&#x7f51;&#x9875;&#x4e0a;&#x3002;\n<span class=\"hljs-title\">componentWillMount</span>&#x65b9;&#x6cd5;&#x7684;&#x8c03;&#x7528;&#x5728;<span class=\"hljs-title\">constructor</span>&#x4e4b;&#x540e;&#xff0c;&#x5728;<span class=\"hljs-title\">render</span>&#x4e4b;&#x524d;&#xff0c;&#x5728;&#x8fd9;&#x65b9;&#x6cd5;&#x91cc;&#x7684;&#x4ee3;&#x7801;&#x8c03;&#x7528;<span class=\"hljs-title\">setState</span>&#x65b9;&#x6cd5;&#x4e0d;&#x4f1a;&#x89e6;&#x53d1;&#x91cd;&#x65b0;<span class=\"hljs-title\">render</span>&#xff0c;&#x6240;&#x4ee5;&#x5b83;&#x4e00;&#x822c;&#x4e0d;&#x4f1a;&#x7528;&#x6765;&#x4f5c;&#x52a0;&#x8f7d;&#x6570;&#x636e;&#x4e4b;&#x7528;&#x3002;\n<span class=\"hljs-title\">componentDidMount</span>&#x65b9;&#x6cd5;&#x4e2d;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x662f;&#x5728;&#x7ec4;&#x4ef6;&#x5df2;&#x7ecf;&#x5b8c;&#x5168;&#x6302;&#x8f7d;&#x5230;&#x7f51;&#x9875;&#x4e0a;&#x624d;&#x4f1a;&#x8c03;&#x7528;&#x88ab;&#x6267;&#x884c;&#xff0c;&#x6240;&#x4ee5;&#x53ef;&#x4ee5;&#x4fdd;&#x8bc1;&#x6570;&#x636e;&#x7684;&#x52a0;&#x8f7d;&#x3002;&#x6b64;&#x5916;&#xff0c;&#x5728;&#x8fd9;&#x65b9;&#x6cd5;&#x4e2d;&#x8c03;&#x7528;<span class=\"hljs-title\">setState</span>&#x65b9;&#x6cd5;&#xff0c;&#x4f1a;&#x89e6;&#x53d1;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x5b98;&#x65b9;&#x8bbe;&#x8ba1;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x5c31;&#x662f;&#x7528;&#x6765;&#x52a0;&#x8f7d;&#x5916;&#x90e8;&#x6570;&#x636e;&#x7528;&#x7684;&#xff0c;&#x6216;&#x5904;&#x7406;&#x5176;&#x4ed6;&#x7684;&#x526f;&#x4f5c;&#x7528;&#x4ee3;&#x7801;&#x3002;&#x4e0e;&#x7ec4;&#x4ef6;&#x4e0a;&#x7684;&#x6570;&#x636e;&#x65e0;&#x5173;&#x7684;&#x52a0;&#x8f7d;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5728;<span class=\"hljs-title\">constructor</span>&#x91cc;&#x505a;&#xff0c;&#x4f46;<span class=\"hljs-title\">constructor</span>&#x662f;&#x505a;&#x7ec4;&#x4ef6;<span class=\"hljs-title\">state</span>&#x521d;&#x7ed0;&#x5316;&#x5de5;&#x4f5c;&#xff0c;&#x5e76;&#x4e0d;&#x662f;&#x505a;&#x52a0;&#x8f7d;&#x6570;&#x636e;&#x8fd9;&#x5de5;&#x4f5c;&#x7684;&#xff0c;<span class=\"hljs-title\">constructor</span>&#x91cc;&#x4e5f;&#x4e0d;&#x80fd;<span class=\"hljs-title\">setState</span>&#xff0c;&#x8fd8;&#x6709;&#x52a0;&#x8f7d;&#x7684;&#x65f6;&#x95f4;&#x592a;&#x957f;&#x6216;&#x8005;&#x51fa;&#x9519;&#xff0c;&#x9875;&#x9762;&#x5c31;&#x65e0;&#x6cd5;&#x52a0;&#x8f7d;&#x51fa;&#x6765;&#x3002;&#x6240;&#x4ee5;&#x6709;&#x526f;&#x4f5c;&#x7528;&#x7684;&#x4ee3;&#x7801;&#x90fd;&#x4f1a;&#x96c6;&#x4e2d;&#x5728;<span class=\"hljs-title\">componentDidMount</span>&#x65b9;&#x6cd5;&#x91cc;&#x3002;\n\n&#x603b;&#x7ed3;&#xff1a;\n\n&#x8ddf;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x6e32;&#x67d3;&#xff08;&#x540c;&#x6784;&#xff09;&#x6709;&#x5173;&#x7cfb;&#xff0c;&#x5982;&#x679c;&#x5728;<span class=\"hljs-title\">componentWillMount</span>&#x91cc;&#x9762;&#x83b7;&#x53d6;&#x6570;&#x636e;&#xff0c;<span class=\"hljs-title\">fetch</span> <span class=\"hljs-title\">data</span>&#x4f1a;&#x6267;&#x884c;&#x4e24;&#x6b21;&#xff0c;&#x4e00;&#x6b21;&#x5728;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x4e00;&#x6b21;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#x3002;&#x5728;<span class=\"hljs-title\">componentDidMount</span>&#x4e2d;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#xff0c;<span class=\"hljs-title\">componentWillMount</span>&#x540c;&#x6837;&#x4e5f;&#x4f1a;<span class=\"hljs-title\">render</span>&#x4e24;&#x6b21;&#x3002;\n&#x5728;<span class=\"hljs-title\">componentWillMount</span>&#x4e2d;<span class=\"hljs-title\">fetch</span> <span class=\"hljs-title\">data</span>&#xff0c;&#x6570;&#x636e;&#x4e00;&#x5b9a;&#x5728;<span class=\"hljs-title\">render</span>&#x540e;&#x624d;&#x80fd;&#x5230;&#x8fbe;&#xff0c;&#x5982;&#x679c;&#x5fd8;&#x8bb0;&#x4e86;&#x8bbe;&#x7f6e;&#x521d;&#x59cb;&#x72b6;&#x6001;&#xff0c;&#x7528;&#x6237;&#x4f53;&#x9a8c;&#x4e0d;&#x597d;&#x3002;\n<span class=\"hljs-title\">react16</span>.0&#x4ee5;&#x540e;&#xff0c;<span class=\"hljs-title\">componentWillMount</span>&#x53ef;&#x80fd;&#x4f1a;&#x88ab;&#x6267;&#x884c;&#x591a;&#x6b21;&#x3002;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1678,1694"}},{"content":"<pre data-lines=\"1695,1729\"><code data-lines=\"1695,1729\">&#x5173;&#x4e8e; React16 &#x5f00;&#x59cb;&#x5e94;&#x7528;&#x7684;&#x65b0;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1a;\n\n&#x53ef;&#x4ee5;&#x770b;&#x51fa;&#xff0c;React16 &#x81ea;&#x4e0a;&#x800c;&#x4e0b;&#x5730;&#x5bf9;&#x751f;&#x547d;&#x5468;&#x671f;&#x505a;&#x4e86;&#x53e6;&#x4e00;&#x79cd;&#x7ef4;&#x5ea6;&#x7684;&#x89e3;&#x8bfb;&#xff1a;\n\nRender &#x9636;&#x6bb5;&#xff1a;&#x7528;&#x4e8e;&#x8ba1;&#x7b97;&#x4e00;&#x4e9b;&#x5fc5;&#x8981;&#x7684;&#x72b6;&#x6001;&#x4fe1;&#x606f;&#x3002;&#x8fd9;&#x4e2a;&#x9636;&#x6bb5;&#x53ef;&#x80fd;&#x4f1a;&#x88ab; React &#x6682;&#x505c;&#xff0c;&#x8fd9;&#x4e00;&#x70b9;&#x548c; React16 &#x5f15;&#x5165;&#x7684; Fiber &#x67b6;&#x6784;&#xff08;&#x6211;&#x4eec;&#x540e;&#x9762;&#x4f1a;&#x91cd;&#x70b9;&#x8bb2;&#x89e3;&#xff09;&#x662f;&#x6709;&#x5173;&#x7684;&#xff1b;\nPre-commit&#x9636;&#x6bb5;&#xff1a;&#x6240;&#x8c13;&#x201c;commit&#x201d;&#xff0c;&#x8fd9;&#x91cc;&#x6307;&#x7684;&#x662f;&#x201c;&#x66f4;&#x65b0;&#x771f;&#x6b63;&#x7684; DOM &#x8282;&#x70b9;&#x201d;&#x8fd9;&#x4e2a;&#x52a8;&#x4f5c;&#x3002;&#x6240;&#x8c13; Pre-commit&#xff0c;&#x5c31;&#x662f;&#x8bf4;&#x6211;&#x5728;&#x8fd9;&#x4e2a;&#x9636;&#x6bb5;&#x5176;&#x5b9e;&#x8fd8;&#x5e76;&#x6ca1;&#x6709;&#x53bb;&#x66f4;&#x65b0;&#x771f;&#x5b9e;&#x7684; DOM&#xff0c;&#x4e0d;&#x8fc7; DOM &#x4fe1;&#x606f;&#x5df2;&#x7ecf;&#x662f;&#x53ef;&#x4ee5;&#x8bfb;&#x53d6;&#x7684;&#x4e86;&#xff1b;\nCommit &#x9636;&#x6bb5;&#xff1a;&#x5728;&#x8fd9;&#x4e00;&#x6b65;&#xff0c;React &#x4f1a;&#x5b8c;&#x6210;&#x771f;&#x5b9e; DOM &#x7684;&#x66f4;&#x65b0;&#x5de5;&#x4f5c;&#x3002;Commit &#x9636;&#x6bb5;&#xff0c;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x62ff;&#x5230;&#x771f;&#x5b9e; DOM&#xff08;&#x5305;&#x62ec; refs&#xff09;&#x3002;\n\n&#x4e0e;&#x6b64;&#x540c;&#x65f6;&#xff0c;&#x65b0;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5728;&#x6d41;&#x7a0b;&#x65b9;&#x9762;&#xff0c;&#x4ecd;&#x7136;&#x9075;&#x5faa;&#x201c;&#x6302;&#x8f7d;&#x201d;&#x3001;&#x201c;&#x66f4;&#x65b0;&#x201d;&#x3001;&#x201c;&#x5378;&#x8f7d;&#x201d;&#x8fd9;&#x4e09;&#x4e2a;&#x5e7f;&#x4e49;&#x7684;&#x5212;&#x5206;&#x65b9;&#x5f0f;&#x3002;&#x5b83;&#x4eec;&#x5206;&#x522b;&#x5bf9;&#x5e94;&#x5230;&#xff1a;\n\n&#x6302;&#x8f7d;&#x8fc7;&#x7a0b;&#xff1a;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">constructor</span>\n<span class=\"hljs-title\">getDerivedStateFromProps</span>\n<span class=\"hljs-title\">render</span>\n<span class=\"hljs-title\">componentDidMount</span>\n\n\n&#x66f4;&#x65b0;&#x8fc7;&#x7a0b;&#xff1a;\n\n<span class=\"hljs-title\">getDerivedStateFromProps</span>\n<span class=\"hljs-title\">shouldComponentUpdate</span>\n<span class=\"hljs-title\">render</span>\n<span class=\"hljs-title\">getSnapshotBeforeUpdate</span>\n<span class=\"hljs-title\">componentDidUpdate</span>\n\n\n&#x5378;&#x8f7d;&#x8fc7;&#x7a0b;&#xff1a;\n\n<span class=\"hljs-title\">componentWillUnmount</span>\n\n\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1695,1729"}},{"content":"<pre data-lines=\"1730,1738\"><code data-lines=\"1730,1738\"><span class=\"hljs-section\">React&#x7ec4;&#x4ef6;&#x95f4;&#x901a;&#x4fe1;&#x5e38;&#x89c1;&#x7684;&#x51e0;&#x79cd;&#x60c5;&#x51b5;:</span>\n\n&#x7236;&#x7ec4;&#x4ef6;&#x5411;&#x5b50;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;\n&#x5b50;&#x7ec4;&#x4ef6;&#x5411;&#x7236;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;\n&#x8de8;&#x7ea7;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;\n&#x975e;&#x5d4c;&#x5957;&#x5173;&#x7cfb;&#x7684;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1730,1738"}},{"content":"<pre data-lines=\"1739,1772\"><code data-lines=\"1739,1772\">&#x7236;&#x7ec4;&#x4ef6;&#x5411;&#x5b50;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#xff1a;&#x7236;&#x7ec4;&#x4ef6;&#x901a;&#x8fc7; props &#x5411;&#x5b50;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;&#x9700;&#x8981;&#x7684;&#x4fe1;&#x606f;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// &#x5b50;&#x7ec4;&#x4ef6;: Child</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Child</span> = props =&gt;{\n  <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{props.name}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span></span>\n}\n<span class=\"hljs-comment\">// &#x7236;&#x7ec4;&#x4ef6; Parent</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Parent</span> = (<span class=\"hljs-params\"></span>)=&gt;{\n    <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Child</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;react&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Child</span>&gt;</span></span>\n}\n\n&#x5b50;&#x7ec4;&#x4ef6;&#x5411;&#x7236;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#xff1a;: props+&#x56de;&#x8c03;&#x7684;&#x65b9;&#x5f0f;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// &#x5b50;&#x7ec4;&#x4ef6;: Child</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Child</span> = props =&gt;{\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">cb</span> = msg =&gt;{\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">()=&gt;</span>{\n          props.<span class=\"hljs-title function_\">callback</span>(msg)\n      }\n  }\n  <span class=\"hljs-keyword\">return</span> (\n      <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{cb(</span>&quot;<span class=\"hljs-attr\">&#x4f60;&#x597d;</span>!&quot;)}&gt;</span>&#x4f60;&#x597d;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span></span>\n  )\n}\n<span class=\"hljs-comment\">// &#x7236;&#x7ec4;&#x4ef6; Parent</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Parent</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Component</span> {\n    <span class=\"hljs-title function_\">callback</span>(<span class=\"hljs-params\">msg</span>){\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(msg)\n    }\n    <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>){\n        <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Child</span> <span class=\"hljs-attr\">callback</span>=<span class=\"hljs-string\">{this.callback.bind(this)}</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Child</span>&gt;</span></span>    \n    }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1739,1772"}},{"content":"<pre data-lines=\"1773,1816\"><code data-lines=\"1773,1816\">&#x7236;&#x7ec4;&#x4ef6;&#x5411;&#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x5b50;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#xff0c;&#x5411;&#x66f4;&#x6df1;&#x5c42;&#x5b50;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#xff1a;\n\n&#x4f7f;&#x7528;props&#xff0c;&#x5229;&#x7528;&#x4e2d;&#x95f4;&#x7ec4;&#x4ef6;&#x5c42;&#x5c42;&#x4f20;&#x9012;,&#x4f46;&#x662f;&#x5982;&#x679c;&#x7236;&#x7ec4;&#x4ef6;&#x7ed3;&#x6784;&#x8f83;&#x6df1;&#xff0c;&#x90a3;&#x4e48;&#x4e2d;&#x95f4;&#x6bcf;&#x4e00;&#x5c42;&#x7ec4;&#x4ef6;&#x90fd;&#x8981;&#x53bb;&#x4f20;&#x9012;props&#xff0c;&#x589e;&#x52a0;&#x4e86;&#x590d;&#x6742;&#x5ea6;&#xff0c;&#x5e76;&#x4e14;&#x8fd9;&#x4e9b;props&#x5e76;&#x4e0d;&#x662f;&#x4e2d;&#x95f4;&#x7ec4;&#x4ef6;&#x81ea;&#x5df1;&#x9700;&#x8981;&#x7684;&#x3002;\n&#x4f7f;&#x7528;context&#xff0c;context&#x76f8;&#x5f53;&#x4e8e;&#x4e00;&#x4e2a;&#x5927;&#x5bb9;&#x5668;&#xff0c;&#x53ef;&#x4ee5;&#x628a;&#x8981;&#x901a;&#x4fe1;&#x7684;&#x5185;&#x5bb9;&#x653e;&#x5728;&#x8fd9;&#x4e2a;&#x5bb9;&#x5668;&#x4e2d;&#xff0c;&#x8fd9;&#x6837;&#x4e0d;&#x7ba1;&#x5d4c;&#x5957;&#x591a;&#x6df1;&#xff0c;&#x90fd;&#x53ef;&#x4ee5;&#x968f;&#x610f;&#x53d6;&#x7528;&#xff0c;&#x5bf9;&#x4e8e;&#x8de8;&#x8d8a;&#x591a;&#x5c42;&#x7684;&#x5168;&#x5c40;&#x6570;&#x636e;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;context&#x5b9e;&#x73b0;&#x3002;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-comment\">// context&#x65b9;&#x5f0f;&#x5b9e;&#x73b0;&#x8de8;&#x7ea7;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1; </span>\n<span class=\"hljs-comment\">// Context &#x8bbe;&#x8ba1;&#x76ee;&#x7684;&#x662f;&#x4e3a;&#x4e86;&#x5171;&#x4eab;&#x90a3;&#x4e9b;&#x5bf9;&#x4e8e;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x6811;&#x800c;&#x8a00;&#x662f;&#x201c;&#x5168;&#x5c40;&#x201d;&#x7684;&#x6570;&#x636e;</span>\nconst <span class=\"hljs-type\">BatteryContext</span> = createContext();\n<span class=\"hljs-comment\">//  &#x5b50;&#x7ec4;&#x4ef6;&#x7684;&#x5b50;&#x7ec4;&#x4ef6; </span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">GrandChild</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    render(){\n        <span class=\"hljs-keyword\">return</span> (\n            &lt;<span class=\"hljs-type\">BatteryContext</span>.<span class=\"hljs-type\">Consumer</span>&gt;\n                {\n                    color =&gt; &lt;h1 style={{<span class=\"hljs-string\">&quot;color&quot;</span>:color}}&gt;&#x6211;&#x662f;&#x7ea2;&#x8272;&#x7684;:{color}&lt;/h1&gt;\n                }\n            &lt;/<span class=\"hljs-type\">BatteryContext</span>.<span class=\"hljs-type\">Consumer</span>&gt;\n        )\n    }\n}\n<span class=\"hljs-comment\">//  &#x5b50;&#x7ec4;&#x4ef6;</span>\nconst <span class=\"hljs-type\">Child</span> = () =&gt;{\n    <span class=\"hljs-keyword\">return</span> (\n        &lt;<span class=\"hljs-type\">GrandChild</span>/&gt;\n    )\n}\n<span class=\"hljs-comment\">// &#x7236;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Parent</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n      state = {\n          color:<span class=\"hljs-string\">&quot;red&quot;</span>\n      }\n      render(){\n          const {color} = <span class=\"hljs-keyword\">this</span>.state\n          <span class=\"hljs-keyword\">return</span> (\n          &lt;<span class=\"hljs-type\">BatteryContext</span>.<span class=\"hljs-type\">Provider</span> value={color}&gt;\n              &lt;<span class=\"hljs-type\">Child</span>&gt;&lt;/<span class=\"hljs-type\">Child</span>&gt;\n          &lt;/<span class=\"hljs-type\">BatteryContext</span>.<span class=\"hljs-type\">Provider</span>&gt;\n          )\n      }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1773,1816"}},{"content":"<pre data-lines=\"1817,1824\"><code data-lines=\"1817,1824\">&#x5373;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x5305;&#x542b;&#x5173;&#x7cfb;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5305;&#x62ec;&#x5144;&#x5f1f;&#x7ec4;&#x4ef6;&#x4ee5;&#x53ca;&#x4e0d;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x7236;&#x7ea7;&#x4e2d;&#x7684;&#x975e;&#x5144;&#x5f1f;&#x7ec4;&#x4ef6;&#x3002;\n\n&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#x901a;&#x4fe1;&#xff08;&#x53d1;&#x5e03;&#x8ba2;&#x9605;&#x6a21;&#x5f0f;&#xff09;\n&#x53ef;&#x4ee5;&#x901a;&#x8fc7;redux&#x7b49;&#x8fdb;&#x884c;&#x5168;&#x5c40;&#x72b6;&#x6001;&#x7ba1;&#x7406;\n&#x5982;&#x679c;&#x662f;&#x5144;&#x5f1f;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;&#xff0c;&#x53ef;&#x4ee5;&#x627e;&#x5230;&#x8fd9;&#x4e24;&#x4e2a;&#x5144;&#x5f1f;&#x8282;&#x70b9;&#x5171;&#x540c;&#x7684;&#x7236;&#x8282;&#x70b9;, &#x7ed3;&#x5408;&#x7236;&#x5b50;&#x95f4;&#x901a;&#x4fe1;&#x65b9;&#x5f0f;&#x8fdb;&#x884c;&#x901a;&#x4fe1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1817,1824"}},{"content":"<pre data-lines=\"1825,1829\"><code data-lines=\"1825,1829\">&#x4f7f;&#x7528;<span class=\"hljs-keyword\">Context</span> API&#xff1a;&#x63d0;&#x4f9b;&#x4e00;&#x79cd;&#x7ec4;&#x4ef6;&#x4e4b;&#x95f4;&#x7684;&#x72b6;&#x6001;&#x5171;&#x4eab;&#xff0c;&#x800c;&#x4e0d;&#x5fc5;&#x901a;&#x8fc7;&#x663e;&#x5f0f;&#x7ec4;&#x4ef6;&#x6811;&#x9010;&#x5c42;&#x4f20;&#x9012;props&#xff1b;\n&#x4f7f;&#x7528;Redux&#x7b49;&#x72b6;&#x6001;&#x5e93;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1825,1829"}},{"content":"<pre data-lines=\"1830,1838\"><code data-lines=\"1830,1838\"><span class=\"hljs-section\">&#x2f57;&#x7ec4;&#x4ef6;&#x5411;&#x2f26;&#x7ec4;&#x4ef6;&#x901a;&#x8baf;: &#x2f57;&#x7ec4;&#x4ef6;&#x53ef;&#x4ee5;&#x5411;&#x2f26;&#x7ec4;&#x4ef6;&#x901a;&#x8fc7;&#x4f20; props &#x7684;&#x2f45;&#x5f0f;&#xff0c;&#x5411;&#x2f26;&#x7ec4;&#x4ef6;&#x8fdb;&#x2f8f;&#x901a;&#x8baf;</span>\n<span class=\"hljs-section\">&#x2f26;&#x7ec4;&#x4ef6;&#x5411;&#x2f57;&#x7ec4;&#x4ef6;&#x901a;&#x8baf;: props+&#x56de;&#x8c03;&#x7684;&#x2f45;&#x5f0f;&#xff0c;&#x2f57;&#x7ec4;&#x4ef6;&#x5411;&#x2f26;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;props&#x8fdb;&#x2f8f;&#x901a;&#x8baf;&#xff0c;&#x6b64;props&#x4e3a;&#x4f5c;&#x2f64;&#x57df;&#x4e3a;&#x2f57;&#x7ec4;&#x4ef6;&#x2f83;&#x8eab;&#x7684;&#x51fd; &#x6570;&#xff0c;&#x2f26;&#x7ec4;&#x4ef6;&#x8c03;&#x2f64;&#x8be5;&#x51fd;&#x6570;&#xff0c;&#x5c06;&#x2f26;&#x7ec4;&#x4ef6;&#x60f3;&#x8981;&#x4f20;&#x9012;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x4f20;&#x9012;&#x5230;&#x2f57;&#x7ec4;&#x4ef6;&#x7684;&#x4f5c;&#x2f64;&#x57df;&#x4e2d;</span>\n<span class=\"hljs-section\">&#x5144;&#x5f1f;&#x7ec4;&#x4ef6;&#x901a;&#x4fe1;: &#x627e;&#x5230;&#x8fd9;&#x4e24;&#x4e2a;&#x5144;&#x5f1f;&#x8282;&#x70b9;&#x5171;&#x540c;&#x7684;&#x2f57;&#x8282;&#x70b9;,&#x7ed3;&#x5408;&#x4e0a;&#x2faf;&#x4e24;&#x79cd;&#x2f45;&#x5f0f;&#x7531;&#x2f57;&#x8282;&#x70b9;&#x8f6c;&#x53d1;&#x4fe1;&#x606f;&#x8fdb;&#x2f8f;&#x901a;&#x4fe1;</span>\n<span class=\"hljs-section\">&#x8de8;&#x5c42;&#x7ea7;&#x901a;&#x4fe1;: Context &#x8bbe;&#x8ba1;&#x2f6c;&#x7684;&#x662f;&#x4e3a;&#x4e86;&#x5171;&#x4eab;&#x90a3;&#x4e9b;&#x5bf9;&#x4e8e;&#x2f00;&#x4e2a;&#x7ec4;&#x4ef6;&#x6811;&#x2f7d;&#x2f94;&#x662f;&#x201c;&#x5168;&#x5c40;&#x201d;&#x7684;&#x6570;&#x636e;&#xff0c;&#x4f8b;&#x5982;&#x5f53;&#x524d;&#x8ba4;&#x8bc1;&#x7684;&#x2f64;&#x6237;&#x3001;&#x4e3b;&#x9898;&#x6216;&#x2fb8;&#x9009;&#x8bed;&#x2f94;&#xff0c;&#x5bf9;&#x4e8e;&#x8de8;&#x8d8a;&#x591a;&#x5c42;&#x7684;&#x5168;&#x5c40;&#x6570;&#x636e;&#x901a;&#x8fc7; Context &#x901a;&#x4fe1;&#x518d;&#x9002;&#x5408;&#x4e0d;&#x8fc7;</span>\n<span class=\"hljs-section\">&#x53d1;&#x5e03;&#x8ba2;&#x9605;&#x6a21;&#x5f0f;: &#x53d1;&#x5e03;&#x8005;&#x53d1;&#x5e03;&#x4e8b;&#x4ef6;&#xff0c;&#x8ba2;&#x9605;&#x8005;&#x76d1;&#x542c;&#x4e8b;&#x4ef6;&#x5e76;&#x505a;&#x51fa;&#x53cd;&#x5e94;,&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x5f15;&#x2f0a;event&#x6a21;&#x5757;&#x8fdb;&#x2f8f;&#x901a;&#x4fe1;</span>\n<span class=\"hljs-section\">&#x5168;&#x5c40;&#x72b6;&#x6001;&#x7ba1;&#x7406;&#x2f2f;&#x5177;: &#x501f;&#x52a9;Redux&#x6216;&#x8005;Mobx&#x7b49;&#x5168;&#x5c40;&#x72b6;&#x6001;&#x7ba1;&#x7406;&#x2f2f;&#x5177;&#x8fdb;&#x2f8f;&#x901a;&#x4fe1;,&#x8fd9;&#x79cd;&#x2f2f;&#x5177;&#x4f1a;&#x7ef4;&#x62a4;&#x2f00;&#x4e2a;&#x5168;&#x5c40;&#x72b6;&#x6001;&#x4e2d;&#x2f3c;Store,&#x5e76;&#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684;&#x4e8b;&#x4ef6;&#x4ea7;&#x2f63;&#x65b0;&#x7684;&#x72b6;&#x6001;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1830,1838"}}],"payload":{"tag":"h2","lines":"1339,1340"}},{"content":"&#x4e94;&#x3001;&#x8def;&#x7531;","children":[{"content":"<pre data-lines=\"1841,1861\"><code data-lines=\"1841,1861\">&#x5ba2;&#x6237;&#x7aef;&#x8def;&#x7531;&#x5b9e;&#x73b0;&#x7684;&#x601d;&#x60f3;&#xff1a;\n\n&#x57fa;&#x4e8e; <span class=\"hljs-built_in\">hash</span> &#x7684;&#x8def;&#x7531;&#xff1a;&#x901a;&#x8fc7;&#x76d1;&#x542c;hashchange&#x4e8b;&#x4ef6;&#xff0c;&#x611f;&#x77e5; <span class=\"hljs-built_in\">hash</span> &#x7684;&#x53d8;&#x5316;\n\n&#x6539;&#x53d8; <span class=\"hljs-built_in\">hash</span> &#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x901a;&#x8fc7; location.hash=xxx\n\n\n&#x57fa;&#x4e8e; H5 <span class=\"hljs-built_in\">history</span> &#x8def;&#x7531;&#xff1a;\n\n&#x6539;&#x53d8; url &#x53ef;&#x4ee5;&#x901a;&#x8fc7; history.pushState &#x548c; resplaceState &#x7b49;&#xff0c;&#x4f1a;&#x5c06;URL&#x538b;&#x5165;&#x5806;&#x6808;&#xff0c;&#x540c;&#x65f6;&#x80fd;&#x591f;&#x5e94;&#x7528; history.go() &#x7b49; API\n&#x76d1;&#x542c; url &#x7684;&#x53d8;&#x5316;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6;&#x89e6;&#x53d1;&#x5b9e;&#x73b0;\n\n\n\nreact-router &#x5b9e;&#x73b0;&#x7684;&#x601d;&#x60f3;&#xff1a;\n\n&#x57fa;&#x4e8e; <span class=\"hljs-built_in\">history</span> &#x5e93;&#x6765;&#x5b9e;&#x73b0;&#x4e0a;&#x8ff0;&#x4e0d;&#x540c;&#x7684;&#x5ba2;&#x6237;&#x7aef;&#x8def;&#x7531;&#x5b9e;&#x73b0;&#x601d;&#x60f3;&#xff0c;&#x5e76;&#x4e14;&#x80fd;&#x591f;&#x4fdd;&#x5b58;&#x5386;&#x53f2;&#x8bb0;&#x5f55;&#x7b49;&#xff0c;&#x78e8;&#x5e73;&#x6d4f;&#x89c8;&#x5668;&#x5dee;&#x5f02;&#xff0c;&#x4e0a;&#x5c42;&#x65e0;&#x611f;&#x77e5;\n&#x901a;&#x8fc7;&#x7ef4;&#x62a4;&#x7684;&#x5217;&#x8868;&#xff0c;&#x5728;&#x6bcf;&#x6b21; URL &#x53d1;&#x751f;&#x53d8;&#x5316;&#x7684;&#x56de;&#x6536;&#xff0c;&#x901a;&#x8fc7;&#x914d;&#x7f6e;&#x7684; &#x8def;&#x7531;&#x8def;&#x5f84;&#xff0c;&#x5339;&#x914d;&#x5230;&#x5bf9;&#x5e94;&#x7684; Component&#xff0c;&#x5e76;&#x4e14; render\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1841,1861"}},{"content":"<pre data-lines=\"1862,1893\"><code data-lines=\"1862,1893\"><span class=\"language-xml\">&#xff08;1&#xff09;&#x4f7f;&#x7528;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x7ec4;&#x4ef6;\n&#x8def;&#x7531;&#x5339;&#x914d;&#x662f;&#x901a;&#x8fc7;&#x6bd4;&#x8f83; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x7684; path &#x5c5e;&#x6027;&#x548c;&#x5f53;&#x524d;&#x5730;&#x5740;&#x7684; pathname &#x6765;&#x5b9e;&#x73b0;&#x7684;&#x3002;&#x5f53;&#x4e00;&#x4e2a; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x5339;&#x914d;&#x6210;&#x529f;&#x65f6;&#xff0c;&#x5b83;&#x5c06;&#x6e32;&#x67d3;&#x5176;&#x5185;&#x5bb9;&#xff0c;&#x5f53;&#x5b83;&#x4e0d;&#x5339;&#x914d;&#x65f6;&#x5c31;&#x4f1a;&#x6e32;&#x67d3; null&#x3002;&#x6ca1;&#x6709;&#x8def;&#x5f84;&#x7684; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x5c06;&#x59cb;&#x7ec8;&#x88ab;&#x5339;&#x914d;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;// when location = </span><span class=\"hljs-template-variable\">{ pathname: &apos;/about&apos; }</span><span class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&apos;/about&apos;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{About}</span><span class=\"language-xml\"><span class=\"hljs-tag\">/&gt;</span> // renders <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">About</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&apos;/contact&apos;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Contact}</span><span class=\"language-xml\"><span class=\"hljs-tag\">/&gt;</span> // renders null\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Always}</span><span class=\"language-xml\"><span class=\"hljs-tag\">/&gt;</span> // renders <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Always</span>/&gt;</span>\n\n&#xff08;2&#xff09;&#x7ed3;&#x5408;&#x4f7f;&#x7528; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#x7ec4;&#x4ef6;&#x548c; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x7ec4;&#x4ef6;\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#x7528;&#x4e8e;&#x5c06; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x5206;&#x7ec4;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">exact</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Home}</span><span class=\"language-xml\"><span class=\"hljs-tag\"> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/about&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{About}</span><span class=\"language-xml\"><span class=\"hljs-tag\"> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/contact&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Contact}</span><span class=\"language-xml\"><span class=\"hljs-tag\"> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Switch</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#x4e0d;&#x662f;&#x5206;&#x7ec4; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x6240;&#x5fc5;&#x987b;&#x7684;&#xff0c;&#x4f46;&#x4ed6;&#x901a;&#x5e38;&#x5f88;&#x6709;&#x7528;&#x3002; &#x4e00;&#x4e2a; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#x4f1a;&#x904d;&#x5386;&#x5176;&#x6240;&#x6709;&#x7684;&#x5b50; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span>&#x5143;&#x7d20;&#xff0c;&#x5e76;&#x4ec5;&#x6e32;&#x67d3;&#x4e0e;&#x5f53;&#x524d;&#x5730;&#x5740;&#x5339;&#x914d;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5143;&#x7d20;&#x3002;\n&#xff08;3&#xff09;&#x4f7f;&#x7528; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Link</span>&gt;</span>&#x3001; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">NavLink</span>&gt;</span>&#x3001;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Redirect</span>&gt;</span> &#x7ec4;&#x4ef6;\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Link</span>&gt;</span> &#x7ec4;&#x4ef6;&#x6765;&#x5728;&#x4f60;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x521b;&#x5efa;&#x94fe;&#x63a5;&#x3002;&#x65e0;&#x8bba;&#x4f60;&#x5728;&#x4f55;&#x5904;&#x6e32;&#x67d3;&#x4e00;&#x4e2a;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Link</span>&gt;</span> &#xff0c;&#x90fd;&#x4f1a;&#x5728;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684; HTML &#x4e2d;&#x6e32;&#x67d3;&#x951a;&#xff08;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span>&gt;</span>&#xff09;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Link</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">&quot;/&quot;</span>&gt;</span>Home<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Link</span>&gt;</span>   \n// <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&apos;/&apos;</span>&gt;</span>Home<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n\n &#x662f;&#x4e00;&#x79cd;&#x7279;&#x6b8a;&#x7c7b;&#x578b;&#x7684;  &#x5f53;&#x5b83;&#x7684; to&#x5c5e;&#x6027;&#x4e0e;&#x5f53;&#x524d;&#x5730;&#x5740;&#x5339;&#x914d;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x5c06;&#x5176;&#x5b9a;&#x4e49;&#x4e3a;&quot;&#x6d3b;&#x8dc3;&#x7684;&quot;&#x3002;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;// location = </span><span class=\"hljs-template-variable\">{ pathname: &apos;/react&apos; }</span><span class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">NavLink</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">&quot;/react&quot;</span> <span class=\"hljs-attr\">activeClassName</span>=<span class=\"hljs-string\">&quot;hurray&quot;</span>&gt;</span>\n    React\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">NavLink</span>&gt;</span>\n// <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&apos;/react&apos;</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&apos;hurray&apos;</span>&gt;</span>React<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n\n&#x5f53;&#x6211;&#x4eec;&#x60f3;&#x5f3a;&#x5236;&#x5bfc;&#x822a;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x6e32;&#x67d3;&#x4e00;&#x4e2a;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Redirect</span>&gt;</span>&#xff0c;&#x5f53;&#x4e00;&#x4e2a;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Redirect</span>&gt;</span>&#x6e32;&#x67d3;&#x65f6;&#xff0c;&#x5b83;&#x5c06;&#x4f7f;&#x7528;&#x5b83;&#x7684;to&#x5c5e;&#x6027;&#x8fdb;&#x884c;&#x5b9a;&#x5411;&#x3002;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1862,1893"}},{"content":"<pre data-lines=\"1894,1908\"><code data-lines=\"1894,1908\">&#x4f7f;&#x7528;&lt;Redirect&gt;&#x7ec4;&#x4ef6;&#x5b9e;&#x73b0;&#x8def;&#x7531;&#x7684;&#x91cd;&#x5b9a;&#x5411;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;&lt;Switch&gt;\n  &lt;Redirect <span class=\"hljs-keyword\">from</span>=&apos;/users/:<span class=\"hljs-built_in\">id</span>&apos; <span class=\"hljs-keyword\">to</span>=&apos;/users/profile/:<span class=\"hljs-built_in\">id</span>&apos;/&gt;\n  &lt;Route path=&apos;/users/profile/:<span class=\"hljs-built_in\">id</span>&apos; component={Profile}/&gt;\n&lt;/Switch&gt;\n\n&#x5f53;&#x8bf7;&#x6c42; /users/:<span class=\"hljs-built_in\">id</span> &#x88ab;&#x91cd;&#x5b9a;&#x5411;&#x53bb; &apos;/users/profile/:<span class=\"hljs-built_in\">id</span>&apos;&#xff1a;\n\n&#x5c5e;&#x6027; <span class=\"hljs-keyword\">from</span>: <span class=\"hljs-built_in\">string</span>&#xff1a;&#x9700;&#x8981;&#x5339;&#x914d;&#x7684;&#x5c06;&#x8981;&#x88ab;&#x91cd;&#x5b9a;&#x5411;&#x8def;&#x5f84;&#x3002;\n&#x5c5e;&#x6027; <span class=\"hljs-keyword\">to</span>: <span class=\"hljs-built_in\">string</span>&#xff1a;&#x91cd;&#x5b9a;&#x5411;&#x7684; URL &#x5b57;&#x7b26;&#x4e32;\n&#x5c5e;&#x6027; <span class=\"hljs-keyword\">to</span>: object&#xff1a;&#x91cd;&#x5b9a;&#x5411;&#x7684; location &#x5bf9;&#x8c61;\n&#x5c5e;&#x6027; push: bool&#xff1a;&#x82e5;&#x4e3a;&#x771f;&#xff0c;&#x91cd;&#x5b9a;&#x5411;&#x64cd;&#x4f5c;&#x5c06;&#x4f1a;&#x628a;&#x65b0;&#x5730;&#x5740;&#x52a0;&#x5165;&#x5230;&#x8bbf;&#x95ee;&#x5386;&#x53f2;&#x8bb0;&#x5f55;&#x91cc;&#x9762;&#xff0c;&#x5e76;&#x4e14;&#x65e0;&#x6cd5;&#x56de;&#x9000;&#x5230;&#x524d;&#x9762;&#x7684;&#x9875;&#x9762;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1894,1908"}},{"content":"<pre data-lines=\"1909,1926\"><code data-lines=\"1909,1926\">&#x4ece;&#x6700;&#x7ec8;&#x6e32;&#x67d3;&#x7684; DOM &#x6765;&#x770b;&#xff0c;&#x8fd9;&#x4e24;&#x8005;&#x90fd;&#x662f;&#x94fe;&#x63a5;&#xff0c;&#x90fd;&#x662f; &#x6807;&#x7b7e;&#xff0c;&#x533a;&#x522b;&#x662f;&#x2236;\n<span class=\"hljs-symbol\">&lt;Link&gt;</span>&#x662f;react-router &#x91cc;&#x5b9e;&#x73b0;&#x8def;&#x7531;&#x8df3;&#x8f6c;&#x7684;&#x94fe;&#x63a5;&#xff0c;&#x4e00;&#x822c;&#x914d;&#x5408;<span class=\"hljs-symbol\">&lt;Route&gt;</span> &#x4f7f;&#x7528;&#xff0c;react-router&#x63a5;&#x7ba1;&#x4e86;&#x5176;&#x9ed8;&#x8ba4;&#x7684;&#x94fe;&#x63a5;&#x8df3;&#x8f6c;&#x884c;&#x4e3a;&#xff0c;&#x533a;&#x522b;&#x4e8e;&#x4f20;&#x7edf;&#x7684;&#x9875;&#x9762;&#x8df3;&#x8f6c;&#xff0c;<span class=\"hljs-symbol\">&lt;Link&gt;</span> &#x7684;&#x201c;&#x8df3;&#x8f6c;&#x201d;&#x884c;&#x4e3a;&#x53ea;&#x4f1a;&#x89e6;&#x53d1;&#x76f8;&#x5339;&#x914d;&#x7684;<span class=\"hljs-symbol\">&lt;Route&gt;</span>&#x5bf9;&#x5e94;&#x7684;&#x9875;&#x9762;&#x5185;&#x5bb9;&#x66f4;&#x65b0;&#xff0c;&#x800c;&#x4e0d;&#x4f1a;&#x5237;&#x65b0;&#x6574;&#x4e2a;&#x9875;&#x9762;&#x3002;\n<span class=\"hljs-symbol\">&lt;Link&gt;</span>&#x505a;&#x4e86;<span class=\"hljs-number\">3</span>&#x4ef6;&#x4e8b;&#x60c5;:\n\n&#x6709;onclick&#x90a3;&#x5c31;&#x6267;&#x884c;onclick\nclick&#x7684;&#x65f6;&#x5019;&#x963b;&#x6b62;<span class=\"hljs-keyword\">a</span>&#x6807;&#x7b7e;&#x9ed8;&#x8ba4;&#x4e8b;&#x4ef6;\n&#x6839;&#x636e;&#x8df3;&#x8f6c;href(&#x5373;&#x662f;<span class=\"hljs-keyword\">to</span>)&#xff0c;&#x7528;<span class=\"hljs-keyword\">history</span> (web&#x524d;&#x7aef;&#x8def;&#x7531;&#x4e24;&#x79cd;&#x65b9;&#x5f0f;&#x4e4b;&#x4e00;&#xff0c;<span class=\"hljs-keyword\">history</span> &amp; hash)&#x8df3;&#x8f6c;&#xff0c;&#x6b64;&#x65f6;&#x53ea;&#x662f;&#x94fe;&#x63a5;&#x53d8;&#x4e86;&#xff0c;&#x5e76;&#x6ca1;&#x6709;&#x5237;&#x65b0;&#x9875;&#x9762;&#x800c;<span class=\"hljs-symbol\">&lt;a&gt;</span>&#x6807;&#x7b7e;&#x5c31;&#x662f;&#x666e;&#x901a;&#x7684;&#x8d85;&#x94fe;&#x63a5;&#x4e86;&#xff0c;&#x7528;&#x4e8e;&#x4ece;&#x5f53;&#x524d;&#x9875;&#x9762;&#x8df3;&#x8f6c;&#x5230;href&#x6307;&#x5411;&#x7684;&#x53e6;&#x4e00; &#x4e2a;&#x9875;&#x9762;(&#x975e;&#x951a;&#x70b9;&#x60c5;&#x51b5;)&#x3002;\n\n<span class=\"hljs-keyword\">a</span>&#x6807;&#x7b7e;&#x9ed8;&#x8ba4;&#x4e8b;&#x4ef6;&#x7981;&#x6389;&#x4e4b;&#x540e;&#x505a;&#x4e86;&#x4ec0;&#x4e48;&#x624d;&#x5b9e;&#x73b0;&#x4e86;&#x8df3;&#x8f6c;?\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">let</span> domArr = document.getElementsByTagName(<span class=\"hljs-string\">&apos;a&apos;</span>)\n[...domArr].forEach(item=&gt;{\n    item.addEventListener(<span class=\"hljs-string\">&apos;click&apos;</span>,<span class=\"hljs-keyword\">function</span> () {\n        location.href = this.href\n    })\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1909,1926"}},{"content":"<pre data-lines=\"1927,1952\"><code data-lines=\"1927,1952\">&#xff08;<span class=\"hljs-number\">1</span>&#xff09;&#x83b7;&#x53d6;URL&#x7684;&#x53c2;&#x6570;\n\n<span class=\"hljs-keyword\">get</span>&#x4f20;&#x503c;\n\n&#x8def;&#x7531;&#x914d;&#x7f6e;&#x8fd8;&#x662f;&#x666e;&#x901a;&#x7684;&#x914d;&#x7f6e;&#xff0c;&#x5982;&#xff1a;<span class=\"hljs-string\">&apos;admin&apos;</span>&#xff0c;&#x4f20;&#x53c2;&#x65b9;&#x5f0f;&#x5982;&#xff1a;<span class=\"hljs-string\">&apos;admin?id=&apos;</span><span class=\"hljs-number\">1111&apos;&apos;</span>&#x3002;&#x901a;&#x8fc7;<span class=\"hljs-keyword\">this</span>.props.location.search&#x83b7;&#x53d6;url&#x83b7;&#x53d6;&#x5230;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;<span class=\"hljs-string\">&apos;?id=&apos;</span><span class=\"hljs-number\">1111&apos;</span>\n&#x53ef;&#x4ee5;&#x7528;url&#xff0c;qs&#xff0c;querystring&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x63d0;&#x4f9b;&#x7684;api URLSearchParams&#x5bf9;&#x8c61;&#x6216;&#x8005;&#x81ea;&#x5df1;&#x5c01;&#x88c5;&#x7684;&#x65b9;&#x6cd5;&#x53bb;&#x89e3;&#x6790;&#x51fa;id&#x7684;&#x503c;&#x3002;\n\n&#x52a8;&#x6001;&#x8def;&#x7531;&#x4f20;&#x503c;\n\n&#x8def;&#x7531;&#x9700;&#x8981;&#x914d;&#x7f6e;&#x6210;&#x52a8;&#x6001;&#x8def;&#x7531;&#xff1a;&#x5982;path=<span class=\"hljs-string\">&apos;/admin/:id&apos;</span>&#xff0c;&#x4f20;&#x53c2;&#x65b9;&#x5f0f;&#xff0c;&#x5982;<span class=\"hljs-string\">&apos;admin/111&apos;</span>&#x3002;&#x901a;&#x8fc7;<span class=\"hljs-keyword\">this</span>.props.match.<span class=\"hljs-keyword\">params</span>.id &#x53d6;&#x5f97;url&#x4e2d;&#x7684;&#x52a8;&#x6001;&#x8def;&#x7531;id&#x90e8;&#x5206;&#x7684;&#x503c;&#xff0c;&#x9664;&#x6b64;&#x4e4b;&#x5916;&#x8fd8;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;useParams&#xff08;Hooks&#xff09;&#x6765;&#x83b7;&#x53d6;\n\n&#x901a;&#x8fc7;query&#x6216;state&#x4f20;&#x503c;\n\n&#x4f20;&#x53c2;&#x65b9;&#x5f0f;&#x5982;&#xff1a;&#x5728;Link&#x7ec4;&#x4ef6;&#x7684;to&#x5c5e;&#x6027;&#x4e2d;&#x53ef;&#x4ee5;&#x4f20;&#x9012;&#x5bf9;&#x8c61;{pathname:<span class=\"hljs-string\">&apos;/admin&apos;</span>,query:<span class=\"hljs-string\">&apos;111&apos;</span>,state:<span class=\"hljs-string\">&apos;111&apos;</span>};&#x3002;&#x901a;&#x8fc7;<span class=\"hljs-keyword\">this</span>.props.location.state&#x6216;<span class=\"hljs-keyword\">this</span>.props.location.query&#x6765;&#x83b7;&#x53d6;&#x5373;&#x53ef;&#xff0c;&#x4f20;&#x9012;&#x7684;&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f;&#x5bf9;&#x8c61;&#x3001;&#x6570;&#x7ec4;&#x7b49;&#xff0c;&#x4f46;&#x662f;&#x5b58;&#x5728;&#x7f3a;&#x70b9;&#x5c31;&#x662f;&#x53ea;&#x8981;&#x5237;&#x65b0;&#x9875;&#x9762;&#xff0c;&#x53c2;&#x6570;&#x5c31;&#x4f1a;&#x4e22;&#x5931;&#x3002;\n&#xff08;<span class=\"hljs-number\">2</span>&#xff09;&#x83b7;&#x53d6;&#x5386;&#x53f2;&#x5bf9;&#x8c61;\n\n&#x5982;&#x679c;React &gt;= <span class=\"hljs-number\">16.8</span> &#x65f6;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; React Router&#x4e2d;&#x63d0;&#x4f9b;&#x7684;Hooks\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;import { useHistory } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react-router-dom&quot;</span>;\n<span class=\"hljs-keyword\">let</span> history = useHistory();\n\n<span class=\"hljs-number\">2.</span>&#x4f7f;&#x7528;<span class=\"hljs-keyword\">this</span>.props.history&#x83b7;&#x53d6;&#x5386;&#x53f2;&#x5bf9;&#x8c61;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-keyword\">let</span> history = <span class=\"hljs-keyword\">this</span>.props.history;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1927,1952"}},{"content":"<pre data-lines=\"1953,1976\"><code data-lines=\"1953,1976\">&#x5f53;&#x8def;&#x7531;&#x53d8;&#x5316;&#x65f6;&#xff0c;&#x5373;&#x7ec4;&#x4ef6;&#x7684;props&#x53d1;&#x751f;&#x4e86;&#x53d8;&#x5316;&#xff0c;&#x4f1a;&#x8c03;&#x7528;componentWillReceiveProps&#x7b49;&#x751f;&#x547d;&#x5468;&#x671f;&#x94a9;&#x5b50;&#x3002;&#x90a3;&#x9700;&#x8981;&#x505a;&#x7684;&#x53ea;&#x662f;&#xff1a; &#x5f53;&#x8def;&#x7531;&#x6539;&#x53d8;&#x65f6;&#xff0c;&#x6839;&#x636e;&#x8def;&#x7531;&#xff0c;&#x4e5f;&#x53bb;&#x8bf7;&#x6c42;&#x6570;&#x636e;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">NewsList</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n  componentDidMount () {\n     <span class=\"hljs-keyword\">this</span>.fetchData(<span class=\"hljs-keyword\">this</span>.props.location);\n  }\n  \n  fetchData(location) {\n    const <span class=\"hljs-class\"><span class=\"hljs-keyword\">type</span> </span>= location.pathname.replace(&apos;/&apos;, &apos;&apos;) || &apos;top&apos;\n    <span class=\"hljs-keyword\">this</span>.props.dispatch(fetchListData(<span class=\"hljs-class\"><span class=\"hljs-keyword\">type</span>))</span>\n  }\n  componentWillReceiveProps(nextProps) {\n     <span class=\"hljs-keyword\">if</span> (nextProps.location.pathname != <span class=\"hljs-keyword\">this</span>.props.location.pathname) {\n         <span class=\"hljs-keyword\">this</span>.fetchData(nextProps.location);\n     } \n  }\n  render () {\n    ...\n  }\n}\n\n&#x5229;&#x7528;&#x751f;&#x547d;&#x5468;&#x671f;componentWillReceiveProps&#xff0c;&#x8fdb;&#x884c;&#x91cd;&#x65b0;render&#x7684;&#x9884;&#x5904;&#x7406;&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1953,1976"}},{"content":"<pre data-lines=\"1977,2039\"><code data-lines=\"1977,2039\">React-Router &#x652f;&#x6301;&#x4f7f;&#x7528; <span class=\"hljs-built_in\">hash</span>&#xff08;&#x5bf9;&#x5e94; HashRouter&#xff09;&#x548c; browser&#xff08;&#x5bf9;&#x5e94; BrowserRouter&#xff09; &#x4e24;&#x79cd;&#x8def;&#x7531;&#x89c4;&#x5219;&#xff0c; react-router-dom &#x63d0;&#x4f9b;&#x4e86; BrowserRouter &#x548c; HashRouter &#x4e24;&#x4e2a;&#x7ec4;&#x4ef6;&#x6765;&#x5b9e;&#x73b0;&#x5e94;&#x7528;&#x7684; UI &#x548c; URL &#x540c;&#x6b65;&#xff1a;\n\nBrowserRouter &#x521b;&#x5efa;&#x7684; URL &#x683c;&#x5f0f;&#xff1a;xxx.com/path\nHashRouter &#x521b;&#x5efa;&#x7684; URL &#x683c;&#x5f0f;&#xff1a;xxx.com/#/path\n\n&#xff08;1&#xff09;BrowserRouter\n&#x5b83;&#x4f7f;&#x7528; HTML5 &#x63d0;&#x4f9b;&#x7684; <span class=\"hljs-built_in\">history</span> API&#xff08;pushState&#x3001;replaceState &#x548c; popstate &#x4e8b;&#x4ef6;&#xff09;&#x6765;&#x4fdd;&#x6301; UI &#x548c; URL &#x7684;&#x540c;&#x6b65;&#x3002;&#x7531;&#x6b64;&#x53ef;&#x4ee5;&#x770b;&#x51fa;&#xff0c;BrowserRouter &#x662f;&#x4f7f;&#x7528; HTML 5 &#x7684; <span class=\"hljs-built_in\">history</span> API &#x6765;&#x63a7;&#x5236;&#x8def;&#x7531;&#x8df3;&#x8f6c;&#x7684;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;&lt;BrowserRouter\n    <span class=\"hljs-built_in\">basename</span>={string}\n    forceRefresh={bool}\n    getUserConfirmation={func}\n    keyLength={number}\n/&gt;\n\n&#x5176;&#x4e2d;&#x7684;&#x5c5e;&#x6027;&#x5982;&#x4e0b;&#xff1a;\n\n<span class=\"hljs-built_in\">basename</span> &#x6240;&#x6709;&#x8def;&#x7531;&#x7684;&#x57fa;&#x51c6; URL&#x3002;<span class=\"hljs-built_in\">basename</span> &#x7684;&#x6b63;&#x786e;&#x683c;&#x5f0f;&#x662f;&#x524d;&#x9762;&#x6709;&#x4e00;&#x4e2a;&#x524d;&#x5bfc;&#x659c;&#x6760;&#xff0c;&#x4f46;&#x4e0d;&#x80fd;&#x6709;&#x5c3e;&#x90e8;&#x659c;&#x6760;&#xff1b;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;&lt;BrowserRouter <span class=\"hljs-built_in\">basename</span>=<span class=\"hljs-string\">&quot;/calendar&quot;</span>&gt;\n    &lt;Link to=<span class=\"hljs-string\">&quot;/today&quot;</span> /&gt;\n&lt;/BrowserRouter&gt;\n\n&#x7b49;&#x540c;&#x4e8e;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;&lt;a href=<span class=\"hljs-string\">&quot;/calendar/today&quot;</span> /&gt;\n\n\nforceRefresh &#x5982;&#x679c;&#x4e3a; <span class=\"hljs-literal\">true</span>&#xff0c;&#x5728;&#x5bfc;&#x822a;&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#x6574;&#x4e2a;&#x9875;&#x9762;&#x5c06;&#x4f1a;&#x5237;&#x65b0;&#x3002;&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x53ea;&#x6709;&#x5728;&#x4e0d;&#x652f;&#x6301; HTML5 <span class=\"hljs-built_in\">history</span> API &#x7684;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#x4f7f;&#x7528;&#x6b64;&#x529f;&#x80fd;&#xff1b;\ngetUserConfirmation &#x7528;&#x4e8e;&#x786e;&#x8ba4;&#x5bfc;&#x822a;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x9ed8;&#x8ba4;&#x4f7f;&#x7528; window.confirm&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5f53;&#x4ece; /a &#x5bfc;&#x822a;&#x81f3; /b &#x65f6;&#xff0c;&#x4f1a;&#x4f7f;&#x7528;&#x9ed8;&#x8ba4;&#x7684; confirm &#x51fd;&#x6570;&#x5f39;&#x51fa;&#x4e00;&#x4e2a;&#x63d0;&#x793a;&#xff0c;&#x7528;&#x6237;&#x70b9;&#x51fb;&#x786e;&#x5b9a;&#x540e;&#x624d;&#x8fdb;&#x884c;&#x5bfc;&#x822a;&#xff0c;&#x5426;&#x5219;&#x4e0d;&#x505a;&#x4efb;&#x4f55;&#x5904;&#x7406;&#xff1b;\n\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;// &#x8fd9;&#x662f;&#x9ed8;&#x8ba4;&#x7684;&#x786e;&#x8ba4;&#x51fd;&#x6570;\nconst getConfirmation = (message, callback) =&gt; {\n  const allowTransition = window.confirm(message);\n  callback(allowTransition);\n}\n&lt;BrowserRouter getUserConfirmation={getConfirmation} /&gt;\n\n\n&#x9700;&#x8981;&#x914d;&#x5408;&lt;Prompt&gt; &#x4e00;&#x8d77;&#x4f7f;&#x7528;&#x3002;\n\n\nKeyLength &#x7528;&#x6765;&#x8bbe;&#x7f6e; Location.Key &#x7684;&#x957f;&#x5ea6;&#x3002;\n\n&#xff08;2&#xff09;HashRouter\n&#x4f7f;&#x7528; URL &#x7684; <span class=\"hljs-built_in\">hash</span> &#x90e8;&#x5206;&#xff08;&#x5373; window.location.hash&#xff09;&#x6765;&#x4fdd;&#x6301; UI &#x548c; URL &#x7684;&#x540c;&#x6b65;&#x3002;&#x7531;&#x6b64;&#x53ef;&#x4ee5;&#x770b;&#x51fa;&#xff0c;HashRouter &#x662f;&#x901a;&#x8fc7; URL &#x7684; <span class=\"hljs-built_in\">hash</span> &#x5c5e;&#x6027;&#x6765;&#x63a7;&#x5236;&#x8def;&#x7531;&#x8df3;&#x8f6c;&#x7684;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;&lt;HashRouter\n    <span class=\"hljs-built_in\">basename</span>={string}\n    getUserConfirmation={func}\n    hashType={string}  \n/&gt;\n\n&#x5176;&#x53c2;&#x6570;&#x5982;&#x4e0b;&#xff1a;\n\n<span class=\"hljs-built_in\">basename</span>, getUserConfirmation &#x548c; BrowserRouter &#x529f;&#x80fd;&#x4e00;&#x6837;&#xff1b;\nhashType window.location.hash &#x4f7f;&#x7528;&#x7684; <span class=\"hljs-built_in\">hash</span> &#x7c7b;&#x578b;&#xff0c;&#x6709;&#x5982;&#x4e0b;&#x51e0;&#x79cd;&#xff1a;\n\nslash - &#x540e;&#x9762;&#x8ddf;&#x4e00;&#x4e2a;&#x659c;&#x6760;&#xff0c;&#x4f8b;&#x5982; <span class=\"hljs-comment\">#/ &#x548c; #/sunshine/lollipops&#xff1b;</span>\nnoslash - &#x540e;&#x9762;&#x6ca1;&#x6709;&#x659c;&#x6760;&#xff0c;&#x4f8b;&#x5982; <span class=\"hljs-comment\"># &#x548c; #sunshine/lollipops&#xff1b;</span>\nhashbang - Google &#x98ce;&#x683c;&#x7684; ajax crawlable&#xff0c;&#x4f8b;&#x5982; <span class=\"hljs-comment\">#!/ &#x548c; #!/sunshine/lollipops&#x3002;</span>\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1977,2039"}},{"content":"<pre data-lines=\"2040,2064\"><code data-lines=\"2040,2064\"><span class=\"language-xml\">Switch &#x901a;&#x5e38;&#x88ab;&#x7528;&#x6765;&#x5305;&#x88f9; Route&#xff0c;&#x7528;&#x4e8e;&#x6e32;&#x67d3;&#x4e0e;&#x8def;&#x5f84;&#x5339;&#x914d;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5b50; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x6216; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Redirect</span>&gt;</span>&#xff0c;&#x5b83;&#x91cc;&#x9762;&#x4e0d;&#x80fd;&#x653e;&#x5176;&#x4ed6;&#x5143;&#x7d20;&#x3002;\n&#x5047;&#x5982;&#x4e0d;&#x52a0; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;import </span><span class=\"hljs-template-variable\">{ Route }</span><span class=\"language-xml\"> from &apos;react-router-dom&apos;\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Home}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Route</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/login&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Login}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Route</span>&gt;</span>\n\nRoute &#x7ec4;&#x4ef6;&#x7684; path &#x5c5e;&#x6027;&#x7528;&#x4e8e;&#x5339;&#x914d;&#x8def;&#x5f84;&#xff0c;&#x56e0;&#x4e3a;&#x9700;&#x8981;&#x5339;&#x914d; / &#x5230; Home&#xff0c;&#x5339;&#x914d; /login &#x5230; Login&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x4e24;&#x4e2a; Route&#xff0c;&#x4f46;&#x662f;&#x4e0d;&#x80fd;&#x8fd9;&#x4e48;&#x5199;&#x3002;&#x8fd9;&#x6837;&#x5199;&#x7684;&#x8bdd;&#xff0c;&#x5f53; URL &#x7684; path &#x4e3a; &#x201c;/login&#x201d; &#x65f6;&#xff0c;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/&quot;</span> /&gt;</span>&#x548c;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/login&quot;</span> /&gt;</span> &#x90fd;&#x4f1a;&#x88ab;&#x5339;&#x914d;&#xff0c;&#x56e0;&#x6b64;&#x9875;&#x9762;&#x4f1a;&#x5c55;&#x793a; Home &#x548c; Login &#x4e24;&#x4e2a;&#x7ec4;&#x4ef6;&#x3002;&#x8fd9;&#x65f6;&#x5c31;&#x9700;&#x8981;&#x501f;&#x52a9; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#x6765;&#x505a;&#x5230;&#x53ea;&#x663e;&#x793a;&#x4e00;&#x4e2a;&#x5339;&#x914d;&#x7ec4;&#x4ef6;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;import </span><span class=\"hljs-template-variable\">{ Switch, Route}</span><span class=\"language-xml\"> from &apos;react-router-dom&apos;\n    \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Home}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Route</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/login&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Login}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Route</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Switch</span>&gt;</span>\n\n&#x6b64;&#x65f6;&#xff0c;&#x518d;&#x8bbf;&#x95ee; &#x201c;/login&#x201d; &#x8def;&#x5f84;&#x65f6;&#xff0c;&#x5374;&#x53ea;&#x663e;&#x793a;&#x4e86; Home &#x7ec4;&#x4ef6;&#x3002;&#x8fd9;&#x662f;&#x5c31;&#x7528;&#x5230;&#x4e86;exact&#x5c5e;&#x6027;&#xff0c;&#x5b83;&#x7684;&#x4f5c;&#x7528;&#x5c31;&#x662f;&#x7cbe;&#x786e;&#x5339;&#x914d;&#x8def;&#x5f84;&#xff0c;&#x7ecf;&#x5e38;&#x4e0e;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span> &#x8054;&#x5408;&#x4f7f;&#x7528;&#x3002;&#x53ea;&#x6709;&#x5f53; URL &#x548c;&#x8be5; <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span>&gt;</span> &#x7684; path &#x5c5e;&#x6027;&#x5b8c;&#x5168;&#x4e00;&#x81f4;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x624d;&#x80fd;&#x5339;&#x914d;&#x4e0a;&#xff1a;\njavascript &#x4ee3;&#x7801;&#x89e3;&#x8bfb;&#x590d;&#x5236;&#x4ee3;&#x7801;import </span><span class=\"hljs-template-variable\">{ Switch, Route}</span><span class=\"language-xml\"> from &apos;react-router-dom&apos;\n   \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Switch</span>&gt;</span>\n   <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">exact</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Home}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Route</span>&gt;</span>\n   <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">exact</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">&quot;/login&quot;</span> <span class=\"hljs-attr\">component</span>=</span></span><span class=\"hljs-template-variable\">{Login}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Route</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Switch</span>&gt;</span>\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"2040,2064"}}],"payload":{"tag":"h2","lines":"1838,1839"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
