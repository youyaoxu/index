<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x793a;&#x4f8b;","children":[{"content":"Middle","children":[{"content":"Middle/Middle","children":[{"content":"<pre data-lines=\"118,135\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    <span class=\"hljs-keyword\">pass</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"118,135"}},{"content":"<pre data-lines=\"136,288\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n<span class=\"hljs-comment\"># &#x4e2d;&#x95f4;&#x4ef6;1 - &#x968f;&#x673a;User-Agent</span>\n<span class=\"hljs-keyword\">from</span> fake_useragent <span class=\"hljs-keyword\">import</span> UserAgent\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleRandomUaDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Request()&#x4e2d;&#x7684;&#x6240;&#x6709;&#x53c2;&#x6570;&#x90fd;&#x662f;&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;request&#x7684;&#x5c5e;&#x6027;</span>\n        agent = UserAgent().random\n        request.headers[<span class=\"hljs-string\">&apos;User-Agent&apos;</span>] = agent\n        <span class=\"hljs-built_in\">print</span>(agent)\n\n<span class=\"hljs-comment\"># &#x4e2d;&#x95f4;&#x4ef6;2 - &#x968f;&#x673a;User-Agent</span>\n<span class=\"hljs-keyword\">from</span> .proxypool <span class=\"hljs-keyword\">import</span> proxy_list\n<span class=\"hljs-keyword\">import</span> random\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleRandomProxyDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x968f;&#x673a;&#x83b7;&#x53d6;&#x4e00;&#x4e2a;&#x4ee3;&#x7406;&quot;&quot;&quot;</span>\n        proxy = random.choice(proxy_list)\n        <span class=\"hljs-comment\"># meta&#x53c2;&#x6570;&#x4e24;&#x4e2a;&#x4f5c;&#x7528;&#xff1a;1&#x3001;&#x4f20;&#x9012;&#x6570;&#x636e; 2&#x3001;&#x5b9a;&#x4e49;&#x4ee3;&#x7406;</span>\n        <span class=\"hljs-comment\"># Request(url=url,meta={&apos;item&apos;:item, &apos;proxy&apos;:&apos;http://127.0.0.1:8888&apos;})</span>\n        request.meta[<span class=\"hljs-string\">&apos;proxy&apos;</span>] = proxy\n        <span class=\"hljs-built_in\">print</span>(proxy)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x4e00;&#x65e6;&#x4ee3;&#x7406;IP&#x4e2d;&#x95f4;&#x4ef6;&#x629b;&#x51fa;&#x5f02;&#x5e38;,&#x5c31;&#x4f1a;&#x88ab;&#x6b64;&#x51fd;&#x6570;&#x6355;&#x83b7;&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># &#x5982;&#x679c;&#x8bf4;&#x629b;&#x51fa;&#x5f02;&#x5e38;,&#x518d;&#x6b21;&#x628a;request&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;&#x4ea4;&#x7ed9;&#x4e2d;&#x95f4;&#x4ef6;</span>\n        <span class=\"hljs-keyword\">return</span> request\n\n<span class=\"hljs-comment\"># &#x4e2d;&#x95f4;&#x4ef6;3 - &#x8bbe;&#x7f6e;Cookie</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleCookieDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        cookies_dict = <span class=\"hljs-variable language_\">self</span>.get_cookies()\n        <span class=\"hljs-comment\"># &#x5229;&#x7528;&#x7684;&#x662f; Request() &#x4e2d;&#x7684;cookies&#x53c2;&#x6570;</span>\n        request.cookies = cookies_dict\n        <span class=\"hljs-built_in\">print</span>(cookies_dict)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_cookies</span>(<span class=\"hljs-params\">self</span>):\n        cookie_str = <span class=\"hljs-string\">&apos;BIDUPSID=42B3E7136E55DDCE699629A13C7FF407; PSTM=1585399047; BD_UPN=12314753; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; sug=3; sugstore=0; ORIGIN=0; bdime=0; BAIDUID=42B3E7136E55DDCE954ABF273651C898:SL=0:NR=10:FG=1; H_PS_PSSID=30972_1425_31170_21106_31187_30824_26350_22158; ispeed_lsm=0; delPer=0; BD_CK_SAM=1; PSINO=2; BD_HOME=1&apos;</span>\n        cookies_dict = {}\n        <span class=\"hljs-keyword\">for</span> kv <span class=\"hljs-keyword\">in</span> cookie_str.split(<span class=\"hljs-string\">&apos;; &apos;</span>):\n            key = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">0</span>]\n            value = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">1</span>]\n            cookies_dict[key] = value\n\n        <span class=\"hljs-keyword\">return</span> cookies_dict\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"136,288"}},{"content":"<pre data-lines=\"289,303\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddlePipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"289,303"}},{"content":"<pre data-lines=\"304,311\"><code class=\"language-python\">proxy_list = [\n    <span class=\"hljs-string\">&apos;http://127.0.0.1:8888&apos;</span>,\n    <span class=\"hljs-string\">&apos;http://127.0.0.1:9999&apos;</span>,\n    <span class=\"hljs-string\">&apos;http://127.0.0.1:6666&apos;</span>,\n]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"304,311"}},{"content":"<pre data-lines=\"312,408\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Middle project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Middle&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Middle.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Middle.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Middle (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\n<span class=\"hljs-comment\">#DOWNLOAD_DELAY = 3</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\nCOOKIES_ENABLED = <span class=\"hljs-literal\">True</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Middle.middlewares.MiddleSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\nDOWNLOADER_MIDDLEWARES = {\n   <span class=\"hljs-string\">&apos;Middle.middlewares.MiddleDownloaderMiddleware&apos;</span>: <span class=\"hljs-number\">543</span>,\n   <span class=\"hljs-string\">&apos;Middle.middlewares.MiddleRandomUaDownloaderMiddleware&apos;</span> : <span class=\"hljs-number\">200</span>,\n   <span class=\"hljs-string\">&apos;Middle.middlewares.MiddleRandomProxyDownloaderMiddleware&apos;</span> : <span class=\"hljs-number\">300</span>,\n   <span class=\"hljs-string\">&apos;Middle.middlewares.MiddleCookieDownloaderMiddleware&apos;</span> : <span class=\"hljs-number\">230</span>\n}\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n<span class=\"hljs-comment\">#ITEM_PIPELINES = {</span>\n<span class=\"hljs-comment\">#    &apos;Middle.pipelines.MiddlePipeline&apos;: 300,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"312,408"}}],"payload":{"tag":"h5","lines":"116,117"}},{"content":"Middle/Middle/spiders","children":[{"content":"<pre data-lines=\"413,427\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MiddleSpider</span>(scrapy.Spider):\n    name = <span class=\"hljs-string\">&apos;middle&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;www.baidu.com&apos;</span>]\n    start_urls = [<span class=\"hljs-string\">&apos;https://www.baidu.com/&apos;</span>]\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\">self, response</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x541b;&#x4e0d;&#x89c1;&#x9ec4;&#x6cb3;&#x4e4b;&#x6c34;&#x5929;&#x4e0a;&#x6765;,&#x5954;&#x6d41;&#x5230;&#x6d77;&#x4e0d;&#x590d;&#x56de;&apos;</span>)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"413,427"}}],"payload":{"tag":"h5","lines":"411,412"}}],"payload":{"tag":"h4","lines":"91,92"}},{"content":"Ppt","children":[{"content":"Ppt/Ppt","children":[{"content":"<pre data-lines=\"457,485\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PptItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># PPT&#x7c7b;&#x522b;&#x3001;&#x7c7b;&#x522b;&#x94fe;&#x63a5;</span>\n    ppt_type = scrapy.Field()\n    ppt_url = scrapy.Field()\n\n    <span class=\"hljs-comment\"># PPT&#x5206;&#x7c7b;&#x94fe;&#x63a5;</span>\n    ppt_info_url = scrapy.Field()\n    <span class=\"hljs-comment\"># PPT&#x8be6;&#x60c5;&#x9875;&#x94fe;&#x63a5;</span>\n    ppt_info_url = scrapy.Field()\n    <span class=\"hljs-comment\"># PPT&#x4e0b;&#x8f7d;&#x94fe;&#x63a5;</span>\n    ppt_down_url = scrapy.Field()\n\n    <span class=\"hljs-comment\"># PPT&#x540d;&#x5b57;</span>\n    ppt_name = scrapy.Field()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"457,485"}},{"content":"<pre data-lines=\"486,592\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PptSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PptDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"486,592"}},{"content":"<pre data-lines=\"593,615\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n<span class=\"hljs-keyword\">from</span> scrapy.pipelines.files <span class=\"hljs-keyword\">import</span> FilesPipeline\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PptPipeline</span>(<span class=\"hljs-title class_ inherited__\">FilesPipeline</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_media_requests</span>(<span class=\"hljs-params\">self, item, info</span>):\n        <span class=\"hljs-keyword\">yield</span> scrapy.Request(url=item[<span class=\"hljs-string\">&apos;ppt_down_url&apos;</span>],meta={<span class=\"hljs-string\">&apos;item&apos;</span>:item})\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">file_path</span>(<span class=\"hljs-params\">self, request, response=<span class=\"hljs-literal\">None</span>, info=<span class=\"hljs-literal\">None</span></span>):\n        item = request.meta[<span class=\"hljs-string\">&apos;item&apos;</span>]\n        filename = <span class=\"hljs-string\">&apos;{}/{}.zip&apos;</span>.<span class=\"hljs-built_in\">format</span>(item[<span class=\"hljs-string\">&apos;ppt_type&apos;</span>],item[<span class=\"hljs-string\">&apos;ppt_name&apos;</span>])\n\n        <span class=\"hljs-keyword\">return</span> filename\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"593,615"}},{"content":"<pre data-lines=\"616,711\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Ppt project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Ppt&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Ppt.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Ppt.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Ppt (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\nDOWNLOAD_DELAY = <span class=\"hljs-number\">0.5</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\">#COOKIES_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Ppt.middlewares.PptSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Ppt.middlewares.PptDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\nITEM_PIPELINES = {\n   <span class=\"hljs-string\">&apos;Ppt.pipelines.PptPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n}\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\nFILES_STORE = <span class=\"hljs-string\">&apos;./downppt/&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"616,711"}}],"payload":{"tag":"h5","lines":"455,456"}},{"content":"Ppt/Ppt/spiders","children":[{"content":"<pre data-lines=\"716,774\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"hljs-keyword\">import</span> scrapy\n<span class=\"hljs-keyword\">from</span> ..items <span class=\"hljs-keyword\">import</span> PptItem\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PptSpider</span>(scrapy.Spider):\n    name = <span class=\"hljs-string\">&apos;ppt&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;www.1ppt.com&apos;</span>]\n    start_urls = [<span class=\"hljs-string\">&apos;http://www.1ppt.com/xiazai/&apos;</span>]\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\">self, response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x89e3;&#x6790;&#x4e00;&#x7ea7;&#x9875;&#x9762;,&#x83b7;&#x53d6;&#x6240;&#x6709;&#x5927;&#x5206;&#x7c7b;&#x7684;&#x540d;&#x79f0;&#x548c;&#x94fe;&#x63a5;&quot;&quot;&quot;</span>\n        li_list = response.xpath(<span class=\"hljs-string\">&apos;//div[@class=&quot;col_nav clearfix&quot;]/ul/li&apos;</span>)\n        <span class=\"hljs-comment\"># &#x7b2c;&#x4e00;&#x4e2a;&#x5143;&#x7d20;&#x4e3a; &quot;&#x680f;&#x76ee;&#x5206;&#x7c7b;&quot; ,&#x6240;&#x4ee5;&#x628a;&#x5b83;&#x7565;&#x8fc7;</span>\n        <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> li_list[<span class=\"hljs-number\">1</span>:]:\n            item = PptItem()\n            item[<span class=\"hljs-string\">&apos;ppt_type&apos;</span>] = li.xpath(<span class=\"hljs-string\">&apos;./a/text()&apos;</span>).get()\n            item[<span class=\"hljs-string\">&apos;ppt_url&apos;</span>] = <span class=\"hljs-string\">&apos;http://www.1ppt.com&apos;</span> + li.xpath(<span class=\"hljs-string\">&apos;./a/@href&apos;</span>).get()\n            <span class=\"hljs-comment\"># &#x7ee7;&#x7eed;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;</span>\n            <span class=\"hljs-keyword\">yield</span> scrapy.Request(url=item[<span class=\"hljs-string\">&apos;ppt_url&apos;</span>],meta={<span class=\"hljs-string\">&apos;meta1&apos;</span>:item},callback=<span class=\"hljs-variable language_\">self</span>.get_total_page)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_total_page</span>(<span class=\"hljs-params\">self,response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;&#x6bcf;&#x4e2a;&#x5206;&#x7c7b;&#x7684;&#x603b;&#x9875;&#x6570;,&#x5e76;&#x4f9d;&#x6b21;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        meta1_item = response.meta[<span class=\"hljs-string\">&apos;meta1&apos;</span>]\n        <span class=\"hljs-comment\"># &#x603b;&#x9875;&#x6570;</span>\n        last_page = response.xpath(<span class=\"hljs-string\">&apos;//ul[@class=&quot;pages&quot;]/li&apos;</span>)[-<span class=\"hljs-number\">1</span>]\n        <span class=\"hljs-keyword\">try</span>:\n            total_page = <span class=\"hljs-built_in\">int</span>(last_page.xpath(<span class=\"hljs-string\">&apos;./a/@href&apos;</span>).get().split(<span class=\"hljs-string\">&apos;.&apos;</span>)[<span class=\"hljs-number\">0</span>].split(<span class=\"hljs-string\">&apos;_&apos;</span>)[-<span class=\"hljs-number\">1</span>])\n            name = last_page.xpath(<span class=\"hljs-string\">&apos;./a/@href&apos;</span>).get().split(<span class=\"hljs-string\">&apos;.&apos;</span>)[<span class=\"hljs-number\">0</span>].split(<span class=\"hljs-string\">&apos;_&apos;</span>)[<span class=\"hljs-number\">1</span>]\n            <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>,total_page+<span class=\"hljs-number\">1</span>):\n                item = PptItem()\n                ppt_page_url = meta1_item[<span class=\"hljs-string\">&apos;ppt_url&apos;</span>] + <span class=\"hljs-string\">&apos;ppt_{}_{}.html&apos;</span>.<span class=\"hljs-built_in\">format</span>(name,i)\n                item[<span class=\"hljs-string\">&apos;ppt_type&apos;</span>] = meta1_item[<span class=\"hljs-string\">&apos;ppt_type&apos;</span>]\n                <span class=\"hljs-comment\"># &#x628a;&#x5f53;&#x524d;&#x7c7b;&#x522b;&#x4e0b;&#x7684;&#x6240;&#x6709;&#x9875;&#x4f9d;&#x6b21;&#x5165;&#x961f;&#x5217;</span>\n                <span class=\"hljs-keyword\">yield</span> scrapy.Request(url=ppt_page_url,meta={<span class=\"hljs-string\">&apos;meta2&apos;</span>:item},callback=<span class=\"hljs-variable language_\">self</span>.get_ppt_info_url)\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_ppt_info_url</span>(<span class=\"hljs-params\">self,response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;PPT&#x8be6;&#x60c5;&#x9875;&#x7684;&#x94fe;&#x63a5;&quot;&quot;&quot;</span>\n        meta2_item = response.meta[<span class=\"hljs-string\">&apos;meta2&apos;</span>]\n        href_list = response.xpath(<span class=\"hljs-string\">&apos;//ul[@class=&quot;tplist&quot;]/li/a/@href&apos;</span>).extract()\n        <span class=\"hljs-keyword\">for</span> href <span class=\"hljs-keyword\">in</span> href_list:\n            item = PptItem()\n            item[<span class=\"hljs-string\">&apos;ppt_info_url&apos;</span>] = <span class=\"hljs-string\">&apos;http://www.1ppt.com&apos;</span> + href\n            item[<span class=\"hljs-string\">&apos;ppt_type&apos;</span>] = meta2_item[<span class=\"hljs-string\">&apos;ppt_type&apos;</span>]\n\n            <span class=\"hljs-keyword\">yield</span> scrapy.Request(url=item[<span class=\"hljs-string\">&apos;ppt_info_url&apos;</span>],meta={<span class=\"hljs-string\">&apos;meta3&apos;</span>:item},callback=<span class=\"hljs-variable language_\">self</span>.get_ppt_down_url)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_ppt_down_url</span>(<span class=\"hljs-params\">self,response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;&#x5177;&#x4f53;&#x7684;&#x4e0b;&#x8f7d;&#x94fe;&#x63a5;&quot;&quot;&quot;</span>\n        item = response.meta[<span class=\"hljs-string\">&apos;meta3&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;ppt_down_url&apos;</span>] = response.xpath(<span class=\"hljs-string\">&apos;//ul[@class=&quot;downurllist&quot;]/li/a/@href&apos;</span>).get()\n        item[<span class=\"hljs-string\">&apos;ppt_name&apos;</span>] = response.xpath(<span class=\"hljs-string\">&apos;//div[@class=&quot;ppt_info clearfix&quot;]/h1/text()&apos;</span>).get()\n\n        <span class=\"hljs-keyword\">yield</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"716,774"}}],"payload":{"tag":"h5","lines":"714,715"}}],"payload":{"tag":"h4","lines":"430,431"}},{"content":"PythonHttp&#x8c03;&#x7528;&#x5b9e;&#x4f8b;","children":[{"content":"<pre data-lines=\"779,828\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x8bbf;&#x95ee;&#x4e91;&#x6253;&#x7801;&#x5b98;&#x7f51;,&#x8bc6;&#x522b;&#x9a8c;&#x8bc1;&#x7801;&#x56fe;&#x7247;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">from</span> ydmapi <span class=\"hljs-keyword\">import</span> get_result\n<span class=\"hljs-comment\"># &#x622a;&#x53d6;&#x6307;&#x5b9a;&#x5750;&#x6807;&#x7684;&#x56fe;&#x7247;</span>\n<span class=\"hljs-keyword\">from</span> PIL <span class=\"hljs-keyword\">import</span> Image\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdmSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.browser = webdriver.Chrome()\n        <span class=\"hljs-variable language_\">self</span>.browser.maximize_window()\n        <span class=\"hljs-variable language_\">self</span>.browser.get(<span class=\"hljs-string\">&apos;http://www.yundama.com/&apos;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_image</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;&#x9a8c;&#x8bc1;&#x7801;&#x56fe;&#x7247;(&#x622a;&#x53d6;&#x51fa;&#x6765;)&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># 1&#x3001;&#x83b7;&#x53d6;&#x5b98;&#x7f51;&#x5c4f;&#x5e55;&#x622a;&#x56fe;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.save_screenshot(<span class=\"hljs-string\">&apos;index.png&apos;</span>)\n        <span class=\"hljs-comment\"># 2&#x3001;&#x622a;&#x53d6;&#x9a8c;&#x8bc1;&#x7801;&#x56fe;&#x7247;</span>\n        <span class=\"hljs-comment\"># location: &#x83b7;&#x53d6;&#x67d0;&#x4e2a;&#x8282;&#x70b9;&#x5de6;&#x4e0a;&#x89d2;&#x7684;&#x5750;&#x6807;&#xff08;x&#x3001;y&#x5750;&#x6807;&#xff09;</span>\n        location = <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;verifyImg&quot;]&apos;</span>).location\n        <span class=\"hljs-comment\"># size: &#x83b7;&#x53d6;&#x8282;&#x70b9;&#x7684;&#x5927;&#x5c0f;&#xff08;&#x5bbd;&#x5ea6;&#x548c;&#x9ad8;&#x5ea6;&#xff09;</span>\n        size = <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;verifyImg&quot;]&apos;</span>).size\n        <span class=\"hljs-comment\"># &#x56db;&#x4e2a;&#x5750;&#x6807;: &#x8bb0;&#x4f4f; x y width height</span>\n        left_x = location[<span class=\"hljs-string\">&apos;x&apos;</span>]\n        left_y = location[<span class=\"hljs-string\">&apos;y&apos;</span>]\n        right_x = left_x + size[<span class=\"hljs-string\">&apos;width&apos;</span>]\n        right_y = left_y + size[<span class=\"hljs-string\">&apos;height&apos;</span>]\n        <span class=\"hljs-comment\"># &#x5f00;&#x59cb;&#x622a;&#x56fe;</span>\n        img = Image.<span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;index.png&apos;</span>).crop((left_x,left_y,right_x,right_y))\n        img.save(<span class=\"hljs-string\">&apos;verify.png&apos;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_verify</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x8c03;&#x7528;&#x5728;&#x7ebf;&#x6253;&#x7801;&#x83b7;&#x53d6;&#x9a8c;&#x8bc1;&#x7ed3;&#x679c;&quot;&quot;&quot;</span>\n        result = get_result(<span class=\"hljs-string\">&apos;verify.png&apos;</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x8bc6;&#x522b;&#x7ed3;&#x679c;:&apos;</span>,result)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x7a0b;&#x5e8f;&#x5165;&#x53e3;&#x51fd;&#x6570;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.get_image()\n        <span class=\"hljs-variable language_\">self</span>.get_verify()\n        <span class=\"hljs-variable language_\">self</span>.browser.close()\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    spider = YdmSpider()\n    spider.run()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"779,828"}},{"content":"<pre data-lines=\"829,835\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ydmapi <span class=\"hljs-keyword\">import</span> get_result\n\nresult = get_result(<span class=\"hljs-string\">&apos;yzm5.jpg&apos;</span>)\n<span class=\"hljs-built_in\">print</span>(result)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"829,835"}},{"content":"<pre data-lines=\"836,966\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> http.client, mimetypes, urllib, json, time, requests\n\n<span class=\"hljs-comment\">######################################################################</span>\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YDMHttp</span>:\n\n    apiurl = <span class=\"hljs-string\">&apos;http://api.yundama.com/api.php&apos;</span>\n    username = <span class=\"hljs-string\">&apos;&apos;</span>\n    password = <span class=\"hljs-string\">&apos;&apos;</span>\n    appid = <span class=\"hljs-string\">&apos;&apos;</span>\n    appkey = <span class=\"hljs-string\">&apos;&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, username, password, appid, appkey</span>):\n        <span class=\"hljs-variable language_\">self</span>.username = username  \n        <span class=\"hljs-variable language_\">self</span>.password = password\n        <span class=\"hljs-variable language_\">self</span>.appid = <span class=\"hljs-built_in\">str</span>(appid)\n        <span class=\"hljs-variable language_\">self</span>.appkey = appkey\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">request</span>(<span class=\"hljs-params\">self, fields, files=[]</span>):\n        response = <span class=\"hljs-variable language_\">self</span>.post_url(<span class=\"hljs-variable language_\">self</span>.apiurl, fields, files)\n        response = json.loads(response)\n        <span class=\"hljs-keyword\">return</span> response\n    \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">balance</span>(<span class=\"hljs-params\">self</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;balance&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">if</span> (response[<span class=\"hljs-string\">&apos;ret&apos;</span>] <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>] &lt; <span class=\"hljs-number\">0</span>):\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;balance&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n    \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>(<span class=\"hljs-params\">self</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;login&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">if</span> (response[<span class=\"hljs-string\">&apos;ret&apos;</span>] <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>] &lt; <span class=\"hljs-number\">0</span>):\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;uid&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">upload</span>(<span class=\"hljs-params\">self, filename, codetype, timeout</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;upload&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey, <span class=\"hljs-string\">&apos;codetype&apos;</span>: <span class=\"hljs-built_in\">str</span>(codetype), <span class=\"hljs-string\">&apos;timeout&apos;</span>: <span class=\"hljs-built_in\">str</span>(timeout)}\n        file = {<span class=\"hljs-string\">&apos;file&apos;</span>: filename}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data, file)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">if</span> (response[<span class=\"hljs-string\">&apos;ret&apos;</span>] <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>] &lt; <span class=\"hljs-number\">0</span>):\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;cid&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-params\">self, cid</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;result&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey, <span class=\"hljs-string\">&apos;cid&apos;</span>: <span class=\"hljs-built_in\">str</span>(cid)}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">return</span> response <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;text&apos;</span>] <span class=\"hljs-keyword\">or</span> <span class=\"hljs-string\">&apos;&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">decode</span>(<span class=\"hljs-params\">self, filename, codetype, timeout</span>):\n        cid = <span class=\"hljs-variable language_\">self</span>.upload(filename, codetype, timeout)\n        <span class=\"hljs-keyword\">if</span> (cid &gt; <span class=\"hljs-number\">0</span>):\n            <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, timeout):\n                result = <span class=\"hljs-variable language_\">self</span>.result(cid)\n                <span class=\"hljs-keyword\">if</span> (result != <span class=\"hljs-string\">&apos;&apos;</span>):\n                    <span class=\"hljs-keyword\">return</span> cid, result\n                <span class=\"hljs-keyword\">else</span>:\n                    time.sleep(<span class=\"hljs-number\">1</span>)\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">3003</span>, <span class=\"hljs-string\">&apos;&apos;</span>\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> cid, <span class=\"hljs-string\">&apos;&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">report</span>(<span class=\"hljs-params\">self, cid</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;report&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey, <span class=\"hljs-string\">&apos;cid&apos;</span>: <span class=\"hljs-built_in\">str</span>(cid), <span class=\"hljs-string\">&apos;flag&apos;</span>: <span class=\"hljs-string\">&apos;0&apos;</span>}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">post_url</span>(<span class=\"hljs-params\">self, url, fields, files=[]</span>):\n        <span class=\"hljs-keyword\">for</span> key <span class=\"hljs-keyword\">in</span> files:\n            files[key] = <span class=\"hljs-built_in\">open</span>(files[key], <span class=\"hljs-string\">&apos;rb&apos;</span>);\n        res = requests.post(url, files=files, data=fields)\n        <span class=\"hljs-keyword\">return</span> res.text\n\n<span class=\"hljs-comment\">######################################################################</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_result</span>(<span class=\"hljs-params\">filename</span>):\n    <span class=\"hljs-comment\"># &#x7528;&#x6237;&#x540d;</span>\n    username    = <span class=\"hljs-string\">&apos;yibeizi001&apos;</span>\n\n    <span class=\"hljs-comment\"># &#x5bc6;&#x7801;</span>\n    password    = <span class=\"hljs-string\">&apos;zhishouzhetian001&apos;</span>\n\n    <span class=\"hljs-comment\"># &#x8f6f;&#x4ef6;&#xff29;&#xff24;&#xff0c;&#x5f00;&#x53d1;&#x8005;&#x5206;&#x6210;&#x5fc5;&#x8981;&#x53c2;&#x6570;&#x3002;&#x767b;&#x5f55;&#x5f00;&#x53d1;&#x8005;&#x540e;&#x53f0;&#x3010;&#x6211;&#x7684;&#x8f6f;&#x4ef6;&#x3011;&#x83b7;&#x5f97;&#xff01;</span>\n    appid       = <span class=\"hljs-number\">1</span>\n\n    <span class=\"hljs-comment\"># &#x8f6f;&#x4ef6;&#x5bc6;&#x94a5;&#xff0c;&#x5f00;&#x53d1;&#x8005;&#x5206;&#x6210;&#x5fc5;&#x8981;&#x53c2;&#x6570;&#x3002;&#x767b;&#x5f55;&#x5f00;&#x53d1;&#x8005;&#x540e;&#x53f0;&#x3010;&#x6211;&#x7684;&#x8f6f;&#x4ef6;&#x3011;&#x83b7;&#x5f97;&#xff01;</span>\n    appkey      = <span class=\"hljs-string\">&apos;22cc5376925e9387a23cf797cb9ba745&apos;</span>\n\n    <span class=\"hljs-comment\"># &#x9a8c;&#x8bc1;&#x7801;&#x7c7b;&#x578b;&#xff0c;# &#x4f8b;&#xff1a;1004&#x8868;&#x793a;4&#x4f4d;&#x5b57;&#x6bcd;&#x6570;&#x5b57;&#xff0c;&#x4e0d;&#x540c;&#x7c7b;&#x578b;&#x6536;&#x8d39;&#x4e0d;&#x540c;&#x3002;&#x8bf7;&#x51c6;&#x786e;&#x586b;&#x5199;&#xff0c;&#x5426;&#x5219;&#x5f71;&#x54cd;&#x8bc6;&#x522b;&#x7387;&#x3002;&#x5728;&#x6b64;&#x67e5;&#x8be2;&#x6240;&#x6709;&#x7c7b;&#x578b; http://www.yundama.com/price.html</span>\n    codetype    = <span class=\"hljs-number\">5000</span>\n\n    <span class=\"hljs-comment\"># &#x8d85;&#x65f6;&#x65f6;&#x95f4;&#xff0c;&#x79d2;</span>\n    timeout     = <span class=\"hljs-number\">60</span>\n\n    <span class=\"hljs-comment\"># &#x68c0;&#x67e5;</span>\n    <span class=\"hljs-keyword\">if</span> (username == <span class=\"hljs-string\">&apos;username&apos;</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x8bf7;&#x8bbe;&#x7f6e;&#x597d;&#x76f8;&#x5173;&#x53c2;&#x6570;&#x518d;&#x6d4b;&#x8bd5;&apos;</span>)\n    <span class=\"hljs-keyword\">else</span>:\n        <span class=\"hljs-comment\"># &#x521d;&#x59cb;&#x5316;</span>\n        yundama = YDMHttp(username, password, appid, appkey)\n\n        <span class=\"hljs-comment\"># &#x767b;&#x9646;&#x4e91;&#x6253;&#x7801;</span>\n        uid = yundama.login()\n\n        <span class=\"hljs-comment\"># &#x67e5;&#x8be2;&#x4f59;&#x989d;</span>\n        balance = yundama.balance()\n\n        <span class=\"hljs-comment\"># &#x5f00;&#x59cb;&#x8bc6;&#x522b;&#xff0c;&#x56fe;&#x7247;&#x8def;&#x5f84;&#xff0c;&#x9a8c;&#x8bc1;&#x7801;&#x7c7b;&#x578b;ID&#xff0c;&#x8d85;&#x65f6;&#x65f6;&#x95f4;&#xff08;&#x79d2;&#xff09;&#xff0c;&#x8bc6;&#x522b;&#x7ed3;&#x679c;</span>\n        cid, result = yundama.decode(filename, codetype, timeout)\n\n    <span class=\"hljs-keyword\">return</span> result\n<span class=\"hljs-comment\">######################################################################</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"836,966"}}],"payload":{"tag":"h4","lines":"777,778"}},{"content":"Tencent","children":[{"content":"Tencent/Tencent","children":[{"content":"<pre data-lines=\"996,1021\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># &#x540d;&#x79f0;+&#x7c7b;&#x522b;+&#x804c;&#x8d23;+&#x8981;&#x6c42;+&#x5730;&#x5740;+&#x65f6;&#x95f4;</span>\n    job_name = scrapy.Field()\n    job_type = scrapy.Field()\n    job_duty = scrapy.Field()\n    job_require = scrapy.Field()\n    job_address = scrapy.Field()\n    job_time = scrapy.Field()\n    <span class=\"hljs-comment\"># &#x5177;&#x4f53;&#x804c;&#x4f4d;&#x94fe;&#x63a5;</span>\n    job_url = scrapy.Field()\n    post_id = scrapy.Field()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"996,1021"}},{"content":"<pre data-lines=\"1022,1128\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1022,1128"}},{"content":"<pre data-lines=\"1129,1171\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n<span class=\"hljs-keyword\">import</span> pymysql\n<span class=\"hljs-keyword\">from</span> .settings <span class=\"hljs-keyword\">import</span> *\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentMysqlPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">open_spider</span>(<span class=\"hljs-params\">self,spider</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x722c;&#x866b;&#x9879;&#x76ee;&#x542f;&#x52a8;&#x65f6;,&#x8fde;&#x63a5;&#x6570;&#x636e;&#x5e93;1&#x6b21;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.db = pymysql.connect(MYSQL_HOST,MYSQL_USER,MYSQL_PWD,MYSQL_DB,charset=CHARSET)\n        <span class=\"hljs-variable language_\">self</span>.cursor = <span class=\"hljs-variable language_\">self</span>.db.cursor()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self,item,spider</span>):\n        ins=<span class=\"hljs-string\">&apos;insert into tencenttab values(%s,%s,%s,%s,%s,%s)&apos;</span>\n        job_li = [\n            item[<span class=\"hljs-string\">&apos;job_name&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_type&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_duty&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_require&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_address&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_time&apos;</span>]\n        ]\n        <span class=\"hljs-variable language_\">self</span>.cursor.execute(ins,job_li)\n        <span class=\"hljs-variable language_\">self</span>.db.commit()\n\n        <span class=\"hljs-keyword\">return</span> item\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">close_spider</span>(<span class=\"hljs-params\">self,spider</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x722c;&#x866b;&#x9879;&#x76ee;&#x7ed3;&#x675f;&#x65f6;,&#x65ad;&#x5f00;&#x6570;&#x636e;&#x5e93;1&#x6b21;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.cursor.close()\n        <span class=\"hljs-variable language_\">self</span>.db.close()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1129,1171"}},{"content":"<pre data-lines=\"1172,1288\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Tencent project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Tencent&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Tencent.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Tencent.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Tencent (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># &#x8981;&#x6c42;&#xff1a;1&#x3001;&#x4f7f;&#x7528;&#x5206;&#x5e03;&#x5f0f;&#x6293;&#x53d6;   2&#x3001;&#x628a;&#x6240;&#x6293;&#x6570;&#x636e;&#x5b58;&#x5165;&#x5230;Ubuntu&#x7684;redis&#x6570;&#x636e;&#x5e93;&#x4e2d;</span>\n<span class=\"hljs-comment\"># 1&#x3001;&#x6307;&#x5b9a;scrapy_redis&#x8c03;&#x5ea6;&#x5668;</span>\nSCHEDULER = <span class=\"hljs-string\">&quot;scrapy_redis.scheduler.Scheduler&quot;</span>\n<span class=\"hljs-comment\"># 2&#x3001;&#x6307;&#x5b9a;scrapy_redis&#x7684;&#x53bb;&#x91cd;&#x673a;&#x5236;</span>\nDUPEFILTER_CLASS = <span class=\"hljs-string\">&apos;scrapy_redis.dupefilter.RFPDupeFilter&apos;</span>\n<span class=\"hljs-comment\"># 3&#x3001;&#x6307;&#x5b9a;redis&#x670d;&#x52a1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x548c;&#x7aef;&#x53e3;&#x53f7;</span>\nREDIS_HOST = <span class=\"hljs-string\">&apos;192.168.1.105&apos;</span>\nREDIS_PORT = <span class=\"hljs-number\">6379</span>\n<span class=\"hljs-comment\"># 4&#x3001;&#x6dfb;&#x52a0;redis&#x7ba1;&#x9053;</span>\n<span class=\"hljs-comment\"># 5&#x3001;&#x722c;&#x53d6;&#x5b8c;&#x6210;&#x540e;&#x4e0d;&#x6e05;&#x9664;&#x8bf7;&#x6c42;&#x6307;&#x7eb9;,&#x9ed8;&#x8ba4;&#x4e3a;False,&#x6e05;&#x9664;</span>\nSCHEDULER_PERSIST = <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\nDOWNLOAD_DELAY = <span class=\"hljs-number\">0.1</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\">#COOKIES_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Tencent.middlewares.TencentSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Tencent.middlewares.TencentDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\nITEM_PIPELINES = {\n   <span class=\"hljs-string\">&apos;Tencent.pipelines.TencentPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n   <span class=\"hljs-string\">&apos;Tencent.pipelines.TencentMysqlPipeline&apos;</span>: <span class=\"hljs-number\">400</span>,\n   <span class=\"hljs-string\">&apos;scrapy_redis.pipelines.RedisPipeline&apos;</span> : <span class=\"hljs-number\">200</span>\n}\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n<span class=\"hljs-comment\"># MySQL&#x76f8;&#x5173;&#x53d8;&#x91cf;</span>\nMYSQL_HOST = <span class=\"hljs-string\">&apos;192.168.1.105&apos;</span>\nMYSQL_USER = <span class=\"hljs-string\">&apos;root&apos;</span>\nMYSQL_PWD = <span class=\"hljs-string\">&apos;123456&apos;</span>\nMYSQL_DB = <span class=\"hljs-string\">&apos;tencentdb&apos;</span>\nCHARSET = <span class=\"hljs-string\">&apos;utf8&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1172,1288"}}],"payload":{"tag":"h5","lines":"994,995"}},{"content":"Tencent/Tencent/spiders","children":[{"content":"<pre data-lines=\"1293,1356\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"hljs-keyword\">import</span> scrapy\n<span class=\"hljs-keyword\">from</span> urllib <span class=\"hljs-keyword\">import</span> parse\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> ..items <span class=\"hljs-keyword\">import</span> TencentItem\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentSpider</span>(scrapy.Spider):\n    name = <span class=\"hljs-string\">&apos;tencent&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;careers.tencent.com&apos;</span>]\n    one_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/Query?timestamp=1566266592644&amp;countryId=&amp;cityId=&amp;bgIds=&amp;productId=&amp;categoryId=&amp;parentCategoryId=&amp;attrId=&amp;keyword={}&amp;pageIndex={}&amp;pageSize=10&amp;language=zh-cn&amp;area=cn&apos;</span>\n    two_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/ByPostId?timestamp=1566266695175&amp;postId={}&amp;language=zh-cn&apos;</span>\n    headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>}\n    keyword = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&apos;&#x8bf7;&#x8f93;&#x5165;&#x804c;&#x4f4d;&#x7c7b;&#x522b;:&apos;</span>)\n    keyword = parse.quote(keyword)\n\n    <span class=\"hljs-comment\"># &#x91cd;&#x5199;start_requests()&#x65b9;&#x6cd5;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">start_requests</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x628a;&#x6240;&#x6709;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x7684;URL&#x5730;&#x5740;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        total = <span class=\"hljs-variable language_\">self</span>.get_total()\n        <span class=\"hljs-keyword\">for</span> index <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>,total+<span class=\"hljs-number\">1</span>):\n            url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(<span class=\"hljs-variable language_\">self</span>.keyword,index)\n            <span class=\"hljs-keyword\">yield</span> scrapy.Request(url=url,callback=<span class=\"hljs-variable language_\">self</span>.parse_one_page)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_total</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;word&#x7c7b;&#x522b;&#x7684;&#x603b;&#x9875;&#x6570;&quot;&quot;&quot;</span>\n        url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(<span class=\"hljs-variable language_\">self</span>.keyword,<span class=\"hljs-number\">1</span>)\n        html = requests.get(url=url,headers=<span class=\"hljs-variable language_\">self</span>.headers).json()\n        count = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Count&apos;</span>]\n        total = count//<span class=\"hljs-number\">10</span> <span class=\"hljs-keyword\">if</span> count%<span class=\"hljs-number\">10</span>==<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">else</span> count//<span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>\n\n        <span class=\"hljs-keyword\">return</span> total\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_one_page</span>(<span class=\"hljs-params\">self, response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x89e3;&#x6790;&#x51fd;&#x6570;: &#x63d0;&#x53d6; postid&quot;&quot;&quot;</span>\n        html = json.loads(response.text)\n        <span class=\"hljs-keyword\">for</span> one <span class=\"hljs-keyword\">in</span> html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Posts&apos;</span>]:\n            <span class=\"hljs-comment\"># &#x6b64;&#x5904;&#x662f;&#x4e0d;&#x662f;&#x6709;URL&#x9700;&#x8981;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x53bb;&#x5165;&#x961f;&#x5217;&#x4e86;&#xff1f;&#x6709;&#xff01;&#x521b;&#x5efa;item&#x5bf9;&#x8c61;&#xff01;&#xff01;&#xff01;</span>\n            item = TencentItem()\n            item[<span class=\"hljs-string\">&apos;post_id&apos;</span>] = one[<span class=\"hljs-string\">&apos;PostId&apos;</span>]\n            item[<span class=\"hljs-string\">&apos;job_url&apos;</span>] = <span class=\"hljs-variable language_\">self</span>.two_url.<span class=\"hljs-built_in\">format</span>(item[<span class=\"hljs-string\">&apos;post_id&apos;</span>])\n            <span class=\"hljs-comment\"># &#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;</span>\n            <span class=\"hljs-keyword\">yield</span> scrapy.Request(\n                url=item[<span class=\"hljs-string\">&apos;job_url&apos;</span>],meta={<span class=\"hljs-string\">&apos;item&apos;</span>:item},callback=<span class=\"hljs-variable language_\">self</span>.detail_page)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">detail_page</span>(<span class=\"hljs-params\">self,response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x4e8c;&#x7ea7;&#x9875;&#x9762;&#x89e3;&#x6790;&#x51fd;&#x6570;: &#x63d0;&#x53d6;&#x5177;&#x4f53;&#x804c;&#x4f4d;&#x4fe1;&#x606f;&quot;&quot;&quot;</span>\n        item = response.meta[<span class=\"hljs-string\">&apos;item&apos;</span>]\n        <span class=\"hljs-comment\"># &#x6b64;&#x5904;&#x6ca1;&#x6709;&#x7ee7;&#x7eed;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x7684;&#x8bf7;&#x6c42;&#x4e86;,&#x6240;&#x4ee5;&#x6211;&#x4e0d;&#x9700;&#x8981;&#x518d;&#x91cd;&#x65b0;&#x521b;&#x5efa;item&#x5bf9;&#x8c61;&#x4e86;</span>\n        html = json.loads(response.text)\n        <span class=\"hljs-comment\"># &#x540d;&#x79f0;+&#x7c7b;&#x522b;+&#x804c;&#x8d23;+&#x8981;&#x6c42;+&#x5730;&#x5740;+&#x65f6;&#x95f4;</span>\n        item[<span class=\"hljs-string\">&apos;job_name&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;RecruitPostName&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_type&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;CategoryName&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_duty&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Responsibility&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_require&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Requirement&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_address&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LocationName&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_time&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LastUpdateTime&apos;</span>]\n\n        <span class=\"hljs-comment\"># 1&#x4e2a;item&#x6570;&#x636e;&#x6293;&#x53d6;&#x5b8c;&#x6210;,&#x4ea4;&#x7ed9;&#x7ba1;&#x9053;&#x5904;&#x7406;</span>\n        <span class=\"hljs-keyword\">yield</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1293,1356"}}],"payload":{"tag":"h5","lines":"1291,1292"}}],"payload":{"tag":"h4","lines":"969,970"}},{"content":"TencentRedisKey","children":[{"content":"TencentRedisKey/Tencent","children":[{"content":"<pre data-lines=\"1386,1411\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># &#x540d;&#x79f0;+&#x7c7b;&#x522b;+&#x804c;&#x8d23;+&#x8981;&#x6c42;+&#x5730;&#x5740;+&#x65f6;&#x95f4;</span>\n    job_name = scrapy.Field()\n    job_type = scrapy.Field()\n    job_duty = scrapy.Field()\n    job_require = scrapy.Field()\n    job_address = scrapy.Field()\n    job_time = scrapy.Field()\n    <span class=\"hljs-comment\"># &#x5177;&#x4f53;&#x804c;&#x4f4d;&#x94fe;&#x63a5;</span>\n    job_url = scrapy.Field()\n    post_id = scrapy.Field()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1386,1411"}},{"content":"<pre data-lines=\"1412,1518\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1412,1518"}},{"content":"<pre data-lines=\"1519,1561\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n<span class=\"hljs-keyword\">import</span> pymysql\n<span class=\"hljs-keyword\">from</span> .settings <span class=\"hljs-keyword\">import</span> *\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentMysqlPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">open_spider</span>(<span class=\"hljs-params\">self,spider</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x722c;&#x866b;&#x9879;&#x76ee;&#x542f;&#x52a8;&#x65f6;,&#x8fde;&#x63a5;&#x6570;&#x636e;&#x5e93;1&#x6b21;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.db = pymysql.connect(MYSQL_HOST,MYSQL_USER,MYSQL_PWD,MYSQL_DB,charset=CHARSET)\n        <span class=\"hljs-variable language_\">self</span>.cursor = <span class=\"hljs-variable language_\">self</span>.db.cursor()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self,item,spider</span>):\n        ins=<span class=\"hljs-string\">&apos;insert into tencenttab values(%s,%s,%s,%s,%s,%s)&apos;</span>\n        job_li = [\n            item[<span class=\"hljs-string\">&apos;job_name&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_type&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_duty&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_require&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_address&apos;</span>],\n            item[<span class=\"hljs-string\">&apos;job_time&apos;</span>]\n        ]\n        <span class=\"hljs-variable language_\">self</span>.cursor.execute(ins,job_li)\n        <span class=\"hljs-variable language_\">self</span>.db.commit()\n\n        <span class=\"hljs-keyword\">return</span> item\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">close_spider</span>(<span class=\"hljs-params\">self,spider</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x722c;&#x866b;&#x9879;&#x76ee;&#x7ed3;&#x675f;&#x65f6;,&#x65ad;&#x5f00;&#x6570;&#x636e;&#x5e93;1&#x6b21;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.cursor.close()\n        <span class=\"hljs-variable language_\">self</span>.db.close()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1519,1561"}},{"content":"<pre data-lines=\"1562,1678\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Tencent project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Tencent&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Tencent.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Tencent.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Tencent (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># &#x8981;&#x6c42;&#xff1a;1&#x3001;&#x4f7f;&#x7528;&#x5206;&#x5e03;&#x5f0f;&#x6293;&#x53d6;   2&#x3001;&#x628a;&#x6240;&#x6293;&#x6570;&#x636e;&#x5b58;&#x5165;&#x5230;Ubuntu&#x7684;redis&#x6570;&#x636e;&#x5e93;&#x4e2d;</span>\n<span class=\"hljs-comment\"># 1&#x3001;&#x6307;&#x5b9a;scrapy_redis&#x8c03;&#x5ea6;&#x5668;</span>\nSCHEDULER = <span class=\"hljs-string\">&quot;scrapy_redis.scheduler.Scheduler&quot;</span>\n<span class=\"hljs-comment\"># 2&#x3001;&#x6307;&#x5b9a;scrapy_redis&#x7684;&#x53bb;&#x91cd;&#x673a;&#x5236;</span>\nDUPEFILTER_CLASS = <span class=\"hljs-string\">&apos;scrapy_redis.dupefilter.RFPDupeFilter&apos;</span>\n<span class=\"hljs-comment\"># 3&#x3001;&#x6307;&#x5b9a;redis&#x670d;&#x52a1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#x548c;&#x7aef;&#x53e3;&#x53f7;</span>\nREDIS_HOST = <span class=\"hljs-string\">&apos;192.168.1.105&apos;</span>\nREDIS_PORT = <span class=\"hljs-number\">6379</span>\n<span class=\"hljs-comment\"># 4&#x3001;&#x6dfb;&#x52a0;redis&#x7ba1;&#x9053;</span>\n<span class=\"hljs-comment\"># 5&#x3001;&#x722c;&#x53d6;&#x5b8c;&#x6210;&#x540e;&#x4e0d;&#x6e05;&#x9664;&#x8bf7;&#x6c42;&#x6307;&#x7eb9;,&#x9ed8;&#x8ba4;&#x4e3a;False,&#x6e05;&#x9664;</span>\nSCHEDULER_PERSIST = <span class=\"hljs-literal\">True</span>\n\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\nDOWNLOAD_DELAY = <span class=\"hljs-number\">0.1</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\">#COOKIES_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Tencent.middlewares.TencentSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Tencent.middlewares.TencentDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\nITEM_PIPELINES = {\n   <span class=\"hljs-string\">&apos;Tencent.pipelines.TencentPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n   <span class=\"hljs-string\">&apos;Tencent.pipelines.TencentMysqlPipeline&apos;</span>: <span class=\"hljs-number\">400</span>,\n   <span class=\"hljs-comment\"># &apos;scrapy_redis.pipelines.RedisPipeline&apos; : 200</span>\n}\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n<span class=\"hljs-comment\"># MySQL&#x76f8;&#x5173;&#x53d8;&#x91cf;</span>\nMYSQL_HOST = <span class=\"hljs-string\">&apos;192.168.1.105&apos;</span>\nMYSQL_USER = <span class=\"hljs-string\">&apos;root&apos;</span>\nMYSQL_PWD = <span class=\"hljs-string\">&apos;123456&apos;</span>\nMYSQL_DB = <span class=\"hljs-string\">&apos;tencentdb&apos;</span>\nCHARSET = <span class=\"hljs-string\">&apos;utf8&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1562,1678"}}],"payload":{"tag":"h5","lines":"1384,1385"}},{"content":"TencentRedisKey/Tencent/spiders","children":[{"content":"<pre data-lines=\"1683,1749\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"hljs-keyword\">import</span> scrapy\n<span class=\"hljs-keyword\">from</span> urllib <span class=\"hljs-keyword\">import</span> parse\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> ..items <span class=\"hljs-keyword\">import</span> TencentItem\n<span class=\"hljs-keyword\">from</span> scrapy_redis.spiders <span class=\"hljs-keyword\">import</span> RedisSpider\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TencentSpider</span>(<span class=\"hljs-title class_ inherited__\">RedisSpider</span>):\n    name = <span class=\"hljs-string\">&apos;tencent&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;careers.tencent.com&apos;</span>]\n    one_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/Query?timestamp=1566266592644&amp;countryId=&amp;cityId=&amp;bgIds=&amp;productId=&amp;categoryId=&amp;parentCategoryId=&amp;attrId=&amp;keyword={}&amp;pageIndex={}&amp;pageSize=10&amp;language=zh-cn&amp;area=cn&apos;</span>\n    two_url = <span class=\"hljs-string\">&apos;https://careers.tencent.com/tencentcareer/api/post/ByPostId?timestamp=1566266695175&amp;postId={}&amp;language=zh-cn&apos;</span>\n    headers = {<span class=\"hljs-string\">&apos;User-Agent&apos;</span>: <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>}\n    keyword = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&apos;&#x8bf7;&#x8f93;&#x5165;&#x804c;&#x4f4d;&#x7c7b;&#x522b;:&apos;</span>)\n    keyword = parse.quote(keyword)\n    <span class=\"hljs-comment\"># &#x7b2c;1&#x6b65;&#xff1a;&#x53bb;&#x6389;start_urls</span>\n    <span class=\"hljs-comment\"># &#x7b2c;2&#x6b65;&#xff1a;&#x6dfb;&#x52a0;redis_key</span>\n    redis_key = <span class=\"hljs-string\">&apos;tencent:spider&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\">self, response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x628a;&#x6240;&#x6709;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x7684;URL&#x5730;&#x5740;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;&quot;&quot;&quot;</span>\n        total = <span class=\"hljs-variable language_\">self</span>.get_total()\n        <span class=\"hljs-keyword\">for</span> index <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>,total+<span class=\"hljs-number\">1</span>):\n            url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(<span class=\"hljs-variable language_\">self</span>.keyword,index)\n            <span class=\"hljs-keyword\">yield</span> scrapy.Request(url=url,callback=<span class=\"hljs-variable language_\">self</span>.parse_one_page)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_total</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x83b7;&#x53d6;word&#x7c7b;&#x522b;&#x7684;&#x603b;&#x9875;&#x6570;&quot;&quot;&quot;</span>\n        url = <span class=\"hljs-variable language_\">self</span>.one_url.<span class=\"hljs-built_in\">format</span>(<span class=\"hljs-variable language_\">self</span>.keyword,<span class=\"hljs-number\">1</span>)\n        html = requests.get(url=url,headers=<span class=\"hljs-variable language_\">self</span>.headers).json()\n        count = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Count&apos;</span>]\n        total = count//<span class=\"hljs-number\">10</span> <span class=\"hljs-keyword\">if</span> count%<span class=\"hljs-number\">10</span>==<span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">else</span> count//<span class=\"hljs-number\">10</span> + <span class=\"hljs-number\">1</span>\n\n        <span class=\"hljs-keyword\">return</span> total\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_one_page</span>(<span class=\"hljs-params\">self, response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x89e3;&#x6790;&#x51fd;&#x6570;: &#x63d0;&#x53d6; postid&quot;&quot;&quot;</span>\n        html = json.loads(response.text)\n        <span class=\"hljs-keyword\">for</span> one <span class=\"hljs-keyword\">in</span> html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Posts&apos;</span>]:\n            <span class=\"hljs-comment\"># &#x6b64;&#x5904;&#x662f;&#x4e0d;&#x662f;&#x6709;URL&#x9700;&#x8981;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x53bb;&#x5165;&#x961f;&#x5217;&#x4e86;&#xff1f;&#x6709;&#xff01;&#x521b;&#x5efa;item&#x5bf9;&#x8c61;&#xff01;&#xff01;&#xff01;</span>\n            item = TencentItem()\n            item[<span class=\"hljs-string\">&apos;post_id&apos;</span>] = one[<span class=\"hljs-string\">&apos;PostId&apos;</span>]\n            item[<span class=\"hljs-string\">&apos;job_url&apos;</span>] = <span class=\"hljs-variable language_\">self</span>.two_url.<span class=\"hljs-built_in\">format</span>(item[<span class=\"hljs-string\">&apos;post_id&apos;</span>])\n            <span class=\"hljs-comment\"># &#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;</span>\n            <span class=\"hljs-keyword\">yield</span> scrapy.Request(\n                url=item[<span class=\"hljs-string\">&apos;job_url&apos;</span>],meta={<span class=\"hljs-string\">&apos;item&apos;</span>:item},callback=<span class=\"hljs-variable language_\">self</span>.detail_page)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">detail_page</span>(<span class=\"hljs-params\">self,response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x4e8c;&#x7ea7;&#x9875;&#x9762;&#x89e3;&#x6790;&#x51fd;&#x6570;: &#x63d0;&#x53d6;&#x5177;&#x4f53;&#x804c;&#x4f4d;&#x4fe1;&#x606f;&quot;&quot;&quot;</span>\n        item = response.meta[<span class=\"hljs-string\">&apos;item&apos;</span>]\n        <span class=\"hljs-comment\"># &#x6b64;&#x5904;&#x6ca1;&#x6709;&#x7ee7;&#x7eed;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x7684;&#x8bf7;&#x6c42;&#x4e86;,&#x6240;&#x4ee5;&#x6211;&#x4e0d;&#x9700;&#x8981;&#x518d;&#x91cd;&#x65b0;&#x521b;&#x5efa;item&#x5bf9;&#x8c61;&#x4e86;</span>\n        html = json.loads(response.text)\n        <span class=\"hljs-comment\"># &#x540d;&#x79f0;+&#x7c7b;&#x522b;+&#x804c;&#x8d23;+&#x8981;&#x6c42;+&#x5730;&#x5740;+&#x65f6;&#x95f4;</span>\n        item[<span class=\"hljs-string\">&apos;job_name&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;RecruitPostName&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_type&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;CategoryName&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_duty&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Responsibility&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_require&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;Requirement&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_address&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LocationName&apos;</span>]\n        item[<span class=\"hljs-string\">&apos;job_time&apos;</span>] = html[<span class=\"hljs-string\">&apos;Data&apos;</span>][<span class=\"hljs-string\">&apos;LastUpdateTime&apos;</span>]\n\n        <span class=\"hljs-comment\"># 1&#x4e2a;item&#x6570;&#x636e;&#x6293;&#x53d6;&#x5b8c;&#x6210;,&#x4ea4;&#x7ed9;&#x7ba1;&#x9053;&#x5904;&#x7406;</span>\n        <span class=\"hljs-keyword\">yield</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1683,1749"}}],"payload":{"tag":"h5","lines":"1681,1682"}}],"payload":{"tag":"h4","lines":"1359,1360"}},{"content":"Yd","children":[{"content":"Yd/Yd","children":[{"content":"<pre data-lines=\"1779,1795\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># &#x7ffb;&#x8bd1;&#x7ed3;&#x679c;</span>\n    result = scrapy.Field()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1779,1795"}},{"content":"<pre data-lines=\"1796,1918\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdCookieDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        cookies_dict = <span class=\"hljs-variable language_\">self</span>.get_cookies()\n        request.cookies = cookies_dict\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_cookies</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x5904;&#x7406;cookies&#x4e3a;&#x5b57;&#x5178;&quot;&quot;&quot;</span>\n        s = <span class=\"hljs-string\">&apos;DICT_UGC=be3af0da19b5c5e6aa4e17bd8d90b28a|; OUTFOX_SEARCH_USER_ID=-1116822587@101.30.19.86; JSESSIONID=abcFhgsjM3GXwcIUyl8dx; OUTFOX_SEARCH_USER_ID_NCOO=627961735.004065; SESSION_FROM_COOKIE=unknown; ___rl__test__cookies=1584782441965&apos;</span>\n        cookies = {}\n        <span class=\"hljs-keyword\">for</span> kv <span class=\"hljs-keyword\">in</span> s.split(<span class=\"hljs-string\">&apos;; &apos;</span>):\n            key = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">0</span>]\n            value = kv.split(<span class=\"hljs-string\">&apos;=&apos;</span>)[<span class=\"hljs-number\">1</span>]\n            cookies[key] = value\n\n        <span class=\"hljs-keyword\">return</span> cookies\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1796,1918"}},{"content":"<pre data-lines=\"1919,1934\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-built_in\">dict</span>(item))\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1919,1934"}},{"content":"<pre data-lines=\"1935,2030\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Yd project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Yd&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Yd.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Yd.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Yd (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\nLOG_LEVEL = <span class=\"hljs-string\">&apos;WARNING&apos;</span>\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\n<span class=\"hljs-comment\">#DOWNLOAD_DELAY = 3</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\"># cookie&#x9ed8;&#x8ba4;&#x7981;&#x7528;&#xff01;&#xff01;&#xff01; &#x53d6;&#x6d88;&#x6ce8;&#x91ca;&#x540e;&#x542f;&#x7528; (True|False&#x90fd;&#x4e3a;&#x542f;&#x7528;)</span>\nCOOKIES_ENABLED = <span class=\"hljs-literal\">True</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n    <span class=\"hljs-string\">&quot;Referer&quot;</span>: <span class=\"hljs-string\">&quot;http://fanyi.youdao.com/&quot;</span>,\n    <span class=\"hljs-string\">&quot;User-Agent&quot;</span>: <span class=\"hljs-string\">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36&quot;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Yd.middlewares.YdSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\nDOWNLOADER_MIDDLEWARES = {\n   <span class=\"hljs-string\">&apos;Yd.middlewares.YdDownloaderMiddleware&apos;</span>: <span class=\"hljs-number\">543</span>,\n   <span class=\"hljs-string\">&apos;Yd.middlewares.YdCookieDownloaderMiddleware&apos;</span>: <span class=\"hljs-number\">200</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\nITEM_PIPELINES = {\n   <span class=\"hljs-string\">&apos;Yd.pipelines.YdPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n}\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1935,2030"}}],"payload":{"tag":"h5","lines":"1777,1778"}},{"content":"Yd/Yd/spiders","children":[{"content":"<pre data-lines=\"2035,2088\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"hljs-keyword\">import</span> scrapy\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">import</span> random\n<span class=\"hljs-keyword\">from</span> hashlib <span class=\"hljs-keyword\">import</span> md5\n<span class=\"hljs-keyword\">from</span> ..items <span class=\"hljs-keyword\">import</span> YdItem\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YdSpider</span>(scrapy.Spider):\n    name = <span class=\"hljs-string\">&apos;yd&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;fanyi.youdao.com&apos;</span>]\n    post_url = <span class=\"hljs-string\">&apos;http://fanyi.youdao.com/translate_o?smartresult=dict&amp;smartresult=rule&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">start_requests</span>(<span class=\"hljs-params\">self</span>):\n        word = <span class=\"hljs-built_in\">input</span>(<span class=\"hljs-string\">&apos;&#x8bf7;&#x8f93;&#x5165;&#x8981;&#x7ffb;&#x8bd1;&#x7684;&#x5355;&#x8bcd;:&apos;</span>)\n        ts,salt,sign = <span class=\"hljs-variable language_\">self</span>.get_ts_salt_sign(word)\n        formdata = {\n            <span class=\"hljs-string\">&quot;i&quot;</span>: word,\n            <span class=\"hljs-string\">&quot;from&quot;</span>: <span class=\"hljs-string\">&quot;AUTO&quot;</span>,\n            <span class=\"hljs-string\">&quot;to&quot;</span>: <span class=\"hljs-string\">&quot;AUTO&quot;</span>,\n            <span class=\"hljs-string\">&quot;smartresult&quot;</span>: <span class=\"hljs-string\">&quot;dict&quot;</span>,\n            <span class=\"hljs-string\">&quot;client&quot;</span>: <span class=\"hljs-string\">&quot;fanyideskweb&quot;</span>,\n            <span class=\"hljs-string\">&quot;salt&quot;</span>: salt,\n            <span class=\"hljs-string\">&quot;sign&quot;</span>: sign,\n            <span class=\"hljs-string\">&quot;ts&quot;</span>: ts,\n            <span class=\"hljs-string\">&quot;bv&quot;</span>: <span class=\"hljs-string\">&quot;82ac0fd3b5f5289bb79af17e1f202a1e&quot;</span>,\n            <span class=\"hljs-string\">&quot;doctype&quot;</span>: <span class=\"hljs-string\">&quot;json&quot;</span>,\n            <span class=\"hljs-string\">&quot;version&quot;</span>: <span class=\"hljs-string\">&quot;2.1&quot;</span>,\n            <span class=\"hljs-string\">&quot;keyfrom&quot;</span>: <span class=\"hljs-string\">&quot;fanyi.web&quot;</span>,\n            <span class=\"hljs-string\">&quot;action&quot;</span>: <span class=\"hljs-string\">&quot;FY_BY_REALTlME&quot;</span>,\n        }\n        <span class=\"hljs-keyword\">yield</span> scrapy.FormRequest(url=<span class=\"hljs-variable language_\">self</span>.post_url, formdata=formdata, callback=<span class=\"hljs-variable language_\">self</span>.parse)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_ts_salt_sign</span>(<span class=\"hljs-params\">self,word</span>):\n        <span class=\"hljs-comment\"># &#x529f;&#x80fd;&#x51fd;&#x6570;&#xff1a;&#x83b7;&#x53d6; ts + salt + sign</span>\n        ts = <span class=\"hljs-built_in\">str</span>(<span class=\"hljs-built_in\">int</span>(time.time() * <span class=\"hljs-number\">1000</span>))\n        salt = ts + <span class=\"hljs-built_in\">str</span>(random.randint(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">9</span>))\n        string = <span class=\"hljs-string\">&quot;fanyideskweb&quot;</span> + word + salt + <span class=\"hljs-string\">&quot;n%A-rKaT5fb[Gy?;N5@Tj&quot;</span>\n        s = md5()\n        s.update(string.encode())\n        sign = s.hexdigest()\n\n        <span class=\"hljs-keyword\">return</span> ts,salt,sign\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\">self, response</span>):\n        html = json.loads(response.text)\n        item = YdItem()\n        item[<span class=\"hljs-string\">&apos;result&apos;</span>] = html[<span class=\"hljs-string\">&apos;translateResult&apos;</span>][<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">0</span>][<span class=\"hljs-string\">&apos;tgt&apos;</span>]\n\n        <span class=\"hljs-keyword\">yield</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2035,2088"}}],"payload":{"tag":"h5","lines":"2033,2034"}}],"payload":{"tag":"h4","lines":"1752,1753"}},{"content":"ydm","children":[{"content":"<pre data-lines=\"2093,2210\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> http.client, mimetypes, urllib, json, time, requests\n\n<span class=\"hljs-comment\">######################################################################</span>\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">YDMHttp</span>:\n\n    apiurl = <span class=\"hljs-string\">&apos;http://api.yundama.com/api.php&apos;</span>\n    username = <span class=\"hljs-string\">&apos;&apos;</span>\n    password = <span class=\"hljs-string\">&apos;&apos;</span>\n    appid = <span class=\"hljs-string\">&apos;&apos;</span>\n    appkey = <span class=\"hljs-string\">&apos;&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, username, password, appid, appkey</span>):\n        <span class=\"hljs-variable language_\">self</span>.username = username  \n        <span class=\"hljs-variable language_\">self</span>.password = password\n        <span class=\"hljs-variable language_\">self</span>.appid = <span class=\"hljs-built_in\">str</span>(appid)\n        <span class=\"hljs-variable language_\">self</span>.appkey = appkey\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">request</span>(<span class=\"hljs-params\">self, fields, files=[]</span>):\n        response = <span class=\"hljs-variable language_\">self</span>.post_url(<span class=\"hljs-variable language_\">self</span>.apiurl, fields, files)\n        response = json.loads(response)\n        <span class=\"hljs-keyword\">return</span> response\n    \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">balance</span>(<span class=\"hljs-params\">self</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;balance&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">if</span> (response[<span class=\"hljs-string\">&apos;ret&apos;</span>] <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>] &lt; <span class=\"hljs-number\">0</span>):\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;balance&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n    \n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>(<span class=\"hljs-params\">self</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;login&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">if</span> (response[<span class=\"hljs-string\">&apos;ret&apos;</span>] <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>] &lt; <span class=\"hljs-number\">0</span>):\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;uid&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">upload</span>(<span class=\"hljs-params\">self, filename, codetype, timeout</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;upload&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey, <span class=\"hljs-string\">&apos;codetype&apos;</span>: <span class=\"hljs-built_in\">str</span>(codetype), <span class=\"hljs-string\">&apos;timeout&apos;</span>: <span class=\"hljs-built_in\">str</span>(timeout)}\n        file = {<span class=\"hljs-string\">&apos;file&apos;</span>: filename}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data, file)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">if</span> (response[<span class=\"hljs-string\">&apos;ret&apos;</span>] <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>] &lt; <span class=\"hljs-number\">0</span>):\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;cid&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">result</span>(<span class=\"hljs-params\">self, cid</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;result&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey, <span class=\"hljs-string\">&apos;cid&apos;</span>: <span class=\"hljs-built_in\">str</span>(cid)}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">return</span> response <span class=\"hljs-keyword\">and</span> response[<span class=\"hljs-string\">&apos;text&apos;</span>] <span class=\"hljs-keyword\">or</span> <span class=\"hljs-string\">&apos;&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">decode</span>(<span class=\"hljs-params\">self, filename, codetype, timeout</span>):\n        cid = <span class=\"hljs-variable language_\">self</span>.upload(filename, codetype, timeout)\n        <span class=\"hljs-keyword\">if</span> (cid &gt; <span class=\"hljs-number\">0</span>):\n            <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">0</span>, timeout):\n                result = <span class=\"hljs-variable language_\">self</span>.result(cid)\n                <span class=\"hljs-keyword\">if</span> (result != <span class=\"hljs-string\">&apos;&apos;</span>):\n                    <span class=\"hljs-keyword\">return</span> cid, result\n                <span class=\"hljs-keyword\">else</span>:\n                    time.sleep(<span class=\"hljs-number\">1</span>)\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">3003</span>, <span class=\"hljs-string\">&apos;&apos;</span>\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> cid, <span class=\"hljs-string\">&apos;&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">report</span>(<span class=\"hljs-params\">self, cid</span>):\n        data = {<span class=\"hljs-string\">&apos;method&apos;</span>: <span class=\"hljs-string\">&apos;report&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span>: <span class=\"hljs-variable language_\">self</span>.username, <span class=\"hljs-string\">&apos;password&apos;</span>: <span class=\"hljs-variable language_\">self</span>.password, <span class=\"hljs-string\">&apos;appid&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appid, <span class=\"hljs-string\">&apos;appkey&apos;</span>: <span class=\"hljs-variable language_\">self</span>.appkey, <span class=\"hljs-string\">&apos;cid&apos;</span>: <span class=\"hljs-built_in\">str</span>(cid), <span class=\"hljs-string\">&apos;flag&apos;</span>: <span class=\"hljs-string\">&apos;0&apos;</span>}\n        response = <span class=\"hljs-variable language_\">self</span>.request(data)\n        <span class=\"hljs-keyword\">if</span> (response):\n            <span class=\"hljs-keyword\">return</span> response[<span class=\"hljs-string\">&apos;ret&apos;</span>]\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">9001</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">post_url</span>(<span class=\"hljs-params\">self, url, fields, files=[]</span>):\n        <span class=\"hljs-keyword\">for</span> key <span class=\"hljs-keyword\">in</span> files:\n            files[key] = <span class=\"hljs-built_in\">open</span>(files[key], <span class=\"hljs-string\">&apos;rb&apos;</span>);\n        res = requests.post(url, files=files, data=fields)\n        <span class=\"hljs-keyword\">return</span> res.text\n\n<span class=\"hljs-comment\">######################################################################</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_result</span>(<span class=\"hljs-params\">filename</span>):\n    <span class=\"hljs-comment\"># &#x7528;&#x6237;&#x540d;</span>\n    username    = <span class=\"hljs-string\">&apos;yibeizi001&apos;</span>\n    <span class=\"hljs-comment\"># &#x5bc6;&#x7801;</span>\n    password    = <span class=\"hljs-string\">&apos;zhishouzhetian001&apos;</span>\n    <span class=\"hljs-comment\"># &#x8f6f;&#x4ef6;&#xff29;&#xff24;&#xff0c;&#x5f00;&#x53d1;&#x8005;&#x5206;&#x6210;&#x5fc5;&#x8981;&#x53c2;&#x6570;&#x3002;&#x767b;&#x5f55;&#x5f00;&#x53d1;&#x8005;&#x540e;&#x53f0;&#x3010;&#x6211;&#x7684;&#x8f6f;&#x4ef6;&#x3011;&#x83b7;&#x5f97;&#xff01;</span>\n    appid       = <span class=\"hljs-number\">1</span>\n    <span class=\"hljs-comment\"># &#x8f6f;&#x4ef6;&#x5bc6;&#x94a5;&#xff0c;&#x5f00;&#x53d1;&#x8005;&#x5206;&#x6210;&#x5fc5;&#x8981;&#x53c2;&#x6570;&#x3002;&#x767b;&#x5f55;&#x5f00;&#x53d1;&#x8005;&#x540e;&#x53f0;&#x3010;&#x6211;&#x7684;&#x8f6f;&#x4ef6;&#x3011;&#x83b7;&#x5f97;&#xff01;</span>\n    appkey      = <span class=\"hljs-string\">&apos;22cc5376925e9387a23cf797cb9ba745&apos;</span>\n    <span class=\"hljs-comment\"># &#x9a8c;&#x8bc1;&#x7801;&#x7c7b;&#x578b;&#xff0c;# &#x4f8b;&#xff1a;1004&#x8868;&#x793a;4&#x4f4d;&#x5b57;&#x6bcd;&#x6570;&#x5b57;&#xff0c;&#x4e0d;&#x540c;&#x7c7b;&#x578b;&#x6536;&#x8d39;&#x4e0d;&#x540c;&#x3002;&#x8bf7;&#x51c6;&#x786e;&#x586b;&#x5199;&#xff0c;&#x5426;&#x5219;&#x5f71;&#x54cd;&#x8bc6;&#x522b;&#x7387;&#x3002;&#x5728;&#x6b64;&#x67e5;&#x8be2;&#x6240;&#x6709;&#x7c7b;&#x578b; http://www.yundama.com/price.html</span>\n    codetype    = <span class=\"hljs-number\">5000</span>\n    <span class=\"hljs-comment\"># &#x8d85;&#x65f6;&#x65f6;&#x95f4;&#xff0c;&#x79d2;</span>\n    timeout     = <span class=\"hljs-number\">60</span>\n    <span class=\"hljs-comment\"># &#x521d;&#x59cb;&#x5316;</span>\n    yundama = YDMHttp(username, password, appid, appkey)\n    <span class=\"hljs-comment\"># &#x767b;&#x9646;&#x4e91;&#x6253;&#x7801;</span>\n    uid = yundama.login()\n    <span class=\"hljs-comment\"># &#x67e5;&#x8be2;&#x4f59;&#x989d;</span>\n    balance = yundama.balance()\n    <span class=\"hljs-comment\"># &#x5f00;&#x59cb;&#x8bc6;&#x522b;&#xff0c;&#x56fe;&#x7247;&#x8def;&#x5f84;&#xff0c;&#x9a8c;&#x8bc1;&#x7801;&#x7c7b;&#x578b;ID&#xff0c;&#x8d85;&#x65f6;&#x65f6;&#x95f4;&#xff08;&#x79d2;&#xff09;&#xff0c;&#x8bc6;&#x522b;&#x7ed3;&#x679c;</span>\n    cid, result = yundama.decode(filename, codetype, timeout)\n\n    <span class=\"hljs-keyword\">return</span> result\n<span class=\"hljs-comment\">######################################################################</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2093,2210"}}],"payload":{"tag":"h4","lines":"2091,2092"}},{"content":"&#x5176;&#x4ed6;","children":[{"content":"douban_vertify.py","children":[{"content":"<pre data-lines=\"2217,2305\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x8bf4;&#x660e;&#xff1a;&#x5148;&#x8f93;&#x5165;&#x51e0;&#x6b21;&#x9519;&#x8bef;&#x7684;&#x5bc6;&#x7801;&#xff0c;&#x51fa;&#x73b0;&#x6ed1;&#x5757;&#x7f3a;&#x53e3;&#x9a8c;&#x8bc1;&#x7801;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-comment\"># &#x5bfc;&#x5165;&#x9f20;&#x6807;&#x4e8b;&#x4ef6;&#x7c7b;</span>\n<span class=\"hljs-keyword\">from</span> selenium.webdriver <span class=\"hljs-keyword\">import</span> ActionChains\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-comment\"># &#x52a0;&#x901f;&#x5ea6;&#x51fd;&#x6570;</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_tracks</span>(<span class=\"hljs-params\">distance</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    &#x62ff;&#x5230;&#x79fb;&#x52a8;&#x8f68;&#x8ff9;&#xff0c;&#x6a21;&#x4eff;&#x4eba;&#x7684;&#x6ed1;&#x52a8;&#x884c;&#x4e3a;&#xff0c;&#x5148;&#x5300;&#x52a0;&#x901f;&#x540e;&#x5300;&#x51cf;&#x901f;\n    &#x5300;&#x53d8;&#x901f;&#x8fd0;&#x52a8;&#x57fa;&#x672c;&#x516c;&#x5f0f;&#xff1a;\n    &#x2460;v=v0+at\n    &#x2461;s=v0t+&#xbd;at&#xb2;\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-comment\"># &#x521d;&#x901f;&#x5ea6;</span>\n    v = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-comment\"># &#x5355;&#x4f4d;&#x65f6;&#x95f4;&#x4e3a;0.3s&#x6765;&#x7edf;&#x8ba1;&#x8f68;&#x8ff9;&#xff0c;&#x8f68;&#x8ff9;&#x5373;0.3&#x5185;&#x7684;&#x4f4d;&#x79fb;</span>\n    t = <span class=\"hljs-number\">0.3</span>\n    <span class=\"hljs-comment\"># &#x4f4d;&#x7f6e;/&#x8f68;&#x8ff9;&#x5217;&#x8868;,&#x5217;&#x8868;&#x5185;&#x7684;&#x4e00;&#x4e2a;&#x5143;&#x7d20;&#x4ee3;&#x8868;0.3s&#x7684;&#x4f4d;&#x79fb;</span>\n    tracks = []\n    <span class=\"hljs-comment\"># &#x5f53;&#x524d;&#x7684;&#x4f4d;&#x79fb;</span>\n    current = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-comment\"># &#x5230;&#x8fbe;mid&#x503c;&#x5f00;&#x59cb;&#x51cf;&#x901f;</span>\n    mid = distance*<span class=\"hljs-number\">4</span>/<span class=\"hljs-number\">5</span>\n    <span class=\"hljs-keyword\">while</span> current &lt; distance:\n        <span class=\"hljs-keyword\">if</span> current &lt; mid:\n            <span class=\"hljs-comment\"># &#x52a0;&#x901f;&#x5ea6;&#x8d8a;&#x5c0f;,&#x5355;&#x4f4d;&#x65f6;&#x95f4;&#x5185;&#x7684;&#x4f4d;&#x79fb;&#x8d8a;&#x5c0f;,&#x6a21;&#x62df;&#x7684;&#x8f68;&#x8ff9;&#x5c31;&#x8d8a;&#x591a;&#x8d8a;&#x8be6;&#x7ec6;</span>\n            a = <span class=\"hljs-number\">2</span>\n        <span class=\"hljs-keyword\">else</span>:\n            a = -<span class=\"hljs-number\">3</span>\n\n        <span class=\"hljs-comment\"># &#x521d;&#x901f;&#x5ea6;</span>\n        v0 = v\n        <span class=\"hljs-comment\"># 0.3&#x79d2;&#x5185;&#x7684;&#x4f4d;&#x79fb;</span>\n        s = v0*t+<span class=\"hljs-number\">0.5</span>*a*(t**<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-comment\"># &#x5f53;&#x524d;&#x7684;&#x4f4d;&#x7f6e;</span>\n        current += s\n        <span class=\"hljs-comment\"># &#x6dfb;&#x52a0;&#x5230;&#x8f68;&#x8ff9;&#x5217;&#x8868;</span>\n        tracks.append(<span class=\"hljs-built_in\">round</span>(s))\n        <span class=\"hljs-comment\"># &#x901f;&#x5ea6;&#x5df2;&#x7ecf;&#x8fbe;&#x5230;v&#xff0c;&#x8be5;&#x901f;&#x5ea6;&#x4f5c;&#x4e3a;&#x4e0b;&#x6b21;&#x7684;&#x521d;&#x901f;&#x5ea6;</span>\n        v = v0 + a*t\n    <span class=\"hljs-keyword\">return</span> tracks\n    <span class=\"hljs-comment\"># tracks: [&#x7b2c;&#x4e00;&#x4e2a;0.3&#x79d2;&#x7684;&#x79fb;&#x52a8;&#x8ddd;&#x79bb;,&#x7b2c;&#x4e8c;&#x4e2a;0.3&#x79d2;&#x7684;&#x79fb;&#x52a8;&#x8ddd;&#x79bb;,...]</span>\n\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x6253;&#x5f00;&#x8c46;&#x74e3;&#x5b98;&#x7f51; - &#x5e76;&#x5c06;&#x7a97;&#x53e3;&#x6700;&#x5927;&#x5316;</span>\nbrowser = webdriver.Chrome()\nbrowser.maximize_window()\nbrowser.get(<span class=\"hljs-string\">&apos;https://www.douban.com/&apos;</span>)\n\n<span class=\"hljs-comment\"># 2&#x3001;&#x5207;&#x6362;&#x5230;iframe&#x5b50;&#x9875;&#x9762;</span>\nlogin_frame = browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;anony-reg-new&quot;]/div/div[1]/iframe&apos;</span>)\nbrowser.switch_to.frame(login_frame)\n\n<span class=\"hljs-comment\"># 3&#x3001;&#x5bc6;&#x7801;&#x767b;&#x5f55; + &#x7528;&#x6237;&#x540d; + &#x5bc6;&#x7801; + &#x767b;&#x5f55;&#x8c46;&#x74e3;</span>\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;/html/body/div[1]/div[1]/ul[1]/li[2]&apos;</span>).click()\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;username&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;15110225726&apos;</span>)\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;password&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;zhanshen001&apos;</span>)\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;/html/body/div[1]/div[2]/div[1]/div[5]/a&apos;</span>).click()\ntime.sleep(<span class=\"hljs-number\">4</span>)\n\n<span class=\"hljs-comment\"># 4&#x3001;&#x5207;&#x6362;&#x5230;&#x65b0;&#x7684;iframe&#x5b50;&#x9875;&#x9762; - &#x6ed1;&#x5757;&#x9a8c;&#x8bc1;</span>\nauth_frame = browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;TCaptcha&quot;]/iframe&apos;</span>)\nbrowser.switch_to.frame(auth_frame)\n<span class=\"hljs-comment\"># 5&#x3001;&#x6309;&#x4f4f;&#x5f00;&#x59cb;&#x6ed1;&#x52a8;&#x4f4d;&#x7f6e;&#x6309;&#x94ae; - &#x5148;&#x79fb;&#x52a8;180&#x4e2a;&#x50cf;&#x7d20;</span>\nelement = browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;tcaptcha_drag_button&quot;]&apos;</span>)\n<span class=\"hljs-comment\"># &#x6307;&#x5b9a;&#x9f20;&#x6807;&#x884c;&#x4e3a; - &#x6309;&#x4f4f;&#x8fd9;&#x4e2a;&#x8282;&#x70b9;&#x5e76;&#x4fdd;&#x6301;&#x4f4f;</span>\nActionChains(browser).click_and_hold(on_element=element).perform()\n<span class=\"hljs-comment\"># move_to_element_with_offset():&#x79fb;&#x52a8;&#x5230;&#x8ddd;&#x79bb;&#x67d0;&#x4e2a;&#x5143;&#x7d20;(&#x5de6;&#x4e0a;&#x89d2;)&#x591a;&#x5c11;&#x8ddd;&#x79bb;&#x7684;&#x4f4d;&#x7f6e;</span>\n<span class=\"hljs-comment\"># &#x5229;&#x7528;Page Ruler&#x63d2;&#x4ef6;&#x5927;&#x6982;&#x770b;&#x5230;,&#x8ddd;&#x79bb;&#x5927;&#x7ea6;&#x4e3a;200&#x591a;,&#x5148;&#x5feb;&#x901f;&#x79fb;&#x52a8;180,&#x5269;&#x4e0b;&#x7684;20&#x591a;&#x6211;&#x518d;&#x6162;&#x6162;&#x79fb;&#x52a8;</span>\nActionChains(browser).move_to_element_with_offset(to_element=element,xoffset=<span class=\"hljs-number\">180</span>,yoffset=<span class=\"hljs-number\">0</span>).perform()\n\n<span class=\"hljs-comment\"># 6&#x3001;&#x4f7f;&#x7528;&#x52a0;&#x901f;&#x5ea6;&#x51fd;&#x6570;&#x79fb;&#x52a8;&#x5269;&#x4e0b;&#x7684;&#x8ddd;&#x79bb;</span>\n<span class=\"hljs-comment\"># &#x5148;&#x62ff;&#x5230;&#x5269;&#x4e0b;&#x7684;&#x90e8;&#x5206;&#x7684;&#x79fb;&#x52a8;&#x8f68;&#x8ff9;&#x7684;&#x5217;&#x8868;</span>\ntracks = get_tracks(<span class=\"hljs-number\">25</span>)\n<span class=\"hljs-comment\"># tracks: &#x5047;&#x5982;[2,3,4,5,8,3,2,1]</span>\n<span class=\"hljs-keyword\">for</span> track <span class=\"hljs-keyword\">in</span> tracks:\n    <span class=\"hljs-comment\"># &#x5f00;&#x59cb;&#x79fb;&#x52a8;&#xff1a;move_by_offset(): &#x9f20;&#x6807;&#x4ece;&#x5f53;&#x524d;&#x4f4d;&#x7f6e;&#x79fb;&#x52a8;&#x7684;&#x8ddd;&#x79bb;</span>\n    ActionChains(browser).move_by_offset(xoffset=track,yoffset=<span class=\"hljs-number\">0</span>).perform()\n\n<span class=\"hljs-comment\"># 7&#x3001;&#x5ef6;&#x8fdf;&#x91ca;&#x653e;&#x9f20;&#x6807;: release()</span>\ntime.sleep(<span class=\"hljs-number\">0.5</span>)\nActionChains(browser).release().perform()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2217,2305"}}],"payload":{"tag":"h5","lines":"2215,2216"}}],"payload":{"tag":"h4","lines":"2213,2214"}}],"payload":{"tag":"h3","lines":"0,1"}},{})</script>
</body>
</html>
