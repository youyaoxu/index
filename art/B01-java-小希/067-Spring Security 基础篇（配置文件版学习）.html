<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Spring Security &#x57fa;&#x7840;&#x7bc7;&#xff08;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7248;&#x5b66;&#x4e60;&#xff09;","children":[{"content":"1.1&#x3001;&#x6846;&#x67b6;&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"5,6\"><code>Spring Security &#x662f; Spring &#x5bb6;&#x65cf;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#x5b89;&#x5168;&#x7ba1;&#x7406;&#x6846;&#x67b6;&#xff0c;Spring Security &#x7684;&#x4e24;&#x5927;&#x6838;&#x5fc3;&#x529f;&#x80fd;&#x5c31;&#x662f;&#x8ba4;&#x8bc1;&#xff08;authentication&#xff09;&#x548c;&#x6388;&#x6743;&#xff08;authorization&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5,6"}}],"payload":{"tag":"h2","lines":"2,4"}},{"content":"1.2&#x3001;&#x5e38;&#x7528;&#x672f;&#x8bed;","children":[{"content":"<strong>&#x8ba4;&#x8bc1;</strong> &#xff1a;&#x4f60;&#x662f;&#x4ec0;&#x4e48;&#x4eba;&#x3002;","children":[],"payload":{"tag":"li","lines":"10,11"}},{"content":"<strong>&#x6388;&#x6743;</strong> &#xff1a;&#x4f60;&#x80fd;&#x505a;&#x4ec0;&#x4e48;&#x3002;","children":[],"payload":{"tag":"li","lines":"11,12"}},{"content":"<strong>&#x7528;&#x6237;</strong> &#xff1a;&#x4e3b;&#x8981;&#x5305;&#x62ec;&#x7528;&#x6237;&#x540d;&#x79f0;&#x3001;&#x7528;&#x6237;&#x5bc6;&#x7801;&#x548c;&#x5f53;&#x524d;&#x7528;&#x6237;&#x6240;&#x62e5;&#x6709;&#x7684;&#x89d2;&#x8272;&#x4fe1;&#x606f;&#xff0c;&#x53ef;&#x7528;&#x4e8e;&#x5b9e;&#x73b0;&#x8ba4;&#x8bc1;&#x64cd;&#x4f5c;&#x3002;","children":[],"payload":{"tag":"li","lines":"12,13"}},{"content":"<strong>&#x89d2;&#x8272;</strong> &#xff1a;&#x4e3b;&#x8981;&#x5305;&#x62ec;&#x89d2;&#x8272;&#x540d;&#x79f0;&#x3001;&#x89d2;&#x8272;&#x63cf;&#x8ff0;&#x548c;&#x5f53;&#x524d;&#x89d2;&#x8272;&#x6240;&#x62e5;&#x6709;&#x7684;&#x6743;&#x9650;&#x4fe1;&#x606f;&#xff0c;&#x53ef;&#x7528;&#x4e8e;&#x5b9e;&#x73b0;&#x6388;&#x6743;&#x64cd;&#x4f5c;&#x3002;","children":[],"payload":{"tag":"li","lines":"13,15"}}],"payload":{"tag":"h2","lines":"7,9"}},{"content":"1.3&#x3001;&#x5e38;&#x7528;&#x5355;&#x8bcd;","children":[{"content":"<strong>&#x8ba4;&#x8bc1;</strong> &#xff1a;authentication","children":[],"payload":{"tag":"li","lines":"18,19"}},{"content":"<strong>&#x6388;&#x6743;</strong> &#xff1a;authorization","children":[],"payload":{"tag":"li","lines":"19,20"}},{"content":"<strong>&#x7528;&#x6237;</strong> &#xff1a;user","children":[],"payload":{"tag":"li","lines":"20,21"}},{"content":"<strong>&#x89d2;&#x8272;</strong> &#xff1a;role","children":[],"payload":{"tag":"li","lines":"21,22"}},{"content":"<strong>&#x767b;&#x5f55;</strong> &#xff1a;login","children":[],"payload":{"tag":"li","lines":"22,23"}},{"content":"<strong>&#x6ce8;&#x9500;</strong> &#xff1a;logout","children":[],"payload":{"tag":"li","lines":"23,25"}}],"payload":{"tag":"h2","lines":"15,17"}},{"content":"1.4&#x3001;&#x73af;&#x5883;&#x51c6;&#x5907;","children":[{"content":"<pre data-lines=\"28,37\"><code>&#x6253;&#x5f00;&#x57fa;&#x7840;&#x4ee3;&#x7801;&#xff1a;\n\n&#x8bf7;&#x5728;&#x914d;&#x5957;&#x8d44;&#x6599;&#x4e2d;&#xff0c;&#x627e;&#x5230;`ssm&#x4e13;&#x7528;&#x57fa;&#x7840;&#x4ee3;&#x7801;`&#xff0c;&#x4f7f;&#x7528;**Idea**&#x6253;&#x5f00;`ssm-security`&#xff0c;&#x914d;&#x7f6e;&#x597d;`tomcat 8.5`&#xff0c;&#x8fd9;&#x53ea;&#x662f;&#x4e00;&#x4e2a;&#x5f88;&#x666e;&#x901a;&#x7684;`ssm`&#x9879;&#x76ee;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x6709;`ssm`&#x9879;&#x76ee;&#x7684;&#x57fa;&#x7840;&#xff0c;&#x76f8;&#x4fe1;&#x4f60;&#x4e00;&#x5b9a;&#x80fd;&#x770b;&#x5f97;&#x61c2;&#xff0c;&#x6211;&#x4eec;&#x4ece;&#x5de6;&#x4fa7;&#x7684;&#x83dc;&#x5355;&#x680f;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x6709;&#x56db;&#x4e2a;&#x90e8;&#x5206;&#xff0c;&#x5176;&#x4e2d;&#x201c;&#x4ea7;&#x54c1;&#x7ba1;&#x7406;&#x201d;&#x3001;&#x201c;&#x8ba2;&#x5355;&#x7ba1;&#x7406;&#x201d;&#x867d;&#x7136;&#x53ef;&#x4ee5;&#x8fdb;&#x884c;&#x6dfb;&#x52a0;&#x548c;&#x67e5;&#x8be2;&#x6240;&#x6709;&#xff0c;&#x4f46;&#x662f;&#xff0c;&#x8fd9;&#x4e24;&#x4e2a;&#x529f;&#x80fd;&#x5e76;&#x6ca1;&#x6709;&#x548c;&#x6570;&#x636e;&#x5e93;&#x4ea4;&#x4e92;&#xff0c;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x6c61;&#x67d3;&#x6570;&#x636e;&#x5e93;&#x8868;&#xff0c;&#x8ba9;&#x5927;&#x5bb6;&#x770b;&#x8d77;&#x6765;&#x5f88;&#x4e71;&#xff0c;&#x6240;&#x4ee5;&#x6211;&#x5c31;&#x4f7f;&#x7528;`map`&#x7ed3;&#x6784;&#x5728;`service`&#x5c42;&#x8fdb;&#x884c;&#x4e86;&#x6570;&#x636e;&#x6a21;&#x62df;&#xff1b;&#x201c;&#x7528;&#x6237;&#x7ba1;&#x7406;&#x201d;&#x548c;&#x201c;&#x89d2;&#x8272;&#x7ba1;&#x7406;&#x201d;&#x6211;&#x5df2;&#x7ecf;&#x5b9e;&#x73b0;&#x4e86;&#x6700;&#x57fa;&#x7840;&#x7684;&#x589e;&#x52a0;&#x548c;&#x67e5;&#x8be2;&#x6240;&#x6709;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x5e76;&#x4e0d;&#x662f;&#x6211;&#x4eec;&#x5b66;&#x4e60;&#x7684;&#x91cd;&#x70b9;&#xff0c;&#x6240;&#x4ee5;&#x4e00;&#x4e9b;&#x57fa;&#x672c;&#x7684;&#x914d;&#x7f6e;&#x548c;&#x9875;&#x9762;&#x7f16;&#x5199;&#x6211;&#x5c31;&#x5e2e;&#x5927;&#x5bb6;&#x5b8c;&#x6210;&#x4e86;&#x3002;\n\n&#x6211;&#x4eec;&#x6b63;&#x597d;&#x8d81;&#x6b64;&#x673a;&#x4f1a;&#x770b;&#x7740;&#x4e0b;&#x8fb9;&#x7684;&#x9875;&#x9762;&#xff0c;&#x4ee5;&#x8fd9;&#x4e2a;&#x9879;&#x76ee;&#x4e3a;&#x57fa;&#x7840;&#x6765;&#x8fdb;&#x884c;&#x5b66;&#x4e60;`Spring Security`&#xff0c;&#x6700;&#x7ec8;&#x5b9e;&#x73b0;&#x7684;&#x6548;&#x679c;&#x5c31;&#x662f;&#xff1a;\n\n*   zhangsan&#xff1a;&#x4f5c;&#x4e3a;&#x4ea7;&#x54c1;&#x91c7;&#x8d2d;&#x5458;&#xff0c;&#x53ea;&#x80fd;&#x8bbf;&#x95ee;**&#x4ea7;&#x54c1;&#x7ba1;&#x7406;**&#x6a21;&#x5757;\n*   lisi&#xff1a;&#x4f5c;&#x4e3a;&#x8d22;&#x52a1;&#x7ba1;&#x7406;&#x5458;&#xff0c;&#x53ea;&#x80fd;&#x8bbf;&#x95ee;**&#x8ba2;&#x5355;&#x7ba1;&#x7406;**&#x6a21;&#x5757;\n*   wangwu&#xff1a;&#x4f5c;&#x4e3a;&#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;&#xff0c;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;**&#x6240;&#x6709;**&#x6a21;&#x5757;&#xff0c;&#x5e76;&#x53ef;&#x4ee5;&#x5bf9;zhangsan&#x548c;lisi&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#x6743;&#x9650;&#x7ba1;&#x7406;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"28,37"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/790ce9760d67082eaa74a02d1296517c.png\" alt>","children":[],"payload":{"tag":"img","lines":"38,39"}},{"content":"<pre data-lines=\"40,43\"><code>&#x4fee;&#x6539;&#x6570;&#x636e;&#x8fde;&#x63a5;&#xff1a;\n\n&#x56e0;&#x4e3a;&#x8fd9;&#x4e2a;&#x57fa;&#x7840;&#x4ee3;&#x7801;&#x662f;&#x53ef;&#x4ee5;&#x5728;&#x6211;&#x7684;&#x7535;&#x8111;&#x4e0a;&#x8fd0;&#x884c;&#x7684;&#xff0c;&#x6211;&#x5b89;&#x88c5;&#x4e86;`mysql 5.5`&#x548c;`idea 2020.1`&#x4ee5;&#x53ca;`tomcat 8.5`&#xff0c;&#x5f53;&#x4f60;&#x6253;&#x5f00;&#x4e86;&#x57fa;&#x7840;&#x9879;&#x76ee;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5e76;&#x4e0d;&#x4e00;&#x5b9a;&#x80fd;&#x8fd0;&#x884c;&#xff0c;&#x8bf7;&#x4f60;&#x68c0;&#x67e5;&#x8fd0;&#x884c;&#x73af;&#x5883;&#x662f;&#x5426;&#x548c;&#x6211;&#x4fdd;&#x6301;&#x4e00;&#x81f4;&#xff0c;&#x5176;&#x4e2d;&#x6700;&#x91cd;&#x8981;&#x7684;&#x5c31;&#x662f;`mysql`&#xff0c;&#x8bf7;&#x6700;&#x597d;&#x4e0d;&#x8981;&#x5b89;&#x88c5;`mysql 8.0`&#xff0c;&#x5982;&#x679c;&#x4f60;&#x6709;&#x4e00;&#x5b9a;&#x7684;&#x57fa;&#x7840;&#x5e76;&#x4e14;&#x5b8c;&#x5168;&#x6709;&#x80fd;&#x529b;&#x514b;&#x670d;&#x6b64;&#x95ee;&#x9898;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x5ffd;&#x7565;&#x6211;&#x6240;&#x8bf4;&#x7684;&#x4ee5;&#x4e0a;&#x8fd9;&#x4e9b;&#x3002;&#x63a5;&#x4e0b;&#x6765;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x4fee;&#x6539;&#x6570;&#x636e;&#x5e93;&#x7684;&#x8fde;&#x63a5;&#xff0c;&#x8fd9;&#x4e00;&#x6b65;&#x5f88;&#x91cd;&#x8981;&#xff0c;&#x627e;&#x5230;`applicationContext.xml`&#x6587;&#x4ef6;&#xff0c;&#x6839;&#x636e;&#x81ea;&#x5df1;&#x7684;&#x5b9e;&#x9645;&#x60c5;&#x51b5;&#x4fee;&#x6539;&#x5bc6;&#x7801;&#xff0c;&#x5176;&#x4f59;&#x7684;&#x5c31;&#x4e0d;&#x7528;&#x52a8;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"40,43"}},{"content":"<pre data-lines=\"44,54\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;dataSource&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;driverClassName&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;url&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;username&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;root&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;&#x5bc6;&#x7801;&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"44,54"}},{"content":"<pre data-lines=\"55,62\"><code>&#x5bfc;&#x5165;&#x57fa;&#x7840;&#x6570;&#x636e;&#xff1a;\n\n&#x8bf7;&#x5728;&#x914d;&#x5957;&#x8d44;&#x6599;&#x4e2d;&#xff0c;&#x627e;&#x5230;`ssm&#x4e13;&#x7528;&#x57fa;&#x7840;&#x4ee3;&#x7801;`&#xff0c;&#x5c06;`test.sql`&#x8fd0;&#x884c;&#x5230;&#x81ea;&#x5df1;&#x7684;`mysql`&#x53bb;&#xff0c;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x7834;&#x574f;&#x5927;&#x5bb6;&#x7684;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x6211;&#x5728;&#x8fd9;&#x91cc;&#x91c7;&#x7528;&#x516c;&#x5171;&#x7684;`test`&#x6570;&#x636e;&#x5e93;&#x6765;&#x8fdb;&#x884c;&#x6570;&#x636e;&#x4fdd;&#x5b58;&#x3002;\n\n&#x4e00;&#x5207;&#x51c6;&#x5907;&#x5c31;&#x7eea;&#xff1a;\n\n&#x5f53;&#x4ee5;&#x4e0a;&#x6240;&#x6709;&#x5de5;&#x4f5c;&#x90fd;&#x51c6;&#x5907;&#x5b8c;&#x6210;&#x4ee5;&#x540e;&#xff0c;&#x610f;&#x5473;&#x7740;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x542f;&#x52a8;&#x9879;&#x76ee;&#x5e76;&#x8fdb;&#x884c;&#x7b80;&#x5355;&#x7684;&#x67e5;&#x770b;&#x4e86;&#xff0c;&#x542f;&#x52a8;&#x540e;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x8f93;&#x5165;`http://localhost:8080/`&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#xff0c;&#x5207;&#x8bb0;&#x5728;&#x914d;&#x7f6e;`tomcat`&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e00;&#x5b9a;&#x8981;&#x628a;&#x90a3;&#x4e2a;&#x7f51;&#x7ad9;&#x9ed8;&#x8ba4;&#x7684;&#x524d;&#x7f00;&#x53bb;&#x6389;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x4e0b;&#x8fb9;&#x8fd9;&#x5f20;&#x56fe;&#x7684;&#x7ea2;&#x8272;&#x6846;&#x6846;&#x90e8;&#x5206;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,62"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0baf88e39f7cb8564346e0db8bc774b2.png\" alt>","children":[],"payload":{"tag":"img","lines":"63,64"}}],"payload":{"tag":"h2","lines":"25,27"}},{"content":"2.1&#x3001;&#x5bfc;&#x5165;&#x6240;&#x9700;&#x4f9d;&#x8d56;","children":[{"content":"<pre data-lines=\"68,69\"><code>`Spring Security 5.4.2`&#x662f;&#x57fa;&#x4e8e;`Spring Framework 5.2.11.RELEASE`&#x6784;&#x5efa;&#x7684;&#xff0c;&#x4f46;&#x901a;&#x5e38;&#x5e94;&#x4e0e;&#x4efb;&#x4f55;&#x8f83;&#x65b0;&#x7248;&#x672c;&#x7684;`Spring Framework 5.x`&#x4e00;&#x8d77;&#x4f7f;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"68,69"}},{"content":"<pre data-lines=\"70,89\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework.security<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-security-web<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>5.4.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework.security<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-security-config<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>5.4.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework.security<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-security-taglibs<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>5.4.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"70,89"}}],"payload":{"tag":"h2","lines":"65,67"}},{"content":"2.2&#x3001;&#x521b;&#x5efa;&#x914d;&#x7f6e;&#x6587;&#x4ef6;","children":[{"content":"<pre data-lines=\"93,96\"><code>&#x6211;&#x4eec;&#x9700;&#x8981;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#xff08;`spring-security.xml`&#xff09;&#x6765;&#x7edf;&#x4e00;&#x7ba1;&#x7406;`Spring Security`&#x7684;&#x914d;&#x7f6e;&#x4fe1;&#x606f;&#xff0c;&#x7136;&#x540e;&#x5c06;&#x8fd9;&#x4e2a;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x5f15;&#x5165;&#x5230;&#x6838;&#x5fc3;&#x914d;&#x7f6e;`applicationContext.xml`&#x4e2d;&#xff0c;&#x4ee5;&#x4fdd;&#x8bc1;&#x5728;&#x542f;&#x52a8;&#x7684;&#x65f6;&#x5019;&#x53ef;&#x4ee5;&#x88ab;`Spring`&#x6b63;&#x5e38;&#x52a0;&#x8f7d;&#x5230;&#x3002;\n\nspring-security.xml&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"93,96"}},{"content":"<pre data-lines=\"97,110\"><code class=\"language-xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>?&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">beans</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/beans&quot;</span>\n       <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n       <span class=\"hljs-attr\">xmlns:security</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/security&quot;</span>\n       <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/beans\n                           http://www.springframework.org/schema/beans/spring-beans.xsd\n                           http://www.springframework.org/schema/security\n                           http://www.springframework.org/schema/security/spring-security.xsd&quot;</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">beans</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"97,110"}},{"content":"<pre data-lines=\"111,112\"><code>applicationContext.xml&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"111,112"}},{"content":"<pre data-lines=\"113,118\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">import</span> <span class=\"hljs-attr\">resource</span>=<span class=\"hljs-string\">&quot;spring-security.xml&quot;</span>/&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"113,118"}}],"payload":{"tag":"h2","lines":"90,92"}},{"content":"2.3&#x3001;&#x914d;&#x7f6e;&#x8fc7;&#x6ee4;&#x5668;&#x94fe;","children":[{"content":"<pre data-lines=\"122,123\"><code>`Spring Security`&#x662f;Spring&#x91c7;&#x7528;AOP&#x601d;&#x60f3;&#xff0c;&#x57fa;&#x4e8e;Servlet&#x8fc7;&#x6ee4;&#x5668;&#x5b9e;&#x73b0;&#x7684;&#x5b89;&#x5168;&#x6846;&#x67b6;&#x3002;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x8fd9;&#x4e48;&#x7406;&#x89e3;&#xff1a;&#x5f53;&#x5ba2;&#x6237;&#x7aef;&#x53d1;&#x9001;&#x4e00;&#x6b21;&#x8bf7;&#x6c42;&#xff0c;&#x8fd9;&#x4e2a;&#x8bf7;&#x6c42;&#x5c31;&#x5e94;&#x8be5;&#x88ab;`Spring Security`&#x5b89;&#x5168;&#x6846;&#x67b6;&#x7ed9;&#x62e6;&#x622a;&#x4f4f;&#xff0c;&#x7136;&#x540e;&#x7ecf;&#x8fc7;`Spring Security`&#x7684;&#x8fc7;&#x6ee4;&#x5668;&#x94fe;&#x7684;&#x5c42;&#x5c42;&#x8fc7;&#x6ee4;&#xff0c;&#x6700;&#x7ec8;&#x624d;&#x80fd;&#x5230;&#x8fbe;&#x6211;&#x4eec;&#x76ee;&#x6807;&#x65b9;&#x6cd5;&#xff0c;&#x53ea;&#x8981;&#x5728;&#x8fd9;&#x5176;&#x4e2d;&#x6709;&#x4e00;&#x4e2a;&#x8fc7;&#x6ee4;&#x5668;&#x4e0d;&#x6ee1;&#x8db3;&#xff0c;&#x5c31;&#x4e0d;&#x80fd;&#x5230;&#x8fbe;&#x6211;&#x4eec;&#x7684;&#x76ee;&#x6807;&#x65b9;&#x6cd5;&#xff0c;&#x4ee5;&#x6b64;&#x8d77;&#x5230;&#x4e00;&#x4e2a;&#x5b89;&#x5168;&#x4fdd;&#x62a4;&#x7684;&#x76ee;&#x7684;&#xff0c;&#x4e0b;&#x56fe;&#x663e;&#x793a;&#x4e86;&#x5355;&#x4e2a;HTTP&#x8bf7;&#x6c42;&#x7684;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x5178;&#x578b;&#x5206;&#x5c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"122,123"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/1a58cf29718f6018282ea1c9604af19d.png\" alt>","children":[],"payload":{"tag":"img","lines":"124,125"}},{"content":"<pre data-lines=\"126,192\"><code>&#x90a3;&#x6211;&#x4eec;&#x7684;`Spring Security`&#x7684;&#x8fc7;&#x6ee4;&#x5668;&#x94fe;&#x4e2d;&#x7684;&#x8fc7;&#x6ee4;&#x5668;&#x90fd;&#x6709;&#x54ea;&#x4e9b;&#x5462;&#xff1f;&#x5206;&#x522b;&#x90fd;&#x8d77;&#x5230;&#x4e86;&#x4ec0;&#x4e48;&#x4f5c;&#x7528;&#xff0c;&#x6211;&#x5728;&#x8fd9;&#x91cc;&#x4ee5;&#x57fa;&#x7840;&#x73af;&#x5883;&#x4e0b;&#x542f;&#x52a8;&#x4e3a;&#x4f8b;&#xff0c;&#x7ed9;&#x5927;&#x5bb6;&#x5148;&#x62ff;&#x8fc7;&#x6765;15&#x4e2a;&#x8fc7;&#x6ee4;&#x5668;&#x5e76;&#x4ecb;&#x7ecd;&#xff0c;&#x90a3;&#x4e48;&#xff0c;`Spring Security`&#x4e00;&#x5171;&#x5c31;&#x8fd9;&#x4e48;&#x591a;&#x8fc7;&#x6ee4;&#x5668;&#x5417;&#xff1f;&#x7b54;&#x6848;&#x662f;&#x5426;&#x5b9a;&#x7684;&#xff0c;&#x968f;&#x7740;`spring-security.xml`&#x914d;&#x7f6e;&#x7684;&#x6dfb;&#x52a0;&#xff0c;&#x8fd8;&#x4f1a;&#x51fa;&#x73b0;&#x65b0;&#x7684;&#x8fc7;&#x6ee4;&#x5668;&#x3002;&#x90a3;&#x4e48;&#xff0c;&#x662f;&#x4e0d;&#x662f;`Spring Security`&#x6bcf;&#x6b21;&#x90fd;&#x4f1a;&#x52a0;&#x8f7d;&#x8fd9;&#x4e9b;&#x8fc7;&#x6ee4;&#x5668;&#x5462;&#xff1f;&#x7b54;&#x6848;&#x4e5f;&#x662f;&#x5426;&#x5b9a;&#x7684;&#xff01;&#x968f;&#x7740;`spring-security.xml`&#x914d;&#x7f6e;&#x7684;&#x4fee;&#x6539;&#xff0c;&#x6709;&#x4e9b;&#x8fc7;&#x6ee4;&#x5668;&#x53ef;&#x80fd;&#x4f1a;&#x88ab;&#x53bb;&#x6389;&#x3002;&#x5728;&#x8fd9;&#x91cc;&#x5148;&#x8bf4;&#xff0c;&#x53ea;&#x662f;&#x8ba9;&#x5927;&#x5bb6;&#x5148;&#x6709;&#x4e2a;&#x5370;&#x8c61;&#xff0c;&#x800c;&#x4e14;&#x8fd9;&#x4e9b;&#x8fc7;&#x6ee4;&#x5668;&#x89c1;&#x540d;&#x4e4b;&#x610f;&#x5e76;&#x4e0d;&#x96be;&#x7406;&#x89e3;&#xff0c;&#x8fd9;&#x975e;&#x5e38;&#x6709;&#x52a9;&#x4e8e;&#x6211;&#x4eec;&#x5f00;&#x5c55;&#x63a5;&#x4e0b;&#x6765;&#x7684;&#x5de5;&#x4f5c;&#x3002;\n\n1.  **org.springframework.security.web.context.SecurityContextPersistenceFilter**\n\nSecurityContextPersistenceFilter&#x4e3b;&#x8981;&#x662f;&#x4f7f;&#x7528;SecurityContextRepository&#x5728;session&#x4e2d;&#x4fdd;&#x5b58;&#x6216;&#x66f4;&#x65b0;&#x4e00;&#x4e2a;SecurityContext&#xff0c;&#x5e76;&#x5c06;SecurityContext&#x7ed9;&#x4ee5;&#x540e;&#x7684;&#x8fc7;&#x6ee4;&#x5668;&#x4f7f;&#x7528;&#xff0c;&#x6765;&#x4e3a;&#x540e;&#x7eed;filter&#x5efa;&#x7acb;&#x6240;&#x9700;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x3002;SecurityContext&#x4e2d;&#x5b58;&#x50a8;&#x4e86;&#x5f53;&#x524d;&#x7528;&#x6237;&#x7684;&#x8ba4;&#x8bc1;&#x4ee5;&#x53ca;&#x6743;&#x9650;&#x4fe1;&#x606f;&#x3002;\n\n2.  **org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter**\n\n&#x6b64;&#x8fc7;&#x6ee4;&#x5668;&#x7528;&#x4e8e;&#x96c6;&#x6210;SecurityContext&#x5230;Spring&#x5f02;&#x6b65;&#x6267;&#x884c;&#x673a;&#x5236;&#x4e2d;&#x7684;WebAsyncManager&#x3002;\n\n3.  **org.springframework.security.web.header.HeaderWriterFilter**\n    \n    &#x5411;&#x8bf7;&#x6c42;&#x7684;Header&#x4e2d;&#x6dfb;&#x52a0;&#x76f8;&#x5e94;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x53ef;&#x5728;http&#x6807;&#x7b7e;&#x5185;&#x90e8;&#x4f7f;&#x7528;security:headers&#x6765;&#x63a7;&#x5236;&#x3002;\n    \n4.  **org.springframework.security.web.csrf.CsrfFilter**\n    \n\ncsrf&#x53c8;&#x79f0;&#x8de8;&#x57df;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;&#xff0c;SpringSecurity&#x4f1a;&#x5bf9;&#x6240;&#x6709;post&#x8bf7;&#x6c42;&#x9a8c;&#x8bc1;&#x662f;&#x5426;&#x5305;&#x542b;&#x7cfb;&#x7edf;&#x751f;&#x6210;&#x7684;csrf&#x7684;token&#x4fe1;&#x606f;&#xff0c; &#x5982;&#x679c;&#x4e0d;&#x5305;&#x542b;&#xff0c;&#x5219;&#x62a5;&#x9519;&#xff0c;&#x8d77;&#x5230;&#x9632;&#x6b62;csrf&#x653b;&#x51fb;&#x7684;&#x6548;&#x679c;&#x3002;\n\n5.  **org.springframework.security.web.authentication.logout.LogoutFilter**\n\n&#x5339;&#x914d;URL&#x4e3a;/logout&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x5b9e;&#x73b0;&#x7528;&#x6237;&#x9000;&#x51fa;&#xff0c;&#x6e05;&#x9664;&#x8ba4;&#x8bc1;&#x4fe1;&#x606f;&#x3002;\n\n6.  **org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter**\n    \n    &#x8ba4;&#x8bc1;&#x64cd;&#x4f5c;&#x5168;&#x9760;&#x8fd9;&#x4e2a;&#x8fc7;&#x6ee4;&#x5668;&#xff0c;&#x9ed8;&#x8ba4;&#x5339;&#x914d;URL&#x4e3a;/login&#x4e14;&#x5fc5;&#x987b;&#x4e3a;POST&#x8bf7;&#x6c42;&#x3002;\n    \n7.  **org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter**\n    \n    &#x5982;&#x679c;&#x6ca1;&#x6709;&#x5728;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#x6307;&#x5b9a;&#x8ba4;&#x8bc1;&#x9875;&#x9762;&#xff0c;&#x5219;&#x7531;&#x8be5;&#x8fc7;&#x6ee4;&#x5668;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x9ed8;&#x8ba4;&#x8ba4;&#x8bc1;&#x9875;&#x9762;&#x3002;\n    \n8.  **org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter**\n    \n\n&#x5982;&#x679c;&#x6ca1;&#x6709;&#x5728;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#x6307;&#x5b9a;&#x9000;&#x51fa;&#x9875;&#x9762;&#xff0c;&#x5219;&#x7531;&#x8be5;&#x8fc7;&#x6ee4;&#x5668;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x9ed8;&#x8ba4;&#x9000;&#x51fa;&#x9875;&#x9762;&#x3002;\n\n9.  **org.springframework.security.web.authentication.www.BasicAuthenticationFilter**\n    \n    &#x6b64;&#x8fc7;&#x6ee4;&#x5668;&#x4f1a;&#x81ea;&#x52a8;&#x89e3;&#x6790;HTTP&#x8bf7;&#x6c42;&#x4e2d;&#x5934;&#x90e8;&#x540d;&#x5b57;&#x4e3a;Authentication&#xff0c;&#x4e14;&#x4ee5;Basic&#x5f00;&#x5934;&#x7684;&#x5934;&#x4fe1;&#x606f;&#x3002;\n    \n10.  **org.springframework.security.web.savedrequest.RequestCacheAwareFilter**\n        \n    &#x901a;&#x8fc7;HttpSessionRequestCache&#x5185;&#x90e8;&#x7ef4;&#x62a4;&#x4e86;&#x4e00;&#x4e2a;RequestCache&#xff0c;&#x7528;&#x4e8e;&#x7f13;&#x5b58;HttpServletRequest&#x3002;\n    \n11.  **org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter**\n        \n    &#x9488;&#x5bf9;ServletRequest&#x8fdb;&#x884c;&#x4e86;&#x4e00;&#x6b21;&#x5305;&#x88c5;&#xff0c;&#x4f7f;&#x5f97;request&#x5177;&#x6709;&#x66f4;&#x52a0;&#x4e30;&#x5bcc;&#x7684;API&#x3002;\n\n12.  **org.springframework.security.web.authentication.AnonymousAuthenticationFilter**\n        \n    &#x5f53;SecurityContextHolder&#x4e2d;&#x8ba4;&#x8bc1;&#x4fe1;&#x606f;&#x4e3a;&#x7a7a;&#xff0c;&#x5219;&#x4f1a;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x533f;&#x540d;&#x7528;&#x6237;&#x5b58;&#x5165;&#x5230;SecurityContextHolder&#x4e2d;&#x3002;Spring Security&#x4e3a;&#x4e86;&#x517c;&#x5bb9;&#x672a;&#x767b;&#x5f55;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x4e5f;&#x8d70;&#x4e86;&#x4e00;&#x5957;&#x8ba4;&#x8bc1;&#x6d41;&#x7a0b;&#xff0c;&#x53ea;&#x4e0d;&#x8fc7;&#x662f;&#x4e00;&#x4e2a;&#x533f;&#x540d;&#x7684;&#x8eab;&#x4efd;&#x3002;\n    \n13.  **org.springframework.security.web.session.SessionManagementFilter**\n        \n    SecurityContextRepository&#x9650;&#x5236;&#x540c;&#x4e00;&#x7528;&#x6237;&#x5f00;&#x542f;&#x591a;&#x4e2a;&#x4f1a;&#x8bdd;&#x7684;&#x6570;&#x91cf;&#x3002;\n    \n14.  **org.springframework.security.web.access.ExceptionTranslationFilter**\n        \n    &#x5f02;&#x5e38;&#x8f6c;&#x6362;&#x8fc7;&#x6ee4;&#x5668;&#x4f4d;&#x4e8e;&#x6574;&#x4e2a;springSecurityFilterChain&#x7684;&#x540e;&#x65b9;&#xff0c;&#x7528;&#x6765;&#x8f6c;&#x6362;&#x6574;&#x4e2a;&#x94fe;&#x8def;&#x4e2d;&#x51fa;&#x73b0;&#x7684;&#x5f02;&#x5e38;&#x3002;\n    \n15.  **org.springframework.security.web.access.intercept.FilterSecurityInterceptor**\n        \n    &#x83b7;&#x53d6;&#x6240;&#x914d;&#x7f6e;&#x8d44;&#x6e90;&#x8bbf;&#x95ee;&#x7684;&#x6388;&#x6743;&#x4fe1;&#x606f;&#xff0c;&#x6839;&#x636e;SecurityContextHolder&#x4e2d;&#x5b58;&#x50a8;&#x7684;&#x7528;&#x6237;&#x4fe1;&#x606f;&#x6765;&#x51b3;&#x5b9a;&#x5176;&#x662f;&#x5426;&#x6709;&#x6743;&#x9650;&#x3002;\n    \n\n&#x6211;&#x4eec;&#x5bf9;&#x8fc7;&#x6ee4;&#x5668;&#x94fe;&#x6709;&#x4e86;&#x4e00;&#x5b9a;&#x7684;&#x8ba4;&#x8bc6;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#xff0c;&#x6211;&#x4eec;&#x5728;`web.xml`&#x4e2d;&#x914d;&#x7f6e;&#x4e00;&#x4e0b;&#x8fc7;&#x6ee4;&#x5668;&#x94fe;&#xff0c;&#x4ee5;&#x4e0b;&#x8fd9;&#x6bb5;&#x914d;&#x7f6e;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x8fc7;&#x6ee4;&#x5668;&#x94fe;&#x7684;&#x5165;&#x53e3;&#xff0c;&#x5e76;&#x4e14;&#x8fc7;&#x6ee4;&#x5668;&#x7684;&#x540d;&#x79f0;&#x4e0d;&#x53ef;&#x968f;&#x4fbf;&#x8d77;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"126,192"}},{"content":"<pre data-lines=\"193,205\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-name</span>&gt;</span>springSecurityFilterChain<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-name</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-class</span>&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-class</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-mapping</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-name</span>&gt;</span>springSecurityFilterChain<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-name</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">url-pattern</span>&gt;</span>/*<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">url-pattern</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-mapping</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"193,205"}}],"payload":{"tag":"h2","lines":"119,121"}},{"content":"2.4&#x3001;&#x914d;&#x7f6e;&#x767b;&#x5f55;&#x7528;&#x6237;","children":[{"content":"<pre data-lines=\"209,210\"><code>&#x6211;&#x4eec;&#x8981;&#x5728;`spring-security.xml`&#x6587;&#x4ef6;&#x4e2d;&#x914d;&#x7f6e;&#x4e00;&#x4e0b;&#xff0c;&#x5f53;&#x524d;&#x6709;&#x54ea;&#x4e9b;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x6211;&#x4eec;&#x7684;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#xff0c;&#x9700;&#x8981;&#x5b9a;&#x4e49;&#x7528;&#x6237;&#x7684;&#x540d;&#x79f0;&#x3001;&#x7528;&#x6237;&#x7684;&#x5bc6;&#x7801;&#x3001;&#x7528;&#x6237;&#x7684;&#x89d2;&#x8272;&#x3002;&#x5e76;&#x4e14;&#x8fd9;&#x4e09;&#x6837;&#x4e1c;&#x897f;&#x90fd;&#x662f;&#x6211;&#x4eec;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#xff0c;&#x7528;&#x6237;&#x7684;&#x540d;&#x79f0;&#x548c;&#x5bc6;&#x7801;&#x662f;&#x5728;&#x767b;&#x5f55;&#x7684;&#x65f6;&#x5019;&#x9700;&#x8981;&#x9a8c;&#x8bc1;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x5f53;&#x9a8c;&#x8bc1;&#x901a;&#x8fc7;&#x4ee5;&#x540e;&#xff0c;&#x5c31;&#x4f1a;&#x901a;&#x8fc7;&#x89d2;&#x8272;&#x6765;&#x5224;&#x65ad;&#x5f53;&#x524d;&#x8fd9;&#x4e2a;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x7684;&#x54ea;&#x4e9b;&#x8d44;&#x6e90;&#xff0c;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x6211;&#x4eec;&#x662f;&#x9700;&#x8981;&#x4f7f;&#x7528;`Spring Security`&#x62e6;&#x622a;&#x6240;&#x6709;&#x7684;&#x8bf7;&#x6c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"209,210"}},{"content":"<pre data-lines=\"211,228\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/**&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_USER&apos;,&apos;ROLE_ADMIN&apos;)&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication-manager</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication-provider</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:user-service</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:user</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;user&quot;</span> <span class=\"hljs-attr\">password</span>=<span class=\"hljs-string\">&quot;{noop}123456&quot;</span> <span class=\"hljs-attr\">authorities</span>=<span class=\"hljs-string\">&quot;ROLE_USER&quot;</span>/&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:user</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;admin&quot;</span> <span class=\"hljs-attr\">password</span>=<span class=\"hljs-string\">&quot;{noop}123456&quot;</span> <span class=\"hljs-attr\">authorities</span>=<span class=\"hljs-string\">&quot;ROLE_ADMIN&quot;</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:user-service</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authentication-provider</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authentication-manager</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"211,228"}},{"content":"<pre data-lines=\"229,230\"><code>&#x5982;&#x679c;&#x4e00;&#x5207;&#x6b63;&#x5e38;&#xff0c;&#x5f53;&#x4f60;&#x542f;&#x52a8;&#x5e94;&#x7528;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f60;&#x5e94;&#x8be5;&#x4f1a;&#x6765;&#x5230;`Spring Security`&#x7684;&#x9ed8;&#x8ba4;&#x767b;&#x5f55;&#x9875;&#x9762;&#xff0c;&#x8fd9;&#x4e2a;&#x9875;&#x9762;&#x662f;&#x7531;&#x6846;&#x67b6;&#x81ea;&#x52a8;&#x751f;&#x6210;&#x7684;&#xff0c;&#x76ee;&#x7684;&#x5c31;&#x662f;&#x7528;&#x6765;&#x8fdb;&#x884c;&#x767b;&#x5f55;&#x7684;&#xff0c;&#x7531;&#x4e8e;&#x8fd9;&#x4e2a;&#x9875;&#x9762;&#x4e2d;&#x4f7f;&#x7528;&#x4e86;`bootstrap`&#x7684;cdn&#x94fe;&#x63a5;&#xff0c;&#x7b2c;&#x4e00;&#x6b21;&#x8bbf;&#x95ee;&#x53ef;&#x80fd;&#x4f1a;&#x5f88;&#x6162;&#xff0c;&#x4ee5;&#x540e;&#x5c31;&#x597d;&#x5f88;&#x591a;&#x4e86;&#xff0c;&#x4e0d;&#x5f97;&#x4e0d;&#x8bf4;&#x5176;&#x5b9e;&#x4ed6;&#x7684;&#x8fd9;&#x4e2a;&#x9875;&#x9762;&#x8bbe;&#x8ba1;&#x7684;&#x8fd8;&#x662f;&#x4e0d;&#x9519;&#x7684;&#xff0c;&#x5f88;&#x7cbe;&#x7b80;&#x7684;&#x98ce;&#x683c;&#xff0c;&#x5982;&#x4e0b;&#x6548;&#x679c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"229,230"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/83cf125352e1682727ec080eac0a80e6.png\" alt>","children":[],"payload":{"tag":"img","lines":"231,232"}}],"payload":{"tag":"h2","lines":"206,208"}},{"content":"2.5&#x3001;&#x5f00;&#x653e;&#x5185;&#x5d4c;&#x6846;&#x67b6;","children":[{"content":"<pre data-lines=\"236,237\"><code>&#x5f53;&#x4f60;&#x4f7f;&#x7528;&#x7528;&#x6237;`user`&#x5bc6;&#x7801;`123456`&#x767b;&#x5f55;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9ed8;&#x8ba4;&#x5c31;&#x4f1a;&#x8fdb;&#x5165;&#x5230;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x7684;&#x540e;&#x53f0;&#x9996;&#x9875;&#xff0c;&#x4f46;&#x662f;&#x5f53;&#x4f60;&#x70b9;&#x51fb;&#x5404;&#x4e2a;&#x529f;&#x80fd;&#x6a21;&#x5757;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x53d1;&#x73b0;**localhost**&#x62d2;&#x7edd;&#x4e86;&#x6211;&#x4eec;&#x7684;&#x8fde;&#x63a5;&#x8bf7;&#x6c42;&#x3002;&#x5176;&#x5b9e;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x8fd8;&#x662f;&#x633a;&#x5e38;&#x89c1;&#x7684;&#x4e00;&#x4e2a;&#x95ee;&#x9898;&#xff0c;&#x9879;&#x76ee;&#x4e2d;&#x5982;&#x679c;&#x7528;&#x5230;iframe&#x5d4c;&#x5165;&#x7f51;&#x9875;&#xff0c;&#x7136;&#x540e;&#x7528;&#x5230;Spring Security&#xff0c;&#x8bf7;&#x6c42;&#x5c31;&#x4f1a;&#x88ab;&#x62e6;&#x622a;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x6253;&#x5f00;F12&#x5f00;&#x53d1;&#x8005;&#x63a7;&#x5236;&#x53f0;&#xff0c;&#x4f60;&#x53ef;&#x80fd;&#x5c31;&#x4f1a;&#x53d1;&#x73b0;&#x8fd9;&#x6837;&#x4e00;&#x53e5;&#x62a5;&#x9519;&#xff1a;`Refused to display &apos;http://localhost:8080/user/add&apos; in a frame because it set &apos;X-Frame-Options&apos; to &apos;deny&apos;.`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,237"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/916e03de47c3591123e2616a1b9a560a.png\" alt>","children":[],"payload":{"tag":"img","lines":"238,239"}},{"content":"<pre data-lines=\"240,252\"><code>`Spring Security`&#x4e0b;&#xff0c;`X-Frame-Options`&#x9ed8;&#x8ba4;&#x4e3a;`DENY`&#xff0c;&#x975e;`Spring Security`&#x73af;&#x5883;&#x4e0b;&#xff0c;`X-Frame-Options`&#x7684;&#x9ed8;&#x8ba4;&#x5927;&#x591a;&#x4e5f;&#x662f;`DENY`&#xff0c;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x62d2;&#x7edd;&#x5f53;&#x524d;&#x9875;&#x9762;&#x52a0;&#x8f7d;&#x4efb;&#x4f55;Frame&#x9875;&#x9762;&#xff0c;&#x8bbe;&#x7f6e;&#x542b;&#x4e49;&#x5982;&#x4e0b;&#xff1a;\n\n*   DENY&#xff1a;&#x6d4f;&#x89c8;&#x5668;&#x62d2;&#x7edd;&#x5f53;&#x524d;&#x9875;&#x9762;&#x52a0;&#x8f7d;&#x4efb;&#x4f55;frame&#x9875;&#x9762;\n    \n*   SAMEORIGIN&#xff1a;frame&#x9875;&#x9762;&#x7684;&#x5730;&#x5740;&#x53ea;&#x80fd;&#x4e3a;&#x540c;&#x6e90;&#x57df;&#x540d;&#x4e0b;&#x7684;&#x9875;&#x9762;\n    \n*   ALLOW-FROM&#xff1a;origin&#x4e3a;&#x5141;&#x8bb8;frame&#x52a0;&#x8f7d;&#x7684;&#x9875;&#x9762;&#x5730;&#x5740;\n    \n\n&#x65e2;&#x7136;&#x6e05;&#x695a;&#x4e86;&#x95ee;&#x9898;&#x7684;&#x6765;&#x6e90;&#xff0c;&#x90a3;&#x6211;&#x4eec;&#x4e5f;&#x5c31;&#x597d;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x4e86;&#xff0c;&#x6709;&#x4e24;&#x79cd;&#x89e3;&#x51b3;&#x529e;&#x6cd5;&#xff0c;&#x7b2c;&#x4e00;&#x79cd;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x5173;&#x6389;`Spring Security`&#x5bf9;frame&#x7684;&#x62e6;&#x622a;&#xff1b;&#x53e6;&#x5916;&#x4e00;&#x79cd;&#x5c31;&#x662f;&#x5c06;`X-Frame-Options`&#x8bbe;&#x7f6e;&#x4e3a;`SAMEORIGIN`&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x53ea;&#x80fd;&#x662f;&#x6211;&#x4eec;&#x540c;&#x57df;&#x540d;&#x4e0b;&#x7684;&#x8bf7;&#x6c42;&#x8bbf;&#x95ee;&#xff0c;&#x5f53;&#x7136;&#x4e86;&#xff0c;&#x8fd9;&#x79cd;&#x62e6;&#x622a;&#x673a;&#x5236;&#x80af;&#x5b9a;&#x662f;&#x4e3a;&#x4e86;&#x4fdd;&#x8bc1;&#x7cfb;&#x7edf;&#x7684;&#x5b89;&#x5168;&#x6027;&#xff0c;&#x5982;&#x679c;&#x5173;&#x6389;&#x4e86;&#xff0c;&#x6709;&#x70b9;&#x592a;&#x53ef;&#x60dc;&#x4e86;&#xff0c;&#x6211;&#x5728;&#x8fd9;&#x91cc;&#x7ed9;&#x51fa;&#x4e24;&#x79cd;&#x89e3;&#x51b3;&#x65b9;&#x6848;&#x7684;&#x914d;&#x7f6e;&#xff0c;&#x4f46;&#x662f;&#x6211;&#x4f1a;&#x91c7;&#x7528;&#x7b2c;&#x4e8c;&#x79cd;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x7b2c;&#x4e00;&#x79cd;&#x7684;&#x5173;&#x95ed;&#x3002;\n\n&#x7b2c;&#x4e00;&#x79cd;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"240,252"}},{"content":"<pre data-lines=\"253,264\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/**&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_USER&apos;,&apos;ROLE_ADMIN&apos;)&quot;</span>/&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:headers</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:frame-options</span> <span class=\"hljs-attr\">disabled</span>=<span class=\"hljs-string\">&quot;true&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:headers</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"253,264"}},{"content":"<pre data-lines=\"265,266\"><code>&#x7b2c;&#x4e8c;&#x79cd;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"265,266"}},{"content":"<pre data-lines=\"267,278\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/**&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_USER&apos;,&apos;ROLE_ADMIN&apos;)&quot;</span>/&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:headers</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:frame-options</span> <span class=\"hljs-attr\">policy</span>=<span class=\"hljs-string\">&quot;SAMEORIGIN&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:headers</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"267,278"}}],"payload":{"tag":"h2","lines":"233,235"}},{"content":"2.6&#x3001;&#x9000;&#x51fa;&#x5f53;&#x524d;&#x767b;&#x5f55;","children":[{"content":"<pre data-lines=\"282,283\"><code>&#x5982;&#x679c;&#x60f3;&#x8981;&#x6ce8;&#x9500;&#xff0c;&#x53ea;&#x8981;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x5730;&#x5740;&#x8bbf;&#x95ee;&#xff1a;http://localhost:8080/logout&#x5c31;&#x53ef;&#x4ee5;&#x4e86;&#xff0c;&#x4e3a;&#x4e86;&#x529f;&#x80fd;&#x5b8c;&#x6574;&#xff0c;&#x8bf7;&#x4f60;&#x6253;&#x5f00;`main.jsp`&#xff0c;&#x7b2c;16&#x884c;&#xff0c;&#x4fee;&#x6539;&#x6ce8;&#x9500;&#x5730;&#x5740;&#x4e3a;&#x4ee5;&#x4e0b;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"282,283"}},{"content":"<pre data-lines=\"284,292\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;px-3 navbar-nav&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav-item text-nowrap&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-danger btn-sm&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/logout&quot;</span>&gt;</span>&#x6ce8;&#x9500;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"284,292"}}],"payload":{"tag":"h2","lines":"279,281"}},{"content":"2.7&#x3001;&#x6307;&#x5b9a;&#x767b;&#x5f55;&#x9875;&#x9762;","children":[{"content":"<pre data-lines=\"296,297\"><code>&#x867d;&#x7136;&#x9ed8;&#x8ba4;&#x7684;&#x767b;&#x5f55;&#x9875;&#x9762;&#x8fd8;&#x4e0d;&#x9519;&#xff0c;&#x5f80;&#x5f80;&#x9879;&#x76ee;&#x4e2d;&#x7684;&#x9759;&#x6001;&#x9875;&#x9762;&#x5df2;&#x7ecf;&#x662f;&#x524d;&#x7aef;&#x5f00;&#x53d1;&#x597d;&#x7684;&#xff0c;&#x5305;&#x62ec;&#x767b;&#x5f55;&#x9875;&#x9762;&#xff0c;&#x6211;&#x4eec;&#x60f3;&#x8981;&#x4f7f;&#x7528;&#x81ea;&#x5df1;&#x7684;&#x767b;&#x5f55;&#x754c;&#x9762;&#x8be5;&#x600e;&#x4e48;&#x529e;&#xff1f;&#x6211;&#x4eec;&#x4e0d;&#x59a8;&#x8f6c;&#x6362;&#x4e00;&#x4e0b;&#x601d;&#x7ef4;&#xff0c;&#x4f7f;&#x7528;&#x81ea;&#x5e26;&#x7684;&#x9875;&#x9762;&#xff0c;&#x6211;&#x4eec;&#x5148;&#x6253;&#x5f00;&#x6e90;&#x7801;&#xff0c;&#x770b;&#x770b;&#x4ed6;&#x662f;&#x600e;&#x4e48;&#x5199;&#x7684;&#xff0c;&#x6309;&#x7167;&#x4ed6;&#x7684;&#x8fd9;&#x4e2a;&#x6a21;&#x5f0f;&#xff0c;&#x6211;&#x4eec;&#x6a21;&#x4eff;&#x7740;&#x5199;&#x5230;&#x81ea;&#x5df1;&#x7684;&#x767b;&#x5f55;&#x754c;&#x9762;&#x4e2d;&#x4e0d;&#x5c31;&#x597d;&#x4e86;&#xff0c;&#x4e3a;&#x4e86;&#x8282;&#x7ea6;&#x5927;&#x5bb6;&#x7684;&#x65f6;&#x95f4;&#xff0c;&#x6211;&#x5c31;&#x5728;&#x4e0b;&#x8fb9;&#x8d34;&#x51fa;&#x6765;&#x4e86;&#x5173;&#x952e;&#x90e8;&#x5206;&#xff0c;&#x4f60;&#x4e5f;&#x53ef;&#x4ee5;&#x81ea;&#x5df1;&#x6253;&#x5f00;&#x5c1d;&#x8bd5;&#xff0c;&#x5982;&#x4e0b;&#x6240;&#x793a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"296,297"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/178e52304b07d3368d12f7e3ed8be4bd.png\" alt>","children":[],"payload":{"tag":"img","lines":"298,299"}},{"content":"<pre data-lines=\"300,301\"><code>&#x6211;&#x4eec;&#x4f1a;&#x53d1;&#x73b0;&#xff0c;&#x4ed6;&#x7684;&#x8fd9;&#x4e2a;&#x767b;&#x5f55;&#x9875;&#x9762;&#x6ca1;&#x6709;&#x4ec0;&#x4e48;&#x7279;&#x522b;&#x7684;&#xff0c;&#x5c31;&#x662f;&#x4e00;&#x4e2a;form&#x8868;&#x5355;&#xff0c;&#x91cc;&#x8fb9;&#x6709;&#x4e24;&#x4e2a;&#x6587;&#x672c;&#x6846;&#xff0c;&#x4e00;&#x4e2a;&#x662f;&#x8d26;&#x53f7;&#xff0c;&#x4e00;&#x4e2a;&#x662f;&#x5bc6;&#x7801;&#xff0c;&#x8fd8;&#x6709;&#x6700;&#x4e0b;&#x8fb9;&#x591a;&#x4e86;&#x4e00;&#x4e2a;&#x7279;&#x6b8a;&#x7684;hidden&#x9690;&#x85cf;&#x57df;&#xff0c;&#x8fd9;&#x4e2a;&#x9690;&#x85cf;&#x57df;&#x4ed6;&#x662f;&#x4e3a;&#x4e86;&#x9632;&#x6b62;csrf&#x8de8;&#x7ad9;&#x7834;&#x574f;&#x7684;&#xff0c;&#x8fd9;&#x4e2a;&#x503c;&#x6bcf;&#x4e00;&#x6b21;&#x542f;&#x52a8;&#x9879;&#x76ee;&#x90fd;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x662f;&#x4e00;&#x4e2a;&#x52a8;&#x6001;&#x503c;&#xff0c;&#x4ed6;&#x662f;&#x4e3a;&#x4e86;&#x6807;&#x8bc6;&#x5f53;&#x524d;&#x8bf7;&#x6c42;&#x4e00;&#x5b9a;&#x662f;&#x6211;&#x4eec;&#x81ea;&#x5df1;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x522b;&#x7684;&#x7f51;&#x7ad9;&#x4eff;&#x9020;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x6211;&#x4eec;&#x7684;&#x6240;&#x6709;&#x8bf7;&#x6c42;&#x90fd;&#x9700;&#x8981;&#x643a;&#x5e26;&#x4e0a;&#x8fd9;&#x4e2a;&#x6807;&#x7b7e;&#x4e0a;&#x8fb9;&#x7684;`value`&#x503c;&#xff0c;&#x6211;&#x4eec;&#x4e5f;&#x79f0;&#x8fd9;&#x4e2a;&#x503c;&#x4e3a;`token`&#x503c;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x501f;&#x52a9;`Spring Security`&#x7684;&#x6807;&#x7b7e;&#x5e93;&#x6765;&#x52a8;&#x6001;&#x751f;&#x6210;&#x8fd9;&#x4e2a;&#x9690;&#x85cf;&#x57df;&#xff0c;&#x76f4;&#x63a5;&#x62f7;&#x8d1d;&#x662f;&#x4e0d;&#x7ba1;&#x7528;&#x7684;&#xff0c;&#x6211;&#x7167;&#x7740;&#x9ed8;&#x8ba4;&#x767b;&#x5f55;&#x754c;&#x9762;&#x81ea;&#x5df1;&#x91cd;&#x5199;&#x4e86;&#x4e00;&#x4e2a;&#x767b;&#x5f55;&#x9875;&#x9762;&#xff0c;&#x653e;&#x5728;`WEB-INF/views`&#x4e0b;&#xff0c;&#x540d;&#x5b57;&#x53eb;`login.jsp`&#xff0c;&#x5b8c;&#x6574;&#x7684;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"300,301"}},{"content":"<pre data-lines=\"302,337\"><code class=\"language-html\">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n&lt;%@ taglib prefix=&quot;security&quot; uri=&quot;http://www.springframework.org/security/tags&quot; %&gt;\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>&#x81ea;&#x5b9a;&#x4e49;&#x767b;&#x5f55;&#x9875;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/css/bootstrap.min.css&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/css/main.css&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container mt-4&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">action</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/login&quot;</span> <span class=\"hljs-attr\">method</span>=<span class=\"hljs-string\">&quot;post&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-group&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">for</span>=<span class=\"hljs-string\">&quot;username&quot;</span>&gt;</span>&#x7528;&#x6237;&#xff1a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">label</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-control&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;username&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;username&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">&quot;&#x8bf7;&#x8f93;&#x5165;&#x7528;&#x6237;&quot;</span> <span class=\"hljs-attr\">required</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-group&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">for</span>=<span class=\"hljs-string\">&quot;password&quot;</span>&gt;</span>&#x5bc6;&#x7801;&#xff1a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">label</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-control&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">&quot;&#x8bf7;&#x8f93;&#x5165;&#x5bc6;&#x7801;&quot;</span> <span class=\"hljs-attr\">required</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-group form-check&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;checkbox&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-check-input&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;autoLogin&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-check-label&quot;</span> <span class=\"hljs-attr\">for</span>=<span class=\"hljs-string\">&quot;autoLogin&quot;</span>&gt;</span>&#x81ea;&#x52a8;&#x767b;&#x5f55;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">label</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;submit&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-primary&quot;</span>&gt;</span>&#x767b;&#x5f55;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n        &lt;%--&#x9690;&#x85cf;&#x57df;&#xff0c;&#x7528;&#x4e8e;&#x9632;&#x6b62;csrf&#x653b;&#x51fb;--%&gt;\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:csrfInput</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/js/bootstrap.bundle.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"302,337"}},{"content":"<pre data-lines=\"338,341\"><code>&#x6211;&#x4eec;&#x7f16;&#x5199;&#x597d;&#x81ea;&#x5df1;&#x7684;&#x767b;&#x5f55;&#x9875;&#x9762;&#xff0c;&#x8fd8;&#x5f97;&#x9700;&#x8981;&#x544a;&#x8bc9;`Spring Security`&#x4f60;&#x767b;&#x5f55;&#x7684;&#x65f6;&#x5019;&#x4e0d;&#x8981;&#x4f7f;&#x7528;&#x4f60;&#x81ea;&#x5df1;&#x7684;&#x767b;&#x5f55;&#x754c;&#x9762;&#x4e86;&#x4f7f;&#x7528;&#x6211;&#x7684;&#xff0c;&#x6211;&#x4eec;&#x53ea;&#x9700;&#x8981;&#x5728;`spring-security.xml`\n\n&#x4e2d;&#x7f16;&#x5199;&#x5982;&#x4e0b;&#x914d;&#x7f6e;&#x5373;&#x53ef;&#xff0c;&#x7136;&#x540e;&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x9879;&#x76ee;&#xff0c;&#x6211;&#x4eec;&#x6765;&#x770b;&#x4e00;&#x770b;&#x6548;&#x679c;&#xff0c;&#x662f;&#x4e0d;&#x662f;&#x53ef;&#x4ee5;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"338,341"}},{"content":"<pre data-lines=\"342,363\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;permitAll()&quot;</span>/&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/**&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_USER&apos;,&apos;ROLE_ADMIN&apos;)&quot;</span>/&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:headers</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:frame-options</span> <span class=\"hljs-attr\">policy</span>=<span class=\"hljs-string\">&quot;SAMEORIGIN&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:headers</span>&gt;</span>\n    \n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:form-login</span> <span class=\"hljs-attr\">login-page</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span>\n                         <span class=\"hljs-attr\">login-processing-url</span>=<span class=\"hljs-string\">&quot;/login&quot;</span>\n                         <span class=\"hljs-attr\">default-target-url</span>=<span class=\"hljs-string\">&quot;/main&quot;</span>\n                         <span class=\"hljs-attr\">username-parameter</span>=<span class=\"hljs-string\">&quot;username&quot;</span>\n                         <span class=\"hljs-attr\">password-parameter</span>=<span class=\"hljs-string\">&quot;password&quot;</span>\n                         <span class=\"hljs-attr\">authentication-failure-url</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"342,363"}},{"content":"<pre data-lines=\"364,381\"><code class=\"language-java\"><span class=\"hljs-meta\">@Controller</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MainController</span> {\n    \n    <span class=\"hljs-meta\">@RequestMapping(&quot;/main&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;main&quot;</span>;\n    }\n\n    \n    <span class=\"hljs-meta\">@RequestMapping(&quot;/toLogin&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toLogin</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;login&quot;</span>;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"364,381"}}],"payload":{"tag":"h2","lines":"293,295"}},{"content":"2.8&#x3001;&#x5f00;&#x653e;&#x9759;&#x6001;&#x8d44;&#x6e90;","children":[{"content":"<pre data-lines=\"385,386\"><code>&#x6700;&#x7ec8;&#x6211;&#x4eec;&#x542f;&#x52a8;&#x540e;&#xff0c;&#x53d1;&#x73b0;&#x786e;&#x5b9e;&#x6765;&#x5230;&#x4e86;&#x6211;&#x4eec;&#x81ea;&#x5df1;&#x5b9a;&#x4e49;&#x7684;&#x767b;&#x5f55;&#x9875;&#x9762;&#x4e86;&#xff0c;&#x8bf4;&#x660e;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x7684;&#x914d;&#x7f6e;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x95ee;&#x9898;&#xff0c;&#x4f46;&#x662f;&#xff0c;&#x597d;&#x50cf;&#x5e72;&#x5e72;&#x5df4;&#x5df4;&#xff0c;&#x5565;&#x6837;&#x5f0f;&#x90fd;&#x6ca1;&#x6709;&#xff0c;&#x8fd9;&#x662f;&#x4e3a;&#x4ec0;&#x4e48;&#x5462;&#xff1f;&#x5982;&#x679c;&#x4f60;&#x80fd;&#x770b;&#x5230;&#x6837;&#x5f0f;&#xff0c;&#x4f60;&#x6e05;&#x7406;&#x4e00;&#x4e0b;&#x6d4f;&#x89c8;&#x5668;&#x7f13;&#x5b58;&#x6216;&#x8005;`CTRL+F5`&#x5f3a;&#x5236;&#x5237;&#x65b0;&#x4e00;&#x4e0b;&#xff0c;&#x5c31;&#x770b;&#x4e0d;&#x5230;&#x4e86;&#xff0c;&#x81f3;&#x4e8e;&#x539f;&#x56e0;&#xff0c;&#x6211;&#x4eec;&#x4e0d;&#x96be;&#x60f3;&#x5230;&#xff0c;&#x521a;&#x624d;&#x6211;&#x4eec;&#x53ea;&#x662f;&#x5bf9;&#x8df3;&#x8f6c;&#x5230;&#x767b;&#x5f55;&#x9875;&#x7684;&#x8bf7;&#x6c42;&#x8fdb;&#x884c;&#x4e86;&#x653e;&#x884c;&#xff0c;&#x800c;`Spring Security`&#x9ed8;&#x8ba4;&#x662f;&#x62e6;&#x622a;&#x6240;&#x6709;&#x8bf7;&#x6c42;&#xff0c;&#x90a3;&#x80af;&#x5b9a;&#x4e5f;&#x5305;&#x62ec;&#x9759;&#x6001;&#x8d44;&#x6e90;css&#x3001;js&#x3001;img&#x4e4b;&#x7c7b;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x9759;&#x6001;&#x8d44;&#x6e90;&#x662f;&#x5e94;&#x8be5;&#x8981;&#x88ab;&#x653e;&#x884c;&#x7684;&#xff0c;&#x9759;&#x6001;&#x8d44;&#x6e90;&#x662f;&#x4e0d;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x4fdd;&#x62a4;&#x7684;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x5728;`spring-security.xml`&#x914d;&#x7f6e;&#x5982;&#x4e0b;&#x4ee3;&#x7801;&#x6765;&#x653e;&#x884c;&#x9759;&#x6001;&#x8d44;&#x6e90;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"385,386"}},{"content":"<pre data-lines=\"387,396\"><code class=\"language-xml\">\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/css/**&quot;</span> <span class=\"hljs-attr\">security</span>=<span class=\"hljs-string\">&quot;none&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/img/**&quot;</span> <span class=\"hljs-attr\">security</span>=<span class=\"hljs-string\">&quot;none&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/js/**&quot;</span> <span class=\"hljs-attr\">security</span>=<span class=\"hljs-string\">&quot;none&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/favicon.ico&quot;</span> <span class=\"hljs-attr\">security</span>=<span class=\"hljs-string\">&quot;none&quot;</span>/&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"387,396"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/06255a6b3817e32d40dfbb4d9fa9d12e.png\" alt>","children":[],"payload":{"tag":"img","lines":"397,398"}}],"payload":{"tag":"h2","lines":"382,384"}},{"content":"2.9&#x3001;&#x6307;&#x5b9a;&#x9000;&#x51fa;&#x9875;&#x9762;","children":[{"content":"<pre data-lines=\"402,403\"><code>&#x5f53;&#x4f60;&#x73b0;&#x5728;&#x60f3;&#x8981;&#x9000;&#x51fa;&#x767b;&#x5f55;&#xff0c;&#x70b9;&#x51fb;&#x53f3;&#x4e0a;&#x89d2;&#x54b1;&#x4eec;&#x4e4b;&#x524d;&#x914d;&#x7f6e;&#x597d;&#x7684;&#x6ce8;&#x9500;&#xff0c;&#x4f60;&#x5c31;&#x4f1a;&#x795e;&#x5947;&#x7684;&#x53d1;&#x73b0;&#xff0c;&#x597d;&#x50cf;&#x4e0d;&#x80fd;&#x9000;&#x51fa;&#x4e86;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#xff0c;&#x9ed8;&#x8ba4;&#x9000;&#x51fa;&#x4f1a;&#x76f4;&#x63a5;&#x8df3;&#x8f6c;&#x5230;`/login`&#x81ea;&#x52a8;&#x751f;&#x6210;&#x7684;&#x8ba4;&#x8bc1;&#x9875;&#x9762;&#xff0c;&#x73b0;&#x5728;&#xff0c;&#x8ba4;&#x8bc1;&#x9875;&#x9762;&#x4e5f;&#x5c31;&#x662f;&#x767b;&#x5f55;&#x9875;&#x9762;&#xff0c;&#x5df2;&#x7ecf;&#x6539;&#x6210;&#x6211;&#x4eec;&#x81ea;&#x5df1;&#x7684;&#x767b;&#x5f55;&#x9875;&#x9762;&#x4e86;&#xff0c;&#x4f60;&#x53ea;&#x8981;&#x6307;&#x5b9a;&#x4e86;&#x767b;&#x5f55;&#x9875;&#x9762;&#x4e86;&#xff0c;&#x90a3;&#x9ed8;&#x8ba4;&#x7684;&#x767b;&#x5f55;&#x9875;&#x9762;&#x81ea;&#x7136;&#x5c31;&#x4e0d;&#x4f1a;&#x521b;&#x5efa;&#x4e86;&#xff0c;&#x56e0;&#x6b64;&#x5f53;&#x4f60;&#x9000;&#x51fa;&#x7684;&#x65f6;&#x5019;&#x4e5f;&#x5c31;&#x4f1a;&#x62a5;404&#x627e;&#x4e0d;&#x5230;&#x5f02;&#x5e38;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"402,403"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a2bf4262229b8bfa196b2557469d997a.png\" alt>","children":[],"payload":{"tag":"img","lines":"404,405"}},{"content":"<pre data-lines=\"406,407\"><code>&#x800c;&#x6211;&#x4eec;&#x60f3;&#x8981;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#xff0c;&#x5176;&#x5b9e;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x6211;&#x4eec;&#x7ed9;&#x9000;&#x51fa;&#x6307;&#x5b9a;&#x4e00;&#x4e2a;&#x9000;&#x51fa;&#x9875;&#x9762;&#xff0c;&#x53ea;&#x9700;&#x8981;&#x52a0;&#x5165;&#x4ee5;&#x4e0b;&#x8fd9;&#x6bb5;&#x914d;&#x7f6e;&#xff0c;&#x5f88;&#x7c7b;&#x4f3c;&#x6211;&#x4eec;&#x914d;&#x7f6e;&#x767b;&#x5f55;&#x9875;&#x7684;&#x65f6;&#x5019;&#x7684;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"406,407"}},{"content":"<pre data-lines=\"408,434\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;permitAll()&quot;</span>/&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:intercept-url</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;/**&quot;</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_USER&apos;,&apos;ROLE_ADMIN&apos;)&quot;</span>/&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:headers</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:frame-options</span> <span class=\"hljs-attr\">policy</span>=<span class=\"hljs-string\">&quot;SAMEORIGIN&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:headers</span>&gt;</span>\n    \n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:form-login</span> <span class=\"hljs-attr\">login-page</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span>\n                         <span class=\"hljs-attr\">login-processing-url</span>=<span class=\"hljs-string\">&quot;/login&quot;</span>\n                         <span class=\"hljs-attr\">default-target-url</span>=<span class=\"hljs-string\">&quot;/main&quot;</span>\n                         <span class=\"hljs-attr\">username-parameter</span>=<span class=\"hljs-string\">&quot;username&quot;</span>\n                         <span class=\"hljs-attr\">password-parameter</span>=<span class=\"hljs-string\">&quot;password&quot;</span>\n                         <span class=\"hljs-attr\">authentication-failure-url</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span>/&gt;</span>\n\n    \n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:logout</span> <span class=\"hljs-attr\">logout-url</span>=<span class=\"hljs-string\">&quot;/logout&quot;</span>\n                     <span class=\"hljs-attr\">logout-success-url</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"408,434"}},{"content":"<pre data-lines=\"435,436\"><code>&#x5373;&#x4f7f;&#x52a0;&#x4e0a;&#x4e86;&#x6307;&#x5b9a;&#x9000;&#x51fa;&#x9875;&#x7684;&#x914d;&#x7f6e;&#xff0c;&#x5f53;&#x4f60;&#x767b;&#x5f55;&#x540e;&#xff0c;&#x70b9;&#x51fb;&#x6ce8;&#x9500;&#xff0c;&#x8fd8;&#x662f;&#x62a5;404&#x627e;&#x4e0d;&#x5230;&#x8d44;&#x6e90;&#xff0c;&#x5982;&#x679c;&#x5927;&#x5bb6;&#x662f;&#x8ddf;&#x7740;&#x4e00;&#x6b65;&#x4e00;&#x6b65;&#x8d70;&#x6765;&#x7684;&#xff0c;&#x90a3;&#x5c31;&#x5e94;&#x8be5;&#x89c1;&#x8fc7;&#x4e0b;&#x8fb9;&#x8fd9;&#x4e2a;&#x9875;&#x9762;&#xff0c;&#x5f53;&#x4f60;&#x5728;&#x5730;&#x5740;&#x680f;&#x4e5f;&#x597d;&#xff0c;&#x8fd8;&#x662f;a&#x6807;&#x7b7e;&#x4e2d;&#x4e5f;&#x597d;&#xff0c;&#x53ea;&#x8981;&#x8bf7;&#x6c42;&#x8def;&#x5f84;&#x662f;&#xff1a;`http://localhost:8080/logout`&#xff0c;&#x4f60;&#x5c31;&#x4f1a;&#x770b;&#x89c1;&#x4e0b;&#x8fb9;&#x8fd9;&#x4e2a;&#x662f;&#x5426;&#x786e;&#x8ba4;&#x6ce8;&#x9500;&#x7684;&#x9875;&#x9762;&#xff0c;&#x4f60;&#x8f93;&#x5165;&#x7684;&#x521a;&#x624d;&#x90a3;&#x4e2a;&#x8bf7;&#x6c42;&#x5e76;&#x4e0d;&#x662f;&#x771f;&#x6b63;&#x9000;&#x51fa;&#xff0c;&#x4ed6;&#x8fd8;&#x4f1a;&#x95ee;&#x4f60;&#x662f;&#x4e0d;&#x662f;&#x8981;&#x9000;&#x51fa;&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x4f60;&#x70b9;&#x51fb;&#x4e86;&#x8fd9;&#x4e2a;`Log Out`&#xff0c;&#x624d;&#x662f;&#x771f;&#x6b63;&#x9000;&#x51fa;&#xff0c;&#x4f60;&#x770b;&#x4ed6;&#x7684;&#x6e90;&#x7801;&#xff0c;&#x4ed6;&#x662f;&#x5411;`/logout`&#x53d1;&#x9001;&#x4e86;&#x4e00;&#x4e2a;post&#x8bf7;&#x6c42;&#xff0c;&#x5e76;&#x4e14;&#x8fd8;&#x643a;&#x5e26;&#x4e86;csrf&#x8fd9;&#x4e2a;&#x9690;&#x85cf;&#x57df;&#xff0c;&#x90a3;&#x6211;&#x4eec;&#x662f;&#x4e0d;&#x662f;&#x5c31;&#x53ef;&#x4ee5;&#x4eff;&#x7167;&#x4ed6;&#x8fd9;&#x79cd;&#x5f62;&#x5f0f;&#xff0c;&#x4fee;&#x6539;&#x4e00;&#x4e0b;&#x6211;&#x4eec;&#x81ea;&#x5df1;&#x7684;&#x9000;&#x51fa;&#x529f;&#x80fd;&#x5462;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"435,436"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/83197672154dddbeaf60d9e9974b6941.png\" alt>","children":[],"payload":{"tag":"img","lines":"437,438"}},{"content":"<pre data-lines=\"439,440\"><code>&#x7b2c;&#x4e00;&#x6b65;&#xff1a;&#x627e;&#x5230;`main.jsp`&#x6dfb;&#x52a0;`Spring Security`&#x6807;&#x7b7e;&#x5e93;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"439,440"}},{"content":"<pre data-lines=\"441,446\"><code class=\"language-html\">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n&lt;%@ taglib prefix=&quot;security&quot; uri=&quot;http://www.springframework.org/security/tags&quot; %&gt;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"441,446"}},{"content":"<pre data-lines=\"447,448\"><code>&#x7b2c;&#x4e8c;&#x6b65;&#xff1a;&#x628a;&#x4e4b;&#x524d;&#x7684;a&#x6807;&#x7b7e;&#x7684;get&#x8bf7;&#x6c42;&#xff0c;&#x6362;&#x6210;form&#x7684;post&#x8bf7;&#x6c42;&#xff0c;&#x5e76;&#x52a0;&#x4e0a;&#x9690;&#x85cf;&#x57df;csrf\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"447,448"}},{"content":"<pre data-lines=\"449,460\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;px-3 navbar-nav&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav-item text-nowrap&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">action</span>=<span class=\"hljs-string\">&quot;&#x24;{pageContext.request.contextPath}/logout&quot;</span> <span class=\"hljs-attr\">method</span>=<span class=\"hljs-string\">&quot;post&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:csrfInput</span>/&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-danger btn-sm&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;submit&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;&#x9000;&#x51fa;&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"449,460"}}],"payload":{"tag":"h2","lines":"399,401"}},{"content":"3.1&#x3001;&#x6df1;&#x5165;&#x8de8;&#x7ad9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;","children":[{"content":"3.1&#x3001;CSRF&#x7684;&#x6982;&#x5ff5;","children":[{"content":"<pre data-lines=\"466,467\"><code>CSRF&#x8de8;&#x7ad9;&#x70b9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;(Cross&#x2014;Site Request Forgery)&#xff0c;&#x8ddf;XSS&#x653b;&#x51fb;&#x4e00;&#x6837;&#xff0c;&#x5b58;&#x5728;&#x5de8;&#x5927;&#x7684;&#x5371;&#x5bb3;&#x6027;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x8fd9;&#x6837;&#x6765;&#x7406;&#x89e3;&#xff1a;&#x653b;&#x51fb;&#x8005;&#x76d7;&#x7528;&#x4e86;&#x4f60;&#x7684;&#x8eab;&#x4efd;&#xff0c;&#x4ee5;&#x4f60;&#x7684;&#x540d;&#x4e49;&#x53d1;&#x9001;&#x6076;&#x610f;&#x8bf7;&#x6c42;&#xff0c;&#x5bf9;&#x670d;&#x52a1;&#x5668;&#x6765;&#x8bf4;&#x8fd9;&#x4e2a;&#x8bf7;&#x6c42;&#x662f;&#x5b8c;&#x5168;&#x5408;&#x6cd5;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x5374;&#x5b8c;&#x6210;&#x4e86;&#x653b;&#x51fb;&#x8005;&#x6240;&#x671f;&#x671b;&#x7684;&#x4e00;&#x4e2a;&#x64cd;&#x4f5c;&#xff0c;&#x6bd4;&#x5982;&#x4ee5;&#x4f60;&#x7684;&#x540d;&#x4e49;&#x53d1;&#x9001;&#x90ae;&#x4ef6;&#x3001;&#x53d1;&#x6d88;&#x606f;&#xff0c;&#x76d7;&#x53d6;&#x4f60;&#x7684;&#x8d26;&#x53f7;&#xff0c;&#x6dfb;&#x52a0;&#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;&#xff0c;&#x751a;&#x81f3;&#x4e8e;&#x8d2d;&#x4e70;&#x5546;&#x54c1;&#x3001;&#x865a;&#x62df;&#x8d27;&#x5e01;&#x8f6c;&#x8d26;&#x7b49;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"466,467"}}],"payload":{"tag":"h3","lines":"464,465"}},{"content":"3.2&#x3001;CSRF&#x7684;&#x539f;&#x7406;","children":[{"content":"<pre data-lines=\"470,477\"><code>&#x5047;&#x8bbe;&#xff1a;&#x5176;&#x4e2d;Web A&#x4e3a;&#x5b58;&#x5728;CSRF&#x6f0f;&#x6d1e;&#x7684;&#x7f51;&#x7ad9;&#xff0c;Web B&#x4e3a;&#x653b;&#x51fb;&#x8005;&#x6784;&#x5efa;&#x7684;&#x6076;&#x610f;&#x7f51;&#x7ad9;&#xff0c;&#x7528;&#x6237;C&#x4e3a;Web A&#x7f51;&#x7ad9;&#x7684;&#x5408;&#x6cd5;&#x7528;&#x6237;&#x3002;\n\n1.  &#x7528;&#x6237;C&#x6253;&#x5f00;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x8bbf;&#x95ee;&#x53d7;&#x4fe1;&#x4efb;&#x7f51;&#x7ad9;A&#xff0c;&#x8f93;&#x5165;&#x7528;&#x6237;&#x540d;&#x548c;&#x5bc6;&#x7801;&#x8bf7;&#x6c42;&#x767b;&#x5f55;&#x7f51;&#x7ad9;A&#xff1b;\n2.  &#x5728;&#x7528;&#x6237;&#x4fe1;&#x606f;&#x901a;&#x8fc7;&#x9a8c;&#x8bc1;&#x540e;&#xff0c;&#x7f51;&#x7ad9;A&#x4ea7;&#x751f;Cookie&#x4fe1;&#x606f;&#x5e76;&#x8fd4;&#x56de;&#x7ed9;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x6b64;&#x65f6;&#x7528;&#x6237;&#x767b;&#x5f55;&#x7f51;&#x7ad9;A&#x6210;&#x529f;&#xff0c;&#x53ef;&#x4ee5;&#x6b63;&#x5e38;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#x5230;&#x7f51;&#x7ad9;A&#xff1b;\n3.  &#x7528;&#x6237;&#x672a;&#x9000;&#x51fa;&#x7f51;&#x7ad9;A&#x4e4b;&#x524d;&#xff0c;&#x5728;&#x540c;&#x4e00;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#xff0c;&#x6253;&#x5f00;&#x4e00;&#x4e2a;TAB&#x9875;&#x8bbf;&#x95ee;&#x7f51;&#x7ad9;B&#xff1b;\n4.  &#x7f51;&#x7ad9;B&#x63a5;&#x6536;&#x5230;&#x7528;&#x6237;&#x8bf7;&#x6c42;&#x540e;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e9b;&#x653b;&#x51fb;&#x6027;&#x4ee3;&#x7801;&#xff0c;&#x5e76;&#x53d1;&#x51fa;&#x4e00;&#x4e2a;&#x8bf7;&#x6c42;&#x8981;&#x6c42;&#x8bbf;&#x95ee;&#x7b2c;&#x4e09;&#x65b9;&#x7ad9;&#x70b9;A&#xff1b;\n5.  &#x6d4f;&#x89c8;&#x5668;&#x5728;&#x63a5;&#x6536;&#x5230;&#x8fd9;&#x4e9b;&#x653b;&#x51fb;&#x6027;&#x4ee3;&#x7801;&#x540e;&#xff0c;&#x6839;&#x636e;&#x7f51;&#x7ad9;B&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x5728;&#x7528;&#x6237;&#x4e0d;&#x77e5;&#x60c5;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x643a;&#x5e26;Cookie&#x4fe1;&#x606f;&#xff0c;&#x5411;&#x7f51;&#x7ad9;A&#x53d1;&#x51fa;&#x8bf7;&#x6c42;&#x3002;&#x7f51;&#x7ad9;A&#x5e76;&#x4e0d;&#x77e5;&#x9053;&#x8be5;&#x8bf7;&#x6c42;&#x5176;&#x5b9e;&#x662f;&#x7531;B&#x53d1;&#x8d77;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x4f1a;&#x6839;&#x636e;&#x7528;&#x6237;C&#x7684;Cookie&#x4fe1;&#x606f;&#x4ee5;C&#x7684;&#x6743;&#x9650;&#x5904;&#x7406;&#x8be5;&#x8bf7;&#x6c42;&#xff0c;&#x5bfc;&#x81f4;&#x6765;&#x81ea;&#x7f51;&#x7ad9;B&#x7684;&#x6076;&#x610f;&#x4ee3;&#x7801;&#x88ab;&#x6267;&#x884c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"470,477"}}],"payload":{"tag":"h3","lines":"468,469"}},{"content":"3.3&#x3001;CSRF&#x7684;&#x9632;&#x5fa1;","children":[{"content":"<pre data-lines=\"480,507\"><code>&#x76ee;&#x524d;&#x9632;&#x5fa1; CSRF &#x653b;&#x51fb;&#x4e3b;&#x8981;&#x6709;&#x4e09;&#x79cd;&#x7b56;&#x7565;&#xff1a;&#x9a8c;&#x8bc1; HTTP Referer &#x5b57;&#x6bb5;&#xff1b;&#x5728;&#x8bf7;&#x6c42;&#x5730;&#x5740;&#x4e2d;&#x6dfb;&#x52a0; token &#x5e76;&#x9a8c;&#x8bc1;&#xff08;**Spring Security&#x91c7;&#x7528;**&#xff09;&#xff1b;&#x5728; HTTP &#x5934;&#x4e2d;&#x81ea;&#x5b9a;&#x4e49;&#x5c5e;&#x6027;&#x5e76;&#x9a8c;&#x8bc1;&#x3002;\n\n&#xff08;1&#xff09;**&#x9a8c;&#x8bc1; HTTP Referer &#x5b57;&#x6bb5;**\n\n&#x6839;&#x636e; HTTP &#x534f;&#x8bae;&#xff0c;&#x5728; HTTP &#x5934;&#x4e2d;&#x6709;&#x4e00;&#x4e2a;&#x5b57;&#x6bb5;&#x53eb; Referer&#xff0c;&#x5b83;&#x8bb0;&#x5f55;&#x4e86;&#x8be5; HTTP &#x8bf7;&#x6c42;&#x7684;&#x6765;&#x6e90;&#x5730;&#x5740;&#x3002;&#x5728;&#x901a;&#x5e38;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x8bbf;&#x95ee;&#x4e00;&#x4e2a;&#x5b89;&#x5168;&#x53d7;&#x9650;&#x9875;&#x9762;&#x7684;&#x8bf7;&#x6c42;&#x6765;&#x81ea;&#x4e8e;&#x540c;&#x4e00;&#x4e2a;&#x7f51;&#x7ad9;&#xff0c;&#x6bd4;&#x5982;&#x9700;&#x8981;&#x8bbf;&#x95ee; http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory&#xff0c;&#x7528;&#x6237;&#x5fc5;&#x987b;&#x5148;&#x767b;&#x9646; bank.example&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7;&#x70b9;&#x51fb;&#x9875;&#x9762;&#x4e0a;&#x7684;&#x6309;&#x94ae;&#x6765;&#x89e6;&#x53d1;&#x8f6c;&#x8d26;&#x4e8b;&#x4ef6;&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x8be5;&#x8f6c;&#x5e10;&#x8bf7;&#x6c42;&#x7684; Referer &#x503c;&#x5c31;&#x4f1a;&#x662f;&#x8f6c;&#x8d26;&#x6309;&#x94ae;&#x6240;&#x5728;&#x7684;&#x9875;&#x9762;&#x7684; URL&#xff0c;&#x901a;&#x5e38;&#x662f;&#x4ee5; bank.example &#x57df;&#x540d;&#x5f00;&#x5934;&#x7684;&#x5730;&#x5740;&#x3002;&#x800c;&#x5982;&#x679c;&#x9ed1;&#x5ba2;&#x8981;&#x5bf9;&#x94f6;&#x884c;&#x7f51;&#x7ad9;&#x5b9e;&#x65bd; CSRF &#x653b;&#x51fb;&#xff0c;&#x4ed6;&#x53ea;&#x80fd;&#x5728;&#x4ed6;&#x81ea;&#x5df1;&#x7684;&#x7f51;&#x7ad9;&#x6784;&#x9020;&#x8bf7;&#x6c42;&#xff0c;&#x5f53;&#x7528;&#x6237;&#x901a;&#x8fc7;&#x9ed1;&#x5ba2;&#x7684;&#x7f51;&#x7ad9;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#x5230;&#x94f6;&#x884c;&#x65f6;&#xff0c;&#x8be5;&#x8bf7;&#x6c42;&#x7684; Referer &#x662f;&#x6307;&#x5411;&#x9ed1;&#x5ba2;&#x81ea;&#x5df1;&#x7684;&#x7f51;&#x7ad9;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x8981;&#x9632;&#x5fa1; CSRF &#x653b;&#x51fb;&#xff0c;&#x94f6;&#x884c;&#x7f51;&#x7ad9;&#x53ea;&#x9700;&#x8981;&#x5bf9;&#x4e8e;&#x6bcf;&#x4e00;&#x4e2a;&#x8f6c;&#x8d26;&#x8bf7;&#x6c42;&#x9a8c;&#x8bc1;&#x5176; Referer &#x503c;&#xff0c;&#x5982;&#x679c;&#x662f;&#x4ee5; bank.example &#x5f00;&#x5934;&#x7684;&#x57df;&#x540d;&#xff0c;&#x5219;&#x8bf4;&#x660e;&#x8be5;&#x8bf7;&#x6c42;&#x662f;&#x6765;&#x81ea;&#x94f6;&#x884c;&#x7f51;&#x7ad9;&#x81ea;&#x5df1;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x662f;&#x5408;&#x6cd5;&#x7684;&#x3002;&#x5982;&#x679c; Referer &#x662f;&#x5176;&#x4ed6;&#x7f51;&#x7ad9;&#x7684;&#x8bdd;&#xff0c;&#x5219;&#x6709;&#x53ef;&#x80fd;&#x662f;&#x9ed1;&#x5ba2;&#x7684; CSRF &#x653b;&#x51fb;&#xff0c;&#x62d2;&#x7edd;&#x8be5;&#x8bf7;&#x6c42;&#x3002;\n\n&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x7684;&#x663e;&#x800c;&#x6613;&#x89c1;&#x7684;&#x597d;&#x5904;&#x5c31;&#x662f;&#x7b80;&#x5355;&#x6613;&#x884c;&#xff0c;&#x7f51;&#x7ad9;&#x7684;&#x666e;&#x901a;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x4e0d;&#x9700;&#x8981;&#x64cd;&#x5fc3; CSRF &#x7684;&#x6f0f;&#x6d1e;&#xff0c;&#x53ea;&#x9700;&#x8981;&#x5728;&#x6700;&#x540e;&#x7ed9;&#x6240;&#x6709;&#x5b89;&#x5168;&#x654f;&#x611f;&#x7684;&#x8bf7;&#x6c42;&#x7edf;&#x4e00;&#x589e;&#x52a0;&#x4e00;&#x4e2a;&#x62e6;&#x622a;&#x5668;&#x6765;&#x68c0;&#x67e5; Referer &#x7684;&#x503c;&#x5c31;&#x53ef;&#x4ee5;&#x3002;&#x7279;&#x522b;&#x662f;&#x5bf9;&#x4e8e;&#x5f53;&#x524d;&#x73b0;&#x6709;&#x7684;&#x7cfb;&#x7edf;&#xff0c;&#x4e0d;&#x9700;&#x8981;&#x6539;&#x53d8;&#x5f53;&#x524d;&#x7cfb;&#x7edf;&#x7684;&#x4efb;&#x4f55;&#x5df2;&#x6709;&#x4ee3;&#x7801;&#x548c;&#x903b;&#x8f91;&#xff0c;&#x6ca1;&#x6709;&#x98ce;&#x9669;&#xff0c;&#x975e;&#x5e38;&#x4fbf;&#x6377;&#x3002;\n\n&#x7136;&#x800c;&#xff0c;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x5e76;&#x975e;&#x4e07;&#x65e0;&#x4e00;&#x5931;&#x3002;Referer &#x7684;&#x503c;&#x662f;&#x7531;&#x6d4f;&#x89c8;&#x5668;&#x63d0;&#x4f9b;&#x7684;&#xff0c;&#x867d;&#x7136; HTTP &#x534f;&#x8bae;&#x4e0a;&#x6709;&#x660e;&#x786e;&#x7684;&#x8981;&#x6c42;&#xff0c;&#x4f46;&#x662f;&#x6bcf;&#x4e2a;&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x4e8e; Referer &#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;&#x53ef;&#x80fd;&#x6709;&#x5dee;&#x522b;&#xff0c;&#x5e76;&#x4e0d;&#x80fd;&#x4fdd;&#x8bc1;&#x6d4f;&#x89c8;&#x5668;&#x81ea;&#x8eab;&#x6ca1;&#x6709;&#x5b89;&#x5168;&#x6f0f;&#x6d1e;&#x3002;&#x4f7f;&#x7528;&#x9a8c;&#x8bc1; Referer &#x503c;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x5c31;&#x662f;&#x628a;&#x5b89;&#x5168;&#x6027;&#x90fd;&#x4f9d;&#x8d56;&#x4e8e;&#x7b2c;&#x4e09;&#x65b9;&#xff08;&#x5373;&#x6d4f;&#x89c8;&#x5668;&#xff09;&#x6765;&#x4fdd;&#x969c;&#xff0c;&#x4ece;&#x7406;&#x8bba;&#x4e0a;&#x6765;&#x8bb2;&#xff0c;&#x8fd9;&#x6837;&#x5e76;&#x4e0d;&#x5b89;&#x5168;&#x3002;&#x4e8b;&#x5b9e;&#x4e0a;&#xff0c;&#x5bf9;&#x4e8e;&#x67d0;&#x4e9b;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x6bd4;&#x5982; IE6 &#x6216; FF2&#xff0c;&#x76ee;&#x524d;&#x5df2;&#x7ecf;&#x6709;&#x4e00;&#x4e9b;&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x7be1;&#x6539; Referer &#x503c;&#x3002;&#x5982;&#x679c; bank.example &#x7f51;&#x7ad9;&#x652f;&#x6301; IE6 &#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x9ed1;&#x5ba2;&#x5b8c;&#x5168;&#x53ef;&#x4ee5;&#x628a;&#x7528;&#x6237;&#x6d4f;&#x89c8;&#x5668;&#x7684; Referer &#x503c;&#x8bbe;&#x4e3a;&#x4ee5; bank.example &#x57df;&#x540d;&#x5f00;&#x5934;&#x7684;&#x5730;&#x5740;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x9a8c;&#x8bc1;&#xff0c;&#x4ece;&#x800c;&#x8fdb;&#x884c; CSRF &#x653b;&#x51fb;&#x3002;\n\n&#x5373;&#x4fbf;&#x662f;&#x4f7f;&#x7528;&#x6700;&#x65b0;&#x7684;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x9ed1;&#x5ba2;&#x65e0;&#x6cd5;&#x7be1;&#x6539; Referer &#x503c;&#xff0c;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x4ecd;&#x7136;&#x6709;&#x95ee;&#x9898;&#x3002;&#x56e0;&#x4e3a; Referer &#x503c;&#x4f1a;&#x8bb0;&#x5f55;&#x4e0b;&#x7528;&#x6237;&#x7684;&#x8bbf;&#x95ee;&#x6765;&#x6e90;&#xff0c;&#x6709;&#x4e9b;&#x7528;&#x6237;&#x8ba4;&#x4e3a;&#x8fd9;&#x6837;&#x4f1a;&#x4fb5;&#x72af;&#x5230;&#x4ed6;&#x4eec;&#x81ea;&#x5df1;&#x7684;&#x9690;&#x79c1;&#x6743;&#xff0c;&#x7279;&#x522b;&#x662f;&#x6709;&#x4e9b;&#x7ec4;&#x7ec7;&#x62c5;&#x5fc3; Referer &#x503c;&#x4f1a;&#x628a;&#x7ec4;&#x7ec7;&#x5185;&#x7f51;&#x4e2d;&#x7684;&#x67d0;&#x4e9b;&#x4fe1;&#x606f;&#x6cc4;&#x9732;&#x5230;&#x5916;&#x7f51;&#x4e2d;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x7528;&#x6237;&#x81ea;&#x5df1;&#x53ef;&#x4ee5;&#x8bbe;&#x7f6e;&#x6d4f;&#x89c8;&#x5668;&#x4f7f;&#x5176;&#x5728;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#x65f6;&#x4e0d;&#x518d;&#x63d0;&#x4f9b; Referer&#x3002;&#x5f53;&#x4ed6;&#x4eec;&#x6b63;&#x5e38;&#x8bbf;&#x95ee;&#x94f6;&#x884c;&#x7f51;&#x7ad9;&#x65f6;&#xff0c;&#x7f51;&#x7ad9;&#x4f1a;&#x56e0;&#x4e3a;&#x8bf7;&#x6c42;&#x6ca1;&#x6709; Referer &#x503c;&#x800c;&#x8ba4;&#x4e3a;&#x662f; CSRF &#x653b;&#x51fb;&#xff0c;&#x62d2;&#x7edd;&#x5408;&#x6cd5;&#x7528;&#x6237;&#x7684;&#x8bbf;&#x95ee;&#x3002;\n\n&#xff08;2&#xff09;**&#x5728;&#x8bf7;&#x6c42;&#x5730;&#x5740;&#x4e2d;&#x6dfb;&#x52a0; token &#x5e76;&#x9a8c;&#x8bc1;**\n\nCSRF &#x653b;&#x51fb;&#x4e4b;&#x6240;&#x4ee5;&#x80fd;&#x591f;&#x6210;&#x529f;&#xff0c;&#x662f;&#x56e0;&#x4e3a;&#x9ed1;&#x5ba2;&#x53ef;&#x4ee5;&#x5b8c;&#x5168;&#x4f2a;&#x9020;&#x7528;&#x6237;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x8be5;&#x8bf7;&#x6c42;&#x4e2d;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x9a8c;&#x8bc1;&#x4fe1;&#x606f;&#x90fd;&#x662f;&#x5b58;&#x5728;&#x4e8e; cookie &#x4e2d;&#xff0c;&#x56e0;&#x6b64;&#x9ed1;&#x5ba2;&#x53ef;&#x4ee5;&#x5728;&#x4e0d;&#x77e5;&#x9053;&#x8fd9;&#x4e9b;&#x9a8c;&#x8bc1;&#x4fe1;&#x606f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x76f4;&#x63a5;&#x5229;&#x7528;&#x7528;&#x6237;&#x81ea;&#x5df1;&#x7684; cookie &#x6765;&#x901a;&#x8fc7;&#x5b89;&#x5168;&#x9a8c;&#x8bc1;&#x3002;&#x8981;&#x62b5;&#x5fa1; CSRF&#xff0c;&#x5173;&#x952e;&#x5728;&#x4e8e;&#x5728;&#x8bf7;&#x6c42;&#x4e2d;&#x653e;&#x5165;&#x9ed1;&#x5ba2;&#x6240;&#x4e0d;&#x80fd;&#x4f2a;&#x9020;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x5e76;&#x4e14;&#x8be5;&#x4fe1;&#x606f;&#x4e0d;&#x5b58;&#x5728;&#x4e8e; cookie &#x4e4b;&#x4e2d;&#x3002;&#x53ef;&#x4ee5;&#x5728; HTTP &#x8bf7;&#x6c42;&#x4e2d;&#x4ee5;&#x53c2;&#x6570;&#x7684;&#x5f62;&#x5f0f;&#x52a0;&#x5165;&#x4e00;&#x4e2a;&#x968f;&#x673a;&#x4ea7;&#x751f;&#x7684; token&#xff0c;&#x5e76;&#x5728;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x5efa;&#x7acb;&#x4e00;&#x4e2a;&#x62e6;&#x622a;&#x5668;&#x6765;&#x9a8c;&#x8bc1;&#x8fd9;&#x4e2a; token&#xff0c;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x4e2d;&#x6ca1;&#x6709; token &#x6216;&#x8005; token &#x5185;&#x5bb9;&#x4e0d;&#x6b63;&#x786e;&#xff0c;&#x5219;&#x8ba4;&#x4e3a;&#x53ef;&#x80fd;&#x662f; CSRF &#x653b;&#x51fb;&#x800c;&#x62d2;&#x7edd;&#x8be5;&#x8bf7;&#x6c42;&#x3002;\n\n&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x8981;&#x6bd4;&#x68c0;&#x67e5; Referer &#x8981;&#x5b89;&#x5168;&#x4e00;&#x4e9b;&#xff0c;token &#x53ef;&#x4ee5;&#x5728;&#x7528;&#x6237;&#x767b;&#x9646;&#x540e;&#x4ea7;&#x751f;&#x5e76;&#x653e;&#x4e8e; session &#x4e4b;&#x4e2d;&#xff0c;&#x7136;&#x540e;&#x5728;&#x6bcf;&#x6b21;&#x8bf7;&#x6c42;&#x65f6;&#x628a; token &#x4ece; session &#x4e2d;&#x62ff;&#x51fa;&#xff0c;&#x4e0e;&#x8bf7;&#x6c42;&#x4e2d;&#x7684; token &#x8fdb;&#x884c;&#x6bd4;&#x5bf9;&#xff0c;&#x4f46;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x7684;&#x96be;&#x70b9;&#x5728;&#x4e8e;&#x5982;&#x4f55;&#x628a; token &#x4ee5;&#x53c2;&#x6570;&#x7684;&#x5f62;&#x5f0f;&#x52a0;&#x5165;&#x8bf7;&#x6c42;&#x3002;&#x5bf9;&#x4e8e; GET &#x8bf7;&#x6c42;&#xff0c;token &#x5c06;&#x9644;&#x5728;&#x8bf7;&#x6c42;&#x5730;&#x5740;&#x4e4b;&#x540e;&#xff0c;&#x8fd9;&#x6837; URL &#x5c31;&#x53d8;&#x6210; `http://url?csrftoken=tokenvalue`&#x3002; &#x800c;&#x5bf9;&#x4e8e; POST &#x8bf7;&#x6c42;&#x6765;&#x8bf4;&#xff0c;&#x8981;&#x5728; form &#x7684;&#x6700;&#x540e;&#x52a0;&#x4e0a; `&lt;input type=&quot;hidden&quot; name=&quot;csrftoken&quot; value=&quot;tokenvalue&quot;/&gt;`&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x628a; token &#x4ee5;&#x53c2;&#x6570;&#x7684;&#x5f62;&#x5f0f;&#x52a0;&#x5165;&#x8bf7;&#x6c42;&#x4e86;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x5728;&#x4e00;&#x4e2a;&#x7f51;&#x7ad9;&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x8bf7;&#x6c42;&#x7684;&#x5730;&#x65b9;&#x975e;&#x5e38;&#x591a;&#xff0c;&#x8981;&#x5bf9;&#x4e8e;&#x6bcf;&#x4e00;&#x4e2a;&#x8bf7;&#x6c42;&#x90fd;&#x52a0;&#x4e0a; token &#x662f;&#x5f88;&#x9ebb;&#x70e6;&#x7684;&#xff0c;&#x5e76;&#x4e14;&#x5f88;&#x5bb9;&#x6613;&#x6f0f;&#x6389;&#xff0c;&#x901a;&#x5e38;&#x4f7f;&#x7528;&#x7684;&#x65b9;&#x6cd5;&#x5c31;&#x662f;&#x5728;&#x6bcf;&#x6b21;&#x9875;&#x9762;&#x52a0;&#x8f7d;&#x65f6;&#xff0c;&#x4f7f;&#x7528; javascript &#x904d;&#x5386;&#x6574;&#x4e2a; dom &#x6811;&#xff0c;&#x5bf9;&#x4e8e; dom &#x4e2d;&#x6240;&#x6709;&#x7684; a &#x548c; form &#x6807;&#x7b7e;&#x540e;&#x52a0;&#x5165; token&#x3002;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;&#x5927;&#x90e8;&#x5206;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x4f46;&#x662f;&#x5bf9;&#x4e8e;&#x5728;&#x9875;&#x9762;&#x52a0;&#x8f7d;&#x4e4b;&#x540e;&#x52a8;&#x6001;&#x751f;&#x6210;&#x7684; html &#x4ee3;&#x7801;&#xff0c;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x5c31;&#x6ca1;&#x6709;&#x4f5c;&#x7528;&#xff0c;&#x8fd8;&#x9700;&#x8981;&#x7a0b;&#x5e8f;&#x5458;&#x5728;&#x7f16;&#x7801;&#x65f6;&#x624b;&#x52a8;&#x6dfb;&#x52a0; token&#x3002;\n\n&#x8be5;&#x65b9;&#x6cd5;&#x8fd8;&#x6709;&#x4e00;&#x4e2a;&#x7f3a;&#x70b9;&#x662f;&#x96be;&#x4ee5;&#x4fdd;&#x8bc1; token &#x672c;&#x8eab;&#x7684;&#x5b89;&#x5168;&#x3002;&#x7279;&#x522b;&#x662f;&#x5728;&#x4e00;&#x4e9b;&#x8bba;&#x575b;&#x4e4b;&#x7c7b;&#x652f;&#x6301;&#x7528;&#x6237;&#x81ea;&#x5df1;&#x53d1;&#x8868;&#x5185;&#x5bb9;&#x7684;&#x7f51;&#x7ad9;&#xff0c;&#x9ed1;&#x5ba2;&#x53ef;&#x4ee5;&#x5728;&#x4e0a;&#x9762;&#x53d1;&#x5e03;&#x81ea;&#x5df1;&#x4e2a;&#x4eba;&#x7f51;&#x7ad9;&#x7684;&#x5730;&#x5740;&#x3002;&#x7531;&#x4e8e;&#x7cfb;&#x7edf;&#x4e5f;&#x4f1a;&#x5728;&#x8fd9;&#x4e2a;&#x5730;&#x5740;&#x540e;&#x9762;&#x52a0;&#x4e0a; token&#xff0c;&#x9ed1;&#x5ba2;&#x53ef;&#x4ee5;&#x5728;&#x81ea;&#x5df1;&#x7684;&#x7f51;&#x7ad9;&#x4e0a;&#x5f97;&#x5230;&#x8fd9;&#x4e2a; token&#xff0c;&#x5e76;&#x9a6c;&#x4e0a;&#x5c31;&#x53ef;&#x4ee5;&#x53d1;&#x52a8; CSRF &#x653b;&#x51fb;&#x3002;&#x4e3a;&#x4e86;&#x907f;&#x514d;&#x8fd9;&#x4e00;&#x70b9;&#xff0c;&#x7cfb;&#x7edf;&#x53ef;&#x4ee5;&#x5728;&#x6dfb;&#x52a0; token &#x7684;&#x65f6;&#x5019;&#x589e;&#x52a0;&#x4e00;&#x4e2a;&#x5224;&#x65ad;&#xff0c;&#x5982;&#x679c;&#x8fd9;&#x4e2a;&#x94fe;&#x63a5;&#x662f;&#x94fe;&#x5230;&#x81ea;&#x5df1;&#x672c;&#x7ad9;&#x7684;&#xff0c;&#x5c31;&#x5728;&#x540e;&#x9762;&#x6dfb;&#x52a0; token&#xff0c;&#x5982;&#x679c;&#x662f;&#x901a;&#x5411;&#x5916;&#x7f51;&#x5219;&#x4e0d;&#x52a0;&#x3002;&#x4e0d;&#x8fc7;&#xff0c;&#x5373;&#x4f7f;&#x8fd9;&#x4e2a; csrftoken &#x4e0d;&#x4ee5;&#x53c2;&#x6570;&#x7684;&#x5f62;&#x5f0f;&#x9644;&#x52a0;&#x5728;&#x8bf7;&#x6c42;&#x4e4b;&#x4e2d;&#xff0c;&#x9ed1;&#x5ba2;&#x7684;&#x7f51;&#x7ad9;&#x4e5f;&#x540c;&#x6837;&#x53ef;&#x4ee5;&#x901a;&#x8fc7; Referer &#x6765;&#x5f97;&#x5230;&#x8fd9;&#x4e2a; token &#x503c;&#x4ee5;&#x53d1;&#x52a8; CSRF &#x653b;&#x51fb;&#x3002;&#x8fd9;&#x4e5f;&#x662f;&#x4e00;&#x4e9b;&#x7528;&#x6237;&#x559c;&#x6b22;&#x624b;&#x52a8;&#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668; Referer &#x529f;&#x80fd;&#x7684;&#x539f;&#x56e0;&#x3002;\n\n&#x5728;Spring Security&#x4e2d;&#xff0c;&#x201c;GET&#x201d;, &#x201c;HEAD&#x201d;, &#x201c;TRACE&#x201d;, &quot;OPTIONS&quot;&#x56db;&#x7c7b;&#x8bf7;&#x6c42;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x901a;&#x8fc7;&#xff0c;&#x5e76;&#x4e0d;&#x4f1a;&#x88ab;CsrfFilter&#x8fc7;&#x6ee4;&#x5668;&#x8fc7;&#x6ee4;&#xff0c;&#x4f1a;&#x88ab;&#x76f4;&#x63a5;&#x653e;&#x884c;&#xff0c;&#x4f46;&#x662f;&#x5bf9;&#x4e8e;&#x5176;&#x4ed6;&#x8fc7;&#x6ee4;&#x5668;&#x8be5;&#x8fc7;&#x6ee4;&#x7684;&#x8fd8;&#x662f;&#x4f1a;&#x8fc7;&#x6ee4;&#x7684;&#xff0c;&#x9664;&#x53bb;&#x4e0a;&#x9762;&#x56db;&#x7c7b;&#xff0c;&#x5305;&#x62ec;POST&#x90fd;&#x8981;&#x88ab;&#x9a8c;&#x8bc1;&#x643a;&#x5e26;token&#x624d;&#x80fd;&#x901a;&#x8fc7;&#x3002;\n\n&#xff08;3&#xff09;**&#x5728; HTTP &#x5934;&#x4e2d;&#x81ea;&#x5b9a;&#x4e49;&#x5c5e;&#x6027;&#x5e76;&#x9a8c;&#x8bc1;**\n\n&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x4e5f;&#x662f;&#x4f7f;&#x7528; token &#x5e76;&#x8fdb;&#x884c;&#x9a8c;&#x8bc1;&#xff0c;&#x548c;&#x4e0a;&#x4e00;&#x79cd;&#x65b9;&#x6cd5;&#x4e0d;&#x540c;&#x7684;&#x662f;&#xff0c;&#x8fd9;&#x91cc;&#x5e76;&#x4e0d;&#x662f;&#x628a; token &#x4ee5;&#x53c2;&#x6570;&#x7684;&#x5f62;&#x5f0f;&#x7f6e;&#x4e8e; HTTP &#x8bf7;&#x6c42;&#x4e4b;&#x4e2d;&#xff0c;&#x800c;&#x662f;&#x628a;&#x5b83;&#x653e;&#x5230; HTTP &#x5934;&#x4e2d;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x5c5e;&#x6027;&#x91cc;&#x3002;&#x901a;&#x8fc7; XMLHttpRequest &#x8fd9;&#x4e2a;&#x7c7b;&#xff0c;&#x53ef;&#x4ee5;&#x4e00;&#x6b21;&#x6027;&#x7ed9;&#x6240;&#x6709;&#x8be5;&#x7c7b;&#x8bf7;&#x6c42;&#x52a0;&#x4e0a; csrftoken &#x8fd9;&#x4e2a; HTTP &#x5934;&#x5c5e;&#x6027;&#xff0c;&#x5e76;&#x628a; token &#x503c;&#x653e;&#x5165;&#x5176;&#x4e2d;&#x3002;&#x8fd9;&#x6837;&#x89e3;&#x51b3;&#x4e86;&#x4e0a;&#x79cd;&#x65b9;&#x6cd5;&#x5728;&#x8bf7;&#x6c42;&#x4e2d;&#x52a0;&#x5165; token &#x7684;&#x4e0d;&#x4fbf;&#xff0c;&#x540c;&#x65f6;&#xff0c;&#x901a;&#x8fc7; XMLHttpRequest &#x8bf7;&#x6c42;&#x7684;&#x5730;&#x5740;&#x4e0d;&#x4f1a;&#x88ab;&#x8bb0;&#x5f55;&#x5230;&#x6d4f;&#x89c8;&#x5668;&#x7684;&#x5730;&#x5740;&#x680f;&#xff0c;&#x4e5f;&#x4e0d;&#x7528;&#x62c5;&#x5fc3; token &#x4f1a;&#x900f;&#x8fc7; Referer &#x6cc4;&#x9732;&#x5230;&#x5176;&#x4ed6;&#x7f51;&#x7ad9;&#x4e2d;&#x53bb;&#x3002;\n\n&#x7136;&#x800c;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x7684;&#x5c40;&#x9650;&#x6027;&#x975e;&#x5e38;&#x5927;&#x3002;XMLHttpRequest &#x8bf7;&#x6c42;&#x901a;&#x5e38;&#x7528;&#x4e8e; Ajax &#x65b9;&#x6cd5;&#x4e2d;&#x5bf9;&#x4e8e;&#x9875;&#x9762;&#x5c40;&#x90e8;&#x7684;&#x5f02;&#x6b65;&#x5237;&#x65b0;&#xff0c;&#x5e76;&#x975e;&#x6240;&#x6709;&#x7684;&#x8bf7;&#x6c42;&#x90fd;&#x9002;&#x5408;&#x7528;&#x8fd9;&#x4e2a;&#x7c7b;&#x6765;&#x53d1;&#x8d77;&#xff0c;&#x800c;&#x4e14;&#x901a;&#x8fc7;&#x8be5;&#x7c7b;&#x8bf7;&#x6c42;&#x5f97;&#x5230;&#x7684;&#x9875;&#x9762;&#x4e0d;&#x80fd;&#x88ab;&#x6d4f;&#x89c8;&#x5668;&#x6240;&#x8bb0;&#x5f55;&#x4e0b;&#xff0c;&#x4ece;&#x800c;&#x8fdb;&#x884c;&#x524d;&#x8fdb;&#xff0c;&#x540e;&#x9000;&#xff0c;&#x5237;&#x65b0;&#xff0c;&#x6536;&#x85cf;&#x7b49;&#x64cd;&#x4f5c;&#xff0c;&#x7ed9;&#x7528;&#x6237;&#x5e26;&#x6765;&#x4e0d;&#x4fbf;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x5bf9;&#x4e8e;&#x6ca1;&#x6709;&#x8fdb;&#x884c; CSRF &#x9632;&#x62a4;&#x7684;&#x9057;&#x7559;&#x7cfb;&#x7edf;&#x6765;&#x8bf4;&#xff0c;&#x8981;&#x91c7;&#x7528;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x6765;&#x8fdb;&#x884c;&#x9632;&#x62a4;&#xff0c;&#x8981;&#x628a;&#x6240;&#x6709;&#x8bf7;&#x6c42;&#x90fd;&#x6539;&#x4e3a; XMLHttpRequest &#x8bf7;&#x6c42;&#xff0c;&#x8fd9;&#x6837;&#x51e0;&#x4e4e;&#x662f;&#x8981;&#x91cd;&#x5199;&#x6574;&#x4e2a;&#x7f51;&#x7ad9;&#xff0c;&#x8fd9;&#x4ee3;&#x4ef7;&#x65e0;&#x7591;&#x662f;&#x4e0d;&#x80fd;&#x63a5;&#x53d7;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"480,507"}}],"payload":{"tag":"h3","lines":"478,479"}},{"content":"3.4&#x3001;form&#x8868;&#x5355;&#x5982;&#x4f55;&#x6dfb;&#x52a0;token","children":[{"content":"<pre data-lines=\"510,511\"><code>&#x5982;&#x679c;&#x60a8;&#x4f7f;&#x7528;&#x7684;&#x662f;JSP&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;Spring&#x7684;&#x8868;&#x5355;&#x6807;&#x7b7e;&#x5e93;&#xff0c;&#x53ea;&#x9700;&#x8981;&#x5f15;&#x5165;&#x6807;&#x7b7e;&#x5e93;&#xff0c;&#x5e76;&#x5728;&#x5bf9;&#x5e94;&#x7684;&#x8868;&#x5355;&#x6dfb;&#x52a0;&#x4e0a;&#x5bf9;&#x5e94;&#x7684;&#x6807;&#x7b7e;&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"510,511"}},{"content":"<pre data-lines=\"512,516\"><code class=\"language-html\">&lt;%@ taglib prefix=&quot;security&quot; uri=&quot;http://www.springframework.org/security/tags&quot; %&gt;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"512,516"}},{"content":"<pre data-lines=\"517,521\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:csrfInput</span>/&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"517,521"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/cd52004bab0807d6bd2b962f745afa9d.png\" alt>","children":[],"payload":{"tag":"img","lines":"522,523"}},{"content":"<pre data-lines=\"524,525\"><code>&#x56e0;&#x6b64;&#xff0c;&#x5f53;&#x5f00;&#x542f;&#x4e86; csrf &#x7684;&#x65f6;&#x5019;&#xff0c;&#x6574;&#x4e2a;&#x7cfb;&#x7edf;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x8868;&#x5355;&#x90fd;&#x9700;&#x8981;&#x52a0;&#x4e0a; `&lt;security:csrfInput/&gt;` &#xff0c;&#x5426;&#x5219;&#x5728;&#x8fdb;&#x884c;&#x8868;&#x5355;&#x63d0;&#x4ea4;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x62a5;&#x4e00;&#x4e2a; 403 &#x6743;&#x9650;&#x5f02;&#x5e38;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"524,525"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/c2fd3393cad3a3001dcf459918d94834.png\" alt>","children":[],"payload":{"tag":"img","lines":"526,527"}},{"content":"<pre data-lines=\"528,529\"><code>&#x73b0;&#x5728;&#x4f60;&#x7684;&#x4efb;&#x52a1;&#x5c31;&#x662f;&#xff0c;&#x7ed9;&#x7cfb;&#x7edf;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x8868;&#x5355;&#x90fd;&#x52a0;&#x4e0a; `&lt;security:csrfInput/&gt;` &#xff0c;&#x5f53;&#x4f60;&#x5b8c;&#x6210;&#x4ee5;&#x540e;&#xff0c;&#x624d;&#x53ef;&#x4ee5;&#x8fdb;&#x884c;&#x4e0b;&#x4e00;&#x5c0f;&#x8282;&#xff0c;&#x5426;&#x5219;&#x540e;&#x8fb9;&#x64cd;&#x4f5c;&#x53ef;&#x80fd;&#x4f1a;&#x51fa;&#x73b0;&#x610f;&#x60f3;&#x4e0d;&#x5230;&#x7684;&#x95ee;&#x9898;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"528,529"}}],"payload":{"tag":"h3","lines":"508,509"}},{"content":"3.5&#x3001;ajax&#x8bf7;&#x6c42;&#x5982;&#x4f55;&#x6dfb;&#x52a0;token","children":[{"content":"<pre data-lines=\"532,533\"><code>&#x5982;&#x679c;&#x60a8;&#x4f7f;&#x7528;&#x7684;&#x662f;JSP&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;Spring&#x7684;&#x8868;&#x5355;&#x6807;&#x7b7e;&#x5e93;&#xff0c;&#x53ea;&#x9700;&#x8981;&#x5f15;&#x5165;&#x6807;&#x7b7e;&#x5e93;&#xff0c;&#x5e76;&#x5728;head&#x6807;&#x7b7e;&#x5185;&#x6dfb;&#x52a0;&#x4e0a;`&lt;security:csrfMetaTags/&gt;`&#x6807;&#x7b7e;&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"532,533"}},{"content":"<pre data-lines=\"534,538\"><code class=\"language-html\">&lt;%@ taglib prefix=&quot;security&quot; uri=&quot;http://www.springframework.org/security/tags&quot; %&gt;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"534,538"}},{"content":"<pre data-lines=\"539,543\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:csrfMetaTags</span>/&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"539,543"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ccf7d3aae5afe2e8dfe15da642c4695f.png\" alt>","children":[],"payload":{"tag":"img","lines":"544,545"}},{"content":"<pre data-lines=\"546,556\"><code class=\"language-javascript\">&#x24;(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> token = &#x24;(<span class=\"hljs-string\">&quot;meta[name=&apos;_csrf&apos;]&quot;</span>).<span class=\"hljs-title function_\">attr</span>(<span class=\"hljs-string\">&quot;content&quot;</span>);\n    <span class=\"hljs-keyword\">var</span> header = &#x24;(<span class=\"hljs-string\">&quot;meta[name=&apos;_csrf_header&apos;]&quot;</span>).<span class=\"hljs-title function_\">attr</span>(<span class=\"hljs-string\">&quot;content&quot;</span>);\n    &#x24;(<span class=\"hljs-variable language_\">document</span>).<span class=\"hljs-title function_\">ajaxSend</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e, xhr, options</span>) {\n        xhr.<span class=\"hljs-title function_\">setRequestHeader</span>(header, token);\n    });\n});\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"546,556"}}],"payload":{"tag":"h3","lines":"530,531"}},{"content":"3.6&#x3001;&#x6587;&#x4ef6;&#x4e0a;&#x4f20;&#x907f;&#x514d; CSRF &#x62e6;&#x622a;","children":[{"content":"<pre data-lines=\"559,560\"><code>&#x8bf7;&#x5c06;`MultipartFilter`&#x5728;Spring Security&#x8fc7;&#x6ee4;&#x5668;&#x4e4b;&#x524d;&#x6307;&#x5b9a;&#x3002;`MultipartFilter`&#x5728;Spring Security&#x8fc7;&#x6ee4;&#x5668;&#x4e4b;&#x524d;&#x6307;&#x5b9a;&#xff0c;&#x8fd9;&#x610f;&#x5473;&#x7740;&#x4efb;&#x4f55;&#x4eba;&#x90fd;&#x53ef;&#x4ee5;&#x5728;&#x60a8;&#x7684;&#x670d;&#x52a1;&#x5668;&#x4e0a;&#x653e;&#x7f6e;&#x4e34;&#x65f6;&#x6587;&#x4ef6;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x53ea;&#x6709;&#x6388;&#x6743;&#x7528;&#x6237;&#x624d;&#x80fd;&#x63d0;&#x4ea4;&#x7531;&#x60a8;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x6240;&#x5904;&#x7406;&#x7684;&#x6587;&#x4ef6;&#x3002;&#x901a;&#x5e38;&#xff0c;&#x8fd9;&#x662f;&#x63a8;&#x8350;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x56e0;&#x4e3a;&#x4e34;&#x65f6;&#x6587;&#x4ef6;&#x4e0a;&#x4f20;&#x5bf9;&#x5927;&#x591a;&#x6570;&#x670d;&#x52a1;&#x5668;&#x7684;&#x5f71;&#x54cd;&#x53ef;&#x4ee5;&#x5ffd;&#x7565;&#x4e0d;&#x8ba1;&#x3002;&#x4e3a;&#x4e86;&#x786e;&#x4fdd;`MultipartFilter`&#x5728;&#x5177;&#x6709;XML&#x914d;&#x7f6e;&#x7684;Spring Security&#x8fc7;&#x6ee4;&#x5668;&#x4e4b;&#x524d;&#x6307;&#x5b9a;&#xff0c;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x786e;&#x4fdd;&#x7684;`&lt;filter-mapping&gt;`&#x5143;&#x7d20;`MultipartFilter`&#x653e;&#x5728;web.xml&#x4e2d;&#x7684;springSecurityFilterChain&#x4e4b;&#x524d;&#xff0c;&#x5982;&#x4e0b;&#x6240;&#x793a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"559,560"}},{"content":"<pre data-lines=\"561,580\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-name</span>&gt;</span>MultipartFilter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-name</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-class</span>&gt;</span>org.springframework.web.multipart.support.MultipartFilter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-class</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-name</span>&gt;</span>springSecurityFilterChain<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-name</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-class</span>&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-class</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-mapping</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-name</span>&gt;</span>MultipartFilter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-name</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">url-pattern</span>&gt;</span>/*<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">url-pattern</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-mapping</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-mapping</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter-name</span>&gt;</span>springSecurityFilterChain<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-name</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">url-pattern</span>&gt;</span>/*<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">url-pattern</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter-mapping</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"561,580"}}],"payload":{"tag":"h3","lines":"557,558"}},{"content":"3.7&#x3001;&#x5982;&#x4f55;&#x5173;&#x95ed; CSRF &#x9632;&#x5fa1;&#x673a;&#x5236;","children":[{"content":"<pre data-lines=\"583,592\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    ...\n    ...\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:csrf</span> <span class=\"hljs-attr\">disabled</span>=<span class=\"hljs-string\">&quot;true&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"583,592"}}],"payload":{"tag":"h3","lines":"581,582"}}],"payload":{"tag":"h2","lines":"461,463"}},{"content":"3.2&#x3001;&#x5b8c;&#x6210;&#x7f51;&#x7ad9;&#x81ea;&#x52a8;&#x767b;&#x5f55;","children":[{"content":"<pre data-lines=\"596,599\"><code>&#x5982;&#x679c;&#x6211;&#x60f3;&#x8981;&#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x4e0b;&#x6b21;&#x518d;&#x6253;&#x5f00;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x4f1a;&#x81ea;&#x52a8;&#x6839;&#x636e;&#x6211;&#x4e0a;&#x6b21;&#x7684;&#x767b;&#x5f55;&#x72b6;&#x6001;&#x8fdb;&#x884c;&#x767b;&#x5f55;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x767b;&#x5f55;&#x5e38;&#x7528;&#x7684;&#x201c;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x529f;&#x80fd;&#x201d;&#xff0c;&#x8981;&#x60f3;&#x5b9e;&#x73b0;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x529f;&#x80fd;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x5b9e;&#x73b0;&#x4e24;&#x5904;&#x5173;&#x952e;&#x914d;&#x7f6e;&#x5c31;&#x80fd;&#x4f7f;&#x7528;&#x4e86;&#xff0c;&#x5177;&#x4f53;&#x64cd;&#x4f5c;&#x5982;&#x4e0b;&#xff1a;\n\n&#x6253;&#x5f00; `login.jsp` &#x4fee;&#x6539;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x7684;name&#x4e3a;`remember-me`&#xff0c;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x9ed8;&#x8ba4;&#x540d;&#x79f0;&#xff0c;&#x53ef;&#x4ee5;&#x4fee;&#x6539;&#xff0c;&#x4f46;&#x662f;&#x4e00;&#x822c;&#x6211;&#x4eec;&#x5c31;&#x53eb;&#x8fd9;&#x4e2a;&#x540d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"596,599"}},{"content":"<pre data-lines=\"600,607\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-group form-check&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;checkbox&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-check-input&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;autoLogin&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;remember-me&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;form-check-label&quot;</span> <span class=\"hljs-attr\">for</span>=<span class=\"hljs-string\">&quot;autoLogin&quot;</span>&gt;</span>&#x81ea;&#x52a8;&#x767b;&#x5f55;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">label</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"600,607"}},{"content":"<pre data-lines=\"608,609\"><code>&#x6253;&#x5f00; `spring-security.xml` &#x5f00;&#x542f;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x529f;&#x80fd;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"608,609"}},{"content":"<pre data-lines=\"610,622\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    ...\n    ...\n    \n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:remember-me</span>\n            <span class=\"hljs-attr\">remember-me-parameter</span>=<span class=\"hljs-string\">&quot;remember-me&quot;</span>\n            <span class=\"hljs-attr\">token-validity-seconds</span>=<span class=\"hljs-string\">&quot;3600&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"610,622"}},{"content":"<pre data-lines=\"623,624\"><code>&#x6253;&#x5f00; `http://localhost:8080/` &#xff0c;&#x767b;&#x5f55;&#x4ee5;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x5728;&#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x7136;&#x540e;&#x91cd;&#x65b0;&#x6253;&#x5f00; `http://localhost:8080/` &#xff0c;&#x53d1;&#x73b0;&#x4ecd;&#x7136;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#xff0c;&#x5e76;&#x4e14;&#x8fd9;&#x65f6;&#x5019;&#x4e0d;&#x9700;&#x8981;&#x767b;&#x5f55;&#xff0c;&#x4ed6;&#x662f;&#x600e;&#x4e48;&#x505a;&#x5230;&#x7684;&#x5462;&#xff1f;&#x5176;&#x5b9e;&#xff0c;&#x5728;&#x767b;&#x5f55;&#x6210;&#x529f;&#x4ee5;&#x540e;&#x4f1a;&#x5f80;&#x5f53;&#x524d;&#x7f51;&#x7ad9;&#x7684;cookie&#x4e2d;&#x5199;&#x5165;&#x4e00;&#x4e2a;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x7684;token&#x503c;&#xff0c;&#x5f53;&#x6211;&#x4eec;&#x4e0b;&#x6b21;&#x542f;&#x52a8;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x53ea;&#x8981;&#x8fd9;&#x4e2a;cookie&#x6ca1;&#x6709;&#x6d88;&#x5931;&#xff0c;`Spring Security`&#x5c31;&#x80fd;&#x62ff;&#x5230;&#x8fd9;&#x4e2a;cookie&#x7684;&#x4e2d;&#x4fdd;&#x5b58;&#x7684;token&#x7684;&#x503c;&#xff0c;&#x7136;&#x540e;&#x5e2e;&#x6211;&#x4eec;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x8ba4;&#x8bc1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"623,624"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a4d8a08088701d7cc390fd29b0e814c4.png\" alt>","children":[],"payload":{"tag":"img","lines":"625,626"}}],"payload":{"tag":"h2","lines":"593,595"}},{"content":"3.3&#x3001;&#x4fdd;&#x5b58;&#x51ed;&#x636e;&#x5230;&#x6570;&#x636e;&#x5e93;","children":[{"content":"<pre data-lines=\"630,631\"><code>**&#x81ea;&#x52a8;&#x767b;&#x5f55;**&#x529f;&#x80fd;&#x65b9;&#x4fbf;&#x662f;&#x5927;&#x5bb6;&#x770b;&#x5f97;&#x89c1;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x5b89;&#x5168;&#x6027;&#x5374;&#x4ee4;&#x4eba;&#x62c5;&#x5fe7;&#x3002;&#x56e0;&#x4e3a;cookie&#x6bd5;&#x7adf;&#x662f;&#x4fdd;&#x5b58;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#xff0c;&#x5f88;&#x5bb9;&#x6613;&#x76d7;&#x53d6;&#xff0c;&#x800c;&#x4e14; cookie&#x7684;&#x503c;&#x8fd8;&#x4e0e;&#x7528;&#x6237;&#x540d;&#x3001;&#x5bc6;&#x7801;&#x8fd9;&#x4e9b;&#x654f;&#x611f;&#x6570;&#x636e;&#x76f8;&#x5173;&#xff0c;&#x867d;&#x7136;&#x52a0;&#x5bc6;&#x4e86;&#xff0c;&#x4f46;&#x662f;&#x5c06;&#x654f;&#x611f;&#x4fe1;&#x606f;&#x5b58;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#xff0c;&#x8fd8;&#x662f;&#x4e0d;&#x592a;&#x5b89;&#x5168;&#x3002;&#x90a3;&#x4e48;&#x8fd9;&#x5c31;&#x8981;&#x63d0;&#x9192;&#x559c;&#x6b22;&#x4f7f;&#x7528;&#x6b64;&#x529f;&#x80fd;&#x7684;&#xff0c;&#x7528;&#x5b8c;&#x7f51;&#x7ad9;&#x8981;&#x53ca;&#x65f6;&#x624b;&#x52a8;&#x9000;&#x51fa;&#x767b;&#x5f55;&#xff0c;&#x6e05;&#x7a7a;&#x8ba4;&#x8bc1;&#x4fe1;&#x606f;&#x3002; &#x6b64;&#x5916;&#xff0c;Spring Security&#x8fd8;&#x63d0;&#x4f9b;&#x4e86;`remember-me`&#x7684;&#x53e6;&#x4e00;&#x79cd;&#x76f8;&#x5bf9;&#x66f4;&#x5b89;&#x5168;&#x7684;&#x5b9e;&#x73b0;&#x673a;&#x5236;&#xff1a;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#x7684;cookie&#x4e2d;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;&#x4e00;&#x4e2a;&#x65e0;&#x610f;&#x4e49;&#x7684;&#x52a0;&#x5bc6;&#x4e32;&#xff08;&#x4e0e;&#x7528;&#x6237;&#x540d;&#x3001;&#x5bc6;&#x7801;&#x7b49;&#x654f;&#x611f;&#x6570;&#x636e;&#x65e0;&#x5173;&#xff09;&#xff0c;&#x7136;&#x540e;&#x5728;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x4fdd;&#x5b58;&#x8be5;&#x52a0;&#x5bc6;&#x4e32;-&#x7528;&#x6237;&#x4fe1;&#x606f;&#x7684;&#x5bf9;&#x5e94;&#x5173;&#x7cfb;&#xff0c;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x65f6;&#xff0c;&#x7528;cookie&#x4e2d;&#x7684;&#x52a0;&#x5bc6;&#x4e32;&#xff0c;&#x5230;&#x6570;&#x636e;&#x5e93;&#x8868;&#x4e2d;&#x9a8c;&#x8bc1;&#xff0c;&#x5982;&#x679c;&#x901a;&#x8fc7;&#xff0c;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x624d;&#x7b97;&#x901a;&#x8fc7;&#x3002;&#x8fd9;&#x6837;&#xff0c;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x529f;&#x80fd;&#x7684;&#x5b89;&#x5168;&#x6027;&#x5c31;&#x6709;&#x4e86;&#x4fdd;&#x8bc1;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x5728;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x521b;&#x5efa;&#x4e00;&#x5f20;&#x7528;&#x4e8e;&#x4fdd;&#x5b58;&#x81ea;&#x52a8;&#x767b;&#x5f55;&#x4fe1;&#x606f;&#x7684;&#x8868;&#xff0c;&#x8fd9;&#x5f20;&#x8868;&#x662f;&#x56fa;&#x5b9a;&#x7684;&#xff0c;&#x5305;&#x62ec;&#x540d;&#x79f0;&#x3001;&#x5b57;&#x6bb5;&#x7b49;&#x4fe1;&#x606f;&#xff0c;&#x90fd;&#x4e0d;&#x80fd;&#x4fee;&#x6539;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x8ba4;&#x8bc6;&#x5931;&#x8d25;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"630,631"}},{"content":"<pre data-lines=\"632,642\"><code class=\"language-sql\"><span class=\"hljs-keyword\">CREATE TABLE</span> `persistent_logins` (\n`username` <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span>,\n`series` <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span>,\n`token` <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">64</span>) <span class=\"hljs-keyword\">NOT NULL</span>,\n`last_used` <span class=\"hljs-type\">timestamp</span> <span class=\"hljs-keyword\">NOT NULL</span>,\n<span class=\"hljs-keyword\">PRIMARY KEY</span> (`series`)\n) ENGINE<span class=\"hljs-operator\">=</span>InnoDB <span class=\"hljs-keyword\">DEFAULT</span> CHARSET<span class=\"hljs-operator\">=</span>utf8;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"632,642"}},{"content":"<pre data-lines=\"643,644\"><code>&#x63a5;&#x4e0b;&#x6765;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x914d;&#x7f6e;&#x4e00;&#x4e0b;&#xff0c;&#x544a;&#x8bc9;`Spring Security`&#x4f7f;&#x7528;&#x54ea;&#x4e00;&#x4e2a;`dataSource`&#x6765;&#x64cd;&#x4f5c;&#x8fd9;&#x4e2a;&#x8868;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"643,644"}},{"content":"<pre data-lines=\"645,658\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    ...\n    ...\n    \n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:remember-me</span>\n            <span class=\"hljs-attr\">data-source-ref</span>=<span class=\"hljs-string\">&quot;dataSource&quot;</span>\n            <span class=\"hljs-attr\">remember-me-parameter</span>=<span class=\"hljs-string\">&quot;remember-me&quot;</span>\n            <span class=\"hljs-attr\">token-validity-seconds</span>=<span class=\"hljs-string\">&quot;3600&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"645,658"}},{"content":"<pre data-lines=\"659,660\"><code>&#x63a5;&#x4e0b;&#x6765;&#xff0c;&#x6211;&#x4eec;&#x91cd;&#x65b0;&#x8fdb;&#x884c;&#x6d4b;&#x8bd5;&#xff0c;&#x53d1;&#x73b0;&#x4e5f;&#x662f;&#x53ef;&#x884c;&#x7684;&#xff0c;&#x5e76;&#x4e14;&#x8fd9;&#x91cc;&#x7ed9;&#x51fa;&#x4e86;&#x6d4f;&#x89c8;&#x5668;&#x548c;&#x6570;&#x636e;&#x5e93;&#x7684;&#x622a;&#x56fe;&#x4fe1;&#x606f;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"659,660"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/649db38bbef907728eff514d7cab9723.png\" alt>","children":[],"payload":{"tag":"img","lines":"661,662"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/19e87dc799012a8c11bf29e2f8d79522.png\" alt>","children":[],"payload":{"tag":"img","lines":"663,664"}}],"payload":{"tag":"h2","lines":"627,629"}},{"content":"3.4&#x3001;&#x5c55;&#x793a;&#x5f53;&#x524d;&#x767b;&#x5f55;&#x7528;&#x6237;","children":[{"content":"<pre data-lines=\"668,671\"><code>&#x767b;&#x5f55;&#x6210;&#x529f;&#x4ee5;&#x540e;&#xff0c;&#x5982;&#x4f55;&#x663e;&#x793a;&#x51fa;&#x6765;&#x5f53;&#x524d;&#x767b;&#x5f55;&#x6210;&#x529f;&#x7684;&#x7528;&#x6237;&#x540d;&#x5462;&#xff1f;&#x6211;&#x4eec;&#x8fd9;&#x91cc;&#x7ed9;&#x51fa;&#x4e24;&#x79cd;&#x5e38;&#x7528;&#x65b9;&#x6cd5;&#xff0c;&#x4ed6;&#x4eec;&#x90fd;&#x5fc5;&#x987b;&#x4f7f;&#x7528;`Spring Security`&#x7684;&#x6807;&#x7b7e;&#x5e93;&#xff0c;&#x5177;&#x4f53;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n\n&#x7b2c;&#x4e00;&#x79cd;&#xff1a;&#x6253;&#x5f00; `main.jsp` &#x4fee;&#x6539;&#x7b2c;13&#x884c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"668,671"}},{"content":"<pre data-lines=\"672,678\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;hidden-xs&quot;</span>&gt;</span>\n\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;principal.username&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"672,678"}},{"content":"<pre data-lines=\"679,680\"><code>&#x7b2c;&#x4e8c;&#x79cd;&#xff1a;&#x6253;&#x5f00; `main.jsp` &#x4fee;&#x6539;&#x7b2c;13&#x884c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"679,680"}},{"content":"<pre data-lines=\"681,687\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;hidden-xs&quot;</span>&gt;</span>\n\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;name&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"681,687"}},{"content":"<pre data-lines=\"688,689\"><code>&#x4f7f;&#x7528;&#x7b2c;&#x4e00;&#x79cd;&#x65b9;&#x6cd5;&#x4fee;&#x6539;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"688,689"}},{"content":"<pre data-lines=\"690,699\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;px-3 mr-0 navbar-brand col-md-3 col-lg-2&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>\n    &#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#xff0c;&#x6b22;&#x8fce;&#xff1a;\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;hidden-xs&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;principal.username&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"690,699"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/c71deb43035e559c18d6c21fd2873fad.png\" alt>","children":[],"payload":{"tag":"img","lines":"700,701"}}],"payload":{"tag":"h2","lines":"665,667"}},{"content":"3.5&#x3001;&#x5bf9;&#x63a5;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"705,708\"><code>&#x6211;&#x4eec;&#x73b0;&#x5728;&#x5df2;&#x7ecf;&#x5728; `spring-security.xml` &#x5199;&#x6b7b;&#x5e76;&#x914d;&#x7f6e;&#x597d;&#x4e86;&#x4e24;&#x4e2a;&#x7528;&#x6237;&#xff08;user&#x3001;admin&#xff09;&#x4ee5;&#x53ca;&#x4ed6;&#x4eec;&#x6240;&#x5bf9;&#x5e94;&#x7684;&#x89d2;&#x8272;&#xff0c;&#x4f46;&#x662f;&#xff0c;&#x5728;&#x771f;&#x5b9e;&#x7684;&#x4f01;&#x4e1a;&#x5f00;&#x53d1;&#x4e2d;&#xff0c;&#x8fd9;&#x4e9b;&#x4fe1;&#x606f;&#x663e;&#x7136;&#x662f;&#x4e0d;&#x80fd;&#x4fdd;&#x5b58;&#x5728;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#x7684;&#xff0c;&#x56e0;&#x4e3a;&#x8981;&#x52a8;&#x6001;&#x6dfb;&#x52a0;&#x5220;&#x9664;&#x7528;&#x6237;&#x4ee5;&#x53ca;&#x89d2;&#x8272;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x6570;&#x636e;&#x5e93;&#x6765;&#x4fdd;&#x5b58;&#xff0c;&#x73b0;&#x5728; `Spring Security` &#x9ed8;&#x8ba4;&#x662f;&#x8d70;&#x7684;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#x7684;&#x8d26;&#x6237;&#x548c;&#x5bc6;&#x7801;&#xff0c;&#x6211;&#x4eec;&#x5982;&#x4f55;&#x5bf9;&#x63a5;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x6570;&#x636e;&#x5462;&#xff1f;\n\n&#x7b2c;&#x4e00;&#x6b65;&#xff1a;&#x5b9e;&#x73b0;&#x81ea;&#x5df1;&#x7684; `SysUserDetailsService` &#x63a5;&#x53e3;&#x7ee7;&#x627f; `UserDetailsService`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"705,708"}},{"content":"<pre data-lines=\"709,715\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">SysUserDetailsService</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">UserDetailsService</span> {\n    \n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"709,715"}},{"content":"<pre data-lines=\"716,717\"><code>&#x7b2c;&#x4e8c;&#x6b65;&#xff1a;&#x5b9e;&#x73b0;&#x81ea;&#x5df1;&#x7684; `SysUserDetailsService` &#x63a5;&#x53e3;&#x7684; `loadUserByUsername` &#x65b9;&#x6cd5;&#xff0c;&#x65b9;&#x6cd5;&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4ee3;&#x8868;&#x5f53;&#x524d;&#x767b;&#x5f55;&#x7684;&#x7528;&#x6237;&#x540d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"716,717"}},{"content":"<pre data-lines=\"718,749\"><code class=\"language-java\"><span class=\"hljs-meta\">@Service</span>\n<span class=\"hljs-meta\">@Transactional</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SysUserDetailsServiceImpl</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">SysUserDetailsService</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> SysUserMapper sysUserMapper;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> UserDetails <span class=\"hljs-title function_\">loadUserByUsername</span><span class=\"hljs-params\">(String username)</span> <span class=\"hljs-keyword\">throws</span> UsernameNotFoundException {\n        \n        <span class=\"hljs-type\">SysUser</span> <span class=\"hljs-variable\">sysUser</span> <span class=\"hljs-operator\">=</span> sysUserMapper.findUserByUsername(username);\n        \n        <span class=\"hljs-keyword\">if</span> (sysUser == <span class=\"hljs-literal\">null</span>) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;\n        }\n\n        \n        \n        List&lt;SimpleGrantedAuthority&gt; authorities = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;();\n        List&lt;SysRole&gt; sysRoles = sysUser.getSysRoles();\n        <span class=\"hljs-keyword\">for</span> (SysRole sysRole : sysRoles) {\n            authorities.add(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SimpleGrantedAuthority</span>(sysRole.getName()));\n        }\n\n        \n        \n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>(sysUser.getUsername(), <span class=\"hljs-string\">&quot;{noop}&quot;</span>+sysUser.getPassword(), authorities);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"718,749"}},{"content":"<pre data-lines=\"750,751\"><code>&#x7b2c;&#x4e09;&#x6b65;&#xff1a;&#x4fee;&#x6539;&#x914d;&#x7f6e;&#x6587;&#x4ef6; `spring-security.xml` &#x4e2d;&#x7684;&#x8ba4;&#x8bc1;&#x63d0;&#x4f9b;&#x8005;&#x6362;&#x6210;&#x54b1;&#x4eec;&#x81ea;&#x5df1;&#x5b9a;&#x4e49;&#x7684;&#xff0c;&#x7136;&#x540e;&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x7cfb;&#x7edf;&#x4f7f;&#x7528;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x8d26;&#x6237;&#x767b;&#x5f55;&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"750,751"}},{"content":"<pre data-lines=\"752,764\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication-manager</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication-provider</span> <span class=\"hljs-attr\">user-service-ref</span>=<span class=\"hljs-string\">&quot;sysUserDetailsServiceImpl&quot;</span>&gt;</span>\n        \n            \n            \n        \n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authentication-provider</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authentication-manager</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"752,764"}},{"content":"<pre data-lines=\"765,766\"><code>&#x7b2c;&#x56db;&#x6b65;&#xff1a;&#x4f7f;&#x7528;&#x6570;&#x636e;&#x5e93;&#x6240;&#x63d0;&#x4f9b;&#x7684;&#x8d26;&#x6237;&#x8fdb;&#x884c;&#x767b;&#x5f55;&#x6d4b;&#x8bd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"765,766"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/674ecae096ded08a83205baadfdbc8f0.png\" alt>","children":[],"payload":{"tag":"img","lines":"767,768"}}],"payload":{"tag":"h2","lines":"702,704"}},{"content":"3.6&#x3001;&#x7528;&#x6237;&#x5bc6;&#x7801;&#x8fdb;&#x884c;&#x52a0;&#x5bc6;","children":[{"content":"<pre data-lines=\"772,773\"><code>&#x7b2c;&#x4e00;&#x6b65;&#xff1a;&#x914d;&#x7f6e;&#x52a0;&#x5bc6;&#x5bf9;&#x8c61;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"772,773"}},{"content":"<pre data-lines=\"774,791\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;passwordEncoder&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder&quot;</span>/&gt;</span>\n\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication-manager</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authentication-provider</span> <span class=\"hljs-attr\">user-service-ref</span>=<span class=\"hljs-string\">&quot;sysUserDetailsServiceImpl&quot;</span>&gt;</span>\n        \n            \n            \n                \n        \n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:password-encoder</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;passwordEncoder&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authentication-provider</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authentication-manager</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"774,791"}},{"content":"<pre data-lines=\"792,793\"><code>&#x7b2c;&#x4e8c;&#x6b65;&#xff1a;&#x4fdd;&#x5b58;&#x7528;&#x6237;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x7ed9;&#x7528;&#x6237;&#x7684;&#x5bc6;&#x7801;&#x8fdb;&#x884c;&#x52a0;&#x5bc6;&#xff0c;&#x4fee;&#x6539;`SysUserServiceImpl`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"792,793"}},{"content":"<pre data-lines=\"794,805\"><code class=\"language-java\"><span class=\"hljs-meta\">@Autowired</span>\n<span class=\"hljs-keyword\">private</span> BCryptPasswordEncoder passwordEncoder;\n\n<span class=\"hljs-meta\">@Override</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">save</span><span class=\"hljs-params\">(SysUser sysUser)</span> {\n    sysUser.setPassword(passwordEncoder.encode(sysUser.getPassword()));\n    sysUserMapper.save(sysUser);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"794,805"}},{"content":"<pre data-lines=\"806,807\"><code>&#x7b2c;&#x4e09;&#x6b65;&#xff1a;&#x53bb;&#x6389; `SysUserDetailsServiceImpl` &#x4e2d;&#x7684;`{noop}`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"806,807"}},{"content":"<pre data-lines=\"808,819\"><code class=\"language-java\"><span class=\"hljs-meta\">@Override</span>\n<span class=\"hljs-keyword\">public</span> UserDetails <span class=\"hljs-title function_\">loadUserByUsername</span><span class=\"hljs-params\">(String username)</span> <span class=\"hljs-keyword\">throws</span> UsernameNotFoundException {\n    ...\n    ...\n    \n    \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>(sysUser.getUsername(), sysUser.getPassword(), authorities);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"808,819"}},{"content":"<pre data-lines=\"820,821\"><code>&#x7b2c;&#x56db;&#x6b65;&#xff1a;&#x624b;&#x52a8;&#x4fee;&#x6539;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x5bc6;&#x7801;&#x4e3a;&#x52a0;&#x5bc6;&#x540e;&#x7684;&#x5bc6;&#x7801;&#xff0c;&#x6211;&#x4eec;&#x73b0;&#x5728;&#x9700;&#x8981;&#x77e5;&#x9053;`123456`&#x52a0;&#x5bc6;&#x540e;&#x7684;&#x5bc6;&#x6587;&#xff0c;&#x9700;&#x8981;&#x624b;&#x52a8;&#x751f;&#x6210;&#xff0c;&#x6ce8;&#x610f;&#x554a;&#xff0c;&#x6bcf;&#x4e00;&#x6b21;&#x751f;&#x6210;&#x90fd;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x4f46;&#x662f;&#x90fd;&#x53ef;&#x4ee5;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"820,821"}},{"content":"<pre data-lines=\"822,832\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CreatePwd</span> {\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n        <span class=\"hljs-type\">BCryptPasswordEncoder</span> <span class=\"hljs-variable\">bCryptPasswordEncoder</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">BCryptPasswordEncoder</span>();\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">encode</span> <span class=\"hljs-operator\">=</span> bCryptPasswordEncoder.encode(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n        System.out.println(encode);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"822,832"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/56dadc76c73308e85418c04f25059e1e.png\" alt>","children":[],"payload":{"tag":"img","lines":"833,834"}},{"content":"<pre data-lines=\"835,838\"><code>&#x7b2c;&#x4e94;&#x6b65;&#xff1a;&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#xff0c;&#x5206;&#x522b;&#x4f7f;&#x7528;zhangsan&#x3001;lisi&#x3001;wangwu&#x8fdb;&#x884c;&#x767b;&#x5f55;&#x6d4b;&#x8bd5;&#xff0c;&#x53d1;&#x73b0;&#x90fd;&#x53ef;&#x4ee5;&#x6b63;&#x5e38;&#x8fdb;&#x884c;&#x767b;&#x5f55;&#xff0c;&#x6211;&#x5728;&#x521b;&#x5efa;&#x8868;&#x7684;&#x65f6;&#x5019;&#x9ed8;&#x8ba4;&#x5c31;&#x7ed9;&#x4ed6;&#x4eec;&#x5206;&#x914d;&#x4e86;&#x6743;&#x9650;&#x3002;\n\nzhangsan&#xff1a;&#x7528;&#x6237;&#x6743;&#x9650;&#x548c;&#x4ea7;&#x54c1;&#x6743;&#x9650;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"835,838"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/867f83f0acd743ee1317d1b297e1681c.png\" alt>","children":[],"payload":{"tag":"img","lines":"839,840"}},{"content":"<pre data-lines=\"841,842\"><code>lisi&#xff1a;&#x7528;&#x6237;&#x6743;&#x9650;&#x548c;&#x8ba2;&#x5355;&#x6743;&#x9650;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"841,842"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b68bb5b06e2c790e8eb2020f9d7c5da5.png\" alt>","children":[],"payload":{"tag":"img","lines":"843,844"}},{"content":"<pre data-lines=\"845,846\"><code>wangwu&#xff1a;&#x6240;&#x6709;&#x6743;&#x9650;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"845,846"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/74bc0e94256a8f81a2113d3ea02bad7e.png\" alt>","children":[],"payload":{"tag":"img","lines":"847,848"}},{"content":"<pre data-lines=\"849,860\"><code>&#x4e3a;&#x4ec0;&#x4e48;&#x8fd9;&#x4e09;&#x4e2a;&#x8d26;&#x6237;&#x90fd;&#x80fd;&#x767b;&#x5f55;&#x6210;&#x529f;&#xff0c;&#x4ee5;&#x4e0b;&#x51e0;&#x4e2a;&#x65b9;&#x9762;&#x5f88;&#x91cd;&#x8981;&#xff1a;\n\n1.  Spring Security&#x5df2;&#x7ecf;&#x914d;&#x7f6e;&#x4e86;&#x52a0;&#x5bc6;&#x767b;&#x5f55;&#xff0c;&#x6211;&#x4eec;&#x624b;&#x52a8;&#x628a;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;123456&#x6539;&#x6210;&#x4e86;&#x5bc6;&#x6587;&#xff0c;&#x767b;&#x5f55;&#x7684;&#x65f6;&#x5019;&#x624d;&#x53ef;&#x4ee5;&#x4fdd;&#x8bc1;&#x8ba4;&#x8bc1;&#x6210;&#x529f;\n    \n2.  &#x8ba4;&#x8bc1;&#x6210;&#x529f;&#x4e86;&#x53ef;&#x4e0d;&#x4e00;&#x5b9a;&#x80fd;&#x8bbf;&#x95ee;&#x6211;&#x4eec;&#x7cfb;&#x7edf;&#x7684;&#x8d44;&#x6e90;&#xff0c;&#x5fc5;&#x987b;&#x62e5;&#x6709;&#x76f8;&#x5bf9;&#x5e94;&#x7684;&#x89d2;&#x8272;&#xff0c;&#x867d;&#x7136;&#x89d2;&#x8272;&#x662f;&#x6211;&#x4eec;&#x81ea;&#x5df1;&#x5b9a;&#x4e49;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x8bf7;&#x4f60;&#x4e0d;&#x8981;&#x5fd8;&#x8bb0;&#xff0c;&#x6211;&#x4eec;&#x4e00;&#x5f00;&#x59cb;&#xff0c;&#x4f7f;&#x7528;&#x6b7b;&#x7684;&#x914d;&#x7f6e;&#x8fdb;&#x884c;&#x914d;&#x7f6e;&#x7528;&#x6237;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x90a3;&#x4e2a;&#x65f6;&#x5019;&#xff0c;&#x53ea;&#x6709;&#x62e5;&#x6709;`ROLE_USER`&#x548c;`ROLE_ADMIN`&#x8fd9;&#x6837;&#x7684;&#x7528;&#x6237;&#x624d;&#x80fd;&#x8bbf;&#x95ee;&#x7cfb;&#x7edf;&#x8d44;&#x6e90;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x4e3a;&#x4ec0;&#x4e48;zhangsan&#x548c;lisi&#x5fc5;&#x987b;&#x8981;&#x6709;`ROLE_USER`&#x89d2;&#x8272;&#x4e86;\n\n```xml\n\n&lt;security:intercept-url pattern=&quot;/**&quot; access=&quot;hasAnyRole(&apos;ROLE_USER&apos;,&apos;ROLE_ADMIN&apos;)&quot;/&gt;\n\n```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"849,860"}}],"payload":{"tag":"h2","lines":"769,771"}},{"content":"3.7&#x3001;&#x52a8;&#x6001;&#x5c55;&#x793a;&#x529f;&#x80fd;&#x83dc;&#x5355;","children":[{"content":"3.7.1&#x3001;&#x9875;&#x9762;&#x83dc;&#x5355;&#x52a8;&#x6001;&#x5c55;&#x793a;","children":[{"content":"<pre data-lines=\"867,868\"><code>&#x7ec6;&#x5fc3;&#x7684;&#x4f60;&#x5e94;&#x8be5;&#x53d1;&#x73b0;&#x4e86;&#xff0c;&#x65e0;&#x8bba;&#x662f;zhangsan&#x3001;lisi&#x3001;wangwu&#x4e2d;&#x7684;&#x54ea;&#x4e00;&#x4e2a;&#x4eba;&#x767b;&#x5f55;&#x8fdb;&#x53bb;&#xff0c;&#x5de6;&#x4fa7;&#x7684;&#x83dc;&#x5355;&#x90fd;&#x662f;&#x4e0b;&#x8fb9;&#x8fd9;&#x4e2a;&#x6837;&#x5b50;&#xff0c;&#x5b8c;&#x5168;&#x6ca1;&#x6709;&#x5b9e;&#x73b0;&#x6211;&#x4eec;&#x7684;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"867,868"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/e5df3c828a635b3281ed1b4cff03fd85.png\" alt>","children":[],"payload":{"tag":"img","lines":"869,870"}},{"content":"<pre data-lines=\"871,872\"><code>&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;`Spring Security`&#x63d0;&#x4f9b;&#x7684;&#x6807;&#x7b7e;&#x5e93;&#x6765;&#x52a8;&#x6001;&#x5224;&#x65ad;&#xff0c;&#x53ea;&#x6709;&#x62e5;&#x6709;&#x6307;&#x5b9a;&#x89d2;&#x8272;&#x7684;&#x4eba;&#xff0c;&#x624d;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x6211;&#x4eec;&#x6307;&#x5b9a;&#x7684;&#x529f;&#x80fd;&#x6a21;&#x5757;&#xff0c;&#x5177;&#x4f53;&#x505a;&#x6cd5;&#x5982;&#x4e0b;&#xff0c;&#x627e;&#x5230;`main.jsp`&#x8fdb;&#x884c;&#x4fee;&#x6539;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"871,872"}},{"content":"<pre data-lines=\"873,915\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav flex-column&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authorize</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_ADMIN&apos;,&apos;ROLE_PRODUCT&apos;)&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav-item border-bottom&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>&#x4ea7;&#x54c1;&#x7ba1;&#x7406;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/product/add&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x6dfb;&#x52a0;&#x4ea7;&#x54c1;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/product/findAll&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x4ea7;&#x54c1;&#x5217;&#x8868;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authorize</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authorize</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_ADMIN&apos;,&apos;ROLE_ORDER&apos;)&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav-item border-bottom&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>&#x8ba2;&#x5355;&#x7ba1;&#x7406;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/order/add&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x6dfb;&#x52a0;&#x8ba2;&#x5355;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/order/findAll&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x8ba2;&#x5355;&#x5217;&#x8868;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authorize</span>&gt;</span>\n\n    &lt;%--&#x53ea;&#x6709;&#x62e5;&#x6709;&#x7cfb;&#x7edf;&#x7ba1;&#x7406;&#x5458;&#x89d2;&#x8272;&#x7684;&#x7528;&#x6237;&#x624d;&#x80fd;&#x591f;&#x6dfb;&#x52a0;&#x7528;&#x6237;&#x3001;&#x4fee;&#x6539;&#x89d2;&#x8272;--%&gt;\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:authorize</span> <span class=\"hljs-attr\">access</span>=<span class=\"hljs-string\">&quot;hasAnyRole(&apos;ROLE_ADMIN&apos;)&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav-item border-bottom&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>&#x7528;&#x6237;&#x7ba1;&#x7406;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/user/add&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x6dfb;&#x52a0;&#x7528;&#x6237;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/user/findAll&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x7528;&#x6237;&#x5217;&#x8868;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;nav-item border-bottom&quot;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>&#x89d2;&#x8272;&#x7ba1;&#x7406;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/role/add&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x6dfb;&#x52a0;&#x89d2;&#x8272;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/role/findAll&quot;</span> <span class=\"hljs-attr\">target</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span>&#x89d2;&#x8272;&#x5217;&#x8868;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:authorize</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"873,915"}},{"content":"<pre data-lines=\"916,919\"><code>&#x6211;&#x4eec;&#x4fdd;&#x5b58;&#x4ee5;&#x540e;&#xff0c;&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#xff0c;&#x518d;&#x6b21;&#x5206;&#x522b;&#x767b;&#x5f55;zhangsan&#x3001;lisi&#x3001;wangwu&#xff0c;&#x770b;&#x770b;&#x5de6;&#x4fa7;&#x83dc;&#x5355;&#x680f;&#x53d1;&#x751f;&#x4e86;&#x4ec0;&#x4e48;&#x53d8;&#x5316;\n\nzhangsan&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"916,919"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/c03ae469d32b07d5a49e67e055212d63.png\" alt>","children":[],"payload":{"tag":"img","lines":"920,921"}},{"content":"<pre data-lines=\"922,923\"><code>lisi&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"922,923"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/2fdbd09e58ad17bcadcde41f853b8b91.png\" alt>","children":[],"payload":{"tag":"img","lines":"924,925"}},{"content":"<pre data-lines=\"926,927\"><code>wangwu&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"926,927"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/e012f49a0c028b681be8b5e6609959c0.png\" alt>","children":[],"payload":{"tag":"img","lines":"928,929"}}],"payload":{"tag":"h3","lines":"865,866"}},{"content":"3.7.2&#x3001;&#x4e1a;&#x52a1;&#x4ee3;&#x7801;&#x52a8;&#x6001;&#x62e6;&#x622a;","children":[{"content":"<pre data-lines=\"932,933\"><code>&#x6211;&#x4eec;&#x53d1;&#x73b0;&#x867d;&#x7136;&#x754c;&#x9762;&#x4e0a;&#x6548;&#x679c;&#x597d;&#x50cf;&#x53ef;&#x4ee5;&#x4e86;&#xff0c;&#x4f46;&#x662f;&#xff0c;&#x96be;&#x9053;&#x5c31;&#x771f;&#x7684;&#x53ef;&#x4ee5;&#x4e86;&#x5417;&#xff1f;&#x8fd8;&#x6709;&#x6ca1;&#x6709;&#x4ec0;&#x4e48;&#x7eb0;&#x6f0f;&#xff0c;&#x6211;&#x4eec;&#x5047;&#x8bbe;&#x4e00;&#x79cd;&#x573a;&#x666f;&#xff0c;&#x4e00;&#x4e2a;&#x7a0b;&#x5e8f;&#x5458;&#xff0c;&#x5b83;&#x4f7f;&#x7528;zhangsan&#x7684;&#x8d26;&#x6237;&#x767b;&#x5f55;&#x7cfb;&#x7edf;&#x540e;&#xff0c;&#x95f2;&#x6765;&#x65e0;&#x4e8b;&#xff0c;&#x4ed6;&#x5462;&#xff0c;&#x81ea;&#x5df1;&#x53c8;&#x61c2;&#x6280;&#x672f;&#xff0c;&#x60f3;&#x8bd5;&#x8bd5;&#xff0c;&#x5728;&#x5730;&#x5740;&#x680f;&#x76f4;&#x63a5;&#x8f93;&#x5165;&#x674e;&#x56db;&#x7684;&#x8ba2;&#x5355;&#x9875;&#x9762;&#xff0c;&#x770b;&#x770b;&#x80fd;&#x4e0d;&#x80fd;&#x8fdb;&#x53bb;&#xff0c;&#x7ed3;&#x679c;&#x53d1;&#x73b0;&#xff0c;&#x8fdb;&#x53bb;&#x4e86;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x7eb0;&#x6f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"932,933"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/74eecc71b1baf5aff55cd3db7245c6b8.png\" alt>","children":[],"payload":{"tag":"img","lines":"934,935"}},{"content":"<pre data-lines=\"936,939\"><code>&#x6211;&#x4eec;&#x4e0a;&#x4e00;&#x6b65;&#x6240;&#x5b9e;&#x73b0;&#x7684;&#x53ea;&#x662f;&#x8868;&#x9762;&#x4f60;&#x6240;&#x770b;&#x5230;&#x7684;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x89c6;&#x56fe;&#x4e0a;&#x5b9e;&#x73b0;&#x4e86;&#x4e0d;&#x540c;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x83dc;&#x5355;&#xff0c;&#x4f46;&#x662f;&#x5728;&#x63a7;&#x5236;&#x5668;&#x5c42;&#x5e76;&#x6ca1;&#x6709;&#x62e6;&#x622a;&#x4f4f;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x5bfc;&#x81f4;&#x95ee;&#x9898;&#x7684;&#x6839;&#x672c;&#x539f;&#x56e0;&#xff0c;&#x4e00;&#x822c;&#x6211;&#x4eec;&#x7684;&#x89e3;&#x51b3;&#x529e;&#x6cd5;&#x5c31;&#x662f;&#x5728;&#x4e1a;&#x52a1;&#x5c42;&#xff08;&#x63a7;&#x5236;&#x5668;&#x5c42;&#x4e5f;&#x53ef;&#x4ee5;&#xff0c;&#x4f46;&#x662f;&#x4e0d;&#x63a8;&#x8350;&#xff09;&#xff0c;&#x7ed9;&#x76f8;&#x5bf9;&#x5e94;&#x7684;&#x65b9;&#x6cd5;&#x6216;&#x8005;&#x76f8;&#x5e94;&#x7684;&#x7c7b;&#x6dfb;&#x52a0;&#x89d2;&#x8272;&#x5224;&#x65ad;&#x6ce8;&#x89e3;&#xff0c;&#x53ea;&#x6709;&#x62e5;&#x6709;&#x76f8;&#x5e94;&#x89d2;&#x8272;&#x7684;&#x7528;&#x6237;&#x624d;&#x80fd;&#x8bbf;&#x95ee;&#x8be5;&#x65b9;&#x6cd5;&#x6216;&#x8005;&#x8be5;&#x7c7b;&#xff0c;&#x5728;`Spring Security`&#x4e2d;&#xff0c;&#x4e00;&#x5171;&#x652f;&#x6301;&#x4e09;&#x79cd;&#x6ce8;&#x89e3;&#x90fd;&#x53ef;&#x4ee5;&#x505a;&#x5230;&#x8fd9;&#x4e2a;&#x6548;&#x679c;&#xff0c;&#x800c;&#x8fd9;&#x4e09;&#x79cd;&#x6ce8;&#x89e3;&#x7684;&#x5f00;&#x542f;&#x90fd;&#x662f;&#x4e00;&#x4e2a;&#x6807;&#x7b7e;&#x4e0a;&#x8fdb;&#x884c;&#x5f00;&#x542f;&#xff0c;&#x6211;&#x63a5;&#x4e0b;&#x6765;&#x4f1a;&#x628a;&#x4e09;&#x4e2a;&#x6ce8;&#x89e3;&#x90fd;&#x6253;&#x5f00;&#xff0c;&#x53ea;&#x4f7f;&#x7528;&#x7b2c;&#x4e00;&#x79cd;&#x6ce8;&#x89e3;&#xff0c;&#x5176;&#x4f59;&#x4e24;&#x79cd;&#x4f1a;&#x7ed9;&#x5927;&#x5bb6;&#x6ce8;&#x91ca;&#x6389;&#xff0c;&#x8981;&#x8bb0;&#x4f4f;&#xff0c;&#x6253;&#x5f00;&#x7684;&#x54ea;&#x4e2a;&#x6ce8;&#x89e3;&#xff0c;&#x5c31;&#x7528;&#x54ea;&#x4e2a;&#x6ce8;&#x89e3;&#x6765;&#x9650;&#x5236;&#x8bbf;&#x95ee;&#xff0c;&#x5fc5;&#x987b;&#x914d;&#x5957;&#x4f7f;&#x7528;&#x3002;&#x8fd9;&#x91cc;&#x6f14;&#x793a;&#x4e09;&#x7c7b;&#x6ce8;&#x89e3;&#xff0c;&#x5b9e;&#x9645;&#x5f00;&#x53d1;&#x4e2d;&#xff0c;&#x7528;&#x4e00;&#x7c7b;&#x5373;&#x53ef;&#xff01;\n\n&#x5728; `spring-security.xml` &#x6dfb;&#x52a0;&#x4ee5;&#x4e0b;&#x914d;&#x7f6e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"936,939"}},{"content":"<pre data-lines=\"940,947\"><code class=\"language-xml\">\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:global-method-security</span> <span class=\"hljs-attr\">jsr250-annotations</span>=<span class=\"hljs-string\">&quot;enabled&quot;</span>\n                                 <span class=\"hljs-attr\">pre-post-annotations</span>=<span class=\"hljs-string\">&quot;enabled&quot;</span>\n                                 <span class=\"hljs-attr\">secured-annotations</span>=<span class=\"hljs-string\">&quot;enabled&quot;</span>/&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"940,947"}},{"content":"<pre data-lines=\"948,949\"><code>&#x4fee;&#x6539;`OrderServiceImpl`&#xff1a;&#x6211;&#x4eec;&#x5c31;&#x4ee5;&#x8fd9;&#x4e2a;&#x7c7b;&#x4e3a;&#x4f8b;&#x8fdb;&#x884c;&#x8bb2;&#x89e3;&#xff0c;&#x5176;&#x4f59;&#x5269;&#x4e0b;&#x7684;&#x6240;&#x6709;&#x7684;&#x5b9e;&#x73b0;&#x90fd;&#x9700;&#x8981;&#x6807;&#x6ce8;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x65b9;&#x6cd5;&#x4e0a;&#x6807;&#x6ce8;&#x6ce8;&#x89e3;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5728;&#x7c7b;&#x4e0a;&#x6807;&#x6ce8;&#x6ce8;&#x89e3;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"948,949"}},{"content":"<pre data-lines=\"950,972\"><code class=\"language-java\"><span class=\"hljs-meta\">@RolesAllowed({&quot;ROLE_ADMIN&quot;, &quot;ROLE_ORDER&quot;})</span>\n\n\n<span class=\"hljs-meta\">@Override</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">save</span><span class=\"hljs-params\">(Order Order)</span> {\n    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">size</span> <span class=\"hljs-operator\">=</span> orderMap.size();\n    <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">id</span> <span class=\"hljs-operator\">=</span> ++size;\n    Order.setId(id);\n    orderMap.put(id, Order);\n}\n\n<span class=\"hljs-meta\">@RolesAllowed({&quot;ROLE_ADMIN&quot;, &quot;ROLE_ORDER&quot;})</span>\n\n\n<span class=\"hljs-meta\">@Override</span>\n<span class=\"hljs-keyword\">public</span> List&lt;Order&gt; <span class=\"hljs-title function_\">findAll</span><span class=\"hljs-params\">()</span> {\n    Collection&lt;Order&gt; Orders = orderMap.values();\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayList</span>&lt;&gt;(Orders);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"950,972"}},{"content":"<pre data-lines=\"973,974\"><code>&#x5b8c;&#x6210;&#x4ee5;&#x540e;&#xff0c;&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#xff0c;&#x7136;&#x540e;&#x767b;&#x5f55;zhangsan&#xff0c;&#x4f60;&#x518d;&#x6b21;&#x8f93;&#x5165;lisi&#x7684;&#x6dfb;&#x52a0;&#x8ba2;&#x5355;&#x5730;&#x5740;&#xff0c;&#x770b;&#x770b;&#x8fd8;&#x80fd;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#xff0c;&#x4f60;&#x4f1a;&#x53d1;&#x73b0;&#xff0c;&#x6dfb;&#x52a0;&#x8ba2;&#x5355;&#x754c;&#x9762;&#x8fd8;&#x5728;&#xff0c;&#x4f46;&#x662f;&#x5f53;&#x4f60;&#x70b9;&#x51fb;&#x63d0;&#x4ea4;&#x633a;&#x8ba2;&#x5355;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5c31;&#x4f1a; 403 &#x6743;&#x9650;&#x4e0d;&#x8db3;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x8fde;&#x754c;&#x9762;&#x90fd;&#x4e0d;&#x60f3;&#x5c55;&#x793a;&#x51fa;&#x6765;&#xff0c;&#x8bf7;&#x4f60;&#x5728;&#x63a7;&#x5236;&#x5c42;&#x4e0a;&#x6807;&#x6ce8;&#x76f8;&#x5bf9;&#x5e94;&#x7684;&#x6ce8;&#x89e3;&#x5373;&#x53ef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"973,974"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/e38201636b66e50f90c454043c7e0739.png\" alt>","children":[],"payload":{"tag":"img","lines":"975,976"}},{"content":"<pre data-lines=\"977,978\"><code>&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x5982;&#x679c;&#x6dfb;&#x52a0;&#x5230;&#x670d;&#x52a1;&#x5c42;&#xff0c;&#x90a3;&#x76f8;&#x5e94;&#x7684;&#x5f00;&#x542f;&#x914d;&#x7f6e;&#x81ea;&#x7136;&#x662f;&#x914d;&#x7f6e;&#x5230;`spring-security.xml`&#xff0c;&#x5982;&#x679c;&#x662f;&#x6dfb;&#x52a0;&#x5230;&#x63a7;&#x5236;&#x5668;&#x5c42;&#xff0c;&#x90a3;&#x76f8;&#x5e94;&#x7684;&#x5f00;&#x542f;&#x914d;&#x7f6e;&#x9700;&#x8981;&#x6dfb;&#x52a0;&#x5230;`spring-mvc.xml`&#x4e2d;&#xff0c;&#x8fd9;&#x4e00;&#x70b9;&#x4e5f;&#x4e00;&#x5b9a;&#x8981;&#x5207;&#x8bb0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"977,978"}}],"payload":{"tag":"h3","lines":"930,931"}}],"payload":{"tag":"h2","lines":"862,864"}},{"content":"3.8&#x3001;&#x6743;&#x9650;&#x4e0d;&#x8db3;&#x5f02;&#x5e38;&#x5904;&#x7406;","children":[{"content":"<pre data-lines=\"982,985\"><code>&#x5927;&#x5bb6;&#x4e5f;&#x53d1;&#x73b0;&#x4e86;&#xff0c;&#x6bcf;&#x6b21;&#x6743;&#x9650;&#x4e0d;&#x8db3;&#x90fd;&#x51fa;&#x73b0;403&#x9875;&#x9762;&#xff0c;&#x8fd9;&#x4e2a;&#x9519;&#x8bef;&#x9875;&#x9762;&#x662f;tomcat&#x81ea;&#x5df1;&#x751f;&#x6210;&#x7684;&#xff0c;&#x975e;&#x5e38;&#x7684;&#x96be;&#x770b;&#xff0c;&#x5f88;&#x4e0d;&#x53cb;&#x597d;&#xff0c;&#x5f53;&#x51fa;&#x73b0;403&#x5f02;&#x5e38;&#x4ee5;&#x540e;&#xff0c;&#x5982;&#x4f55;&#x8df3;&#x8f6c;&#x5230;&#x6211;&#x4eec;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x9875;&#x9762;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#xff0c;&#x6211;&#x5c06;&#x63d0;&#x4f9b;&#x4e09;&#x79cd;&#x5f62;&#x5f0f;&#x6765;&#x89e3;&#x51b3;&#xff0c;&#x7b2c;&#x4e00;&#x79cd;&#x662f;tomcat&#x63d0;&#x4f9b;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x5f0f;&#xff0c;&#x7b2c;&#x4e8c;&#x79cd;&#x662f;Spring Security&#x63d0;&#x4f9b;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x5f0f;&#xff0c;&#x7b2c;&#x4e09;&#x79cd;&#x662f;Spring MVC&#x63d0;&#x4f9b;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x5f0f;&#xff0c;&#x5728;&#x89e3;&#x51b3;&#x95ee;&#x9898;&#x4e4b;&#x524d;&#xff0c;&#x6211;&#x4eec;&#x5148;&#x5b9a;&#x4e49;&#x81ea;&#x5df1;&#x7684;403&#x6ca1;&#x6709;&#x6743;&#x9650;&#x7684;&#x9875;&#x9762;&#xff0c;&#x4ee5;&#x53ca;&#x901a;&#x8fc7;&#x63a7;&#x5236;&#x5668;&#x65b9;&#x6cd5;&#x8df3;&#x8f6c;&#x5230;403.jsp&#xff0c;&#x4ee5;&#x4e0a;&#x8fd9;&#x51e0;&#x79cd;&#x60c5;&#x51b5;&#x8fd8;&#x53ef;&#x4ee5;&#x914d;&#x7f6e;404&#x3001;500&#x7b49;&#x9519;&#x8bef;&#x9875;&#x9762;&#x7684;&#x8df3;&#x8f6c;&#xff0c;&#x5982;&#x6709;&#x9700;&#x8981;&#x4e5f;&#x53ef;&#x4ee5;&#x81ea;&#x884c;&#x914d;&#x7f6e;&#x3002;\n\n&#x5728; views &#x76ee;&#x5f55;&#x4e2d;&#x521b;&#x5efa; error &#x76ee;&#x5f55;&#xff0c;&#x5728; error &#x76ee;&#x5f55;&#x4e2d;&#x521b;&#x5efa; 403.jsp\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"982,985"}},{"content":"<pre data-lines=\"986,998\"><code class=\"language-html\">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>&#x6ca1;&#x6709;&#x6743;&#x9650;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h3</span>&gt;</span>403&#xff0c;&#x6ca1;&#x6709;&#x6743;&#x9650;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h3</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"986,998"}},{"content":"<pre data-lines=\"999,1000\"><code>&#x5728; `MainController` &#x4e2d;&#x6dfb;&#x52a0;&#x8df3;&#x8f6c;&#x65b9;&#x6cd5;&#xff0c;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"999,1000"}},{"content":"<pre data-lines=\"1001,1008\"><code class=\"language-java\"><span class=\"hljs-meta\">@RequestMapping(&quot;/to403&quot;)</span>\n<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">to403</span><span class=\"hljs-params\">()</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;error/403&quot;</span>;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1001,1008"}},{"content":"<pre data-lines=\"1009,1012\"><code>&#x4ee5;&#x4e0b;&#x51e0;&#x79cd;&#x65b9;&#x6cd5;&#x4efb;&#x9009;&#x5176;&#x4e00;&#x4f7f;&#x7528;&#x5373;&#x53ef;&#xff0c;&#x4e0d;&#x5fc5;&#x5168;&#x90e8;&#x914d;&#x7f6e;&#xff0c;&#x63a8;&#x8350;&#x4f7f;&#x7528;&#x7b2c;&#x4e09;&#x79cd;`Spring MVC`&#x63d0;&#x4f9b;&#x7684;&#x5f02;&#x5e38;&#x5904;&#x7406;&#x673a;&#x5236;&#x3002;\n\n&#x7b2c;&#x4e00;&#x79cd;&#xff1a; &#x5728; `web.xml` &#x4e2d;&#x914d;&#x7f6e;&#x4ee5;&#x4e0b;&#x4ee3;&#x7801;&#x5373;&#x53ef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1009,1012"}},{"content":"<pre data-lines=\"1013,1020\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">error-page</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">error-code</span>&gt;</span>403<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">error-code</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">location</span>&gt;</span>/to403<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">location</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">error-page</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1013,1020"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b1af9f142cd742db2ca959ba2c0cd262.png\" alt>","children":[],"payload":{"tag":"img","lines":"1021,1022"}},{"content":"<pre data-lines=\"1023,1024\"><code>&#x7b2c;&#x4e8c;&#x79cd;&#xff1a; &#x5728; `spring-security.xml`&#x4e2d;&#x914d;&#x7f6e;&#x4e00;&#x4e0b;&#x4ee3;&#x7801;&#x5373;&#x53ef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1023,1024"}},{"content":"<pre data-lines=\"1025,1034\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    ...\n    ...\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:access-denied-handler</span> <span class=\"hljs-attr\">error-page</span>=<span class=\"hljs-string\">&quot;/to403&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1025,1034"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b1af9f142cd742db2ca959ba2c0cd262.png\" alt>","children":[],"payload":{"tag":"img","lines":"1035,1036"}},{"content":"<pre data-lines=\"1037,1038\"><code>&#x7b2c;&#x4e09;&#x79cd;&#xff1a; &#x5728; `com.caochenlei.controller` &#x4e2d;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x5305; `advice` &#xff0c;&#x7136;&#x540e;&#x521b;&#x5efa; `ExceptionAdvice`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1037,1038"}},{"content":"<pre data-lines=\"1039,1051\"><code class=\"language-java\"><span class=\"hljs-meta\">@ControllerAdvice</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ExceptionAdvice</span> {\n    \n    \n    <span class=\"hljs-meta\">@ExceptionHandler(AccessDeniedException.class)</span>\n    <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">exceptionAdvice</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;forward:/to403&quot;</span>;\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1039,1051"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b1af9f142cd742db2ca959ba2c0cd262.png\" alt>","children":[],"payload":{"tag":"img","lines":"1052,1053"}}],"payload":{"tag":"h2","lines":"979,981"}},{"content":"3.9&#x3001;&#x4fdd;&#x8bc1;&#x5f53;&#x524d;&#x767b;&#x5f55;&#x4eba;&#x6570;","children":[{"content":"<pre data-lines=\"1057,1060\"><code>&#x6709;&#x65f6;&#x5019;&#x6211;&#x4eec;&#x4e3a;&#x4e86;&#x5b89;&#x5168;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x8bbe;&#x7f6e;&#x540c;&#x4e00;&#x4e2a;&#x8d26;&#x6237;&#xff0c;&#x53ea;&#x80fd;&#x540c;&#x65f6;&#x6709;&#x4e00;&#x4e2a;&#x4eba;&#x5728;&#x7ebf;&#xff0c;&#x6211;&#x4eec;&#x53ea;&#x9700;&#x8981;&#x7b80;&#x5355;&#x7684;&#x914d;&#x7f6e;&#x5c31;&#x80fd;&#x5b9e;&#x73b0;&#x3002;\n\n&#x7b2c;&#x4e00;&#x79cd;&#xff1a;&#x540c;&#x4e00;&#x4e2a;&#x8d26;&#x6237;&#xff0c;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x4eba;&#x8bbf;&#x95ee;&#xff0c;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#x767b;&#x5f55;&#x4e4b;&#x540e;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x9000;&#x51fa;&#xff0c;&#x6b64;&#x8d26;&#x6237;&#x5728;&#x5176;&#x4ed6;&#x5730;&#x65b9;&#x5747;&#x4e0d;&#x53ef;&#x767b;&#x5f55;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1057,1060"}},{"content":"<pre data-lines=\"1061,1072\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:http</span> <span class=\"hljs-attr\">auto-config</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">use-expressions</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span>\n    ...\n    ...\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:session-management</span>&gt;</span>\n        \n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:concurrency-control</span> <span class=\"hljs-attr\">max-sessions</span>=<span class=\"hljs-string\">&quot;1&quot;</span> <span class=\"hljs-attr\">error-if-maximum-exceeded</span>=<span class=\"hljs-string\">&quot;true&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:session-management</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1061,1072"}},{"content":"<pre data-lines=\"1073,1076\"><code>&#x7b2c;&#x4e8c;&#x79cd;&#xff1a;&#x540c;&#x4e00;&#x4e2a;&#x8d26;&#x6237;&#xff0c;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x4eba;&#x8bbf;&#x95ee;&#xff0c;&#x8fd9;&#x4e2a;&#x8d26;&#x6237;&#x767b;&#x5f55;&#x4e4b;&#x540e;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x9000;&#x51fa;&#xff0c;&#x6b64;&#x8d26;&#x6237;&#x5728;&#x5176;&#x4ed6;&#x5730;&#x65b9;&#x767b;&#x5f55;&#xff0c;&#x5747;&#x88ab;&#x63d0;&#x793a;&#x4e0d;&#x80fd;&#x767b;&#x5f55;&#x5e76;&#x8df3;&#x8f6c;\n\nexpired.jsp\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1073,1076"}},{"content":"<pre data-lines=\"1077,1090\"><code class=\"language-html\">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>&#x6e29;&#x99a8;&#x63d0;&#x793a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>&#x8d26;&#x6237;&#x5df2;&#x7ecf;&#x5728;&#x522b;&#x7684;&#x5730;&#x65b9;&#x767b;&#x5f55;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/toLogin&quot;</span>&gt;</span>&#x662f;&#x5426;&#x7ee7;&#x7eed;&#x767b;&#x5f55;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1077,1090"}},{"content":"<pre data-lines=\"1093,1100\"><code class=\"language-java\"><span class=\"hljs-meta\">@RequestMapping(&quot;/toExpired&quot;)</span>\n<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toExpired</span><span class=\"hljs-params\">()</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;expired&quot;</span>;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1093,1100"}},{"content":"<pre data-lines=\"1101,1102\"><code>spring-security.xml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1101,1102"}},{"content":"<pre data-lines=\"1103,1112\"><code class=\"language-xml\">\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:session-management</span> <span class=\"hljs-attr\">invalid-session-url</span>=<span class=\"hljs-string\">&quot;/toExpired&quot;</span>&gt;</span>\n        \n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">security:concurrency-control</span> <span class=\"hljs-attr\">max-sessions</span>=<span class=\"hljs-string\">&quot;1&quot;</span> <span class=\"hljs-attr\">error-if-maximum-exceeded</span>=<span class=\"hljs-string\">&quot;false&quot;</span> <span class=\"hljs-attr\">expired-url</span>=<span class=\"hljs-string\">&quot;/toExpired&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:session-management</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">security:http</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1103,1112"}}],"payload":{"tag":"h2","lines":"1054,1056"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
