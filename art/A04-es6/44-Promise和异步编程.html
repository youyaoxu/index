<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"https://www.cnblogs.com/xiaohuochai/p/7261905.html\">Promise&#x548c;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;</a><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoklEQVQ4T+2T4Q2CMBCFv27CBjgCG+gIjAAbOAIjOIJs4Ai6gRvIBpjXXCOp19T/8pJLoTneXcj3Ah91wAV4bu68xwXoAZ2EzEAmE9AWTB6AelRDyaAx9zgh0wE4ATczcTdIE7wl0oe7wX/8RMHigfQTB3fDdM1IEvYyONdIVEOSqDwCY2Z2NaS/UNbqMSQmvauUPlfbNKpBSdTUVyXSs/XyBlRCNBG20I28AAAAAElFTkSuQmCC\" alt=\"img\">","children":[{"content":"&#x524d;&#x9762;&#x7684;&#x8bdd;","children":[{"content":"<pre data-lines=\"6,9\"><code>&#x3000;&#x3000;JS&#x6709;&#x5f88;&#x591a;&#x5f3a;&#x5927;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;&#x662f;&#x5b83;&#x53ef;&#x4ee5;&#x8f7b;&#x677e;&#x5730;&#x641e;&#x5b9a;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;&#x3002;&#x4f5c;&#x4e3a;&#x4e00;&#x95e8;&#x4e3a;Web&#x800c;&#x751f;&#x7684;&#x8bed;&#x8a00;&#xff0c;&#x5b83;&#x4ece;&#x4e00;&#x5f00;&#x59cb;&#x5c31;&#x9700;&#x8981;&#x80fd;&#x591f;&#x54cd;&#x5e94;&#x5f02;&#x6b65;&#x7684;&#x7528;&#x6237;&#x4ea4;&#x4e92;&#xff0c;&#x5982;&#x70b9;&#x51fb;&#x548c;&#x6309;&#x952e;&#x64cd;&#x4f5c;&#x7b49;&#x3002;Node.js&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4ee3;&#x66ff;&#x4e86;&#x4e8b;&#x4ef6;&#xff0c;&#x4f7f;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;&#x5728;JS&#x9886;&#x57df;&#x66f4;&#x52a0;&#x6d41;&#x884c;&#x3002;&#x4f46;&#x5f53;&#x66f4;&#x591a;&#x7a0b;&#x5e8f;&#x5f00;&#x59cb;&#x4f7f;&#x7528;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;&#x65f6;&#xff0c;&#x4e8b;&#x4ef6;&#x548c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5374;&#x4e0d;&#x80fd;&#x6ee1;&#x8db3;&#x5f00;&#x53d1;&#x8005;&#x60f3;&#x8981;&#x505a;&#x7684;&#x6240;&#x6709;&#x4e8b;&#x60c5;&#xff0c;&#x5b83;&#x4eec;&#x8fd8;&#x4e0d;&#x591f;&#x5f3a;&#x5927;&#xff0c;&#x800c;Promise&#x5c31;&#x662f;&#x8fd9;&#x4e9b;&#x95ee;&#x9898;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x6848;\n\n&#x3000;&#x3000;Promise&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x5176;&#x4ed6;&#x8bed;&#x8a00;&#x4e2d;&#x7c7b;&#x4f3c;Future&#x548c;Deferred&#x4e00;&#x6837;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x662f;&#x53e6;&#x4e00;&#x79cd;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;&#x7684;&#x9009;&#x62e9;&#xff0c;&#x5b83;&#x65e2;&#x53ef;&#x4ee5;&#x50cf;&#x4e8b;&#x4ef6;&#x548c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e00;&#x6837;&#x6307;&#x5b9a;&#x7a0d;&#x540e;&#x6267;&#x884c;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x660e;&#x786e;&#x6307;&#x793a;&#x4ee3;&#x7801;&#x662f;&#x5426;&#x6210;&#x529f;&#x6267;&#x884c;&#x3002;&#x57fa;&#x4e8e;&#x8fd9;&#x4e9b;&#x6210;&#x529f;&#x6216;&#x5931;&#x8d25;&#x7684;&#x72b6;&#x6001;&#xff0c;&#x4e3a;&#x4e86;&#x8ba9;&#x4ee3;&#x7801;&#x66f4;&#x5bb9;&#x6613;&#x7406;&#x89e3;&#x548c;&#x8c03;&#x8bd5;&#xff0c;&#x53ef;&#x4ee5;&#x94fe;&#x5f0f;&#x5730;&#x7f16;&#x5199;Promise&#x3002;&#x672c;&#x6587;&#x5c06;&#x8be6;&#x7ec6;&#x4ecb;&#x7ecd;Promise&#x548c;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,9"}},{"content":"&#x5f15;&#x5165;","children":[{"content":"<pre data-lines=\"14,21\"><code>&#x3000;&#x3000;JS&#x5f15;&#x64ce;&#x662f;&#x57fa;&#x4e8e;&#x5355;&#x7ebf;&#x7a0b;(Single-threaded)&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x7684;&#x6982;&#x5ff5;&#x6784;&#x5efa;&#x7684;&#xff0c;&#x540c;&#x4e00;&#x65f6;&#x523b;&#x53ea;&#x5141;&#x8bb8;&#x4e00;&#x4e2a;&#x4ee3;&#x7801;&#x5757;&#x5728;&#x6267;&#x884c;&#xff0c;&#x4e0e;&#x4e4b;&#x76f8;&#x53cd;&#x7684;&#x662f;&#x50cf;Java&#x548c;C++&#x4e00;&#x6837;&#x7684;&#x8bed;&#x8a00;&#xff0c;&#x5b83;&#x4eec;&#x5141;&#x8bb8;&#x591a;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x4ee3;&#x7801;&#x5757;&#x540c;&#x65f6;&#x6267;&#x884c;&#x3002;&#x5bf9;&#x4e8e;&#x57fa;&#x4e8e;&#x7ebf;&#x7a0b;&#x7684;&#x8f6f;&#x4ef6;&#x800c;&#x8a00;&#xff0c;&#x5f53;&#x591a;&#x4e2a;&#x4ee3;&#x7801;&#x5757;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x5e76;&#x6539;&#x53d8;&#x72b6;&#x6001;&#x65f6;&#xff0c;&#x7a0b;&#x5e8f;&#x5f88;&#x96be;&#x7ef4;&#x62a4;&#x5e76;&#x4fdd;&#x8bc1;&#x72b6;&#x6001;&#x4e0d;&#x4f1a;&#x51fa;&#x9519; \n\n&#x3000;&#x3000;JS&#x5f15;&#x64ce;&#x540c;&#x4e00;&#x65f6;&#x523b;&#x53ea;&#x80fd;&#x6267;&#x884c;&#x4e00;&#x4e2a;&#x4ee3;&#x7801;&#x5757;&#xff0c;&#x6240;&#x4ee5;&#x9700;&#x8981;&#x8ddf;&#x8e2a;&#x5373;&#x5c06;&#x8fd0;&#x884c;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x90a3;&#x4e9b;&#x4ee3;&#x7801;&#x88ab;&#x653e;&#x5728;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x961f;&#x5217;(job queue)&#x4e2d;&#xff0c;&#x6bcf;&#x5f53;&#x4e00;&#x6bb5;&#x4ee3;&#x7801;&#x51c6;&#x5907;&#x6267;&#x884c;&#x65f6;&#xff0c;&#x90fd;&#x4f1a;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x3002;&#x6bcf;&#x5f53;JS&#x5f15;&#x64ce;&#x4e2d;&#x7684;&#x4e00;&#x6bb5;&#x4ee3;&#x7801;&#x7ed3;&#x675f;&#x6267;&#x884c;&#xff0c;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;(event toop)&#x4f1a;&#x6267;&#x884c;&#x961f;&#x5217;&#x4e2d;&#x7684;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x5b83;&#x662f;JS&#x5f15;&#x64ce;&#x4e2d;&#x7684;&#x4e00;&#x6bb5;&#x7a0b;&#x5e8f;&#xff0c;&#x8d1f;&#x8d23;&#x76d1;&#x63a7;&#x4ee3;&#x7801;&#x6267;&#x884c;&#x5e76;&#x7ba1;&#x7406;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x3002;&#x961f;&#x5217;&#x4e2d;&#x7684;&#x4efb;&#x52a1;&#x4f1a;&#x4ece;&#x7b2c;&#x4e00;&#x4e2a;&#x4e00;&#x76f4;&#x6267;&#x884c;&#x5230;&#x6700;&#x540e;&#x4e00;&#x4e2a;\n\n&#x3010;&#x4e8b;&#x4ef6;&#x6a21;&#x578b;&#x3011;\n\n&#x3000;&#x3000;&#x7528;&#x6237;&#x70b9;&#x51fb;&#x6309;&#x94ae;&#x6216;&#x6309;&#x4e0b;&#x952e;&#x76d8;&#x4e0a;&#x7684;&#x6309;&#x952e;&#x4f1a;&#x89e6;&#x53d1;&#x7c7b;&#x4f3c;onclick&#x8fd9;&#x6837;&#x7684;&#x4e8b;&#x4ef6;&#xff0c;&#x5b83;&#x4f1a;&#x5411;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x65b0;&#x4efb;&#x52a1;&#x6765;&#x54cd;&#x5e94;&#x7528;&#x6237;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x8fd9;&#x662f;JS&#x4e2d;&#x6700;&#x57fa;&#x7840;&#x7684;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;&#x5f62;&#x5f0f;&#xff0c;&#x76f4;&#x5230;&#x4e8b;&#x4ef6;&#x89e6;&#x53d1;&#x65f6;&#x624d;&#x6267;&#x884c;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x4e14;&#x6267;&#x884c;&#x65f6;&#x4e0a;&#x4e0b;&#x6587;&#x4e0e;&#x5b9a;&#x4e49;&#x65f6;&#x7684;&#x76f8;&#x540c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"14,21"}},{"content":"<pre data-lines=\"22,28\"><code data-lines=\"22,28\">let button <span class=\"hljs-operator\">=</span> document.getElementById(<span class=\"hljs-string\">&quot;my-btn&quot;</span>)<span class=\"hljs-comment\">;</span>\nbutton.onclick <span class=\"hljs-operator\">=</span> function(event) {\n    console.log(<span class=\"hljs-string\">&quot;Clicked&quot;</span>)<span class=\"hljs-comment\">;</span>\n}<span class=\"hljs-comment\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"22,28"}},{"content":"<pre data-lines=\"29,36\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5355;&#x51fb;button&#x540e;&#x4f1a;&#x6267;&#x884c;console.log(&quot;clicked&quot;)&#xff0c;&#x8d4b;&#x503c;&#x7ed9;onclick&#x7684;&#x51fd;&#x6570;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x524d;&#x9762;&#x7684;&#x4efb;&#x52a1;&#x90fd;&#x5b8c;&#x6210;&#x540e;&#x5b83;&#x624d;&#x4f1a;&#x88ab;&#x6267;&#x884c;\n\n&#x3000;&#x3000;&#x4e8b;&#x4ef6;&#x6a21;&#x578b;&#x9002;&#x7528;&#x4e8e;&#x5904;&#x7406;&#x7b80;&#x5355;&#x7684;&#x4ea4;&#x4e92;&#xff0c;&#x7136;&#x800c;&#x5c06;&#x591a;&#x4e2a;&#x72ec;&#x7acb;&#x7684;&#x5f02;&#x6b65;&#x8c03;&#x7528;&#x8fde;&#x63a5;&#x5728;&#x4e00;&#x8d77;&#x4f1a;&#x4f7f;&#x7a0b;&#x5e8f;&#x66f4;&#x52a0;&#x590d;&#x6742;&#xff0c;&#x56e0;&#x4e3a;&#x5fc5;&#x987b;&#x8ddf;&#x8e2a;&#x6bcf;&#x4e2a;&#x4e8b;&#x4ef6;&#x7684;&#x4e8b;&#x4ef6;&#x76ee;&#x6807;(&#x5982;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#x7684;button)&#x3002;&#x6b64;&#x5916;&#xff0c;&#x5fc5;&#x987b;&#x8981;&#x4fdd;&#x8bc1;&#x4e8b;&#x4ef6;&#x5728;&#x6dfb;&#x52a0;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e4b;&#x540e;&#x624d;&#x88ab;&#x89e6;&#x53d1;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5982;&#x679c;&#x5148;&#x5355;&#x51fb;button&#x518d;&#x7ed9;onclick&#x8d4b;&#x503c;&#xff0c;&#x5219;&#x4efb;&#x4f55;&#x4e8b;&#x60c5;&#x90fd;&#x4e0d;&#x4f1a;&#x53d1;&#x751f;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x5c3d;&#x7ba1;&#x4e8b;&#x4ef6;&#x6a21;&#x578b;&#x9002;&#x7528;&#x4e8e;&#x54cd;&#x5e94;&#x7528;&#x6237;&#x4ea4;&#x4e92;&#x548c;&#x5b8c;&#x6210;&#x7c7b;&#x4f3c;&#x7684;&#x4f4e;&#x9891;&#x529f;&#x80fd;&#xff0c;&#x4f46;&#x5176;&#x5bf9;&#x4e8e;&#x66f4;&#x590d;&#x6742;&#x7684;&#x9700;&#x6c42;&#x6765;&#x8bf4;&#x5374;&#x4e0d;&#x662f;&#x5f88;&#x7075;&#x6d3b;\n\n&#x3010;&#x56de;&#x8c03;&#x6a21;&#x5f0f;&#x3011;\n\n&#x3000;&#x3000;Node.js&#x901a;&#x8fc7;&#x666e;&#x53ca;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6765;&#x6539;&#x8fdb;&#x5f02;&#x6b65;&#x7f16;&#x7a0b;&#x6a21;&#x578b;&#xff0c;&#x56de;&#x8c03;&#x6a21;&#x5f0f;&#x4e0e;&#x4e8b;&#x4ef6;&#x6a21;&#x578b;&#x7c7b;&#x4f3c;&#xff0c;&#x5f02;&#x6b65;&#x4ee3;&#x7801;&#x90fd;&#x4f1a;&#x5728;&#x672a;&#x6765;&#x7684;&#x67d0;&#x4e2a;&#x65f6;&#x95f4;&#x70b9;&#x6267;&#x884c;&#xff0c;&#x4e8c;&#x8005;&#x7684;&#x533a;&#x522b;&#x662f;&#x56de;&#x8c03;&#x6a21;&#x5f0f;&#x4e2d;&#x88ab;&#x8c03;&#x7528;&#x7684;&#x51fd;&#x6570;&#x662f;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#x7684;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"29,36"}},{"content":"<pre data-lines=\"39,48\"><code data-lines=\"39,48\">readFile(<span class=\"hljs-string\">&quot;example.txt&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, contents</span>) {\n    <span class=\"hljs-keyword\">if</span> (err) {\n        throw err;\n    }\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(contents);\n});\n<span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Hi!&quot;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"39,48"}},{"content":"<pre data-lines=\"51,56\"><code>&#x3000;&#x3000;&#x6b64;&#x793a;&#x4f8b;&#x4f7f;&#x7528;Node.js&#x4f20;&#x7edf;&#x7684;&#x9519;&#x8bef;&#x4f18;&#x5148;(error-first)&#x56de;&#x8c03;&#x98ce;&#x683c;&#x3002;readFile()&#x51fd;&#x6570;&#x8bfb;&#x53d6;&#x78c1;&#x76d8;&#x4e0a;&#x7684;&#x67d0;&#x4e2a;&#x6587;&#x4ef6;(&#x6307;&#x5b9a;&#x4e3a;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;)&#xff0c;&#x8bfb;&#x53d6;&#x7ed3;&#x675f;&#x540e;&#x6267;&#x884c;&#x56de;&#x8c03;&#x51fd;&#x6570;(&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;)&#x3002;&#x5982;&#x679c;&#x51fa;&#x73b0;&#x9519;&#x8bef;&#xff0c;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#x4f1a;&#x88ab;&#x8d4b;&#x503c;&#x7ed9;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;err&#x53c2;&#x6570;&#xff1b;&#x5982;&#x679c;&#x4e00;&#x5207;&#x6b63;&#x5e38;&#xff0c;&#x6587;&#x4ef6;&#x5185;&#x5bb9;&#x4f1a;&#x4ee5;&#x5b57;&#x7b26;&#x4e32;&#x7684;&#x5f62;&#x5f0f;&#x88ab;&#x8d4b;&#x503c;&#x7ed9;contents&#x53c2;&#x6570;\n\n&#x3000;&#x3000;&#x7531;&#x4e8e;&#x4f7f;&#x7528;&#x4e86;&#x56de;&#x8c03;&#x6a21;&#x5f0f;&#xff0c;readFile()&#x51fd;&#x6570;&#x7acb;&#x5373;&#x5f00;&#x59cb;&#x6267;&#x884c;&#xff0c;&#x5f53;&#x8bfb;&#x53d6;&#x78c1;&#x76d8;&#x4e0a;&#x7684;&#x6587;&#x4ef6;&#x65f6;&#x4f1a;&#x6682;&#x505c;&#x6267;&#x884c;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x8c03;&#x7528;readFile()&#x51fd;&#x6570;&#x540e;&#xff0c;console.log(&quot;Hi&quot;)&#x8bed;&#x53e5;&#x7acb;&#x5373;&#x6267;&#x884c;&#x5e76;&#x8f93;&#x51fa;&quot;Hi&quot;&#xff1b;&#x5f53;readFile()&#x7ed3;&#x675f;&#x6267;&#x884c;&#x65f6;&#xff0c;&#x4f1a;&#x5411;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x7684;&#x672b;&#x5c3e;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x65b0;&#x4efb;&#x52a1;&#xff0c;&#x8be5;&#x4efb;&#x52a1;&#x5305;&#x542b;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x53ca;&#x76f8;&#x5e94;&#x7684;&#x53c2;&#x6570;&#xff0c;&#x5f53;&#x961f;&#x5217;&#x524d;&#x9762;&#x6240;&#x6709;&#x7684;&#x4efb;&#x52a1;&#x5b8c;&#x6210;&#x540e;&#x624d;&#x6267;&#x884c;&#x8be5;&#x4efb;&#x52a1;&#xff0c;&#x5e76;&#x6700;&#x7ec8;&#x6267;&#x884c;console.log(contents)&#x8f93;&#x51fa;&#x6240;&#x6709;&#x5185;&#x5bb9;\n\n&#x3000;&#x3000;&#x56de;&#x8c03;&#x6a21;&#x5f0f;&#x6bd4;&#x4e8b;&#x4ef6;&#x6a21;&#x578b;&#x66f4;&#x7075;&#x6d3b;&#xff0c;&#x56e0;&#x4e3a;&#x76f8;&#x6bd4;&#x4e4b;&#x4e0b;&#xff0c;&#x901a;&#x8fc7;&#x56de;&#x8c03;&#x6a21;&#x5f0f;&#x94fe;&#x63a5;&#x591a;&#x4e2a;&#x8c03;&#x7528;&#x66f4;&#x5bb9;&#x6613;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"51,56"}},{"content":"<pre data-lines=\"59,72\"><code data-lines=\"59,72\"><span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;example.txt&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, contents</span>) {\n    <span class=\"hljs-keyword\">if</span> (err) {\n        <span class=\"hljs-keyword\">throw</span> err;\n    }\n    <span class=\"hljs-title function_\">writeFile</span>(<span class=\"hljs-string\">&quot;example.txt&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err</span>) {\n        <span class=\"hljs-keyword\">if</span> (err) {\n            <span class=\"hljs-keyword\">throw</span> err;\n        }\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;File was written!&quot;</span>);\n    });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,72"}},{"content":"<pre data-lines=\"75,78\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6210;&#x529f;&#x8c03;&#x7528;readFile()&#x51fd;&#x6570;&#x540e;&#x4f1a;&#x6267;&#x884c;writeFile()&#x51fd;&#x6570;&#x7684;&#x5f02;&#x6b65;&#x8c03;&#x7528;&#x3002;&#x5728;&#x8fd9;&#x4e24;&#x4e2a;&#x51fd;&#x6570;&#x4e2d;&#x662f;&#x901a;&#x8fc7;&#x76f8;&#x540c;&#x7684;&#x57fa;&#x672c;&#x6a21;&#x5f0f;&#x6765;&#x68c0;&#x67e5;err&#x662f;&#x5426;&#x5b58;&#x5728;&#x7684;&#x3002;&#x5f53;readFile()&#x51fd;&#x6570;&#x6267;&#x884c;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x4f1a;&#x5411;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x9519;&#x8bef;&#x4ea7;&#x751f;&#xff0c;&#x5219;&#x6267;&#x884c;writeFile()&#x51fd;&#x6570;&#xff0c;&#x7136;&#x540e;&#x5f53;writeFile()&#x51fd;&#x6570;&#x6267;&#x884c;&#x7ed3;&#x675f;&#x540e;&#x4e5f;&#x5411;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;\n\n&#x3000;&#x3000;&#x867d;&#x7136;&#x8fd9;&#x4e2a;&#x6a21;&#x5f0f;&#x8fd0;&#x884c;&#x6548;&#x679c;&#x5f88;&#x4e0d;&#x9519;&#xff0c;&#x4f46;&#x5982;&#x679c;&#x5d4c;&#x5957;&#x4e86;&#x592a;&#x591a;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x5f88;&#x53ef;&#x80fd;&#x4f1a;&#x9677;&#x5165;&#x56de;&#x8c03;&#x5730;&#x72f1;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"75,78"}},{"content":"<pre data-lines=\"81,104\"><code data-lines=\"81,104\">method1(<span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(err, <span class=\"hljs-keyword\">result</span>)</span> <span class=\"hljs-comment\">{\n    if (err) {\n        throw err;\n    }</span>\n    <span class=\"hljs-title function_\">method2</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">function</span>(err, <span class=\"hljs-keyword\">result</span>)</span> <span class=\"hljs-comment\">{\n        if (err) {\n            throw err;\n        }</span>\n        <span class=\"hljs-title function_\">method3</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">function</span>(err, <span class=\"hljs-keyword\">result</span>)</span> <span class=\"hljs-comment\">{\n            if (err) {\n                throw err;\n            }</span>\n            <span class=\"hljs-title function_\">method4</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">function</span>(err, <span class=\"hljs-keyword\">result</span>)</span> <span class=\"hljs-comment\">{\n                if (err) {\n                    throw err;\n                }</span>\n                <span class=\"hljs-title function_\">method5</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">result</span>)</span>;\n            })<span class=\"hljs-punctuation\">;</span>\n        })<span class=\"hljs-punctuation\">;</span>\n    })<span class=\"hljs-punctuation\">;</span>\n})<span class=\"hljs-punctuation\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"81,104"}},{"content":"<pre data-lines=\"107,108\"><code>&#x3000;&#x3000;&#x50cf;&#x793a;&#x4f8b;&#x4e2d;&#x8fd9;&#x6837;&#x5d4c;&#x5957;&#x591a;&#x4e2a;&#x65b9;&#x6cd5;&#x8c03;&#x7528;&#xff0c;&#x4f1a;&#x521b;&#x5efa;&#x51fa;&#x4e00;&#x5806;&#x96be;&#x4ee5;&#x7406;&#x89e3;&#x548c;&#x8c03;&#x8bd5;&#x7684;&#x4ee3;&#x7801;&#x3002;&#x5982;&#x679c;&#x60f3;&#x5b9e;&#x73b0;&#x66f4;&#x590d;&#x6742;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x5c40;&#x9650;&#x6027;&#x540c;&#x6837;&#x4e5f;&#x4f1a;&#x663e;&#x73b0;&#x51fa;&#x6765;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5e76;&#x884c;&#x6267;&#x884c;&#x4e24;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x5f53;&#x4e24;&#x4e2a;&#x64cd;&#x4f5c;&#x90fd;&#x7ed3;&#x675f;&#x65f6;&#x901a;&#x77e5;&#x4f60;&#xff1b;&#x6216;&#x8005;&#x540c;&#x65f6;&#x8fdb;&#x884c;&#x4e24;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x53ea;&#x53d6;&#x4f18;&#x5148;&#x5b8c;&#x6210;&#x7684;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x3002;&#x5728;&#x8fd9;&#x4e9b;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x9700;&#x8981;&#x8ddf;&#x8e2a;&#x591a;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5e76;&#x6e05;&#x7406;&#x8fd9;&#x4e9b;&#x64cd;&#x4f5c;&#xff0c;&#x800c;Promise&#x5c31;&#x80fd;&#x975e;&#x5e38;&#x597d;&#x5730;&#x6539;&#x8fdb;&#x8fd9;&#x6837;&#x7684;&#x60c5;&#x51b5;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"107,108"}}],"payload":{"tag":"h3","lines":"12,13"}},{"content":"&#x57fa;&#x7840;","children":[{"content":"<pre data-lines=\"113,114\"><code>&#x3000;&#x3000;Promise&#x76f8;&#x5f53;&#x4e8e;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x7684;&#x5360;&#x4f4d;&#x7b26;&#xff0c;&#x5b83;&#x4e0d;&#x4f1a;&#x53bb;&#x8ba2;&#x9605;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#xff0c;&#x4e5f;&#x4e0d;&#x4f1a;&#x4f20;&#x9012;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7ed9;&#x76ee;&#x6807;&#x51fd;&#x6570;&#xff0c;&#x800c;&#x662f;&#x8ba9;&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"113,114"}},{"content":"<pre data-lines=\"115,119\"><code data-lines=\"115,119\">// readFile &#x627f;&#x8bfa;&#x4f1a;&#x5728;&#x5c06;&#x6765;&#x67d0;&#x4e2a;&#x65f6;&#x95f4;&#x70b9;&#x5b8c;&#x6210;\nlet promise <span class=\"hljs-operator\">=</span> readFile(<span class=\"hljs-string\">&quot;example.txt&quot;</span>)<span class=\"hljs-comment\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"115,119"}},{"content":"<pre data-lines=\"120,143\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;readFile()&#x4e0d;&#x4f1a;&#x7acb;&#x5373;&#x5f00;&#x59cb;&#x8bfb;&#x53d6;&#x6587;&#x4ef6;&#xff0c;&#x51fd;&#x6570;&#x4f1a;&#x5148;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x8868;&#x793a;&#x5f02;&#x6b65;&#x8bfb;&#x53d6;&#x64cd;&#x4f5c;&#x7684;Promise&#x5bf9;&#x8c61;&#xff0c;&#x672a;&#x6765;&#x5bf9;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x7684;&#x64cd;&#x4f5c;&#x5b8c;&#x5168;&#x53d6;&#x51b3;&#x4e8e;Promise&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;\n\n&#x3010;Promise&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x3011;\n\n&#x3000;&#x3000;&#x6bcf;&#x4e2a;Promise&#x90fd;&#x4f1a;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;&#x77ed;&#x6682;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1a;&#x5148;&#x662f;&#x5904;&#x4e8e;&#x8fdb;&#x884c;&#x4e2d;(pending)&#x7684;&#x72b6;&#x6001;&#xff0c;&#x6b64;&#x65f6;&#x64cd;&#x4f5c;&#x5c1a;&#x672a;&#x5b8c;&#x6210;&#xff0c;&#x6240;&#x4ee5;&#x5b83;&#x4e5f;&#x662f;&#x672a;&#x5904;&#x7406;(unsettled)&#x7684;&#xff1b;&#x4e00;&#x65e6;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x6267;&#x884c;&#x7ed3;&#x675f;&#xff0c;Promise&#x5219;&#x53d8;&#x4e3a;&#x5df2;&#x5904;&#x7406;(settled)&#x7684;&#x72b6;&#x6001;\n\n&#x3000;&#x3000;&#x5728;&#x4e4b;&#x524d;&#x7684;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x5f53;readFile()&#x51fd;&#x6570;&#x8fd4;&#x56de;promise&#x65f6;&#x5b83;&#x53d8;&#x4e3a;pending&#x72b6;&#x6001;&#xff0c;&#x64cd;&#x4f5c;&#x7ed3;&#x675f;&#x540e;&#xff0c;Promise&#x53ef;&#x80fd;&#x4f1a;&#x8fdb;&#x5165;&#x5230;&#x4ee5;&#x4e0b;&#x4e24;&#x4e2a;&#x72b6;&#x6001;&#x4e2d;&#x7684;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;\n\n&#x3000;&#x3000;1&#x3001;Fulfilled\n\n&#x3000;&#x3000;Promise&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x6210;&#x529f;&#x5b8c;&#x6210;\n\n&#x3000;&#x3000;2&#x3001;Rejected\n\n&#x3000;&#x3000;&#x7531;&#x4e8e;&#x7a0b;&#x5e8f;&#x9519;&#x8bef;&#x6216;&#x4e00;&#x4e9b;&#x5176;&#x4ed6;&#x539f;&#x56e0;&#xff0c;Promise&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x672a;&#x80fd;&#x6210;&#x529f;\n\n&#x3000;&#x3000;&#x5185;&#x90e8;&#x5c5e;&#x6027;[[PromiseState]]&#x88ab;&#x7528;&#x6765;&#x8868;&#x793a;Promise&#x7684;3&#x79cd;&#x72b6;&#x6001;&#xff1a;&quot;pending&quot;&#x3001;&quot;fulfilled&quot;&#x53ca;&quot;rejected&quot;&#x3002;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x4e0d;&#x66b4;&#x9732;&#x5728;Promise&#x5bf9;&#x8c61;&#x4e0a;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x80fd;&#x4ee5;&#x7f16;&#x7a0b;&#x7684;&#x65b9;&#x5f0f;&#x68c0;&#x6d4b;Promise&#x7684;&#x72b6;&#x6001;&#xff0c;&#x53ea;&#x6709;&#x5f53;Promise&#x7684;&#x72b6;&#x6001;&#x6539;&#x53d8;&#x65f6;&#xff0c;&#x901a;&#x8fc7;then()&#x65b9;&#x6cd5;&#x6765;&#x91c7;&#x53d6;&#x7279;&#x5b9a;&#x7684;&#x884c;&#x52a8;\n\n&#x3000;&#x3000;&#x6240;&#x6709;Promise&#x90fd;&#x6709;then()&#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff1a;&#x7b2c;&#x4e00;&#x4e2a;&#x662f;&#x5f53;Promise&#x7684;&#x72b6;&#x6001;&#x53d8;&#x4e3a;fulfilled&#x65f6;&#x8981;&#x8c03;&#x7528;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x4e0e;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x76f8;&#x5173;&#x7684;&#x9644;&#x52a0;&#x6570;&#x636e;&#x90fd;&#x4f1a;&#x4f20;&#x9012;&#x7ed9;&#x8fd9;&#x4e2a;&#x5b8c;&#x6210;&#x51fd;&#x6570;(fulfillment function)&#xff1b;&#x7b2c;&#x4e8c;&#x4e2a;&#x662f;&#x5f53;Promise&#x7684;&#x72b6;&#x6001;&#x53d8;&#x4e3a;rejected&#x65f6;&#x8981;&#x8c03;&#x7528;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x5176;&#x4e0e;&#x5b8c;&#x6210;&#x65f6;&#x8c03;&#x7528;&#x7684;&#x51fd;&#x6570;&#x7c7b;&#x4f3c;&#xff0c;&#x6240;&#x6709;&#x4e0e;&#x5931;&#x8d25;&#x72b6;&#x6001;&#x76f8;&#x5173;&#x7684;&#x9644;&#x52a0;&#x6570;&#x636e;&#x90fd;&#x4f1a;&#x4f20;&#x9012;&#x7ed9;&#x8fd9;&#x4e2a;&#x62d2;&#x7edd;&#x51fd;&#x6570;(rejection function)\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x5b9e;&#x73b0;&#x4e86;&#x4e0a;&#x8ff0;&#x7684;then()&#x65b9;&#x6cd5;&#xff0c;&#x90a3;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x6211;&#x4eec;&#x79f0;&#x4e4b;&#x4e3a;thenable&#x5bf9;&#x8c61;&#x3002;&#x6240;&#x6709;&#x7684;Promise&#x90fd;&#x662f;thenable&#x5bf9;&#x8c61;&#xff0c;&#x4f46;&#x5e76;&#x975e;&#x6240;&#x6709;thenable&#x5bf9;&#x8c61;&#x90fd;&#x662f;Promise\n\n&#x3000;&#x3000;then()&#x7684;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x90fd;&#x662f;&#x53ef;&#x9009;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x53ef;&#x4ee5;&#x6309;&#x7167;&#x4efb;&#x610f;&#x7ec4;&#x5408;&#x7684;&#x65b9;&#x5f0f;&#x6765;&#x76d1;&#x542c;Promise&#xff0c;&#x6267;&#x884c;&#x5b8c;&#x6210;&#x6216;&#x88ab;&#x62d2;&#x7edd;&#x90fd;&#x4f1a;&#x88ab;&#x54cd;&#x5e94;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,143"}},{"content":"<pre data-lines=\"146,164\"><code data-lines=\"146,164\">let promise = readFile(<span class=\"hljs-string\">&quot;example.txt&quot;</span>);\npromise.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">contents</span>) {\n    <span class=\"hljs-comment\">// &#x5b8c;&#x6210;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(contents);\n}, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err</span>) {\n    <span class=\"hljs-comment\">// &#x62d2;&#x7edd;</span>\n    <span class=\"hljs-built_in\">console</span>.error(err.message);\n});\npromise.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">contents</span>) {\n    <span class=\"hljs-comment\">// &#x5b8c;&#x6210;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(contents);\n});\npromise.then(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err</span>) {\n    <span class=\"hljs-comment\">// &#x62d2;&#x7edd;</span>\n    <span class=\"hljs-built_in\">console</span>.error(err.message);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"146,164"}},{"content":"<pre data-lines=\"167,170\"><code>&#x3000;&#x3000;&#x4e0a;&#x9762;&#x8fd9;3&#x6b21;then()&#x8c03;&#x7528;&#x64cd;&#x4f5c;&#x7684;&#x662f;&#x540c;&#x4e00;&#x4e2a;Promise&#x3002;&#x7b2c;&#x4e00;&#x4e2a;&#x540c;&#x65f6;&#x76d1;&#x542c;&#x4e86;&#x6267;&#x884c;&#x5b8c;&#x6210;&#x548c;&#x6267;&#x884c;&#x88ab;&#x62d2;&#xff1b;&#x7b2c;&#x4e8c;&#x4e2a;&#x53ea;&#x76d1;&#x542c;&#x4e86;&#x6267;&#x884c;&#x5b8c;&#x6210;&#xff0c;&#x9519;&#x8bef;&#x65f6;&#x4e0d;&#x62a5;&#x544a;&#xff1b;&#x7b2c;&#x4e09;&#x4e2a;&#x53ea;&#x76d1;&#x542c;&#x4e86;&#x6267;&#x884c;&#x88ab;&#x62d2;&#xff0c;&#x6210;&#x529f;&#x65f6;&#x4e0d;&#x62a5;&#x544a;\n\n&#x3000;&#x3000;Promise&#x8fd8;&#x6709;&#x4e00;&#x4e2a;catch()&#x65b9;&#x6cd5;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x53ea;&#x7ed9;&#x5176;&#x4f20;&#x5165;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;then()&#x65b9;&#x6cd5;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"167,170"}},{"content":"<pre data-lines=\"173,184\"><code data-lines=\"173,184\">promise.<span class=\"hljs-keyword\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err</span>) {\n    <span class=\"hljs-comment\">// &#x62d2;&#x7edd;</span>\n    <span class=\"hljs-built_in\">console</span>.error(err.message);\n});\n<span class=\"hljs-comment\">// &#x7b49;&#x540c;&#x4e8e;&#xff1a;</span>\npromise.then(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err</span>) {\n    <span class=\"hljs-comment\">// &#x62d2;&#x7edd;</span>\n    <span class=\"hljs-built_in\">console</span>.error(err.message);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"173,184"}},{"content":"<pre data-lines=\"187,190\"><code>&#x3000;&#x3000;then()&#x65b9;&#x6cd5;&#x548c;catch()&#x65b9;&#x6cd5;&#x4e00;&#x8d77;&#x4f7f;&#x7528;&#x624d;&#x80fd;&#x66f4;&#x597d;&#x5730;&#x5904;&#x7406;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x3002;&#x8fd9;&#x5957;&#x4f53;&#x7cfb;&#x80fd;&#x591f;&#x6e05;&#x695a;&#x5730;&#x6307;&#x660e;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x662f;&#x6210;&#x529f;&#x8fd8;&#x662f;&#x5931;&#x8d25;&#xff0c;&#x6bd4;&#x4e8b;&#x4ef6;&#x548c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x66f4;&#x597d;&#x7528;&#x3002;&#x5982;&#x679c;&#x4f7f;&#x7528;&#x4e8b;&#x4ef6;&#xff0c;&#x5728;&#x9047;&#x5230;&#x9519;&#x8bef;&#x65f6;&#x4e0d;&#x4f1a;&#x4e3b;&#x52a8;&#x89e6;&#x53d1;&#xff1b;&#x5982;&#x679c;&#x4f7f;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x5219;&#x5fc5;&#x987b;&#x8981;&#x8bb0;&#x5f97;&#x6bcf;&#x6b21;&#x90fd;&#x68c0;&#x67e5;&#x9519;&#x8bef;&#x53c2;&#x6570;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x7ed9;Promise&#x6dfb;&#x52a0;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x90a3;&#x6240;&#x6709;&#x5931;&#x8d25;&#x5c31;&#x81ea;&#x52a8;&#x88ab;&#x5ffd;&#x7565;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x4e00;&#x5b9a;&#x8981;&#x6dfb;&#x52a0;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x5373;&#x4f7f;&#x53ea;&#x5728;&#x51fd;&#x6570;&#x5185;&#x90e8;&#x8bb0;&#x5f55;&#x5931;&#x8d25;&#x7684;&#x7ed3;&#x679c;&#x4e5f;&#x884c;\n\n&#x3000;&#x3000;&#x5982;&#x679c;&#x4e00;&#x4e2a;Promise&#x5904;&#x4e8e;&#x5df1;&#x5904;&#x7406;&#x72b6;&#x6001;&#xff0c;&#x5728;&#x8fd9;&#x4e4b;&#x540e;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#x7684;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4ecd;&#x5c06;&#x6267;&#x884c;&#x3002;&#x6240;&#x4ee5;&#x65e0;&#x8bba;&#x4f55;&#x65f6;&#x90fd;&#x53ef;&#x4ee5;&#x6dfb;&#x52a0;&#x65b0;&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6216;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x540c;&#x65f6;&#x4e5f;&#x53ef;&#x4ee5;&#x4fdd;&#x8bc1;&#x8fd9;&#x4e9b;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x80fd;&#x88ab;&#x8c03;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"187,190"}},{"content":"<pre data-lines=\"193,204\"><code data-lines=\"193,204\">let promise = readFile(<span class=\"hljs-string\">&quot;example.txt&quot;</span>);\n    <span class=\"hljs-comment\">// &#x539f;&#x59cb;&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    promise.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">contents</span>) {\n        <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(contents);\n        <span class=\"hljs-comment\">// &#x73b0;&#x5728;&#x6dfb;&#x52a0;&#x53e6;&#x4e00;&#x4e2a;</span>\n        promise.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">contents</span>) {\n            <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(contents);\n        });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"193,204"}},{"content":"<pre data-lines=\"207,214\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x88ab;&#x8c03;&#x7528;&#x65f6;&#x5411;&#x540c;&#x4e00;&#x4e2a;Promise&#x6dfb;&#x52a0;&#x4e86;&#x53e6;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x6b64;&#x65f6;&#x8fd9;&#x4e2a;Promise&#x5df2;&#x5b8c;&#x6210;&#xff0c;&#x6240;&#x4ee5;&#x65b0;&#x7684;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4f1a;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#xff0c;&#x524d;&#x9762;&#x7684;&#x4efb;&#x52a1;&#x5b8c;&#x6210;&#x540e;&#x5176;&#x624d;&#x88ab;&#x8c03;&#x7528;&#x3002;&#x8fd9;&#x5bf9;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e5f;&#x540c;&#x6837;&#x9002;&#x7528;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x6bcf;&#x6b21;&#x8c03;&#x7528;then()&#x65b9;&#x6cd5;&#x6216;catch()&#x65b9;&#x6cd5;&#x90fd;&#x4f1a;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65b0;&#x4efb;&#x52a1;&#xff0c;&#x5f53;Promise&#x88ab;&#x89e3;&#x51b3;(resolved)&#x65f6;&#x6267;&#x884c;&#x3002;&#x8fd9;&#x4e9b;&#x4efb;&#x52a1;&#x6700;&#x7ec8;&#x4f1a;&#x88ab;&#x52a0;&#x5165;&#x5230;&#x4e00;&#x4e2a;&#x4e3a;Promise&#x91cf;&#x8eab;&#x5b9a;&#x5236;&#x7684;&#x72ec;&#x7acb;&#x961f;&#x5217;&#x4e2d;\n\n&#x3010;&#x521b;&#x5efa;&#x672a;&#x5b8c;&#x6210;&#x7684;Promise&#x3011;\n\n&#x3000;&#x3000;&#x7528;Promise&#x6784;&#x9020;&#x51fd;&#x6570;&#x53ef;&#x4ee5;&#x521b;&#x5efa;&#x65b0;&#x7684;Promise&#xff0c;&#x6784;&#x9020;&#x51fd;&#x6570;&#x53ea;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#xff1a;&#x5305;&#x542b;&#x521d;&#x59cb;&#x5316;Promise&#x4ee3;&#x7801;&#x7684;&#x6267;&#x884c;&#x5668;(executor)&#x51fd;&#x6570;&#x3002;&#x6267;&#x884c;&#x5668;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5206;&#x522b;&#x662f;resolve()&#x51fd;&#x6570;&#x548c;reject()&#x51fd;&#x6570;&#x3002;&#x6267;&#x884c;&#x5668;&#x6210;&#x529f;&#x5b8c;&#x6210;&#x65f6;&#x8c03;&#x7528;resolve()&#x51fd;&#x6570;&#xff0c;&#x53cd;&#x4e4b;&#xff0c;&#x5931;&#x8d25;&#x65f6;&#x5219;&#x8c03;&#x7528;reject()&#x51fd;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"207,214"}},{"content":"<pre data-lines=\"217,244\"><code data-lines=\"217,244\"><span class=\"hljs-comment\">// Node.js &#x8303;&#x4f8b;</span>\n<span class=\"hljs-keyword\">let</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;fs&quot;</span>);\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-params\">filename</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n        <span class=\"hljs-comment\">// &#x89e6;&#x53d1;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;</span>\n        fs.<span class=\"hljs-title function_\">readFile</span>(filename, { <span class=\"hljs-attr\">encoding</span>: <span class=\"hljs-string\">&quot;utf8&quot;</span> }, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, contents</span>) {\n            <span class=\"hljs-comment\">// &#x68c0;&#x67e5;&#x9519;&#x8bef;</span>\n            <span class=\"hljs-keyword\">if</span> (err) {\n                <span class=\"hljs-title function_\">reject</span>(err);\n                <span class=\"hljs-keyword\">return</span>;\n            }\n            <span class=\"hljs-comment\">// &#x8bfb;&#x53d6;&#x6210;&#x529f;</span>\n            <span class=\"hljs-title function_\">resolve</span>(contents);\n        });\n    });\n}\n<span class=\"hljs-keyword\">let</span> promise = <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;example.txt&quot;</span>);\n<span class=\"hljs-comment\">// &#x540c;&#x65f6;&#x76d1;&#x542c;&#x5b8c;&#x6210;&#x4e0e;&#x62d2;&#x7edd;</span>\npromise.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">contents</span>) {\n    <span class=\"hljs-comment\">// &#x5b8c;&#x6210;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(contents);\n}, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err</span>) {\n    <span class=\"hljs-comment\">// &#x62d2;&#x7edd;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(err.<span class=\"hljs-property\">message</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"217,244"}},{"content":"<pre data-lines=\"247,250\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x7528;Promise&#x5305;&#x88f9;&#x4e86;&#x4e00;&#x4e2a;&#x539f;&#x751f;Node.js&#x7684;fs.readFile()&#x5f02;&#x6b65;&#x8c03;&#x7528;&#x3002;&#x5982;&#x679c;&#x5931;&#x8d25;&#xff0c;&#x6267;&#x884c;&#x5668;&#x5411;reject()&#x51fd;&#x6570;&#x4f20;&#x9012;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#xff1b;&#x5982;&#x679c;&#x6210;&#x529f;&#xff0c;&#x6267;&#x884c;&#x5668;&#x5411;resolve()&#x51fd;&#x6570;&#x4f20;&#x9012;&#x6587;&#x4ef6;&#x5185;&#x5bb9;\n\n&#x3000;&#x3000;readFile()&#x65b9;&#x6cd5;&#x88ab;&#x8c03;&#x7528;&#x65f6;&#x6267;&#x884c;&#x5668;&#x4f1a;&#x7acb;&#x523b;&#x6267;&#x884c;&#xff0c;&#x5728;&#x6267;&#x884c;&#x5668;&#x4e2d;&#xff0c;&#x65e0;&#x8bba;&#x662f;&#x8c03;&#x7528;resolve()&#x8fd8;&#x662f;reject()&#xff0c;&#x90fd;&#x4f1a;&#x5411;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x6765;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;Promise&#x3002;&#x5982;&#x679c;&#x66fe;&#x7ecf;&#x4f7f;&#x7528;&#x8fc7;setTimeout()&#x6216;setInterval()&#x51fd;&#x6570;&#xff0c;&#x5e94;&#x8be5;&#x719f;&#x6089;&#x8fd9;&#x79cd;&#x540d;&#x4e3a;&#x4efb;&#x52a1;&#x7f16;&#x6392;(job schedhling)&#x7684;&#x8fc7;&#x7a0b;&#x3002;&#x5f53;&#x7f16;&#x6392;&#x4efb;&#x52a1;&#x65f6;&#xff0c;&#x4f1a;&#x5411;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x65b0;&#x4efb;&#x52a1;&#xff0c;&#x5e76;&#x660e;&#x786e;&#x6307;&#x5b9a;&#x5c06;&#x4efb;&#x52a1;&#x5ef6;&#x540e;&#x6267;&#x884c;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x4f7f;&#x7528;setTimeout()&#x51fd;&#x6570;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x5c06;&#x4efb;&#x52a1;&#x6dfb;&#x52a0;&#x5230;&#x961f;&#x5217;&#x524d;&#x7684;&#x5ef6;&#x65f6;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"247,250"}},{"content":"<pre data-lines=\"251,258\"><code data-lines=\"251,258\"><span class=\"hljs-comment\">// &#x5728; 500 &#x6beb;&#x79d2;&#x4e4b;&#x540e;&#x6dfb;&#x52a0;&#x6b64;&#x51fd;&#x6570;&#x5230;&#x4f5c;&#x4e1a;&#x961f;&#x5217;</span>\nsetTimeout(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Timeout&quot;</span>);\n}, <span class=\"hljs-number\">500</span>);\n<span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Hi!&quot;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"251,258"}},{"content":"<pre data-lines=\"259,260\"><code>&#x3000;&#x3000;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x7f16;&#x6392;&#x4e86;&#x4e00;&#x4e2a;500 ms&#x540e;&#x624d;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x7684;&#x4efb;&#x52a1;&#xff0c;&#x4e24;&#x6b21;console.log()&#x8c03;&#x7528;&#x5206;&#x522b;&#x8f93;&#x51fa;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"259,260"}},{"content":"<pre data-lines=\"261,265\"><code data-lines=\"261,265\">Hi!\n<span class=\"hljs-keyword\">Timeout</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"261,265"}},{"content":"<pre data-lines=\"266,269\"><code>&#x3000;&#x3000;&#x7531;&#x4e8e;&#x6709;500ms&#x7684;&#x5ef6;&#x65f6;&#xff0c;&#x56e0;&#x800c;&#x4f20;&#x5165;setTimeout()&#x7684;&#x51fd;&#x6570;&#x5728;console.log(&quot;Hi!&quot;)&#x8f93;&#x51fa;&quot;Hi&quot;&#x4e4b;&#x540e;&#x624d;&#x8f93;&#x51fa;&quot;Timeout&quot;\n\n&#x3000;&#x3000;Promise&#x5177;&#x6709;&#x7c7b;&#x4f3c;&#x7684;&#x5de5;&#x4f5c;&#x539f;&#x7406;&#xff0c;Promise&#x7684;&#x6267;&#x884c;&#x5668;&#x4f1a;&#x7acb;&#x5373;&#x6267;&#x884c;&#xff0c;&#x7136;&#x540e;&#x624d;&#x6267;&#x884c;&#x540e;&#x7eed;&#x6d41;&#x7a0b;&#x4e2d;&#x7684;&#x4ee3;&#x7801;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"266,269"}},{"content":"<pre data-lines=\"270,277\"><code data-lines=\"270,277\">let promise = <span class=\"hljs-keyword\">new</span> Promise(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Promise&quot;</span>);\n    resolve();\n});\n<span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Hi!&quot;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"270,277"}},{"content":"<pre data-lines=\"278,279\"><code>&#x3000;&#x3000;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x7684;&#x8f93;&#x51fa;&#x5185;&#x5bb9;&#x662f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"278,279"}},{"content":"<pre data-lines=\"280,284\"><code data-lines=\"280,284\">promise\nHi !\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"280,284"}},{"content":"<pre data-lines=\"285,286\"><code>&#x3000;&#x3000;&#x8c03;&#x7528;resolve()&#x540e;&#x4f1a;&#x89e6;&#x53d1;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x4f20;&#x5165;then()&#x548c;catch()&#x65b9;&#x6cd5;&#x7684;&#x51fd;&#x6570;&#x4f1a;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x4e2d;&#x5e76;&#x5f02;&#x6b65;&#x6267;&#x884c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"285,286"}},{"content":"<pre data-lines=\"289,299\"><code data-lines=\"289,299\">let promise = <span class=\"hljs-keyword\">new</span> Promise(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Promise&quot;</span>);\n    resolve();\n});\npromise.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Resolved.&quot;</span>);\n});\n<span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Hi!&quot;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"289,299"}},{"content":"<pre data-lines=\"302,303\"><code>&#x3000;&#x3000;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x7684;&#x8f93;&#x51fa;&#x5185;&#x5bb9;&#x4e3a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"302,303"}},{"content":"<pre data-lines=\"304,309\"><code data-lines=\"304,309\">promise\nHi !\nResolved\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"304,309"}},{"content":"<pre data-lines=\"310,319\"><code>&#x3000;&#x3000;&#x5373;&#x4f7f;&#x5728;&#x4ee3;&#x7801;&#x4e2d;then()&#x8c03;&#x7528;&#x4f4d;&#x4e8e;console.log(&quot;Hi!&quot;)&#x4e4b;&#x524d;&#xff0c;&#x4f46;&#x5176;&#x4e0e;&#x6267;&#x884c;&#x5668;&#x4e0d;&#x540c;&#xff0c;&#x5b83;&#x5e76;&#x6ca1;&#x6709;&#x7acb;&#x5373;&#x6267;&#x884c;&#x3002;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#xff0c;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x548c;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x603b;&#x662f;&#x5728;&#x6267;&#x884c;&#x5668;&#x5b8c;&#x6210;&#x540e;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;&#x7684;&#x672b;&#x5c3e;\n\n&#x3010;&#x521b;&#x5efa;&#x5df2;&#x5904;&#x7406;&#x7684;Promise&#x3011;\n\n&#x3000;&#x3000;&#x521b;&#x5efa;&#x672a;&#x5904;&#x7406;Promise&#x7684;&#x6700;&#x597d;&#x65b9;&#x6cd5;&#x662f;&#x4f7f;&#x7528;Promise&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x662f;&#x7531;&#x4e8e;Promise&#x6267;&#x884c;&#x5668;&#x5177;&#x6709;&#x52a8;&#x6001;&#x6027;&#x3002;&#x4f46;&#x5982;&#x679c;&#x60f3;&#x7528;Promise&#x6765;&#x8868;&#x793a;&#x4e00;&#x4e2a;&#x5df2;&#x77e5;&#x503c;&#xff0c;&#x5219;&#x7f16;&#x6392;&#x4e00;&#x4e2a;&#x53ea;&#x662f;&#x7b80;&#x5355;&#x5730;&#x7ed9;resolve()&#x51fd;&#x6570;&#x4f20;&#x503c;&#x7684;&#x4efb;&#x52a1;&#x5e76;&#x65e0;&#x5b9e;&#x9645;&#x610f;&#x4e49;&#xff0c;&#x53cd;&#x5012;&#x662f;&#x53ef;&#x4ee5;&#x7528;&#x4ee5;&#x4e0b;&#x4e24;&#x79cd;&#x65b9;&#x6cd5;&#x6839;&#x636e;&#x7279;&#x5b9a;&#x7684;&#x503c;&#x6765;&#x521b;&#x5efa;&#x5df1;&#x89e3;&#x51b3;Promise\n\n**&#x4f7f;&#x7528;Promise.resolve()**\n\n&#x3000;&#x3000;Promise.resolve()&#x65b9;&#x6cd5;&#x53ea;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x5e76;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x6001;&#x7684;Promise&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x4e0d;&#x4f1a;&#x6709;&#x4efb;&#x52a1;&#x7f16;&#x6392;&#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x800c;&#x4e14;&#x9700;&#x8981;&#x5411;Promise&#x6dfb;&#x52a0;&#x4e00;&#x81f3;&#x591a;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6765;&#x83b7;&#x53d6;&#x503c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"310,319"}},{"content":"<pre data-lines=\"320,326\"><code data-lines=\"320,326\"><span class=\"hljs-keyword\">let</span> promise = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\npromise.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"320,326"}},{"content":"<pre data-lines=\"327,332\"><code>&#x3000;&#x3000;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x5df2;&#x5b8c;&#x6210;Promise&#xff0c;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x5f62;&#x53c2;value&#x63a5;&#x53d7;&#x4e86;&#x4f20;&#x5165;&#x503c;42&#xff0c;&#x7531;&#x4e8e;&#x8be5;Promise&#x6c38;&#x8fdc;&#x4e0d;&#x4f1a;&#x5b58;&#x5728;&#x62d2;&#x7edd;&#x72b6;&#x6001;&#xff0c;&#x56e0;&#x800c;&#x8be5;Promise&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6c38;&#x8fdc;&#x4e0d;&#x4f1a;&#x88ab;&#x8c03;&#x7528;\n\n**&#x4f7f;&#x7528;Promise.reject()**\n\n&#x3000;&#x3000;&#x4e5f;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;Promise.reject()&#x65b9;&#x6cd5;&#x6765;&#x521b;&#x5efa;&#x5df2;&#x62d2;&#x7edd;Promise&#xff0c;&#x5b83;&#x4e0e;Promise.resolve()&#x5f88;&#x50cf;&#xff0c;&#x552f;&#x4e00;&#x7684;&#x533a;&#x522b;&#x662f;&#x521b;&#x5efa;&#x51fa;&#x6765;&#x7684;&#x662f;&#x62d2;&#x7edd;&#x6001;&#x7684;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"327,332"}},{"content":"<pre data-lines=\"333,339\"><code data-lines=\"333,339\">let promise = Promise.reject(<span class=\"hljs-number\">42</span>);\npromise.<span class=\"hljs-keyword\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"333,339"}},{"content":"<pre data-lines=\"340,349\"><code>&#x3000;&#x3000;&#x4efb;&#x4f55;&#x9644;&#x52a0;&#x5230;&#x8fd9;&#x4e2a;Promise&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x90fd;&#x5c06;&#x88ab;&#x8c03;&#x7528;&#xff0c;&#x4f46;&#x5374;&#x4e0d;&#x4f1a;&#x8c03;&#x7528;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x5982;&#x679c;&#x5411;Promise.resolve()&#x65b9;&#x6cd5;&#x6216;Promise.reject()&#x65b9;&#x6cd5;&#x4f20;&#x5165;&#x4e00;&#x4e2a;Promise&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;Promise&#x4f1a;&#x88ab;&#x76f4;&#x63a5;&#x8fd4;&#x56de;\n\n**&#x975e;Promise&#x7684;Thenable&#x5bf9;&#x8c61;**\n\n&#x3000;&#x3000;Promise.resolve()&#x65b9;&#x6cd5;&#x548c;Promise.reject()&#x65b9;&#x6cd5;&#x90fd;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x975e;Promise&#x7684;Thenable&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x3002;&#x5982;&#x679c;&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x975e;Promise&#x7684;Thenable&#x5bf9;&#x8c61;&#xff0c;&#x5219;&#x8fd9;&#x4e9b;&#x65b9;&#x6cd5;&#x4f1a;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65b0;&#x7684;Promise&#xff0c;&#x5e76;&#x5728;then()&#x51fd;&#x6570;&#x4e2d;&#x88ab;&#x8c03;&#x7528;\n\n&#x3000;&#x3000;&#x62e5;&#x6709;then()&#x65b9;&#x6cd5;&#x5e76;&#x4e14;&#x63a5;&#x53d7;resolve&#x548c;reject&#x8fd9;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x7684;&#x666e;&#x901a;&#x5bf9;&#x8c61;&#x5c31;&#x662f;&#x975e;Promise&#x7684;Thenable&#x5bf9;&#x8c61;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"340,349"}},{"content":"<pre data-lines=\"350,357\"><code data-lines=\"350,357\"><span class=\"hljs-keyword\">let</span> thenable = {\n    <span class=\"hljs-attr\">then</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n        <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n    }\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"350,357"}},{"content":"<pre data-lines=\"358,359\"><code>&#x3000;&#x3000;&#x5728;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;Thenable&#x5bf9;&#x8c61;&#x548c;Promise&#x4e4b;&#x95f4;&#x53ea;&#x6709;then()&#x65b9;&#x6cd5;&#x8fd9;&#x4e00;&#x4e2a;&#x76f8;&#x4f3c;&#x4e4b;&#x5904;&#xff0c;&#x53ef;&#x4ee5;&#x8c03;&#x7528;Promise.resolve()&#x65b9;&#x6cd5;&#x5c06;Thenable&#x5bf9;&#x8c61;&#x8f6c;&#x6362;&#x6210;&#x4e00;&#x4e2a;&#x5df2;&#x5b8c;&#x6210;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"358,359"}},{"content":"<pre data-lines=\"362,373\"><code data-lines=\"362,373\"><span class=\"hljs-keyword\">let</span> thenable = {\n    <span class=\"hljs-attr\">then</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n        <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n    }\n};\n<span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(thenable);\np1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"362,373"}},{"content":"<pre data-lines=\"376,379\"><code>&#x3000;&#x3000;&#x5728;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;Promise.resolve()&#x8c03;&#x7528;&#x7684;&#x662f;thenable.then()&#xff0c;&#x6240;&#x4ee5;Promise&#x7684;&#x72b6;&#x6001;&#x53ef;&#x4ee5;&#x88ab;&#x68c0;&#x6d4b;&#x5230;&#x3002;&#x7531;&#x4e8e;&#x662f;&#x5728;then()&#x65b9;&#x6cd5;&#x5185;&#x90e8;&#x8c03;&#x7528;&#x4e86;resolve(42)&#xff0c;&#x56e0;&#x6b64;Thenable&#x5bf9;&#x8c61;&#x7684;Promise&#x72b6;&#x6001;&#x662f;&#x5df2;&#x5b8c;&#x6210;&#x3002;&#x65b0;&#x521b;&#x5efa;&#x7684;&#x5df2;&#x5b8c;&#x6210;&#x72b6;&#x6001;Promise p1&#x4ece;Thenable&#x5bf9;&#x8c61;&#x63a5;&#x53d7;&#x4f20;&#x5165;&#x7684;&#x503c;(&#x4e5f;&#x5c31;&#x662f;42)&#xff0c;p1&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5c06;42&#x8d4b;&#x503c;&#x7ed9;&#x5f62;&#x53c2;value\n\n&#x3000;&#x3000;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x4e0e;Promise.resolve()&#x76f8;&#x540c;&#x7684;&#x8fc7;&#x7a0b;&#x521b;&#x5efa;&#x57fa;&#x4e8e;Thenable&#x5bf9;&#x8c61;&#x7684;&#x5df2;&#x62d2;&#x7edd;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"376,379"}},{"content":"<pre data-lines=\"382,393\"><code data-lines=\"382,393\"><span class=\"hljs-keyword\">let</span> thenable = {\n    <span class=\"hljs-attr\">then</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n        <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-number\">42</span>);\n    }\n};\n<span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(thenable);\np1.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"382,393"}},{"content":"<pre data-lines=\"396,403\"><code>&#x3000;&#x3000;&#x6b64;&#x793a;&#x4f8b;&#x4e0e;&#x524d;&#x4e00;&#x4e2a;&#x76f8;&#x6bd4;&#xff0c;&#x9664;&#x4e86;Thenable&#x5bf9;&#x8c61;&#x662f;&#x5df2;&#x62d2;&#x7edd;&#x72b6;&#x6001;&#x5916;&#xff0c;&#x5176;&#x4f59;&#x90e8;&#x5206;&#x6bd4;&#x8f83;&#x76f8;&#x4f3c;&#x3002;&#x6267;&#x884c;thenable.then()&#x65f6;&#x4f1a;&#x7528;&#x503c;42&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x5df1;&#x62d2;&#x7edd;&#x72b6;&#x6001;&#x7684;Promise&#xff0c;&#x8fd9;&#x4e2a;&#x503c;&#x968f;&#x540e;&#x4f1a;&#x88ab;&#x4f20;&#x5165;p1&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n\n&#x3000;&#x3000;&#x6709;&#x4e86;Promise.resolve()&#x65b9;&#x6cd5;&#x548c;Promise.reject()&#x65b9;&#x6cd5;&#xff0c;&#x53ef;&#x4ee5;&#x66f4;&#x8f7b;&#x677e;&#x5730;&#x5904;&#x7406;&#x975e;Promise&#x7684;Thenable&#x5bf9;&#x8c61;&#x3002;&#x5728;ES6&#x5f15;&#x5165;Promise&#x5bf9;&#x8c61;&#x4e4b;&#x524d;&#xff0c;&#x8bb8;&#x591a;&#x5e93;&#x90fd;&#x4f7f;&#x7528;&#x4e86;Thenable&#x5bf9;&#x8c61;&#xff0c;&#x6240;&#x4ee5;&#x5982;&#x679c;&#x8981;&#x5411;&#x540e;&#x517c;&#x5bb9;&#x4e4b;&#x524d;&#x5df2;&#x6709;&#x7684;&#x5e93;&#xff0c;&#x5219;&#x5c06;Thenable&#x5bf9;&#x8c61;&#x8f6c;&#x6362;&#x4e3a;&#x6b63;&#x5f0f;Promise&#x7684;&#x80fd;&#x529b;&#x5c31;&#x663e;&#x5f97;&#x81f3;&#x5173;&#x91cd;&#x8981;&#x4e86;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x786e;&#x5b9a;&#x67d0;&#x4e2a;&#x5bf9;&#x8c61;&#x662f;&#x4e0d;&#x662f;Promise&#x5bf9;&#x8c61;&#xff0c;&#x90a3;&#x4e48;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x9884;&#x671f;&#x7684;&#x7ed3;&#x679c;&#x5c06;&#x5176;&#x4f20;&#x5165;promise.resolve()&#x65b9;&#x6cd5;&#x4e2d;&#x6216;Promise.reject()&#x65b9;&#x6cd5;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x5b83;&#x662f;Promise&#x5bf9;&#x8c61;&#xff0c;&#x5219;&#x4e0d;&#x4f1a;&#x6709;&#x4efb;&#x4f55;&#x53d8;&#x5316;\n\n&#x3010;&#x6267;&#x884c;&#x5668;&#x9519;&#x8bef;&#x3011;\n\n&#x3000;&#x3000;&#x5982;&#x679c;&#x6267;&#x884c;&#x5668;&#x5185;&#x90e8;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#xff0c;&#x5219;Promise&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5c31;&#x4f1a;&#x88ab;&#x8c03;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"396,403"}},{"content":"<pre data-lines=\"406,414\"><code data-lines=\"406,414\"><span class=\"hljs-keyword\">let</span> promise = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Explosion!&quot;</span>);\n});\npromise.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(error.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"406,414"}},{"content":"<pre data-lines=\"417,418\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6267;&#x884c;&#x5668;&#x6545;&#x610f;&#x629b;&#x51fa;&#x4e86;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#xff0c;&#x6bcf;&#x4e2a;&#x6267;&#x884c;&#x5668;&#x4e2d;&#x90fd;&#x9690;&#x542b;&#x4e00;&#x4e2a;try-catch&#x5757;&#xff0c;&#x6240;&#x4ee5;&#x9519;&#x8bef;&#x4f1a;&#x88ab;&#x6355;&#x83b7;&#x5e76;&#x4f20;&#x5165;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;&#x6b64;&#x4f8b;&#x7b49;&#x4ef7;&#x4e8e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"417,418"}},{"content":"<pre data-lines=\"421,433\"><code data-lines=\"421,433\"><span class=\"hljs-keyword\">let</span> promise = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-keyword\">try</span> {\n        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Explosion!&quot;</span>);\n    } <span class=\"hljs-keyword\">catch</span> (ex) {\n        <span class=\"hljs-title function_\">reject</span>(ex);\n    }\n});\npromise.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(error.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"421,433"}},{"content":"<pre data-lines=\"436,439\"><code>&#x3000;&#x3000;&#x4e3a;&#x4e86;&#x7b80;&#x5316;&#x8fd9;&#x79cd;&#x5e38;&#x89c1;&#x7684;&#x7528;&#x4f8b;&#xff0c;&#x6267;&#x884c;&#x5668;&#x4f1a;&#x6355;&#x83b7;&#x6240;&#x6709;&#x629b;&#x51fa;&#x7684;&#x9519;&#x8bef;&#xff0c;&#x4f46;&#x53ea;&#x6709;&#x5f53;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5b58;&#x5728;&#x65f6;&#x624d;&#x4f1a;&#x8bb0;&#x5f55;&#x6267;&#x884c;&#x5668;&#x4e2d;&#x629b;&#x51fa;&#x7684;&#x9519;&#x8bef;&#xff0c;&#x5426;&#x5219;&#x9519;&#x8bef;&#x4f1a;&#x88ab;&#x5ffd;&#x7565;&#x6389;&#x3002;&#x5728;&#x65e9;&#x671f;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x4f7f;&#x7528;Promise&#x4f1a;&#x9047;&#x5230;&#x8fd9;&#x79cd;&#x95ee;&#x9898;&#xff0c;&#x540e;&#x6765;&#xff0c;JS&#x73af;&#x5883;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e9b;&#x6355;&#x83b7;&#x5df1;&#x62d2;&#x7edd;Promise&#x7684;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x6765;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;\n\n&#x3010;&#x5229;&#x7528;promise&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x4f11;&#x7720;&#x51fd;&#x6570;&#x3011;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"436,439"}},{"content":"<pre data-lines=\"442,452\"><code data-lines=\"442,452\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sleep</span>(<span class=\"hljs-params\">time</span>){\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> Promise(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>){\n    setTimeout(resolve, <span class=\"hljs-built_in\">time</span>)\n  })\n}\nsleep(<span class=\"hljs-number\">100</span>).then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&apos;113&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"442,452"}}],"payload":{"tag":"h3","lines":"111,112"}},{"content":"&#x62d2;&#x7edd;&#x5904;&#x7406;","children":[{"content":"<pre data-lines=\"459,462\"><code>&#x3000;&#x3000;&#x6709;&#x5173;Promise&#x7684;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;&#x6700;&#x5177;&#x4e89;&#x8bae;&#x7684;&#x95ee;&#x9898;&#x662f;&#xff0c;&#x5982;&#x679c;&#x5728;&#x6ca1;&#x6709;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x62d2;&#x7edd;&#x4e00;&#x4e2a;Promise&#xff0c;&#x90a3;&#x4e48;&#x4e0d;&#x4f1a;&#x63d0;&#x793a;&#x5931;&#x8d25;&#x4fe1;&#x606f;&#xff0c;&#x8fd9;&#x662f;JS&#x8bed;&#x8a00;&#x4e2d;&#x552f;&#x4e00;&#x4e00;&#x5904;&#x6ca1;&#x6709;&#x5f3a;&#x5236;&#x62a5;&#x9519;&#x7684;&#x5730;&#x65b9;&#xff0c;&#x4e00;&#x4e9b;&#x4eba;&#x8ba4;&#x4e3a;&#x8fd9;&#x662f;&#x6807;&#x51c6;&#x4e2d;&#x6700;&#x5927;&#x7684;&#x7f3a;&#x9677;\n\n&#x3000;&#x3000;Promise&#x7684;&#x7279;&#x6027;&#x51b3;&#x5b9a;&#x4e86;&#x5f88;&#x96be;&#x68c0;&#x6d4b;&#x4e00;&#x4e2a;Promise&#x662f;&#x5426;&#x88ab;&#x5904;&#x7406;&#x8fc7;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"459,462"}},{"content":"<pre data-lines=\"465,474\"><code data-lines=\"465,474\">let rejected = Promise.reject(<span class=\"hljs-number\">42</span>);\n    <span class=\"hljs-comment\">// &#x5728;&#x6b64;&#x523b; rejected &#x4e0d;&#x4f1a;&#x88ab;&#x5904;&#x7406;</span>\n    <span class=\"hljs-comment\">// &#x4e00;&#x6bb5;&#x65f6;&#x95f4;&#x540e;&#x2026;&#x2026;</span>\nrejected.<span class=\"hljs-keyword\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x73b0;&#x5728; rejected &#x5df2;&#x7ecf;&#x88ab;&#x5904;&#x7406;&#x4e86;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"465,474"}},{"content":"<pre data-lines=\"477,496\"><code>&#x3000;&#x3000;&#x4efb;&#x4f55;&#x65f6;&#x5019;&#x90fd;&#x53ef;&#x4ee5;&#x8c03;&#x7528;then()&#x65b9;&#x6cd5;&#x6216;catch()&#x65b9;&#x6cd5;&#xff0c;&#x65e0;&#x8bba;Promise&#x662f;&#x5426;&#x5df2;&#x89e3;&#x51b3;&#xff0c;&#x8fd9;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;&#x90fd;&#x53ef;&#x4ee5;&#x6b63;&#x5e38;&#x8fd0;&#x884c;&#xff0c;&#x4f46;&#x8fd9;&#x6837;&#x5c31;&#x5f88;&#x96be;&#x77e5;&#x9053;&#x4e00;&#x4e2a;Promise&#x4f55;&#x65f6;&#x88ab;&#x5904;&#x7406;&#x3002;&#x5728;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;Promise&#x88ab;&#x7acb;&#x5373;&#x62d2;&#x7edd;&#xff0c;&#x4f46;&#x662f;&#x7a0d;&#x540e;&#x624d;&#x88ab;&#x5904;&#x7406;\n\n&#x3000;&#x3000;&#x5c3d;&#x7ba1;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x5728;&#x672a;&#x6765;&#x7248;&#x672c;&#x7684;ES&#x4e2d;&#x53ef;&#x80fd;&#x4f1a;&#x88ab;&#x89e3;&#x51b3;&#xff0c;&#x4f46;&#x662f;Node&#x548c;&#x548c;&#x6d4f;&#x89c8;&#x5668;&#x73af;&#x5883;&#x90fd;&#x5df2;&#x5206;&#x522b;&#x505a;&#x51fa;&#x4e86;&#x4e00;&#x4e9b;&#x6539;&#x53d8;&#x6765;&#x89e3;&#x51b3;&#x5f00;&#x53d1;&#x8005;&#x7684;&#x8fd9;&#x4e2a;&#x75db;&#x70b9;&#xff0c;&#x8fd9;&#x4e9b;&#x6539;&#x53d8;&#x4e0d;&#x662f;ES6&#x6807;&#x51c6;&#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x4e0d;&#x8fc7;&#x4f7f;&#x7528;Promise&#x65f6;&#x5b83;&#x4eec;&#x786e;&#x5b9e;&#x662f;&#x975e;&#x5e38;&#x6709;&#x4ef7;&#x503c;&#x7684;&#x5de5;&#x5177;\n\n&#x3010;Node.js&#x73af;&#x5883;&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x3011;\n\n&#x3000;&#x3000;&#x5728;Node.js&#x4e2d;&#xff0c;&#x5904;&#x7406;Promise&#x62d2;&#x7edd;&#x65f6;&#x4f1a;&#x89e6;&#x53d1;process&#x5bf9;&#x8c61;&#x4e0a;&#x7684;&#x4e24;&#x4e2a;&#x4e8b;&#x4ef6;\n\n&#x3000;&#x3000;1&#x3001;unhandledRejection\n\n&#x3000;&#x3000;&#x5728;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x4e2d;&#xff0c;&#x5f53;Promise&#x88ab;&#x62d2;&#x7edd;&#xff0c;&#x5e76;&#x4e14;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x65f6;&#x88ab;&#x8c03;&#x7528;\n\n&#x3000;&#x3000;2&#x3001;rejectionHandled\n\n&#x3000;&#x3000;&#x5728;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x540e;&#xff0c;&#x5f53;Promise&#x88ab;&#x62d2;&#x7edd;&#xff0c;&#x5e76;&#x4e14;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x65f6;&#x88ab;&#x8c03;&#x7528;\n\n&#x3000;&#x3000;&#x8bbe;&#x8ba1;&#x8fd9;&#x4e9b;&#x4e8b;&#x4ef6;&#x662f;&#x7528;&#x6765;&#x8bc6;&#x522b;&#x90a3;&#x4e9b;&#x88ab;&#x62d2;&#x7edd;&#x5374;&#x53c8;&#x6ca1;&#x88ab;&#x5904;&#x7406;&#x8fc7;&#x7684;Promise&#x7684;\n\n&#x3000;&#x3000;&#x62d2;&#x7edd;&#x539f;&#x56e0;(&#x901a;&#x5e38;&#x662f;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x5bf9;&#x8c61;)&#x53ca;&#x88ab;&#x62d2;&#x7edd;&#x7684;Promise&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x88ab;&#x4f20;&#x5165;unhandledRejection&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"477,496"}},{"content":"<pre data-lines=\"499,507\"><code data-lines=\"499,507\"><span class=\"hljs-keyword\">let</span> rejected;\nprocess.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&quot;unhandledRejection&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">reason, promise</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(reason.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(rejected === promise); <span class=\"hljs-comment\">// true</span>\n});\nrejected = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Explosion!&quot;</span>));\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"499,507"}},{"content":"<pre data-lines=\"510,513\"><code>&#x3000;&#x3000;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x5df2;&#x62d2;&#x7edd;Promise&#x548c;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#xff0c;&#x5e76;&#x76d1;&#x542c;&#x4e86;unhandledRejection&#x4e8b;&#x4ef6;&#xff0c;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5206;&#x522b;&#x63a5;&#x53d7;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#x548c;Promise&#x4f5c;&#x4e3a;&#x5b83;&#x7684;&#x4e24;&#x4e2a;&#x53c2;&#x6570;\n\n&#x3000;&#x3000;rejectionHandled&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x88ab;&#x62d2;&#x7edd;&#x7684;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"510,513"}},{"content":"<pre data-lines=\"516,529\"><code data-lines=\"516,529\"><span class=\"hljs-keyword\">let</span> rejected;\nprocess.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&quot;rejectionHandled&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">promise</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(rejected === promise); <span class=\"hljs-comment\">// true</span>\n});\nrejected = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Explosion!&quot;</span>));\n<span class=\"hljs-comment\">// &#x5ef6;&#x8fdf;&#x6dfb;&#x52a0;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n<span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    rejected.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n    });\n}, <span class=\"hljs-number\">1000</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"516,529"}},{"content":"<pre data-lines=\"532,535\"><code>&#x3000;&#x3000;&#x8fd9;&#x91cc;&#x7684;rejectionHandled&#x4e8b;&#x4ef6;&#x5728;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6700;&#x540e;&#x88ab;&#x8c03;&#x7528;&#x65f6;&#x89e6;&#x53d1;&#xff0c;&#x5982;&#x679c;&#x5728;&#x521b;&#x5efa;rejected&#x4e4b;&#x540e;&#x76f4;&#x63a5;&#x6dfb;&#x52a0;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x90a3;&#x4e48;rejectionHandled&#x4e8b;&#x4ef6;&#x4e0d;&#x4f1a;&#x88ab;&#x89e6;&#x53d1;&#xff0c;&#x56e0;&#x4e3a;rejected&#x521b;&#x5efa;&#x7684;&#x8fc7;&#x7a0b;&#x4e0e;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x8c03;&#x7528;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x4e2d;&#xff0c;&#x6b64;&#x65f6;rejectionHandled&#x4e8b;&#x4ef6;&#x5c1a;&#x672a;&#x751f;&#x6548;\n\n&#x3000;&#x3000;&#x901a;&#x8fc7;&#x4e8b;&#x4ef6;rejectionHandled&#x548c;&#x4e8b;&#x4ef6;unhandledRejection&#x5c06;&#x6f5c;&#x5728;&#x672a;&#x5904;&#x7406;&#x7684;&#x62d2;&#x7edd;&#x5b58;&#x50a8;&#x4e3a;&#x4e00;&#x4e2a;&#x5217;&#x8868;&#xff0c;&#x7b49;&#x5f85;&#x4e00;&#x6bb5;&#x65f6;&#x95f4;&#x540e;&#x68c0;&#x67e5;&#x5217;&#x8868;&#x4fbf;&#x80fd;&#x591f;&#x6b63;&#x786e;&#x5730;&#x8ddf;&#x8e2a;&#x6f5c;&#x5728;&#x7684;&#x672a;&#x5904;&#x7406;&#x62d2;&#x7edd;&#x3002;&#x4f8b;&#x5982;&#x4e0b;&#x9762;&#x8fd9;&#x4e2a;&#x7b80;&#x5355;&#x7684;&#x672a;&#x5904;&#x7406;&#x62d2;&#x7edd;&#x8ddf;&#x8e2a;&#x5668;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"532,535"}},{"content":"<pre data-lines=\"538,556\"><code data-lines=\"538,556\"><span class=\"hljs-keyword\">let</span> possiblyUnhandledRejections = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n<span class=\"hljs-comment\">// &#x5f53;&#x4e00;&#x4e2a;&#x62d2;&#x7edd;&#x672a;&#x88ab;&#x5904;&#x7406;&#xff0c;&#x5c06;&#x5176;&#x6dfb;&#x52a0;&#x5230; map</span>\nprocess.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&quot;unhandledRejection&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">reason, promise</span>) {\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">set</span>(promise, reason);\n});\nprocess.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&quot;rejectionHandled&quot;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">promise</span>) {\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">delete</span>(promise);\n});\n<span class=\"hljs-built_in\">setInterval</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">reason, promise</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(reason.<span class=\"hljs-property\">message</span> ? reason.<span class=\"hljs-property\">message</span> : reason);\n        <span class=\"hljs-comment\">// &#x505a;&#x70b9;&#x4e8b;&#x6765;&#x5904;&#x7406;&#x8fd9;&#x4e9b;&#x62d2;&#x7edd;</span>\n        <span class=\"hljs-title function_\">handleRejection</span>(promise, reason);\n    });\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">clear</span>();\n}, <span class=\"hljs-number\">60000</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"538,556"}},{"content":"<pre data-lines=\"559,576\"><code>&#x3000;&#x3000;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4f7f;&#x7528;Map&#x96c6;&#x5408;&#x6765;&#x5b58;&#x50a8;Promise&#x53ca;&#x5176;&#x62d2;&#x7edd;&#x539f;&#x56e0;&#xff0c;&#x6bcf;&#x4e2a;Promise&#x952e;&#x90fd;&#x6709;&#x4e00;&#x4e2a;&#x62d2;&#x7edd;&#x539f;&#x56e0;&#x7684;&#x76f8;&#x5173;&#x503c;&#x3002;&#x6bcf;&#x5f53;&#x89e6;&#x53d1;unhandledRejection&#x4e8b;&#x4ef6;&#x65f6;&#xff0c;&#x4f1a;&#x5411;Map&#x96c6;&#x5408;&#x4e2d;&#x6dfb;&#x52a0;&#x4e00;&#x7ec4;Promise&#x53ca;&#x62d2;&#x7edd;&#x539f;&#x56e0;&#xff1b;&#x6bcf;&#x5f53;&#x89e6;&#x53d1;rejectionHandled&#x4e8b;&#x4ef6;&#x65f6;&#xff0c;&#x5df2;&#x5904;&#x7406;&#x7684;Promise&#x4f1a;&#x4ece;Map&#x96c6;&#x5408;&#x4e2d;&#x79fb;&#x9664;&#x3002;&#x7ed3;&#x679c;&#x662f;&#xff0c;possiblyUnhandledRejections&#x4f1a;&#x968f;&#x7740;&#x4e8b;&#x4ef6;&#x8c03;&#x7528;&#x4e0d;&#x65ad;&#x6269;&#x5145;&#x6216;&#x6536;&#x7f29;&#x3002;setInterval()&#x8c03;&#x7528;&#x4f1a;&#x5b9a;&#x671f;&#x68c0;&#x67e5;&#x5217;&#x8868;&#xff0c;&#x5c06;&#x53ef;&#x80fd;&#x672a;&#x5904;&#x7406;&#x7684;&#x62d2;&#x7edd;&#x8f93;&#x51fa;&#x5230;&#x63a7;&#x5236;&#x53f0;(&#x5b9e;&#x9645;&#x4e0a;&#x4f1a;&#x901a;&#x8fc7;&#x5176;&#x4ed6;&#x65b9;&#x5f0f;&#x8bb0;&#x5f55;&#x6216;&#x8005;&#x76f4;&#x63a5;&#x5904;&#x7406;&#x6389;&#x8fd9;&#x4e2a;&#x62d2;&#x7edd;)&#x3002;&#x5728;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x4e2d;&#x4f7f;&#x7528;&#x7684;&#x662f;Map&#x96c6;&#x5408;&#x800c;&#x4e0d;&#x662f;WeakMap&#x96c6;&#x5408;&#xff0c;&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#x9700;&#x8981;&#x5b9a;&#x671f;&#x68c0;&#x67e5;Map&#x96c6;&#x5408;&#x6765;&#x786e;&#x8ba4;&#x4e00;&#x4e2a;Promise&#x662f;&#x5426;&#x5b58;&#x5728;&#xff0c;&#x800c;&#x8fd9;&#x662f;WeakMap&#x65e0;&#x6cd5;&#x5b9e;&#x73b0;&#x7684;\n\n&#x3000;&#x3000;&#x5c3d;&#x7ba1;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x9488;&#x5bf9;Node.js&#x8bbe;&#x8ba1;&#xff0c;&#x4f46;&#x662f;&#x6d4f;&#x89c8;&#x5668;&#x4e5f;&#x5b9e;&#x73b0;&#x4e86;&#x4e00;&#x5957;&#x7c7b;&#x4f3c;&#x7684;&#x673a;&#x5236;&#x6765;&#x63d0;&#x793a;&#x5f00;&#x53d1;&#x8005;&#x54ea;&#x4e9b;&#x62d2;&#x7edd;&#x8fd8;&#x6ca1;&#x6709;&#x88ab;&#x5904;&#x7406;\n\n&#x3010;&#x6d4f;&#x89c8;&#x5668;&#x73af;&#x5883;&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x3011;\n\n&#x3000;&#x3000;&#x6d4f;&#x89c8;&#x5668;&#x4e5f;&#x662f;&#x901a;&#x8fc7;&#x89e6;&#x53d1;&#x4e24;&#x4e2a;&#x4e8b;&#x4ef6;&#x6765;&#x8bc6;&#x522b;&#x672a;&#x5904;&#x7406;&#x7684;&#x62d2;&#x7edd;&#x7684;&#xff0c;&#x867d;&#x7136;&#x8fd9;&#x4e9b;&#x4e8b;&#x4ef6;&#x662f;&#x5728;window&#x5bf9;&#x8c61;&#x4e0a;&#x89e6;&#x53d1;&#x7684;&#xff0c;&#x4f46;&#x5b9e;&#x9645;&#x4e0a;&#x4e0e;Node.js&#x4e2d;&#x7684;&#x5b8c;&#x5168;&#x7b49;&#x6548;\n\n&#x3000;&#x3000;1&#x3001;unhandledrejection\n\n&#x3000;&#x3000;&#x5728;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x4e2d;&#xff0c;&#x5f53;promise&#x88ab;&#x62d2;&#x7edd;&#xff0c;&#x5e76;&#x4e14;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x65f6;&#x88ab;&#x8c03;&#x7528;\n\n&#x3000;&#x3000;2&#x3001;rejectionhandled\n\n&#x3000;&#x3000;&#x5728;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x540e;&#xff0c;&#x5f53;promise&#x88ab;&#x62d2;&#x7edd;&#xff0c;&#x5e76;&#x4e14;&#x6ca1;&#x6709;&#x63d0;&#x4f9b;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x65f6;&#x88ab;&#x8c03;&#x7528;\n\n&#x3000;&#x3000;&#x5728;Node.js&#x5b9e;&#x73b0;&#x4e2d;&#xff0c;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x63a5;&#x53d7;&#x591a;&#x4e2a;&#x72ec;&#x7acb;&#x53c2;&#x6570;&#xff1a;&#x800c;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#xff0c;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x7684;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"559,576"}},{"content":"<pre data-lines=\"577,582\"><code data-lines=\"577,582\">type  &#x4e8b;&#x4ef6;&#x540d;&#x79f0; (<span class=\"hljs-string\">&quot;unhandledrejection&quot;</span>&#x6216;<span class=\"hljs-string\">&quot;rejectionhandled&quot;</span>)\npromise &#x88ab;&#x62d2;&#x7edd;&#x7684;promise&#x5bf9;&#x8c61;\nreason &#x6765;&#x81ea;promise&#x7684;&#x62d2;&#x7edd;&#x503c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"577,582"}},{"content":"<pre data-lines=\"583,584\"><code>&#x3000;&#x3000;&#x6d4f;&#x89c8;&#x5668;&#x5b9e;&#x73b0;&#x4e2d;&#x7684;&#x53e6;&#x4e00;&#x5904;&#x4e0d;&#x540c;&#x662f;&#xff0c;&#x5728;&#x4e24;&#x4e2a;&#x4e8b;&#x4ef6;&#x4e2d;&#x90fd;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x62d2;&#x7edd;&#x503c;(reason)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"583,584"}},{"content":"<pre data-lines=\"587,601\"><code data-lines=\"587,601\">let rejected;\nwindow.onunhandledrejection = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(event.type); <span class=\"hljs-comment\">// &quot;unhandledrejection&quot;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(event.reason.message); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(rejected === event.promise); <span class=\"hljs-comment\">// true</span>\n};\nwindow.onrejectionhandled = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(event.type); <span class=\"hljs-comment\">// &quot;rejectionhandled&quot;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(event.reason.message); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(rejected === event.promise); <span class=\"hljs-comment\">// true</span>\n};\nrejected = Promise.reject(<span class=\"hljs-keyword\">new</span> Error(<span class=\"hljs-string\">&quot;Explosion!&quot;</span>));\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"587,601"}},{"content":"<pre data-lines=\"604,607\"><code>&#x3000;&#x3000;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x7528;DOM0&#x7ea7;&#x8bb0;&#x6cd5;&#x7684;onunhandledrejection&#x548c;onrejectionhandled&#x7ed9;&#x4e24;&#x4e2a;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x8d4b;&#x503c;&#xff0c;&#x5f53;&#x7136;&#x4e5f;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;addEventListener(&quot;unhandledrejection&quot;) &#x548c;addEventListener(&quot;rejectionhandled&quot;)&#xff0c;&#x6bcf;&#x4e2a;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x542b;&#x6709;&#x88ab;&#x62d2;&#x7edd;Promise&#x4fe1;&#x606f;&#x7684;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;type&#x3001;promise&#x548c;reason&#x5728;&#x8fd9;&#x4e24;&#x4e2a;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x5747;&#x53ef;&#x4f7f;&#x7528;\n\n&#x3000;&#x3000;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#xff0c;&#x8ddf;&#x8e2a;&#x672a;&#x5904;&#x7406;&#x62d2;&#x7edd;&#x7684;&#x4ee3;&#x7801;&#x4e5f;&#x4e0e;Node.js&#x4e2d;&#x7684;&#x975e;&#x5e38;&#x76f8;&#x4f3c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"604,607"}},{"content":"<pre data-lines=\"610,628\"><code data-lines=\"610,628\"><span class=\"hljs-keyword\">let</span> possiblyUnhandledRejections = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n<span class=\"hljs-comment\">// &#x5f53;&#x4e00;&#x4e2a;&#x62d2;&#x7edd;&#x672a;&#x88ab;&#x5904;&#x7406;&#xff0c;&#x5c06;&#x5176;&#x6dfb;&#x52a0;&#x5230; map</span>\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">onunhandledrejection</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">set</span>(event.<span class=\"hljs-property\">promise</span>, event.<span class=\"hljs-property\">reason</span>);\n};\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">onrejectionhandled</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">delete</span>(event.<span class=\"hljs-property\">promise</span>);\n};\n<span class=\"hljs-built_in\">setInterval</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">reason, promise</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(reason.<span class=\"hljs-property\">message</span> ? reason.<span class=\"hljs-property\">message</span> : reason);\n        <span class=\"hljs-comment\">// &#x505a;&#x70b9;&#x4e8b;&#x6765;&#x5904;&#x7406;&#x8fd9;&#x4e9b;&#x62d2;&#x7edd;</span>\n        <span class=\"hljs-title function_\">handleRejection</span>(promise, reason);\n    });\n    possiblyUnhandledRejections.<span class=\"hljs-title function_\">clear</span>();\n}, <span class=\"hljs-number\">60000</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"610,628"}},{"content":"<pre data-lines=\"631,632\"><code>&#x3000;&#x3000;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#x7684;&#x5b9e;&#x73b0;&#x4e0e;Node.js&#x4e2d;&#x7684;&#x51e0;&#x4e4e;&#x5b8c;&#x5168;&#x76f8;&#x540c;&#xff0c;&#x4e8c;&#x8005;&#x90fd;&#x662f;&#x7528;&#x540c;&#x6837;&#x7684;&#x65b9;&#x6cd5;&#x5c06;promise&#x53ca;&#x5176;&#x62d2;&#x7edd;&#x503c;&#x5b58;&#x50a8;&#x5728;Map&#x96c6;&#x5408;&#x4e2d;&#xff0c;&#x7136;&#x540e;&#x518d;&#x8fdb;&#x884c;&#x68c0;&#x7d22;&#x3002;&#x552f;&#x4e00;&#x7684;&#x533a;&#x522b;&#x662f;&#xff0c;&#x5728;&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x68c0;&#x7d22;&#x4fe1;&#x606f;&#x7684;&#x4f4d;&#x7f6e;&#x4e0d;&#x540c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"631,632"}}],"payload":{"tag":"h3","lines":"457,458"}},{"content":"&#x4e32;&#x8054;","children":[{"content":"<pre data-lines=\"637,640\"><code>&#x3000;&#x3000;&#x81f3;&#x6b64;&#xff0c;&#x770b;&#x8d77;&#x6765;&#x597d;&#x50cf;Promise&#x53ea;&#x662f;&#x5c06;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x548c;setTimeout()&#x51fd;&#x6570;&#x7ed3;&#x5408;&#x8d77;&#x6765;&#xff0c;&#x5e76;&#x5728;&#x6b64;&#x57fa;&#x7840;&#x4e0a;&#x505a;&#x4e86;&#x4e00;&#x4e9b;&#x6539;&#x8fdb;&#x3002;&#x4f46;Promise&#x6240;&#x80fd;&#x5b9e;&#x73b0;&#x7684;&#x8fdc;&#x8d85;&#x6211;&#x4eec;&#x76ee;&#x4e4b;&#x6240;&#x53ca;&#xff0c;&#x5c24;&#x5176;&#x662f;&#x5f88;&#x591a;&#x5c06;Promise&#x4e32;&#x8054;&#x8d77;&#x6765;&#x5b9e;&#x73b0;&#x66f4;&#x590d;&#x6742;&#x7684;&#x5f02;&#x6b65;&#x7279;&#x6027;&#x7684;&#x65b9;&#x6cd5;\n\n&#x3000;&#x3000;&#x6bcf;&#x6b21;&#x8c03;&#x7528;then()&#x65b9;&#x6cd5;&#x6216;catch()&#x65b9;&#x6cd5;&#x65f6;&#x5b9e;&#x9645;&#x4e0a;&#x521b;&#x5efa;&#x5e76;&#x8fd4;&#x56de;&#x4e86;&#x53e6;&#x4e00;&#x4e2a;Promise&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x7b2c;&#x4e00;&#x4e2a;Promise&#x5b8c;&#x6210;&#x6216;&#x88ab;&#x62d2;&#x7edd;&#x540e;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x624d;&#x4f1a;&#x88ab;&#x89e3;&#x51b3;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"637,640"}},{"content":"<pre data-lines=\"643,653\"><code data-lines=\"643,653\">let p1 = <span class=\"hljs-keyword\">new</span> Promise(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    resolve(<span class=\"hljs-number\">42</span>);\n});\np1.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value);\n}).then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Finished&quot;</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"643,653"}},{"content":"<pre data-lines=\"656,657\"><code>&#x3000;&#x3000;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x8f93;&#x51fa;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"656,657"}},{"content":"<pre data-lines=\"658,662\"><code data-lines=\"658,662\">42\nFinished\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"658,662"}},{"content":"<pre data-lines=\"663,664\"><code>&#x3000;&#x3000;&#x8c03;&#x7528;p1.then()&#x540e;&#x8fd4;&#x56de;&#x7b2c;&#x4e8c;&#x4e2a;Promise&#xff0c;&#x7d27;&#x63a5;&#x7740;&#x53c8;&#x8c03;&#x7528;&#x4e86;&#x5b83;&#x7684;then()&#x65b9;&#x6cd5;&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x7b2c;&#x4e00;&#x4e2a;Promise&#x88ab;&#x89e3;&#x51b3;&#x4e4b;&#x540e;&#x624d;&#x4f1a;&#x8c03;&#x7528;&#x7b2c;&#x4e8c;&#x4e2a;then()&#x65b9;&#x6cd5;&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;&#x5982;&#x679c;&#x5c06;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x62c6;&#x89e3;&#x5f00;&#xff0c;&#x770b;&#x8d77;&#x6765;&#x662f;&#x8fd9;&#x6837;&#x7684;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"663,664"}},{"content":"<pre data-lines=\"667,678\"><code data-lines=\"667,678\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = p1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value);\n})\np2.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Finished&quot;</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"667,678"}},{"content":"<pre data-lines=\"681,686\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x975e;&#x4e32;&#x8054;&#x7248;&#x672c;&#x7684;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x8c03;&#x7528;p1.then()&#x7684;&#x7ed3;&#x679c;&#x88ab;&#x5b58;&#x50a8;&#x5728;&#x4e86;p2&#x4e2d;&#xff0c;&#x7136;&#x540e;p2.then()&#x88ab;&#x8c03;&#x7528;&#x6765;&#x6dfb;&#x52a0;&#x6700;&#x7ec8;&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n\n&#x3010;&#x6355;&#x83b7;&#x9519;&#x8bef;&#x3011;\n\n&#x3000;&#x3000;&#x5728;&#x4e4b;&#x524d;&#x7684;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6216;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x53ef;&#x80fd;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;&#x800c;Promise&#x94fe;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x6355;&#x83b7;&#x8fd9;&#x4e9b;&#x9519;&#x8bef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"681,686"}},{"content":"<pre data-lines=\"689,699\"><code data-lines=\"689,699\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\np1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Boom!&quot;</span>);\n}).<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(error.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Boom!&quot;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"689,699"}},{"content":"<pre data-lines=\"702,703\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;p1&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x629b;&#x51fa;&#x4e86;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#xff0c;&#x94fe;&#x5f0f;&#x8c03;&#x7528;&#x7b2c;&#x4e8c;&#x4e2a;Promise&#x7684;catch()&#x65b9;&#x6cd5;&#x540e;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x5b83;&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x63a5;&#x6536;&#x8fd9;&#x4e2a;&#x9519;&#x8bef;&#x3002;&#x5982;&#x679c;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x629b;&#x51fa;&#x9519;&#x8bef;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x76f8;&#x540c;&#x7684;&#x65b9;&#x5f0f;&#x63a5;&#x6536;&#x5230;&#x8fd9;&#x4e2a;&#x9519;&#x8bef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"702,703"}},{"content":"<pre data-lines=\"706,717\"><code data-lines=\"706,717\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Explosion!&quot;</span>);\n});\np1.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(error.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Explosion!&quot;</span>\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Boom!&quot;</span>);\n}).<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(error.<span class=\"hljs-property\">message</span>); <span class=\"hljs-comment\">// &quot;Boom!&quot;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"706,717"}},{"content":"<pre data-lines=\"720,727\"><code>&#x3000;&#x3000;&#x6b64;&#x5904;&#x7684;&#x6267;&#x884c;&#x5668;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x5e76;&#x89e6;&#x53d1;Promise p1&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#xff0c;&#x8fd9;&#x4e2a;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x53c8;&#x629b;&#x51fa;&#x53e6;&#x5916;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#xff0c;&#x5e76;&#x4e14;&#x88ab;&#x7b2c;&#x4e8c;&#x4e2a;Promise&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6355;&#x83b7;&#x3002;&#x94fe;&#x5f0f;Promise&#x8c03;&#x7528;&#x53ef;&#x4ee5;&#x611f;&#x77e5;&#x5230;&#x94fe;&#x4e2d;&#x5176;&#x4ed6;Promise&#x7684;&#x9519;&#x8bef;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x52a1;&#x5fc5;&#x5728;Promise&#x94fe;&#x7684;&#x672b;&#x5c3e;&#x7559;&#x6709;&#x4e00;&#x4e2a;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4ee5;&#x786e;&#x4fdd;&#x80fd;&#x591f;&#x6b63;&#x786e;&#x5904;&#x7406;&#x6240;&#x6709;&#x53ef;&#x80fd;&#x53d1;&#x751f;&#x7684;&#x9519;&#x8bef;\n\n&#x3010;Promise&#x94fe;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x3011;\n\n&#x3000;&#x3000;Promise&#x94fe;&#x7684;&#x53e6;&#x4e00;&#x4e2a;&#x91cd;&#x8981;&#x7279;&#x6027;&#x662f;&#x53ef;&#x4ee5;&#x7ed9;&#x4e0b;&#x6e38;Promise&#x4f20;&#x9012;&#x6570;&#x636e;&#xff0c;&#x5df2;&#x7ecf;&#x77e5;&#x9053;&#x4e86;&#x4ece;&#x6267;&#x884c;&#x5668;resolve()&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5230;Promise&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x6570;&#x636e;&#x4f20;&#x9012;&#x8fc7;&#x7a0b;&#xff0c;&#x5982;&#x679c;&#x5728;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x6307;&#x5b9a;&#x4e00;&#x4e2a;&#x8fd4;&#x56de;&#x503c;&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x6cbf;&#x7740;&#x8fd9;&#x6761;&#x94fe;&#x7ee7;&#x7eed;&#x4f20;&#x9012;&#x6570;&#x636e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"720,727"}},{"content":"<pre data-lines=\"730,741\"><code data-lines=\"730,741\">let p1 = <span class=\"hljs-keyword\">new</span> Promise(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    resolve(<span class=\"hljs-number\">42</span>);\n});\np1.then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value); <span class=\"hljs-comment\">// &quot;42&quot;</span>\n    <span class=\"hljs-keyword\">return</span> value + <span class=\"hljs-number\">1</span>;\n}).then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value); <span class=\"hljs-comment\">// &quot;43&quot;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"730,741"}},{"content":"<pre data-lines=\"744,747\"><code>&#x3000;&#x3000;&#x6267;&#x884c;&#x5668;&#x4f20;&#x5165;&#x7684;value&#x4e3a;42&#xff0c;p1&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6267;&#x884c;&#x540e;&#x8fd4;&#x56de;value+1&#x4e5f;&#x5c31;&#x662f;43&#x3002;&#x8fd9;&#x4e2a;&#x503c;&#x968f;&#x540e;&#x88ab;&#x4f20;&#x7ed9;&#x7b2c;&#x4e8c;&#x4e2a;Promise&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5e76;&#x8f93;&#x51fa;&#x5230;&#x63a7;&#x5236;&#x53f0;\n\n&#x3000;&#x3000;&#x5728;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x4e5f;&#x53ef;&#x4ee5;&#x505a;&#x76f8;&#x540c;&#x7684;&#x4e8b;&#x60c5;&#xff0c;&#x5f53;&#x5b83;&#x88ab;&#x8c03;&#x7528;&#x65f6;&#x53ef;&#x4ee5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x503c;&#xff0c;&#x7136;&#x540e;&#x7528;&#x8fd9;&#x4e2a;&#x503c;&#x5b8c;&#x6210;&#x94fe;&#x6761;&#x4e2d;&#x540e;&#x7eed;&#x7684;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"744,747"}},{"content":"<pre data-lines=\"750,763\"><code data-lines=\"750,763\">let p1 = <span class=\"hljs-keyword\">new</span> Promise(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    reject(<span class=\"hljs-number\">42</span>);\n});\np1.<span class=\"hljs-keyword\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value); <span class=\"hljs-comment\">// &quot;42&quot;</span>\n    <span class=\"hljs-keyword\">return</span> value + <span class=\"hljs-number\">1</span>;\n}).then(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(value); <span class=\"hljs-comment\">// &quot;43&quot;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"750,763"}},{"content":"<pre data-lines=\"766,771\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x6267;&#x884c;&#x5668;&#x8c03;&#x7528;reject()&#x65b9;&#x6cd5;&#x5411;Promise&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4f20;&#x5165;&#x503c;42&#xff0c;&#x6700;&#x7ec8;&#x8fd4;&#x56de;value+1&#x3002;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x8fd4;&#x56de;&#x7684;&#x503c;&#x4ecd;&#x53ef;&#x7528;&#x5728;&#x4e0b;&#x4e00;&#x4e2a;Promise&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#xff0c;&#x5728;&#x5fc5;&#x8981;&#x65f6;&#xff0c;&#x5373;&#x4f7f;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;Promise&#x5931;&#x8d25;&#x4e5f;&#x80fd;&#x6062;&#x590d;&#x6574;&#x6761;&#x94fe;&#x7684;&#x6267;&#x884c;\n\n&#x3010;&#x5728;Promise&#x94fe;&#x4e2d;&#x8fd4;&#x56de;Promise&#x3011;\n\n&#x3000;&#x3000;&#x5728;Promise&#x95f4;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x5b8c;&#x6210;&#x548c;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x8fd4;&#x56de;&#x7684;&#x539f;&#x59cb;&#x503c;&#x6765;&#x4f20;&#x9012;&#x6570;&#x636e;&#xff0c;&#x4f46;&#x5982;&#x679c;&#x8fd4;&#x56de;&#x7684;&#x662f;Promise&#x5bf9;&#x8c61;&#xff0c;&#x4f1a;&#x901a;&#x8fc7;&#x4e00;&#x4e2a;&#x989d;&#x5916;&#x7684;&#x6b65;&#x9aa4;&#x6765;&#x786e;&#x5b9a;&#x4e0b;&#x4e00;&#x6b65;&#x600e;&#x4e48;&#x8d70;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"766,771"}},{"content":"<pre data-lines=\"774,790\"><code data-lines=\"774,790\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">43</span>);\n});\np1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n    <span class=\"hljs-keyword\">return</span> p2;\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 43</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"774,790"}},{"content":"<pre data-lines=\"793,796\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;p1&#x7f16;&#x6392;&#x7684;&#x4efb;&#x52a1;&#x89e3;&#x51b3;&#x5e76;&#x4f20;&#x5165;42&#xff0c;&#x7136;&#x540e;p1&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5df2;&#x89e3;&#x51b3;&#x72b6;&#x6001;&#x7684;Promise p2&#xff0c;&#x7531;&#x4e8e;p2&#x5df2;&#x7ecf;&#x88ab;&#x5b8c;&#x6210;&#xff0c;&#x56e0;&#x6b64;&#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x88ab;&#x8c03;&#x7528;&#x3002;&#x5982;&#x679c;p2&#x88ab;&#x62d2;&#x7edd;&#xff0c;&#x5219;&#x8c03;&#x7528;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n\n&#x3000;&#x3000;&#x5173;&#x4e8e;&#x8fd9;&#x4e2a;&#x6a21;&#x5f0f;&#xff0c;&#x6700;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x88ab;&#x6dfb;&#x52a0;&#x5230;&#x4e86;&#x7b2c;&#x4e09;&#x4e2a;Promise&#x800c;&#x4e0d;&#x662f;p2\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"793,796"}},{"content":"<pre data-lines=\"799,816\"><code data-lines=\"799,816\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">43</span>);\n});\n<span class=\"hljs-keyword\">let</span> p3 = p1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n    <span class=\"hljs-keyword\">return</span> p2;\n});\np3.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 43</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"799,816"}},{"content":"<pre data-lines=\"819,820\"><code>&#x3000;&#x3000;&#x5f88;&#x660e;&#x663e;&#x7684;&#x662f;&#xff0c;&#x6b64;&#x5904;&#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x88ab;&#x6dfb;&#x52a0;&#x5230;p3&#x800c;&#x975e;p2&#xff0c;&#x8fd9;&#x4e2a;&#x5dee;&#x5f02;&#x867d;&#x5c0f;&#x4f46;&#x975e;&#x5e38;&#x91cd;&#x8981;&#xff0c;&#x5982;&#x679c;p2&#x88ab;&#x62d2;&#x7edd;&#x90a3;&#x4e48;&#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5c06;&#x4e0d;&#x4f1a;&#x88ab;&#x8c03;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"819,820"}},{"content":"<pre data-lines=\"823,839\"><code data-lines=\"823,839\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-number\">43</span>);\n});\np1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n    <span class=\"hljs-keyword\">return</span> p2;\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// &#x6c38;&#x4e0d;&#x88ab;&#x8c03;&#x7528;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"823,839"}},{"content":"<pre data-lines=\"842,843\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x7531;&#x4e8e;p2&#x88ab;&#x62d2;&#x7edd;&#x4e86;&#xff0c;&#x56e0;&#x6b64;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6c38;&#x8fdc;&#x4e0d;&#x4f1a;&#x88ab;&#x8c03;&#x7528;&#x3002;&#x4e0d;&#x7ba1;&#x600e;&#x6837;&#xff0c;&#x8fd8;&#x662f;&#x53ef;&#x4ee5;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"842,843"}},{"content":"<pre data-lines=\"846,862\"><code data-lines=\"846,862\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-number\">43</span>);\n});\np1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x7b2c;&#x4e00;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n    <span class=\"hljs-keyword\">return</span> p2;\n}).<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-comment\">// &#x62d2;&#x7edd;&#x5904;&#x7406;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 43</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"846,862"}},{"content":"<pre data-lines=\"865,868\"><code>&#x3000;&#x3000;p2&#x88ab;&#x62d2;&#x7edd;&#x540e;&#xff0c;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x88ab;&#x8c03;&#x7528;&#x5e76;&#x4f20;&#x5165;p2&#x7684;&#x62d2;&#x7edd;&#x503c;43\n\n&#x3000;&#x3000;&#x5728;&#x5b8c;&#x6210;&#x6216;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x8fd4;&#x56de;Thenable&#x5bf9;&#x8c61;&#x4e0d;&#x4f1a;&#x6539;&#x53d8;Promise&#x6267;&#x884c;&#x5668;&#x7684;&#x6267;&#x884c;&#x65f6;&#x673a;&#xff0c;&#x5148;&#x5b9a;&#x4e49;&#x7684;Promise&#x7684;&#x6267;&#x884c;&#x5668;&#x5148;&#x6267;&#x884c;&#xff0c;&#x540e;&#x5b9a;&#x4e49;&#x7684;&#x540e;&#x6267;&#x884c;&#xff0c;&#x4ee5;&#x6b64;&#x7c7b;&#x63a8;&#x3002;&#x8fd4;&#x56de;Thenable&#x5bf9;&#x8c61;&#x4ec5;&#x5141;&#x8bb8;&#x4e3a;&#x8fd9;&#x4e9b;promise&#x7ed3;&#x679c;&#x5b9a;&#x4e49;&#x989d;&#x5916;&#x7684;&#x54cd;&#x5e94;&#x3002;&#x5728;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x521b;&#x5efa;&#x65b0;&#x7684;Promise&#x53ef;&#x4ee5;&#x63a8;&#x8fdf;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x6267;&#x884c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"865,868"}},{"content":"<pre data-lines=\"871,886\"><code data-lines=\"871,886\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\np1.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n    <span class=\"hljs-comment\">// &#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65b0;&#x7684; promise</span>\n    <span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n        <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">43</span>);\n    });\n    <span class=\"hljs-keyword\">return</span> p2\n}).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 43</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"871,886"}},{"content":"<pre data-lines=\"889,890\"><code>&#x3000;&#x3000;&#x5728;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x5728;p1&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x91cc;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x65b0;&#x7684;Promise&#xff0c;&#x76f4;&#x5230;p2&#x88ab;&#x5b8c;&#x6210;&#x624d;&#x4f1a;&#x6267;&#x884c;&#x7b2c;&#x4e8c;&#x4e2a;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;&#x5982;&#x679c;&#x60f3;&#x5728;&#x4e00;&#x4e2a;Promise&#x88ab;&#x89e3;&#x51b3;&#x540e;&#x89e6;&#x53d1;&#x53e6;&#x4e2a;promise&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x6a21;&#x5f0f;&#x4f1a;&#x5f88;&#x6709;&#x5e2e;&#x52a9;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"889,890"}}],"payload":{"tag":"h3","lines":"635,636"}},{"content":"&#x54cd;&#x5e94;&#x591a;&#x4e2a;","children":[{"content":"<pre data-lines=\"895,900\"><code>&#x3000;&#x3000;&#x5982;&#x679c;&#x60f3;&#x901a;&#x8fc7;&#x76d1;&#x542c;&#x591a;&#x4e2a;Promise&#x6765;&#x51b3;&#x5b9a;&#x4e0b;&#x4e00;&#x6b65;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;ES6&#x63d0;&#x4f9b;&#x7684;Promise.all()&#x548c;Promise.race()&#x8fd9;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;\n\n&#x3010;Promise.all()&#x3011;\n\n&#x3000;&#x3000;Promise.all()&#x65b9;&#x6cd5;&#x53ea;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x5e76;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;Promise&#xff0c;&#x8be5;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x542b;&#x6709;&#x591a;&#x4e2a;&#x53d7;&#x76d1;&#x89c6;Promise&#x7684;&#x53ef;&#x8fed;&#x4ee3;&#x5bf9;&#x8c61;(&#x5982;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;)&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x53ef;&#x8fed;&#x4ee3;&#x5bf9;&#x8c61;&#x4e2d;&#x6240;&#x6709;Promise&#x90fd;&#x88ab;&#x89e3;&#x51b3;&#x540e;&#x8fd4;&#x56de;&#x7684;Promise&#x624d;&#x4f1a;&#x88ab;&#x89e3;&#x51b3;&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x53ef;&#x8fed;&#x4ee3;&#x5bf9;&#x8c61;&#x4e2d;&#x6240;&#x6709;Promise&#x90fd;&#x88ab;&#x5b8c;&#x6210;&#x540e;&#x8fd4;&#x56de;&#x7684;Promise&#x624d;&#x4f1a;&#x88ab;&#x5b8c;&#x6210;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"895,900"}},{"content":"<pre data-lines=\"903,921\"><code data-lines=\"903,921\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">43</span>);\n});\n<span class=\"hljs-keyword\">let</span> p3 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">44</span>);\n});\n<span class=\"hljs-keyword\">let</span> p4 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">all</span>([p1, p2, p3]);\np4.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(value)); <span class=\"hljs-comment\">// true</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value[<span class=\"hljs-number\">0</span>]); <span class=\"hljs-comment\">// 42</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value[<span class=\"hljs-number\">1</span>]); <span class=\"hljs-comment\">// 43</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value[<span class=\"hljs-number\">2</span>]); <span class=\"hljs-comment\">// 44</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"903,921"}},{"content":"<pre data-lines=\"924,927\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6bcf;&#x4e2a;Promise&#x89e3;&#x51b3;&#x65f6;&#x90fd;&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x6570;&#x5b57;&#xff0c;&#x8c03;&#x7528;Promise.all()&#x65b9;&#x6cd5;&#x521b;&#x5efa;Promise p4&#xff0c;&#x6700;&#x7ec8;&#x5f53;Promise p1&#x3001;p2&#x548c;p3&#x90fd;&#x5904;&#x4e8e;&#x5b8c;&#x6210;&#x72b6;&#x6001;&#x540e;p4&#x624d;&#x88ab;&#x5b8c;&#x6210;&#x3002;&#x4f20;&#x5165;p4&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;&#x7ed3;&#x679c;&#x662f;&#x4e00;&#x4e2a;&#x5305;&#x542b;&#x6bcf;&#x4e2a;&#x89e3;&#x51b3;&#x503c;(42.43&#x548c;44)&#x7684;&#x6570;&#x7ec4;&#xff0c;&#x8fd9;&#x4e9b;&#x503c;&#x6309;&#x7167;Promise&#x88ab;&#x89e3;&#x51b3;&#x7684;&#x987a;&#x5e8f;&#x5b58;&#x50a8;&#xff0c;&#x6240;&#x4ee5;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x6bcf;&#x4e2a;&#x7ed3;&#x679c;&#x6765;&#x5339;&#x914d;&#x5bf9;&#x5e94;&#x7684;Promise\n\n&#x3000;&#x3000;&#x6240;&#x6709;&#x4f20;&#x5165;Promise.all()&#x65b9;&#x6cd5;&#x7684;Promise&#x53ea;&#x8981;&#x6709;&#x4e00;&#x4e2a;&#x88ab;&#x62d2;&#x7edd;&#xff0c;&#x90a3;&#x4e48;&#x8fd4;&#x56de;&#x7684;Promise&#x6ca1;&#x7b49;&#x6240;&#x6709;Promise&#x90fd;&#x5b8c;&#x6210;&#x5c31;&#x7acb;&#x5373;&#x88ab;&#x62d2;&#x7edd;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"924,927"}},{"content":"<pre data-lines=\"930,946\"><code data-lines=\"930,946\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-number\">43</span>);\n});\n<span class=\"hljs-keyword\">let</span> p3 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">44</span>);\n});\n<span class=\"hljs-keyword\">let</span> p4 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">all</span>([p1, p2, p3]);\np4.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(value)) <span class=\"hljs-comment\">// false</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 43</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"930,946"}},{"content":"<pre data-lines=\"949,956\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;p2&#x88ab;&#x62d2;&#x7edd;&#x5e76;&#x4f20;&#x5165;&#x503c;43&#xff0c;&#x6ca1;&#x7b49;p1&#x6216;p3&#x7ed3;&#x675f;&#x6267;&#x884c;&#xff0c;p4&#x7684;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5c31;&#x7acb;&#x5373;&#x88ab;&#x8c03;&#x7528;&#x3002;(p1&#x548c;p3&#x7684;&#x6267;&#x884c;&#x8fc7;&#x7a0b;&#x4f1a;&#x7ed3;&#x675f;&#xff0c;&#x53ea;&#x662f;p4&#x5e76;&#x672a;&#x7b49;&#x5f85;)\n\n&#x3000;&#x3000;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x603b;&#x662f;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x503c;&#x800c;&#x975e;&#x6570;&#x7ec4;&#xff0c;&#x8be5;&#x503c;&#x6765;&#x81ea;&#x88ab;&#x62d2;&#x7edd;Promise&#x7684;&#x62d2;&#x7edd;&#x503c;&#x3002;&#x5728;&#x672c;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x4f20;&#x5165;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x7684;43&#x8868;&#x793a;&#x8be5;&#x62d2;&#x7edd;&#x6765;&#x81ea;p2\n\n&#x3010;Promise.race()&#x3011;\n\n&#x3000;&#x3000;Promise.race()&#x65b9;&#x6cd5;&#x76d1;&#x542c;&#x591a;&#x4e2a;Promise&#x7684;&#x65b9;&#x6cd5;&#x7a0d;&#x6709;&#x4e0d;&#x540c;&#xff1a;&#x5b83;&#x4e5f;&#x63a5;&#x53d7;&#x542b;&#x591a;&#x4e2a;&#x53d7;&#x76d1;&#x89c6;Promise&#x7684;&#x53ef;&#x8fed;&#x4ee3;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x552f;&#x4e00;&#x53c2;&#x6570;&#x5e76;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;Promise&#xff0c;&#x4f46;&#x53ea;&#x8981;&#x6709;&#x4e00;&#x4e2a;Promise&#x88ab;&#x89e3;&#x51b3;&#x8fd4;&#x56de;&#x7684;Promise&#x5c31;&#x88ab;&#x89e3;&#x51b3;&#xff0c;&#x65e0;&#x987b;&#x7b49;&#x5230;&#x6240;&#x6709;Promise&#x90fd;&#x88ab;&#x5b8c;&#x6210;&#x3002;&#x4e00;&#x65e6;&#x6570;&#x7ec4;&#x4e2d;&#x7684;&#x67d0;&#x4e2a;Promise&#x88ab;&#x5b8c;&#x6210;&#xff0c;Promise.race()&#x65b9;&#x6cd5;&#x4e5f;&#x4f1a;&#x50cf;Promise.all()&#x65b9;&#x6cd5;&#x4e00;&#x6837;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x7279;&#x5b9a;&#x7684;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"949,956"}},{"content":"<pre data-lines=\"959,972\"><code data-lines=\"959,972\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">43</span>);\n});\n<span class=\"hljs-keyword\">let</span> p3 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">44</span>);\n});\n<span class=\"hljs-keyword\">let</span> p4 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">race</span>([p1, p2, p3]);\np4.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"959,972"}},{"content":"<pre data-lines=\"975,976\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x6bb5;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;p1&#x521b;&#x5efa;&#x65f6;&#x4fbf;&#x5904;&#x4e8e;&#x5df2;&#x5b8c;&#x6210;&#x72b6;&#x6001;&#xff0c;&#x5176;&#x4ed6;Promise&#x7528;&#x4e8e;&#x7f16;&#x6392;&#x4efb;&#x52a1;&#x3002;&#x968f;&#x540e;&#xff0c;p4&#x7684;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x88ab;&#x8c03;&#x7528;&#x5e76;&#x4f20;&#x5165;&#x503c;42&#xff0c;&#x5176;&#x4ed6;Promise&#x5219;&#x88ab;&#x5ffd;&#x7565;&#x3002;&#x5b9e;&#x9645;&#x4e0a;&#xff0c;&#x4f20;&#x7ed9;Promise.race()&#x65b9;&#x6cd5;&#x7684;Promise&#x4f1a;&#x8fdb;&#x884c;&#x7ade;&#x9009;&#xff0c;&#x4ee5;&#x51b3;&#x51fa;&#x54ea;&#x4e00;&#x4e2a;&#x5148;&#x88ab;&#x89e3;&#x51b3;&#xff0c;&#x5982;&#x679c;&#x5148;&#x89e3;&#x51b3;&#x7684;&#x662f;&#x5df2;&#x5b8c;&#x6210;Promise&#xff0c;&#x5219;&#x8fd4;&#x56de;&#x5df1;&#x5b8c;&#x6210;Promise&#xff1b;&#x5982;&#x679c;&#x5148;&#x89e3;&#x51b3;&#x7684;&#x662f;&#x5df2;&#x62d2;&#x7edd;Promise&#xff0c;&#x5219;&#x8fd4;&#x56de;&#x5df2;&#x62d2;&#x7edd;Promise\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"975,976"}},{"content":"<pre data-lines=\"979,992\"><code data-lines=\"979,992\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">reject</span>(<span class=\"hljs-number\">43</span>);\n<span class=\"hljs-keyword\">let</span> p3 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">44</span>);\n});\n<span class=\"hljs-keyword\">let</span> p4 = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">race</span>([p1, p2, p3]);\np4.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 43</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"979,992"}},{"content":"<pre data-lines=\"995,996\"><code>&#x3000;&#x3000;&#x6b64;&#x65f6;&#xff0c;&#x7531;&#x4e8e;p2&#x5df1;&#x5904;&#x4e8e;&#x88ab;&#x62d2;&#x7edd;&#x72b6;&#x6001;&#xff0c;&#x56e0;&#x800c;&#x5f53;Promise.race()&#x65b9;&#x6cd5;&#x88ab;&#x8c03;&#x7528;&#x65f6;p4&#x4e5f;&#x88ab;&#x62d2;&#x7edd;&#x4e86;&#xff0c;&#x5c3d;&#x7ba1;p1&#x548c;p3&#x6700;&#x7ec8;&#x88ab;&#x5b8c;&#x6210;&#xff0c;&#x4f46;&#x7531;&#x4e8e;&#x662f;&#x53d1;&#x751f;&#x5728;p2&#x88ab;&#x62d2;&#x540e;&#xff0c;&#x56e0;&#x6b64;&#x5b83;&#x4eec;&#x7684;&#x7ed3;&#x679c;&#x88ab;&#x5ffd;&#x7565;&#x6389;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"995,996"}}],"payload":{"tag":"h3","lines":"893,894"}},{"content":"&#x7ee7;&#x627f;","children":[{"content":"<pre data-lines=\"1001,1002\"><code>&#x3000;&#x3000;Promise&#x4e0e;&#x5176;&#x4ed6;&#x5185;&#x5efa;&#x7c7b;&#x578b;&#x4e00;&#x6837;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x4f5c;&#x4e3a;&#x57fa;&#x7c7b;&#x6d3e;&#x751f;&#x5176;&#x4ed6;&#x7c7b;&#xff0c;&#x6240;&#x4ee5;&#x53ef;&#x4ee5;&#x5b9a;&#x4e49;&#x81ea;&#x5df1;&#x7684;Promise&#x53d8;&#x91cf;&#x6765;&#x6269;&#x5c55;&#x5185;&#x5efa;Promise&#x7684;&#x529f;&#x80fd;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5047;&#x8bbe;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65e2;&#x652f;&#x6301;then()&#x65b9;&#x6cd5;&#x548c;catch()&#x65b9;&#x6cd5;&#x53c8;&#x652f;&#x6301;success()&#x65b9;&#x6cd5;&#x548c;failure()&#x65b9;&#x6cd5;&#x7684;Promise&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x8fd9;&#x6837;&#x521b;&#x5efa;&#x8be5;Promise&#x7c7b;&#x578b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1001,1002"}},{"content":"<pre data-lines=\"1005,1024\"><code data-lines=\"1005,1024\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyPromise</span> <span class=\"hljs-variable\">extends</span> <span class=\"hljs-title class_\">Promise</span> {\n    <span class=\"hljs-comment\">// &#x4f7f;&#x7528;&#x9ed8;&#x8ba4;&#x6784;&#x9020;&#x5668;</span>\n    <span class=\"hljs-title function_\">success</span>(<span class=\"hljs-params\">resolve</span>, <span class=\"hljs-params\">reject</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">then</span>(<span class=\"hljs-variable\">resolve</span>, <span class=\"hljs-variable\">reject</span>);\n}\n    <span class=\"hljs-title function_\">failure</span>(<span class=\"hljs-params\">reject</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">catch</span>(<span class=\"hljs-variable\">reject</span>);\n    }\n}\n<span class=\"hljs-variable\">let</span> <span class=\"hljs-variable\">promise</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-variable\">new</span> <span class=\"hljs-title class_\">MyPromise</span>(<span class=\"hljs-title function_\">function</span>(<span class=\"hljs-params\">resolve</span>, <span class=\"hljs-params\">reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-variable\">promise</span>.<span class=\"hljs-property\">success</span>(<span class=\"hljs-title function_\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable\">console</span>.<span class=\"hljs-property\">log</span>(<span class=\"hljs-variable\">value</span>); <span class=\"hljs-comment\">// 42</span>\n}).<span class=\"hljs-property\">failure</span>(<span class=\"hljs-title function_\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable\">console</span>.<span class=\"hljs-property\">log</span>(<span class=\"hljs-variable\">value</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1005,1024"}},{"content":"<pre data-lines=\"1027,1034\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x6d3e;&#x751f;&#x81ea;Promise&#x7684;MyPromise&#x6269;&#x5c55;&#x4e86;&#x53e6;&#x5916;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;&#x6a21;&#x4eff;resolve()&#x7684;success()&#x65b9;&#x6cd5;&#x4ee5;&#x53ca;&#x6a21;&#x4eff;reject()&#x7684;failure()&#x65b9;&#x6cd5;\n\n&#x3000;&#x3000;&#x8fd9;&#x4e24;&#x4e2a;&#x65b0;&#x589e;&#x65b9;&#x6cd5;&#x90fd;&#x901a;&#x8fc7;this&#x6765;&#x8c03;&#x7528;&#x5b83;&#x6a21;&#x4eff;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x6d3e;&#x751f;Promise&#x4e0e;&#x5185;&#x5efa;Promise&#x7684;&#x529f;&#x80fd;&#x4e00;&#x6837;&#xff0c;&#x53ea;&#x4e0d;&#x8fc7;&#x591a;&#x4e86;success()&#x548c;failure()&#x8fd9;&#x4e24;&#x4e2a;&#x53ef;&#x4ee5;&#x8c03;&#x7528;&#x7684;&#x65b9;&#x6cd5;\n\n&#x3000;&#x3000;&#x7531;&#x4e8e;&#x9759;&#x6001;&#x65b9;&#x6cd5;&#x4f1a;&#x88ab;&#x7ee7;&#x627f;&#xff0c;&#x56e0;&#x6b64;&#x6d3e;&#x751f;&#x7684;Promise&#x4e5f;&#x62e5;&#x6709;MyPromise.resolve()&#x3001;MyPromise.reject()&#x3001;MyPromise.race()&#x548c;MyPromise. all() &#x8fd9; 4 &#x4e2a;&#x65b9;&#x6cd5;&#xff0c;&#x540e;&#x4e8c;&#x8005;&#x4e0e;&#x5185;&#x5efa;&#x65b9;&#x6cd5;&#x5b8c;&#x5168;&#x4e00;&#x81f4;&#xff0c;&#x800c;&#x524d;&#x4e8c;&#x8005;&#x5374;&#x7a0d;&#x6709;&#x4e0d;&#x540c;\n\n&#x3000;&#x3000;&#x7531;&#x4e8e;MyPromise.resolve()&#x65b9;&#x6cd5;&#x548c;MyPromise.reject()&#x65b9;&#x6cd5;&#x901a;&#x8fc7;Symbol.species&#x5c5e;&#x6027;&#x6765;&#x51b3;&#x5b9a;&#x8fd4;&#x56de;Promise&#x7684;&#x7c7b;&#x578b;&#xff0c;&#x6545;&#x8c03;&#x7528;&#x8fd9;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;&#x65f6;&#x65e0;&#x8bba;&#x4f20;&#x5165;&#x4ec0;&#x4e48;&#x503c;&#x90fd;&#x4f1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;MyPromise&#x7684;&#x5b9e;&#x4f8b;&#x3002;&#x5982;&#x679c;&#x5c06;&#x5185;&#x5efa;Promise&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#x5176;&#x4ed6;&#x65b9;&#x6cd5;&#xff0c;&#x5219;&#x8fd9;&#x4e2a;Promise&#x5c06;&#x88ab;&#x89e3;&#x51b3;&#x6216;&#x62d2;&#x7edd;&#xff0c;&#x7136;&#x540e;&#x8be5;&#x65b9;&#x6cd5;&#x5c06;&#x4f1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x65b0;&#x7684;MyPromise&#xff0c;&#x4e8e;&#x662f;&#x5c31;&#x53ef;&#x4ee5;&#x7ed9;&#x5b83;&#x7684;&#x6210;&#x529f;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x53ca;&#x5931;&#x8d25;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x8d4b;&#x503c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1027,1034"}},{"content":"<pre data-lines=\"1037,1047\"><code data-lines=\"1037,1047\"><span class=\"hljs-keyword\">let</span> p1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n    <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-number\">42</span>);\n});\n<span class=\"hljs-keyword\">let</span> p2 = <span class=\"hljs-title class_\">MyPromise</span>.<span class=\"hljs-title function_\">resolve</span>(p1);\np2.<span class=\"hljs-title function_\">success</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(value); <span class=\"hljs-comment\">// 42</span>\n});\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(p2 <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">MyPromise</span>); <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1037,1047"}},{"content":"<pre data-lines=\"1050,1053\"><code>&#x3000;&#x3000;&#x8fd9;&#x91cc;&#x7684;p1&#x662f;&#x4e00;&#x4e2a;&#x5185;&#x5efa;Promise&#xff0c;&#x88ab;&#x4f20;&#x5165;MyPromise.resolve()&#x65b9;&#x6cd5;&#x540e;&#x5f97;&#x5230;&#x7ed3;&#x679c;p2&#xff0c;&#x5b83;&#x662f;MyPromise&#x7684;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;&#xff0c;&#x6765;&#x81ea;p1&#x7684;&#x89e3;&#x51b3;&#x503c;&#x88ab;&#x4f20;&#x5165;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n\n&#x3000;&#x3000;&#x4f20;&#x5165;MyPromise.resolve()&#x65b9;&#x6cd5;&#x6216;MyPromise.reject()&#x65b9;&#x6cd5;&#x7684;MyPromise&#x5b9e;&#x4f8b;&#x672a;&#x7ecf;&#x89e3;&#x51b3;&#x4fbf;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#x3002;&#x5728;&#x5176;&#x4ed6;&#x65b9;&#x9762;&#xff0c;&#x8fd9;&#x4e24;&#x4e2a;&#x65b9;&#x6cd5;&#x7684;&#x884c;&#x4e3a;&#x4e0e;Promise.resolve()&#x548c;Promise.reject()&#x5f88;&#x50cf;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1050,1053"}}],"payload":{"tag":"h3","lines":"999,1000"}},{"content":"&#x5f02;&#x6b65;","children":[{"content":"<pre data-lines=\"1058,1059\"><code>&#x3000;&#x3000;&#x4e4b;&#x524d;&#xff0c;&#x4ecb;&#x7ecd;&#x8fc7;&#x751f;&#x6210;&#x5668;&#x5e76;&#x5c55;&#x793a;&#x4e86;&#x5982;&#x4f55;&#x5728;&#x5f02;&#x6b65;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x4e2d;&#x4f7f;&#x7528;&#x5b83;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1058,1059"}},{"content":"<pre data-lines=\"1062,1104\"><code data-lines=\"1062,1104\"><span class=\"hljs-keyword\">let</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;fs&quot;</span>);\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">taskDef</span>) {\n    <span class=\"hljs-comment\">// &#x521b;&#x5efa;&#x8fed;&#x4ee3;&#x5668;&#xff0c;&#x8ba9;&#x5b83;&#x5728;&#x522b;&#x5904;&#x53ef;&#x7528;</span>\n    <span class=\"hljs-keyword\">let</span> task = <span class=\"hljs-title function_\">taskDef</span>();\n    <span class=\"hljs-comment\">// &#x5f00;&#x59cb;&#x4efb;&#x52a1;</span>\n    <span class=\"hljs-keyword\">let</span> result = task.<span class=\"hljs-title function_\">next</span>();\n    <span class=\"hljs-comment\">// &#x9012;&#x5f52;&#x4f7f;&#x7528;&#x51fd;&#x6570;&#x6765;&#x4fdd;&#x6301;&#x5bf9; next() &#x7684;&#x8c03;&#x7528;</span>\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">step</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x8fd8;&#x6709;&#x66f4;&#x591a;&#x8981;&#x505a;&#x7684;</span>\n        <span class=\"hljs-keyword\">if</span> (!result.<span class=\"hljs-property\">done</span>) {\n            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> result.<span class=\"hljs-property\">value</span> === <span class=\"hljs-string\">&quot;function&quot;</span>) {\n                result.<span class=\"hljs-title function_\">value</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, data</span>) {\n                    <span class=\"hljs-keyword\">if</span> (err) {\n                        result = task.<span class=\"hljs-keyword\">throw</span>(err);\n                        <span class=\"hljs-keyword\">return</span>;\n                    }\n                    result = task.<span class=\"hljs-title function_\">next</span>(data);\n                    <span class=\"hljs-title function_\">step</span>();\n                });\n            } <span class=\"hljs-keyword\">else</span> {\n                result = task.<span class=\"hljs-title function_\">next</span>(result.<span class=\"hljs-property\">value</span>);\n                <span class=\"hljs-title function_\">step</span>();\n            }\n        }\n    }\n    <span class=\"hljs-comment\">// &#x5f00;&#x59cb;&#x5904;&#x7406;&#x8fc7;&#x7a0b;</span>\n    <span class=\"hljs-title function_\">step</span>();\n}\n<span class=\"hljs-comment\">// &#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x6765;&#x914d;&#x5408;&#x4efb;&#x52a1;&#x8fd0;&#x884c;&#x5668;&#x4f7f;&#x7528;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-params\">filename</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">callback</span>) {\n        fs.<span class=\"hljs-title function_\">readFile</span>(filename, callback);\n    };\n}\n<span class=\"hljs-comment\">// &#x8fd0;&#x884c;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;</span>\n<span class=\"hljs-title function_\">run</span>(<span class=\"hljs-keyword\">function</span>*() {\n    <span class=\"hljs-keyword\">let</span> contents = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;config.json&quot;</span>);\n    <span class=\"hljs-title function_\">doSomethingWith</span>(contents);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Done&quot;</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1062,1104"}},{"content":"<pre data-lines=\"1107,1110\"><code>&#x3000;&#x3000;&#x8fd9;&#x4e2a;&#x5b9e;&#x73b0;&#x4f1a;&#x5bfc;&#x81f4;&#x4e00;&#x4e9b;&#x95ee;&#x9898;&#x3002;&#x9996;&#x5148;&#xff0c;&#x5728;&#x8fd4;&#x56de;&#x503c;&#x662f;&#x51fd;&#x6570;&#x7684;&#x51fd;&#x6570;&#x4e2d;&#x5305;&#x88f9;&#x6bcf;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x4f1a;&#x4ee4;&#x4eba;&#x611f;&#x5230;&#x56f0;&#x60d1;&#xff0c;&#x8fd9;&#x53e5;&#x8bdd;&#x672c;&#x8eab;&#x4e5f;&#x662f;&#x5982;&#x6b64;&#xff1b;&#x5176;&#x6b21;&#xff0c;&#x65e0;&#x6cd5;&#x533a;&#x5206;&#x7528;&#x4f5c;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x5668;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x548c;&#x4e00;&#x4e2a;&#x4e0d;&#x662f;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x8fd4;&#x56de;&#x503c;\n\n&#x3000;&#x3000;&#x53ea;&#x8981;&#x6bcf;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x90fd;&#x8fd4;&#x56de;Promise&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x6781;&#x5927;&#x5730;&#x7b80;&#x5316;&#x5e76;&#x901a;&#x7528;&#x5316;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x3002;&#x4ee5;Promise&#x4f5c;&#x4e3a;&#x901a;&#x7528;&#x63a5;&#x53e3;&#x7528;&#x4e8e;&#x6240;&#x6709;&#x5f02;&#x6b65;&#x4ee3;&#x7801;&#x53ef;&#x4ee5;&#x7b80;&#x5316;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x5668;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1107,1110"}},{"content":"<pre data-lines=\"1113,1155\"><code data-lines=\"1113,1155\"><span class=\"hljs-keyword\">let</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;fs&quot;</span>);\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">taskDef</span>) {\n    <span class=\"hljs-comment\">// &#x521b;&#x5efa;&#x8fed;&#x4ee3;&#x5668;</span>\n    <span class=\"hljs-keyword\">let</span> task = <span class=\"hljs-title function_\">taskDef</span>();\n    <span class=\"hljs-comment\">// &#x542f;&#x52a8;&#x4efb;&#x52a1;</span>\n    <span class=\"hljs-keyword\">let</span> result = task.<span class=\"hljs-title function_\">next</span>();\n    <span class=\"hljs-comment\">// &#x9012;&#x5f52;&#x4f7f;&#x7528;&#x51fd;&#x6570;&#x6765;&#x8fdb;&#x884c;&#x8fed;&#x4ee3;</span>\n    (<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">step</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x8fd8;&#x6709;&#x66f4;&#x591a;&#x8981;&#x505a;&#x7684;</span>\n        <span class=\"hljs-keyword\">if</span> (!result.<span class=\"hljs-property\">done</span>) {\n            <span class=\"hljs-comment\">// &#x51b3;&#x8bae;&#x4e00;&#x4e2a; Promise &#xff0c;&#x8ba9;&#x4efb;&#x52a1;&#x5904;&#x7406;&#x53d8;&#x7b80;&#x5355;</span>\n            <span class=\"hljs-keyword\">let</span> promise = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>(result.<span class=\"hljs-property\">value</span>);\n            promise.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value</span>) {\n                result = task.<span class=\"hljs-title function_\">next</span>(value);\n                <span class=\"hljs-title function_\">step</span>();\n            }).<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">error</span>) {\n                result = task.<span class=\"hljs-keyword\">throw</span>(error);\n                <span class=\"hljs-title function_\">step</span>();\n            });\n        }\n    }());\n}\n<span class=\"hljs-comment\">// &#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x6765;&#x914d;&#x5408;&#x4efb;&#x52a1;&#x8fd0;&#x884c;&#x5668;&#x4f7f;&#x7528;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-params\">filename</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">resolve, reject</span>) {\n        fs.<span class=\"hljs-title function_\">readFile</span>(filename, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, contents</span>) {\n            <span class=\"hljs-keyword\">if</span> (err) {\n                <span class=\"hljs-title function_\">reject</span>(err);\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-title function_\">resolve</span>(contents);\n            }    \n        });\n    });\n}\n<span class=\"hljs-comment\">// &#x8fd0;&#x884c;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;</span>\n<span class=\"hljs-title function_\">run</span>(<span class=\"hljs-keyword\">function</span>*() {\n    <span class=\"hljs-keyword\">let</span> contents = <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;config.json&quot;</span>);\n    <span class=\"hljs-title function_\">doSomethingWith</span>(contents);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Done&quot;</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1113,1155"}},{"content":"<pre data-lines=\"1158,1171\"><code>&#x3000;&#x3000;&#x5728;&#x8fd9;&#x4e2a;&#x7248;&#x672c;&#x7684;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4e00;&#x4e2a;&#x901a;&#x7528;&#x7684;run()&#x51fd;&#x6570;&#x6267;&#x884c;&#x751f;&#x6210;&#x5668;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x8fed;&#x4ee3;&#x5668;&#xff0c;&#x5b83;&#x8c03;&#x7528;task.next()&#x65b9;&#x6cd5;&#x6765;&#x542f;&#x52a8;&#x4efb;&#x52a1;&#x5e76;&#x9012;&#x5f52;&#x8c03;&#x7528;step()&#x65b9;&#x6cd5;&#x76f4;&#x5230;&#x8fed;&#x4ee3;&#x5668;&#x5b8c;&#x6210;\n\n&#x3000;&#x3000;&#x5728;step()&#x51fd;&#x6570;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x6709;&#x66f4;&#x591a;&#x4efb;&#x52a1;&#xff0c;&#x90a3;&#x4e48;result.done&#x7684;&#x503c;&#x4e3a;false&#xff0c;&#x6b64;&#x65f6;&#x7684;result.value&#x5e94;&#x8be5;&#x662f;&#x4e00;&#x4e2a;Promise&#xff0c;&#x8c03;&#x7528;Promise.resolve()&#x662f;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x51fd;&#x6570;&#x4e0d;&#x8fd4;&#x56de;Promise&#x3002;(&#x4f20;&#x5165;Promise.resolve()&#x7684;Promise&#x76f4;&#x63a5;&#x901a;&#x8fc7;&#xff0c;&#x4f20;&#x5165;&#x7684;&#x975e;Promise&#x4f1a;&#x88ab;&#x5305;&#x88f9;&#x6210;&#x4e00;&#x4e2a;Promise)&#x63a5;&#x4e0b;&#x6765;&#xff0c;&#x6dfb;&#x52a0;&#x5b8c;&#x6210;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x63d0;&#x53d6;Promise&#x7684;&#x503c;&#x5e76;&#x5c06;&#x5176;&#x4f20;&#x56de;&#x8fed;&#x4ee3;&#x5668;&#x3002;&#x7136;&#x540e;&#x5728;step()&#x51fd;&#x6570;&#x8c03;&#x7528;&#x81ea;&#x8eab;&#x4e4b;&#x524d;&#x7ed3;&#x679c;&#x4f1a;&#x88ab;&#x8d4b;&#x503c;&#x7ed9;&#x4e0b;&#x4e00;&#x4e2a;&#x751f;&#x6210;&#x7684;&#x7ed3;&#x679c;\n\n&#x3000;&#x3000;&#x62d2;&#x7edd;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5c06;&#x6240;&#x6709;&#x62d2;&#x7edd;&#x7ed3;&#x679c;&#x5b58;&#x50a8;&#x5230;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#x4e2d;&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7;task.throw()&#x65b9;&#x6cd5;&#x5c06;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#x4f20;&#x56de;&#x8fed;&#x4ee3;&#x5668;&#xff0c;&#x5982;&#x679c;&#x5728;&#x4efb;&#x52a1;&#x4e2d;&#x6355;&#x83b7;&#x5230;&#x9519;&#x8bef;&#xff0c;&#x7ed3;&#x679c;&#x4f1a;&#x88ab;&#x8d4b;&#x503c;&#x7ed9;&#x4e0b;&#x4e00;&#x4e2a;&#x751f;&#x6210;&#x7ed3;&#x679c;&#x3002;&#x6700;&#x540e;&#x7ee7;&#x7eed;&#x5728;catch()&#x5185;&#x90e8;&#x8c03;&#x7528;step()&#x51fd;&#x6570;\n\n&#x3000;&#x3000;&#x8fd9;&#x4e2a;run()&#x51fd;&#x6570;&#x53ef;&#x4ee5;&#x8fd0;&#x884c;&#x6240;&#x6709;&#x4f7f;&#x7528;yield&#x5b9e;&#x73b0;&#x5f02;&#x6b65;&#x4ee3;&#x7801;&#x7684;&#x751f;&#x6210;&#x5668;&#xff0c;&#x800c;&#x4e14;&#x4e0d;&#x4f1a;&#x5c06;Promise&#x6216;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x66b4;&#x9732;&#x7ed9;&#x5f00;&#x53d1;&#x8005;&#x3002;&#x4e8b;&#x5b9e;&#x4e0a;&#xff0c;&#x7531;&#x4e8e;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x603b;&#x4f1a;&#x88ab;&#x8f6c;&#x6362;&#x6210;&#x4e00;&#x4e2a;Promise&#xff0c;&#x56e0;&#x6b64;&#x53ef;&#x4ee5;&#x8fd4;&#x56de;&#x4e00;&#x4e9b;&#x975e;Promise&#x7684;&#x503c;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x7528;yield&#x8c03;&#x7528;&#x540c;&#x6b65;&#x6216;&#x5f02;&#x6b65;&#x65b9;&#x6cd5;&#x90fd;&#x53ef;&#x4ee5;&#x6b63;&#x5e38;&#x8fd0;&#x884c;&#xff0c;&#x6c38;&#x8fdc;&#x4e0d;&#x9700;&#x8981;&#x68c0;&#x67e5;&#x8fd4;&#x56de;&#x503c;&#x662f;&#x5426;&#x4e3a;Promise\n\n&#x3000;&#x3000;&#x552f;&#x4e00;&#x9700;&#x8981;&#x5173;&#x6ce8;&#x7684;&#x662f;&#x50cf;readFile()&#x8fd9;&#x6837;&#x7684;&#x5f02;&#x6b65;&#x51fd;&#x6570;&#xff0c;&#x5176;&#x8fd4;&#x56de;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x80fd;&#x88ab;&#x6b63;&#x786e;&#x8bc6;&#x522b;&#x72b6;&#x6001;&#x7684;Promise&#xff0c;&#x6240;&#x4ee5;&#x8c03;&#x7528;Node.js&#x7684;&#x5185;&#x5efa;&#x65b9;&#x6cd5;&#x65f6;&#x4e0d;&#x80fd;&#x4f7f;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x987b;&#x5c06;&#x5176;&#x8f6c;&#x6362;&#x4e3a;&#x8fd4;&#x56de;Promise&#x7684;&#x51fd;&#x6570;\n\n&#x3010;&#x672a;&#x6765;&#x7684;&#x5f02;&#x6b65;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x3011;\n\n&#x3000;&#x3000;JS&#x6b63;&#x5728;&#x5f15;&#x5165;&#x4e00;&#x79cd;&#x7528;&#x4e8e;&#x6267;&#x884c;&#x5f02;&#x6b65;&#x4efb;&#x52a1;&#x7684;&#x66f4;&#x7b80;&#x5355;&#x7684;&#x8bed;&#x6cd5;&#xff0c;&#x4f8b;&#x5982;&#xff0c;await&#x8bed;&#x6cd5;&#x81f4;&#x529b;&#x4e8e;&#x66ff;&#x4ee3;&#x57fa;&#x4e8e;Promise&#x7684;&#x793a;&#x4f8b;&#x3002;&#x5176;&#x57fa;&#x672c;&#x601d;&#x60f3;&#x662f;&#x7528;async&#x6807;&#x8bb0;&#x7684;&#x51fd;&#x6570;&#x4ee3;&#x66ff;&#x751f;&#x6210;&#x5668;&#xff0c;&#x7528;await&#x4ee3;&#x66ff;yield&#x6765;&#x8c03;&#x7528;&#x51fd;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1158,1171"}},{"content":"<pre data-lines=\"1172,1179\"><code data-lines=\"1172,1179\">(<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">let</span> contents = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">readFile</span>(<span class=\"hljs-string\">&quot;config.json&quot;</span>);\n    <span class=\"hljs-title function_\">doSomethingWith</span>(contents);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Done&quot;</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1172,1179"}},{"content":"<pre data-lines=\"1180,1181\"><code>&#x3000;&#x3000;&#x5728;&#x51fd;&#x6570;&#x524d;&#x6dfb;&#x52a0;&#x5173;&#x952e;&#x5b57;async&#x8868;&#x793a;&#x8be5;&#x51fd;&#x6570;&#x4ee5;&#x5f02;&#x6b65;&#x6a21;&#x5f0f;&#x8fd0;&#x884c;&#xff0c;await&#x5173;&#x952e;&#x5b57;&#x8868;&#x793a;&#x8c03;&#x7528;readFile(&quot;config.json&quot;)&#x7684;&#x51fd;&#x6570;&#x5e94;&#x8be5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;Promise&#xff0c;&#x5426;&#x5219;&#xff0c;&#x54cd;&#x5e94;&#x5e94;&#x8be5;&#x88ab;&#x5305;&#x88f9;&#x5728;Promise&#x4e2d;&#x3002;&#x5982;&#x679c;Promise&#x88ab;&#x62d2;&#x7edd;&#x5219;await&#x5e94;&#x8be5;&#x629b;&#x51fa;&#x9519;&#x8bef;&#xff0c;&#x5426;&#x5219;&#x901a;&#x8fc7;Promise&#x6765;&#x8fd4;&#x56de;&#x503c;&#x3002;&#x6700;&#x540e;&#x7684;&#x7ed3;&#x679c;&#x662f;&#xff0c;&#x53ef;&#x4ee5;&#x6309;&#x7167;&#x540c;&#x6b65;&#x65b9;&#x5f0f;&#x7f16;&#x5199;&#x5f02;&#x6b65;&#x4ee3;&#x7801;&#xff0c;&#x552f;&#x4e00;&#x7684;&#x5f00;&#x9500;&#x662f;&#x4e00;&#x4e2a;&#x57fa;&#x4e8e;&#x8fed;&#x4ee3;&#x5668;&#x7684;&#x72b6;&#x6001;&#x673a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1180,1181"}}],"payload":{"tag":"h3","lines":"1056,1057"}}],"payload":{"tag":"h2","lines":"2,3"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
