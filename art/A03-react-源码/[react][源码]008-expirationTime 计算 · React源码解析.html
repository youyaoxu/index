<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"expirationTime&#x8ba1;&#x7b97;","children":[{"content":"&#x5c0f;&#x7ed3;&#x4e00;&#x4e0b;","children":[{"content":"<pre data-lines=\"76,81\"><code>React &#x8fd9;&#x4e48;&#x8bbe;&#x8ba1;&#x62b9;&#x76f8;&#x5f53;&#x4e8e;&#x62b9;&#x5e73;&#x4e86;`25ms`&#x5185;&#x8ba1;&#x7b97;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x7684;&#x8bef;&#x5dee;&#xff0c;&#x90a3;&#x4ed6;&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x8fd9;&#x4e48;&#x505a;&#x5462;&#xff1f;&#x6211;&#x601d;&#x8003;&#x4e86;&#x5f88;&#x4e45;&#x90fd;&#x6ca1;&#x6709;&#x5f97;&#x5230;&#x7b54;&#x6848;&#xff0c;&#x76f4;&#x5230;&#x6709;&#x4e00;&#x5929;&#x6211;&#x76ef;&#x7740;&#x4ee3;&#x7801;&#x53d1;&#x5446;&#xff0c;&#x770b;&#x5230;`LOW_PRIORITY_BATCH_SIZE`&#x8fd9;&#x4e2a;&#x5b57;&#x6837;&#xff0c;`bacth`&#xff0c;&#x662f;&#x4e0d;&#x662f;&#x5c31;&#x5bf9;&#x5e94;`batchedUpdates`&#xff1f;&#x518d;&#x7ec6;&#x60f3;&#x4e86;&#x4e00;&#x4e0b;&#xff0c;&#x8fd9;&#x4e48;&#x505a;&#x4e5f;&#x8bb8;&#x662f;&#x4e3a;&#x4e86;&#x8ba9;&#x975e;&#x5e38;&#x76f8;&#x8fd1;&#x7684;&#x4e24;&#x6b21;&#x66f4;&#x65b0;&#x5f97;&#x5230;&#x76f8;&#x540c;&#x7684;`expirationTime`&#xff0c;&#x7136;&#x540e;&#x5728;&#x4e00;&#x6b21;&#x66f4;&#x65b0;&#x4e2d;&#x5b8c;&#x6210;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x4e00;&#x4e2a;&#x81ea;&#x52a8;&#x7684;`batchedUpdates`&#x3002;\n\n&#x4e0d;&#x7981;&#x611f;&#x53f9;&#xff0c;&#x771f;&#x7684;&#x662f;&#x7ec6;&#x554a;&#xff01;\n\n&#x4ee5;&#x4e0a;&#x5c31;&#x662f;`expirationTime`&#x7684;&#x8ba1;&#x7b97;&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,81"}},{"content":"<pre data-lines=\"82,100\"><code data-lines=\"82,100\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">requestCurrentTime</span>() {\n  if (<span class=\"hljs-keyword\">is</span>Rendering) {\n    <span class=\"hljs-keyword\">return</span> currentSchedulerTime\n  }\n  findHighestPriorityRoot()\n  <span class=\"hljs-keyword\">if</span> (\n    nextFlushedExpirationTime === NoWork ||\n    nextFlushedExpirationTime === Never\n  ) {\n    recomputeCurrentRendererTime()\n    currentSchedulerTime = currentRendererTime\n    <span class=\"hljs-keyword\">return</span> currentSchedulerTime\n  }\n  <span class=\"hljs-keyword\">return</span> currentSchedulerTime\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"82,100"}},{"content":"<pre data-lines=\"101,104\"><code>&#x5728; React &#x4e2d;&#x6211;&#x4eec;&#x8ba1;&#x7b97;`expirationTime`&#x8981;&#x57fa;&#x4e8e;&#x5f53;&#x524d;&#x5f97;_&#x65f6;&#x949f;&#x65f6;&#x95f4;_&#xff0c;&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x6211;&#x4eec;&#x53ea;&#x9700;&#x8981;&#x83b7;&#x53d6;`Date.now`&#x6216;&#x8005;`performance.now`&#x5c31;&#x53ef;&#x4ee5;&#x4e86;&#xff0c;&#x4f46;&#x662f;&#x6bcf;&#x6b21;&#x83b7;&#x53d6;&#x4e00;&#x4e0b;&#x5462;&#x6bd4;&#x8f83;&#x6d88;&#x8017;&#x6027;&#x80fd;&#xff0c;&#x6240;&#x4ee5;&#x5462; React &#x8bbe;&#x7f6e;&#x4e86;`currentRendererTime`&#x6765;&#x8bb0;&#x5f55;&#x8fd9;&#x4e2a;&#x503c;&#xff0c;&#x7528;&#x4e8e;&#x4e00;&#x4e9b;&#x4e0d;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;&#x5f97;&#x573a;&#x666f;&#x3002;\n\n&#x4f46;&#x662f;&#x5728; React &#x4e2d;&#x5462;&#x53c8;&#x63d0;&#x4f9b;&#x4e86;`currentSchedulerTime`&#x8fd9;&#x4e2a;&#x53d8;&#x91cf;&#xff0c;&#x540c;&#x6837;&#x4e5f;&#x662f;&#x8bb0;&#x5f55;&#x8fd9;&#x4e2a;&#x503c;&#x7684;&#xff0c;&#x90a3;&#x4e48;&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x7528;&#x4e24;&#x4e2a;&#x503c;&#x5462;&#xff1f;&#x6211;&#x4eec;&#x770b;&#x4e00;&#x4e0b;`requestCurrentTime`&#x65b9;&#x6cd5;&#x7684;&#x5b9e;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"101,104"}}],"payload":{"tag":"h3","lines":"74,75"}},{"content":"&#x9996;&#x5148;&#x662f;:","children":[{"content":"<pre data-lines=\"107,113\"><code data-lines=\"107,113\"><span class=\"hljs-keyword\">if</span> (isRendering) {\n  <span class=\"hljs-keyword\">return</span> currentSchedulerTime\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"107,113"}},{"content":"<pre data-lines=\"114,120\"><code>&#x8fd9;&#x4e2a;`isRendering`&#x53ea;&#x6709;&#x5728;`performWorkOnRoot`&#x7684;&#x65f6;&#x5019;&#x624d;&#x4f1a;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;`true`&#xff0c;&#x800c;&#x5176;&#x672c;&#x8eab;&#x662f;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x4e0d;&#x5b58;&#x5728;&#x4ed6;&#x6267;&#x884c;&#x5230;&#x4e00;&#x534a;&#x6ca1;&#x6709;&#x8bbe;&#x7f6e;`isRendering`&#x4e3a;`false`&#x7684;&#x65f6;&#x5019;&#x5c31;&#x8df3;&#x51fa;&#xff0c;&#x90a3;&#x4e48;&#x4ec0;&#x4e48;&#x60c5;&#x51b5;&#x4e0b;&#x4f1a;&#x5728;&#x8fd9;&#x91cc;&#x51fa;&#x73b0;&#x65b0;&#x7684;`requestCurrentTime`&#x5462;&#xff1f;\n\n*   &#x5728;&#x751f;&#x547d;&#x5468;&#x671f;&#x65b9;&#x6cd5;&#x4e2d;&#x8c03;&#x7528;&#x4e86;`setState`\n*   &#x9700;&#x8981;&#x6302;&#x8d77;&#x4efb;&#x52a1;&#x7684;&#x65f6;&#x5019;\n\n&#x4e5f;&#x5c31;&#x662f;&#x8bf4; React &#x8981;&#x6c42;**&#x5728;&#x4e00;&#x6b21;`rendering`&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x65b0;&#x4ea7;&#x751f;&#x7684;`update`&#x7528;&#x4e8e;&#x8ba1;&#x7b97;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x7684;`current`&#x5fc5;&#x987b;&#x8ddf;&#x76ee;&#x524d;&#x7684;`renderTime`&#x4fdd;&#x6301;&#x4e00;&#x81f4;&#xff0c;&#x540c;&#x7406;&#x5728;&#x8fd9;&#x4e2a;&#x5468;&#x671f;&#x4e2d;&#x6240;&#x6709;&#x4ea7;&#x751f;&#x7684;&#x65b0;&#x7684;&#x66f4;&#x65b0;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x90fd;&#x4f1a;&#x4fdd;&#x6301;&#x4e00;&#x81f4;&#xff01;**\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"114,120"}}],"payload":{"tag":"h3","lines":"105,106"}},{"content":"&#x7136;&#x540e;&#x7b2c;&#x4e8c;&#x4e2a;&#x5224;&#x65ad;&#xff1a;","children":[{"content":"<pre data-lines=\"123,130\"><code data-lines=\"123,130\">if (\n  nextFlushedExpirationTime <span class=\"hljs-comment\">=== NoWork ||</span>\n  nextFlushedExpirationTime <span class=\"hljs-comment\">=== Never</span>\n)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"123,130"}},{"content":"<pre data-lines=\"131,155\"><code>&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x5728;&#x4e00;&#x4e2a;`batched`&#x66f4;&#x65b0;&#x4e2d;&#xff0c;&#x53ea;&#x6709;&#x7b2c;&#x4e00;&#x6b21;&#x521b;&#x5efa;&#x66f4;&#x65b0;&#x624d;&#x4f1a;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;&#x65f6;&#x95f4;&#xff0c;&#x540e;&#x9762;&#x7684;&#x6240;&#x6709;&#x66f4;&#x65b0;&#x90fd;&#x4f1a;&#x590d;&#x7528;&#x7b2c;&#x4e00;&#x6b21;&#x521b;&#x5efa;&#x66f4;&#x65b0;&#x7684;&#x65f6;&#x5019;&#x7684;&#x65f6;&#x95f4;&#xff0c;&#x8fd9;&#x4e2a;&#x4e5f;&#x662f;&#x4e3a;&#x4e86;**&#x4fdd;&#x8bc1;&#x5728;&#x4e00;&#x4e2a;&#x6279;&#x91cf;&#x66f4;&#x65b0;&#x4e2d;&#x4ea7;&#x751f;&#x7684;&#x540c;&#x7c7b;&#x578b;&#x7684;&#x66f4;&#x65b0;&#x53ea;&#x4f1a;&#x6709;&#x76f8;&#x540c;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;**\n\n&#x5728; React &#x7684;&#x8c03;&#x5ea6;&#x8fc7;&#x7a0b;&#x4e2d;&#x5b58;&#x5728;&#x7740;&#x975e;&#x5e38;&#x591a;&#x4e0d;&#x540c;&#x7684;_`expirationTime`_&#x53d8;&#x91cf;&#x5e2e;&#x52a9; React &#x53bb;&#x5b9e;&#x73b0;&#x5728;&#x5355;&#x7ebf;&#x7a0b;&#x73af;&#x5883;&#x4e2d;&#x8c03;&#x5ea6;&#x4e0d;&#x540c;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x4efb;&#x52a1;&#x8fd9;&#x4e2a;&#x9700;&#x6c42;&#xff0c;&#x8fd9;&#x7bc7;&#x6587;&#x7ae0;&#x6211;&#x4eec;&#x5c31;&#x6765;&#x4e00;&#x4e00;&#x5217;&#x4e3e;&#x4ed6;&#x4eec;&#x7684;&#x542b;&#x4e49;&#x4ee5;&#x53ca;&#x4f5c;&#x7528;&#xff0c;&#x6765;&#x5e2e;&#x52a9;&#x6211;&#x4eec;&#x66f4;&#x597d;&#x5f97;&#x7406;&#x89e3; React &#x4e2d;&#x7684;&#x6574;&#x4e2a;&#x8c03;&#x5ea6;&#x8fc7;&#x7a0b;&#x3002;\n\n*   `root.expirationTime`\n*   `root.nextExpirationTimeToWorkOn`\n*   `root.childExpirationTime`\n*   `root.earliestPendingTime &amp; root.lastestPendingTime`\n*   `root.earliestSuspendedTime &amp; root.lastestSuspendedTime`\n*   `root.lastestPingedTime`\n*   `nextFlushedExpirationTime`\n*   `nextLatestAbsoluteTimeoutMs`\n*   `currentRendererTime`\n*   `currentSchedulerTime`\n\n&#x53e6;&#x5916;&#xff0c;&#x6240;&#x6709;&#x8282;&#x70b9;&#x90fd;&#x4f1a;&#x5177;&#x6709;`expirationTime`&#x548c;`childExpirationTime`&#x4e24;&#x4e2a;&#x5c5e;&#x6027;\n\n&#x4ee5;&#x4e0a;&#x6240;&#x6709;&#x503c;&#x521d;&#x59cb;&#x90fd;&#x662f;`NoWork`&#x4e5f;&#x5c31;&#x662f;`0`&#xff0c;&#x4ee5;&#x53ca;&#x4ed6;&#x4eec;&#x4e00;&#x5171;&#x4f1a;&#x6709;&#x4e09;&#x79cd;&#x60c5;&#x51b5;&#xff1a;\n\n*   `NoWork`&#xff0c;&#x4ee3;&#x8868;&#x6ca1;&#x6709;&#x66f4;&#x65b0;\n*   `Sync`&#xff0c;&#x4ee3;&#x8868;&#x540c;&#x6b65;&#x6267;&#x884c;&#xff0c;&#x4e0d;&#x4f1a;&#x88ab;&#x8c03;&#x5ea6;&#x4e5f;&#x4e0d;&#x4f1a;&#x88ab;&#x6253;&#x65ad;\n*   `async`&#x6a21;&#x5f0f;&#x4e0b;&#x8ba1;&#x7b97;&#x51fa;&#x6765;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#xff0c;&#x4e00;&#x4e2a;&#x65f6;&#x95f4;&#x6233;\n\n&#x63a5;&#x4e0b;&#x53bb;&#x7684;&#x4f8b;&#x5b50;&#x6211;&#x4eec;&#x90fd;&#x4f1a;&#x6839;&#x636e;&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x7ed3;&#x6784;&#x6765;&#x8bb2;&#xff0c;&#x6211;&#x4eec;&#x5047;&#x8bbe;&#x6709;&#x5982;&#x4e0b;&#x7ed3;&#x6784;&#x7684;&#x4e00;&#x4e2a; React &#x8282;&#x70b9;&#x6811;&#xff0c;&#x4ed6;&#x7684;`Fiber`&#x7ed3;&#x6784;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,155"}},{"content":"<img src=\"https://kgfacq.dm.files.1drv.com/y4mdey9O6FJ59ftJnhP1ej6YNMd0z1HWSQsmF42mJjlUiM8fVYKjcyV-0AlUvMdE5SpBHkRl7Wn_WcqaBlhtY-ifm4GLrc_whI9LlUsJyeKOdbmcwCdlqByqYRkCdbjm-6I8d0MuICm3TeAxxyttW3SNKRLWYPeinkDSrH31VLXI4I5M9IJ60x8d6RR1OtOcctUwRNExxMvS6yFQVUEuBulKA?width=721&amp;height=471&amp;cropmode=none\" alt>","children":[],"payload":{"tag":"img","lines":"156,157"}},{"content":"<pre data-lines=\"158,159\"><code>&#x540e;&#x7eed;&#x6211;&#x4eec;&#x4f1a;&#x5728;&#x8fd9;&#x4e2a;&#x57fa;&#x7840;&#x4e0a;&#x8bb2;&#x89e3;&#x4e0d;&#x540c;&#x60c5;&#x51b5;&#x4e0b;`expirationTime`&#x7684;&#x60c5;&#x51b5;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"158,159"}}],"payload":{"tag":"h3","lines":"121,122"}},{"content":"childExpirationTime","children":[{"content":"<pre data-lines=\"162,165\"><code>&#x5728;&#x4e4b;&#x524d;&#x6211;&#x4eec;&#x8bf4;&#x8fc7;&#xff0c;&#x6bcf;&#x6b21;&#x4e00;&#x4e2a;&#x8282;&#x70b9;&#x8c03;&#x7528;`setState`&#x6216;&#x8005;`forceUpdate`&#x90fd;&#x4f1a;&#x4ea7;&#x751f;&#x4e00;&#x4e2a;&#x66f4;&#x65b0;&#x5e76;&#x4e14;&#x8ba1;&#x7b97;&#x4e00;&#x4e2a;`expirationTime`&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x8282;&#x70b9;&#x7684;`expirationTime`&#x5c31;&#x662f;&#x5f53;&#x65f6;&#x8ba1;&#x7b97;&#x51fa;&#x6765;&#x7684;&#x503c;&#xff0c;**&#x56e0;&#x4e3a;&#x8fd9;&#x4e2a;&#x66f4;&#x65b0;&#x672c;&#x8eab;&#x5c31;&#x662f;&#x7531;&#x8fd9;&#x4e2a;&#x8282;&#x70b9;&#x4ea7;&#x751f;&#x7684;**\n\n&#x6700;&#x7ec8;&#x56e0;&#x4e3a; React &#x7684;&#x66f4;&#x65b0;&#x9700;&#x8981;&#x4ece;`FiberRoot`&#x5f00;&#x59cb;&#xff0c;&#x6240;&#x4ee5;&#x4f1a;&#x6267;&#x884c;&#x4e00;&#x6b21;&#x5411;&#x4e0a;&#x904d;&#x5386;&#x627e;&#x5230;`FiberRoot`&#xff0c;&#x800c;&#x5411;&#x4e0a;&#x904d;&#x5386;&#x5219;&#x6b63;&#x597d;&#x662f;&#x4e00;&#x6b65;&#x6b65;&#x627e;&#x5230;**&#x521b;&#x5efa;&#x66f4;&#x65b0;&#x7684;&#x8282;&#x70b9;&#x7684;&#x7236;&#x8282;&#x70b9;**&#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x8fd9;&#x65f6;&#x5019; React &#x5c31;&#x4f1a;&#x5bf9;&#x6bcf;&#x4e00;&#x4e2a;&#x8be5;&#x8282;&#x70b9;&#x7684;&#x7236;&#x8282;&#x70b9;&#x94fe;&#x4e0a;&#x7684;&#x8282;&#x70b9;&#x8bbe;&#x7f6e;`childExpirationTime`&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x4e2a;&#x66f4;&#x65b0;&#x662f;&#x4ed6;&#x4eec;&#x7684;&#x5b50;&#x5b59;&#x8282;&#x70b9;&#x9020;&#x6210;&#x7684;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"162,165"}},{"content":"<img src=\"https://h2facq.dm.files.1drv.com/y4mphJBnkRInXVdei2q3h0etKGLWTB5irIH2w23DMcoAKRIl0K7EJPFHjykQ5enpm5lgi_Jp9qTPhBTM64CQF2J_6wxtL1j2raUeLNUm7zXZzclXJQ6iPXjw75oGcdUMdsYCKNm2YawmEsJy2joPddhFLBN4PK51oGM16974Ad3A7azsRa0NunaDYNB1Lvhb3ZMrwKrx-3Yvi90e4vW3A02Iw?width=841&amp;height=571&amp;cropmode=none\" alt>","children":[],"payload":{"tag":"img","lines":"166,167"}},{"content":"<pre data-lines=\"168,188\"><code>&#x5982;&#x4e0a;&#x56fe;&#x6240;&#x793a;&#xff0c;&#x6211;&#x4eec;&#x5148;&#x5ffd;&#x7565;&#x6700;&#x5de6;&#x8fb9;&#x7684;`child1`&#x4ea7;&#x751f;&#x7684;&#x4e00;&#x6b21;&#x5f02;&#x6b65;&#x66f4;&#x65b0;&#xff0c;&#x5982;&#x679c;&#x5f53;&#x524d;&#x53ea;&#x6709;`child2`&#x4ea7;&#x751f;&#x4e86;&#x4e00;&#x4e2a;`Sync`&#x66f4;&#x65b0;&#xff0c;&#x90a3;&#x4e48;`App`&#x548c;`FiberRoot`&#x7684;`childExpirationTime`&#x90fd;&#x4f1a;&#x66f4;&#x65b0;&#x6210;`Sync`\n\n&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x503c;&#x6709;&#x4ec0;&#x4e48;&#x7528;&#x5462;&#xff1f;&#x5728;&#x6211;&#x4eec;&#x5411;&#x4e0b;&#x66f4;&#x65b0;&#x6574;&#x68f5;`Fiber`&#x6811;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6bcf;&#x4e2a;&#x8282;&#x70b9;&#x90fd;&#x4f1a;&#x6267;&#x884c;&#x5bf9;&#x5e94;&#x7684;`update`&#x65b9;&#x6cd5;&#xff0c;&#x5728;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x91cc;&#x9762;&#x5c31;&#x4f1a;&#x4f7f;&#x7528;&#x8282;&#x70b9;&#x672c;&#x8eab;&#x7684;`expirationTime`&#x548c;`childExpirationTime`&#x6765;&#x5224;&#x65ad;&#x4ed6;&#x662f;&#x5426;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x8df3;&#x8fc7;&#xff0c;&#x4e0d;&#x66f4;&#x65b0;&#x5b50;&#x6811;&#x3002;**`expirationTime`&#x4ee3;&#x8868;&#x4ed6;&#x672c;&#x8eab;&#x662f;&#x5426;&#x6709;&#x66f4;&#x65b0;&#xff0c;&#x5982;&#x679c;&#x4ed6;&#x672c;&#x8eab;&#x6709;&#x66f4;&#x65b0;&#xff0c;&#x90a3;&#x4e48;&#x4ed6;&#x7684;&#x66f4;&#x65b0;&#x53ef;&#x80fd;&#x4f1a;&#x5f71;&#x54cd;&#x5b50;&#x6811;&#xff1b;`childExpirationTime`&#x8868;&#x793a;&#x4ed6;&#x7684;&#x5b50;&#x6811;&#x662f;&#x5426;&#x4ea7;&#x751f;&#x4e86;&#x66f4;&#x65b0;&#xff1b;&#x5982;&#x679c;&#x4e24;&#x4e2a;&#x90fd;&#x6ca1;&#x6709;&#xff0c;&#x90a3;&#x4e48;&#x5b50;&#x6811;&#x662f;&#x4e0d;&#x9700;&#x8981;&#x66f4;&#x65b0;&#x7684;&#x3002;** \n\n&#x5bf9;&#x5e94;&#x56fe;&#x4e2d;&#xff0c;&#x5982;&#x679c;`child1`&#xff0c;`child3`&#xff0c;`child4`&#x8fd8;&#x6709;&#x5b50;&#x6811;&#xff0c;&#x90a3;&#x4e48;&#x5728;&#x8fd9;&#x6b21;`child2`&#x7684;&#x66f4;&#x65b0;&#x4e2d;&#xff0c;&#x4ed6;&#x4eec;&#x662f;&#x4e0d;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7684;&#xff0c;&#x5728;&#x904d;&#x5386;&#x5230;&#x4ed6;&#x4eec;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x76f4;&#x63a5;&#x8df3;&#x8fc7;\n\n_&#x6ce8;&#x610f;&#xff1a;&#x8fd9;&#x91cc;&#x53ea;&#x8ba8;&#x8bba;&#x6ca1;&#x6709;&#x5176;&#x4ed6;&#x526f;&#x4f5c;&#x7528;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x6bd4;&#x5982;&#x4f7f;&#x7528;&#x8001;&#x7684;`context api`&#x4e4b;&#x7c7b;&#x7684;&#x6700;&#x7ec8;&#x4f1a;&#x5f3a;&#x5236;&#x5bfc;&#x81f4;&#x6ca1;&#x6709;&#x66f4;&#x65b0;&#x7684;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7684;&#x60c5;&#x51b5;&#x6211;&#x4eec;&#x5148;&#x4e0d;&#x8003;&#x8651;&#x3002;_\n\n&#x4e86;&#x89e3;&#x4e86;`childExpirationTime`&#x7684;&#x4f5c;&#x7528;&#x4e4b;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x518d;&#x6765;&#x8bb2;&#x4e00;&#x4e0b;&#x4ed6;&#x7684;&#x7279;&#x6027;&#xff1a;\n\n*   &#x540c;&#x4e00;&#x4e2a;&#x8282;&#x70b9;&#x4ea7;&#x751f;&#x7684;&#x8fde;&#x7eed;&#x4e24;&#x6b21;&#x66f4;&#x65b0;&#xff0c;&#x6700;&#x7ea2;&#x5728;&#x7236;&#x8282;&#x70b9;&#x4e0a;&#x53ea;&#x4f1a;&#x4f53;&#x73b0;&#x4e00;&#x6b21;`childExpirationTime`\n*   &#x4e0d;&#x540c;&#x5b50;&#x6811;&#x4ea7;&#x751f;&#x7684;&#x66f4;&#x65b0;&#xff0c;&#x6700;&#x7ec8;&#x4f53;&#x73b0;&#x5728;&#x8ddf;&#x8282;&#x70b9;&#x4e0a;&#x7684;&#x662f;&#x4f18;&#x5148;&#x7ea7;&#x6700;&#x9ad8;&#x7684;&#x90a3;&#x4e2a;&#x66f4;&#x65b0;\n\n&#x7b2c;&#x4e00;&#x70b9;&#x5f88;&#x597d;&#x7406;&#x89e3;&#xff0c;&#x540c;&#x4e00;&#x4e2a;&#x8282;&#x70b9;&#x5728;&#x7b2c;&#x4e00;&#x6b21;&#x66f4;&#x65b0;&#x8fd8;&#x6ca1;&#x6709;&#x7ed3;&#x675f;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x518d;&#x6b21;&#x4ea7;&#x751f;&#x66f4;&#x65b0;&#xff0c;&#x90a3;&#x4e48;&#x4e0d;&#x7ba1;&#x4ed6;&#x4eec;&#x4f18;&#x5148;&#x7ea7;&#x54ea;&#x4e2a;&#x9ad8;&#xff0c;&#x6700;&#x7ec8;&#x90fd;&#x4f1a;&#x6309;&#x7167;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;&#x90a3;&#x4e2a;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x628a;&#x6240;&#x6709;&#x66f4;&#x65b0;&#x90fd;&#x66f4;&#x65b0;&#x6389;&#x4e86;&#xff0c;&#x56e0;&#x4e3a;`Fiber`&#x5bf9;&#x8c61;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#xff0c;`updateQueue`&#x4e5f;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#xff0c;&#x65e0;&#x6cd5;&#x533a;&#x5206;&#x540c;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x4e0a;&#x8fde;&#x7eed;&#x7684;&#x4e0d;&#x540c;&#x66f4;&#x65b0;&#x3002;\n\n&#x7b2c;&#x4e8c;&#x70b9;&#x662f;&#x56e0;&#x4e3a; React &#x5728;&#x521b;&#x5efa;&#x66f4;&#x65b0;&#x5411;&#x4e0a;&#x5bfb;&#x627e;`root`&#x5e76;&#x8bbe;&#x7f6e;`childExpirationTime`&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x5bf9;&#x6bd4;&#x4e4b;&#x524d;&#x8bbe;&#x7f6e;&#x8fc7;&#x7684;&#x548c;&#x73b0;&#x5728;&#x7684;&#xff0c;&#x6700;&#x7ec8;&#x4f1a;&#x7b49;&#x4e8e;**&#x975e;`NoWork`&#x7684;&#x6700;&#x5c0f;&#x7684;`childExpirationTime`&#xff0c;&#x56e0;&#x4e3a;`expirationTime`&#x8d8a;&#x5c0f;&#x4f18;&#x5148;&#x7ea7;&#x8d8a;&#x9ad8;&#xff0c;`Sync`&#x662f;&#x6700;&#x9ad8;&#x4f18;&#x5148;&#x7ea7;**\n\n&#x5bf9;&#x5e94;&#x5230;&#x4e0a;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;`child1`&#x4ea7;&#x751f;&#x7684;&#x66f4;&#x65b0;&#x662f;&#x5f02;&#x6b65;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x4ed6;&#x7684;`expirationTime`&#x662f;&#x8ba1;&#x7b97;&#x51fa;&#x6765;&#x7684;&#x65f6;&#x95f4;&#x6233;&#xff0c;&#x90a3;&#x4e48;&#x80af;&#x5b9a;&#x6bd4;`Sync`&#x5927;&#xff0c;&#x6240;&#x4ee5;&#x7387;&#x5148;&#x8bb0;&#x5f55;&#x5230;&#x7236;&#x8282;&#x70b9;&#x7684;&#x662f;`child2`&#xff0c;&#x540c;&#x65f6;&#x4e5f;&#x662f;`child2`&#x7684;&#x66f4;&#x65b0;&#x5148;&#x88ab;&#x6267;&#x884c;&#x3002;**&#x5373;&#x4fbf;&#x662f;`child1`&#x7684;&#x66f4;&#x65b0;&#x5148;&#x4ea7;&#x751f;&#xff0c;&#x5982;&#x679c;&#x4ed6;&#x5728;`chidl2`&#x4ea7;&#x751f;&#x66f4;&#x65b0;&#x7684;&#x65f6;&#x5019;&#x4ed6;&#x8fd8;&#x6ca1;&#x66f4;&#x65b0;&#x5b8c;&#xff0c;&#x90a3;&#x4e48;&#x4e5f;&#x4f1a;&#x88ab;&#x6253;&#x65ad;&#xff0c;&#x5148;&#x5b8c;&#x6210;`child2`&#x7684;&#x6e32;&#x67d3;&#xff0c;&#x518d;&#x56de;&#x5934;&#x6765;&#x6e32;&#x67d3;`child1`**\n\n&#x4ee5;&#x4e0a;&#x662f;`childExpirationTime`&#x7684;&#x4f5c;&#x7528;&#x548c;&#x7279;&#x6027;&#xff0c;&#x4ed6;&#x5728;&#x6bcf;&#x4e2a;&#x8282;&#x70b9;`completeWork`&#x7684;&#x65f6;&#x5019;&#x4f1a;`reset`&#x7236;&#x94fe;&#x4e0a;&#x7684;`childExpirationTime`&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x8fd9;&#x4e2a;&#x8282;&#x70b9;&#x5df2;&#x7ecf;&#x66f4;&#x65b0;&#x5b8c;&#x4e86;&#xff0c;&#x90a3;&#x4e48;&#x4ed6;&#x7684;`childExpirationTime`&#x4e5f;&#x5c31;&#x6ca1;&#x6709;&#x610f;&#x4e49;&#x4e86;&#x3002;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x6211;&#x4eec;&#x5728;&#x8bb2;&#x8282;&#x70b9;&#x66f4;&#x65b0;&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x8bb2;&#x5230;&#xff0c;&#x5230;&#x65f6;&#x5019;&#x5927;&#x5bb6;&#x518d;&#x5bf9;&#x5e94;&#x8d77;&#x6765;&#x770b;&#x6548;&#x679c;&#x4f1a;&#x66f4;&#x597d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"168,188"}}],"payload":{"tag":"h3","lines":"160,161"}},{"content":"pendingTime","children":[{"content":"<pre data-lines=\"191,192\"><code>&#x5728;`FiberRoot`&#x4e0a;&#x6709;&#x4e24;&#x4e2a;&#x503c;`earliestPendingTime`&#x548c;`lastestPedingTime`&#xff0c;&#x4ed6;&#x4eec;&#x662f;&#x4e00;&#x5bf9;&#x503c;&#xff0c;**&#x7528;&#x6765;&#x8bb0;&#x5f55;&#x6240;&#x6709;&#x5b50;&#x6811;&#x4e2d;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x6e32;&#x67d3;&#x7684;&#x66f4;&#x65b0;&#x7684;`expirationTime`&#x7684;&#x533a;&#x95f4;**\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"191,192"}},{"content":"<img src=\"https://hmfacq.dm.files.1drv.com/y4mTm9k8wciS1LTgRpOidtojQQIgCWVhDtXluYnvYIqbK0Z6NUXFqzm76SlooXVfTHb9sAU2pE7du3AbbR23JlZU0vJ1FghvT6X5HXcoguLi4Mp4PdE25AGFt_1w2NJ1K7o3UiqV3mH-kWnlEuWd5xPlkueCdm2FfYDWvCT40ynsrbziTCoE7QMxIbpHyAg6fYkKPHh0qRDY5vrK8ssy8jzuQ?width=841&amp;height=586&amp;cropmode=none\" alt>","children":[],"payload":{"tag":"img","lines":"193,194"}},{"content":"<pre data-lines=\"195,200\"><code>&#x5728;&#x8fd9;&#x4e2a;&#x4f8b;&#x5b50;&#x91cc;&#xff0c;&#x6211;&#x4eec;&#x540c;&#x65f6;&#x5728;`child1`&#x3001;`child2`&#x3001;`child3`&#x4ea7;&#x751f;&#x91cc;&#x66f4;&#x65b0;&#xff0c;&#x5e76;&#x4e14;&#x6839;&#x636e;&#x4f18;&#x5148;&#x7ea7;&#x8ba1;&#x7b97;&#x51fa;&#x4e86;&#x4e0d;&#x540c;&#x7684;&#x66f4;&#x65b0;&#x65f6;&#x95f4;&#xff08;**&#x518d;&#x6b21;&#x91cd;&#x7533;&#xff0c;&#x8bf7;&#x5ffd;&#x7565;&#x7ec6;&#x8282;&#xff0c;&#x73b0;&#x5b9e;&#x4e2d;&#x4e0d;&#x592a;&#x4f1a;&#x51fa;&#x73b0;&#x540c;&#x65f6;&#x4ea7;&#x751f;&#x7684;&#x60c5;&#x51b5;**&#xff09;&#x3002;\n\n&#x6bcf;&#x4e2a;&#x66f4;&#x65b0;&#x521b;&#x5efa;&#x7684;&#x65f6;&#x5019;&#xff0c;React &#x4f1a;&#x901a;&#x8fc7;`markPendingPriorityLevel`&#x6807;&#x8bb0;`root`&#x8282;&#x70b9;&#x7684;`earliestPendingTime`&#x548c;`lastestPedingTime`&#x3002;&#x4ed6;&#x4eec;&#x53ea;&#x8bb0;&#x5f55;&#x533a;&#x95f4;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x73b0;&#x5728;&#x6211;&#x4eec;&#x4ea7;&#x751f;&#x4e86;&#x4e09;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x91cc;&#x53ea;&#x8bb0;&#x5f55;&#x6700;&#x5927;&#x548c;&#x6700;&#x5c0f;&#x7684;&#x3002;\n\n&#x90a3;&#x4e48;&#x4ed6;&#x7684;&#x4f5c;&#x7528;&#x5c31;&#x5f88;&#x660e;&#x663e;&#x4e86;&#xff0c;**&#x901a;&#x8fc7;&#x8ffd;&#x8e2a;&#x6700;&#x5927;&#x548c;&#x6700;&#x5c0f;&#x503c;&#xff0c;React &#x53ef;&#x4ee5;&#x5224;&#x65ad;&#x5728;&#x5f53;&#x524d;&#x66f4;&#x65b0;&#x4e4b;&#x540e;&#x662f;&#x5426;&#x8fd8;&#x5177;&#x6709;&#x4f18;&#x5148;&#x7ea7;&#x66f4;&#x4f4e;&#x7684;&#x4efb;&#x52a1;&#x9700;&#x8981;&#x6267;&#x884c;&#xff08;&#x5f53;&#x524d;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x5904;&#x7406;&#x8fd9;&#x4e24;&#x4e2a;&#x503c;&#x4e4b;&#x95f4;&#xff09;&#x3002;** \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"195,200"}}],"payload":{"tag":"h3","lines":"189,190"}},{"content":"suspendedTime","children":[{"content":"<pre data-lines=\"203,213\"><code>&#x540c;&#x6837;&#x7684;&#x5728;`ReactFiber`&#x4e0a;&#x6709;&#x4e24;&#x4e2a;&#x503c;`earliestSuspendedTime`&#x548c;`lastestSuspendedTime`&#xff0c;**&#x8fd9;&#x4e24;&#x4e2a;&#x503c;&#x662f;&#x7528;&#x6765;&#x8bb0;&#x5f55;&#x88ab;&#x6302;&#x8d77;&#x7684;&#x4efb;&#x52a1;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x7684;**\n\n&#x9996;&#x5148;&#x6211;&#x4eec;&#x5b9a;&#x4e49;&#x4e00;&#x4e0b;&#x4ec0;&#x4e48;&#x60c5;&#x51b5;&#x4e0b;&#x4efb;&#x52a1;&#x662f;&#x88ab;&#x6302;&#x8d77;&#x7684;&#xff1a;\n\n*   &#x51fa;&#x73b0;&#x53ef;&#x6355;&#x83b7;&#x7684;&#x9519;&#x8bef;&#x5e76;&#x4e14;&#x8fd8;&#x6709;&#x4f18;&#x5148;&#x7ea7;&#x66f4;&#x4f4e;&#x7684;&#x4efb;&#x52a1;&#x7684;&#x60c5;&#x51b5;&#x4e0b;\n*   &#x5f53;&#x6355;&#x83b7;&#x5230;`thenable`&#xff0c;&#x5e76;&#x4e14;&#x9700;&#x8981;&#x8bbe;&#x7f6e;`onTimeout`&#x7684;&#x65f6;&#x5019;\n\n&#x6211;&#x4eec;&#x79f0;&#x8fd9;&#x4e2a;&#x4efb;&#x52a1;&#x88ab;`suspended`(&#x6302;&#x8d77;)&#x4e86;&#x3002;&#x8bb0;&#x5f55;&#x8fd9;&#x4e2a;&#x65f6;&#x95f4;&#x4e3b;&#x8981;&#x662f;&#x5728;`resolve`&#x4e86;`promise`&#x4e4b;&#x540e;&#xff0c;&#x5224;&#x65ad;&#x88ab;&#x6302;&#x8d77;&#x7684;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x662f;&#x5426;&#x4f9d;&#x7136;&#x5904;&#x4e8e;&#x76ee;&#x524d;&#x5df2;&#x6709;&#x7684;`suspenedTime`&#x4e2d;&#x95f4;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x662f;&#x7684;&#x8bdd;&#x662f;&#x9700;&#x8981;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#xff0c;&#x7136;&#x540e;&#x4ece;&#x65b0;&#x52a0;&#x5165;&#x961f;&#x5217;&#x8fdb;&#x884c;&#x8c03;&#x5ea6;&#x66f4;&#x65b0;&#x7684;&#x3002;\n\n&#x53e6;&#x5916;&#x5c31;&#x662f;&#x5728;&#x786e;&#x5b9a;&#x76ee;&#x524d;&#x9700;&#x8981;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#xff0c;&#x4e5f;&#x5c31;&#x662f;`root.expirationTime`&#x548c;`root.nextExpirationTimeToWorkOn`&#x7684;&#x65f6;&#x5019;&#x4e5f;&#x662f;&#x4e00;&#x4e2a;&#x8003;&#x8651;&#x56e0;&#x7d20;&#x3002;&#x6211;&#x4eec;&#x63a5;&#x4e0b;&#x53bb;&#x4f1a;&#x8bb2;&#x5230;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"203,213"}}],"payload":{"tag":"h3","lines":"201,202"}},{"content":"lastestPingedTime","children":[{"content":"<pre data-lines=\"216,219\"><code>&#x8fd9;&#x4e2a;&#x503c;&#x662f;&#x7528;&#x6765;&#x8bb0;&#x5f55;&#x6700;&#x65b0;&#x7684;&#x4e00;&#x6b21;`suspended`&#x7ec4;&#x4ef6;`resolve`&#x4e4b;&#x540e;&#xff0c;&#x5982;&#x679c;&#x6302;&#x8d77;&#x4e4b;&#x524d;&#x7684;`expirationTime`&#x4f9d;&#x7136;&#x5728;`earliestSuspendedTime`&#x548c;`lastestSuspendedTime`&#x4e4b;&#x95f4;&#xff0c;&#x5219;&#x4f1a;&#x6807;&#x5fd7;&#x8fd9;&#x4e2a;&#x65f6;&#x95f4;&#x4e3a;`pingedTime`\n\n`pingedTime`&#x76ee;&#x524d;&#x770b;&#x6765;&#x6ca1;&#x6709;&#x4ec0;&#x4e48;&#x522b;&#x7684;&#x4f5c;&#x7528;&#xff0c;&#x552f;&#x4e00;&#x8ddf;`suspendedTime`&#x7684;&#x533a;&#x522b;&#x662f;&#x4ed6;&#x7684;&#x4f18;&#x5148;&#x7ea7;&#x6bd4;`suspendedTime`&#x9ad8;&#x4e00;&#x4e9b;&#xff0c;&#x4f1a;&#x4f18;&#x5148;&#x9009;&#x62e9;&#x4e3a;&#x6e32;&#x67d3;&#x76ee;&#x6807;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"216,219"}}],"payload":{"tag":"h3","lines":"214,215"}},{"content":"root.expirationTime &#x548c; root.nextExpirationTimeToWorkOn","children":[{"content":"<pre data-lines=\"222,248\"><code>`root.expirationTime`&#x662f;&#x7528;&#x6765;&#x6807;&#x5fd7;&#x5f53;&#x524d;&#x6e32;&#x67d3;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x7684;&#xff0c;&#x8bf7;&#x6ce8;&#x610f;&#x4ed6;&#x53ea;&#x7ba1;&#x672c;&#x6e32;&#x67d3;&#x5468;&#x671f;&#xff0c;&#x4ed6;&#x5e76;&#x4e0d;&#x7ba1;&#x4f60;&#x73b0;&#x5728;&#x7684;&#x6e32;&#x67d3;&#x76ee;&#x6807;&#x662f;&#x54ea;&#x4e2a;&#xff0c;&#x6e32;&#x67d3;&#x76ee;&#x6807;&#x662f;&#x7531;`root.nextExpirationTimeToWorkOn`&#x6765;&#x51b3;&#x5b9a;&#x7684;&#x3002;\n\n&#x90a3;&#x4e48;&#x4ed6;&#x4eec;&#x6709;&#x4ec0;&#x4e48;&#x533a;&#x522b;&#x5462;&#xff1f;&#x4e3b;&#x8981;&#x533a;&#x522b;&#x5728;&#x4e8e;&#x53d1;&#x6325;&#x4f5c;&#x7528;&#x7684;&#x9636;&#x6bb5;\n\n`expirationTime`&#x4f5c;&#x7528;&#x4e8e;&#x8c03;&#x5ea6;&#x9636;&#x6bb5;&#xff0c;&#x4e3b;&#x8981;&#x6307;&#x8d23;&#x662f;&#xff1a;\n\n*   &#x51b3;&#x5b9a;&#x662f;&#x5f02;&#x6b65;&#x6267;&#x884c;&#x6e32;&#x67d3;&#x8fd8;&#x662f;&#x540c;&#x6b65;&#x6267;&#x884c;&#x6e32;&#x67d3;\n*   &#x4f5c;&#x4e3a;`react-scheduler`&#x7684;`timeout`&#x6807;&#x51c6;&#xff0c;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x8981;&#x4f18;&#x5148;&#x6e32;&#x67d3;\n\n`nextExpirationTimeToWorkOn`&#x4e3b;&#x8981;&#x4f5c;&#x7528;&#x4e8e;&#x6e32;&#x67d3;&#x9636;&#x6bb5;&#xff1a;\n\n*   &#x51b3;&#x5b9a;&#x90a3;&#x4e9b;&#x66f4;&#x65b0;&#x8981;&#x5728;&#x5f53;&#x524d;&#x5468;&#x671f;&#x4e2d;&#x88ab;&#x6267;&#x884c;\n*   &#x901a;&#x8fc7;&#x8ddf;&#x6bcf;&#x4e2a;&#x8282;&#x70b9;&#x7684;`expirationTime`&#x6bd4;&#x8f83;&#x51b3;&#x5b9a;&#x8be5;&#x8282;&#x70b9;&#x662f;&#x5426;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;`bailout`&#xff08;&#x8df3;&#x8fc7;&#xff09;\n\n&#x4ed6;&#x4eec;&#x90fd;&#x662f;&#x901a;&#x8fc7;`pendingTime`&#x3001;`suspenededTime`&#x548c;`pingedTime`&#x4e2d;&#x5220;&#x9009;&#x51fa;&#x6765;&#x7684;&#xff0c;&#x552f;&#x4e00;&#x7684;&#x4e0d;&#x540c;&#x662f;&#xff0c;`nextExpirationTimeToWorkOn`&#x5728;&#x6ca1;&#x6709;`pending`&#x6216;&#x8005;`pinged`&#x7684;&#x4efb;&#x52a1;&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x9009;&#x62e9;&#x6700;&#x665a;&#x7684;`suspendedTime`&#xff0c;&#x800c;`expirationTime`&#x4f1a;&#x9009;&#x62e9;&#x6700;&#x65e9;&#x7684;\n\n`expirationTime`&#x7684;&#x53d8;&#x5316;&#xff1a;\n\n*   &#x5728;`scheduleWork`&#x7684;&#x65f6;&#x5019;&#x901a;&#x8fc7;`markPendingExpirationTime`&#x8bbe;&#x7f6e;\n*   &#x5728;`beginWork`&#x7684;&#x65f6;&#x5019;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;`NoWork`\n*   &#x5728;`onUncaughtError`&#x7684;&#x65f6;&#x5019;&#x8bbe;&#x7f6e;&#x4e3a;`NoWork`\n*   `onSuspend`&#x7684;&#x65f6;&#x5019;&#x53c8;&#x4f1a;&#x8bbe;&#x7f6e;&#x56de;&#x5f53;&#x6b21;&#x66f4;&#x65b0;&#x7684;`expirationTime`\n\n**&#x8fd9;&#x91cc;&#x7684;&#x4e0d;&#x540c;&#x9009;&#x62e9;&#x6211;&#x5230;&#x76ee;&#x524d;&#x4e5f;&#x6ca1;&#x6709;&#x975e;&#x5e38;&#x6e05;&#x6670;&#x7684;&#x7406;&#x89e3;&#xff0c;&#x5c1d;&#x8bd5;&#x8ddf;_dan_&#x6c9f;&#x901a;&#x4e86;&#x89e3;&#x6ca1;&#x5f97;&#x5230;&#x4ec0;&#x4e48;&#x53cd;&#x9988;&#xff0c;&#x8ddf;_&#x53f8;&#x5f92;&#x6b63;&#x7f8e;_&#x5927;&#x5927;&#x804a;&#x8d77;&#x8fc7;&#xff0c;&#x4ed6;&#x89c9;&#x5f97;&#x8fd9;&#x90e8;&#x5206;&#x529f;&#x80fd;&#x76ee;&#x524d;&#x5176;&#x5b9e;&#x8fd8;&#x4e0d;&#x662f;&#x7279;&#x522b;&#x7a33;&#x5b9a;&#xff0c;&#x6709;&#x4e9b;&#x4ee3;&#x7801;&#x8fd8;&#x662f;&#x6bd4;&#x8f83;&#x4e34;&#x65f6;&#x6027;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x73b0;&#x5728;&#x53ef;&#x4ee5;&#x4e0d;&#x5fc5;&#x8981;&#x592a;&#x6df1;&#x7a76;&#xff0c;&#x6240;&#x4ee5;&#x76ee;&#x524d;&#x6765;&#x8bf4;&#x5927;&#x5bb6;&#x53ea;&#x8981;&#x77e5;&#x9053;&#x4ee3;&#x7801;&#x903b;&#x8f91;&#x5c31;&#x53ef;&#x4ee5;**\n\n&#x5c55;&#x793a;&#x4e00;&#x4e0b;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"222,248"}},{"content":"<pre data-lines=\"249,281\"><code data-lines=\"249,281\"><span class=\"hljs-keyword\">function</span> findNextExpirationTimeToWorkOn(completedExpirationTime,<span class=\"hljs-built_in\"> root</span>) {\n  const earliestSuspendedTime =<span class=\"hljs-built_in\"> root</span>.earliestSuspendedTime\n  const latestSuspendedTime =<span class=\"hljs-built_in\"> root</span>.latestSuspendedTime\n  const earliestPendingTime =<span class=\"hljs-built_in\"> root</span>.earliestPendingTime\n  const latestPingedTime =<span class=\"hljs-built_in\"> root</span>.latestPingedTime\n\n  <span class=\"hljs-keyword\">let</span> nextExpirationTimeToWorkOn =\n    earliestPendingTime !== NoWork ? earliestPendingTime : latestPingedTime\n\n  <span class=\"hljs-keyword\">if</span> (\n    nextExpirationTimeToWorkOn === NoWork &amp;&amp;\n    (completedExpirationTime === NoWork ||\n      latestSuspendedTime &gt; completedExpirationTime)\n  ) {\n    nextExpirationTimeToWorkOn = latestSuspendedTime\n  }\n\n  <span class=\"hljs-keyword\">let</span> expirationTime = nextExpirationTimeToWorkOn\n  <span class=\"hljs-keyword\">if</span> (\n    expirationTime !== NoWork &amp;&amp;\n    earliestSuspendedTime !== NoWork &amp;&amp;\n    earliestSuspendedTime &lt; expirationTime\n  ) {\n    expirationTime = earliestSuspendedTime\n  }\n\n <span class=\"hljs-built_in\"> root</span>.nextExpirationTimeToWorkOn = nextExpirationTimeToWorkOn\n <span class=\"hljs-built_in\"> root</span>.expirationTime = expirationTime\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"249,281"}},{"content":"<pre data-lines=\"282,285\"><code>&#x6bcf;&#x6b21;&#x5f00;&#x59cb;&#x8c03;&#x5ea6;&#x4efb;&#x52a1;&#xff0c;&#x6216;&#x8005;&#x8bbe;&#x7f6e;`pendingTime`&#x3001;`suspendedTime`&#x3001;`pingedTime`&#x90fd;&#x4f1a;&#x8c03;&#x7528;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x91cd;&#x65b0;&#x5220;&#x9009;&#x63a5;&#x4e0b;&#x53bb;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x3002;\n\n&#x9700;&#x8981;&#x6ce8;&#x610f;&#x4e00;&#x70b9;&#xff0c;&#x5e76;&#x4e0d;&#x662f;&#x6240;&#x6709;&#x60c5;&#x51b5;&#x90fd;&#x662f;&#x4ece;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x5220;&#x9009;&#x51fa;&#x8fd9;&#x4e24;&#x4e2a;&#x503c;&#x7684;&#xff0c;&#x6bd4;&#x5982;&#x5728;`renderRoot`&#x51fa;&#x73b0;&#x9519;&#x8bef;&#x6355;&#x83b7;&#xff0c;&#x5e76;&#x4e14;&#x6ca1;&#x6709;&#x66f4;&#x4f4e;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x4efb;&#x52a1;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5f3a;&#x5236;&#x4ee5;&#x540c;&#x6b65;&#x7684;&#x65b9;&#x5f0f;&#x628a;&#x5f53;&#x524d;`expirationTime`&#x7684;&#x4efb;&#x52a1;&#x518d;&#x91cd;&#x65b0;&#x6267;&#x884c;&#x4e86;&#x4e00;&#x904d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"282,285"}},{"content":"<pre data-lines=\"286,301\"><code data-lines=\"286,301\">root.didError = <span class=\"hljs-literal\">true</span>\nconst suspendedExpirationTime = (root.nextExpirationTimeToWorkOn = expirationTime)\nconst rootExpirationTime = (root.expirationTime = Sync)\n\nonSuspend(\n<span class=\"hljs-built_in\">  root,</span>\n<span class=\"hljs-built_in\">  rootWorkInProgress,</span>\n<span class=\"hljs-built_in\">  suspendedExpirationTime,</span>\n<span class=\"hljs-built_in\">  rootExpirationTime,</span>\n  -<span class=\"hljs-number\">1</span>, \n)\n<span class=\"hljs-keyword\">return</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"286,301"}},{"content":"<pre data-lines=\"302,303\"><code>&#x8fd9;&#x91cc;&#x76f4;&#x63a5;&#x628a;`root.expirationTime`&#x8bbe;&#x7f6e;&#x4e3a;`Sync`&#xff0c;&#x7136;&#x540e;&#x76f4;&#x63a5;`return`&#xff0c;&#x8fd9;&#x6837;&#x56de;&#x5230;`performWork`&#x7684;&#x65f6;&#x5019;&#x8c03;&#x7528;`findHighestPriorityRoot`&#x4f1a;&#x76f4;&#x63a5;&#x8bbe;&#x7f6e;&#x5f53;&#x524d;`root`&#x4e3a;&#x4e0b;&#x4e00;&#x4e2a;&#x6e32;&#x67d3;&#x7684;&#x76ee;&#x6807;&#xff0c;&#x7136;&#x540e;&#x518d;&#x6b21;&#x8fdb;&#x884c;&#x6e32;&#x67d3;&#x3002;`performWork`&#x7684;&#x5faa;&#x73af;&#x6211;&#x4eec;&#x5728;`fiber-scheduler`&#x4e2d;&#x6709;&#x8be6;&#x7ec6;&#x8bb2;&#x89e3;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"302,303"}}],"payload":{"tag":"h3","lines":"220,221"}},{"content":"nextFlushedExpirationTime","children":[{"content":"<pre data-lines=\"306,309\"><code>&#x8fd9;&#x4e2a;&#x662f;&#x5728;`fiber-scheduler`&#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#xff0c;&#x7528;&#x6765;&#x8bb0;&#x5f55;&#x4e0b;&#x4e00;&#x4e2a;&#x9700;&#x8981;&#x6e32;&#x67d3;&#x7684;`FiberRoot`&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x3002;&#x6ce8;&#x610f;&#x4ed6;&#x5220;&#x9009;&#x7684;&#x65f6;&#x5019;&#x6574;&#x4e2a;&#x5e94;&#x7528;&#x4e2d;&#x6240;&#x6709;`FiberRoot`&#x7684;&#x4f18;&#x5148;&#x7ea7;&#xff08;&#x662f;&#x7684;&#xff0c;&#x4f60;&#x6ca1;&#x770b;&#x9519;&#xff0c;&#x5e94;&#x8be5; React &#x5e94;&#x7528;&#x662f;&#x53ef;&#x4ee5;&#x6709;&#x591a;&#x4e2a;`FiberRoot`&#xff0c;&#x6bd4;&#x5982;&#x4f60;&#x6267;&#x884c;&#x4e24;&#x6b21;`ReactDOM.render`&#xff09;&#xff0c;&#x5e76;&#x4e0d;&#x5173;&#x5fc3;&#x6bcf;&#x4e2a;`FiberRoot`&#x5b50;&#x6811;&#x7684;&#x4f18;&#x5148;&#x7ea7;&#x3002;\n\n&#x4ed6;&#x662f;&#x5728;`findHighestPriorityRoot`&#x4e2d;&#x88ab;&#x8d4b;&#x503c;&#x7684;&#xff0c;&#x4f1a;&#x904d;&#x5386;`firstScheduleRoot -&gt; lastScheduledRoot`&#x94fe;&#x8868;&#x4e2d;&#x6240;&#x6709;`root`&#xff0c;&#x5e76;&#x627e;&#x5230;&#x4f18;&#x5148;&#x7ea7;&#x6700;&#x9ad8;&#xff08;&#x4e5f;&#x5c31;&#x662f;`expirationTime`&#x6700;&#x5c0f;&#xff09;&#x7684;&#x90a3;&#x4e2a;`root`&#x8fdb;&#x884c;&#x8d4b;&#x503c;&#xff0c;&#x5e76;&#x5b89;&#x6392;&#x6e32;&#x67d3;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"306,309"}}],"payload":{"tag":"h3","lines":"304,305"}},{"content":"nextLatestAbsoluteTimeoutMs","children":[{"content":"<pre data-lines=\"312,315\"><code>&#x4ed6;&#x7684;&#x4f5c;&#x7528;&#x662f;&#x5728;`Suspense`&#x7ec4;&#x4ef6;&#x6355;&#x83b7;&#x5230;&#x6302;&#x8d77;&#x4e4b;&#x540e;&#xff0c;&#x589e;&#x52a0;&#x4e00;&#x4e2a;`timeout`&#x6765;&#x5f3a;&#x5236;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x4e00;&#x6b21;&#x7684;&#xff0c;&#x4e0d;&#x8fc7;&#x76ee;&#x524d;&#x770b;&#x4e0d;&#x51fa;&#x8fd9;&#x4e2a;`timeout`&#x6709;&#x4ec0;&#x4e48;&#x7528;\n\n&#x8fd9;&#x4e2a;&#x8ddf;`Suspense`&#x7ec4;&#x4ef6;&#x7684;`maxDuration`&#x6709;&#x5173;&#xff0c;&#x4f46;&#x662f;&#x5b98;&#x65b9;&#x6ca1;&#x516c;&#x5e03;&#x7528;&#x6cd5;&#xff0c;&#x4ece;&#x6e90;&#x7801;&#x4e2d;&#x4e5f;&#x770b;&#x4e0d;&#x51fa;&#x6709;&#x4ec0;&#x4e48;&#x7528;&#x5904;&#xff0c;&#x539f;&#x4ee5;&#x4e3a;&#x662f;**&#x591a;&#x5c11;&#x6beb;&#x79d2;&#x5185;&#x4e0d;&#x663e;&#x793a;`fallback`&#x7684;&#x5185;&#x5bb9;**&#xff0c;&#x7ed3;&#x679c;&#x6d4b;&#x8bd5;&#x4e86;&#x4e00;&#x4e0b;&#x53d1;&#x73b0;&#x6ca1;&#x7528;&#x3002;&#x7b49;&#x6709;&#x7a7a;&#x518d;&#x7814;&#x7a76;&#x4e00;&#x4e0b;&#xff0c;&#x6216;&#x8005;&#x7b49;&#x5b98;&#x65b9;&#x6b63;&#x5f0f;&#x53d1;&#x5e03;&#x5427;&#xff0c;_&#x6bd5;&#x7adf;&#x73b0;&#x5728;&#x5c31;&#x7b97;&#x7814;&#x7a76;&#x51fa;&#x6765;&#x4e86;&#xff0c;&#x53ef;&#x80fd;&#x5206;&#x5206;&#x949f;&#x5c31;&#x88ab;&#x6539;&#x4e86;&#xff0c;16.5 &#x7684;&#x65f6;&#x5019;&#x8fd8;&#x53eb;`delayMs`&#xff0c;16.6 &#x5c31;&#x6539;&#x6210;`maxDuration`&#x4e86;_&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"312,315"}}],"payload":{"tag":"h3","lines":"310,311"}},{"content":"currentSchedulerTime &amp; currentRendererTime","children":[{"content":"<pre data-lines=\"318,321\"><code>&#x8fd9;&#x4e24;&#x4e2a;&#x65f6;&#x95f4;&#x662f;&#x7528;&#x6765;&#x662f;&#x7528;&#x6765;&#x8bb0;&#x5f55;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#x7684;&#xff0c;&#x5728;**&#x8ba1;&#x7b97;&#x8fc7;&#x671f;&#x65f6;&#x95f4;**&#x548c;**&#x6bd4;&#x8f83;&#x4efb;&#x52a1;&#x662f;&#x5426;&#x8fc7;&#x671f;**&#x7684;&#x65f6;&#x5019;&#x90fd;&#x4f1a;&#x7528;&#x5230;`currentRendererTime`&#xff0c;`currentSchedulerTime`&#x5927;&#x90e8;&#x5206;&#x65f6;&#x5019;&#x90fd;&#x662f;&#x7b49;&#x4e8e;`currentRendererTime`&#x7684;&#xff0c;&#x90a3;&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x8bbe;&#x7f6e;&#x4e24;&#x4e2a;&#x65f6;&#x95f4;&#x5462;&#xff1f;\n\n&#x8fd9;&#x5c31;&#x662f;&#x56e0;&#x4e3a;`batchedUpdates`&#x4e86;&#xff0c;&#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#x5982;&#x679c;&#x540c;&#x65f6;&#x521b;&#x5efa;&#x4e86;&#x591a;&#x4e2a;&#x66f4;&#x65b0;&#x662f;&#x4f1a;&#x4e3a;&#x6bcf;&#x6b21;&#x66f4;&#x65b0;&#x8ba1;&#x7b97;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x7684;&#xff0c;&#x800c;&#x8ba1;&#x7b97;&#x662f;&#x8981;&#x82b1;&#x65f6;&#x95f4;&#x7684;&#xff0c;&#x5982;&#x679c;&#x6bcf;&#x6b21;&#x90fd;&#x662f;&#x8bf7;&#x6c42;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#xff0c;&#x90a3;&#x4e48;&#x540c;&#x4e00;&#x4e2a;`batch`&#x4e2d;&#x7684;&#x4e0d;&#x540c;&#x66f4;&#x65b0;&#x5f97;&#x5230;&#x7684;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#x5c31;&#x4f1a;&#x662f;&#x4e0d;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5728;&#x4e00;&#x4e2a;`batch`&#x4e2d;&#x83b7;&#x53d6;&#x7684;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#x5e94;&#x8be5;&#x662f;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5c31;&#x8bbe;&#x7f6e;&#x4e86;&#x8fd9;&#x4e48;&#x4e00;&#x4e2a;&#x503c;&#xff0c;&#x5728;&#x6211;&#x4eec;&#x8bf7;&#x6c42;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#x7684;&#x65b9;&#x6cd5;&#x4e2d;&#x6709;&#x8fd9;&#x4e48;&#x4e00;&#x6bb5;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"318,321"}},{"content":"<pre data-lines=\"322,334\"><code data-lines=\"322,334\"><span class=\"hljs-function\"><span class=\"hljs-title\">findHighestPriorityRoot</span>()</span>\n<span class=\"hljs-variable\"><span class=\"hljs-keyword\">if</span></span> (\n  <span class=\"hljs-variable\">nextFlushedExpirationTime</span> === <span class=\"hljs-variable\">NoWork</span> ||\n  <span class=\"hljs-variable\">nextFlushedExpirationTime</span> === <span class=\"hljs-variable\">Never</span>\n) {\n  <span class=\"hljs-function\"><span class=\"hljs-title\">recomputeCurrentRendererTime</span>()</span>\n  <span class=\"hljs-variable\">currentSchedulerTime</span> = <span class=\"hljs-variable\">currentRendererTime</span>\n  <span class=\"hljs-variable\">return</span> <span class=\"hljs-variable\">currentSchedulerTime</span>\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"322,334"}},{"content":"<pre data-lines=\"335,336\"><code>`findHighestPriorityRoot`&#x4f1a;&#x8bbe;&#x7f6e;`nextFlushedExpirationTime`&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x53ea;&#x6709;&#x5728;&#x5f53;&#x524d;&#x6ca1;&#x6709;&#x7b49;&#x5f85;&#x4e2d;&#x7684;&#x66f4;&#x65b0;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x624d;&#x4f1a;&#x91cd;&#x65b0;&#x8ba1;&#x7b97;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"335,336"}}],"payload":{"tag":"h3","lines":"316,317"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
