<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Vue","children":[{"content":"<pre data-lines=\"6,1020\"><code class=\"language-js\"> <span class=\"hljs-comment\">// &#x24;emit&#x76f4;&#x63a5;&#x6267;&#x884c;&#x51fd;&#x6570;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;emit</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    {\n      <span class=\"hljs-keyword\">var</span> lowerCaseEvent = event.<span class=\"hljs-title function_\">toLowerCase</span>();\n      <span class=\"hljs-keyword\">if</span> (lowerCaseEvent !== event &amp;&amp; vm.<span class=\"hljs-property\">_events</span>[lowerCaseEvent]) {\n        <span class=\"hljs-title function_\">tip</span>(\n          <span class=\"hljs-string\">&quot;Event \\&quot;&quot;</span> + lowerCaseEvent + <span class=\"hljs-string\">&quot;\\&quot; is emitted in component &quot;</span> +\n          (<span class=\"hljs-title function_\">formatComponentName</span>(vm)) + <span class=\"hljs-string\">&quot; but the handler is registered for \\&quot;&quot;</span> + event + <span class=\"hljs-string\">&quot;\\&quot;. &quot;</span> +\n          <span class=\"hljs-string\">&quot;Note that HTML attributes are case-insensitive and you cannot use &quot;</span> +\n          <span class=\"hljs-string\">&quot;v-on to listen to camelCase events when using in-DOM templates. &quot;</span> +\n          <span class=\"hljs-string\">&quot;You should probably use \\&quot;&quot;</span> + (<span class=\"hljs-title function_\">hyphenate</span>(event)) + <span class=\"hljs-string\">&quot;\\&quot; instead of \\&quot;&quot;</span> + event + <span class=\"hljs-string\">&quot;\\&quot;.&quot;</span>\n        );\n      }\n    }\n    <span class=\"hljs-keyword\">var</span> cbs = vm.<span class=\"hljs-property\">_events</span>[event];\n    <span class=\"hljs-keyword\">if</span> (cbs) {\n      cbs = cbs.<span class=\"hljs-property\">length</span> &gt; <span class=\"hljs-number\">1</span> ? <span class=\"hljs-title function_\">toArray</span>(cbs) : cbs;\n      <span class=\"hljs-keyword\">var</span> args = <span class=\"hljs-title function_\">toArray</span>(<span class=\"hljs-variable language_\">arguments</span>, <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, l = cbs.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        <span class=\"hljs-keyword\">try</span> {\n          cbs[i].<span class=\"hljs-title function_\">apply</span>(vm, args);\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n          <span class=\"hljs-title function_\">handleError</span>(e, vm, (<span class=\"hljs-string\">&quot;event handler for \\&quot;&quot;</span> + event + <span class=\"hljs-string\">&quot;\\&quot;&quot;</span>));\n        }\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> vm\n  };\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n\n\n<span class=\"hljs-comment\">/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */</span>\n<span class=\"hljs-comment\">// &#x89e3;&#x51b3;&#x6a21;&#x677f;&#x548c;&#x7ec4;&#x4ef6;&#x4e2d;&#x7684;slot,slot&#x5c5e;&#x6027;&#x4e3a;&#x7a7a;&#x7684;&#x81ea;&#x52a8;&#x6e05;&#x9664;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resolveSlots</span> (<span class=\"hljs-params\">\n  children,\n  context\n</span>) {\n  <span class=\"hljs-keyword\">var</span> slots = {};\n  <span class=\"hljs-comment\">//</span>\n  <span class=\"hljs-keyword\">if</span> (!children) {\n    <span class=\"hljs-keyword\">return</span> slots\n  }\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, l = children.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n    <span class=\"hljs-keyword\">var</span> child = children[i];\n    <span class=\"hljs-keyword\">var</span> data = child.<span class=\"hljs-property\">data</span>;\n    <span class=\"hljs-comment\">// &#x5148;&#x6e05;&#x9664;slots&#x5c5e;&#x6027;</span>\n    <span class=\"hljs-comment\">// remove slot attribute if the node is resolved as a Vue slot node</span>\n    <span class=\"hljs-keyword\">if</span> (data &amp;&amp; data.<span class=\"hljs-property\">attrs</span> &amp;&amp; data.<span class=\"hljs-property\">attrs</span>.<span class=\"hljs-property\">slot</span>) {\n      <span class=\"hljs-keyword\">delete</span> data.<span class=\"hljs-property\">attrs</span>.<span class=\"hljs-property\">slot</span>;\n    }\n    <span class=\"hljs-comment\">// named slots should only be respected if the vnode was rendered in the</span>\n    <span class=\"hljs-comment\">// same context.</span>\n    <span class=\"hljs-keyword\">if</span> ((child.<span class=\"hljs-property\">context</span> === context || child.<span class=\"hljs-property\">fnContext</span> === context) &amp;&amp;\n      data &amp;&amp; data.<span class=\"hljs-property\">slot</span> != <span class=\"hljs-literal\">null</span>\n    ) {\n      <span class=\"hljs-keyword\">var</span> name = data.<span class=\"hljs-property\">slot</span>;\n      <span class=\"hljs-keyword\">var</span> slot = (slots[name] || (slots[name] = []));\n      <span class=\"hljs-keyword\">if</span> (child.<span class=\"hljs-property\">tag</span> === <span class=\"hljs-string\">&apos;template&apos;</span>) {\n        slot.<span class=\"hljs-property\">push</span>.<span class=\"hljs-title function_\">apply</span>(slot, child.<span class=\"hljs-property\">children</span> || []);\n      } <span class=\"hljs-keyword\">else</span> {\n        slot.<span class=\"hljs-title function_\">push</span>(child);\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      (slots.<span class=\"hljs-property\">default</span> || (slots.<span class=\"hljs-property\">default</span> = [])).<span class=\"hljs-title function_\">push</span>(child);\n    }\n  }\n  <span class=\"hljs-comment\">// ignore slots that contains only whitespace</span>\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> name&#x24;1 <span class=\"hljs-keyword\">in</span> slots) {\n    <span class=\"hljs-keyword\">if</span> (slots[name&#x24;1].<span class=\"hljs-title function_\">every</span>(isWhitespace)) {\n      <span class=\"hljs-keyword\">delete</span> slots[name&#x24;1];\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> slots\n}\n<span class=\"hljs-comment\">// &#x662f;&#x5426;&#x662f;&#x7a7a;&#x767d;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isWhitespace</span> (<span class=\"hljs-params\">node</span>) {\n  <span class=\"hljs-keyword\">return</span> (node.<span class=\"hljs-property\">isComment</span> &amp;&amp; !node.<span class=\"hljs-property\">asyncFactory</span>) || node.<span class=\"hljs-property\">text</span> === <span class=\"hljs-string\">&apos; &apos;</span>\n}\n<span class=\"hljs-comment\">// &#x89e3;&#x51b3;scope-slot</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resolveScopedSlots</span> (<span class=\"hljs-params\">\n  fns, <span class=\"hljs-comment\">// see flow/vnode</span>\n  res\n</span>) {\n  res = res || {};\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; fns.<span class=\"hljs-property\">length</span>; i++) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(fns[i])) {\n      <span class=\"hljs-title function_\">resolveScopedSlots</span>(fns[i], res);\n    } <span class=\"hljs-keyword\">else</span> {\n      res[fns[i].<span class=\"hljs-property\">key</span>] = fns[i].<span class=\"hljs-property\">fn</span>;\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> res\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n<span class=\"hljs-keyword\">var</span> activeInstance = <span class=\"hljs-literal\">null</span>;\n<span class=\"hljs-keyword\">var</span> isUpdatingChildComponent = <span class=\"hljs-literal\">false</span>;\n<span class=\"hljs-comment\">// &#x751f;&#x547d;&#x5468;&#x671f;&#x521d;&#x59cb;&#x5316;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initLifecycle</span> (<span class=\"hljs-params\">vm</span>) {\n  <span class=\"hljs-keyword\">var</span> options = vm.<span class=\"hljs-property\">&#x24;options</span>;\n  <span class=\"hljs-keyword\">var</span> parent = options.<span class=\"hljs-property\">parent</span>;\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e; parent,&#x5982;&#x679c;parent.&#x24;parent,&#x5373;&#x4e3a;parent</span>\n  <span class=\"hljs-keyword\">if</span> (parent &amp;&amp; !options.<span class=\"hljs-property\">abstract</span>) {\n    <span class=\"hljs-keyword\">while</span> (parent.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">abstract</span> &amp;&amp; parent.<span class=\"hljs-property\">&#x24;parent</span>) {\n      parent = parent.<span class=\"hljs-property\">&#x24;parent</span>;\n    }\n    parent.<span class=\"hljs-property\">&#x24;children</span>.<span class=\"hljs-title function_\">push</span>(vm);\n  }\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x24;parent</span>\n  vm.<span class=\"hljs-property\">&#x24;parent</span> = parent;\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x24;root</span>\n  vm.<span class=\"hljs-property\">&#x24;root</span> = parent ? parent.<span class=\"hljs-property\">&#x24;root</span> : vm;\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x24;children</span>\n  vm.<span class=\"hljs-property\">&#x24;children</span> = [];\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x24;refs</span>\n  vm.<span class=\"hljs-property\">&#x24;refs</span> = {};\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;_watcher,_inactive,_directInactive,_isMounted,_isDestroyed,_isBeingDestroyed&#x5c5e;&#x6027;&#xff0c;&#x4e3a;&#x751f;&#x547d;&#x5468;&#x671f;&#x505a;&#x51c6;&#x5907;</span>\n  vm.<span class=\"hljs-property\">_watcher</span> = <span class=\"hljs-literal\">null</span>;\n  vm.<span class=\"hljs-property\">_inactive</span> = <span class=\"hljs-literal\">null</span>;\n  vm.<span class=\"hljs-property\">_directInactive</span> = <span class=\"hljs-literal\">false</span>;\n  vm.<span class=\"hljs-property\">_isMounted</span> = <span class=\"hljs-literal\">false</span>;\n  vm.<span class=\"hljs-property\">_isDestroyed</span> = <span class=\"hljs-literal\">false</span>;\n  vm.<span class=\"hljs-property\">_isBeingDestroyed</span> = <span class=\"hljs-literal\">false</span>;\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">lifecycleMixin</span> (<span class=\"hljs-params\">Vue</span>) {\n  <span class=\"hljs-comment\">// &#x751f;&#x547d;&#x5468;&#x671f;update&#x5728;mounted&#x4e4b;&#x540e;&#x6267;&#x884c;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">_update</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">vnode, hydrating</span>) {\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_isMounted</span>) {\n      <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;beforeUpdate&apos;</span>);\n    }\n    <span class=\"hljs-keyword\">var</span> prevEl = vm.<span class=\"hljs-property\">&#x24;el</span>;\n    <span class=\"hljs-keyword\">var</span> prevVnode = vm.<span class=\"hljs-property\">_vnode</span>;\n    <span class=\"hljs-keyword\">var</span> prevActiveInstance = activeInstance;\n    activeInstance = vm;\n    vm.<span class=\"hljs-property\">_vnode</span> = vnode;\n    <span class=\"hljs-comment\">// Vue.prototype.__patch__ is injected in entry points</span>\n    <span class=\"hljs-comment\">// based on the rendering backend used.</span>\n    <span class=\"hljs-keyword\">if</span> (!prevVnode) {\n      <span class=\"hljs-comment\">// initial render</span>\n      vm.<span class=\"hljs-property\">&#x24;el</span> = vm.<span class=\"hljs-title function_\">__patch__</span>(\n        vm.<span class=\"hljs-property\">&#x24;el</span>, vnode, hydrating, <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\">/* removeOnly */</span>,\n        vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentElm</span>,\n        vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_refElm</span>\n      );\n      <span class=\"hljs-comment\">// no need for the ref nodes after initial patch</span>\n      <span class=\"hljs-comment\">// this prevents keeping a detached DOM tree in memory (#5851)</span>\n      vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentElm</span> = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_refElm</span> = <span class=\"hljs-literal\">null</span>;\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-comment\">// updates</span>\n      vm.<span class=\"hljs-property\">&#x24;el</span> = vm.<span class=\"hljs-title function_\">__patch__</span>(prevVnode, vnode);\n    }\n    activeInstance = prevActiveInstance;\n    <span class=\"hljs-comment\">// update __vue__ reference</span>\n    <span class=\"hljs-keyword\">if</span> (prevEl) {\n      prevEl.<span class=\"hljs-property\">__vue__</span> = <span class=\"hljs-literal\">null</span>;\n    }\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;el</span>) {\n      vm.<span class=\"hljs-property\">&#x24;el</span>.<span class=\"hljs-property\">__vue__</span> = vm;\n    }\n    <span class=\"hljs-comment\">// if parent is an HOC, update its &#x24;el as well</span>\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;vnode</span> &amp;&amp; vm.<span class=\"hljs-property\">&#x24;parent</span> &amp;&amp; vm.<span class=\"hljs-property\">&#x24;vnode</span> === vm.<span class=\"hljs-property\">&#x24;parent</span>.<span class=\"hljs-property\">_vnode</span>) {\n      vm.<span class=\"hljs-property\">&#x24;parent</span>.<span class=\"hljs-property\">&#x24;el</span> = vm.<span class=\"hljs-property\">&#x24;el</span>;\n    }\n    <span class=\"hljs-comment\">// updated hook is called by the scheduler to ensure that children are</span>\n    <span class=\"hljs-comment\">// updated in a parent&apos;s updated hook.</span>\n  };\n  <span class=\"hljs-comment\">// &#x76d1;&#x542c;&#x5668;&#x8ddf;&#x65b0;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;forceUpdate</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_watcher</span>) {\n      vm.<span class=\"hljs-property\">_watcher</span>.<span class=\"hljs-title function_\">update</span>();\n    }\n  };\n  <span class=\"hljs-comment\">// &#x7ec4;&#x4ef6;&#x9500;&#x6bc1;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;destroy</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_isBeingDestroyed</span>) {\n      <span class=\"hljs-keyword\">return</span>\n    }\n    <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;beforeDestroy&apos;</span>);\n    vm.<span class=\"hljs-property\">_isBeingDestroyed</span> = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-comment\">// remove self from parent</span>\n    <span class=\"hljs-keyword\">var</span> parent = vm.<span class=\"hljs-property\">&#x24;parent</span>;\n    <span class=\"hljs-keyword\">if</span> (parent &amp;&amp; !parent.<span class=\"hljs-property\">_isBeingDestroyed</span> &amp;&amp; !vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">abstract</span>) {\n      <span class=\"hljs-title function_\">remove</span>(parent.<span class=\"hljs-property\">&#x24;children</span>, vm);\n    }\n    <span class=\"hljs-comment\">// teardown watchers</span>\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_watcher</span>) {\n      vm.<span class=\"hljs-property\">_watcher</span>.<span class=\"hljs-title function_\">teardown</span>();\n    }\n    <span class=\"hljs-keyword\">var</span> i = vm.<span class=\"hljs-property\">_watchers</span>.<span class=\"hljs-property\">length</span>;\n    <span class=\"hljs-keyword\">while</span> (i--) {\n      vm.<span class=\"hljs-property\">_watchers</span>[i].<span class=\"hljs-title function_\">teardown</span>();\n    }\n    <span class=\"hljs-comment\">// remove reference from data ob</span>\n    <span class=\"hljs-comment\">// frozen object may not have observer.</span>\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_data</span>.<span class=\"hljs-property\">__ob__</span>) {\n      vm.<span class=\"hljs-property\">_data</span>.<span class=\"hljs-property\">__ob__</span>.<span class=\"hljs-property\">vmCount</span>--;\n    }\n    <span class=\"hljs-comment\">// call the last hook...</span>\n    vm.<span class=\"hljs-property\">_isDestroyed</span> = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-comment\">// invoke destroy hooks on current rendered tree</span>\n    vm.<span class=\"hljs-title function_\">__patch__</span>(vm.<span class=\"hljs-property\">_vnode</span>, <span class=\"hljs-literal\">null</span>);\n    <span class=\"hljs-comment\">// fire destroyed hook</span>\n    <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;destroyed&apos;</span>);\n    <span class=\"hljs-comment\">// turn off all instance listeners.</span>\n    vm.&#x24;off();\n    <span class=\"hljs-comment\">// remove __vue__ reference</span>\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;el</span>) {\n      vm.<span class=\"hljs-property\">&#x24;el</span>.<span class=\"hljs-property\">__vue__</span> = <span class=\"hljs-literal\">null</span>;\n    }\n    <span class=\"hljs-comment\">// release circular reference (#6759)</span>\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;vnode</span>) {\n      vm.<span class=\"hljs-property\">&#x24;vnode</span>.<span class=\"hljs-property\">parent</span> = <span class=\"hljs-literal\">null</span>;\n    }\n  };\n}\n<span class=\"hljs-comment\">// &#x7ec4;&#x4ef6;&#x6302;&#x8f7d;&#xff0c;&#x6216;&#x5148;&#x6267;&#x884c;beforeMount,&#x5728;&#x6302;&#x8f7d;&#x6e32;&#x67d3;&#xff0c;&#x5e76;&#x76d1;&#x542c;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">mountComponent</span> (<span class=\"hljs-params\">\n  vm,\n  el,\n  hydrating\n</span>) {\n  vm.<span class=\"hljs-property\">&#x24;el</span> = el;\n  <span class=\"hljs-keyword\">if</span> (!vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">render</span>) {\n    vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">render</span> = createEmptyVNode;\n    {\n      <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n      <span class=\"hljs-keyword\">if</span> ((vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">template</span> &amp;&amp; vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">template</span>.<span class=\"hljs-title function_\">charAt</span>(<span class=\"hljs-number\">0</span>) !== <span class=\"hljs-string\">&apos;#&apos;</span>) ||\n        vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">el</span> || el) {\n        <span class=\"hljs-title function_\">warn</span>(\n          <span class=\"hljs-string\">&apos;You are using the runtime-only build of Vue where the template &apos;</span> +\n          <span class=\"hljs-string\">&apos;compiler is not available. Either pre-compile the templates into &apos;</span> +\n          <span class=\"hljs-string\">&apos;render functions, or use the compiler-included build.&apos;</span>,\n          vm\n        );\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-title function_\">warn</span>(\n          <span class=\"hljs-string\">&apos;Failed to mount component: template or render function not defined.&apos;</span>,\n          vm\n        );\n      }\n    }\n  }\n  <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;beforeMount&apos;</span>);\n\n  <span class=\"hljs-keyword\">var</span> updateComponent;\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; config.<span class=\"hljs-property\">performance</span> &amp;&amp; mark) {\n    updateComponent = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">var</span> name = vm.<span class=\"hljs-property\">_name</span>;\n      <span class=\"hljs-keyword\">var</span> id = vm.<span class=\"hljs-property\">_uid</span>;\n      <span class=\"hljs-keyword\">var</span> startTag = <span class=\"hljs-string\">&quot;vue-perf-start:&quot;</span> + id;\n      <span class=\"hljs-keyword\">var</span> endTag = <span class=\"hljs-string\">&quot;vue-perf-end:&quot;</span> + id;\n\n      <span class=\"hljs-title function_\">mark</span>(startTag);\n      <span class=\"hljs-keyword\">var</span> vnode = vm.<span class=\"hljs-title function_\">_render</span>();\n      <span class=\"hljs-title function_\">mark</span>(endTag);\n      <span class=\"hljs-title function_\">measure</span>((<span class=\"hljs-string\">&quot;vue &quot;</span> + name + <span class=\"hljs-string\">&quot; render&quot;</span>), startTag, endTag);\n\n      <span class=\"hljs-title function_\">mark</span>(startTag);\n      vm.<span class=\"hljs-title function_\">_update</span>(vnode, hydrating);\n      <span class=\"hljs-title function_\">mark</span>(endTag);\n      <span class=\"hljs-title function_\">measure</span>((<span class=\"hljs-string\">&quot;vue &quot;</span> + name + <span class=\"hljs-string\">&quot; patch&quot;</span>), startTag, endTag);\n    };\n  } <span class=\"hljs-keyword\">else</span> {\n    updateComponent = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n      vm.<span class=\"hljs-title function_\">_update</span>(vm.<span class=\"hljs-title function_\">_render</span>(), hydrating);\n    };\n  }\n\n  <span class=\"hljs-comment\">// we set this to vm._watcher inside the watcher&apos;s constructor</span>\n  <span class=\"hljs-comment\">// since the watcher&apos;s initial patch may call &#x24;forceUpdate (e.g. inside child</span>\n  <span class=\"hljs-comment\">// component&apos;s mounted hook), which relies on vm._watcher being already defined</span>\n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(vm, updateComponent, noop, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">/* isRenderWatcher */</span>);\n  hydrating = <span class=\"hljs-literal\">false</span>;\n\n  <span class=\"hljs-comment\">// manually mounted instance, call mounted on self</span>\n  <span class=\"hljs-comment\">// mounted is called for render-created child components in its inserted hook</span>\n  <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;vnode</span> == <span class=\"hljs-literal\">null</span>) {\n    vm.<span class=\"hljs-property\">_isMounted</span> = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;mounted&apos;</span>);\n  }\n  <span class=\"hljs-keyword\">return</span> vm\n}\n<span class=\"hljs-comment\">// &#x8ddf;&#x65b0;&#x5b50;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateChildComponent</span> (<span class=\"hljs-params\">\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n</span>) {\n  {\n    isUpdatingChildComponent = <span class=\"hljs-literal\">true</span>;\n  }\n\n  <span class=\"hljs-comment\">// determine whether component has slot children</span>\n  <span class=\"hljs-comment\">// we need to do this before overwriting &#x24;options._renderChildren</span>\n  <span class=\"hljs-keyword\">var</span> hasChildren = !!(\n    renderChildren ||               <span class=\"hljs-comment\">// has new static slots</span>\n    vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_renderChildren</span> ||  <span class=\"hljs-comment\">// has old static slots</span>\n    parentVnode.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">scopedSlots</span> || <span class=\"hljs-comment\">// has new scoped slots</span>\n    vm.<span class=\"hljs-property\">&#x24;scopedSlots</span> !== emptyObject <span class=\"hljs-comment\">// has old scoped slots</span>\n  );\n\n  vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentVnode</span> = parentVnode;\n  vm.<span class=\"hljs-property\">&#x24;vnode</span> = parentVnode; <span class=\"hljs-comment\">// update vm&apos;s placeholder node without re-render</span>\n\n  <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_vnode</span>) { <span class=\"hljs-comment\">// update child tree&apos;s parent</span>\n    vm.<span class=\"hljs-property\">_vnode</span>.<span class=\"hljs-property\">parent</span> = parentVnode;\n  }\n  vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_renderChildren</span> = renderChildren;\n\n  <span class=\"hljs-comment\">// update &#x24;attrs and &#x24;listeners hash</span>\n  <span class=\"hljs-comment\">// these are also reactive so they may trigger child update if the child</span>\n  <span class=\"hljs-comment\">// used them during render</span>\n  vm.<span class=\"hljs-property\">&#x24;attrs</span> = parentVnode.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">attrs</span> || emptyObject;\n  vm.<span class=\"hljs-property\">&#x24;listeners</span> = listeners || emptyObject;\n\n  <span class=\"hljs-comment\">// update props</span>\n  <span class=\"hljs-keyword\">if</span> (propsData &amp;&amp; vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">props</span>) {\n    <span class=\"hljs-title function_\">toggleObserving</span>(<span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-keyword\">var</span> props = vm.<span class=\"hljs-property\">_props</span>;\n    <span class=\"hljs-keyword\">var</span> propKeys = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_propKeys</span> || [];\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; propKeys.<span class=\"hljs-property\">length</span>; i++) {\n      <span class=\"hljs-keyword\">var</span> key = propKeys[i];\n      <span class=\"hljs-keyword\">var</span> propOptions = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">props</span>; <span class=\"hljs-comment\">// wtf flow?</span>\n      props[key] = <span class=\"hljs-title function_\">validateProp</span>(key, propOptions, propsData, vm);\n    }\n    <span class=\"hljs-title function_\">toggleObserving</span>(<span class=\"hljs-literal\">true</span>);\n    <span class=\"hljs-comment\">// keep a copy of raw propsData</span>\n    vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">propsData</span> = propsData;\n  }\n\n  <span class=\"hljs-comment\">// update listeners</span>\n  listeners = listeners || emptyObject;\n  <span class=\"hljs-keyword\">var</span> oldListeners = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentListeners</span>;\n  vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentListeners</span> = listeners;\n  <span class=\"hljs-title function_\">updateComponentListeners</span>(vm, listeners, oldListeners);\n\n  <span class=\"hljs-comment\">// resolve slots + force update if has children</span>\n  <span class=\"hljs-keyword\">if</span> (hasChildren) {\n    vm.<span class=\"hljs-property\">&#x24;slots</span> = <span class=\"hljs-title function_\">resolveSlots</span>(renderChildren, parentVnode.<span class=\"hljs-property\">context</span>);\n    vm.&#x24;forceUpdate();\n  }\n\n  {\n    isUpdatingChildComponent = <span class=\"hljs-literal\">false</span>;\n  }\n}\n<span class=\"hljs-comment\">// &#x662f;&#x5426;&#x5904;&#x4e8e;&#x6fc0;&#x6d3b;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isInInactiveTree</span> (<span class=\"hljs-params\">vm</span>) {\n  <span class=\"hljs-keyword\">while</span> (vm &amp;&amp; (vm = vm.<span class=\"hljs-property\">&#x24;parent</span>)) {\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_inactive</span>) { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span> }\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n}\n<span class=\"hljs-comment\">// active&#x5468;&#x671f;&#xff0c;&#x5fc5;&#x987b;&#x662f;&#x4f7f;&#x7528;kepp-alive&#x7684;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">activateChildComponent</span> (<span class=\"hljs-params\">vm, direct</span>) {\n  <span class=\"hljs-keyword\">if</span> (direct) {\n    vm.<span class=\"hljs-property\">_directInactive</span> = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isInInactiveTree</span>(vm)) {\n      <span class=\"hljs-keyword\">return</span>\n    }\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_directInactive</span>) {\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_inactive</span> || vm.<span class=\"hljs-property\">_inactive</span> === <span class=\"hljs-literal\">null</span>) {\n    vm.<span class=\"hljs-property\">_inactive</span> = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; vm.<span class=\"hljs-property\">&#x24;children</span>.<span class=\"hljs-property\">length</span>; i++) {\n      <span class=\"hljs-title function_\">activateChildComponent</span>(vm.<span class=\"hljs-property\">&#x24;children</span>[i]);\n    }\n    <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;activated&apos;</span>);\n  }\n}\n<span class=\"hljs-comment\">// deactive&#x5468;&#x671f;&#xff0c;&#x5fc5;&#x987b;&#x662f;&#x4f7f;&#x7528;kepp-alive&#x7684;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">deactivateChildComponent</span> (<span class=\"hljs-params\">vm, direct</span>) {\n  <span class=\"hljs-keyword\">if</span> (direct) {\n    vm.<span class=\"hljs-property\">_directInactive</span> = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isInInactiveTree</span>(vm)) {\n      <span class=\"hljs-keyword\">return</span>\n    }\n  }\n  <span class=\"hljs-keyword\">if</span> (!vm.<span class=\"hljs-property\">_inactive</span>) {\n    vm.<span class=\"hljs-property\">_inactive</span> = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; vm.<span class=\"hljs-property\">&#x24;children</span>.<span class=\"hljs-property\">length</span>; i++) {\n      <span class=\"hljs-title function_\">deactivateChildComponent</span>(vm.<span class=\"hljs-property\">&#x24;children</span>[i]);\n    }\n    <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;deactivated&apos;</span>);\n  }\n}\n<span class=\"hljs-comment\">// &#x751f;&#x547d;&#x5468;&#x671f;&#x56de;&#x8c03;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">callHook</span> (<span class=\"hljs-params\">vm, hook</span>) {\n  <span class=\"hljs-comment\">// #7573 disable dep collection when invoking lifecycle hooks</span>\n  <span class=\"hljs-title function_\">pushTarget</span>();\n  <span class=\"hljs-keyword\">var</span> handlers = vm.<span class=\"hljs-property\">&#x24;options</span>[hook];\n  <span class=\"hljs-keyword\">if</span> (handlers) {\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, j = handlers.<span class=\"hljs-property\">length</span>; i &lt; j; i++) {\n      <span class=\"hljs-keyword\">try</span> {\n        handlers[i].<span class=\"hljs-title function_\">call</span>(vm);\n      } <span class=\"hljs-keyword\">catch</span> (e) {\n        <span class=\"hljs-title function_\">handleError</span>(e, vm, (hook + <span class=\"hljs-string\">&quot; hook&quot;</span>));\n      }\n    }\n  }\n  <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_hasHookEvent</span>) {\n    vm.&#x24;emit(<span class=\"hljs-string\">&apos;hook:&apos;</span> + hook);\n  }\n  <span class=\"hljs-title function_\">popTarget</span>();\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n<span class=\"hljs-comment\">// &#x6700;&#x5927;&#x8ddf;&#x65b0;&#x7684;&#x65f6;&#x95f4;&#x95f4;&#x9694;&#x662f;100&#x6beb;&#x79d2;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">MAX_UPDATE_COUNT</span> = <span class=\"hljs-number\">100</span>;\n\n<span class=\"hljs-keyword\">var</span> queue = [];\n<span class=\"hljs-keyword\">var</span> activatedChildren = [];\n<span class=\"hljs-keyword\">var</span> has = {};\n<span class=\"hljs-keyword\">var</span> circular = {};\n<span class=\"hljs-keyword\">var</span> waiting = <span class=\"hljs-literal\">false</span>;\n<span class=\"hljs-keyword\">var</span> flushing = <span class=\"hljs-literal\">false</span>;\n<span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n\n<span class=\"hljs-comment\">/**\n * Reset the scheduler&apos;s state.\n */</span>\n<span class=\"hljs-comment\">//&#x91cd;&#x7f6e;&#x65f6;&#x523b;&#x8868;&#x72b6;&#x6001;&#xff0c;&#x4e0d;&#x77e5;&#x9053;&#x5e72;&#x561b;&#x7684;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resetSchedulerState</span> (<span class=\"hljs-params\"></span>) {\n  index = queue.<span class=\"hljs-property\">length</span> = activatedChildren.<span class=\"hljs-property\">length</span> = <span class=\"hljs-number\">0</span>;\n  has = {};\n  {\n    circular = {};\n  }\n  waiting = flushing = <span class=\"hljs-literal\">false</span>;\n}\n\n<span class=\"hljs-comment\">/**\n * Flush both queues and run the watchers.\n */</span>\n<span class=\"hljs-comment\">// &#x6267;&#x884c;&#x76d1;&#x542c;&#x5668;watcher&#x7684;&#x56de;&#x8c03;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">flushSchedulerQueue</span> (<span class=\"hljs-params\"></span>) {\n  flushing = <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-keyword\">var</span> watcher, id;\n\n  <span class=\"hljs-comment\">// Sort queue before flush.</span>\n  <span class=\"hljs-comment\">// This ensures that:</span>\n  <span class=\"hljs-comment\">// 1. Components are updated from parent to child. (because parent is always</span>\n  <span class=\"hljs-comment\">//    created before the child)</span>\n  <span class=\"hljs-comment\">// 2. A component&apos;s user watchers are run before its render watcher (because</span>\n  <span class=\"hljs-comment\">//    user watchers are created before the render watcher)</span>\n  <span class=\"hljs-comment\">// 3. If a component is destroyed during a parent component&apos;s watcher run,</span>\n  <span class=\"hljs-comment\">//    its watchers can be skipped.</span>\n  queue.<span class=\"hljs-title function_\">sort</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">a, b</span>) { <span class=\"hljs-keyword\">return</span> a.<span class=\"hljs-property\">id</span> - b.<span class=\"hljs-property\">id</span>; });\n\n  <span class=\"hljs-comment\">// do not cache length because more watchers might be pushed</span>\n  <span class=\"hljs-comment\">// as we run existing watchers</span>\n  <span class=\"hljs-keyword\">for</span> (index = <span class=\"hljs-number\">0</span>; index &lt; queue.<span class=\"hljs-property\">length</span>; index++) {\n    watcher = queue[index];\n    id = watcher.<span class=\"hljs-property\">id</span>;\n    has[id] = <span class=\"hljs-literal\">null</span>;\n    watcher.<span class=\"hljs-title function_\">run</span>();\n    <span class=\"hljs-comment\">// in dev build, check and stop circular updates.</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; has[id] != <span class=\"hljs-literal\">null</span>) {\n      circular[id] = (circular[id] || <span class=\"hljs-number\">0</span>) + <span class=\"hljs-number\">1</span>;\n      <span class=\"hljs-keyword\">if</span> (circular[id] &gt; <span class=\"hljs-variable constant_\">MAX_UPDATE_COUNT</span>) {\n        <span class=\"hljs-title function_\">warn</span>(\n          <span class=\"hljs-string\">&apos;You may have an infinite update loop &apos;</span> + (\n            watcher.<span class=\"hljs-property\">user</span>\n              ? (<span class=\"hljs-string\">&quot;in watcher with expression \\&quot;&quot;</span> + (watcher.<span class=\"hljs-property\">expression</span>) + <span class=\"hljs-string\">&quot;\\&quot;&quot;</span>)\n              : <span class=\"hljs-string\">&quot;in a component render function.&quot;</span>\n          ),\n          watcher.<span class=\"hljs-property\">vm</span>\n        );\n        <span class=\"hljs-keyword\">break</span>\n      }\n    }\n  }\n\n  <span class=\"hljs-comment\">// keep copies of post queues before resetting state</span>\n  <span class=\"hljs-keyword\">var</span> activatedQueue = activatedChildren.<span class=\"hljs-title function_\">slice</span>();\n  <span class=\"hljs-keyword\">var</span> updatedQueue = queue.<span class=\"hljs-title function_\">slice</span>();\n\n  <span class=\"hljs-title function_\">resetSchedulerState</span>();\n\n  <span class=\"hljs-comment\">// call component updated and activated hooks</span>\n  <span class=\"hljs-title function_\">callActivatedHooks</span>(activatedQueue);\n  <span class=\"hljs-title function_\">callUpdatedHooks</span>(updatedQueue);\n\n  <span class=\"hljs-comment\">// devtool hook</span>\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (devtools &amp;&amp; config.<span class=\"hljs-property\">devtools</span>) {\n    devtools.<span class=\"hljs-title function_\">emit</span>(<span class=\"hljs-string\">&apos;flush&apos;</span>);\n  }\n}\n<span class=\"hljs-comment\">// &#x6267;&#x884c;updated&#x5468;&#x671f;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">callUpdatedHooks</span> (<span class=\"hljs-params\">queue</span>) {\n  <span class=\"hljs-keyword\">var</span> i = queue.<span class=\"hljs-property\">length</span>;\n  <span class=\"hljs-keyword\">while</span> (i--) {\n    <span class=\"hljs-keyword\">var</span> watcher = queue[i];\n    <span class=\"hljs-keyword\">var</span> vm = watcher.<span class=\"hljs-property\">vm</span>;\n    <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">_watcher</span> === watcher &amp;&amp; vm.<span class=\"hljs-property\">_isMounted</span>) {\n      <span class=\"hljs-title function_\">callHook</span>(vm, <span class=\"hljs-string\">&apos;updated&apos;</span>);\n    }\n  }\n}\n\n<span class=\"hljs-comment\">/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">queueActivatedComponent</span> (<span class=\"hljs-params\">vm</span>) {\n  <span class=\"hljs-comment\">// setting _inactive to false here so that a render function can</span>\n  <span class=\"hljs-comment\">// rely on checking whether it&apos;s in an inactive tree (e.g. router-view)</span>\n  vm.<span class=\"hljs-property\">_inactive</span> = <span class=\"hljs-literal\">false</span>;\n  activatedChildren.<span class=\"hljs-title function_\">push</span>(vm);\n}\n<span class=\"hljs-comment\">// &#x6574;&#x4e2a;watcher&#x6570;&#x7ec4;&#x6267;&#x884c;actived</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">callActivatedHooks</span> (<span class=\"hljs-params\">queue</span>) {\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; queue.<span class=\"hljs-property\">length</span>; i++) {\n    queue[i].<span class=\"hljs-property\">_inactive</span> = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-title function_\">activateChildComponent</span>(queue[i], <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">/* true */</span>);\n  }\n}\n\n<span class=\"hljs-comment\">/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it&apos;s\n * pushed when the queue is being flushed.\n */</span>\n<span class=\"hljs-comment\">// &#x6dfb;&#x52a0;watcher,&#x7136;&#x540e;&#x6267;&#x884c;&#x56de;&#x8c03;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">queueWatcher</span> (<span class=\"hljs-params\">watcher</span>) {\n  <span class=\"hljs-keyword\">var</span> id = watcher.<span class=\"hljs-property\">id</span>;\n  <span class=\"hljs-keyword\">if</span> (has[id] == <span class=\"hljs-literal\">null</span>) {\n    has[id] = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-keyword\">if</span> (!flushing) {\n      queue.<span class=\"hljs-title function_\">push</span>(watcher);\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-comment\">// if already flushing, splice the watcher based on its id</span>\n      <span class=\"hljs-comment\">// if already past its id, it will be run next immediately.</span>\n      <span class=\"hljs-keyword\">var</span> i = queue.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>;\n      <span class=\"hljs-keyword\">while</span> (i &gt; index &amp;&amp; queue[i].<span class=\"hljs-property\">id</span> &gt; watcher.<span class=\"hljs-property\">id</span>) {\n        i--;\n      }\n      queue.<span class=\"hljs-title function_\">splice</span>(i + <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, watcher);\n    }\n    <span class=\"hljs-comment\">// queue the flush</span>\n    <span class=\"hljs-keyword\">if</span> (!waiting) {\n      waiting = <span class=\"hljs-literal\">true</span>;\n      <span class=\"hljs-title function_\">nextTick</span>(flushSchedulerQueue);\n    }\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n<span class=\"hljs-keyword\">var</span> uid&#x24;1 = <span class=\"hljs-number\">0</span>;\n\n<span class=\"hljs-comment\">/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the &#x24;watch() api and directives.\n */</span>\n<span class=\"hljs-comment\">//&#x7533;&#x660e;&#x4e00;&#x4e2a;watcher&#xff0c;&#x8bbe;&#x7f6e;&#x4f17;&#x591a;&#x81ea;&#x8eab;&#x5c5e;&#x6027;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">Watcher</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Watcher</span> (<span class=\"hljs-params\">\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n</span>) {\n  <span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;vm&#x5c5e;&#x6027;</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span> = vm;\n  <span class=\"hljs-comment\">//&#x662f;&#x5426;&#x6e32;&#x67d3;&#x7684;&#x662f;&#x5426;&#x5c31;&#x5f00;&#x59cb;&#x76d1;&#x542c;</span>\n  <span class=\"hljs-keyword\">if</span> (isRenderWatcher) {\n    vm.<span class=\"hljs-property\">_watcher</span> = <span class=\"hljs-variable language_\">this</span>;\n  }\n  <span class=\"hljs-comment\">// vm&#x7684;_watchers&#x6dfb;&#x52a0;&#x81ea;&#x8eab;</span>\n  vm.<span class=\"hljs-property\">_watchers</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-variable language_\">this</span>);\n  <span class=\"hljs-comment\">// options</span>\n  <span class=\"hljs-keyword\">if</span> (options) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deep</span> = !!options.<span class=\"hljs-property\">deep</span>;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">user</span> = !!options.<span class=\"hljs-property\">user</span>;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lazy</span> = !!options.<span class=\"hljs-property\">lazy</span>;\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">sync</span> = !!options.<span class=\"hljs-property\">sync</span>;\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deep</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">user</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lazy</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">sync</span> = <span class=\"hljs-literal\">false</span>;\n  }\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">cb</span> = cb;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">id</span> = ++uid&#x24;1; <span class=\"hljs-comment\">// uid for batching</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">active</span> = <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dirty</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lazy</span>; <span class=\"hljs-comment\">// for lazy watchers</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span> = [];\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDeps</span> = [];\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">_Set</span>();\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDepIds</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">_Set</span>();\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">expression</span> = expOrFn.<span class=\"hljs-title function_\">toString</span>();\n  <span class=\"hljs-comment\">// parse expression for getter</span>\n  <span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;watcher&#x7684;getter</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> expOrFn === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getter</span> = expOrFn;\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getter</span> = <span class=\"hljs-title function_\">parsePath</span>(expOrFn);\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getter</span>) {\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getter</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {};\n      <span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">warn</span>(\n        <span class=\"hljs-string\">&quot;Failed watching path: \\&quot;&quot;</span> + expOrFn + <span class=\"hljs-string\">&quot;\\&quot; &quot;</span> +\n        <span class=\"hljs-string\">&apos;Watcher only accepts simple dot-delimited paths. &apos;</span> +\n        <span class=\"hljs-string\">&apos;For full control, use a function instead.&apos;</span>,\n        vm\n      );\n    }\n  }\n  <span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;value&#x5c5e;&#x6027;&#xff0c;&#x56de;&#x8c03;&#x7528;&#x539f;&#x578b;&#x4e0a;&#x7684;get&#x65b9;&#x6cd5;</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lazy</span>\n    ? <span class=\"hljs-literal\">undefined</span>\n    : <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">get</span>();\n};\n\n<span class=\"hljs-comment\">/**\n * Evaluate the getter, and re-collect dependencies.\n */</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">get</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">get</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">//dep&#x7684;target&#x6307;&#x5411;&#x672c;watcher</span>\n  <span class=\"hljs-title function_\">pushTarget</span>(<span class=\"hljs-variable language_\">this</span>);\n  <span class=\"hljs-keyword\">var</span> value;\n  <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>;\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-comment\">// &#x8c03;&#x7528;getter</span>\n    value = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getter</span>.<span class=\"hljs-title function_\">call</span>(vm, vm);\n  } <span class=\"hljs-keyword\">catch</span> (e) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">user</span>) {\n      <span class=\"hljs-title function_\">handleError</span>(e, vm, (<span class=\"hljs-string\">&quot;getter for watcher \\&quot;&quot;</span> + (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">expression</span>) + <span class=\"hljs-string\">&quot;\\&quot;&quot;</span>));\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">throw</span> e\n    }\n  } <span class=\"hljs-keyword\">finally</span> {\n    <span class=\"hljs-comment\">// &quot;touch&quot; every property so they are all tracked as</span>\n    <span class=\"hljs-comment\">// dependencies for deep watching</span>\n    <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x6df1;&#x5ea6;&#x76d1;&#x542c;&#xff0c;&#x9012;&#x5f52;&#x6bcf;&#x4e2a;&#x5c5e;&#x6027;</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deep</span>) {\n      <span class=\"hljs-title function_\">traverse</span>(value);\n    }\n    <span class=\"hljs-comment\">// &#x5c06;dep&#x7684;target&#x79fb;&#x9664;</span>\n    <span class=\"hljs-title function_\">popTarget</span>();\n    <span class=\"hljs-comment\">// &#x6e05;&#x9664;&#x4f9d;&#x8d56;</span>\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">cleanupDeps</span>();\n  }\n  <span class=\"hljs-keyword\">return</span> value\n};\n\n<span class=\"hljs-comment\">/**\n * Add a dependency to this directive.\n */</span>\n<span class=\"hljs-comment\">// &#x6dfb;&#x52a0;&#x65b0;&#x7684;&#x4f9d;&#x8d56;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">addDep</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">addDep</span> (<span class=\"hljs-params\">dep</span>) {\n  <span class=\"hljs-keyword\">var</span> id = dep.<span class=\"hljs-property\">id</span>;\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDepIds</span>.<span class=\"hljs-title function_\">has</span>(id)) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDepIds</span>.<span class=\"hljs-title function_\">add</span>(id);\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDeps</span>.<span class=\"hljs-title function_\">push</span>(dep);\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span>.<span class=\"hljs-title function_\">has</span>(id)) {\n      dep.<span class=\"hljs-title function_\">addSub</span>(<span class=\"hljs-variable language_\">this</span>);\n    }\n  }\n};\n\n<span class=\"hljs-comment\">/**\n * Clean up for dependency collection.\n */</span>\n<span class=\"hljs-comment\">//&#x6e05;&#x7a7a;&#x65b0;&#x7684;&#x4f9d;&#x8d56;&#x6570;&#x7ec4;&#x4e2d;&#x6ca1;&#x6709;&#x7684;&#x65e7;&#x7684;&#x4f9d;&#x8d56;&#xff0c;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">cleanupDeps</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">cleanupDeps</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">this</span>&#x24;1 = <span class=\"hljs-variable language_\">this</span>;\n\n  <span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span>.<span class=\"hljs-property\">length</span>;\n  <span class=\"hljs-keyword\">while</span> (i--) {\n    <span class=\"hljs-keyword\">var</span> dep = <span class=\"hljs-variable language_\">this</span>&#x24;1.<span class=\"hljs-property\">deps</span>[i];\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">this</span>&#x24;1.<span class=\"hljs-property\">newDepIds</span>.<span class=\"hljs-title function_\">has</span>(dep.<span class=\"hljs-property\">id</span>)) {\n      dep.<span class=\"hljs-title function_\">removeSub</span>(<span class=\"hljs-variable language_\">this</span>&#x24;1);\n    }\n  }\n  <span class=\"hljs-keyword\">var</span> tmp = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">depIds</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDepIds</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDepIds</span> = tmp;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDepIds</span>.<span class=\"hljs-title function_\">clear</span>();\n  tmp = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDeps</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDeps</span> = tmp;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">newDeps</span>.<span class=\"hljs-property\">length</span> = <span class=\"hljs-number\">0</span>;\n};\n\n<span class=\"hljs-comment\">/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */</span>\n<span class=\"hljs-comment\">// watcher&#x6267;&#x884c;run&#x6216;&#x8005;queueWatcher&#x65b9;&#x6cd5;&#xff0c;&#x90fd;&#x662f;&#x6267;&#x884c;watchers&#x6216;&#x8005;watchers&#x961f;&#x5217;&#x7684;&#x6570;&#x7ec4;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">update</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">update</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">/* istanbul ignore else */</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">lazy</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dirty</span> = <span class=\"hljs-literal\">true</span>;\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">sync</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">run</span>();\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-title function_\">queueWatcher</span>(<span class=\"hljs-variable language_\">this</span>);\n  }\n};\n\n<span class=\"hljs-comment\">/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */</span>\n<span class=\"hljs-comment\">// &#x89e6;&#x53d1;&#x51fd;&#x6570;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">run</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">run</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">active</span>) {\n    <span class=\"hljs-keyword\">var</span> value = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">get</span>();\n    <span class=\"hljs-keyword\">if</span> (\n      value !== <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> ||\n      <span class=\"hljs-comment\">// Deep watchers and watchers on Object/Arrays should fire even</span>\n      <span class=\"hljs-comment\">// when the value is the same, because the value may</span>\n      <span class=\"hljs-comment\">// have mutated.</span>\n      <span class=\"hljs-title function_\">isObject</span>(value) ||\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deep</span>\n    ) {\n      <span class=\"hljs-comment\">// set new value</span>\n      <span class=\"hljs-keyword\">var</span> oldValue = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span>;\n      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> = value;\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">user</span>) {\n        <span class=\"hljs-keyword\">try</span> {\n          <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">cb</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>, value, oldValue);\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n          <span class=\"hljs-title function_\">handleError</span>(e, <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>, (<span class=\"hljs-string\">&quot;callback for watcher \\&quot;&quot;</span> + (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">expression</span>) + <span class=\"hljs-string\">&quot;\\&quot;&quot;</span>));\n        }\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">cb</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>, value, oldValue);\n      }\n    }\n  }\n};\n\n<span class=\"hljs-comment\">/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */</span>\n<span class=\"hljs-comment\">// &#x8ba1;&#x7b97;watcher &#x7684;value&#x503c;&#xff0c;&#x5e76;&#x4e14;&#x4e0d;&#x518d;&#x662f;&#x810f;&#x6570;&#x636e;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">evaluate</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">evaluate</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">value</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">get</span>();\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dirty</span> = <span class=\"hljs-literal\">false</span>;\n};\n\n<span class=\"hljs-comment\">/**\n * Depend on all deps collected by this watcher.\n */</span>\n<span class=\"hljs-comment\">// &#x89e6;&#x53d1;&#x4f9d;&#x8d56;&#x7684;depend&#x65b9;&#x6cd5;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">depend</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">depend</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">this</span>&#x24;1 = <span class=\"hljs-variable language_\">this</span>;\n\n  <span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span>.<span class=\"hljs-property\">length</span>;\n  <span class=\"hljs-keyword\">while</span> (i--) {\n    <span class=\"hljs-variable language_\">this</span>&#x24;1.<span class=\"hljs-property\">deps</span>[i].<span class=\"hljs-title function_\">depend</span>();\n  }\n};\n\n<span class=\"hljs-comment\">/**\n * Remove self from all dependencies&apos; subscriber list.\n */</span>\n<span class=\"hljs-comment\">// &#x6e05;&#x9664;&#x76d1;&#x542c;</span>\n<span class=\"hljs-title class_\">Watcher</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">teardown</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">teardown</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">this</span>&#x24;1 = <span class=\"hljs-variable language_\">this</span>;\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">active</span>) {\n    <span class=\"hljs-comment\">// remove self from vm&apos;s watcher list</span>\n    <span class=\"hljs-comment\">// this is a somewhat expensive operation so we skip it</span>\n    <span class=\"hljs-comment\">// if the vm is being destroyed.</span>\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>.<span class=\"hljs-property\">_isBeingDestroyed</span>) {\n      <span class=\"hljs-title function_\">remove</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">vm</span>.<span class=\"hljs-property\">_watchers</span>, <span class=\"hljs-variable language_\">this</span>);\n    }\n    <span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">deps</span>.<span class=\"hljs-property\">length</span>;\n    <span class=\"hljs-keyword\">while</span> (i--) {\n      <span class=\"hljs-variable language_\">this</span>&#x24;1.<span class=\"hljs-property\">deps</span>[i].<span class=\"hljs-title function_\">removeSub</span>(<span class=\"hljs-variable language_\">this</span>&#x24;1);\n    }\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">active</span> = <span class=\"hljs-literal\">false</span>;\n  }\n};\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x5c5e;&#x6027;&#x8bbe;&#x7f6e;</span>\n<span class=\"hljs-keyword\">var</span> sharedPropertyDefinition = {\n  <span class=\"hljs-attr\">enumerable</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">configurable</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">get</span>: noop,\n  <span class=\"hljs-attr\">set</span>: noop\n};\n<span class=\"hljs-comment\">// &#x4e0d;&#x60f3;&#x8bf4;&#x4e86;&#xff0c;&#x524d;&#x9762;&#x6709;&#x4e86;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">proxy</span> (<span class=\"hljs-params\">target, sourceKey, key</span>) {\n  sharedPropertyDefinition.<span class=\"hljs-property\">get</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">proxyGetter</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>[sourceKey][key]\n  };\n  sharedPropertyDefinition.<span class=\"hljs-property\">set</span> = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">proxySetter</span> (<span class=\"hljs-params\">val</span>) {\n    <span class=\"hljs-variable language_\">this</span>[sourceKey][key] = val;\n  };\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(target, key, sharedPropertyDefinition);\n}\n<span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initState</span> (<span class=\"hljs-params\">vm</span>) {\n  vm.<span class=\"hljs-property\">_watchers</span> = [];\n  <span class=\"hljs-keyword\">var</span> opts = vm.<span class=\"hljs-property\">&#x24;options</span>;\n  <span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;props</span>\n  <span class=\"hljs-keyword\">if</span> (opts.<span class=\"hljs-property\">props</span>) { <span class=\"hljs-title function_\">initProps</span>(vm, opts.<span class=\"hljs-property\">props</span>); }\n  <span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;&#x65b9;&#x6cd5;</span>\n  <span class=\"hljs-keyword\">if</span> (opts.<span class=\"hljs-property\">methods</span>) { <span class=\"hljs-title function_\">initMethods</span>(vm, opts.<span class=\"hljs-property\">methods</span>); }\n  <span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;data,&#x8bbe;&#x7f6e;&#x76d1;&#x542c;</span>\n  <span class=\"hljs-keyword\">if</span> (opts.<span class=\"hljs-property\">data</span>) {\n    <span class=\"hljs-title function_\">initData</span>(vm);\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-title function_\">observe</span>(vm.<span class=\"hljs-property\">_data</span> = {}, <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">/* asRootData */</span>);\n  }\n  <span class=\"hljs-comment\">// &#x8ba1;&#x7b97;&#x5c5e;&#x6027;computed</span>\n  <span class=\"hljs-keyword\">if</span> (opts.<span class=\"hljs-property\">computed</span>) { <span class=\"hljs-title function_\">initComputed</span>(vm, opts.<span class=\"hljs-property\">computed</span>); }\n  <span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;watch</span>\n  <span class=\"hljs-keyword\">if</span> (opts.<span class=\"hljs-property\">watch</span> &amp;&amp; opts.<span class=\"hljs-property\">watch</span> !== nativeWatch) {\n    <span class=\"hljs-title function_\">initWatch</span>(vm, opts.<span class=\"hljs-property\">watch</span>);\n  }\n}\n<span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;props</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initProps</span> (<span class=\"hljs-params\">vm, propsOptions</span>) {\n  <span class=\"hljs-keyword\">var</span> propsData = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">propsData</span> || {};\n  <span class=\"hljs-keyword\">var</span> props = vm.<span class=\"hljs-property\">_props</span> = {};\n  <span class=\"hljs-comment\">// cache prop keys so that future props updates can iterate using Array</span>\n  <span class=\"hljs-comment\">// instead of dynamic object key enumeration.</span>\n  <span class=\"hljs-keyword\">var</span> keys = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_propKeys</span> = [];\n  <span class=\"hljs-keyword\">var</span> isRoot = !vm.<span class=\"hljs-property\">&#x24;parent</span>;\n  <span class=\"hljs-comment\">// root instance props should be converted</span>\n  <span class=\"hljs-keyword\">if</span> (!isRoot) {\n    <span class=\"hljs-title function_\">toggleObserving</span>(<span class=\"hljs-literal\">false</span>);\n  }\n  <span class=\"hljs-keyword\">var</span> loop = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"> key </span>) {\n    keys.<span class=\"hljs-title function_\">push</span>(key);\n    <span class=\"hljs-keyword\">var</span> value = <span class=\"hljs-title function_\">validateProp</span>(key, propsOptions, propsData, vm);\n    <span class=\"hljs-comment\">/* istanbul ignore else */</span>\n    {\n      <span class=\"hljs-keyword\">var</span> hyphenatedKey = <span class=\"hljs-title function_\">hyphenate</span>(key);\n      <span class=\"hljs-comment\">//&#x5982;&#x679c;confirg&#x8bbe;&#x7f6e;&#x4e86;&#x8be5;&#x53c2;&#x6570;&#x6216;&#x8005;&#x5c5e;&#x6027;&#xff0c;&#x4e0d;&#x53ef;&#x4ee5;&#x5728;&#x7528;&#x4f5c;&#x7ec4;&#x4ef6;&#x4f20;&#x9012;&#x7684;&#x503c;</span>\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isReservedAttribute</span>(hyphenatedKey) ||\n          config.<span class=\"hljs-title function_\">isReservedAttr</span>(hyphenatedKey)) {\n        <span class=\"hljs-title function_\">warn</span>(\n          (<span class=\"hljs-string\">&quot;\\&quot;&quot;</span> + hyphenatedKey + <span class=\"hljs-string\">&quot;\\&quot; is a reserved attribute and cannot be used as component prop.&quot;</span>),\n          vm\n        );\n      }\n      <span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;&#x76d1;&#x542c;</span>\n      <span class=\"hljs-title function_\">defineReactive</span>(props, key, value, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;parent</span> &amp;&amp; !isUpdatingChildComponent) {\n          <span class=\"hljs-title function_\">warn</span>(\n            <span class=\"hljs-string\">&quot;Avoid mutating a prop directly since the value will be &quot;</span> +\n            <span class=\"hljs-string\">&quot;overwritten whenever the parent component re-renders. &quot;</span> +\n            <span class=\"hljs-string\">&quot;Instead, use a data or computed property based on the prop&apos;s &quot;</span> +\n            <span class=\"hljs-string\">&quot;value. Prop being mutated: \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot;&quot;</span>,\n            vm\n          );\n        }\n      });\n    }\n    <span class=\"hljs-comment\">// static props are already proxied on the component&apos;s prototype</span>\n    <span class=\"hljs-comment\">// during Vue.extend(). We only need to proxy props defined at</span>\n    <span class=\"hljs-comment\">// instantiation here.</span>\n    <span class=\"hljs-keyword\">if</span> (!(key <span class=\"hljs-keyword\">in</span> vm)) {\n      <span class=\"hljs-title function_\">proxy</span>(vm, <span class=\"hljs-string\">&quot;_props&quot;</span>, key);\n    }\n  };\n\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> key <span class=\"hljs-keyword\">in</span> propsOptions) <span class=\"hljs-title function_\">loop</span>( key );\n  <span class=\"hljs-title function_\">toggleObserving</span>(<span class=\"hljs-literal\">true</span>);\n}\n<span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;data</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initData</span> (<span class=\"hljs-params\">vm</span>) {\n  <span class=\"hljs-keyword\">var</span> data = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">data</span>;\n  data = vm.<span class=\"hljs-property\">_data</span> = <span class=\"hljs-keyword\">typeof</span> data === <span class=\"hljs-string\">&apos;function&apos;</span>\n    ? <span class=\"hljs-title function_\">getData</span>(data, vm)\n    : data || {};\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">isPlainObject</span>(data)) {\n    data = {};\n    <span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">&apos;data functions should return an object:\\n&apos;</span> +\n      <span class=\"hljs-string\">&apos;https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function&apos;</span>,\n      vm\n    );\n  }\n  <span class=\"hljs-comment\">// proxy data on instance</span>\n  <span class=\"hljs-keyword\">var</span> keys = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(data);\n  <span class=\"hljs-keyword\">var</span> props = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">props</span>;\n  <span class=\"hljs-keyword\">var</span> methods = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">methods</span>;\n  <span class=\"hljs-keyword\">var</span> i = keys.<span class=\"hljs-property\">length</span>;\n  <span class=\"hljs-keyword\">while</span> (i--) {\n    <span class=\"hljs-keyword\">var</span> key = keys[i];\n    {\n      <span class=\"hljs-keyword\">if</span> (methods &amp;&amp; <span class=\"hljs-title function_\">hasOwn</span>(methods, key)) {\n        <span class=\"hljs-title function_\">warn</span>(\n          (<span class=\"hljs-string\">&quot;Method \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot; has already been defined as a data property.&quot;</span>),\n          vm\n        );\n      }\n    }\n    <span class=\"hljs-keyword\">if</span> (props &amp;&amp; <span class=\"hljs-title function_\">hasOwn</span>(props, key)) {\n      <span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">warn</span>(\n        <span class=\"hljs-string\">&quot;The data property \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot; is already declared as a prop. &quot;</span> +\n        <span class=\"hljs-string\">&quot;Use prop default value instead.&quot;</span>,\n        vm\n      );\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">isReserved</span>(key)) {\n      <span class=\"hljs-title function_\">proxy</span>(vm, <span class=\"hljs-string\">&quot;_data&quot;</span>, key);\n    }\n  }\n  <span class=\"hljs-comment\">// observe data</span>\n  <span class=\"hljs-title function_\">observe</span>(data, <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">/* asRootData */</span>);\n}\n<span class=\"hljs-comment\">// &#x83b7;&#x53d6;data,data&#x88ab;&#x6267;&#x884c;&#xff0c;&#x5c31;&#x662f;getter&#x561b;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getData</span> (<span class=\"hljs-params\">data, vm</span>) {\n  <span class=\"hljs-comment\">// #7573 disable dep collection when invoking data getters</span>\n  <span class=\"hljs-title function_\">pushTarget</span>();\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">return</span> data.<span class=\"hljs-title function_\">call</span>(vm, vm)\n  } <span class=\"hljs-keyword\">catch</span> (e) {\n    <span class=\"hljs-title function_\">handleError</span>(e, vm, <span class=\"hljs-string\">&quot;data()&quot;</span>);\n    <span class=\"hljs-keyword\">return</span> {}\n  } <span class=\"hljs-keyword\">finally</span> {\n    <span class=\"hljs-title function_\">popTarget</span>();\n  }\n}\n\n<span class=\"hljs-keyword\">var</span> computedWatcherOptions = { <span class=\"hljs-attr\">lazy</span>: <span class=\"hljs-literal\">true</span> };\n<span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;computed</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initComputed</span> (<span class=\"hljs-params\">vm, computed</span>) {\n  <span class=\"hljs-comment\">// &#x24;flow-disable-line</span>\n  <span class=\"hljs-keyword\">var</span> watchers = vm.<span class=\"hljs-property\">_computedWatchers</span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-literal\">null</span>);\n  <span class=\"hljs-comment\">// computed properties are just getters during SSR</span>\n  <span class=\"hljs-keyword\">var</span> isSSR = <span class=\"hljs-title function_\">isServerRendering</span>();\n\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> key <span class=\"hljs-keyword\">in</span> computed) {\n    <span class=\"hljs-keyword\">var</span> userDef = computed[key];\n    <span class=\"hljs-keyword\">var</span> getter = <span class=\"hljs-keyword\">typeof</span> userDef === <span class=\"hljs-string\">&apos;function&apos;</span> ? userDef : userDef.<span class=\"hljs-property\">get</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; getter == <span class=\"hljs-literal\">null</span>) {\n      <span class=\"hljs-title function_\">warn</span>(\n        (<span class=\"hljs-string\">&quot;Getter is missing for computed property \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot;.&quot;</span>),\n        vm\n      );\n    }\n\n    <span class=\"hljs-keyword\">if</span> (!isSSR) {\n      <span class=\"hljs-comment\">// create internal watcher for the computed property.</span>\n      watchers[key] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Watcher</span>(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    <span class=\"hljs-comment\">// component-defined computed properties are already defined on the</span>\n    <span class=\"hljs-comment\">// component prototype. We only need to define computed properties defined</span>\n    <span class=\"hljs-comment\">// at instantiation here.</span>\n    <span class=\"hljs-keyword\">if</span> (!(key <span class=\"hljs-keyword\">in</span> vm)) {\n      <span class=\"hljs-title function_\">defineComputed</span>(vm, key, userDef);\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">if</span> (key <span class=\"hljs-keyword\">in</span> vm.<span class=\"hljs-property\">&#x24;data</span>) {\n        <span class=\"hljs-title function_\">warn</span>((<span class=\"hljs-string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot; is already defined in data.&quot;</span>), vm);\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">props</span> &amp;&amp; key <span class=\"hljs-keyword\">in</span> vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">props</span>) {\n        <span class=\"hljs-title function_\">warn</span>((<span class=\"hljs-string\">&quot;The computed property \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot; is already defined as a prop.&quot;</span>), vm);\n      }\n    }\n  }\n}\n<span class=\"hljs-comment\">// &#x5b9a;&#x4e49;computed</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">defineComputed</span> (<span class=\"hljs-params\">\n  target,\n  key,\n  userDef\n</span>) {\n  <span class=\"hljs-keyword\">var</span> shouldCache = !<span class=\"hljs-title function_\">isServerRendering</span>();\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> userDef === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n    sharedPropertyDefinition.<span class=\"hljs-property\">get</span> = shouldCache\n      ? <span class=\"hljs-title function_\">createComputedGetter</span>(key)\n      : userDef;\n    sharedPropertyDefinition.<span class=\"hljs-property\">set</span> = noop;\n  } <span class=\"hljs-keyword\">else</span> {\n    sharedPropertyDefinition.<span class=\"hljs-property\">get</span> = userDef.<span class=\"hljs-property\">get</span>\n      ? shouldCache &amp;&amp; userDef.<span class=\"hljs-property\">cache</span> !== <span class=\"hljs-literal\">false</span>\n        ? <span class=\"hljs-title function_\">createComputedGetter</span>(key)\n        : userDef.<span class=\"hljs-property\">get</span>\n      : noop;\n    sharedPropertyDefinition.<span class=\"hljs-property\">set</span> = userDef.<span class=\"hljs-property\">set</span>\n      ? userDef.<span class=\"hljs-property\">set</span>\n      : noop;\n  }\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp;\n      sharedPropertyDefinition.<span class=\"hljs-property\">set</span> === noop) {\n    sharedPropertyDefinition.<span class=\"hljs-property\">set</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-title function_\">warn</span>(\n        (<span class=\"hljs-string\">&quot;Computed property \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot; was assigned to but it has no setter.&quot;</span>),\n        <span class=\"hljs-variable language_\">this</span>\n      );\n    };\n  }\n  <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(target, key, sharedPropertyDefinition);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,1020"}}],"payload":{"tag":"h3","lines":"0,1"}},{})</script>
</body>
</html>
