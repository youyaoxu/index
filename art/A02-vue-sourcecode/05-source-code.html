<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Vue","children":[{"content":"<pre data-lines=\"6,976\"><code class=\"language-js\"><span class=\"hljs-comment\">/**\n * Get the default value of a prop.\n */</span>\n<span class=\"hljs-comment\">// &#x5f97;&#x5230;prop&#x7684;&#x521d;&#x59cb;&#x503c;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getPropDefaultValue</span> (<span class=\"hljs-params\">vm, prop, key</span>) {\n  <span class=\"hljs-comment\">// no default, return undefined</span>\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">hasOwn</span>(prop, <span class=\"hljs-string\">&apos;default&apos;</span>)) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">undefined</span>\n  }\n  <span class=\"hljs-keyword\">var</span> def = prop.<span class=\"hljs-property\">default</span>;\n  <span class=\"hljs-comment\">// warn against non-factory defaults for Object &amp; Array</span>\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">isObject</span>(def)) {\n    <span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">&apos;Invalid default value for prop &quot;&apos;</span> + key + <span class=\"hljs-string\">&apos;&quot;: &apos;</span> +\n      <span class=\"hljs-string\">&apos;Props with type Object/Array must use a factory function &apos;</span> +\n      <span class=\"hljs-string\">&apos;to return the default value.&apos;</span>,\n      vm\n    );\n  }\n  <span class=\"hljs-comment\">// the raw prop value was also undefined from previous render,</span>\n  <span class=\"hljs-comment\">// return previous default value to avoid unnecessary watcher trigger</span>\n  <span class=\"hljs-keyword\">if</span> (vm &amp;&amp; vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">propsData</span> &amp;&amp;\n    vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">propsData</span>[key] === <span class=\"hljs-literal\">undefined</span> &amp;&amp;\n    vm.<span class=\"hljs-property\">_props</span>[key] !== <span class=\"hljs-literal\">undefined</span>\n  ) {\n    <span class=\"hljs-keyword\">return</span> vm.<span class=\"hljs-property\">_props</span>[key]\n  }\n  <span class=\"hljs-comment\">// call factory function for non-Function types</span>\n  <span class=\"hljs-comment\">// a value is Function if its prototype is function even across different execution context</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">typeof</span> def === <span class=\"hljs-string\">&apos;function&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">getType</span>(prop.<span class=\"hljs-property\">type</span>) !== <span class=\"hljs-string\">&apos;Function&apos;</span>\n    ? def.<span class=\"hljs-title function_\">call</span>(vm)\n    : def\n}\n\n<span class=\"hljs-comment\">/**\n * Assert hether a prop is valid.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">assertProp</span> (<span class=\"hljs-params\">\n  prop,\n  name,\n  value,\n  vm,\n  absent\n</span>) {\n  <span class=\"hljs-keyword\">if</span> (prop.<span class=\"hljs-property\">required</span> &amp;&amp; absent) {\n    <span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">&apos;Missing required prop: &quot;&apos;</span> + name + <span class=\"hljs-string\">&apos;&quot;&apos;</span>,\n      vm\n    );\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (value == <span class=\"hljs-literal\">null</span> &amp;&amp; !prop.<span class=\"hljs-property\">required</span>) {\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">var</span> type = prop.<span class=\"hljs-property\">type</span>;\n  <span class=\"hljs-keyword\">var</span> valid = !type || type === <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-keyword\">var</span> expectedTypes = [];\n  <span class=\"hljs-keyword\">if</span> (type) {\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(type)) {\n      type = [type];\n    }\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; type.<span class=\"hljs-property\">length</span> &amp;&amp; !valid; i++) {\n      <span class=\"hljs-keyword\">var</span> assertedType = <span class=\"hljs-title function_\">assertType</span>(value, type[i]);\n      expectedTypes.<span class=\"hljs-title function_\">push</span>(assertedType.<span class=\"hljs-property\">expectedType</span> || <span class=\"hljs-string\">&apos;&apos;</span>);\n      valid = assertedType.<span class=\"hljs-property\">valid</span>;\n    }\n  }\n  <span class=\"hljs-keyword\">if</span> (!valid) {\n    <span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">&quot;Invalid prop: type check failed for prop \\&quot;&quot;</span> + name + <span class=\"hljs-string\">&quot;\\&quot;.&quot;</span> +\n      <span class=\"hljs-string\">&quot; Expected &quot;</span> + (expectedTypes.<span class=\"hljs-title function_\">map</span>(capitalize).<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&apos;, &apos;</span>)) +\n      <span class=\"hljs-string\">&quot;, got &quot;</span> + (<span class=\"hljs-title function_\">toRawType</span>(value)) + <span class=\"hljs-string\">&quot;.&quot;</span>,\n      vm\n    );\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">var</span> validator = prop.<span class=\"hljs-property\">validator</span>;\n  <span class=\"hljs-keyword\">if</span> (validator) {\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">validator</span>(value)) {\n      <span class=\"hljs-title function_\">warn</span>(\n        <span class=\"hljs-string\">&apos;Invalid prop: custom validator check failed for prop &quot;&apos;</span> + name + <span class=\"hljs-string\">&apos;&quot;.&apos;</span>,\n        vm\n      );\n    }\n  }\n}\n\n<span class=\"hljs-keyword\">var</span> simpleCheckRE = <span class=\"hljs-regexp\">/^(String|Number|Boolean|Function|Symbol)&#x24;/</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">assertType</span> (<span class=\"hljs-params\">value, type</span>) {\n  <span class=\"hljs-keyword\">var</span> valid;\n  <span class=\"hljs-keyword\">var</span> expectedType = <span class=\"hljs-title function_\">getType</span>(type);\n  <span class=\"hljs-keyword\">if</span> (simpleCheckRE.<span class=\"hljs-title function_\">test</span>(expectedType)) {\n    <span class=\"hljs-keyword\">var</span> t = <span class=\"hljs-keyword\">typeof</span> value;\n    valid = t === expectedType.<span class=\"hljs-title function_\">toLowerCase</span>();\n    <span class=\"hljs-comment\">// for primitive wrapper objects</span>\n    <span class=\"hljs-keyword\">if</span> (!valid &amp;&amp; t === <span class=\"hljs-string\">&apos;object&apos;</span>) {\n      valid = value <span class=\"hljs-keyword\">instanceof</span> type;\n    }\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (expectedType === <span class=\"hljs-string\">&apos;Object&apos;</span>) {\n    valid = <span class=\"hljs-title function_\">isPlainObject</span>(value);\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (expectedType === <span class=\"hljs-string\">&apos;Array&apos;</span>) {\n    valid = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(value);\n  } <span class=\"hljs-keyword\">else</span> {\n    valid = value <span class=\"hljs-keyword\">instanceof</span> type;\n  }\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">valid</span>: valid,\n    <span class=\"hljs-attr\">expectedType</span>: expectedType\n  }\n}\n\n<span class=\"hljs-comment\">/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */</span>\n<span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x51fd;&#x6570;&#x8868;&#x8fbe;&#x5f0f;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getType</span> (<span class=\"hljs-params\">fn</span>) {\n  <span class=\"hljs-keyword\">var</span> match = fn &amp;&amp; fn.<span class=\"hljs-title function_\">toString</span>().<span class=\"hljs-title function_\">match</span>(<span class=\"hljs-regexp\">/^\\s*function (\\w+)/</span>);\n  <span class=\"hljs-keyword\">return</span> match ? match[<span class=\"hljs-number\">1</span>] : <span class=\"hljs-string\">&apos;&apos;</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isSameType</span> (<span class=\"hljs-params\">a, b</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">getType</span>(a) === <span class=\"hljs-title function_\">getType</span>(b)\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getTypeIndex</span> (<span class=\"hljs-params\">type, expectedTypes</span>) {\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(expectedTypes)) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">isSameType</span>(expectedTypes, type) ? <span class=\"hljs-number\">0</span> : -<span class=\"hljs-number\">1</span>\n  }\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, len = expectedTypes.<span class=\"hljs-property\">length</span>; i &lt; len; i++) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isSameType</span>(expectedTypes[i], type)) {\n      <span class=\"hljs-keyword\">return</span> i\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> -<span class=\"hljs-number\">1</span>\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x9519;&#x8bef;&#x5904;&#x7406;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">handleError</span> (<span class=\"hljs-params\">err, vm, info</span>) {\n  <span class=\"hljs-keyword\">if</span> (vm) {\n    <span class=\"hljs-keyword\">var</span> cur = vm;\n    <span class=\"hljs-keyword\">while</span> ((cur = cur.<span class=\"hljs-property\">&#x24;parent</span>)) {\n      <span class=\"hljs-keyword\">var</span> hooks = cur.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">errorCaptured</span>;\n      <span class=\"hljs-keyword\">if</span> (hooks) {\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; hooks.<span class=\"hljs-property\">length</span>; i++) {\n          <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-keyword\">var</span> capture = hooks[i].<span class=\"hljs-title function_\">call</span>(cur, err, vm, info) === <span class=\"hljs-literal\">false</span>;\n            <span class=\"hljs-keyword\">if</span> (capture) { <span class=\"hljs-keyword\">return</span> }\n          } <span class=\"hljs-keyword\">catch</span> (e) {\n            <span class=\"hljs-title function_\">globalHandleError</span>(e, cur, <span class=\"hljs-string\">&apos;errorCaptured hook&apos;</span>);\n          }\n        }\n      }\n    }\n  }\n  <span class=\"hljs-title function_\">globalHandleError</span>(err, vm, info);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">globalHandleError</span> (<span class=\"hljs-params\">err, vm, info</span>) {\n  <span class=\"hljs-keyword\">if</span> (config.<span class=\"hljs-property\">errorHandler</span>) {\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">return</span> config.<span class=\"hljs-property\">errorHandler</span>.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-literal\">null</span>, err, vm, info)\n    } <span class=\"hljs-keyword\">catch</span> (e) {\n      <span class=\"hljs-title function_\">logError</span>(e, <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&apos;config.errorHandler&apos;</span>);\n    }\n  }\n  <span class=\"hljs-title function_\">logError</span>(err, vm, info);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">logError</span> (<span class=\"hljs-params\">err, vm, info</span>) {\n  {\n    <span class=\"hljs-title function_\">warn</span>((<span class=\"hljs-string\">&quot;Error in &quot;</span> + info + <span class=\"hljs-string\">&quot;: \\&quot;&quot;</span> + (err.<span class=\"hljs-title function_\">toString</span>()) + <span class=\"hljs-string\">&quot;\\&quot;&quot;</span>), vm);\n  }\n  <span class=\"hljs-comment\">/* istanbul ignore else */</span>\n  <span class=\"hljs-keyword\">if</span> ((inBrowser || inWeex) &amp;&amp; <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-variable language_\">console</span> !== <span class=\"hljs-string\">&apos;undefined&apos;</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(err);\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">throw</span> err\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">/* globals MessageChannel */</span>\n\n<span class=\"hljs-keyword\">var</span> callbacks = [];\n<span class=\"hljs-keyword\">var</span> pending = <span class=\"hljs-literal\">false</span>;\n<span class=\"hljs-comment\">// &#x56de;&#x8c03;&#x6570;&#x7ec4;&#x6267;&#x884c;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">flushCallbacks</span> (<span class=\"hljs-params\"></span>) {\n  pending = <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">var</span> copies = callbacks.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>);\n  callbacks.<span class=\"hljs-property\">length</span> = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; copies.<span class=\"hljs-property\">length</span>; i++) {\n    copies[i]();\n  }\n}\n\n<span class=\"hljs-comment\">// Here we have async deferring wrappers using both microtasks and (macro) tasks.</span>\n<span class=\"hljs-comment\">// In &lt; 2.4 we used microtasks everywhere, but there are some scenarios where</span>\n<span class=\"hljs-comment\">// microtasks have too high a priority and fire in between supposedly</span>\n<span class=\"hljs-comment\">// sequential events (e.g. #4521, #6690) or even between bubbling of the same</span>\n<span class=\"hljs-comment\">// event (#6566). However, using (macro) tasks everywhere also has subtle problems</span>\n<span class=\"hljs-comment\">// when state is changed right before repaint (e.g. #6813, out-in transitions).</span>\n<span class=\"hljs-comment\">// Here we use microtask by default, but expose a way to force (macro) task when</span>\n<span class=\"hljs-comment\">// needed (e.g. in event handlers attached by v-on).</span>\n<span class=\"hljs-keyword\">var</span> microTimerFunc;\n<span class=\"hljs-keyword\">var</span> macroTimerFunc;\n<span class=\"hljs-keyword\">var</span> useMacroTask = <span class=\"hljs-literal\">false</span>;\n\n<span class=\"hljs-comment\">// Determine (macro) task defer implementation.</span>\n<span class=\"hljs-comment\">// Technically setImmediate should be the ideal choice, but it&apos;s only available</span>\n<span class=\"hljs-comment\">// in IE. The only polyfill that consistently queues the callback after all DOM</span>\n<span class=\"hljs-comment\">// events triggered in the same loop is by using MessageChannel.</span>\n<span class=\"hljs-comment\">/* istanbul ignore if */</span>\n<span class=\"hljs-comment\">// &#x5f02;&#x6b65;&#x6267;&#x884c; &#x5982;&#x679c;&#x652f;&#x6301;setImmediate</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> setImmediate !== <span class=\"hljs-string\">&apos;undefined&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">isNative</span>(setImmediate)) {\n  macroTimerFunc = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-title function_\">setImmediate</span>(flushCallbacks);\n  };\n  <span class=\"hljs-comment\">//&#x5982;&#x679c;&#x652f;&#x6301;MessageChannel</span>\n} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">MessageChannel</span> !== <span class=\"hljs-string\">&apos;undefined&apos;</span> &amp;&amp; (\n  <span class=\"hljs-title function_\">isNative</span>(<span class=\"hljs-title class_\">MessageChannel</span>) ||\n  <span class=\"hljs-comment\">// PhantomJS</span>\n  <span class=\"hljs-title class_\">MessageChannel</span>.<span class=\"hljs-title function_\">toString</span>() === <span class=\"hljs-string\">&apos;[object MessageChannelConstructor]&apos;</span>\n)) {\n  <span class=\"hljs-keyword\">var</span> channel = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MessageChannel</span>();\n  <span class=\"hljs-keyword\">var</span> port = channel.<span class=\"hljs-property\">port2</span>;\n  channel.<span class=\"hljs-property\">port1</span>.<span class=\"hljs-property\">onmessage</span> = flushCallbacks;\n  macroTimerFunc = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    port.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-number\">1</span>);\n  };\n} <span class=\"hljs-keyword\">else</span> {\n  <span class=\"hljs-comment\">// &#x6700;&#x540e;&#x6267;&#x884c;setTimeout</span>\n  <span class=\"hljs-comment\">/* istanbul ignore next */</span>\n  macroTimerFunc = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-built_in\">setTimeout</span>(flushCallbacks, <span class=\"hljs-number\">0</span>);\n  };\n}\n\n<span class=\"hljs-comment\">// Determine microtask defer implementation.</span>\n<span class=\"hljs-comment\">/* istanbul ignore next, &#x24;flow-disable-line */</span>\n<span class=\"hljs-comment\">// &#x5982;&#x679c;&#x652f;&#x6301;promise,microTimerFunc&#x53d8;&#x91cf;&#x8d4b;&#x4e88;promise&#x5904;&#x7406;&#x7684;&#x7ed3;&#x679c;</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">Promise</span> !== <span class=\"hljs-string\">&apos;undefined&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">isNative</span>(<span class=\"hljs-title class_\">Promise</span>)) {\n  <span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">resolve</span>();\n  microTimerFunc = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    p.<span class=\"hljs-title function_\">then</span>(flushCallbacks);\n    <span class=\"hljs-comment\">// in problematic UIWebViews, Promise.then doesn&apos;t completely break, but</span>\n    <span class=\"hljs-comment\">// it can get stuck in a weird state where callbacks are pushed into the</span>\n    <span class=\"hljs-comment\">// microtask queue but the queue isn&apos;t being flushed, until the browser</span>\n    <span class=\"hljs-comment\">// needs to do some other work, e.g. handle a timer. Therefore we can</span>\n    <span class=\"hljs-comment\">// &quot;force&quot; the microtask queue to be flushed by adding an empty timer.</span>\n    <span class=\"hljs-keyword\">if</span> (isIOS) { <span class=\"hljs-built_in\">setTimeout</span>(noop); }\n  };\n} <span class=\"hljs-keyword\">else</span> {\n  <span class=\"hljs-comment\">// fallback to macro</span>\n  microTimerFunc = macroTimerFunc;\n}\n\n<span class=\"hljs-comment\">/**\n * Wrap a function so that if any code inside triggers state change,\n * the changes are queued using a (macro) task instead of a microtask.\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">withMacroTask</span> (<span class=\"hljs-params\">fn</span>) {\n  <span class=\"hljs-keyword\">return</span> fn.<span class=\"hljs-property\">_withTask</span> || (fn.<span class=\"hljs-property\">_withTask</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    useMacroTask = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-keyword\">var</span> res = fn.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-variable language_\">arguments</span>);\n    useMacroTask = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-keyword\">return</span> res\n  })\n}\n<span class=\"hljs-comment\">// nextTick&#x51fd;&#x6570;&#xff0c;&#x4f7f;&#x7528;macroTimerFunc&#x6216;&#x8005;microTimerFunc&#xff0c;&#x53d6;&#x51b3;&#x8bbe;&#x7f6e;&#x7684;useMacroTask&#x53d8;&#x91cf;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">nextTick</span> (<span class=\"hljs-params\">cb, ctx</span>) {\n  <span class=\"hljs-keyword\">var</span> _resolve;\n  callbacks.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (cb) {\n      <span class=\"hljs-keyword\">try</span> {\n        cb.<span class=\"hljs-title function_\">call</span>(ctx);\n      } <span class=\"hljs-keyword\">catch</span> (e) {\n        <span class=\"hljs-title function_\">handleError</span>(e, ctx, <span class=\"hljs-string\">&apos;nextTick&apos;</span>);\n      }\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (_resolve) {\n      <span class=\"hljs-title function_\">_resolve</span>(ctx);\n    }\n  });\n  <span class=\"hljs-keyword\">if</span> (!pending) {\n    pending = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-keyword\">if</span> (useMacroTask) {\n      <span class=\"hljs-title function_\">macroTimerFunc</span>();\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-title function_\">microTimerFunc</span>();\n    }\n  }\n  <span class=\"hljs-comment\">// &#x24;flow-disable-line</span>\n  <span class=\"hljs-keyword\">if</span> (!cb &amp;&amp; <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">Promise</span> !== <span class=\"hljs-string\">&apos;undefined&apos;</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">resolve</span>) {\n      _resolve = resolve;\n    })\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n<span class=\"hljs-keyword\">var</span> mark;\n<span class=\"hljs-keyword\">var</span> measure;\n<span class=\"hljs-comment\">// &#x4f7f;&#x7528;performance&#x8fdb;&#x884c;&#x6027;&#x80fd;&#x76d1;&#x63a7;</span>\n{\n  <span class=\"hljs-keyword\">var</span> perf = inBrowser &amp;&amp; <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">performance</span>;\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (\n    perf &amp;&amp;\n    perf.<span class=\"hljs-property\">mark</span> &amp;&amp;\n    perf.<span class=\"hljs-property\">measure</span> &amp;&amp;\n    perf.<span class=\"hljs-property\">clearMarks</span> &amp;&amp;\n    perf.<span class=\"hljs-property\">clearMeasures</span>\n  ) {\n    mark = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">tag</span>) { <span class=\"hljs-keyword\">return</span> perf.<span class=\"hljs-title function_\">mark</span>(tag); };\n    measure = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">name, startTag, endTag</span>) {\n      perf.<span class=\"hljs-title function_\">measure</span>(name, startTag, endTag);\n      perf.<span class=\"hljs-title function_\">clearMarks</span>(startTag);\n      perf.<span class=\"hljs-title function_\">clearMarks</span>(endTag);\n      perf.<span class=\"hljs-title function_\">clearMeasures</span>(name);\n    };\n  }\n}\n\n<span class=\"hljs-comment\">/* not type checking this file because flow doesn&apos;t play well with Proxy */</span>\n\n<span class=\"hljs-keyword\">var</span> initProxy;\n<span class=\"hljs-comment\">// &#x5b9a;&#x4e49;&#x4e00;&#x4e9b;&#x7279;&#x6b8a;&#x7684;&#x5b57;&#x6bb5;&#x4e0d;&#x80fd;&#x4f5c;&#x4e3a;&#x7ec4;&#x4ef6;&#x6216;&#x8005;&#x5c5e;&#x6027;&#x548c;&#x65b9;&#x6cd5;&#x7684;&#x56de;&#x5230;&#x63d0;&#x9192;</span>\n{\n  <span class=\"hljs-keyword\">var</span> allowedGlobals = <span class=\"hljs-title function_\">makeMap</span>(\n    <span class=\"hljs-string\">&apos;Infinity,undefined,NaN,isFinite,isNaN,&apos;</span> +\n    <span class=\"hljs-string\">&apos;parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,&apos;</span> +\n    <span class=\"hljs-string\">&apos;Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,&apos;</span> +\n    <span class=\"hljs-string\">&apos;require&apos;</span> <span class=\"hljs-comment\">// for Webpack/Browserify</span>\n  );\n\n  <span class=\"hljs-keyword\">var</span> warnNonPresent = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">target, key</span>) {\n    <span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">&quot;Property or method \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot; is not defined on the instance but &quot;</span> +\n      <span class=\"hljs-string\">&apos;referenced during render. Make sure that this property is reactive, &apos;</span> +\n      <span class=\"hljs-string\">&apos;either in the data option, or for class-based components, by &apos;</span> +\n      <span class=\"hljs-string\">&apos;initializing the property. &apos;</span> +\n      <span class=\"hljs-string\">&apos;See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.&apos;</span>,\n      target\n    );\n  };\n  <span class=\"hljs-comment\">// &#x662f;&#x5426;&#x652f;&#x6301;proxy</span>\n  <span class=\"hljs-keyword\">var</span> hasProxy =\n    <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-title class_\">Proxy</span> !== <span class=\"hljs-string\">&apos;undefined&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">isNative</span>(<span class=\"hljs-title class_\">Proxy</span>);\n\n  <span class=\"hljs-keyword\">if</span> (hasProxy) {\n    <span class=\"hljs-comment\">// &#x4e00;&#x4e9b;&#x952e;&#x76d8;&#x540d;&#x4e0d;&#x80fd;&#x81ea;&#x5b9a;&#x4e49;</span>\n    <span class=\"hljs-keyword\">var</span> isBuiltInModifier = <span class=\"hljs-title function_\">makeMap</span>(<span class=\"hljs-string\">&apos;stop,prevent,self,ctrl,shift,alt,meta,exact&apos;</span>);\n    config.<span class=\"hljs-property\">keyCodes</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(config.<span class=\"hljs-property\">keyCodes</span>, {\n      <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">set</span> (<span class=\"hljs-params\">target, key, value</span>) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isBuiltInModifier</span>(key)) {\n          <span class=\"hljs-title function_\">warn</span>((<span class=\"hljs-string\">&quot;Avoid overwriting built-in modifier in config.keyCodes: .&quot;</span> + key));\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n        } <span class=\"hljs-keyword\">else</span> {\n          target[key] = value;\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n        }\n      }\n    });\n  }\n<span class=\"hljs-comment\">// key&#x662f;&#x5426;&#x5728;target&#x5c5e;&#x6027;&#x4e2d;&#xff0c;&#x6216;&#x8005;&#x4e0d;&#x662f;&#x5168;&#x5c40;&#x7684;&#x53c2;&#x6570;&#x6216;&#x8005;&#x5b57;&#x6bcd;&#x5f00;&#x5934;&#x662f;&#x2018;-&#x2019;</span>\n  <span class=\"hljs-keyword\">var</span> hasHandler = {\n    <span class=\"hljs-attr\">has</span>: <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">has</span> (<span class=\"hljs-params\">target, key</span>) {\n      <span class=\"hljs-keyword\">var</span> has = key <span class=\"hljs-keyword\">in</span> target;\n      <span class=\"hljs-keyword\">var</span> isAllowed = <span class=\"hljs-title function_\">allowedGlobals</span>(key) || key.<span class=\"hljs-title function_\">charAt</span>(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;_&apos;</span>;\n      <span class=\"hljs-keyword\">if</span> (!has &amp;&amp; !isAllowed) {\n        <span class=\"hljs-title function_\">warnNonPresent</span>(target, key);\n      }\n      <span class=\"hljs-keyword\">return</span> has || !isAllowed\n    }\n  };\n<span class=\"hljs-comment\">// &#x8fd4;&#x56de;target[key]&#x5c5e;&#x6027;&#x503c; </span>\n  <span class=\"hljs-keyword\">var</span> getHandler = {\n    <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">get</span> (<span class=\"hljs-params\">target, key</span>) {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> key === <span class=\"hljs-string\">&apos;string&apos;</span> &amp;&amp; !(key <span class=\"hljs-keyword\">in</span> target)) {\n        <span class=\"hljs-title function_\">warnNonPresent</span>(target, key);\n      }\n      <span class=\"hljs-keyword\">return</span> target[key]\n    }\n  };\n  <span class=\"hljs-comment\">//proxy&#x51fd;&#x6570;&#x7684;&#x5904;&#x7406;</span>\n  initProxy = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initProxy</span> (<span class=\"hljs-params\">vm</span>) {\n    <span class=\"hljs-keyword\">if</span> (hasProxy) {\n      <span class=\"hljs-comment\">// determine which proxy handler to use</span>\n      <span class=\"hljs-keyword\">var</span> options = vm.<span class=\"hljs-property\">&#x24;options</span>;      \n      <span class=\"hljs-keyword\">var</span> handlers = options.<span class=\"hljs-property\">render</span> &amp;&amp; options.<span class=\"hljs-property\">render</span>.<span class=\"hljs-property\">_withStripped</span>\n        ? getHandler\n        : hasHandler;\n      vm.<span class=\"hljs-property\">_renderProxy</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(vm, handlers);\n    } <span class=\"hljs-keyword\">else</span> {\n      vm.<span class=\"hljs-property\">_renderProxy</span> = vm;\n    }\n  };\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;&#x65b0;&#x7684;set</span>\n<span class=\"hljs-keyword\">var</span> seenObjects = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">_Set</span>();\n\n<span class=\"hljs-comment\">/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a &quot;deep&quot; dependency.\n */</span>\n<span class=\"hljs-comment\">// &#x89e6;&#x53d1;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x6216;&#x8005;&#x6570;&#x7ec4;&#x7684;&#x6bcf;&#x4e2a;&#x5c5e;&#x6027;&#x7684;getter&#xff0c;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">traverse</span> (<span class=\"hljs-params\">val</span>) {\n  <span class=\"hljs-title function_\">_traverse</span>(val, seenObjects);\n  seenObjects.<span class=\"hljs-title function_\">clear</span>();\n}\n<span class=\"hljs-comment\">// &#x904d;&#x5386;&#x6570;&#x7ec4;&#x6216;&#x8005;&#x5bf9;&#x8c61;&#x4e0b;&#x7684;&#x6bcf;&#x4e2a;&#x5143;&#x7d20;&#x6216;&#x8005;&#x5c5e;&#x6027;&#x5e76;&#x4e14;&#x9012;&#x5f52;&#xff0c;&#x786e;&#x4fdd;&#x6bcf;&#x4e2a;&#x4e0b;&#x9762;&#x7684;&#x5c5e;&#x6027;&#x90fd;&#x662f;&#x53ef;&#x4ee5;&#x76d1;&#x542c;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">_traverse</span> (<span class=\"hljs-params\">val, seen</span>) {\n  <span class=\"hljs-keyword\">var</span> i, keys;\n  <span class=\"hljs-keyword\">var</span> isA = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(val);\n  <span class=\"hljs-keyword\">if</span> ((!isA &amp;&amp; !<span class=\"hljs-title function_\">isObject</span>(val)) || <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">isFrozen</span>(val) || val <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">VNode</span>) {\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (val.<span class=\"hljs-property\">__ob__</span>) {\n    <span class=\"hljs-keyword\">var</span> depId = val.<span class=\"hljs-property\">__ob__</span>.<span class=\"hljs-property\">dep</span>.<span class=\"hljs-property\">id</span>;\n    <span class=\"hljs-keyword\">if</span> (seen.<span class=\"hljs-title function_\">has</span>(depId)) {\n      <span class=\"hljs-keyword\">return</span>\n    }\n    seen.<span class=\"hljs-title function_\">add</span>(depId);\n  }\n  <span class=\"hljs-keyword\">if</span> (isA) {\n    i = val.<span class=\"hljs-property\">length</span>;\n    <span class=\"hljs-keyword\">while</span> (i--) { <span class=\"hljs-title function_\">_traverse</span>(val[i], seen); }\n  } <span class=\"hljs-keyword\">else</span> {\n    keys = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(val);\n    i = keys.<span class=\"hljs-property\">length</span>;\n    <span class=\"hljs-keyword\">while</span> (i--) { <span class=\"hljs-title function_\">_traverse</span>(val[keys[i]], seen); }\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x4e8b;&#x4ef6;event&#x540d;&#xff0c;&#x4ee5;&amp;&#xff0c;~&#xff0c;&#xff01;&#x5f00;&#x5934;&#x7684;&#x540d;&#x5b57;&#x4f5c;&#x4e3a;&#x5bf9;&#x8c61;&#x5408;&#x96c6;&#x8fd4;&#x56de;</span>\n<span class=\"hljs-keyword\">var</span> normalizeEvent = <span class=\"hljs-title function_\">cached</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">name</span>) {\n  <span class=\"hljs-keyword\">var</span> passive = name.<span class=\"hljs-title function_\">charAt</span>(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;&amp;&apos;</span>;\n  name = passive ? name.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>) : name;\n  <span class=\"hljs-keyword\">var</span> once&#x24;&#x24;1 = name.<span class=\"hljs-title function_\">charAt</span>(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;~&apos;</span>; <span class=\"hljs-comment\">// Prefixed last, checked first</span>\n  name = once&#x24;&#x24;1 ? name.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>) : name;\n  <span class=\"hljs-keyword\">var</span> capture = name.<span class=\"hljs-title function_\">charAt</span>(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;!&apos;</span>;\n  name = capture ? name.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">1</span>) : name;\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">name</span>: name,\n    <span class=\"hljs-attr\">once</span>: once&#x24;&#x24;1,\n    <span class=\"hljs-attr\">capture</span>: capture,\n    <span class=\"hljs-attr\">passive</span>: passive\n  }\n});\n<span class=\"hljs-comment\">// &#x5c06;&#x4f20;&#x53c2;a&#x4f20;&#x9012;&#x7ed9;&#x4e00;&#x4e2a;&#x7533;&#x660e;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x4e14;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x7684;&#x4f20;&#x53c2;b&#xff0c;&#x4f1a;&#x88ab;&#x4f20;&#x53c2;a&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x8c03;&#x7528;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createFnInvoker</span> (<span class=\"hljs-params\">fns</span>) {\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">invoker</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">arguments</span>&#x24;1 = <span class=\"hljs-variable language_\">arguments</span>;\n\n    <span class=\"hljs-keyword\">var</span> fns = invoker.<span class=\"hljs-property\">fns</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(fns)) {\n      <span class=\"hljs-keyword\">var</span> cloned = fns.<span class=\"hljs-title function_\">slice</span>();\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; cloned.<span class=\"hljs-property\">length</span>; i++) {\n        cloned[i].<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-variable language_\">arguments</span>&#x24;1);\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-comment\">// return handler return value for single handlers</span>\n      <span class=\"hljs-keyword\">return</span> fns.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-variable language_\">arguments</span>)\n    }\n  }\n  invoker.<span class=\"hljs-property\">fns</span> = fns;\n  <span class=\"hljs-keyword\">return</span> invoker\n}\n<span class=\"hljs-comment\">// &#x8ddf;&#x65b0;&#x76d1;&#x542c;&#x5668; v-on</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateListeners</span> (<span class=\"hljs-params\">\n  on,\n  oldOn,\n  add,\n  remove&#x24;&#x24;1,\n  vm\n</span>) {\n  <span class=\"hljs-keyword\">var</span> name, def, cur, old, event;\n  <span class=\"hljs-comment\">// &#x904d;&#x5386;&#x76d1;&#x542c;&#x5668;</span>\n  <span class=\"hljs-keyword\">for</span> (name <span class=\"hljs-keyword\">in</span> on) {\n    def = cur = on[name];\n    old = oldOn[name];\n    event = <span class=\"hljs-title function_\">normalizeEvent</span>(name);\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x5f53;&#x524d;&#x76d1;&#x542c;&#x4e8b;&#x4ef6;&#x6ca1;&#x6709;&#x51fd;&#x6570;&#xff0c;&#x62a5;&#x9519;</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(cur)) {\n      <span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">warn</span>(\n        <span class=\"hljs-string\">&quot;Invalid handler for event \\&quot;&quot;</span> + (event.<span class=\"hljs-property\">name</span>) + <span class=\"hljs-string\">&quot;\\&quot;: got &quot;</span> + <span class=\"hljs-title class_\">String</span>(cur),\n        vm\n      );\n      <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x5c31;&#x7684;&#x76d1;&#x542c;&#x4e8b;&#x4ef6;&#x6ca1;&#x6709;&#xff0c;&#x65b0;&#x5efa;&#x65b0;&#x7684;&#x4e8b;&#x4ef6;</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(old)) {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(cur.<span class=\"hljs-property\">fns</span>)) {\n        cur = on[name] = <span class=\"hljs-title function_\">createFnInvoker</span>(cur);\n      }\n      <span class=\"hljs-comment\">//&#x6dfb;&#x52a0;&#x76d1;&#x542c;&#x4e8b;&#x4ef6;&#x540d;&#xff0c;&#x51fd;&#x6570;&#xff0c;&#x4ee5;&#x53ca;&#x4e8b;&#x4ef6;&#x7684;&#x6761;&#x4ef6;</span>\n      <span class=\"hljs-title function_\">add</span>(event.<span class=\"hljs-property\">name</span>, cur, event.<span class=\"hljs-property\">once</span>, event.<span class=\"hljs-property\">capture</span>, event.<span class=\"hljs-property\">passive</span>, event.<span class=\"hljs-property\">params</span>);\n      <span class=\"hljs-comment\">// &#x5982;&#x679c;&#x5f53;&#x524d;&#x4e0d;&#x7b49;&#x4e8e;&#x4ee5;&#x524d;&#x7684;&#xff0c;&#x51fd;&#x6570;&#x6539;&#x4e3a;&#x73b0;&#x5728;&#x7684;&#xff0c;&#x4e8b;&#x4ef6;&#x6539;&#x4e3a;&#x4e4b;&#x524d;&#x7684;</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (cur !== old) {\n      old.<span class=\"hljs-property\">fns</span> = cur;\n      on[name] = old;\n    }\n  }\n  <span class=\"hljs-comment\">//&#x5728;&#x65e7;&#x4e8b;&#x4ef6;&#x4e2d;&#x6709;&#x800c;&#x65b0;&#x4e8b;&#x4ef6;&#x4e2d;&#x6ca1;&#x6709;&#x7684;&#x5220;&#x9664;</span>\n  <span class=\"hljs-keyword\">for</span> (name <span class=\"hljs-keyword\">in</span> oldOn) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(on[name])) {\n      event = <span class=\"hljs-title function_\">normalizeEvent</span>(name);\n      <span class=\"hljs-title function_\">remove&#x24;&#x24;1</span>(event.<span class=\"hljs-property\">name</span>, oldOn[name], event.<span class=\"hljs-property\">capture</span>);\n    }\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x5408;&#x5e76;Vnode&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">mergeVNodeHook</span> (<span class=\"hljs-params\">def, hookKey, hook</span>) {\n  <span class=\"hljs-keyword\">if</span> (def <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">VNode</span>) {\n    def = def.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">hook</span> || (def.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">hook</span> = {});\n  }\n  <span class=\"hljs-keyword\">var</span> invoker;\n  <span class=\"hljs-keyword\">var</span> oldHook = def[hookKey];\n  <span class=\"hljs-comment\">// hook&#x88ab;&#x8c03;&#x7528;&#x540e;&#x5c06;&#x5176;&#x51fd;&#x6570;&#x548c;hook&#x5220;&#x9664;&#xff0c;&#x4f7f;&#x5176;&#x53ea;&#x80fd;&#x88ab;&#x8c03;&#x7528;&#x4e00;&#x6b21;</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">wrappedHook</span> (<span class=\"hljs-params\"></span>) {\n    hook.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-variable language_\">arguments</span>);\n    <span class=\"hljs-comment\">// important: remove merged hook to ensure it&apos;s called only once</span>\n    <span class=\"hljs-comment\">// and prevent memory leak</span>\n    <span class=\"hljs-title function_\">remove</span>(invoker.<span class=\"hljs-property\">fns</span>, wrappedHook);\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(oldHook)) {\n    <span class=\"hljs-comment\">// no existing hook</span>\n    invoker = <span class=\"hljs-title function_\">createFnInvoker</span>([wrappedHook]);\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(oldHook.<span class=\"hljs-property\">fns</span>) &amp;&amp; <span class=\"hljs-title function_\">isTrue</span>(oldHook.<span class=\"hljs-property\">merged</span>)) {\n      <span class=\"hljs-comment\">// already a merged invoker</span>\n      invoker = oldHook;\n      invoker.<span class=\"hljs-property\">fns</span>.<span class=\"hljs-title function_\">push</span>(wrappedHook);\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-comment\">// existing plain hook</span>\n      invoker = <span class=\"hljs-title function_\">createFnInvoker</span>([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.<span class=\"hljs-property\">merged</span> = <span class=\"hljs-literal\">true</span>;\n  def[hookKey] = invoker;\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x83b7;&#x53d6;Vnode&#x4e2d;&#x7684;props&#x548c;attr</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">extractPropsFromVNodeData</span> (<span class=\"hljs-params\">\n  data,\n  Ctor,\n  tag\n</span>) {\n  <span class=\"hljs-comment\">// we are only extracting raw values here.</span>\n  <span class=\"hljs-comment\">// validation and default values are handled in the child</span>\n  <span class=\"hljs-comment\">// component itself.</span>\n  <span class=\"hljs-keyword\">var</span> propOptions = <span class=\"hljs-title class_\">Ctor</span>.<span class=\"hljs-property\">options</span>.<span class=\"hljs-property\">props</span>;\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(propOptions)) {\n    <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">var</span> res = {};\n  <span class=\"hljs-keyword\">var</span> attrs = data.<span class=\"hljs-property\">attrs</span>;\n  <span class=\"hljs-keyword\">var</span> props = data.<span class=\"hljs-property\">props</span>;\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(attrs) || <span class=\"hljs-title function_\">isDef</span>(props)) {\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> key <span class=\"hljs-keyword\">in</span> propOptions) {\n      <span class=\"hljs-keyword\">var</span> altKey = <span class=\"hljs-title function_\">hyphenate</span>(key);\n      {\n        <span class=\"hljs-keyword\">var</span> keyInLowerCase = key.<span class=\"hljs-title function_\">toLowerCase</span>();\n        <span class=\"hljs-keyword\">if</span> (\n          key !== keyInLowerCase &amp;&amp;\n          attrs &amp;&amp; <span class=\"hljs-title function_\">hasOwn</span>(attrs, keyInLowerCase)\n        ) {\n          <span class=\"hljs-title function_\">tip</span>(\n            <span class=\"hljs-string\">&quot;Prop \\&quot;&quot;</span> + keyInLowerCase + <span class=\"hljs-string\">&quot;\\&quot; is passed to component &quot;</span> +\n            (<span class=\"hljs-title function_\">formatComponentName</span>(tag || <span class=\"hljs-title class_\">Ctor</span>)) + <span class=\"hljs-string\">&quot;, but the declared prop name is&quot;</span> +\n            <span class=\"hljs-string\">&quot; \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot;. &quot;</span> +\n            <span class=\"hljs-string\">&quot;Note that HTML attributes are case-insensitive and camelCased &quot;</span> +\n            <span class=\"hljs-string\">&quot;props need to use their kebab-case equivalents when using in-DOM &quot;</span> +\n            <span class=\"hljs-string\">&quot;templates. You should probably use \\&quot;&quot;</span> + altKey + <span class=\"hljs-string\">&quot;\\&quot; instead of \\&quot;&quot;</span> + key + <span class=\"hljs-string\">&quot;\\&quot;.&quot;</span>\n          );\n        }\n      }\n      <span class=\"hljs-title function_\">checkProp</span>(res, props, key, altKey, <span class=\"hljs-literal\">true</span>) ||\n      <span class=\"hljs-title function_\">checkProp</span>(res, attrs, key, altKey, <span class=\"hljs-literal\">false</span>);\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> res\n}\n<span class=\"hljs-comment\">// &#x68c0;&#x67e5;&#x662f;&#x5426;&#x542b;&#x6709;prop,&#x6216;&#x8005;attr</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">checkProp</span> (<span class=\"hljs-params\">\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n</span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(hash)) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">hasOwn</span>(hash, key)) {\n      res[key] = hash[key];\n      <span class=\"hljs-keyword\">if</span> (!preserve) {\n        <span class=\"hljs-keyword\">delete</span> hash[key];\n      }\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">hasOwn</span>(hash, altKey)) {\n      res[key] = hash[altKey];\n      <span class=\"hljs-keyword\">if</span> (!preserve) {\n        <span class=\"hljs-keyword\">delete</span> hash[altKey];\n      }\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n<span class=\"hljs-comment\">// The template compiler attempts to minimize the need for normalization by</span>\n<span class=\"hljs-comment\">// statically analyzing the template at compile time.</span>\n<span class=\"hljs-comment\">//</span>\n<span class=\"hljs-comment\">// For plain HTML markup, normalization can be completely skipped because the</span>\n<span class=\"hljs-comment\">// generated render function is guaranteed to return Array&lt;VNode&gt;. There are</span>\n<span class=\"hljs-comment\">// two cases where extra normalization is needed:</span>\n\n<span class=\"hljs-comment\">// 1. When the children contains components - because a functional component</span>\n<span class=\"hljs-comment\">// may return an Array instead of a single root. In this case, just a simple</span>\n<span class=\"hljs-comment\">// normalization is needed - if any child is an Array, we flatten the whole</span>\n<span class=\"hljs-comment\">// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep</span>\n<span class=\"hljs-comment\">// because functional components already normalize their own children.</span>\n<span class=\"hljs-comment\">// </span>\n<span class=\"hljs-comment\">// &#x5982;&#x679c;children&#x6570;&#x7ec4;&#x4e2d;&#x542b;&#x6709;&#x6570;&#x7ec4;&#xff0c;&#x5c06;&#x6570;&#x7ec4;&#x4e0e;children&#x5408;&#x5e76;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">simpleNormalizeChildren</span> (<span class=\"hljs-params\">children</span>) {\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; children.<span class=\"hljs-property\">length</span>; i++) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(children[i])) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">concat</span>.<span class=\"hljs-title function_\">apply</span>([], children)\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> children\n}\n\n<span class=\"hljs-comment\">// 2. When the children contains constructs that always generated nested Arrays,</span>\n<span class=\"hljs-comment\">// e.g. &lt;template&gt;, &lt;slot&gt;, v-for, or when the children is provided by user</span>\n<span class=\"hljs-comment\">// with hand-written render functions / JSX. In such cases a full normalization</span>\n<span class=\"hljs-comment\">// is needed to cater to all possible types of children values.</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">normalizeChildren</span> (<span class=\"hljs-params\">children</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">isPrimitive</span>(children)\n    ? [<span class=\"hljs-title function_\">createTextVNode</span>(children)]\n    : <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(children)\n      ? <span class=\"hljs-title function_\">normalizeArrayChildren</span>(children)\n      : <span class=\"hljs-literal\">undefined</span> \n}\n<span class=\"hljs-comment\">// &#x662f;&#x5426;&#x662f;&#x6587;&#x5b57;vnode</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isTextNode</span> (<span class=\"hljs-params\">node</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">isDef</span>(node) &amp;&amp; <span class=\"hljs-title function_\">isDef</span>(node.<span class=\"hljs-property\">text</span>) &amp;&amp; <span class=\"hljs-title function_\">isFalse</span>(node.<span class=\"hljs-property\">isComment</span>)\n}\n<span class=\"hljs-comment\">// &#x5224;&#x65ad;children&#x4e2d;&#x7684;&#x5b50;&#x5143;&#x7d20;&#x662f;&#x4e0d;&#x662f;&#x6570;&#x7ec4;&#xff0c;&#x5982;&#x679c;&#x662f;&#x6570;&#x7ec4;&#x4f4e;&#x4f30;&#x8c03;&#x7528;&#xff0c;&#x4f5c;&#x4e3a;&#x6570;&#x7ec4;&#x8fd4;&#x56de;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">normalizeArrayChildren</span> (<span class=\"hljs-params\">children, nestedIndex</span>) {\n  <span class=\"hljs-keyword\">var</span> res = [];\n  <span class=\"hljs-keyword\">var</span> i, c, lastIndex, last;\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; children.<span class=\"hljs-property\">length</span>; i++) {\n    c = children[i];\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(c) || <span class=\"hljs-keyword\">typeof</span> c === <span class=\"hljs-string\">&apos;boolean&apos;</span>) { <span class=\"hljs-keyword\">continue</span> }\n    lastIndex = res.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>;\n    last = res[lastIndex];\n    <span class=\"hljs-comment\">//  nested</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(c)) {\n      <span class=\"hljs-keyword\">if</span> (c.<span class=\"hljs-property\">length</span> &gt; <span class=\"hljs-number\">0</span>) {\n        c = <span class=\"hljs-title function_\">normalizeArrayChildren</span>(c, ((nestedIndex || <span class=\"hljs-string\">&apos;&apos;</span>) + <span class=\"hljs-string\">&quot;_&quot;</span> + i));\n        <span class=\"hljs-comment\">// merge adjacent text nodes</span>\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isTextNode</span>(c[<span class=\"hljs-number\">0</span>]) &amp;&amp; <span class=\"hljs-title function_\">isTextNode</span>(last)) {\n          res[lastIndex] = <span class=\"hljs-title function_\">createTextVNode</span>(last.<span class=\"hljs-property\">text</span> + (c[<span class=\"hljs-number\">0</span>]).<span class=\"hljs-property\">text</span>);\n          c.<span class=\"hljs-title function_\">shift</span>();\n        }\n        res.<span class=\"hljs-property\">push</span>.<span class=\"hljs-title function_\">apply</span>(res, c);\n      }\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isPrimitive</span>(c)) {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isTextNode</span>(last)) {\n        <span class=\"hljs-comment\">// merge adjacent text nodes</span>\n        <span class=\"hljs-comment\">// this is necessary for SSR hydration because text nodes are</span>\n        <span class=\"hljs-comment\">// essentially merged when rendered to HTML strings</span>\n        res[lastIndex] = <span class=\"hljs-title function_\">createTextVNode</span>(last.<span class=\"hljs-property\">text</span> + c);\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (c !== <span class=\"hljs-string\">&apos;&apos;</span>) {\n        <span class=\"hljs-comment\">// convert primitive to vnode</span>\n        res.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title function_\">createTextVNode</span>(c));\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isTextNode</span>(c) &amp;&amp; <span class=\"hljs-title function_\">isTextNode</span>(last)) {\n        <span class=\"hljs-comment\">// merge adjacent text nodes</span>\n        res[lastIndex] = <span class=\"hljs-title function_\">createTextVNode</span>(last.<span class=\"hljs-property\">text</span> + c.<span class=\"hljs-property\">text</span>);\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-comment\">// default key for nested array children (likely generated by v-for)</span>\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isTrue</span>(children.<span class=\"hljs-property\">_isVList</span>) &amp;&amp;\n          <span class=\"hljs-title function_\">isDef</span>(c.<span class=\"hljs-property\">tag</span>) &amp;&amp;\n          <span class=\"hljs-title function_\">isUndef</span>(c.<span class=\"hljs-property\">key</span>) &amp;&amp;\n          <span class=\"hljs-title function_\">isDef</span>(nestedIndex)) {\n          c.<span class=\"hljs-property\">key</span> = <span class=\"hljs-string\">&quot;__vlist&quot;</span> + nestedIndex + <span class=\"hljs-string\">&quot;_&quot;</span> + i + <span class=\"hljs-string\">&quot;__&quot;</span>;\n        }\n        res.<span class=\"hljs-title function_\">push</span>(c);\n      }\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> res\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">ensureCtor</span> (<span class=\"hljs-params\">comp, base</span>) {\n  <span class=\"hljs-keyword\">if</span> (\n    comp.<span class=\"hljs-property\">__esModule</span> ||\n    (hasSymbol &amp;&amp; comp[<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">toStringTag</span>] === <span class=\"hljs-string\">&apos;Module&apos;</span>)\n  ) {\n    comp = comp.<span class=\"hljs-property\">default</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">isObject</span>(comp)\n    ? base.<span class=\"hljs-title function_\">extend</span>(comp)\n    : comp\n}\n<span class=\"hljs-comment\">//&#x521b;&#x5efa;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createAsyncPlaceholder</span> (<span class=\"hljs-params\">\n  factory,\n  data,\n  context,\n  children,\n  tag\n</span>) {\n  <span class=\"hljs-keyword\">var</span> node = <span class=\"hljs-title function_\">createEmptyVNode</span>();\n  node.<span class=\"hljs-property\">asyncFactory</span> = factory;\n  node.<span class=\"hljs-property\">asyncMeta</span> = { <span class=\"hljs-attr\">data</span>: data, <span class=\"hljs-attr\">context</span>: context, <span class=\"hljs-attr\">children</span>: children, <span class=\"hljs-attr\">tag</span>: tag };\n  <span class=\"hljs-keyword\">return</span> node\n}\n<span class=\"hljs-comment\">// &#x6267;&#x884c;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#xff0c;&#x7533;&#x660e;resolve,reject&#x4e24;&#x4e2a;&#x5904;&#x7406;&#x51fd;&#x6570;&#x6700;&#x540e;&#x7528;promise</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resolveAsyncComponent</span> (<span class=\"hljs-params\">\n  factory,\n  baseCtor,\n  context\n</span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isTrue</span>(factory.<span class=\"hljs-property\">error</span>) &amp;&amp; <span class=\"hljs-title function_\">isDef</span>(factory.<span class=\"hljs-property\">errorComp</span>)) {\n    <span class=\"hljs-keyword\">return</span> factory.<span class=\"hljs-property\">errorComp</span>\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(factory.<span class=\"hljs-property\">resolved</span>)) {\n    <span class=\"hljs-keyword\">return</span> factory.<span class=\"hljs-property\">resolved</span>\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isTrue</span>(factory.<span class=\"hljs-property\">loading</span>) &amp;&amp; <span class=\"hljs-title function_\">isDef</span>(factory.<span class=\"hljs-property\">loadingComp</span>)) {\n    <span class=\"hljs-keyword\">return</span> factory.<span class=\"hljs-property\">loadingComp</span>\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(factory.<span class=\"hljs-property\">contexts</span>)) {\n    <span class=\"hljs-comment\">// already pending</span>\n    factory.<span class=\"hljs-property\">contexts</span>.<span class=\"hljs-title function_\">push</span>(context);\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">var</span> contexts = factory.<span class=\"hljs-property\">contexts</span> = [context];\n    <span class=\"hljs-keyword\">var</span> sync = <span class=\"hljs-literal\">true</span>;\n\n    <span class=\"hljs-keyword\">var</span> forceRender = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, l = contexts.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        contexts[i].&#x24;forceUpdate();\n      }\n    };\n\n    <span class=\"hljs-keyword\">var</span> resolve = <span class=\"hljs-title function_\">once</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">res</span>) {\n      <span class=\"hljs-comment\">// cache resolved</span>\n      <span class=\"hljs-comment\">// &#x8fd4;&#x56de;&#x7ed3;&#x679c;</span>\n      factory.<span class=\"hljs-property\">resolved</span> = <span class=\"hljs-title function_\">ensureCtor</span>(res, baseCtor);\n      <span class=\"hljs-comment\">// invoke callbacks only if this is not a synchronous resolve</span>\n      <span class=\"hljs-comment\">// (async resolves are shimmed as synchronous during SSR)</span>\n      <span class=\"hljs-keyword\">if</span> (!sync) {\n        <span class=\"hljs-comment\">// &#x6bcf;&#x4e2a;context&#x5f3a;&#x5236;</span>\n        <span class=\"hljs-title function_\">forceRender</span>();\n      }\n    });\n\n    <span class=\"hljs-keyword\">var</span> reject = <span class=\"hljs-title function_\">once</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">reason</span>) {\n      <span class=\"hljs-string\">&quot;development&quot;</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">warn</span>(\n        <span class=\"hljs-string\">&quot;Failed to resolve async component: &quot;</span> + (<span class=\"hljs-title class_\">String</span>(factory)) +\n        (reason ? (<span class=\"hljs-string\">&quot;\\nReason: &quot;</span> + reason) : <span class=\"hljs-string\">&apos;&apos;</span>)\n      );\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(factory.<span class=\"hljs-property\">errorComp</span>)) {\n        factory.<span class=\"hljs-property\">error</span> = <span class=\"hljs-literal\">true</span>;\n        <span class=\"hljs-title function_\">forceRender</span>();\n      }\n    });\n\n    <span class=\"hljs-keyword\">var</span> res = <span class=\"hljs-title function_\">factory</span>(resolve, reject);\n\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isObject</span>(res)) {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> res.<span class=\"hljs-property\">then</span> === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n        <span class=\"hljs-comment\">// () =&gt; Promise</span>\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(factory.<span class=\"hljs-property\">resolved</span>)) {\n          res.<span class=\"hljs-title function_\">then</span>(resolve, reject);\n        }\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(res.<span class=\"hljs-property\">component</span>) &amp;&amp; <span class=\"hljs-keyword\">typeof</span> res.<span class=\"hljs-property\">component</span>.<span class=\"hljs-property\">then</span> === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n        res.<span class=\"hljs-property\">component</span>.<span class=\"hljs-title function_\">then</span>(resolve, reject);\n\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(res.<span class=\"hljs-property\">error</span>)) {\n          factory.<span class=\"hljs-property\">errorComp</span> = <span class=\"hljs-title function_\">ensureCtor</span>(res.<span class=\"hljs-property\">error</span>, baseCtor);\n        }\n\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(res.<span class=\"hljs-property\">loading</span>)) {\n          factory.<span class=\"hljs-property\">loadingComp</span> = <span class=\"hljs-title function_\">ensureCtor</span>(res.<span class=\"hljs-property\">loading</span>, baseCtor);\n          <span class=\"hljs-keyword\">if</span> (res.<span class=\"hljs-property\">delay</span> === <span class=\"hljs-number\">0</span>) {\n            factory.<span class=\"hljs-property\">loading</span> = <span class=\"hljs-literal\">true</span>;\n          } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n              <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(factory.<span class=\"hljs-property\">resolved</span>) &amp;&amp; <span class=\"hljs-title function_\">isUndef</span>(factory.<span class=\"hljs-property\">error</span>)) {\n                factory.<span class=\"hljs-property\">loading</span> = <span class=\"hljs-literal\">true</span>;\n                <span class=\"hljs-title function_\">forceRender</span>();\n              }\n            }, res.<span class=\"hljs-property\">delay</span> || <span class=\"hljs-number\">200</span>);\n          }\n        }\n\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(res.<span class=\"hljs-property\">timeout</span>)) {\n          <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isUndef</span>(factory.<span class=\"hljs-property\">resolved</span>)) {\n              <span class=\"hljs-title function_\">reject</span>(\n                <span class=\"hljs-string\">&quot;timeout (&quot;</span> + (res.<span class=\"hljs-property\">timeout</span>) + <span class=\"hljs-string\">&quot;ms)&quot;</span>\n              );\n            }\n          }, res.<span class=\"hljs-property\">timeout</span>);\n        }\n      }\n    }\n\n    sync = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-comment\">// return in case resolved synchronously</span>\n    <span class=\"hljs-keyword\">return</span> factory.<span class=\"hljs-property\">loading</span>\n      ? factory.<span class=\"hljs-property\">loadingComp</span>\n      : factory.<span class=\"hljs-property\">resolved</span>\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x662f;&#x5426;&#x662f;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">isAsyncPlaceholder</span> (<span class=\"hljs-params\">node</span>) {\n  <span class=\"hljs-keyword\">return</span> node.<span class=\"hljs-property\">isComment</span> &amp;&amp; node.<span class=\"hljs-property\">asyncFactory</span>\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x7b2c;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b50;&#x7ec4;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getFirstComponentChild</span> (<span class=\"hljs-params\">children</span>) {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(children)) {\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; children.<span class=\"hljs-property\">length</span>; i++) {\n      <span class=\"hljs-keyword\">var</span> c = children[i];\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isDef</span>(c) &amp;&amp; (<span class=\"hljs-title function_\">isDef</span>(c.<span class=\"hljs-property\">componentOptions</span>) || <span class=\"hljs-title function_\">isAsyncPlaceholder</span>(c))) {\n        <span class=\"hljs-keyword\">return</span> c\n      }\n    }\n  }\n}\n\n<span class=\"hljs-comment\">/*  */</span>\n\n<span class=\"hljs-comment\">/*  */</span>\n<span class=\"hljs-comment\">// &#x521d;&#x59cb;&#x5316;&#x4e8b;&#x4ef6;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initEvents</span> (<span class=\"hljs-params\">vm</span>) {\n  vm.<span class=\"hljs-property\">_events</span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-literal\">null</span>);\n  vm.<span class=\"hljs-property\">_hasHookEvent</span> = <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-comment\">// init parent attached events</span>\n  <span class=\"hljs-keyword\">var</span> listeners = vm.<span class=\"hljs-property\">&#x24;options</span>.<span class=\"hljs-property\">_parentListeners</span>;\n  <span class=\"hljs-keyword\">if</span> (listeners) {\n    <span class=\"hljs-title function_\">updateComponentListeners</span>(vm, listeners);\n  }\n}\n\n<span class=\"hljs-keyword\">var</span> target;\n<span class=\"hljs-comment\">// &#x4e3a;&#x4e8b;&#x4ef6;&#x6dfb;&#x52a0;&#x51fd;&#x6570;&#xff0c;&#x5224;&#x65ad;&#x662f;&#x5426;&#x662f;once</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">add</span> (<span class=\"hljs-params\">event, fn, once</span>) {\n  <span class=\"hljs-keyword\">if</span> (once) {\n    target.&#x24;once(event, fn);\n  } <span class=\"hljs-keyword\">else</span> {\n    target.&#x24;on(event, fn);\n  }\n}\n<span class=\"hljs-comment\">// &#x5b9e;&#x5904;&#x4e8b;&#x4ef6;&#x7ed1;&#x5b9a;&#x7684;&#x51fd;&#x6570;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">remove&#x24;1</span> (<span class=\"hljs-params\">event, fn</span>) {\n  target.&#x24;off(event, fn);\n}\n<span class=\"hljs-comment\">// &#x8ddf;&#x65b0;&#x7ec4;&#x4ef6;&#x4e2d;&#x7684;&#x76d1;&#x542c;&#x5668;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateComponentListeners</span> (<span class=\"hljs-params\">\n  vm,\n  listeners,\n  oldListeners\n</span>) {\n  target = vm;\n  <span class=\"hljs-title function_\">updateListeners</span>(listeners, oldListeners || {}, add, remove&#x24;1, vm);\n  target = <span class=\"hljs-literal\">undefined</span>;\n}\n<span class=\"hljs-comment\">// vue&#x539f;&#x578b;&#x94fe;&#x4e0a;&#x7ed1;&#x5b9a;&#x4e00;&#x4e9b;&#x65b9;&#x6cd5;</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">eventsMixin</span> (<span class=\"hljs-params\">Vue</span>) {\n  <span class=\"hljs-keyword\">var</span> hookRE = <span class=\"hljs-regexp\">/^hook:/</span>;\n  <span class=\"hljs-comment\">// &#x24;on &#x5c06;&#x4e8b;&#x4ef6;&#x65b9;&#x6cd5;&#x4fdd;&#x5b58;&#x5230;vm&#x4e0b;&#x9762;&#x7684;_events&#x5bf9;&#x5e94;&#x7684;&#x6570;&#x7ec4;&#x4e0b;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;on</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event, fn</span>) {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">this</span>&#x24;1 = <span class=\"hljs-variable language_\">this</span>;\n\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(event)) {\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, l = event.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        <span class=\"hljs-variable language_\">this</span>&#x24;1.&#x24;on(event[i], fn);\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      (vm.<span class=\"hljs-property\">_events</span>[event] || (vm.<span class=\"hljs-property\">_events</span>[event] = [])).<span class=\"hljs-title function_\">push</span>(fn);\n      <span class=\"hljs-comment\">// optimize hook:event cost by using a boolean flag marked at registration</span>\n      <span class=\"hljs-comment\">// instead of a hash lookup</span>\n      <span class=\"hljs-keyword\">if</span> (hookRE.<span class=\"hljs-title function_\">test</span>(event)) {\n        vm.<span class=\"hljs-property\">_hasHookEvent</span> = <span class=\"hljs-literal\">true</span>;\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> vm\n  };\n  <span class=\"hljs-comment\">// &#x5355;&#x6b21;&#x6267;&#x884c;&#x51fd;&#x6570;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;once</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event, fn</span>) {\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">on</span> (<span class=\"hljs-params\"></span>) {\n      vm.&#x24;off(event, on);\n      fn.<span class=\"hljs-title function_\">apply</span>(vm, <span class=\"hljs-variable language_\">arguments</span>);\n    }\n    on.<span class=\"hljs-property\">fn</span> = fn;\n    vm.&#x24;on(event, on);\n    <span class=\"hljs-keyword\">return</span> vm\n  };\n  <span class=\"hljs-comment\">// &#x5c06;&#x4fdd;&#x5b58;&#x5728;_events&#x4e0b;&#x9762;&#x7684;&#x51fd;&#x6570;&#x6570;&#x7ec4;&#x4e2d;&#x7279;&#x5b9a;&#x7684;&#x5220;&#x9664;</span>\n  <span class=\"hljs-title class_\">Vue</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">&#x24;off</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event, fn</span>) {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">this</span>&#x24;1 = <span class=\"hljs-variable language_\">this</span>;\n\n    <span class=\"hljs-keyword\">var</span> vm = <span class=\"hljs-variable language_\">this</span>;\n    <span class=\"hljs-comment\">// all</span>\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">arguments</span>.<span class=\"hljs-property\">length</span>) {\n      vm.<span class=\"hljs-property\">_events</span> = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-literal\">null</span>);\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-comment\">// array of events</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(event)) {\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>, l = event.<span class=\"hljs-property\">length</span>; i &lt; l; i++) {\n        <span class=\"hljs-variable language_\">this</span>&#x24;1.&#x24;off(event[i], fn);\n      }\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-comment\">// specific event</span>\n    <span class=\"hljs-keyword\">var</span> cbs = vm.<span class=\"hljs-property\">_events</span>[event];\n    <span class=\"hljs-keyword\">if</span> (!cbs) {\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-keyword\">if</span> (!fn) {\n      vm.<span class=\"hljs-property\">_events</span>[event] = <span class=\"hljs-literal\">null</span>;\n      <span class=\"hljs-keyword\">return</span> vm\n    }\n    <span class=\"hljs-keyword\">if</span> (fn) {\n      <span class=\"hljs-comment\">// specific handler</span>\n      <span class=\"hljs-keyword\">var</span> cb;\n      <span class=\"hljs-keyword\">var</span> i&#x24;1 = cbs.<span class=\"hljs-property\">length</span>;\n      <span class=\"hljs-keyword\">while</span> (i&#x24;1--) {\n        cb = cbs[i&#x24;1];\n        <span class=\"hljs-keyword\">if</span> (cb === fn || cb.<span class=\"hljs-property\">fn</span> === fn) {\n          cbs.<span class=\"hljs-title function_\">splice</span>(i&#x24;1, <span class=\"hljs-number\">1</span>);\n          <span class=\"hljs-keyword\">break</span>\n        }\n      }\n    }\n    <span class=\"hljs-keyword\">return</span> vm\n  };\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,976"}}],"payload":{"tag":"h3","lines":"0,1"}},{})</script>
</body>
</html>
