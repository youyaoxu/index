<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x5b66;&#x4e60;Hibernate5 JPA&#x8fd9;&#x4e00;&#x7bc7;&#x5c31;&#x591f;&#x4e86;","children":[{"content":"&#x7b2c;&#x4e00;&#x7ae0; Hibernate5 JPA&#x5feb;&#x901f;&#x5165;&#x95e8;","children":[{"content":"1.1&#x3001;Hibernate5 JPA&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"7,8\"><code>JPA&#x7684;&#x5168;&#x79f0;&#x662f;Java Persistence API&#xff0c; &#x5373;Java &#x6301;&#x4e45;&#x5316;API&#xff0c;&#x662f;SUN&#x516c;&#x53f8;&#x63a8;&#x51fa;&#x7684;&#x4e00;&#x5957;&#x57fa;&#x4e8e;ORM&#x7684;&#x89c4;&#x8303;&#xff0c;&#x5185;&#x90e8;&#x662f;&#x7531;&#x4e00;&#x7cfb;&#x5217;&#x7684;&#x63a5;&#x53e3;&#x548c;&#x62bd;&#x8c61;&#x7c7b;&#x6784;&#x6210;&#x3002;JPA&#x901a;&#x8fc7;JDK 5.0&#x6ce8;&#x89e3;&#x63cf;&#x8ff0;&#x5bf9;&#x8c61;&#xff0d;&#x5173;&#x7cfb;&#x8868;&#x7684;&#x6620;&#x5c04;&#x5173;&#x7cfb;&#xff0c;&#x5e76;&#x5c06;&#x8fd0;&#x884c;&#x671f;&#x7684;&#x5b9e;&#x4f53;&#x5bf9;&#x8c61;&#x6301;&#x4e45;&#x5316;&#x5230;&#x6570;&#x636e;&#x5e93;&#x4e2d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"7,8"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDgxMTAzMjEuanBn?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"9,10"}},{"content":"<pre data-lines=\"11,12\"><code>&#x4f46;&#x662f;JPA&#x4ec5;&#x4ec5;&#x53ea;&#x662f;&#x4e00;&#x5957;&#x63a5;&#x53e3;&#x89c4;&#x8303;&#x548c;&#x62bd;&#x8c61;&#x7c7b;&#xff0c;&#x5e76;&#x4e0d;&#x80fd;&#x771f;&#x6b63;&#x7684;&#x53bb;&#x5e72;&#x6d3b;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x5c31;&#x6709;&#x5f88;&#x591a;&#x5382;&#x5546;&#x5b9e;&#x73b0;&#x4e86;JPA&#x7684;&#x89c4;&#x8303;&#xff0c;&#x63d0;&#x4f9b;&#x4e86;&#x76f8;&#x5e94;&#x7684;&#x6280;&#x672f;&#x652f;&#x6301;&#xff0c;&#x5c31;&#x7c7b;&#x4f3c;&#x5b9e;&#x73b0;&#x4e86;JDBC&#x7684;MySQL&#x9a71;&#x52a8;&#xff0c;&#x800c;&#x672c;&#x8282;&#x8bfe;&#x7a0b;&#x5c06;&#x91c7;&#x7528;[Hibernate](https://so.csdn.net/so/search?q=Hibernate&amp;spm=1001.2101.3001.7020)&#x5b9e;&#x73b0;&#x4f5c;&#x4e3a;&#x9a71;&#x52a8;&#x4f7f;&#x7528;&#xff0c;&#x56e0;&#x6b64;&#x6211;&#x79f0;&#x4e4b;&#x4e3a;Hibernate5 JPA\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"11,12"}}],"payload":{"tag":"h3","lines":"5,6"}},{"content":"1.2&#x3001;Hibernate5 JPA&#x4e0b;&#x8f7d;","children":[{"content":"<pre data-lines=\"15,20\"><code>&#x5b98;&#x65b9;&#x7f51;&#x5740;&#xff1a;[hibernate orm](http://hibernate.org/orm/)\n\n&#x76ee;&#x5f55;&#x4ecb;&#x7ecd;&#xff1a;\n\nhibernate-release-5.0.7.Final&#x6587;&#x4ef6;&#x5939;&#x4ecb;&#x7ecd;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"15,20"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDQyMTU0NTIucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"21,22"}},{"content":"<pre data-lines=\"23,24\"><code>hibernate-release-5.0.7.Final\\\\lib&#x6587;&#x4ef6;&#x5939;&#x4ecb;&#x7ecd;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"23,24"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDgxMTA3MTMucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"25,26"}}],"payload":{"tag":"h3","lines":"13,14"}},{"content":"1.3&#x3001;Hibernate5 JPA&#x5de5;&#x7a0b;&#x642d;&#x5efa;","children":[{"content":"<pre data-lines=\"29,34\"><code>&#x524d;&#x8fb9;&#x5b66;&#x4e60;&#x7684;Hibernate&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x8fdb;&#x884c;&#x5de5;&#x7a0b;&#x642d;&#x5efa;&#xff0c;&#x6839;Hibernate&#x76f8;&#x6bd4;&#xff0c;&#x5b83;&#x53ea;&#x9700;&#x8981;&#x518d;&#x591a;&#x52a0;&#x5165;&#x4e00;&#x4e2a;&#x5305;&#x5c31;&#x884c;\n\n&#x628a;&#x4e0b;&#x9762;&#x56db;&#x4e2a;&#x6587;&#x4ef6;&#x5939;&#x7684;&#x5185;&#x5bb9;&#x5168;&#x90e8;&#x62f7;&#x8d1d;&#x5230;lib&#x4e2d;\n\n*   hibernate-release-5.0.7.Final\\\\lib\\\\required\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"29,34"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDQyMzI0MjgucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"35,36"}},{"content":"<pre data-lines=\"37,38\"><code>*   hibernate-release-5.0.7.Final\\\\lib\\\\optional\\\\c3p0\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"37,38"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDQyMzE2MzkucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"39,40"}},{"content":"<pre data-lines=\"41,42\"><code>*   **hibernate-release-5.0.7.Final\\\\lib\\\\jpa**\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"41,42"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDgxMDU5MDcucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"43,44"}},{"content":"<pre data-lines=\"45,46\"><code>*   &#x65e5;&#x5fd7;&#x8bb0;&#x5f55;&#x5305;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"45,46"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDQyMzI0MDcucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"47,48"}},{"content":"<pre data-lines=\"49,50\"><code>*   &#x6570;&#x636e;&#x5e93;&#x9a71;&#x52a8;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"49,50"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDUxMDU3MTQucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"51,52"}},{"content":"<pre data-lines=\"53,54\"><code>&#x628a;&#x4e0b;&#x9762;&#x4e94;&#x4e2a;&#x6587;&#x4ef6;&#x5939;&#x7684;&#x5185;&#x5bb9;&#x5168;&#x90e8;&#x62f7;&#x8d1d;&#x5230;lib&#x4e2d;&#x540e;&#xff0c;&#x5168;&#x90e8;&#x9009;&#x4e2d;&#xff0c;&#x53f3;&#x952e;Build Path&#x4e00;&#x4e0b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"53,54"}},{"content":"<img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDgxMTEyMjIucG5n?x-oss-process=image/format,png\" alt>","children":[],"payload":{"tag":"img","lines":"55,56"}},{"content":"<pre data-lines=\"57,60\"><code>Java&#x5de5;&#x7a0b;&#x642d;&#x5efa;&#x597d;&#x4e86;&#x4ee5;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x6709;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#xff08;hibernate\\_jpa&#xff09;&#x548c;&#x4e24;&#x5f20;&#x8868;&#x7528;&#x4e8e;&#x6d4b;&#x8bd5;&#xff1a;\n\ncrm\\_cst\\_customer&#xff08;&#x5ba2;&#x6237;&#x8868;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"57,60"}},{"content":"<pre data-lines=\"61,74\"><code class=\"language-mysql\">CREATE TABLE `cst_customer` (\n  `cust_id` BIGINT(32) NOT NULL AUTO_INCREMENT COMMENT &apos;&#x5ba2;&#x6237;&#x7f16;&#x53f7;(&#x4e3b;&#x952e;)&apos;,\n  `cust_name` VARCHAR(32) DEFAULT NULL COMMENT &apos;&#x5ba2;&#x6237;&#x540d;&#x79f0;&apos;,\n  `cust_source` VARCHAR(32) DEFAULT NULL COMMENT &apos;&#x5ba2;&#x6237;&#x4fe1;&#x606f;&#x6765;&#x6e90;&apos;,\n  `cust_industry` VARCHAR(32) DEFAULT NULL COMMENT &apos;&#x5ba2;&#x6237;&#x6240;&#x5c5e;&#x884c;&#x4e1a;&apos;,\n  `cust_level` VARCHAR(32) DEFAULT NULL COMMENT &apos;&#x5ba2;&#x6237;&#x7ea7;&#x522b;&apos;,\n  `cust_phone` VARCHAR(64) DEFAULT NULL COMMENT &apos;&#x56fa;&#x5b9a;&#x7535;&#x8bdd;&apos;,\n  `cust_mobile` VARCHAR(16) DEFAULT NULL COMMENT &apos;&#x79fb;&#x52a8;&#x7535;&#x8bdd;&apos;,\n  PRIMARY KEY (`cust_id`)\n) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"61,74"}},{"content":"<pre data-lines=\"75,76\"><code>crm\\_cst\\_linkman&#xff08;&#x8054;&#x7cfb;&#x4eba;&#x8868;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"75,76"}},{"content":"<pre data-lines=\"77,95\"><code class=\"language-mysql\">CREATE TABLE `cst_linkman` (\n  `lkm_id` BIGINT(32) NOT NULL AUTO_INCREMENT COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x7f16;&#x53f7;(&#x4e3b;&#x952e;)&apos;,\n  `lkm_name` VARCHAR(16) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x59d3;&#x540d;&apos;,\n  `lkm_gender` CHAR(1) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x6027;&#x522b;&apos;,\n  `lkm_phone` VARCHAR(16) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x529e;&#x516c;&#x7535;&#x8bdd;&apos;,\n  `lkm_mobile` VARCHAR(16) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x624b;&#x673a;&apos;,\n  `lkm_email` VARCHAR(64) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x90ae;&#x7bb1;&apos;,\n  `lkm_qq` VARCHAR(16) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;qq&apos;,\n  `lkm_position` VARCHAR(16) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x804c;&#x4f4d;&apos;,\n  `lkm_memo` VARCHAR(512) DEFAULT NULL COMMENT &apos;&#x8054;&#x7cfb;&#x4eba;&#x5907;&#x6ce8;&apos;,\n  `lkm_cust_id` BIGINT(32) NOT NULL COMMENT &apos;&#x5ba2;&#x6237;id&apos;,\n  PRIMARY KEY (`lkm_id`),\n  KEY `FK_cst_linkman_lkm_cust_id` (`lkm_cust_id`),\n  CONSTRAINT `FK_cst_linkman_lkm_cust_id` FOREIGN KEY (`lkm_cust_id`) REFERENCES `cst_customer` (`cust_id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"77,95"}},{"content":"<pre data-lines=\"96,101\"><code>&#x5728;Java&#x5de5;&#x7a0b;&#x7684;src&#x8def;&#x5f84;&#x4e0b;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x540d;&#x4e3a;META-INF&#x7684;&#x6587;&#x4ef6;&#x5939;&#xff0c;&#x5728;&#x6b64;&#x6587;&#x4ef6;&#x5939;&#x4e0b;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x540d;&#x4e3a;persistence.xml&#x7684;&#x914d;&#x7f6e;&#x6587;&#x4ef6;\n\n&#x901a;&#x7528;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#xff08;&#x638c;&#x63e1;&#xff09;&#xff1a;\n\npersistence.xml&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/META-INF/persistence.xml&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"96,101"}},{"content":"<pre data-lines=\"102,133\"><code class=\"language-xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>?&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">persistence</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://java.sun.com/xml/ns/persistence&quot;</span>\n\t<span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n\t<span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://java.sun.com/xml/ns/persistence  \n    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;</span>\n\t<span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;2.0&quot;</span>&gt;</span>\n\t\n\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">persistence-unit</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;myJpa&quot;</span> <span class=\"hljs-attr\">transaction-type</span>=<span class=\"hljs-string\">&quot;RESOURCE_LOCAL&quot;</span>&gt;</span>\n\t\t\n\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">provider</span>&gt;</span>org.hibernate.jpa.HibernatePersistenceProvider<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">provider</span>&gt;</span>\n\t\t\n\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">properties</span>&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;javax.persistence.jdbc.driver&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;javax.persistence.jdbc.url&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;jdbc:mysql://127.0.0.1:3306/hibernate_jpa&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;javax.persistence.jdbc.user&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;root&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;javax.persistence.jdbc.password&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;root&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.show_sql&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.format_sql&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.hbm2ddl.auto&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;create&quot;</span> /&gt;</span>\n\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">properties</span>&gt;</span>\n\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">persistence-unit</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">persistence</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"102,133"}},{"content":"<pre data-lines=\"134,135\"><code>&#x6574;&#x5408;C3P0&#x8fde;&#x63a5;&#x6c60;&#x7248;&#x672c;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#xff08;&#x4e86;&#x89e3;&#xff09;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"134,135"}},{"content":"<pre data-lines=\"136,186\"><code class=\"language-xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>?&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">persistence</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://java.sun.com/xml/ns/persistence&quot;</span>\n\t<span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n\t<span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://java.sun.com/xml/ns/persistence  \n    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;</span>\n\t<span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;2.0&quot;</span>&gt;</span>\n\t\n\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">persistence-unit</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;myJpa&quot;</span> <span class=\"hljs-attr\">transaction-type</span>=<span class=\"hljs-string\">&quot;RESOURCE_LOCAL&quot;</span>&gt;</span>\n\t\t\n\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">provider</span>&gt;</span>org.hibernate.jpa.HibernatePersistenceProvider<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">provider</span>&gt;</span>\n\t\t\n\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">properties</span>&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.connection.driver_class&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.connection.url&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;jdbc:mysql://127.0.0.1:3306/hibernate_jpa&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.connection.username&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;root&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.connection.password&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;root&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.connection.isolation&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;4&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.dialect&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;org.hibernate.dialect.MySQLDialect&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.current_session_context_class&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;thread&quot;</span> /&gt;</span>\n\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.show_sql&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.format_sql&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span>\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.hbm2ddl.auto&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;create&quot;</span> /&gt;</span>\n\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hibernate.connection.provider_class&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;org.hibernate.connection.C3P0ConnectionProvider&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.min_size&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;5&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.max_size&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;30&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.maxIdleTime&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;60&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.timeout&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;1800&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.max_statements&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;50&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.idle_test_period&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;120&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.acquire_increment&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;1&quot;</span> /&gt;</span>\n\t\t\t\n\t\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;c3p0.validate&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;false&quot;</span> /&gt;</span>\n\t\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">properties</span>&gt;</span>\n\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">persistence-unit</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">persistence</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"136,186"}},{"content":"<pre data-lines=\"187,190\"><code>&#x5bf9;&#x4e8e;&#x672c;&#x8282;&#x8bfe;&#x7a0b;&#x6765;&#x8bf4;&#xff0c;&#x4f7f;&#x7528;&#x54ea;&#x4e00;&#x4e2a;&#x90fd;&#x53ef;&#x4ee5;&#xff0c;&#x4f46;&#x662f;&#x7b2c;&#x4e00;&#x4e2a;&#x66f4;&#x901a;&#x7528;&#xff0c;&#x66f4;&#x7b80;&#x5355;&#xff0c;&#x6211;&#x4eec;&#x91c7;&#x7528;&#x7b2c;&#x4e00;&#x4e2a;&#xff0c;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x6709;&#x4e86;&#x4ee5;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x9700;&#x8981;&#x7f16;&#x5199;&#x5b9e;&#x4f53;&#x7c7b;&#x8ddf;&#x6570;&#x636e;&#x5e93;&#x8868;&#x7684;&#x6620;&#x5c04;&#x5173;&#x7cfb;\n\nCustomer.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/Customer.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"187,190"}},{"content":"<pre data-lines=\"191,294\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.Column;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Entity;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GeneratedValue;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GenerationType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Id;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Table;\n\n\n<span class=\"hljs-meta\">@Entity</span>\n<span class=\"hljs-meta\">@Table(name = &quot;cst_customer&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Customer</span> {\n\n\t\n\t<span class=\"hljs-meta\">@Id</span>\n\t<span class=\"hljs-meta\">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Long custId;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_name&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String custName;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_source&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String custSource;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_industry&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String custIndustry;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_level&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String custLevel;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_phone&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String custPhone;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;cust_mobile&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String custMobile;\n\n\t<span class=\"hljs-keyword\">public</span> Long <span class=\"hljs-title function_\">getCustId</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustId</span><span class=\"hljs-params\">(Long custId)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custId = custId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getCustName</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustName</span><span class=\"hljs-params\">(String custName)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custName = custName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getCustSource</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custSource;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustSource</span><span class=\"hljs-params\">(String custSource)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custSource = custSource;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getCustIndustry</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custIndustry;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustIndustry</span><span class=\"hljs-params\">(String custIndustry)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custIndustry = custIndustry;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getCustLevel</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custLevel;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustLevel</span><span class=\"hljs-params\">(String custLevel)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custLevel = custLevel;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getCustPhone</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custPhone;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustPhone</span><span class=\"hljs-params\">(String custPhone)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custPhone = custPhone;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getCustMobile</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> custMobile;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustMobile</span><span class=\"hljs-params\">(String custMobile)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.custMobile = custMobile;\n\t}\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Customer [custId=&quot;</span> + custId + <span class=\"hljs-string\">&quot;, custName=&quot;</span> + custName + <span class=\"hljs-string\">&quot;, custSource=&quot;</span> + custSource + <span class=\"hljs-string\">&quot;, custIndustry=&quot;</span> + custIndustry + <span class=\"hljs-string\">&quot;, custLevel=&quot;</span> + custLevel + <span class=\"hljs-string\">&quot;, custPhone=&quot;</span> + custPhone + <span class=\"hljs-string\">&quot;, custMobile=&quot;</span> + custMobile + <span class=\"hljs-string\">&quot;]&quot;</span>;\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"191,294"}},{"content":"<pre data-lines=\"295,296\"><code>LinkMan.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/LinkMan.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"295,296"}},{"content":"<pre data-lines=\"297,424\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.CascadeType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Column;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Entity;\n<span class=\"hljs-keyword\">import</span> javax.persistence.FetchType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GeneratedValue;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GenerationType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Id;\n<span class=\"hljs-keyword\">import</span> javax.persistence.JoinColumn;\n<span class=\"hljs-keyword\">import</span> javax.persistence.ManyToOne;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Table;\n\n<span class=\"hljs-meta\">@Entity</span>\n<span class=\"hljs-meta\">@Table(name = &quot;cst_linkman&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LinkMan</span> {\n\n\t<span class=\"hljs-meta\">@Id</span>\n\t<span class=\"hljs-meta\">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Long lkmId;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_name&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmName;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_gender&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmGender;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_phone&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmPhone;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_mobile&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmMobile;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_email&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmEmail;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_qq&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmQq;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_position&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmPosition;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;lkm_memo&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String lkmMemo;\n\n\t<span class=\"hljs-keyword\">public</span> Long <span class=\"hljs-title function_\">getLkmId</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmId</span><span class=\"hljs-params\">(Long lkmId)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmId = lkmId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmName</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmName</span><span class=\"hljs-params\">(String lkmName)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmName = lkmName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmGender</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmGender;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmGender</span><span class=\"hljs-params\">(String lkmGender)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmGender = lkmGender;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmPhone</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmPhone;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmPhone</span><span class=\"hljs-params\">(String lkmPhone)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmPhone = lkmPhone;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmMobile</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmMobile;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmMobile</span><span class=\"hljs-params\">(String lkmMobile)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmMobile = lkmMobile;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmEmail</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmEmail;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmEmail</span><span class=\"hljs-params\">(String lkmEmail)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmEmail = lkmEmail;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmQq</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmQq;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmQq</span><span class=\"hljs-params\">(String lkmQq)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmQq = lkmQq;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmPosition</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmPosition;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmPosition</span><span class=\"hljs-params\">(String lkmPosition)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmPosition = lkmPosition;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getLkmMemo</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> lkmMemo;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLkmMemo</span><span class=\"hljs-params\">(String lkmMemo)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.lkmMemo = lkmMemo;\n\t}\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;LinkMan [lkmId=&quot;</span> + lkmId + <span class=\"hljs-string\">&quot;, lkmName=&quot;</span> + lkmName + <span class=\"hljs-string\">&quot;, lkmGender=&quot;</span> + lkmGender + <span class=\"hljs-string\">&quot;, lkmPhone=&quot;</span> + lkmPhone + <span class=\"hljs-string\">&quot;, lkmMobile=&quot;</span> + lkmMobile + <span class=\"hljs-string\">&quot;, lkmEmail=&quot;</span> + lkmEmail + <span class=\"hljs-string\">&quot;, lkmQq=&quot;</span> + lkmQq + <span class=\"hljs-string\">&quot;, lkmPosition=&quot;</span> + lkmPosition + <span class=\"hljs-string\">&quot;, lkmMemo=&quot;</span> + lkmMemo + <span class=\"hljs-string\">&quot;]&quot;</span>;\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"297,424"}}],"payload":{"tag":"h3","lines":"27,28"}},{"content":"1.4&#x3001;Hibernate5 JPA&#x589e;&#x5220;&#x6539;&#x67e5;","children":[{"content":"<pre data-lines=\"427,428\"><code>CustomerJPATest.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/CustomerJPATest.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"427,428"}},{"content":"<pre data-lines=\"429,559\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManager;\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManagerFactory;\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityTransaction;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Persistence;\n\n<span class=\"hljs-keyword\">import</span> org.junit.Test;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CustomerJPATest</span> {\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testSave</span><span class=\"hljs-params\">()</span> {\n\t\t\n\t\t<span class=\"hljs-type\">EntityManagerFactory</span> <span class=\"hljs-variable\">entityManagerFactory</span> <span class=\"hljs-operator\">=</span> Persistence.createEntityManagerFactory(<span class=\"hljs-string\">&quot;myJpa&quot;</span>);\n\t\t\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> entityManagerFactory.createEntityManager();\n\t\t\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\t\n\t\ttransaction.begin();\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer1.setCustName(<span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>);\n\t\tentityManager.persist(customer1);\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer2.setCustName(<span class=\"hljs-string\">&quot;&#x674e;&#x56db;&quot;</span>);\n\t\tentityManager.persist(customer2);\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer3.setCustName(<span class=\"hljs-string\">&quot;&#x738b;&#x4e94;&quot;</span>);\n\t\tentityManager.persist(customer3);\n\t\t\n\t\ttransaction.commit();\n\t\t\n\t\tentityManager.close();\n\t\tentityManagerFactory.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testQuery1</span><span class=\"hljs-params\">()</span> {\n\t\t\n\t\t<span class=\"hljs-type\">EntityManagerFactory</span> <span class=\"hljs-variable\">entityManagerFactory</span> <span class=\"hljs-operator\">=</span> Persistence.createEntityManagerFactory(<span class=\"hljs-string\">&quot;myJpa&quot;</span>);\n\t\t\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> entityManagerFactory.createEntityManager();\n\t\t\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\t\n\t\ttransaction.begin();\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.find(Customer.class, <span class=\"hljs-number\">2L</span>);\n\t\tSystem.out.println(customer);\n\t\t\n\t\ttransaction.commit();\n\t\t\n\t\tentityManager.close();\n\t\tentityManagerFactory.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testQuery2</span><span class=\"hljs-params\">()</span> {\n\t\t\n\t\t<span class=\"hljs-type\">EntityManagerFactory</span> <span class=\"hljs-variable\">entityManagerFactory</span> <span class=\"hljs-operator\">=</span> Persistence.createEntityManagerFactory(<span class=\"hljs-string\">&quot;myJpa&quot;</span>);\n\t\t\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> entityManagerFactory.createEntityManager();\n\t\t\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\t\n\t\ttransaction.begin();\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.getReference(Customer.class, <span class=\"hljs-number\">2L</span>);\n\t\tSystem.out.println(customer);\n\t\t\n\t\ttransaction.commit();\n\t\t\n\t\tentityManager.close();\n\t\tentityManagerFactory.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testDelete</span><span class=\"hljs-params\">()</span> {\n\t\t\n\t\t<span class=\"hljs-type\">EntityManagerFactory</span> <span class=\"hljs-variable\">entityManagerFactory</span> <span class=\"hljs-operator\">=</span> Persistence.createEntityManagerFactory(<span class=\"hljs-string\">&quot;myJpa&quot;</span>);\n\t\t\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> entityManagerFactory.createEntityManager();\n\t\t\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\t\n\t\ttransaction.begin();\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.find(Customer.class, <span class=\"hljs-number\">1L</span>);\n\t\tentityManager.remove(customer);\n\t\t\n\t\ttransaction.commit();\n\t\t\n\t\tentityManager.close();\n\t\tentityManagerFactory.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testUpdate</span><span class=\"hljs-params\">()</span> {\n\t\t\n\t\t<span class=\"hljs-type\">EntityManagerFactory</span> <span class=\"hljs-variable\">entityManagerFactory</span> <span class=\"hljs-operator\">=</span> Persistence.createEntityManagerFactory(<span class=\"hljs-string\">&quot;myJpa&quot;</span>);\n\t\t\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> entityManagerFactory.createEntityManager();\n\t\t\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\t\n\t\ttransaction.begin();\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.find(Customer.class, <span class=\"hljs-number\">2L</span>);\n\t\tcustomer.setCustSource(<span class=\"hljs-string\">&quot;&#x7535;&#x89c6;&#x5e7f;&#x544a;&quot;</span>);\n\t\tentityManager.merge(customer);\n\t\t\n\t\ttransaction.commit();\n\t\t\n\t\tentityManager.close();\n\t\tentityManagerFactory.close();\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"429,559"}}],"payload":{"tag":"h3","lines":"425,426"}},{"content":"1.5&#x3001;Hibernate5 JPA&#x5de5;&#x5177;&#x7c7b;","children":[{"content":"<pre data-lines=\"562,563\"><code>JPAUtil.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/JPAUtil.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"562,563"}},{"content":"<pre data-lines=\"564,586\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManager;\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManagerFactory;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Persistence;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JPAUtil</span> {\n\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> EntityManagerFactory entityManagerFactory;\n\n\t<span class=\"hljs-keyword\">static</span> {\n\t\tentityManagerFactory = Persistence.createEntityManagerFactory(<span class=\"hljs-string\">&quot;myJpa&quot;</span>);\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> EntityManager <span class=\"hljs-title function_\">getEntityManager</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> entityManagerFactory.createEntityManager();\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,586"}}],"payload":{"tag":"h3","lines":"560,561"}}],"payload":{"tag":"h2","lines":"2,4"}},{"content":"&#x7b2c;&#x4e8c;&#x7ae0; Hibernate5 JPA&#x6838;&#x5fc3;&#x5bf9;&#x8c61;","children":[{"content":"2.1&#x3001;Persistence","children":[{"content":"<pre data-lines=\"592,593\"><code>Persistence&#x5bf9;&#x8c61;&#x4e3b;&#x8981;&#x4f5c;&#x7528;&#x662f;&#x7528;&#x4e8e;&#x83b7;&#x53d6;EntityManagerFactory&#x5bf9;&#x8c61;&#x7684; &#x3002;&#x901a;&#x8fc7;&#x8c03;&#x7528;&#x8be5;&#x7c7b;&#x7684;createEntityManagerFactory&#x9759;&#x6001;&#x65b9;&#x6cd5;&#xff0c;&#x6839;&#x636e;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#x6301;&#x4e45;&#x5316;&#x5355;&#x5143;&#x540d;&#x79f0;&#x521b;&#x5efa;EntityManagerFactory&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"592,593"}}],"payload":{"tag":"h3","lines":"590,591"}},{"content":"2.2&#x3001;EntityManagerFactory","children":[{"content":"<pre data-lines=\"596,597\"><code>EntityManagerFactory &#x63a5;&#x53e3;&#x4e3b;&#x8981;&#x7528;&#x6765;&#x521b;&#x5efa; EntityManager &#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"596,597"}}],"payload":{"tag":"h3","lines":"594,595"}},{"content":"2.3&#x3001;EntityManager","children":[{"content":"<pre data-lines=\"600,607\"><code>&#x5728; JPA &#x89c4;&#x8303;&#x4e2d;&#xff0c;EntityManager&#x662f;&#x5b8c;&#x6210;&#x6301;&#x4e45;&#x5316;&#x64cd;&#x4f5c;&#x7684;&#x6838;&#x5fc3;&#x5bf9;&#x8c61;&#x3002;&#x5b9e;&#x4f53;&#x7c7b;&#x4f5c;&#x4e3a;&#x666e;&#x901a; java&#x5bf9;&#x8c61;&#xff0c;&#x53ea;&#x6709;&#x5728;&#x8c03;&#x7528; EntityManager&#x5c06;&#x5176;&#x6301;&#x4e45;&#x5316;&#x540e;&#x624d;&#x4f1a;&#x53d8;&#x6210;&#x6301;&#x4e45;&#x5316;&#x5bf9;&#x8c61;&#x3002;EntityManager&#x5bf9;&#x8c61;&#x5728;&#x4e00;&#x7ec4;&#x5b9e;&#x4f53;&#x7c7b;&#x4e0e;&#x5e95;&#x5c42;&#x6570;&#x636e;&#x6e90;&#x4e4b;&#x95f4;&#x8fdb;&#x884c; O/R &#x6620;&#x5c04;&#x7684;&#x7ba1;&#x7406;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x7ba1;&#x7406;&#x548c;&#x66f4;&#x65b0; Entity Bean&#xff0c;&#x6839;&#x6910;&#x4e3b;&#x952e;&#x67e5;&#x627e; Entity Bean, &#x8fd8;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;JPQL&#x8bed;&#x53e5;&#x67e5;&#x8be2;&#x5b9e;&#x4f53;&#x3002;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x8c03;&#x7528;EntityManager&#x7684;&#x65b9;&#x6cd5;&#x5b8c;&#x6210;&#x83b7;&#x53d6;&#x4e8b;&#x52a1;&#xff0c;&#x4ee5;&#x53ca;&#x6301;&#x4e45;&#x5316;&#x6570;&#x636e;&#x5e93;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x4f8b;&#x5982;&#xff1a;\n\n*   getTransaction&#xff1a;&#x83b7;&#x53d6;&#x4e8b;&#x52a1;&#x5bf9;&#x8c61;\n*   persist&#xff1a;&#x4fdd;&#x5b58;&#x64cd;&#x4f5c;\n*   merge&#xff1a;&#x66f4;&#x65b0;&#x64cd;&#x4f5c;\n*   remove&#xff1a;&#x5220;&#x9664;&#x64cd;&#x4f5c;\n*   find/getReference&#xff1a;&#x6839;&#x636e;id&#x67e5;&#x8be2;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"600,607"}}],"payload":{"tag":"h3","lines":"598,599"}},{"content":"2.4&#x3001;EntityTransaction","children":[{"content":"<pre data-lines=\"610,615\"><code>&#x5728; JPA &#x89c4;&#x8303;&#x4e2d;&#xff0c;EntityTransaction&#x662f;&#x5b8c;&#x6210;&#x4e8b;&#x52a1;&#x64cd;&#x4f5c;&#x7684;&#x6838;&#x5fc3;&#x5bf9;&#x8c61;&#xff0c;&#x5bf9;&#x4e8e;EntityTransaction&#x5728;&#x6211;&#x4eec;&#x7684;Java&#x4ee3;&#x7801;&#x4e2d;&#x627f;&#x63a5;&#x7684;&#x529f;&#x80fd;&#x6bd4;&#x8f83;&#x7b80;&#x5355;&#x3002;\n\n*   begin&#xff1a;&#x5f00;&#x542f;&#x4e8b;&#x52a1;\n*   commit&#xff1a;&#x63d0;&#x4ea4;&#x4e8b;&#x52a1;\n*   rollback&#xff1a;&#x56de;&#x6eda;&#x4e8b;&#x52a1;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"610,615"}}],"payload":{"tag":"h3","lines":"608,609"}}],"payload":{"tag":"h2","lines":"587,589"}},{"content":"&#x7b2c;&#x4e09;&#x7ae0; Hibernate5 JPA&#x6620;&#x5c04;&#x914d;&#x7f6e;","children":[{"content":"3.1&#x3001;&#x4e00;&#x5bf9;&#x591a;&#x5173;&#x8054;","children":[{"content":"3.1.1&#x3001;&#x4fee;&#x6539;&#x5b9e;&#x4f53;","children":[{"content":"<pre data-lines=\"625,628\"><code>&#x4fee;&#x6539;Customer.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/Customer.java&#xff09;\n\n&#x5728;toString&#x65b9;&#x6cd5;&#x7684;&#x4e0b;&#x9762;&#x6dfb;&#x52a0;&#x591a;&#x7684;&#x96c6;&#x5408;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"625,628"}},{"content":"<pre data-lines=\"629,643\"><code class=\"language-java\">\n<span class=\"hljs-meta\">@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;customer&quot;)</span>\n<span class=\"hljs-keyword\">private</span> Set&lt;LinkMan&gt; linkMans = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashSet</span>&lt;LinkMan&gt;();\n\n<span class=\"hljs-keyword\">public</span> Set&lt;LinkMan&gt; <span class=\"hljs-title function_\">getLinkMans</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-keyword\">return</span> linkMans;\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setLinkMans</span><span class=\"hljs-params\">(Set&lt;LinkMan&gt; linkMans)</span> {\n\t<span class=\"hljs-built_in\">this</span>.linkMans = linkMans;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"629,643"}},{"content":"<pre data-lines=\"644,647\"><code>&#x4fee;&#x6539;LinkMan.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/LinkMan.java&#xff09;\n\n&#x5728;toString&#x65b9;&#x6cd5;&#x7684;&#x4e0b;&#x9762;&#x6dfb;&#x52a0;&#x4e00;&#x7684;&#x5bf9;&#x8c61;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"644,647"}},{"content":"<pre data-lines=\"648,663\"><code class=\"language-java\">\n<span class=\"hljs-meta\">@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)</span>\n<span class=\"hljs-meta\">@JoinColumn(name = &quot;lkm_cust_id&quot;)</span>\n<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\n<span class=\"hljs-keyword\">public</span> Customer <span class=\"hljs-title function_\">getCustomer</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-keyword\">return</span> customer;\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCustomer</span><span class=\"hljs-params\">(Customer customer)</span> {\n\t<span class=\"hljs-built_in\">this</span>.customer = customer;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"648,663"}}],"payload":{"tag":"h4","lines":"623,624"}},{"content":"3.1.2&#x3001;&#x6d4b;&#x8bd5;&#x4ee3;&#x7801;","children":[{"content":"<pre data-lines=\"666,667\"><code>OneToManyTest.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/OneToManyTest.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"666,667"}},{"content":"<pre data-lines=\"668,858\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> java.util.Set;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManager;\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityTransaction;\n\n<span class=\"hljs-keyword\">import</span> org.junit.Test;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OneToManyTest</span> {\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer1.setCustName(<span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>);\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer2.setCustName(<span class=\"hljs-string\">&quot;&#x674e;&#x56db;&quot;</span>);\n\n\t\t\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkMan</span>();\n\t\tlinkMan1.setLkmName(<span class=\"hljs-string\">&quot;&#x51e4;&#x59d0;&quot;</span>);\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkMan</span>();\n\t\tlinkMan2.setLkmName(<span class=\"hljs-string\">&quot;&#x5982;&#x82b1;&quot;</span>);\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkMan</span>();\n\t\tlinkMan3.setLkmName(<span class=\"hljs-string\">&quot;&#x65fa;&#x8d22;&quot;</span>);\n\n\t\tcustomer1.getLinkMans().add(linkMan1);\n\t\tcustomer1.getLinkMans().add(linkMan2);\n\t\tcustomer2.getLinkMans().add(linkMan3);\n\t\tlinkMan1.setCustomer(customer1);\n\t\tlinkMan2.setCustomer(customer1);\n\t\tlinkMan3.setCustomer(customer2);\n\n\t\tentityManager.persist(customer1);\n\t\tentityManager.persist(customer2);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer1.setCustName(<span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>);\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>();\n\t\tcustomer2.setCustName(<span class=\"hljs-string\">&quot;&#x674e;&#x56db;&quot;</span>);\n\n\t\t\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkMan</span>();\n\t\tlinkMan1.setLkmName(<span class=\"hljs-string\">&quot;&#x51e4;&#x59d0;&quot;</span>);\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkMan</span>();\n\t\tlinkMan2.setLkmName(<span class=\"hljs-string\">&quot;&#x5982;&#x82b1;&quot;</span>);\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LinkMan</span>();\n\t\tlinkMan3.setLkmName(<span class=\"hljs-string\">&quot;&#x65fa;&#x8d22;&quot;</span>);\n\n\t\tcustomer1.getLinkMans().add(linkMan1);\n\t\tcustomer1.getLinkMans().add(linkMan2);\n\t\tcustomer2.getLinkMans().add(linkMan3);\n\t\tlinkMan1.setCustomer(customer1);\n\t\tlinkMan2.setCustomer(customer1);\n\t\tlinkMan3.setCustomer(customer2);\n\n\t\tentityManager.persist(linkMan1);\n\t\tentityManager.persist(linkMan2);\n\t\tentityManager.persist(linkMan3);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.find(Customer.class, <span class=\"hljs-number\">1L</span>);\n\t\tSystem.out.println(customer);\n\n\t\tSet&lt;LinkMan&gt; linkMans = customer.getLinkMans();\n\t\t<span class=\"hljs-keyword\">for</span> (LinkMan linkMan : linkMans) {\n\t\t\tSystem.out.println(linkMan);\n\t\t}\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan</span> <span class=\"hljs-operator\">=</span> entityManager.find(LinkMan.class, <span class=\"hljs-number\">1L</span>);\n\t\tSystem.out.println(linkMan);\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> linkMan.getCustomer();\n\t\tSystem.out.println(customer);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.find(Customer.class, <span class=\"hljs-number\">1L</span>);\n\t\tcustomer.setCustSource(<span class=\"hljs-string\">&quot;&#x7535;&#x89c6;&#x5e7f;&#x544a;&quot;</span>);\n\n\t\tSet&lt;LinkMan&gt; linkMans = customer.getLinkMans();\n\t\t<span class=\"hljs-keyword\">for</span> (LinkMan linkMan : linkMans) {\n\t\t\tlinkMan.setLkmMobile(<span class=\"hljs-string\">&quot;15633029014&quot;</span>);\n\t\t}\n\n\t\tentityManager.persist(customer);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan</span> <span class=\"hljs-operator\">=</span> entityManager.find(LinkMan.class, <span class=\"hljs-number\">1L</span>);\n\t\tlinkMan.setLkmMobile(<span class=\"hljs-string\">&quot;110&quot;</span>);\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> linkMan.getCustomer();\n\t\tcustomer.setCustMobile(<span class=\"hljs-string\">&quot;110&quot;</span>);\n\n\t\tentityManager.persist(linkMan);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test7</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">customer</span> <span class=\"hljs-operator\">=</span> entityManager.find(Customer.class, <span class=\"hljs-number\">1L</span>);\n\t\tentityManager.remove(customer);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test8</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">LinkMan</span> <span class=\"hljs-variable\">linkMan</span> <span class=\"hljs-operator\">=</span> entityManager.find(LinkMan.class, <span class=\"hljs-number\">3L</span>);\n\t\tentityManager.remove(linkMan);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"668,858"}}],"payload":{"tag":"h4","lines":"664,665"}}],"payload":{"tag":"h3","lines":"621,622"}},{"content":"3.2&#x3001;&#x591a;&#x5bf9;&#x591a;&#x5173;&#x8054;","children":[{"content":"3.2.1&#x3001;&#x521b;&#x5efa;&#x5b9e;&#x4f53;","children":[{"content":"<pre data-lines=\"905,906\"><code>User.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/User.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"905,906"}},{"content":"<pre data-lines=\"907,1007\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> java.util.HashSet;\n<span class=\"hljs-keyword\">import</span> java.util.Set;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.CascadeType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Column;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Entity;\n<span class=\"hljs-keyword\">import</span> javax.persistence.FetchType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GeneratedValue;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GenerationType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Id;\n<span class=\"hljs-keyword\">import</span> javax.persistence.JoinColumn;\n<span class=\"hljs-keyword\">import</span> javax.persistence.JoinTable;\n<span class=\"hljs-keyword\">import</span> javax.persistence.ManyToMany;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Table;\n\n<span class=\"hljs-meta\">@Entity</span>\n<span class=\"hljs-meta\">@Table(name = &quot;sys_user&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">User</span> {\n\n\t<span class=\"hljs-meta\">@Id</span>\n\t<span class=\"hljs-meta\">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>\n\t<span class=\"hljs-meta\">@Column(name = &quot;user_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Long userId;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;user_code&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String userCode;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;user_name&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String userName;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;user_password&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String userPassword;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;user_state&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String userState;\n\n\t<span class=\"hljs-keyword\">public</span> Long <span class=\"hljs-title function_\">getUserId</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> userId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUserId</span><span class=\"hljs-params\">(Long userId)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.userId = userId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getUserCode</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> userCode;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUserCode</span><span class=\"hljs-params\">(String userCode)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.userCode = userCode;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getUserName</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> userName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUserName</span><span class=\"hljs-params\">(String userName)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.userName = userName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getUserPassword</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> userPassword;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUserPassword</span><span class=\"hljs-params\">(String userPassword)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.userPassword = userPassword;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getUserState</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> userState;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUserState</span><span class=\"hljs-params\">(String userState)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.userState = userState;\n\t}\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;User [userId=&quot;</span> + userId + <span class=\"hljs-string\">&quot;, userCode=&quot;</span> + userCode + <span class=\"hljs-string\">&quot;, userName=&quot;</span> + userName + <span class=\"hljs-string\">&quot;, userPassword=&quot;</span> + userPassword + <span class=\"hljs-string\">&quot;, userState=&quot;</span> + userState + <span class=\"hljs-string\">&quot;]&quot;</span>;\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)</span>\n\t<span class=\"hljs-meta\">@JoinTable(name = &quot;sys_user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))</span>\n\t<span class=\"hljs-keyword\">private</span> Set&lt;Role&gt; roles = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashSet</span>&lt;Role&gt;();\n\n\t<span class=\"hljs-keyword\">public</span> Set&lt;Role&gt; <span class=\"hljs-title function_\">getRoles</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> roles;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setRoles</span><span class=\"hljs-params\">(Set&lt;Role&gt; roles)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.roles = roles;\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"907,1007"}},{"content":"<pre data-lines=\"1008,1009\"><code>Role.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/Role.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1008,1009"}},{"content":"<pre data-lines=\"1010,1085\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> java.util.HashSet;\n<span class=\"hljs-keyword\">import</span> java.util.Set;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.CascadeType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Column;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Entity;\n<span class=\"hljs-keyword\">import</span> javax.persistence.FetchType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GeneratedValue;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GenerationType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Id;\n<span class=\"hljs-keyword\">import</span> javax.persistence.ManyToMany;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Table;\n\n<span class=\"hljs-meta\">@Entity</span>\n<span class=\"hljs-meta\">@Table(name = &quot;sys_role&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Role</span> {\n\n\t<span class=\"hljs-meta\">@Id</span>\n\t<span class=\"hljs-meta\">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>\n\t<span class=\"hljs-meta\">@Column(name = &quot;role_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Long roleId;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;role_name&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String roleName;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;role_memo&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String roleMemo;\n\n\t<span class=\"hljs-keyword\">public</span> Long <span class=\"hljs-title function_\">getRoleId</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> roleId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setRoleId</span><span class=\"hljs-params\">(Long roleId)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.roleId = roleId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getRoleName</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> roleName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setRoleName</span><span class=\"hljs-params\">(String roleName)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.roleName = roleName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getRoleMemo</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> roleMemo;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setRoleMemo</span><span class=\"hljs-params\">(String roleMemo)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.roleMemo = roleMemo;\n\t}\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Role [roleId=&quot;</span> + roleId + <span class=\"hljs-string\">&quot;, roleName=&quot;</span> + roleName + <span class=\"hljs-string\">&quot;, roleMemo=&quot;</span> + roleMemo + <span class=\"hljs-string\">&quot;]&quot;</span>;\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;roles&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Set&lt;User&gt; users = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashSet</span>&lt;User&gt;();\n\n\t<span class=\"hljs-keyword\">public</span> Set&lt;User&gt; <span class=\"hljs-title function_\">getUsers</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> users;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUsers</span><span class=\"hljs-params\">(Set&lt;User&gt; users)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.users = users;\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1010,1085"}}],"payload":{"tag":"h4","lines":"903,904"}},{"content":"3.2.2&#x3001;&#x6d4b;&#x8bd5;&#x4ee3;&#x7801;","children":[{"content":"<pre data-lines=\"1088,1089\"><code>ManyToManyTest.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/ManyToManyTest.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1088,1089"}},{"content":"<pre data-lines=\"1090,1284\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> java.util.Set;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManager;\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityTransaction;\n\n<span class=\"hljs-keyword\">import</span> org.junit.Test;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ManyToManyTest</span> {\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>();\n\t\tuser1.setUserName(<span class=\"hljs-string\">&quot;&#x66f9;&#x6668;&#x78ca;&quot;</span>);\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>();\n\t\tuser2.setUserName(<span class=\"hljs-string\">&quot;&#x66f9;&#x6668;&#x65ed;&quot;</span>);\n\n\t\t\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Role</span>();\n\t\trole1.setRoleName(<span class=\"hljs-string\">&quot;&#x5415;&#x5e03;&quot;</span>);\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Role</span>();\n\t\trole2.setRoleName(<span class=\"hljs-string\">&quot;&#x4e1c;&#x7687;&quot;</span>);\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Role</span>();\n\t\trole3.setRoleName(<span class=\"hljs-string\">&quot;&#x8d75;&#x4e91;&quot;</span>);\n\n\t\tuser1.getRoles().add(role1);\n\t\tuser1.getRoles().add(role2);\n\t\tuser2.getRoles().add(role3);\n\t\trole1.getUsers().add(user1);\n\t\trole2.getUsers().add(user1);\n\t\trole3.getUsers().add(user2);\n\n\t\tentityManager.persist(user1);\n\t\tentityManager.persist(user2);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>();\n\t\tuser1.setUserName(<span class=\"hljs-string\">&quot;&#x66f9;&#x6668;&#x78ca;&quot;</span>);\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>();\n\t\tuser2.setUserName(<span class=\"hljs-string\">&quot;&#x66f9;&#x6668;&#x65ed;&quot;</span>);\n\n\t\t\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Role</span>();\n\t\trole1.setRoleName(<span class=\"hljs-string\">&quot;&#x5415;&#x5e03;&quot;</span>);\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Role</span>();\n\t\trole2.setRoleName(<span class=\"hljs-string\">&quot;&#x4e1c;&#x7687;&quot;</span>);\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Role</span>();\n\t\trole3.setRoleName(<span class=\"hljs-string\">&quot;&#x8d75;&#x4e91;&quot;</span>);\n\n\t\tuser1.getRoles().add(role1);\n\t\tuser1.getRoles().add(role2);\n\t\tuser2.getRoles().add(role3);\n\t\trole1.getUsers().add(user1);\n\t\trole2.getUsers().add(user1);\n\t\trole3.getUsers().add(user2);\n\n\t\tentityManager.persist(role1);\n\t\tentityManager.persist(role2);\n\t\tentityManager.persist(role3);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user</span> <span class=\"hljs-operator\">=</span> entityManager.find(User.class, <span class=\"hljs-number\">1L</span>);\n\t\tSystem.out.println(user);\n\n\t\tSet&lt;Role&gt; roles = user.getRoles();\n\t\t<span class=\"hljs-keyword\">for</span> (Role role : roles) {\n\t\t\tSystem.out.println(role);\n\t\t}\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role</span> <span class=\"hljs-operator\">=</span> entityManager.find(Role.class, <span class=\"hljs-number\">3L</span>);\n\t\tSystem.out.println(role);\n\n\t\tSet&lt;User&gt; users = role.getUsers();\n\t\t<span class=\"hljs-keyword\">for</span> (User user : users) {\n\t\t\tSystem.out.println(user);\n\t\t}\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user</span> <span class=\"hljs-operator\">=</span> entityManager.find(User.class, <span class=\"hljs-number\">1L</span>);\n\t\tuser.setUserPassword(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n\n\t\tSet&lt;Role&gt; roles = user.getRoles();\n\t\t<span class=\"hljs-keyword\">for</span> (Role role : roles) {\n\t\t\trole.setRoleMemo(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n\t\t}\n\n\t\tentityManager.merge(user);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role</span> <span class=\"hljs-operator\">=</span> entityManager.find(Role.class, <span class=\"hljs-number\">3L</span>);\n\t\trole.setRoleMemo(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n\n\t\tSet&lt;User&gt; users = role.getUsers();\n\t\t<span class=\"hljs-keyword\">for</span> (User user : users) {\n\t\t\tuser.setUserPassword(<span class=\"hljs-string\">&quot;123456&quot;</span>);\n\t\t}\n\n\t\tentityManager.merge(role);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test7</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">User</span> <span class=\"hljs-variable\">user</span> <span class=\"hljs-operator\">=</span> entityManager.find(User.class, <span class=\"hljs-number\">1L</span>);\n\t\tentityManager.remove(user);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test8</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">Role</span> <span class=\"hljs-variable\">role</span> <span class=\"hljs-operator\">=</span> entityManager.find(Role.class, <span class=\"hljs-number\">3L</span>);\n\t\tentityManager.remove(role);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1090,1284"}}],"payload":{"tag":"h4","lines":"1086,1087"}}],"payload":{"tag":"h3","lines":"859,860"}},{"content":"3.3&#x3001;&#x4e00;&#x5bf9;&#x4e00;&#x5173;&#x8054;","children":[{"content":"3.3.1&#x3001;&#x521b;&#x5efa;&#x5b9e;&#x4f53;","children":[{"content":"<pre data-lines=\"1316,1317\"><code>StuBaseInfo.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/StuBaseInfo.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1316,1317"}},{"content":"<pre data-lines=\"1318,1390\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.CascadeType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Column;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Entity;\n<span class=\"hljs-keyword\">import</span> javax.persistence.FetchType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GeneratedValue;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GenerationType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Id;\n<span class=\"hljs-keyword\">import</span> javax.persistence.OneToOne;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Table;\n\n<span class=\"hljs-meta\">@Entity</span>\n<span class=\"hljs-meta\">@Table(name = &quot;student_base_info&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StuBaseInfo</span> {\n\n\t<span class=\"hljs-meta\">@Id</span>\n\t<span class=\"hljs-meta\">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>\n\t<span class=\"hljs-meta\">@Column(name = &quot;stu_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Long stuId;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;stu_name&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String stuName;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;stu_sex&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String stuSex;\n\n\t<span class=\"hljs-keyword\">public</span> Long <span class=\"hljs-title function_\">getStuId</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuId</span><span class=\"hljs-params\">(Long stuId)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuId = stuId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getStuName</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuName</span><span class=\"hljs-params\">(String stuName)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuName = stuName;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getStuSex</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuSex;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuSex</span><span class=\"hljs-params\">(String stuSex)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuSex = stuSex;\n\t}\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;StuBaseInfo [stuId=&quot;</span> + stuId + <span class=\"hljs-string\">&quot;, stuName=&quot;</span> + stuName + <span class=\"hljs-string\">&quot;, stuSex=&quot;</span> + stuSex + <span class=\"hljs-string\">&quot;]&quot;</span>;\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL, mappedBy = &quot;stuBaseInfo&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> StuOtherInfo stuOtherInfo;\n\n\t<span class=\"hljs-keyword\">public</span> StuOtherInfo <span class=\"hljs-title function_\">getStuOtherInfo</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuOtherInfo;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuOtherInfo</span><span class=\"hljs-params\">(StuOtherInfo stuOtherInfo)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuOtherInfo = stuOtherInfo;\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1318,1390"}},{"content":"<pre data-lines=\"1391,1392\"><code>StuOtherInfo.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/StuOtherInfo.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1391,1392"}},{"content":"<pre data-lines=\"1393,1467\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.CascadeType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Column;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Entity;\n<span class=\"hljs-keyword\">import</span> javax.persistence.FetchType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GeneratedValue;\n<span class=\"hljs-keyword\">import</span> javax.persistence.GenerationType;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Id;\n<span class=\"hljs-keyword\">import</span> javax.persistence.JoinColumn;\n<span class=\"hljs-keyword\">import</span> javax.persistence.OneToOne;\n<span class=\"hljs-keyword\">import</span> javax.persistence.Table;\n\n<span class=\"hljs-meta\">@Entity</span>\n<span class=\"hljs-meta\">@Table(name = &quot;student_other_info&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StuOtherInfo</span> {\n\n\t<span class=\"hljs-meta\">@Id</span>\n\t<span class=\"hljs-meta\">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>\n\t<span class=\"hljs-meta\">@Column(name = &quot;stu_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> Long stuId;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;stu_img&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String stuImg;\n\n\t<span class=\"hljs-meta\">@Column(name = &quot;stu_address&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> String stuAddress;\n\n\t<span class=\"hljs-keyword\">public</span> Long <span class=\"hljs-title function_\">getStuId</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuId</span><span class=\"hljs-params\">(Long stuId)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuId = stuId;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getStuImg</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuImg;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuImg</span><span class=\"hljs-params\">(String stuImg)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuImg = stuImg;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getStuAddress</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuAddress;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuAddress</span><span class=\"hljs-params\">(String stuAddress)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuAddress = stuAddress;\n\t}\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">toString</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;StuOtherInfo [stuId=&quot;</span> + stuId + <span class=\"hljs-string\">&quot;, stuImg=&quot;</span> + stuImg + <span class=\"hljs-string\">&quot;, stuAddress=&quot;</span> + stuAddress + <span class=\"hljs-string\">&quot;]&quot;</span>;\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)</span>\n\t<span class=\"hljs-meta\">@JoinColumn(name = &quot;stu_id&quot;)</span>\n\t<span class=\"hljs-keyword\">private</span> StuBaseInfo stuBaseInfo ;\n\n\t<span class=\"hljs-keyword\">public</span> StuBaseInfo <span class=\"hljs-title function_\">getStuBaseInfo</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">return</span> stuBaseInfo;\n\t}\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setStuBaseInfo</span><span class=\"hljs-params\">(StuBaseInfo stuBaseInfo)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.stuBaseInfo = stuBaseInfo;\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1393,1467"}}],"payload":{"tag":"h4","lines":"1314,1315"}},{"content":"3.3.2&#x3001;&#x6d4b;&#x8bd5;&#x4ee3;&#x7801;","children":[{"content":"<pre data-lines=\"1470,1471\"><code>OneToOneTest.java&#xff08;&#x5168;&#x8def;&#x5f84;&#xff1a;/hibernate\\_jpa/src/com/caochenlei/hibernate/jpa/OneToOneTest.java&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1470,1471"}},{"content":"<pre data-lines=\"1472,1641\"><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.caochenlei.hibernate.jpa;\n\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityManager;\n<span class=\"hljs-keyword\">import</span> javax.persistence.EntityTransaction;\n\n<span class=\"hljs-keyword\">import</span> org.junit.Test;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">OneToOneTest</span> {\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuBaseInfo</span>();\n\t\tstuBaseInfo1.setStuName(<span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>);\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuBaseInfo</span>();\n\t\tstuBaseInfo2.setStuName(<span class=\"hljs-string\">&quot;&#x674e;&#x56db;&quot;</span>);\n\n\t\t\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuOtherInfo</span>();\n\t\tstuOtherInfo1.setStuImg(<span class=\"hljs-string\">&quot;http:img.caochenlei.com/001.png&quot;</span>);\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuOtherInfo</span>();\n\t\tstuOtherInfo2.setStuImg(<span class=\"hljs-string\">&quot;http:img.caochenlei.com/002.png&quot;</span>);\n\n\t\tstuBaseInfo1.setStuOtherInfo(stuOtherInfo1);\n\t\tstuBaseInfo2.setStuOtherInfo(stuOtherInfo2);\n\t\tstuOtherInfo1.setStuBaseInfo(stuBaseInfo1);\n\t\tstuOtherInfo2.setStuBaseInfo(stuBaseInfo2);\n\n\t\tentityManager.persist(stuBaseInfo1);\n\t\tentityManager.persist(stuBaseInfo2);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuBaseInfo</span>();\n\t\tstuBaseInfo1.setStuName(<span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>);\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuBaseInfo</span>();\n\t\tstuBaseInfo2.setStuName(<span class=\"hljs-string\">&quot;&#x674e;&#x56db;&quot;</span>);\n\n\t\t\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuOtherInfo</span>();\n\t\tstuOtherInfo1.setStuImg(<span class=\"hljs-string\">&quot;http:img.caochenlei.com/001.png&quot;</span>);\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">StuOtherInfo</span>();\n\t\tstuOtherInfo2.setStuImg(<span class=\"hljs-string\">&quot;http:img.caochenlei.com/002.png&quot;</span>);\n\n\t\tstuBaseInfo1.setStuOtherInfo(stuOtherInfo1);\n\t\tstuBaseInfo2.setStuOtherInfo(stuOtherInfo2);\n\t\tstuOtherInfo1.setStuBaseInfo(stuBaseInfo1);\n\t\tstuOtherInfo2.setStuBaseInfo(stuBaseInfo2);\n\n\t\tentityManager.persist(stuOtherInfo1);\n\t\tentityManager.persist(stuOtherInfo2);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo</span> <span class=\"hljs-operator\">=</span> entityManager.find(StuBaseInfo.class, <span class=\"hljs-number\">1L</span>);\n\t\tSystem.out.println(stuBaseInfo);\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo</span> <span class=\"hljs-operator\">=</span> stuBaseInfo.getStuOtherInfo();\n\t\tSystem.out.println(stuOtherInfo);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo</span> <span class=\"hljs-operator\">=</span> entityManager.find(StuOtherInfo.class, <span class=\"hljs-number\">1L</span>);\n\t\tSystem.out.println(stuOtherInfo);\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo</span> <span class=\"hljs-operator\">=</span> stuOtherInfo.getStuBaseInfo();\n\t\tSystem.out.println(stuBaseInfo);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo</span> <span class=\"hljs-operator\">=</span> entityManager.find(StuBaseInfo.class, <span class=\"hljs-number\">1L</span>);\n\t\tstuBaseInfo.setStuSex(<span class=\"hljs-string\">&quot;&#x7537;&quot;</span>);\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo</span> <span class=\"hljs-operator\">=</span> stuBaseInfo.getStuOtherInfo();\n\t\tstuOtherInfo.setStuAddress(<span class=\"hljs-string\">&quot;&#x6cb3;&#x5317;&#x7701;&quot;</span>);\n\t\tentityManager.merge(stuBaseInfo);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo</span> <span class=\"hljs-operator\">=</span> entityManager.find(StuOtherInfo.class, <span class=\"hljs-number\">2L</span>);\n\t\tstuOtherInfo.setStuAddress(<span class=\"hljs-string\">&quot;&#x6cb3;&#x5357;&#x7701;&quot;</span>);\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo</span> <span class=\"hljs-operator\">=</span> stuOtherInfo.getStuBaseInfo();\n\t\tstuBaseInfo.setStuSex(<span class=\"hljs-string\">&quot;&#x5973;&quot;</span>);\n\t\tentityManager.merge(stuOtherInfo);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test7</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">StuBaseInfo</span> <span class=\"hljs-variable\">stuBaseInfo</span> <span class=\"hljs-operator\">=</span> entityManager.find(StuBaseInfo.class, <span class=\"hljs-number\">1L</span>);\n\t\tentityManager.remove(stuBaseInfo);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n\t\n\t<span class=\"hljs-meta\">@Test</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test8</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\t\ttransaction.begin();\n\n\t\t<span class=\"hljs-type\">StuOtherInfo</span> <span class=\"hljs-variable\">stuOtherInfo</span> <span class=\"hljs-operator\">=</span> entityManager.find(StuOtherInfo.class, <span class=\"hljs-number\">2L</span>);\n\t\tentityManager.remove(stuOtherInfo);\n\n\t\ttransaction.commit();\n\t\tentityManager.close();\n\t}\n\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1472,1641"}}],"payload":{"tag":"h4","lines":"1468,1469"}}],"payload":{"tag":"h3","lines":"1285,1286"}}],"payload":{"tag":"h2","lines":"616,618"}},{"content":"&#x7b2c;&#x56db;&#x7ae0; Hibernate5 JPA&#x7684;JPQL&#x67e5;&#x8be2;","children":[{"content":"4.1&#x3001;&#x7b80;&#x5355;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1728,1748\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test1</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer&quot;</span>);\n\tList&lt;Customer&gt; list = query.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1728,1748"}}],"payload":{"tag":"h3","lines":"1726,1727"}},{"content":"4.2&#x3001;&#x522b;&#x540d;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1751,1779\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test2</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query1</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer c&quot;</span>);\n\tList&lt;Customer&gt; list1 = query1.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list1) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query2</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;select c from Customer c&quot;</span>);\n\tList&lt;Customer&gt; list2 = query2.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list2) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1751,1779"}}],"payload":{"tag":"h3","lines":"1749,1750"}},{"content":"4.3&#x3001;&#x6392;&#x5e8f;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1782,1815\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test3</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\tList&lt;Customer&gt; list1 = entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer order by cust_id&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list1) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Customer&gt; list2 = entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer order by cust_id asc&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list2) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Customer&gt; list3 = entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer order by cust_id desc&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list3) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1782,1815"}}],"payload":{"tag":"h3","lines":"1780,1781"}},{"content":"4.4&#x3001;&#x6761;&#x4ef6;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1818,1850\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test4</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query1</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer where cust_source = ? and cust_name like ?&quot;</span>);\n\tquery1.setParameter(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;&#x7535;&#x89c6;&#x5e7f;&#x544a;&quot;</span>);\n\tquery1.setParameter(<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&quot;&#x738b;%&quot;</span>);\n\tList&lt;Customer&gt; list1 = query1.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list1) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query2</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer where cust_source = :aaa and cust_name like :bbb&quot;</span>);\n\tquery2.setParameter(<span class=\"hljs-string\">&quot;aaa&quot;</span>, <span class=\"hljs-string\">&quot;&#x7535;&#x89c6;&#x5e7f;&#x544a;&quot;</span>);\n\tquery2.setParameter(<span class=\"hljs-string\">&quot;bbb&quot;</span>, <span class=\"hljs-string\">&quot;&#x738b;%&quot;</span>);\n\tList&lt;Customer&gt; list2 = query2.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list2) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1818,1850"}}],"payload":{"tag":"h3","lines":"1816,1817"}},{"content":"4.5&#x3001;&#x6295;&#x5f71;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1853,1892\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test5</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query1</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;select c.custName from Customer c&quot;</span>);\n\tList&lt;Object&gt; list1 = query1.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Object cust_name : list1) {\n\t\tSystem.out.println(cust_name);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query2</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;select c.custName,c.custSource from Customer c&quot;</span>);\n\tList&lt;Object[]&gt; list2 = query2.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Object[] objects : list2) {\n\t\tSystem.out.println(Arrays.toString(objects));\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\t\n\t\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query3</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;select new Customer(c.custName,c.custSource) from Customer c&quot;</span>);\n\tList&lt;Customer&gt; list3 = query3.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list3) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1853,1892"}}],"payload":{"tag":"h3","lines":"1851,1852"}},{"content":"4.6&#x3001;&#x5206;&#x9875;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1895,1917\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test6</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\t<span class=\"hljs-type\">Query</span> <span class=\"hljs-variable\">query</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;from LinkMan&quot;</span>);\n\tquery.setFirstResult(<span class=\"hljs-number\">0</span>);\n\tquery.setMaxResults(<span class=\"hljs-number\">10</span>);\n\tList&lt;LinkMan&gt; list = query.getResultList();\n\t<span class=\"hljs-keyword\">for</span> (LinkMan linkMan : list) {\n\t\tSystem.out.println(linkMan);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1895,1917"}}],"payload":{"tag":"h3","lines":"1893,1894"}},{"content":"4.7&#x3001;&#x5206;&#x7ec4;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1920,1944\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test7</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\t<span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">object</span> <span class=\"hljs-operator\">=</span> entityManager.createQuery(<span class=\"hljs-string\">&quot;select count(*) from Customer&quot;</span>).getSingleResult();\n\tSystem.out.println(object);\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Object[]&gt; list = entityManager.createQuery(<span class=\"hljs-string\">&quot;select custSource,count(*) from Customer group by cust_source&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Object[] objects : list) {\n\t\tSystem.out.println(Arrays.toString(objects));\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1920,1944"}}],"payload":{"tag":"h3","lines":"1918,1919"}},{"content":"4.8&#x3001;&#x591a;&#x8868;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"1947,1994\"><code class=\"language-java\"><span class=\"hljs-meta\">@Test</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">test8</span><span class=\"hljs-params\">()</span> {\n\t<span class=\"hljs-type\">EntityManager</span> <span class=\"hljs-variable\">entityManager</span> <span class=\"hljs-operator\">=</span> JPAUtil.getEntityManager();\n\t<span class=\"hljs-type\">EntityTransaction</span> <span class=\"hljs-variable\">transaction</span> <span class=\"hljs-operator\">=</span> entityManager.getTransaction();\n\ttransaction.begin();\n\n\t\n\tList&lt;Object[]&gt; list1 = entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer c inner join c.linkMans&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Object[] objects : list1) {\n\t\tSystem.out.println(Arrays.toString(objects));\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Customer&gt; list2 = entityManager.createQuery(<span class=\"hljs-string\">&quot;select distinct c from Customer c inner join fetch c.linkMans&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list2) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Object[]&gt; list3 = entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer c left outer join c.linkMans&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Object[] objects : list3) {\n\t\tSystem.out.println(Arrays.toString(objects));\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Customer&gt; list4 = entityManager.createQuery(<span class=\"hljs-string\">&quot;select distinct c from Customer c left outer join fetch c.linkMans&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Customer customer : list4) {\n\t\tSystem.out.println(customer);\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\t\n\tList&lt;Object[]&gt; list5 = entityManager.createQuery(<span class=\"hljs-string\">&quot;from Customer c right outer join c.linkMans&quot;</span>).getResultList();\n\t<span class=\"hljs-keyword\">for</span> (Object[] objects : list5) {\n\t\tSystem.out.println(Arrays.toString(objects));\n\t}\n\tSystem.err.println(<span class=\"hljs-string\">&quot;--------------------------------------------------&quot;</span>);\n\n\ttransaction.commit();\n\tentityManager.close();\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1947,1994"}}],"payload":{"tag":"h3","lines":"1945,1946"}}],"payload":{"tag":"h2","lines":"1642,1644"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
