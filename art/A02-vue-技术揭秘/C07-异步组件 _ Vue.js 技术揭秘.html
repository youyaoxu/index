<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6\">#</a> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6;","children":[{"content":"<a href=\"#%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6\">#</a> &#x666e;&#x901a;&#x51fd;&#x6570;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;","children":[{"content":"<pre data-lines=\"201,202\"><code>&#x9488;&#x5bf9;&#x666e;&#x901a;&#x51fd;&#x6570;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x524d;&#x9762;&#x51e0;&#x4e2a; if &#x5224;&#x65ad;&#x53ef;&#x4ee5;&#x5ffd;&#x7565;&#xff0c;&#x5b83;&#x4eec;&#x662f;&#x4e3a;&#x9ad8;&#x7ea7;&#x7ec4;&#x4ef6;&#x6240;&#x7528;&#xff0c;&#x5bf9;&#x4e8e; `factory.contexts` &#x7684;&#x5224;&#x65ad;&#xff0c;&#x662f;&#x8003;&#x8651;&#x5230;&#x591a;&#x4e2a;&#x5730;&#x65b9;&#x540c;&#x65f6;&#x521d;&#x59cb;&#x5316;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x7684;&#x5b9e;&#x9645;&#x52a0;&#x8f7d;&#x5e94;&#x8be5;&#x53ea;&#x6709;&#x4e00;&#x6b21;&#x3002;&#x63a5;&#x7740;&#x8fdb;&#x5165;&#x5b9e;&#x9645;&#x52a0;&#x8f7d;&#x903b;&#x8f91;&#xff0c;&#x5b9a;&#x4e49;&#x4e86; `forceRender`&#x3001;`resolve` &#x548c; `reject` &#x51fd;&#x6570;&#xff0c;&#x6ce8;&#x610f; `resolve` &#x548c; `reject` &#x51fd;&#x6570;&#x7528; `once` &#x51fd;&#x6570;&#x505a;&#x4e86;&#x4e00;&#x5c42;&#x5305;&#x88c5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/shared/util.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"201,202"}},{"content":"<pre data-lines=\"203,217\"><code data-lines=\"203,217\"><span class=\"hljs-comment\">/**\n * Ensure a function is called only once.\n */</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">once</span> (<span class=\"hljs-params\">fn: <span class=\"hljs-built_in\">Function</span></span>): <span class=\"hljs-title class_\">Function</span> {\n  <span class=\"hljs-keyword\">let</span> called = <span class=\"hljs-literal\">false</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">if</span> (!called) {\n      called = <span class=\"hljs-literal\">true</span>\n      fn.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-variable language_\">this</span>, <span class=\"hljs-variable language_\">arguments</span>)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"203,217"}},{"content":"<pre data-lines=\"218,221\"><code>`once` &#x903b;&#x8f91;&#x975e;&#x5e38;&#x7b80;&#x5355;&#xff0c;&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x65b0;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x975e;&#x5e38;&#x5de7;&#x5999;&#x5730;&#x5229;&#x7528;&#x95ed;&#x5305;&#x548c;&#x4e00;&#x4e2a;&#x6807;&#x5fd7;&#x4f4d;&#x4fdd;&#x8bc1;&#x4e86;&#x5b83;&#x5305;&#x88c5;&#x7684;&#x51fd;&#x6570;&#x53ea;&#x4f1a;&#x6267;&#x884c;&#x4e00;&#x6b21;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x786e;&#x4fdd; `resolve` &#x548c; `reject` &#x51fd;&#x6570;&#x53ea;&#x6267;&#x884c;&#x4e00;&#x6b21;&#x3002;\n\n&#x63a5;&#x4e0b;&#x6765;&#x6267;&#x884c; `const res = factory(resolve, reject)` &#x903b;&#x8f91;&#xff0c;&#x8fd9;&#x5757;&#x513f;&#x5c31;&#x662f;&#x6267;&#x884c;&#x6211;&#x4eec;&#x7ec4;&#x4ef6;&#x7684;&#x5de5;&#x5382;&#x51fd;&#x6570;&#xff0c;&#x540c;&#x65f6;&#x628a; `resolve` &#x548c; `reject` &#x51fd;&#x6570;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x7ec4;&#x4ef6;&#x7684;&#x5de5;&#x5382;&#x51fd;&#x6570;&#x901a;&#x5e38;&#x4f1a;&#x5148;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#x53bb;&#x52a0;&#x8f7d;&#x6211;&#x4eec;&#x7684;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x7684; JS &#x6587;&#x4ef6;&#xff0c;&#x62ff;&#x5230;&#x7ec4;&#x4ef6;&#x5b9a;&#x4e49;&#x7684;&#x5bf9;&#x8c61; `res` &#x540e;&#xff0c;&#x6267;&#x884c; `resolve(res)` &#x903b;&#x8f91;&#xff0c;&#x5b83;&#x4f1a;&#x5148;&#x6267;&#x884c; `factory.resolved = ensureCtor(res, baseCtor)`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"218,221"}},{"content":"<pre data-lines=\"222,235\"><code data-lines=\"222,235\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">ensureCtor</span> <span class=\"hljs-params\">(comp: any, base)</span> {\n  <span class=\"hljs-keyword\">if</span> (\n    <span class=\"hljs-keyword\">comp</span>.__esModule ||\n    (hasSymbol &amp;&amp; <span class=\"hljs-keyword\">comp</span>[Symbol.toStringTag] === <span class=\"hljs-string\">&apos;Module&apos;</span>)\n  ) {\n    <span class=\"hljs-keyword\">comp</span> = <span class=\"hljs-keyword\">comp</span>.default\n  }\n  <span class=\"hljs-keyword\">return</span> isObject(<span class=\"hljs-keyword\">comp</span>)\n    ? base.<span class=\"hljs-built_in\">extend</span>(<span class=\"hljs-keyword\">comp</span>)\n    : <span class=\"hljs-keyword\">comp</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"222,235"}},{"content":"<pre data-lines=\"236,239\"><code>&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x76ee;&#x7684;&#x662f;&#x4e3a;&#x4e86;&#x4fdd;&#x8bc1;&#x80fd;&#x627e;&#x5230;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6; JS &#x5b9a;&#x4e49;&#x7684;&#x7ec4;&#x4ef6;&#x5bf9;&#x8c61;&#xff0c;&#x5e76;&#x4e14;&#x5982;&#x679c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x666e;&#x901a;&#x5bf9;&#x8c61;&#xff0c;&#x5219;&#x8c03;&#x7528; `Vue.extend` &#x628a;&#x5b83;&#x8f6c;&#x6362;&#x6210;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#x3002;\n\n`resolve` &#x903b;&#x8f91;&#x6700;&#x540e;&#x5224;&#x65ad;&#x4e86; `sync`&#xff0c;&#x663e;&#x7136;&#x6211;&#x4eec;&#x8fd9;&#x4e2a;&#x573a;&#x666f;&#x4e0b; `sync` &#x4e3a; false&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x4f1a;&#x6267;&#x884c; `forceRender` &#x51fd;&#x6570;&#xff0c;&#x5b83;&#x4f1a;&#x904d;&#x5386; `factory.contexts`&#xff0c;&#x62ff;&#x5230;&#x6bcf;&#x4e00;&#x4e2a;&#x8c03;&#x7528;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x4f8b; `vm`, &#x6267;&#x884c; `vm.&#x24;forceUpdate()` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/lifecycle.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,239"}},{"content":"<pre data-lines=\"240,248\"><code data-lines=\"240,248\"><span class=\"hljs-type\">Vue</span>.proto<span class=\"hljs-keyword\">type</span>.&#x24;forceUpdate = function () {\n  const vm: <span class=\"hljs-type\">Component</span> = this\n  if (vm._watcher) {\n    vm._watcher.update()\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"240,248"}},{"content":"<pre data-lines=\"249,250\"><code>`&#x24;forceUpdate` &#x7684;&#x903b;&#x8f91;&#x975e;&#x5e38;&#x7b80;&#x5355;&#xff0c;&#x5c31;&#x662f;&#x8c03;&#x7528;&#x6e32;&#x67d3; `watcher` &#x7684; `update` &#x65b9;&#x6cd5;&#xff0c;&#x8ba9;&#x6e32;&#x67d3; `watcher` &#x5bf9;&#x5e94;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6267;&#x884c;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x89e6;&#x53d1;&#x4e86;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x3002;&#x4e4b;&#x6240;&#x4ee5;&#x8fd9;&#x4e48;&#x505a;&#x662f;&#x56e0;&#x4e3a; Vue &#x901a;&#x5e38;&#x662f;&#x6570;&#x636e;&#x9a71;&#x52a8;&#x89c6;&#x56fe;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x4f46;&#x662f;&#x5728;&#x6574;&#x4e2a;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x8fc7;&#x7a0b;&#x4e2d;&#x662f;&#x6ca1;&#x6709;&#x6570;&#x636e;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x901a;&#x8fc7;&#x6267;&#x884c; `&#x24;forceUpdate` &#x53ef;&#x4ee5;&#x5f3a;&#x5236;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x4e00;&#x6b21;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"249,250"}}],"payload":{"tag":"h2","lines":"198,200"}},{"content":"<a href=\"#promise-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6\">#</a> <code>Promise</code> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6;","children":[{"content":"<pre data-lines=\"254,261\"><code data-lines=\"254,261\">Vue.component(\n  <span class=\"hljs-string\">&apos;async-webpack-example&apos;</span>,\n  <span class=\"hljs-regexp\">//</span> &#x8be5; `<span class=\"language-javascript\"><span class=\"hljs-keyword\">import</span></span>` &#x51fd;&#x6570;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; `<span class=\"language-javascript\"><span class=\"hljs-title class_\">Promise</span></span>` &#x5bf9;&#x8c61;&#x3002;\n  () =&gt; <span class=\"hljs-keyword\">import</span>(<span class=\"hljs-string\">&apos;./my-async-component&apos;</span>)\n) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"254,261"}},{"content":"<pre data-lines=\"262,263\"><code>webpack 2+ &#x652f;&#x6301;&#x4e86;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x7684;&#x8bed;&#x6cd5;&#x7cd6;&#xff1a;`() =&gt; import(&apos;./my-async-component&apos;)`&#xff0c;&#x5f53;&#x6267;&#x884c;&#x5b8c; `res = factory(resolve, reject)`&#xff0c;&#x8fd4;&#x56de;&#x7684;&#x503c;&#x5c31;&#x662f; `import(&apos;./my-async-component&apos;)` &#x7684;&#x8fd4;&#x56de;&#x503c;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a; `Promise` &#x5bf9;&#x8c61;&#x3002;&#x63a5;&#x7740;&#x8fdb;&#x5165; if &#x6761;&#x4ef6;&#xff0c;&#x53c8;&#x5224;&#x65ad;&#x4e86; `typeof res.then === &apos;function&apos;)`&#xff0c;&#x6761;&#x4ef6;&#x6ee1;&#x8db3;&#xff0c;&#x6267;&#x884c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"262,263"}},{"content":"<pre data-lines=\"264,269\"><code data-lines=\"264,269\"><span class=\"hljs-function\"><span class=\"hljs-title\">if</span> <span class=\"hljs-params\">(isUndef(factory.resolved))</span> {\n  <span class=\"hljs-title\">res</span>.<span class=\"hljs-title\">then</span><span class=\"hljs-params\">(resolve, reject)</span>\n} \n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"264,269"}},{"content":"<pre data-lines=\"270,271\"><code>&#x5f53;&#x7ec4;&#x4ef6;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x6210;&#x529f;&#x540e;&#xff0c;&#x6267;&#x884c; `resolve`&#xff0c;&#x52a0;&#x8f7d;&#x5931;&#x8d25;&#x5219;&#x6267;&#x884c; `reject`&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x975e;&#x5e38;&#x5de7;&#x5999;&#x5730;&#x5b9e;&#x73b0;&#x4e86;&#x914d;&#x5408; webpack 2+ &#x7684;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x7ec4;&#x4ef6;&#x7684;&#x65b9;&#x5f0f;&#xff08;`Promise`&#xff09;&#x52a0;&#x8f7d;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"270,271"}}],"payload":{"tag":"h2","lines":"251,253"}},{"content":"<a href=\"#%E9%AB%98%E7%BA%A7%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6\">#</a> &#x9ad8;&#x7ea7;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;","children":[{"content":"<a href=\"#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5\">#</a> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x5931;&#x8d25;","children":[{"content":"<pre data-lines=\"355,356\"><code>&#x5f53;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x5931;&#x8d25;&#xff0c;&#x4f1a;&#x6267;&#x884c; `reject` &#x51fd;&#x6570;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"355,356"}},{"content":"<pre data-lines=\"357,369\"><code data-lines=\"357,369\"><span class=\"hljs-keyword\">const</span> reject = once(reason =&gt; {\n  process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; warn(\n    `Failed to resolve <span class=\"hljs-keyword\">async</span> component: &#x24;{<span class=\"hljs-built_in\">String</span>(<span class=\"hljs-keyword\">factory</span>)}` +\n    (reason ? `\\nReason: &#x24;{reason}` : <span class=\"hljs-string\">&apos;&apos;</span>)\n  )\n  <span class=\"hljs-keyword\">if</span> (isDef(<span class=\"hljs-keyword\">factory</span>.errorComp)) {\n    <span class=\"hljs-keyword\">factory</span>.error = <span class=\"hljs-keyword\">true</span>\n    forceRender()\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"357,369"}},{"content":"<pre data-lines=\"370,371\"><code>&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x4f1a;&#x628a; `factory.error` &#x8bbe;&#x7f6e;&#x4e3a; `true`&#xff0c;&#x540c;&#x65f6;&#x6267;&#x884c; `forceRender()` &#x518d;&#x6b21;&#x6267;&#x884c;&#x5230; `resolveAsyncComponent`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"370,371"}},{"content":"<pre data-lines=\"372,377\"><code data-lines=\"372,377\"><span class=\"hljs-attribute\">if</span> (isTrue(factory.<span class=\"hljs-literal\">error</span>) &amp;&amp; isDef(factory.<span class=\"hljs-literal\">error</span>Comp)) {\n  <span class=\"hljs-attribute\">return</span> factory.<span class=\"hljs-literal\">error</span>Comp\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"372,377"}},{"content":"<pre data-lines=\"378,379\"><code>&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x5c31;&#x8fd4;&#x56de; `factory.errorComp`&#xff0c;&#x76f4;&#x63a5;&#x6e32;&#x67d3; error &#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"378,379"}}],"payload":{"tag":"h3","lines":"353,354"}},{"content":"<a href=\"#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%E5%8A%A0%E8%BD%BD%E6%88%90%E5%8A%9F\">#</a> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x6210;&#x529f;","children":[{"content":"<pre data-lines=\"382,383\"><code>&#x5f53;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x6210;&#x529f;&#xff0c;&#x4f1a;&#x6267;&#x884c; `resolve` &#x51fd;&#x6570;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"382,383"}},{"content":"<pre data-lines=\"384,392\"><code data-lines=\"384,392\"><span class=\"hljs-keyword\">const</span> resolve = once((res: <span class=\"hljs-built_in\">Object</span> | Class&lt;Component&gt;) =&gt; {\n  <span class=\"hljs-keyword\">factory</span>.resolved = ensureCtor(res, baseCtor)\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">sync</span>) {\n    forceRender()\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"384,392"}},{"content":"<pre data-lines=\"393,394\"><code>&#x9996;&#x5148;&#x628a;&#x52a0;&#x8f7d;&#x7ed3;&#x679c;&#x7f13;&#x5b58;&#x5230; `factory.resolved` &#x4e2d;&#xff0c;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x56e0;&#x4e3a; `sync` &#x5df2;&#x7ecf;&#x4e3a; false&#xff0c;&#x5219;&#x6267;&#x884c; `forceRender()` &#x518d;&#x6b21;&#x6267;&#x884c;&#x5230; `resolveAsyncComponent`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"393,394"}},{"content":"<pre data-lines=\"395,400\"><code data-lines=\"395,400\"><span class=\"hljs-keyword\">if</span> (isDef(<span class=\"hljs-keyword\">factory</span>.resolved)) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">factory</span>.resolved\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"395,400"}},{"content":"<pre data-lines=\"401,402\"><code>&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x76f4;&#x63a5;&#x8fd4;&#x56de; `factory.resolved`&#xff0c;&#x6e32;&#x67d3;&#x6210;&#x529f;&#x52a0;&#x8f7d;&#x7684;&#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"401,402"}}],"payload":{"tag":"h3","lines":"380,381"}},{"content":"<a href=\"#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%E5%8A%A0%E8%BD%BD%E4%B8%AD\">#</a> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x4e2d;","children":[{"content":"<pre data-lines=\"405,406\"><code>&#x5982;&#x679c;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x4e2d;&#x5e76;&#x672a;&#x8fd4;&#x56de;&#xff0c;&#x8fd9;&#x65f6;&#x5019;&#x4f1a;&#x8d70;&#x5230;&#x8fd9;&#x4e2a;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"405,406"}},{"content":"<pre data-lines=\"407,412\"><code data-lines=\"407,412\"><span class=\"hljs-keyword\">if</span> (isTrue(<span class=\"hljs-keyword\">factory</span>.loading) &amp;&amp; isDef(<span class=\"hljs-keyword\">factory</span>.loadingComp)) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">factory</span>.loadingComp\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"407,412"}},{"content":"<pre data-lines=\"413,414\"><code>&#x90a3;&#x4e48;&#x5219;&#x4f1a;&#x8fd4;&#x56de; `factory.loadingComp`&#xff0c;&#x6e32;&#x67d3; loading &#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"413,414"}}],"payload":{"tag":"h3","lines":"403,404"}},{"content":"<a href=\"#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%E5%8A%A0%E8%BD%BD%E8%B6%85%E6%97%B6\">#</a> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x8d85;&#x65f6;","children":[{"content":"<pre data-lines=\"417,418\"><code>&#x5982;&#x679c;&#x8d85;&#x65f6;&#xff0c;&#x5219;&#x8d70;&#x5230;&#x4e86; `reject` &#x903b;&#x8f91;&#xff0c;&#x4e4b;&#x540e;&#x903b;&#x8f91;&#x548c;&#x52a0;&#x8f7d;&#x5931;&#x8d25;&#x4e00;&#x6837;&#xff0c;&#x6e32;&#x67d3; error &#x7ec4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"417,418"}}],"payload":{"tag":"h3","lines":"415,416"}}],"payload":{"tag":"h2","lines":"272,274"}},{"content":"<a href=\"#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6-patch\">#</a> &#x5f02;&#x6b65;&#x7ec4;&#x4ef6; patch","children":[{"content":"<pre data-lines=\"422,423\"><code>&#x56de;&#x5230; `createComponent` &#x7684;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"422,423"}},{"content":"<pre data-lines=\"424,436\"><code data-lines=\"424,436\">Ctor = resolveAsyncComponent(asyncFactory, baseCtor, context)\nif (Ctor === undefined) {\n  <span class=\"hljs-keyword\">return</span> createAsyncPlaceholder(\n<span class=\"hljs-built_in\">    asyncFactory,</span>\n<span class=\"hljs-built_in\">    data,</span>\n<span class=\"hljs-built_in\">    context,</span>\n<span class=\"hljs-built_in\">    children,</span>\n    tag\n  )\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"424,436"}},{"content":"<pre data-lines=\"437,438\"><code>&#x5982;&#x679c;&#x662f;&#x7b2c;&#x4e00;&#x6b21;&#x6267;&#x884c; `resolveAsyncComponent`&#xff0c;&#x9664;&#x975e;&#x4f7f;&#x7528;&#x9ad8;&#x7ea7;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6; `0 delay` &#x53bb;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a; loading &#x7ec4;&#x4ef6;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x662f; `undefiend`&#xff0c;&#x63a5;&#x7740;&#x901a;&#x8fc7; `createAsyncPlaceholder` &#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x6ce8;&#x91ca;&#x8282;&#x70b9;&#x4f5c;&#x4e3a;&#x5360;&#x4f4d;&#x7b26;&#x3002;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/core/vdom/helpers/resolve-async-components.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"437,438"}},{"content":"<pre data-lines=\"439,453\"><code data-lines=\"439,453\">export function createAsyncPlaceholder (\n  factory: Function,\n  data: ?VNodeData,\n  context: Component,\n  children: ?Array<span class=\"hljs-tag\">&lt;VNode&gt;</span>,\n  <span class=\"hljs-keyword\">tag</span>: ?<span class=\"hljs-keyword\">string</span>\n): VNode {\n  const <span class=\"hljs-keyword\">node</span> <span class=\"hljs-title\">= createEmptyVNode</span>()\n  node.asyncFactory = factory\n  node.asyncMeta = { data, context, children, <span class=\"hljs-keyword\">tag</span> <span class=\"hljs-title\">}\n  return</span> <span class=\"hljs-keyword\">node</span>\n<span class=\"hljs-title\">} \n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"439,453"}},{"content":"<pre data-lines=\"454,457\"><code>&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x5c31;&#x662f;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x5360;&#x4f4d;&#x7684;&#x6ce8;&#x91ca; VNode&#xff0c;&#x540c;&#x65f6;&#x628a; `asyncFactory` &#x548c; `asyncMeta` &#x8d4b;&#x503c;&#x7ed9;&#x5f53;&#x524d; `vnode`&#x3002;\n\n&#x5f53;&#x6267;&#x884c; `forceRender` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x89e6;&#x53d1;&#x7ec4;&#x4ef6;&#x7684;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x90a3;&#x4e48;&#x4f1a;&#x518d;&#x4e00;&#x6b21;&#x6267;&#x884c; `resolveAsyncComponent`&#xff0c;&#x8fd9;&#x65f6;&#x5019;&#x5c31;&#x4f1a;&#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x53ef;&#x80fd;&#x8fd4;&#x56de; loading&#x3001;error &#x6216;&#x6210;&#x529f;&#x52a0;&#x8f7d;&#x7684;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#xff0c;&#x8fd4;&#x56de;&#x503c;&#x4e0d;&#x4e3a; `undefined`&#xff0c;&#x56e0;&#x6b64;&#x5c31;&#x8d70;&#x6b63;&#x5e38;&#x7684;&#x7ec4;&#x4ef6; `render`&#x3001;`patch` &#x8fc7;&#x7a0b;&#xff0c;&#x4e0e;&#x7ec4;&#x4ef6;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#x6d41;&#x7a0b;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;&#x662f;&#x5b58;&#x5728;&#x65b0;&#x65e7; `vnode` &#x7684;&#xff0c;&#x4e0b;&#x4e00;&#x7ae0;&#x6211;&#x4f1a;&#x5206;&#x6790;&#x7ec4;&#x4ef6;&#x66f4;&#x65b0;&#x7684; `patch` &#x8fc7;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"454,457"}}],"payload":{"tag":"h2","lines":"419,421"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"461,462\"><code>&#x901a;&#x8fc7;&#x4ee5;&#x4e0a;&#x4ee3;&#x7801;&#x5206;&#x6790;&#xff0c;&#x6211;&#x4eec;&#x5bf9; Vue &#x7684;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x73b0;&#x6709;&#x4e86;&#x6df1;&#x5165;&#x7684;&#x4e86;&#x89e3;&#xff0c;&#x77e5;&#x9053;&#x4e86; 3 &#x79cd;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x73b0;&#x65b9;&#x5f0f;&#xff0c;&#x5e76;&#x4e14;&#x770b;&#x5230;&#x9ad8;&#x7ea7;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x73b0;&#x662f;&#x975e;&#x5e38;&#x5de7;&#x5999;&#x7684;&#xff0c;&#x5b83;&#x5b9e;&#x73b0;&#x4e86; loading&#x3001;resolve&#x3001;reject&#x3001;timeout 4 &#x79cd;&#x72b6;&#x6001;&#x3002;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x5b9e;&#x73b0;&#x7684;&#x672c;&#x8d28;&#x662f; 2 &#x6b21;&#x6e32;&#x67d3;&#xff0c;&#x9664;&#x4e86; 0 delay &#x7684;&#x9ad8;&#x7ea7;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x7b2c;&#x4e00;&#x6b21;&#x76f4;&#x63a5;&#x6e32;&#x67d3;&#x6210; loading &#x7ec4;&#x4ef6;&#x5916;&#xff0c;&#x5176;&#x5b83;&#x90fd;&#x662f;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x6ce8;&#x91ca;&#x8282;&#x70b9;&#xff0c;&#x5f53;&#x5f02;&#x6b65;&#x83b7;&#x53d6;&#x7ec4;&#x4ef6;&#x6210;&#x529f;&#x540e;&#xff0c;&#x518d;&#x901a;&#x8fc7; `forceRender` &#x5f3a;&#x5236;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x80fd;&#x6b63;&#x786e;&#x6e32;&#x67d3;&#x51fa;&#x6211;&#x4eec;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x7684;&#x7ec4;&#x4ef6;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"461,462"}}],"payload":{"tag":"h2","lines":"458,460"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
