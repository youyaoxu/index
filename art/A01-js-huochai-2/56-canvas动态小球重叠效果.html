<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"https://www.cnblogs.com/xiaohuochai/p/6370123.html\">canvas&#x52a8;&#x6001;&#x5c0f;&#x7403;&#x91cd;&#x53e0;&#x6548;&#x679c;</a><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoklEQVQ4T+2T4Q2CMBCFv27CBjgCG+gIjAAbOAIjOIJs4Ai6gRvIBpjXXCOp19T/8pJLoTneXcj3Ah91wAV4bu68xwXoAZ2EzEAmE9AWTB6AelRDyaAx9zgh0wE4ATczcTdIE7wl0oe7wX/8RMHigfQTB3fDdM1IEvYyONdIVEOSqDwCY2Z2NaS/UNbqMSQmvauUPlfbNKpBSdTUVyXSs/XyBlRCNBG20I28AAAAAElFTkSuQmCC\" alt=\"img\">","children":[{"content":"&#x524d;&#x9762;&#x7684;&#x8bdd;","children":[{"content":"<pre data-lines=\"4,5\"><code>&#x3000;&#x3000;&#x5728;[javascript&#x8fd0;&#x52a8;&#x7cfb;&#x5217;](http://www.cnblogs.com/xiaohuochai/p/5909852.html)&#x4e2d;&#xff0c;&#x8be6;&#x7ec6;&#x4ecb;&#x7ecd;&#x4e86;&#x5404;&#x79cd;&#x8fd0;&#x52a8;&#xff0c;&#x5176;&#x4e2d;&#x5c31;&#x5305;&#x62ec;[&#x78b0;&#x58c1;&#x8fd0;&#x52a8;](http://www.cnblogs.com/xiaohuochai/p/5983835.html)&#x3002;&#x4f46;&#x662f;&#xff0c;&#x5982;&#x679c;&#x7528;[canvas](http://www.cnblogs.com/xiaohuochai/p/5058770.html)&#x53bb;&#x5b9e;&#x73b0;&#xff0c;&#x5374;&#x662f;&#x53e6;&#x4e00;&#x79cd;&#x601d;&#x8def;&#x3002;&#x672c;&#x6587;&#x5c06;&#x8be6;&#x7ec6;&#x4ecb;&#x7ecd;canvas&#x52a8;&#x6001;&#x5c0f;&#x7403;&#x91cd;&#x53e0;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,5"}}],"payload":{"tag":"h3","lines":"2,3"}},{"content":"&#x6548;&#x679c;&#x5c55;&#x793a;","children":[],"payload":{"tag":"h3","lines":"8,9"}},{"content":"&#x9759;&#x6001;&#x5c0f;&#x7403;","children":[{"content":"<pre data-lines=\"14,15\"><code>&#x3000;&#x3000;&#x9996;&#x5148;&#xff0c;&#x751f;&#x6210;&#x968f;&#x673a;&#x534a;&#x5f84;&#x3001;&#x968f;&#x673a;&#x4f4d;&#x7f6e;&#x7684;50&#x4e2a;&#x9759;&#x6001;&#x5c0f;&#x7403;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"14,15"}},{"content":"<pre data-lines=\"18,48\"><code data-lines=\"18,48\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;</span>&#x6309;&#x94ae;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;canvas&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;500&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;300&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span>&#x5f53;&#x524d;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;canvas&#xff0c;&#x8bf7;&#x66f4;&#x6362;&#x6d4f;&#x89c8;&#x5668;&#x540e;&#x518d;&#x8bd5;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> canvas = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;canvas&apos;</span>);\n<span class=\"hljs-keyword\">var</span> H=<span class=\"hljs-number\">300</span>,W=<span class=\"hljs-number\">500</span>;\nbtn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-title function_\">getBalls</span>();\n}\n<span class=\"hljs-title function_\">getBalls</span>();\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getBalls</span>(<span class=\"hljs-params\"></span>){\n    canvas.<span class=\"hljs-property\">height</span> = H;\n    <span class=\"hljs-keyword\">if</span>(canvas.<span class=\"hljs-property\">getContext</span>){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">50</span>; i++){\n            <span class=\"hljs-keyword\">var</span> tempR = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempG = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempB = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*<span class=\"hljs-number\">255</span>);\n            cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;rgb(&apos;</span> + tempR + <span class=\"hljs-string\">&apos;,&apos;</span> + tempG + <span class=\"hljs-string\">&apos;,&apos;</span> + tempB + <span class=\"hljs-string\">&apos;)&apos;</span>;\n            <span class=\"hljs-keyword\">var</span> tempW = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*W);\n            <span class=\"hljs-keyword\">var</span> tempH = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*H);\n            <span class=\"hljs-keyword\">var</span> tempR = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*<span class=\"hljs-number\">50</span>);\n            cxt.<span class=\"hljs-title function_\">beginPath</span>();\n            cxt.<span class=\"hljs-title function_\">arc</span>(tempW,tempH,tempR,<span class=\"hljs-number\">0</span>,<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span>*<span class=\"hljs-number\">2</span>);\n            cxt.<span class=\"hljs-title function_\">fill</span>();\n        }\n    }    \n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"18,48"}}],"payload":{"tag":"h3","lines":"12,13"}},{"content":"&#x968f;&#x673a;&#x8fd0;&#x52a8;","children":[{"content":"<pre data-lines=\"55,56\"><code>&#x3000;&#x3000;&#x63a5;&#x7740;&#xff0c;&#x8fd9;50&#x4e2a;&#x5c0f;&#x7403;&#x505a;&#x968f;&#x673a;&#x8fd0;&#x52a8;&#xff0c;&#x9700;&#x8981;&#x914d;&#x5408;[&#x5b9a;&#x65f6;&#x5668;](http://www.cnblogs.com/xiaohuochai/p/5773183.html)&#x66f4;&#x65b0;&#x5c0f;&#x7403;&#x7684;&#x8fd0;&#x52a8;&#x72b6;&#x6001;&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x9700;&#x8981;&#x5bf9;&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8fdb;&#x884c;&#x6539;&#x5199;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,56"}},{"content":"<pre data-lines=\"59,130\"><code data-lines=\"59,130\">&lt;button <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;&#x66f4;&#x65b0;&lt;/button&gt;\n&lt;canvas <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;canvas&quot;</span> width=<span class=\"hljs-string\">&quot;500&quot;</span> height=<span class=\"hljs-string\">&quot;300&quot;</span> style=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;&#x5f53;&#x524d;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;canvas&#xff0c;&#x8bf7;&#x66f4;&#x6362;&#x6d4f;&#x89c8;&#x5668;&#x540e;&#x518d;&#x8bd5;&lt;/canvas&gt;\n&lt;<span class=\"hljs-variable language_\">script</span>&gt;\nbtn.onclick = <span class=\"hljs-keyword\">function</span>(){history.go();}\n<span class=\"hljs-keyword\">var</span> canvas = document.getElementById(<span class=\"hljs-string\">&apos;canvas&apos;</span>);\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x753b;&#x5e03;&#x5bbd;&#x9ad8;</span>\n<span class=\"hljs-keyword\">var</span> H=<span class=\"hljs-number\">300</span>,W=<span class=\"hljs-number\">500</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x5c0f;&#x7403;&#x4e2a;&#x6570;</span>\n<span class=\"hljs-keyword\">var</span> NUM = <span class=\"hljs-number\">50</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x5c0f;&#x7403;</span>\n<span class=\"hljs-keyword\">var</span> balls = [];\n<span class=\"hljs-keyword\">function</span> getBalls(){\n    <span class=\"hljs-keyword\">if</span>(canvas.getContext){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; NUM; i++){\n            <span class=\"hljs-keyword\">var</span> tempR = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempG = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempB = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempColor = <span class=\"hljs-string\">&apos;rgb(&apos;</span> + tempR + <span class=\"hljs-string\">&apos;,&apos;</span> + tempG + <span class=\"hljs-string\">&apos;,&apos;</span> + tempB + <span class=\"hljs-string\">&apos;)&apos;</span>;\n            <span class=\"hljs-keyword\">var</span> tempX = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*W);\n            <span class=\"hljs-keyword\">var</span> tempY = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*H);\n            <span class=\"hljs-keyword\">var</span> tempR = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">30</span>+<span class=\"hljs-number\">20</span>);\n            <span class=\"hljs-keyword\">var</span> tempBall = {\n                <span class=\"hljs-variable language_\">x</span>:tempX,\n                <span class=\"hljs-variable language_\">y</span>:tempY,\n                r:tempR,\n                stepX:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">-2</span>),\n                stepY:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">4</span> <span class=\"hljs-number\">-2</span>),\n                color:tempColor,\n                disX:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">-1</span>),\n                disY:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">3</span> <span class=\"hljs-number\">-1</span>)\n            };\n            balls.push(tempBall);\n        }\n    }    \n}\n<span class=\"hljs-keyword\">function</span> updateBalls(){\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; balls.length; i++){\n        balls[i].stepY += balls[i].disY;\n        balls[i].stepX += balls[i].disX;\n        balls[i].<span class=\"hljs-variable language_\">x</span> += balls[i].stepX;\n        balls[i].<span class=\"hljs-variable language_\">y</span> += balls[i].stepY;                 \n    }\n}\n\n<span class=\"hljs-keyword\">function</span> renderBalls(){\n    <span class=\"hljs-comment\">//&#x91cd;&#x7f6e;&#x753b;&#x5e03;&#x9ad8;&#x5ea6;&#xff0c;&#x8fbe;&#x5230;&#x6e05;&#x7a7a;&#x753b;&#x5e03;&#x7684;&#x6548;&#x679c;</span>\n    canvas.height = H;    \n    <span class=\"hljs-keyword\">if</span>(canvas.getContext){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; balls.length; i++){\n            cxt.beginPath();\n            cxt.arc(balls[i].<span class=\"hljs-variable language_\">x</span>,balls[i].<span class=\"hljs-variable language_\">y</span>,balls[i].r,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>*Math.PI);\n            cxt.fillStyle = balls[i].color;\n            cxt.closePath();\n            cxt.fill();   \n        }        \n    }\n\n}\ngetBalls();\nclearInterval(oTimer);\n<span class=\"hljs-keyword\">var</span> oTimer = setInterval(<span class=\"hljs-keyword\">function</span>(){\n    <span class=\"hljs-comment\">//&#x66f4;&#x65b0;&#x5c0f;&#x7403;&#x8fd0;&#x52a8;&#x72b6;&#x6001;</span>\n    updateBalls();\n    <span class=\"hljs-comment\">//&#x6e32;&#x67d3;&#x5c0f;&#x7403;</span>\n    renderBalls();\n},<span class=\"hljs-number\">50</span>);\n&lt;/<span class=\"hljs-variable language_\">script</span>&gt;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,130"}}],"payload":{"tag":"h3","lines":"53,54"}},{"content":"&#x78b0;&#x58c1;&#x68c0;&#x6d4b;","children":[{"content":"<pre data-lines=\"137,138\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#xff0c;&#x589e;&#x52a0;&#x5c0f;&#x7403;&#x7684;&#x78b0;&#x58c1;&#x68c0;&#x6d4b;&#x529f;&#x80fd;&#xff0c;&#x5f53;&#x5c0f;&#x7403;&#x78b0;&#x58c1;&#x65f6;&#xff0c;&#x53d8;&#x4e3a;&#x76f8;&#x53cd;&#x65b9;&#x5411;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"137,138"}},{"content":"<pre data-lines=\"141,165\"><code data-lines=\"141,165\">function bumpTest(ele){\n    //&#x5de6;&#x4fa7;\n    if(ele.x &lt;<span class=\"hljs-operator\">=</span> ele.r){\n        ele.x <span class=\"hljs-operator\">=</span> ele.r<span class=\"hljs-comment\">;</span>\n        ele.stepX <span class=\"hljs-operator\">=</span> -ele.stepX<span class=\"hljs-comment\">;</span>\n    }\n    //&#x53f3;&#x4fa7;\n    if(ele.x &gt;<span class=\"hljs-operator\">=</span> W - ele.r){\n        ele.x <span class=\"hljs-operator\">=</span> W - ele.r<span class=\"hljs-comment\">;</span>\n        ele.stepX <span class=\"hljs-operator\">=</span> -ele.stepX<span class=\"hljs-comment\">;</span>\n    }\n    //&#x4e0a;&#x4fa7;\n    if(ele.y &lt;<span class=\"hljs-operator\">=</span> ele.r){\n        ele.y <span class=\"hljs-operator\">=</span> ele.r<span class=\"hljs-comment\">;</span>\n        ele.stepY <span class=\"hljs-operator\">=</span> -ele.stepY<span class=\"hljs-comment\">;</span>\n    }\n    //&#x4e0b;&#x4fa7;\n    if(ele.y &gt;<span class=\"hljs-operator\">=</span> H - ele.r){\n        ele.y <span class=\"hljs-operator\">=</span> H - ele.r<span class=\"hljs-comment\">;</span>\n        ele.stepY <span class=\"hljs-operator\">=</span> -ele.stepY<span class=\"hljs-comment\">;</span>\n    }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"141,165"}},{"content":"<pre data-lines=\"170,260\"><code data-lines=\"170,260\">&lt;button <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;&#x66f4;&#x65b0;&lt;/button&gt;\n&lt;canvas <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;canvas&quot;</span> width=<span class=\"hljs-string\">&quot;500&quot;</span> height=<span class=\"hljs-string\">&quot;300&quot;</span> style=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;&#x5f53;&#x524d;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;canvas&#xff0c;&#x8bf7;&#x66f4;&#x6362;&#x6d4f;&#x89c8;&#x5668;&#x540e;&#x518d;&#x8bd5;&lt;/canvas&gt;\n&lt;<span class=\"hljs-variable language_\">script</span>&gt;\nbtn.onclick = <span class=\"hljs-keyword\">function</span>(){history.go();}\n<span class=\"hljs-keyword\">var</span> canvas = document.getElementById(<span class=\"hljs-string\">&apos;canvas&apos;</span>);\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x753b;&#x5e03;&#x5bbd;&#x9ad8;</span>\n<span class=\"hljs-keyword\">var</span> H=<span class=\"hljs-number\">300</span>,W=<span class=\"hljs-number\">500</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x5c0f;&#x7403;&#x4e2a;&#x6570;</span>\n<span class=\"hljs-keyword\">var</span> NUM = <span class=\"hljs-number\">30</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x5c0f;&#x7403;</span>\n<span class=\"hljs-keyword\">var</span> balls = [];\n<span class=\"hljs-keyword\">function</span> getBalls(){\n    <span class=\"hljs-keyword\">if</span>(canvas.getContext){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; NUM; i++){\n            <span class=\"hljs-keyword\">var</span> tempR = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempG = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempB = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempColor = <span class=\"hljs-string\">&apos;rgb(&apos;</span> + tempR + <span class=\"hljs-string\">&apos;,&apos;</span> + tempG + <span class=\"hljs-string\">&apos;,&apos;</span> + tempB + <span class=\"hljs-string\">&apos;)&apos;</span>;\n            <span class=\"hljs-keyword\">var</span> tempR = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">30</span>+<span class=\"hljs-number\">20</span>);\n            <span class=\"hljs-keyword\">var</span> tempX = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*(W-tempR) + tempR);\n            <span class=\"hljs-keyword\">var</span> tempY = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*(H-tempR) + tempR);\n            \n            <span class=\"hljs-keyword\">var</span> tempBall = {\n                <span class=\"hljs-variable language_\">x</span>:tempX,\n                <span class=\"hljs-variable language_\">y</span>:tempY,\n                r:tempR,\n                stepX:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">-6</span>),\n                stepY:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">13</span> <span class=\"hljs-number\">-6</span>),\n                color:tempColor\n            };\n            balls.push(tempBall);\n        }\n    }    \n}\n<span class=\"hljs-keyword\">function</span> updateBalls(){\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; balls.length; i++){\n        balls[i].<span class=\"hljs-variable language_\">x</span> += balls[i].stepX;\n        balls[i].<span class=\"hljs-variable language_\">y</span> += balls[i].stepY; \n        bumpTest(balls[i]);\n    }\n}\n<span class=\"hljs-keyword\">function</span> bumpTest(ele){\n    <span class=\"hljs-comment\">//&#x5de6;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">x</span> &lt;= ele.r){\n        ele.<span class=\"hljs-variable language_\">x</span> = ele.r;\n        ele.stepX = -ele.stepX;\n    }\n    <span class=\"hljs-comment\">//&#x53f3;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">x</span> &gt;= W - ele.r){\n        ele.<span class=\"hljs-variable language_\">x</span> = W - ele.r;\n        ele.stepX = -ele.stepX;\n    }\n    <span class=\"hljs-comment\">//&#x4e0a;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">y</span> &lt;= ele.r){\n        ele.<span class=\"hljs-variable language_\">y</span> = ele.r;\n        ele.stepY = -ele.stepY;\n    }\n    <span class=\"hljs-comment\">//&#x4e0b;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">y</span> &gt;= H - ele.r){\n        ele.<span class=\"hljs-variable language_\">y</span> = H - ele.r;\n        ele.stepY = -ele.stepY;\n    }\n}\n<span class=\"hljs-keyword\">function</span> renderBalls(){\n    <span class=\"hljs-comment\">//&#x91cd;&#x7f6e;&#x753b;&#x5e03;&#x9ad8;&#x5ea6;&#xff0c;&#x8fbe;&#x5230;&#x6e05;&#x7a7a;&#x753b;&#x5e03;&#x7684;&#x6548;&#x679c;</span>\n    canvas.height = H;    \n    <span class=\"hljs-keyword\">if</span>(canvas.getContext){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; balls.length; i++){\n            cxt.beginPath();\n            cxt.arc(balls[i].<span class=\"hljs-variable language_\">x</span>,balls[i].<span class=\"hljs-variable language_\">y</span>,balls[i].r,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>*Math.PI);\n            cxt.fillStyle = balls[i].color;\n            cxt.closePath();\n            cxt.fill();   \n        }        \n    }\n\n}\ngetBalls();\nclearInterval(oTimer);\n<span class=\"hljs-keyword\">var</span> oTimer = setInterval(<span class=\"hljs-keyword\">function</span>(){\n    <span class=\"hljs-comment\">//&#x66f4;&#x65b0;&#x5c0f;&#x7403;&#x8fd0;&#x52a8;&#x72b6;&#x6001;</span>\n    updateBalls();\n    <span class=\"hljs-comment\">//&#x6e32;&#x67d3;&#x5c0f;&#x7403;</span>\n    renderBalls();\n},<span class=\"hljs-number\">50</span>);\n&lt;/<span class=\"hljs-variable language_\">script</span>&gt;    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"170,260"}}],"payload":{"tag":"h3","lines":"135,136"}},{"content":"&#x91cd;&#x53e0;&#x6548;&#x679c;","children":[{"content":"<pre data-lines=\"267,268\"><code>&#x3000;&#x3000;canvas&#x7684;&#x5408;&#x6210;&#x5c5e;&#x6027;globalCompositeOperation&#x8868;&#x793a;&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x600e;&#x6837;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x7ed3;&#x5408;&#xff0c;&#x5c5e;&#x6027;&#x503c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x53ef;&#x80fd;&#x503c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"267,268"}},{"content":"<pre data-lines=\"271,284\"><code data-lines=\"271,284\">source-over(&#x9ed8;&#x8ba4;)&#xff1a;&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4f4d;&#x4e8e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0a;&#x65b9;\n<span class=\"hljs-section\">source-in:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x91cd;&#x53e0;&#x7684;&#x90e8;&#x5206;&#x53ef;&#x89c1;&#xff0c;&#x4e24;&#x8005;&#x5176;&#x4ed6;&#x90e8;&#x5206;&#x5b8c;&#x5168;&#x900f;&#x660e;</span>\n<span class=\"hljs-section\">source-out:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0d;&#x91cd;&#x53e0;&#x7684;&#x90e8;&#x5206;&#x53ef;&#x89c1;&#xff0c;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x5b8c;&#x5168;&#x900f;&#x660e;</span>\n<span class=\"hljs-section\">source-atop:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x91cd;&#x53e0;&#x7684;&#x90e8;&#x5206;&#x53ef;&#x89c1;&#xff0c;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0d;&#x53d7;&#x5f71;&#x54cd;</span>\n<span class=\"hljs-section\">destination-over:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4f4d;&#x4e8e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0b;&#x65b9;&#xff0c;&#x53ea;&#x6709;&#x4e4b;&#x524d;&#x900f;&#x660e;&#x50cf;&#x7d20;&#x4e0b;&#x7684;&#x90e8;&#x5206;&#x624d;&#x53ef;&#x89c1;</span>\n<span class=\"hljs-section\">destination-in:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4f4d;&#x4e8e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0b;&#x65b9;&#xff0c;&#x4e24;&#x8005;&#x4e0d;&#x91cd;&#x53e0;&#x7684;&#x90e8;&#x5206;&#x5b8c;&#x5168;&#x900f;&#x660e;</span>\n<span class=\"hljs-section\">destination-out:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x64e6;&#x9664;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x91cd;&#x53e0;&#x7684;&#x90e8;&#x5206;</span>\n<span class=\"hljs-section\">destination-atop:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4f4d;&#x4e8e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0b;&#x65b9;&#xff0c;&#x5728;&#x4e24;&#x8005;&#x4e0d;&#x91cd;&#x53e0;&#x7684;&#x5730;&#x65b9;&#xff0c;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4f1a;&#x53d8;&#x900f;&#x660e;</span>\n<span class=\"hljs-section\">lighter:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x91cd;&#x53e0;&#x90e8;&#x5206;&#x7684;&#x503c;&#x76f8;&#x52a0;&#xff0c;&#x4f7f;&#x8be5;&#x90e8;&#x5206;&#x53d8;&#x4eae;</span>\n<span class=\"hljs-section\">copy:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x5b8c;&#x5168;&#x66ff;&#x4ee3;&#x4e0e;&#x4e4b;&#x91cd;&#x53e0;&#x7684;&#x5148;&#x7ed8;&#x5236;&#x56fe;&#x5f62; </span>\n<span class=\"hljs-section\">xor:&#x540e;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x4e0e;&#x5148;&#x7ed8;&#x5236;&#x7684;&#x56fe;&#x5f62;&#x91cd;&#x53e0;&#x7684;&#x90e8;&#x5206;&#x6267;&#x884c;&quot;&#x5f02;&#x6216;&quot;&#x64cd;&#x4f5c;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"271,284"}},{"content":"<pre data-lines=\"289,290\"><code>&#x3000;&#x3000;&#x589e;&#x52a0;&#x5c0f;&#x7403;&#x7684;&#x91cd;&#x53e0;&#x6548;&#x679c;&#x4e3a;&apos;xor&apos;&#xff0c;&#x5373;&#x4e3a;&#x6700;&#x7ec8;&#x7684;&#x6548;&#x679c;&#x5c55;&#x793a; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"289,290"}},{"content":"<pre data-lines=\"293,384\"><code data-lines=\"293,384\">&lt;button <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;&#x53d8;&#x6362;&lt;/button&gt;\n&lt;canvas <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;canvas&quot;</span> width=<span class=\"hljs-string\">&quot;500&quot;</span> height=<span class=\"hljs-string\">&quot;300&quot;</span> style=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;&#x5f53;&#x524d;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;canvas&#xff0c;&#x8bf7;&#x66f4;&#x6362;&#x6d4f;&#x89c8;&#x5668;&#x540e;&#x518d;&#x8bd5;&lt;/canvas&gt;\n&lt;<span class=\"hljs-variable language_\">script</span>&gt;\nbtn.onclick = <span class=\"hljs-keyword\">function</span>(){history.go();}\n<span class=\"hljs-keyword\">var</span> canvas = document.getElementById(<span class=\"hljs-string\">&apos;canvas&apos;</span>);\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x753b;&#x5e03;&#x5bbd;&#x9ad8;</span>\n<span class=\"hljs-keyword\">var</span> H=<span class=\"hljs-number\">300</span>,W=<span class=\"hljs-number\">500</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x5c0f;&#x7403;&#x4e2a;&#x6570;</span>\n<span class=\"hljs-keyword\">var</span> NUM = <span class=\"hljs-number\">30</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x5c0f;&#x7403;</span>\n<span class=\"hljs-keyword\">var</span> balls = [];\n<span class=\"hljs-keyword\">function</span> getBalls(){\n    <span class=\"hljs-keyword\">if</span>(canvas.getContext){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; NUM; i++){\n            <span class=\"hljs-keyword\">var</span> tempR = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempG = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempB = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">255</span>);\n            <span class=\"hljs-keyword\">var</span> tempColor = <span class=\"hljs-string\">&apos;rgb(&apos;</span> + tempR + <span class=\"hljs-string\">&apos;,&apos;</span> + tempG + <span class=\"hljs-string\">&apos;,&apos;</span> + tempB + <span class=\"hljs-string\">&apos;)&apos;</span>;\n            <span class=\"hljs-keyword\">var</span> tempR = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*<span class=\"hljs-number\">30</span>+<span class=\"hljs-number\">20</span>);\n            <span class=\"hljs-keyword\">var</span> tempX = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*(W-tempR) + tempR);\n            <span class=\"hljs-keyword\">var</span> tempY = Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*(H-tempR) + tempR);\n            \n            <span class=\"hljs-keyword\">var</span> tempBall = {\n                <span class=\"hljs-variable language_\">x</span>:tempX,\n                <span class=\"hljs-variable language_\">y</span>:tempY,\n                r:tempR,\n                stepX:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">21</span> <span class=\"hljs-number\">-10</span>),\n                stepY:Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>() * <span class=\"hljs-number\">21</span> <span class=\"hljs-number\">-10</span>),\n                color:tempColor\n            };\n            balls.push(tempBall);\n        }\n    }    \n}\n<span class=\"hljs-keyword\">function</span> updateBalls(){\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; balls.length; i++){\n        balls[i].<span class=\"hljs-variable language_\">x</span> += balls[i].stepX;\n        balls[i].<span class=\"hljs-variable language_\">y</span> += balls[i].stepY; \n        bumpTest(balls[i]);\n    }\n}\n<span class=\"hljs-keyword\">function</span> bumpTest(ele){\n    <span class=\"hljs-comment\">//&#x5de6;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">x</span> &lt;= ele.r){\n        ele.<span class=\"hljs-variable language_\">x</span> = ele.r;\n        ele.stepX = -ele.stepX;\n    }\n    <span class=\"hljs-comment\">//&#x53f3;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">x</span> &gt;= W - ele.r){\n        ele.<span class=\"hljs-variable language_\">x</span> = W - ele.r;\n        ele.stepX = -ele.stepX;\n    }\n    <span class=\"hljs-comment\">//&#x4e0a;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">y</span> &lt;= ele.r){\n        ele.<span class=\"hljs-variable language_\">y</span> = ele.r;\n        ele.stepY = -ele.stepY;\n    }\n    <span class=\"hljs-comment\">//&#x4e0b;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-variable language_\">y</span> &gt;= H - ele.r){\n        ele.<span class=\"hljs-variable language_\">y</span> = H - ele.r;\n        ele.stepY = -ele.stepY;\n    }\n}\n<span class=\"hljs-keyword\">function</span> renderBalls(){\n    <span class=\"hljs-comment\">//&#x91cd;&#x7f6e;&#x753b;&#x5e03;&#x9ad8;&#x5ea6;&#xff0c;&#x8fbe;&#x5230;&#x6e05;&#x7a7a;&#x753b;&#x5e03;&#x7684;&#x6548;&#x679c;</span>\n    canvas.height = H;    \n    <span class=\"hljs-keyword\">if</span>(canvas.getContext){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; balls.length; i++){\n            cxt.beginPath();\n            cxt.arc(balls[i].<span class=\"hljs-variable language_\">x</span>,balls[i].<span class=\"hljs-variable language_\">y</span>,balls[i].r,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>*Math.PI);\n            cxt.fillStyle = balls[i].color;\n            cxt.globalCompositeOperation = <span class=\"hljs-string\">&apos;xor&apos;</span>;\n            cxt.closePath();\n            cxt.fill();   \n        }        \n    }\n\n}\ngetBalls();\nclearInterval(oTimer);\n<span class=\"hljs-keyword\">var</span> oTimer = setInterval(<span class=\"hljs-keyword\">function</span>(){\n    <span class=\"hljs-comment\">//&#x66f4;&#x65b0;&#x5c0f;&#x7403;&#x8fd0;&#x52a8;&#x72b6;&#x6001;</span>\n    updateBalls();\n    <span class=\"hljs-comment\">//&#x6e32;&#x67d3;&#x5c0f;&#x7403;</span>\n    renderBalls();\n},<span class=\"hljs-number\">50</span>);\n&lt;/<span class=\"hljs-variable language_\">script</span>&gt;    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"293,384"}},{"content":"<pre data-lines=\"387,388\"><code>[&#x6e90;&#x7801;&#x67e5;&#x770b;](http://runjs.cn/code/8itjl6qz)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"387,388"}}],"payload":{"tag":"h3","lines":"265,266"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
