<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"https://www.cnblogs.com/xiaohuochai/p/7452898.html\">canvas&#x7c92;&#x5b50;&#x7cfb;&#x7edf;&#x7684;&#x6784;&#x5efa;</a><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoklEQVQ4T+2T4Q2CMBCFv27CBjgCG+gIjAAbOAIjOIJs4Ai6gRvIBpjXXCOp19T/8pJLoTneXcj3Ah91wAV4bu68xwXoAZ2EzEAmE9AWTB6AelRDyaAx9zgh0wE4ATczcTdIE7wl0oe7wX/8RMHigfQTB3fDdM1IEvYyONdIVEOSqDwCY2Z2NaS/UNbqMSQmvauUPlfbNKpBSdTUVyXSs/XyBlRCNBG20I28AAAAAElFTkSuQmCC\" alt=\"img\">","children":[{"content":"&#x524d;&#x9762;&#x7684;&#x8bdd;","children":[{"content":"<pre data-lines=\"4,5\"><code>&#x3000;&#x3000;&#x672c;&#x6587;&#x5c06;&#x4ece;&#x6700;&#x57fa;&#x672c;&#x7684;imageData&#x5bf9;&#x8c61;&#x7684;&#x7406;&#x8bba;&#x77e5;&#x8bc6;&#x8bf4;&#x5f00;&#x53bb;&#xff0c;&#x8be6;&#x7ec6;&#x4ecb;&#x7ecd;canvas&#x7c92;&#x5b50;&#x7cfb;&#x7edf;&#x7684;&#x6784;&#x5efa;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,5"}}],"payload":{"tag":"h3","lines":"2,3"}},{"content":"&#x6548;&#x679c;&#x6f14;&#x793a;","children":[{"content":"<pre data-lines=\"10,11\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#x662f;&#x5b9e;&#x4f8b;&#x6548;&#x679c;&#x6f14;&#x793a;&#xff0c;&#x535a;&#x6587;&#x7ed3;&#x5c3e;&#x6709;&#x5168;&#x90e8;&#x6e90;&#x7801;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"10,11"}}],"payload":{"tag":"h3","lines":"8,9"}},{"content":"imageData","children":[{"content":"<pre data-lines=\"18,25\"><code>&#x3000;&#x3000;&#x5173;&#x4e8e;&#x56fe;&#x50cf;&#x6570;&#x636e;imageData&#x5171;&#x6709;3&#x4e2a;&#x65b9;&#x6cd5;&#xff0c;&#x5305;&#x62ec;getImageData()&#x3001;putImageData()&#x3001;createImageData()\n\n&#x3010;getImageData()&#x3011;\n\n&#x3000;&#x3000;2D&#x4e0a;&#x4e0b;&#x6587;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;getImageData()&#x53d6;&#x5f97;&#x539f;&#x59cb;&#x56fe;&#x50cf;&#x6570;&#x636e;&#x3002;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x63a5;&#x6536;4&#x4e2a;&#x53c2;&#x6570;&#xff1a;&#x753b;&#x9762;&#x533a;&#x57df;&#x7684;x&#x548c;y&#x5750;&#x6807;&#x4ee5;&#x53ca;&#x8be5;&#x533a;&#x57df;&#x7684;&#x50cf;&#x7d20;&#x5bbd;&#x5ea6;&#x548c;&#x9ad8;&#x5ea6;\n\n&#x3000;&#x3000;&#x4f8b;&#x5982;&#xff0c;&#x8981;&#x53d6;&#x5f97;&#x5de6;&#x4e0a;&#x89d2;&#x5750;&#x6807;&#x4e3a;(10,5)&#x3001;&#x5927;&#x5c0f;&#x4e3a;50*50&#x50cf;&#x7d20;&#x7684;&#x533a;&#x57df;&#x7684;&#x56fe;&#x50cf;&#x6570;&#x636e;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x4ee5;&#x4e0b;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"18,25"}},{"content":"<pre data-lines=\"26,29\"><code data-lines=\"26,29\"><span class=\"hljs-attribute\">var</span> imageData = context.getImageData(<span class=\"hljs-number\">10</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">50</span>,<span class=\"hljs-number\">50</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"26,29"}},{"content":"<pre data-lines=\"30,39\"><code>&#x3000;&#x3000;&#x8fd4;&#x56de;&#x7684;&#x5bf9;&#x8c61;&#x662f;ImageData&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x6bcf;&#x4e2a;ImageData&#x5bf9;&#x8c61;&#x6709;3&#x4e2a;&#x5c5e;&#x6027;&#xff1a;width\\height\\data\n\n&#x3000;&#x3000;1&#x3001;width&#xff1a;&#x8868;&#x793a;imageData&#x5bf9;&#x89d2;&#x7684;&#x5bbd;&#x5ea6;\n\n&#x3000;&#x3000;2&#x3001;height&#xff1a;&#x8868;&#x793a;imageData&#x5bf9;&#x8c61;&#x7684;&#x9ad8;&#x5ea6;\n\n&#x3000;&#x3000;3&#x3001;data&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x4fdd;&#x5b58;&#x7740;&#x56fe;&#x50cf;&#x4e2d;&#x6bcf;&#x4e00;&#x4e2a;&#x50cf;&#x7d20;&#x7684;&#x6570;&#x636e;&#x3002;&#x5728;data&#x6570;&#x7ec4;&#x4e2d;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;&#x50cf;&#x7d20;&#x7528;4&#x4e2a;&#x5143;&#x7d20;&#x6765;&#x4fdd;&#x5b58;&#xff0c;&#x5206;&#x522b;&#x8868;&#x793a;red&#x3001;green&#x3001;blue&#x3001;&#x900f;&#x660e;&#x5ea6;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x56fe;&#x50cf;&#x4e2d;&#x6709;&#x591a;&#x5c11;&#x50cf;&#x7d20;&#xff0c;data&#x7684;&#x957f;&#x5ea6;&#x5c31;&#x7b49;&#x4e8e;&#x50cf;&#x7d20;&#x4e2a;&#x6570;&#x4e58;&#x4ee5;4\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"30,39"}},{"content":"<pre data-lines=\"42,50\"><code data-lines=\"42,50\"><span class=\"hljs-comment\">//&#x7b2c;&#x4e00;&#x4e2a;&#x50cf;&#x7d20;&#x5982;&#x4e0b;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-keyword\">data</span> = imageData.<span class=\"hljs-keyword\">data</span>;\n<span class=\"hljs-keyword\">var</span> red = <span class=\"hljs-keyword\">data</span>[<span class=\"hljs-number\">0</span>];\n<span class=\"hljs-keyword\">var</span> green = <span class=\"hljs-keyword\">data</span>[<span class=\"hljs-number\">1</span>]; \n<span class=\"hljs-keyword\">var</span> blue = <span class=\"hljs-keyword\">data</span>[<span class=\"hljs-number\">2</span>];\n<span class=\"hljs-keyword\">var</span> alpha = <span class=\"hljs-keyword\">data</span>[<span class=\"hljs-number\">3</span>];\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"42,50"}},{"content":"<pre data-lines=\"53,60\"><code>&#x3000;&#x3000;&#x6570;&#x7ec4;&#x4e2d;&#x6bcf;&#x4e2a;&#x5143;&#x7d20;&#x7684;&#x503c;&#x662f;&#x5728;0-255&#x4e4b;&#x95f4;&#xff0c;&#x80fd;&#x591f;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;&#x5230;&#x539f;&#x59cb;&#x56fe;&#x50cf;&#x6570;&#x636e;&#xff0c;&#x5c31;&#x80fd;&#x591f;&#x4ee5;&#x5404;&#x79cd;&#x65b9;&#x5f0f;&#x6765;&#x64cd;&#x4f5c;&#x8fd9;&#x4e9b;&#x6570;&#x636e;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x5982;&#x679c;&#x8981;&#x4f7f;&#x7528;getImageData()&#x83b7;&#x53d6;&#x7684;canvas&#x4e2d;&#x5305;&#x542b;drawImage()&#x65b9;&#x6cd5;&#xff0c;&#x5219;&#x8be5;&#x65b9;&#x6cd5;&#x4e2d;&#x7684;URL&#x4e0d;&#x80fd;&#x8de8;&#x57df;\n\n&#x3010;createImageData()&#x3011;\n\n&#x3000;&#x3000;createImageData(width,height)&#x65b9;&#x6cd5;&#x521b;&#x5efa;&#x65b0;&#x7684;&#x7a7a;&#x767d;ImageData&#x5bf9;&#x8c61;&#x3002;&#x65b0;&#x5bf9;&#x8c61;&#x7684;&#x9ed8;&#x8ba4;&#x50cf;&#x7d20;&#x503c; transparent black&#xff0c;&#x76f8;&#x5f53;&#x4e8e;rgba(0,0,0,0)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"53,60"}},{"content":"<pre data-lines=\"61,64\"><code data-lines=\"61,64\"><span class=\"hljs-attribute\">var</span> imgData = context.createImageData(<span class=\"hljs-number\">100</span>,<span class=\"hljs-number\">100</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"61,64"}},{"content":"<pre data-lines=\"65,68\"><code>&#x3010;putImageData()&#x3011;\n\n&#x3000;&#x3000;putImageData()&#x65b9;&#x6cd5;&#x5c06;&#x56fe;&#x50cf;&#x6570;&#x636e;&#x4ece;&#x6307;&#x5b9a;&#x7684;ImageData&#x5bf9;&#x8c61;&#x653e;&#x56de;&#x753b;&#x5e03;&#x4e0a;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x5171;&#x6709;&#x4ee5;&#x4e0b;&#x53c2;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"65,68"}},{"content":"<pre data-lines=\"71,80\"><code data-lines=\"71,80\">imgData&#xff1a;&#x8981;&#x653e;&#x56de;&#x753b;&#x5e03;&#x7684;ImageData&#x5bf9;&#x8c61;(&#x5fc5;&#x987b;)\n<span class=\"hljs-attribute\">x</span>&#xff1a;imageData&#x5bf9;&#x8c61;&#x7684;&#x5de6;&#x4e0a;&#x89d2;&#x7684;<span class=\"hljs-attribute\">x</span>&#x5750;&#x6807;(&#x5fc5;&#x987b;)\n<span class=\"hljs-attribute\">y</span>&#xff1a;imageData&#x5bf9;&#x8c61;&#x7684;&#x5de6;&#x4e0a;&#x89d2;&#x7684;<span class=\"hljs-attribute\">y</span>&#x5750;&#x6807;(&#x5fc5;&#x987b;)\ndirtyX&#xff1a;&#x5728;&#x753b;&#x5e03;&#x4e0a;&#x653e;&#x7f6e;&#x56fe;&#x50cf;&#x7684;&#x6c34;&#x5e73;&#x4f4d;&#x7f6e;(&#x53ef;&#x9009;)\ndirtyY&#xff1a;&#x5728;&#x753b;&#x5e03;&#x4e0a;&#x653e;&#x7f6e;&#x56fe;&#x50cf;&#x7684;&#x5782;&#x76f4;&#x4f4d;&#x7f6e;(&#x53ef;&#x9009;)\ndirtyWidth&#xff1a;&#x5728;&#x753b;&#x5e03;&#x4e0a;&#x7ed8;&#x5236;&#x56fe;&#x50cf;&#x6240;&#x4f7f;&#x7528;&#x7684;&#x5bbd;&#x5ea6;(&#x53ef;&#x9009;)\ndirtyHeight&#xff1a;&#x5728;&#x753b;&#x5e03;&#x4e0a;&#x7ed8;&#x5236;&#x56fe;&#x50cf;&#x6240;&#x4f7f;&#x7528;&#x7684;&#x9ad8;&#x5ea6;(&#x53ef;&#x9009;)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"71,80"}},{"content":"<pre data-lines=\"83,84\"><code>&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x53c2;&#x6570;3&#x5230;7&#x8981;&#x4e48;&#x90fd;&#x6ca1;&#x6709;&#xff0c;&#x8981;&#x4e48;&#x90fd;&#x5b58;&#x5728;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"83,84"}},{"content":"<pre data-lines=\"85,89\"><code data-lines=\"85,89\"><span class=\"hljs-attribute\">context</span>.putImageData(imgData,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);    \n<span class=\"hljs-attribute\">context</span>.putImageData(imgData,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">50</span>,<span class=\"hljs-number\">50</span>,<span class=\"hljs-number\">200</span>,<span class=\"hljs-number\">200</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"85,89"}}],"payload":{"tag":"h3","lines":"16,17"}},{"content":"&#x7c92;&#x5b50;&#x5199;&#x5165;","children":[{"content":"<pre data-lines=\"94,99\"><code>&#x3000;&#x3000;&#x7c92;&#x5b50;&#xff0c;&#x6307;&#x56fe;&#x50cf;&#x6570;&#x636e;imageData&#x4e2d;&#x7684;&#x6bcf;&#x4e00;&#x4e2a;&#x50cf;&#x7d20;&#x70b9;&#x3002;&#x4e0b;&#x9762;&#x4ee5;&#x4e00;&#x4e2a;&#x7b80;&#x6613;&#x5b9e;&#x4f8b;&#x6765;&#x8bf4;&#x660e;&#x5b8c;&#x5168;&#x5199;&#x5165;&#x4e0e;&#x7c92;&#x5b50;&#x5199;&#x5165;\n\n&#x3010;&#x5b8c;&#x5168;&#x5199;&#x5165;&#x3011;\n\n&#x3000;&#x3000;200*200&#x7684;canvas1&#x4e2d;&#x5b58;&#x5728;&#x6587;&#x5b57;&apos;&#x5c0f;&#x706b;&#x67f4;&apos;&#xff0c;&#x5e76;&#x5c06;canvas1&#x6574;&#x4e2a;&#x4f5c;&#x4e3a;&#x56fe;&#x50cf;&#x6570;&#x636e;&#x5199;&#x5165;&#x540c;&#x6837;&#x5c3a;&#x5bf8;&#x7684;canvas2&#x4e2d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"94,99"}},{"content":"<pre data-lines=\"102,128\"><code data-lines=\"102,128\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing2&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">var</span> drawing2 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing2&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> cxt2 = drawing2.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = drawing2.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = drawing2.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  <span class=\"hljs-comment\">//&#x5199;&#x5165;drawing2&#x4e2d; </span>\n  cxt2.<span class=\"hljs-title function_\">putImageData</span>(imageData,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"102,128"}},{"content":"<pre data-lines=\"133,136\"><code>&#x3010;&#x7c92;&#x5b50;&#x5199;&#x5165;&#x3011;\n\n&#x3000;&#x3000;&#x5bf9;&#x4e8e;&#x5b8c;&#x5168;&#x5199;&#x5165;&#x800c;&#x8a00;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x53ea;&#x662f;&#x7b80;&#x5355;&#x7684;&#x590d;&#x5236;&#x7c98;&#x8d34;&#xff0c;&#x5982;&#x679c;&#x8981;&#x5bf9;&#x6bcf;&#x4e2a;&#x50cf;&#x7d20;&#x70b9;&#x8fdb;&#x884c;&#x7cbe;&#x7ec6;&#x5730;&#x63a7;&#x5236;&#xff0c;&#x5219;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x7c92;&#x5b50;&#x5199;&#x5165;&#x3002;canvas1&#x4e2d;&#x5b58;&#x5728;&#x7740;&#x5927;&#x91cf;&#x7684;&#x7a7a;&#x767d;&#x533a;&#x57df;&#xff0c;&#x53ea;&#x6709;&apos;&#x5c0f;&#x706b;&#x67f4;&apos;&#x8fd9;&#x4e09;&#x4e2a;&#x5b57;&#x7684;&#x533a;&#x57df;&#x662f;&#x6709;&#x6548;&#x7684;&#x3002;&#x4e8e;&#x662f;&#xff0c;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x56fe;&#x50cf;&#x6570;&#x636e;imageData&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;&#x5bf9;&#x7c92;&#x5b50;&#x8fdb;&#x884c;&#x7b5b;&#x9009;&#xff0c;&#x53ea;&#x7b5b;&#x9009;&#x51fa;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;&#x7c92;&#x5b50;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"133,136"}},{"content":"<pre data-lines=\"139,192\"><code data-lines=\"139,192\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing2&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">var</span> drawing2 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing2&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> cxt2 = drawing2.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = drawing2.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = drawing2.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  <span class=\"hljs-comment\">//&#x5199;&#x5165;drawing2&#x4e2d; </span>\n  cxt2.<span class=\"hljs-title function_\">putImageData</span>(<span class=\"hljs-title function_\">setData</span>(imageData),<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i++){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j++){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n        }\n      }\n    }\n    <span class=\"hljs-comment\">//40000 2336</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(i*j,dots.<span class=\"hljs-property\">length</span>);\n    <span class=\"hljs-comment\">//&#x65b0;&#x5efa;&#x4e00;&#x4e2a;imageData&#xff0c;&#x5e76;&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> oNewImage = cxt.<span class=\"hljs-title function_\">createImageData</span>(W,H);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dots.<span class=\"hljs-property\">length</span>; i++){\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">0</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">0</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">1</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">1</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">2</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">2</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">3</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">3</span>];\n    }\n    <span class=\"hljs-keyword\">return</span> oNewImage;\n  }\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"139,192"}},{"content":"<pre data-lines=\"195,196\"><code>&#x3000;&#x3000;&#x867d;&#x7136;&#x7ed3;&#x679c;&#x770b;&#x4e0a;&#x53bb;&#x76f8;&#x540c;&#xff0c;&#x4f46;canvas2&#x53ea;&#x4f7f;&#x7528;&#x4e86;canvas1&#x4e2d;40000&#x4e2a;&#x7c92;&#x5b50;&#x4e2d;&#x7684;2336&#x4e2a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"195,196"}}],"payload":{"tag":"h3","lines":"92,93"}},{"content":"&#x7c92;&#x5b50;&#x7b5b;&#x9009;","children":[{"content":"<pre data-lines=\"203,208\"><code>&#x3000;&#x3000;&#x5f53;&#x7c92;&#x5b50;&#x5b8c;&#x5168;&#x5199;&#x5165;&#x65f6;&#xff0c;&#x4e0e;canvas&#x590d;&#x5236;&#x7c98;&#x8d34;&#x7684;&#x6548;&#x679c;&#x76f8;&#x540c;&#x3002;&#x800c;&#x5f53;&#x7c92;&#x5b50;&#x6709;&#x6240;&#x7b5b;&#x9009;&#x65f6;&#xff0c;&#x5219;&#x4f1a;&#x51fa;&#x73b0;&#x4e00;&#x4e9b;&#x5947;&#x5999;&#x7684;&#x6548;&#x679c;\n\n&#x3010;&#x6309;&#x5e8f;&#x7b5b;&#x9009;&#x3011;\n\n&#x3000;&#x3000;&#x7531;&#x4e8e;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#x65f6;&#xff0c;&#x4f7f;&#x7528;&#x7684;&#x662f;&#x5bbd;&#x5ea6;&#x503c;*&#x9ad8;&#x5ea6;&#x503c;&#x7684;&#x53cc;&#x91cd;&#x5faa;&#x73af;&#xff0c;&#x4e14;&#x90fd;&#x4ee5;&#x52a0;1&#x7684;&#x5f62;&#x5f0f;&#x9012;&#x589e;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x662f;&#x52a0;1&#xff0c;&#x800c;&#x662f;&#x52a0;n&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x6309;&#x5e8f;&#x7b5b;&#x9009;&#x7684;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"203,208"}},{"content":"<pre data-lines=\"211,278\"><code data-lines=\"211,278\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing2&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;con&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>4<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> oCon = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;con&apos;</span>);\noCon.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>){\n  e = e || event;\n  <span class=\"hljs-keyword\">var</span> tempN = e.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">innerHTML</span>;\n  <span class=\"hljs-keyword\">if</span>(tempN){\n    cxt2.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n    cxt2.<span class=\"hljs-title function_\">putImageData</span>(<span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-title class_\">Number</span>(tempN)),<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n  }\n}\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">var</span> drawing2 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing2&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> cxt2 = drawing2.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = drawing2.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = drawing2.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  <span class=\"hljs-comment\">//&#x5199;&#x5165;drawing2&#x4e2d; </span>\n  cxt2.<span class=\"hljs-title function_\">putImageData</span>(<span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>),<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n        }\n      }\n    }\n    <span class=\"hljs-comment\">//&#x65b0;&#x5efa;&#x4e00;&#x4e2a;imageData&#xff0c;&#x5e76;&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> oNewImage = cxt.<span class=\"hljs-title function_\">createImageData</span>(W,H);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dots.<span class=\"hljs-property\">length</span>; i++){\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">0</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">0</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">1</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">1</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">2</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">2</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">3</span>] = imageData.<span class=\"hljs-property\">data</span>[dots[i]+<span class=\"hljs-number\">3</span>];\n    }\n    <span class=\"hljs-keyword\">return</span> oNewImage;\n  }\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"211,278"}},{"content":"<pre data-lines=\"281,288\"><code>&#x3000;&#x3000;&#x70b9;&#x51fb;&#x4e0b;&#x9762;&#x7684;&#x4e0d;&#x540c;&#x6309;&#x94ae;&#xff0c;&#x53ef;&#x4ee5;&#x5f97;&#x5230;&#x4e0d;&#x540c;&#x7a0b;&#x5ea6;&#x7684;&#x7c92;&#x5b50;&#x7b5b;&#x9009;\n\n\n\n&#x3010;&#x968f;&#x673a;&#x7b5b;&#x9009;&#x3011;\n\n&#x3000;&#x3000;&#x9664;&#x4e86;&#x4f7f;&#x7528;&#x6309;&#x5e8f;&#x7b5b;&#x9009;&#xff0c;&#x8fd8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x968f;&#x673a;&#x7b5b;&#x9009;&#x3002; &#x901a;&#x8fc7;&#x53cc;&#x91cd;&#x5faa;&#x73af;&#x5f97;&#x5230;&#x7684;&#x7c92;&#x5b50;&#x7684;&#x4f4d;&#x7f6e;&#x4fe1;&#x606f;&#xff0c;&#x653e;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;&#x3002;&#x901a;&#x8fc7;splice()&#x65b9;&#x6cd5;&#x8fdb;&#x884c;&#x7b5b;&#x9009;&#xff0c;&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x4f4d;&#x7f6e;&#x4fe1;&#x606f;&#x653e;&#x5230;&#x65b0;&#x5efa;&#x7684;newDots&#x6570;&#x7ec4;&#x4e2d;&#xff0c;&#x7136;&#x540e;&#x518d;&#x4f7f;&#x7528;createImageData()&#xff0c;&#x65b0;&#x5efa;&#x4e00;&#x4e2a;&#x56fe;&#x50cf;&#x6570;&#x636e;&#x5bf9;&#x8c61;&#x5e76;&#x8fd4;&#x56de;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,288"}},{"content":"<pre data-lines=\"291,366\"><code data-lines=\"291,366\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing2&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;con&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>1000<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>2000<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>3000<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>4000<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> oCon = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;con&apos;</span>);\noCon.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>){\n  e = e || event;\n  <span class=\"hljs-keyword\">var</span> tempN = e.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">innerHTML</span>;\n  <span class=\"hljs-keyword\">if</span>(tempN){\n    cxt2.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n    cxt2.<span class=\"hljs-title function_\">putImageData</span>(<span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-title class_\">Number</span>(tempN)),<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n  }\n}\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">var</span> drawing2 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing2&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> cxt2 = drawing2.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = drawing2.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = drawing2.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  <span class=\"hljs-comment\">//&#x5199;&#x5165;drawing2&#x4e2d; </span>\n  cxt2.<span class=\"hljs-title function_\">putImageData</span>(<span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>),<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x4f20;&#x5165;m&#xff0c;&#x5219;&#x4e0d;&#x8fdb;&#x884c;&#x7b5b;&#x9009;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">if</span>(m &amp;&amp; (dots.<span class=\"hljs-property\">length</span> &gt; m)){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; m; i++){\n        newDots.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title class_\">Number</span>(dots.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*dots.<span class=\"hljs-property\">length</span>),<span class=\"hljs-number\">1</span>)));\n      }\n    }<span class=\"hljs-keyword\">else</span>{\n      newDots = dots;\n    }    \n    <span class=\"hljs-comment\">//&#x65b0;&#x5efa;&#x4e00;&#x4e2a;imageData&#xff0c;&#x5e76;&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> oNewImage = cxt.<span class=\"hljs-title function_\">createImageData</span>(W,H);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; newDots.<span class=\"hljs-property\">length</span>; i++){\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">0</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">0</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">1</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">1</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">2</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">2</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">3</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">3</span>];\n    }\n    <span class=\"hljs-keyword\">return</span> oNewImage;\n  }\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"291,366"}},{"content":"<pre data-lines=\"369,370\"><code>&#x3000;&#x3000;&#x70b9;&#x51fb;&#x4e0b;&#x9762;&#x7684;&#x4e0d;&#x540c;&#x6309;&#x94ae;&#xff0c;&#x53ef;&#x4ee5;&#x7b5b;&#x9009;&#x51fa;&#x5bf9;&#x5e94;&#x6570;&#x91cf;&#x7684;&#x968f;&#x673a;&#x7684;&#x7c92;&#x5b50;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"369,370"}}],"payload":{"tag":"h3","lines":"201,202"}},{"content":"&#x50cf;&#x7d20;&#x663e;&#x5b57;","children":[{"content":"<pre data-lines=\"377,382\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#x6765;&#x4f7f;&#x7528;&#x7c92;&#x5b50;&#x7b5b;&#x9009;&#x6765;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x50cf;&#x7d20;&#x663e;&#x5b57;&#x7684;&#x6548;&#x679c;&#x3002;&#x50cf;&#x7d20;&#x663e;&#x5b57;&#x5373;&#x4ece;&#x4e0d;&#x6e05;&#x6670;&#x7684;&#x6548;&#x679c;&#x9010;&#x6b65;&#x8fc7;&#x6e21;&#x5230;&#x5b8c;&#x5168;&#x663e;&#x793a;\n\n&#x3010;&#x6309;&#x5e8f;&#x50cf;&#x7d20;&#x663e;&#x5b57;&#x3011;\n\n&#x3000;&#x3000;&#x6309;&#x5e8f;&#x50cf;&#x7d20;&#x663e;&#x5b57;&#x7684;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x975e;&#x5e38;&#x7b80;&#x5355;&#xff0c;&#x6bd4;&#x5982;&#xff0c;&#x5171;&#x6709;2000&#x4e2a;&#x7c92;&#x5b50;&#xff0c;&#x5171;10&#x4e2a;&#x7a0b;&#x5ea6;&#x7684;&#x8fc7;&#x6e21;&#x6548;&#x679c;&#x3002;&#x5219;&#x4f7f;&#x7528;10&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x5206;&#x522b;&#x4fdd;&#x5b58;200,400,600,800,100,1200,1400,1600,1800&#x548c;2000&#x4e2a;&#x7c92;&#x5b50;&#x3002;&#x7136;&#x540e;&#x4f7f;&#x7528;&#x5b9a;&#x65f6;&#x5668;&#x5c06;&#x5176;&#x9010;&#x6b65;&#x663e;&#x793a;&#x51fa;&#x6765;&#x5373;&#x53ef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"377,382"}},{"content":"<pre data-lines=\"385,467\"><code data-lines=\"385,467\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;</span>&#x5f00;&#x59cb;&#x663e;&#x5b57;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;10&#x7ec4;&#x7c92;&#x5b50;</span>\n  <span class=\"hljs-keyword\">var</span> imageDataArr = [];\n  <span class=\"hljs-keyword\">var</span> n = <span class=\"hljs-number\">10</span>;\n  <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = n; i &gt; <span class=\"hljs-number\">0</span>; i--){\n    imageDataArr.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title function_\">setData</span>(imageData,i));\n  }\n  <span class=\"hljs-keyword\">var</span> oTimer = <span class=\"hljs-literal\">null</span>;\n  btn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n    <span class=\"hljs-title function_\">showData</span>();\n  }\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-params\"></span>){\n    oTimer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-comment\">//&#x5199;&#x5165;drawing1&#x4e2d; </span>\n      cxt.<span class=\"hljs-title function_\">putImageData</span>(imageDataArr[index++],<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>); \n      <span class=\"hljs-comment\">//&#x8fed;&#x4ee3;&#x51fd;&#x6570;       </span>\n      <span class=\"hljs-title function_\">showData</span>();      \n      <span class=\"hljs-keyword\">if</span>(index == <span class=\"hljs-number\">10</span>){&#x3000;&#x3000;     index = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n      }      \n\n    },<span class=\"hljs-number\">100</span>);      \n  }    \n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x4f20;&#x5165;m&#xff0c;&#x5219;&#x4e0d;&#x8fdb;&#x884c;&#x7b5b;&#x9009;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">if</span>(m &amp;&amp; (dots.<span class=\"hljs-property\">length</span> &gt; m)){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; m; i++){\n        newDots.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title class_\">Number</span>(dots.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*dots.<span class=\"hljs-property\">length</span>),<span class=\"hljs-number\">1</span>)));\n      }\n    }<span class=\"hljs-keyword\">else</span>{\n      newDots = dots;\n    }    \n    <span class=\"hljs-comment\">//&#x65b0;&#x5efa;&#x4e00;&#x4e2a;imageData&#xff0c;&#x5e76;&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> oNewImage = cxt.<span class=\"hljs-title function_\">createImageData</span>(W,H);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; newDots.<span class=\"hljs-property\">length</span>; i++){\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">0</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">0</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">1</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">1</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">2</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">2</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">3</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">3</span>];\n    }\n    <span class=\"hljs-keyword\">return</span> oNewImage;\n  }\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"385,467"}},{"content":"<pre data-lines=\"470,477\"><code>&#x3000;&#x3000;&#x70b9;&#x51fb;&#x5f00;&#x59cb;&#x663e;&#x5b57;&#xff0c;&#x5373;&#x53ef;&#x51fa;&#x73b0;&#x6548;&#x679c;\n\n\n\n&#x3010;&#x968f;&#x673a;&#x50cf;&#x7d20;&#x663e;&#x5b57;&#x3011;\n\n&#x3000;&#x3000;&#x968f;&#x673a;&#x50cf;&#x7d20;&#x663e;&#x5b57;&#x7684;&#x539f;&#x7406;&#x7c7b;&#x4f3c;&#xff0c;&#x4fdd;&#x5b58;&#x591a;&#x4e2a;&#x4e0d;&#x540c;&#x6570;&#x91cf;&#x7684;&#x968f;&#x673a;&#x50cf;&#x7d20;&#x7684;&#x6570;&#x7ec4;&#x5373;&#x53ef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"470,477"}},{"content":"<pre data-lines=\"480,559\"><code data-lines=\"480,559\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;</span>&#x5f00;&#x59cb;&#x663e;&#x5b57;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;10&#x7ec4;&#x7c92;&#x5b50;</span>\n  <span class=\"hljs-keyword\">var</span> imageDataArr = [];\n  <span class=\"hljs-keyword\">var</span> n = <span class=\"hljs-number\">10</span>;\n  <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = n; i &gt; <span class=\"hljs-number\">0</span>; i--){\n    imageDataArr.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,i));\n  }\n  <span class=\"hljs-keyword\">var</span> oTimer = <span class=\"hljs-literal\">null</span>;\n  btn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n    <span class=\"hljs-title function_\">showData</span>();\n  }\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-params\"></span>){\n    oTimer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-comment\">//&#x5199;&#x5165;drawing1&#x4e2d; </span>\n      cxt.<span class=\"hljs-title function_\">putImageData</span>(imageDataArr[index++],<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>); \n      <span class=\"hljs-comment\">//&#x8fed;&#x4ee3;&#x51fd;&#x6570;       </span>\n      <span class=\"hljs-title function_\">showData</span>();      \n      <span class=\"hljs-keyword\">if</span>(index == <span class=\"hljs-number\">10</span>){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n        index = <span class=\"hljs-number\">0</span>;\n      }      \n    },<span class=\"hljs-number\">100</span>);      \n  }    \n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;dots.length/m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">var</span> len = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(dots.<span class=\"hljs-property\">length</span>/m);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++){\n      newDots.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title class_\">Number</span>(dots.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*dots.<span class=\"hljs-property\">length</span>),<span class=\"hljs-number\">1</span>)));\n    }\n    <span class=\"hljs-comment\">//&#x65b0;&#x5efa;&#x4e00;&#x4e2a;imageData&#xff0c;&#x5e76;&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> oNewImage = cxt.<span class=\"hljs-title function_\">createImageData</span>(W,H);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; newDots.<span class=\"hljs-property\">length</span>; i++){\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">0</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">0</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">1</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">1</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">2</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">2</span>];\n      oNewImage.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">3</span>] = imageData.<span class=\"hljs-property\">data</span>[newDots[i]+<span class=\"hljs-number\">3</span>];\n    }\n    <span class=\"hljs-keyword\">return</span> oNewImage;\n  }\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"480,559"}}],"payload":{"tag":"h3","lines":"375,376"}},{"content":"&#x7c92;&#x5b50;&#x52a8;&#x753b;","children":[{"content":"<pre data-lines=\"568,571\"><code>&#x3000;&#x3000;&#x7c92;&#x5b50;&#x52a8;&#x753b;&#x5e76;&#x4e0d;&#x662f;&#x7c92;&#x5b50;&#x5728;&#x505a;&#x52a8;&#x753b;&#xff0c;&#x800c;&#x662f;&#x901a;&#x8fc7;getImageData()&#x65b9;&#x6cd5;&#x83b7;&#x5f97;&#x7c92;&#x5b50;&#x7684;&#x968f;&#x673a;&#x5750;&#x6807;&#x548c;&#x6700;&#x7ec8;&#x5750;&#x6807;&#x540e;&#xff0c;&#x901a;&#x8fc7;fillRect()&#x65b9;&#x6cd5;&#x7ed8;&#x5236;&#x7684;&#x5c0f;&#x65b9;&#x5757;&#x5728;&#x505a;&#x8fd0;&#x52a8;&#x3002;&#x4f7f;&#x7528;&#x5b9a;&#x65f6;&#x5668;&#xff0c;&#x4e0d;&#x65ad;&#x7684;&#x7ed8;&#x5236;&#x5750;&#x6807;&#x53d8;&#x5316;&#x7684;&#x5c0f;&#x65b9;&#x5757;&#xff0c;&#x4ee5;&#x6b64;&#x6765;&#x4ea7;&#x751f;&#x8fd0;&#x52a8;&#x7684;&#x6548;&#x679c;\n\n&#x3010;&#x968f;&#x673a;&#x4f4d;&#x7f6e;&#x3011;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"568,571"}},{"content":"<pre data-lines=\"574,677\"><code data-lines=\"574,677\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn1&quot;</span>&gt;</span>&#x5f00;&#x59cb;&#x663e;&#x5b57;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn2&quot;</span>&gt;</span>&#x91cd;&#x65b0;&#x6df7;&#x4e71;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-comment\">//dots&#x7684;&#x7d22;&#x5f15;</span>\n    <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n          dots[index++] = {\n            <span class=\"hljs-string\">&apos;index&apos;</span>:index,\n            <span class=\"hljs-string\">&apos;x&apos;</span>:i,\n            <span class=\"hljs-string\">&apos;y&apos;</span>:j,\n            <span class=\"hljs-string\">&apos;red&apos;</span>:k,\n            <span class=\"hljs-string\">&apos;randomX&apos;</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*W,\n            <span class=\"hljs-string\">&apos;randomY&apos;</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*H,\n          }\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;dots.length/m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">var</span> len = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(dots.<span class=\"hljs-property\">length</span>/m);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++){\n      newDots.<span class=\"hljs-title function_\">push</span>(dots.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*dots.<span class=\"hljs-property\">length</span>),<span class=\"hljs-number\">1</span>)[<span class=\"hljs-number\">0</span>]);\n    }\n    <span class=\"hljs-keyword\">return</span> newDots;\n  }\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x7c92;&#x5b50;&#x6570;&#x7ec4;</span>\n  <span class=\"hljs-keyword\">var</span> dataArr = <span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n  <span class=\"hljs-keyword\">var</span> oTimer1 = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-keyword\">var</span> oTimer2 = <span class=\"hljs-literal\">null</span>;\n  btn1.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(oTimer1);\n    <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-number\">10</span>);\n  }  \n  btn2.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(oTimer2);\n    <span class=\"hljs-title function_\">showRandom</span>(<span class=\"hljs-number\">10</span>);\n  }    \n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-params\">n</span>){\n    oTimer1 = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n        <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n        <span class=\"hljs-keyword\">var</span> x0 = temp.<span class=\"hljs-property\">randomX</span>;\n        <span class=\"hljs-keyword\">var</span> y0 = temp.<span class=\"hljs-property\">randomY</span>;\n        <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">x</span> - temp.<span class=\"hljs-property\">randomX</span>;\n        <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">y</span> - temp.<span class=\"hljs-property\">randomY</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n      }   \n      <span class=\"hljs-title function_\">showData</span>(n-<span class=\"hljs-number\">1</span>);    \n      <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">1</span>){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer1);\n      }      \n    },<span class=\"hljs-number\">60</span>);  \n  } \n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showRandom</span>(<span class=\"hljs-params\">n</span>){\n    oTimer2 = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n        <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n        <span class=\"hljs-keyword\">var</span> x0 = temp.<span class=\"hljs-property\">x</span>;\n        <span class=\"hljs-keyword\">var</span> y0 = temp.<span class=\"hljs-property\">y</span>;\n        <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">randomX</span> - temp.<span class=\"hljs-property\">x</span>;\n        <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">randomY</span> - temp.<span class=\"hljs-property\">y</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);             \n      }     \n      <span class=\"hljs-title function_\">showRandom</span>(n-<span class=\"hljs-number\">1</span>);    \n      <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">1</span>){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer2);\n      }      \n    },<span class=\"hljs-number\">60</span>);  \n  } \n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"574,677"}},{"content":"<pre data-lines=\"682,685\"><code>&#x3010;&#x98d8;&#x5165;&#x6548;&#x679c;&#x3011;&#x3000;\n\n&#x3000;&#x98d8;&#x5165;&#x6548;&#x679c;&#x4e0e;&#x968f;&#x673a;&#x663e;&#x5b57;&#x7684;&#x539f;&#x7406;&#x76f8;&#x4f3c;&#xff0c;&#x4e0d;&#x518d;&#x8d58;&#x8ff0;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"682,685"}},{"content":"<pre data-lines=\"688,768\"><code data-lines=\"688,768\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn1&quot;</span>&gt;</span>&#x5de6;&#x4e0a;&#x89d2;&#x98d8;&#x5165;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> drawing1 = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-comment\">//dots&#x7684;&#x7d22;&#x5f15;</span>\n    <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n          dots[index++] = {\n            <span class=\"hljs-string\">&apos;index&apos;</span>:index,\n            <span class=\"hljs-string\">&apos;x&apos;</span>:i,\n            <span class=\"hljs-string\">&apos;y&apos;</span>:j,\n            <span class=\"hljs-string\">&apos;red&apos;</span>:k,\n            <span class=\"hljs-string\">&apos;randomX&apos;</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*W,\n            <span class=\"hljs-string\">&apos;randomY&apos;</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*H,\n          }\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;dots.length/m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">var</span> len = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(dots.<span class=\"hljs-property\">length</span>/m);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++){\n      newDots.<span class=\"hljs-title function_\">push</span>(dots.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*dots.<span class=\"hljs-property\">length</span>),<span class=\"hljs-number\">1</span>)[<span class=\"hljs-number\">0</span>]);\n    }\n    <span class=\"hljs-keyword\">return</span> newDots;\n  }\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x7c92;&#x5b50;&#x6570;&#x7ec4;</span>\n  <span class=\"hljs-keyword\">var</span> dataArr = <span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n  <span class=\"hljs-keyword\">var</span> oTimer1 = <span class=\"hljs-literal\">null</span>;\n  btn1.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(oTimer1);\n    <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-number\">10</span>);\n  }    \n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-params\">n</span>){\n    oTimer1 = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n        <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n        <span class=\"hljs-keyword\">var</span> x0 = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">var</span> y0 = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">x</span> - <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">y</span> - <span class=\"hljs-number\">0</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n      }   \n      <span class=\"hljs-title function_\">showData</span>(n-<span class=\"hljs-number\">1</span>);    \n      <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">1</span>){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer1);\n      }      \n    },<span class=\"hljs-number\">60</span>);  \n  } \n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"688,768"}}],"payload":{"tag":"h3","lines":"566,567"}},{"content":"&#x9f20;&#x6807;&#x4ea4;&#x4e92;","children":[{"content":"<pre data-lines=\"777,782\"><code>&#x3000;&#x3000;&#x4e00;&#x822c;&#x5730;&#xff0c;&#x7c92;&#x5b50;&#x7684;&#x9f20;&#x6807;&#x4ea4;&#x4e92;&#x90fd;&#x4e0e;isPointInPath(x,y)&#x65b9;&#x6cd5;&#x6709;&#x5173;\n\n&#x3010;&#x79fb;&#x5165;&#x53d8;&#x8272;&#x3011;\n\n&#x3000;&#x3000;&#x5f53;&#x9f20;&#x6807;&#x63a5;&#x8fd1;&#x7c92;&#x5b50;&#x65f6;&#xff0c;&#x8be5;&#x7c92;&#x5b50;&#x53d8;&#x7ea2;&#x3002;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x5f88;&#x7b80;&#x5355;&#x3002;&#x9f20;&#x6807;&#x79fb;&#x52a8;&#x65f6;&#xff0c;&#x901a;&#x8fc7;isPointInPath(x,y)&#x65b9;&#x6cd5;&#x68c0;&#x6d4b;&#xff0c;&#x6709;&#x54ea;&#x4e9b;&#x7c92;&#x5b50;&#x5904;&#x4e8e;&#x5f53;&#x524d;&#x6307;&#x9488;&#x8303;&#x56f4;&#x5185;&#x3002;&#x5982;&#x679c;&#x5904;&#x4e8e;&#xff0c;&#x7ed8;&#x5236;1&#x50cf;&#x7d20;&#x7684;&#x7ea2;&#x8272;&#x77e9;&#x5f62;&#x5373;&#x53ef;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"777,782"}},{"content":"<pre data-lines=\"785,856\"><code data-lines=\"785,856\">&lt;canvas <span class=\"hljs-variable language_\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> style=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;&lt;/canvas&gt;\n&lt;<span class=\"hljs-variable language_\">script</span>&gt;\n<span class=\"hljs-keyword\">var</span> drawing1 = document.getElementById(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.getContext){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.width = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.height = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.textBaseline = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.font = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.measureText(str).width;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  cxt.fillText(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.getImageData(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  <span class=\"hljs-keyword\">function</span> setData(imageData,n,m){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-comment\">//dots&#x7684;&#x7d22;&#x5f15;</span>\n    <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.data[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.push(k);\n          dots[index++] = {\n            <span class=\"hljs-string\">&apos;index&apos;</span>:index,\n            <span class=\"hljs-string\">&apos;x&apos;</span>:i,\n            <span class=\"hljs-string\">&apos;y&apos;</span>:j,\n            <span class=\"hljs-string\">&apos;red&apos;</span>:k,\n            <span class=\"hljs-string\">&apos;randomX&apos;</span>:Math.<span class=\"hljs-built_in\">random</span>()*W,\n            <span class=\"hljs-string\">&apos;randomY&apos;</span>:Math.<span class=\"hljs-built_in\">random</span>()*H,\n          }\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;dots.length/m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">var</span> len = Math.<span class=\"hljs-built_in\">floor</span>(dots.length/m);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++){\n      newDots.push(dots.splice(Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*dots.length),<span class=\"hljs-number\">1</span>)[<span class=\"hljs-number\">0</span>]);\n    }\n    <span class=\"hljs-keyword\">return</span> newDots;\n  }\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x7c92;&#x5b50;&#x6570;&#x7ec4;</span>\n  <span class=\"hljs-keyword\">var</span> dataArr = setData(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n  <span class=\"hljs-comment\">//&#x9f20;&#x6807;&#x79fb;&#x52a8;&#x65f6;&#xff0c;&#x5f53;&#x7c92;&#x5b50;&#x8ddd;&#x79bb;&#x9f20;&#x6807;&#x6307;&#x9488;&#x5c0f;&#x4e8e;10&#x65f6;&#xff0c;&#x5219;&#x8fdb;&#x884c;&#x76f8;&#x5173;&#x64cd;&#x4f5c;</span>\n  drawing1.onmousemove = <span class=\"hljs-keyword\">function</span>(e){\n    e = e || event;\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">x</span> = e.clientX - drawing1.getBoundingClientRect().left;\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable language_\">y</span> = e.clientY - drawing1.getBoundingClientRect().top;\n    cxt.beginPath();\n    cxt.arc(<span class=\"hljs-variable language_\">x</span>,<span class=\"hljs-variable language_\">y</span>,<span class=\"hljs-number\">10</span>,<span class=\"hljs-number\">0</span>,Math.PI*<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.length; i++){\n      <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n      <span class=\"hljs-keyword\">if</span>(cxt.isPointInPath(temp.<span class=\"hljs-variable language_\">x</span>,temp.<span class=\"hljs-variable language_\">y</span>)){   \n        cxt.fillStyle = <span class=\"hljs-string\">&apos;red&apos;</span>;\n        cxt.fillRect(temp.<span class=\"hljs-variable language_\">x</span>,temp.<span class=\"hljs-variable language_\">y</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n      }        \n    }   \n  }\n}\n&lt;/<span class=\"hljs-variable language_\">script</span>&gt; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"785,856"}},{"content":"<pre data-lines=\"859,868\"><code>&#x3000;&#x3000;&#x9f20;&#x6807;&#x9760;&#x8fd1;&#x6587;&#x5b57;&#x65f6;&#xff0c;&#x53ef;&#x5c06;&#x9760;&#x8fd1;&#x6587;&#x5b57;&#x7684;&#x533a;&#x57df;&#x53d8;&#x6210;&#x7ea2;&#x8272;\n\n\n\n&#x3010;&#x8fdc;&#x79bb;&#x9f20;&#x6807;&#x3011;\n\n&#x3000;&#x3000;&#x9f20;&#x6807;&#x70b9;&#x51fb;&#x65f6;&#xff0c;&#x4ee5;&#x9f20;&#x6807;&#x6307;&#x9488;&#x4e3a;&#x5706;&#x5fc3;&#x7684;&#x4e00;&#x5b9a;&#x8303;&#x56f4;&#x5185;&#x7684;&#x7c92;&#x5b50;&#x9700;&#x8981;&#x79fb;&#x52a8;&#x5230;&#x8be5;&#x8303;&#x56f4;&#x4ee5;&#x5916;&#x3002;&#x4e00;&#x6bb5;&#x65f6;&#x95f4;&#x540e;&#xff0c;&#x7c92;&#x5b50;&#x56de;&#x5230;&#x539f;&#x59cb;&#x4f4d;&#x7f6e;\n\n&#x3000;&#x3000;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x5e76;&#x4e0d;&#x590d;&#x6742;&#xff0c;&#x4f7f;&#x7528;isPointInPath(x,y)&#x65b9;&#x6cd5;&#x5373;&#x53ef;&#xff0c;&#x5982;&#x679c;&#x7c92;&#x5b50;&#x5904;&#x4e8e;&#x5f53;&#x524d;&#x8def;&#x5f84;&#x4e2d;&#xff0c;&#x5219;&#x6cbf;&#x7740;&#x9f20;&#x6807;&#x6307;&#x9488;&#x4e0e;&#x7c92;&#x5b50;&#x5750;&#x6807;&#x7ec4;&#x6210;&#x7684;&#x76f4;&#x7ebf;&#x65b9;&#x5411;&#xff0c;&#x79fb;&#x52a8;&#x5230;&#x8def;&#x5f84;&#x7684;&#x8fb9;&#x7f18;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"859,868"}},{"content":"<pre data-lines=\"871,990\"><code data-lines=\"871,990\">&lt;canvas id=<span class=\"hljs-string\">&quot;drawing1&quot;</span> style=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;&lt;/canvas&gt;\n&lt;script&gt;\n<span class=\"hljs-keyword\">var</span> drawing1 = document.getElementById(<span class=\"hljs-string\">&apos;drawing1&apos;</span>);\n<span class=\"hljs-keyword\">if</span>(drawing1.getContext){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.getContext(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.width = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.height = <span class=\"hljs-number\">200</span>;\n  <span class=\"hljs-keyword\">var</span> str = <span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>;\n  cxt.textBaseline = <span class=\"hljs-string\">&apos;top&apos;</span>;\n  <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n  cxt.font = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n  <span class=\"hljs-keyword\">var</span> sw = cxt.measureText(str).width;\n  <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n      sw = W;\n  }\n  <span class=\"hljs-comment\">//&#x6e32;&#x67d3;&#x6587;&#x5b57;</span>\n  cxt.fillText(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);\n  <span class=\"hljs-comment\">//&#x83b7;&#x53d6;imageData</span>\n  <span class=\"hljs-keyword\">var</span> imageData = cxt.getImageData(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n  cxt.clearRect(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-comment\">//dots&#x7684;&#x7d22;&#x5f15;</span>\n    <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.data[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-built_in\">push</span>(k);\n          dots[index++] = {\n            <span class=\"hljs-string\">&apos;index&apos;</span>:index,\n            <span class=\"hljs-string\">&apos;x&apos;</span>:i,\n            <span class=\"hljs-string\">&apos;y&apos;</span>:j,\n            <span class=\"hljs-string\">&apos;red&apos;</span>:k,\n            <span class=\"hljs-string\">&apos;randomX&apos;</span>:Math.<span class=\"hljs-built_in\">random</span>()*W,\n            <span class=\"hljs-string\">&apos;randomY&apos;</span>:Math.<span class=\"hljs-built_in\">random</span>()*H,\n            <span class=\"hljs-string\">&apos;mark&apos;</span>:<span class=\"hljs-literal\">false</span>\n          }\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;dots.length/m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">var</span> len = Math.<span class=\"hljs-built_in\">floor</span>(dots.<span class=\"hljs-built_in\">length</span>/m);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++){\n      newDots.<span class=\"hljs-built_in\">push</span>(dots.<span class=\"hljs-built_in\">splice</span>(Math.<span class=\"hljs-built_in\">floor</span>(Math.<span class=\"hljs-built_in\">random</span>()*dots.<span class=\"hljs-built_in\">length</span>),<span class=\"hljs-number\">1</span>)[<span class=\"hljs-number\">0</span>]);\n    }\n    <span class=\"hljs-keyword\">return</span> newDots;\n  }\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x7c92;&#x5b50;&#x6570;&#x7ec4;</span>\n  <span class=\"hljs-keyword\">var</span> dataArr = setData(imageData,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">1</span>); \n  <span class=\"hljs-comment\">//&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n  <span class=\"hljs-keyword\">var</span> oNewImage = cxt.createImageData(W,H);\n  <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-built_in\">length</span>; i++){\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; <span class=\"hljs-number\">4</span>; j++){\n      oNewImage.data[dataArr[i].red+j] = imageData.data[dataArr[i].red+j];\n    }\n  }    \n  <span class=\"hljs-comment\">//&#x5199;&#x5165;canvas&#x4e2d;</span>\n  cxt.putImageData(oNewImage,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n  <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x9f20;&#x6807;&#x68c0;&#x6d4b;&#x534a;&#x5f84;&#x4e3a;r</span>\n  <span class=\"hljs-keyword\">var</span> r = <span class=\"hljs-number\">20</span>;\n  <span class=\"hljs-comment\">//&#x9f20;&#x6807;&#x79fb;&#x52a8;&#x65f6;&#xff0c;&#x5f53;&#x7c92;&#x5b50;&#x8ddd;&#x79bb;&#x9f20;&#x6807;&#x6307;&#x9488;&#x5c0f;&#x4e8e;20&#x65f6;&#xff0c;&#x5219;&#x8fdb;&#x884c;&#x76f8;&#x5173;&#x64cd;&#x4f5c;</span>\n  drawing1.onmousedown = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>){\n    e = e || event;\n    <span class=\"hljs-keyword\">var</span> x = e.clientX - drawing1.getBoundingClientRect().<span class=\"hljs-built_in\">left</span>;\n    <span class=\"hljs-keyword\">var</span> y = e.clientY - drawing1.getBoundingClientRect().<span class=\"hljs-built_in\">top</span>;\n    cxt.beginPath();\n    cxt.arc(x,y,r,<span class=\"hljs-number\">0</span>,Math.<span class=\"hljs-literal\">PI</span>*<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-built_in\">length</span>; i++){\n      <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n      <span class=\"hljs-keyword\">if</span>(cxt.isPointInPath(temp.x,temp.y)){  \n        temp.mark = <span class=\"hljs-literal\">true</span>;\n        <span class=\"hljs-keyword\">var</span> <span class=\"hljs-built_in\">angle</span> = Math.<span class=\"hljs-built_in\">atan2</span>((temp.y - y),(temp.x - x));\n        temp.endX =  x - r*Math.<span class=\"hljs-built_in\">cos</span>(<span class=\"hljs-built_in\">angle</span>);\n        temp.endY =  y - r*Math.<span class=\"hljs-built_in\">sin</span>(<span class=\"hljs-built_in\">angle</span>);\n        <span class=\"hljs-keyword\">var</span> disX = temp.x - temp.endX;\n        <span class=\"hljs-keyword\">var</span> disY = temp.y - temp.endY;\n        cxt.fillStyle = <span class=\"hljs-string\">&apos;#fff&apos;</span>;\n        cxt.fillRect(temp.x,temp.y,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n        cxt.fillStyle = <span class=\"hljs-string\">&apos;#000&apos;</span>;\n        cxt.fillRect(temp.endX,temp.endY,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n        dataRecovery(<span class=\"hljs-number\">10</span>);\n      }<span class=\"hljs-keyword\">else</span>{\n        temp.mark = <span class=\"hljs-literal\">false</span>;\n      }     \n    }\n    <span class=\"hljs-keyword\">var</span> oTimer = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">dataRecovery</span>(<span class=\"hljs-params\">n</span>){\n      clearTimeout(oTimer);\n      oTimer = setTimeout(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n        cxt.clearRect(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-built_in\">length</span>; i++){\n          <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n          <span class=\"hljs-keyword\">if</span>(temp.mark){\n            <span class=\"hljs-keyword\">var</span> x0 = temp.endX;\n            <span class=\"hljs-keyword\">var</span> y0 = temp.endY;\n            <span class=\"hljs-keyword\">var</span> disX = temp.x - x0;\n            <span class=\"hljs-keyword\">var</span> disY = temp.y - y0;\n            cxt.fillRect(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n          }<span class=\"hljs-keyword\">else</span>{\n            cxt.fillRect(temp.x,temp.y,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n          }\n        }   \n        dataRecovery(n<span class=\"hljs-number\">-1</span>);    \n        <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">1</span>){\n          clearTimeout(oTimer);\n        }      \n      },<span class=\"hljs-number\">17</span>);\n    } \n  }  \n}\n&lt;/script&gt;  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"871,990"}},{"content":"<pre data-lines=\"993,994\"><code>&#x3000;&#x3000;&#x4f7f;&#x7528;&#x9f20;&#x6807;&#x70b9;&#x51fb;canvas&#x4e2d;&#x7684;&#x6587;&#x5b57;&#xff0c;&#x51fa;&#x73b0;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"993,994"}}],"payload":{"tag":"h3","lines":"775,776"}},{"content":"&#x7efc;&#x5408;&#x5b9e;&#x4f8b;","children":[{"content":"<pre data-lines=\"1001,1002\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#x5c06;&#x4e0a;&#x9762;&#x7684;&#x6548;&#x679c;&#x5236;&#x4f5c;&#x4e3a;&#x4e00;&#x4e2a;&#x53ef;&#x7f16;&#x8f91;&#x7684;&#x7efc;&#x5408;&#x5b9e;&#x4f8b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1001,1002"}},{"content":"<pre data-lines=\"1005,1266\"><code data-lines=\"1005,1266\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drawing1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;margin-bottom:10px&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>&#x7c92;&#x5b50;&#x8bbe;&#x7f6e;&#xff1a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;textValue&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;&#x5c0f;&#x706b;&#x67f4;&#x7684;&#x84dd;&#x8272;&#x7406;&#x60f3;&quot;</span>&gt;</span>  \n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btnSetText&quot;</span>&gt;</span>&#x6587;&#x5b57;&#x8bbe;&#x7f6e;&#x786e;&#x8ba4;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btnchoose2&quot;</span>&gt;</span>&#x6309;&#x5e8f;&#x7b5b;&#x9009;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btnchoose3&quot;</span>&gt;</span>&#x968f;&#x673a;&#x7b5b;&#x9009;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btnchoose1&quot;</span>&gt;</span>&#x4e0d;&#x7b5b;&#x9009;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>  \n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;margin-bottom:10px&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>&#x7c92;&#x5b50;&#x6548;&#x679c;&#xff1a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn1&quot;</span>&gt;</span>&#x6309;&#x5e8f;&#x663e;&#x5b57;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn2&quot;</span>&gt;</span>&#x968f;&#x673a;&#x663e;&#x5b57;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>  \n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn3&quot;</span>&gt;</span>&#x6df7;&#x4e71;&#x805a;&#x5408;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn4&quot;</span>&gt;</span>&#x91cd;&#x65b0;&#x6df7;&#x4e71;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>&#x9f20;&#x6807;&#x6548;&#x679c;&#xff1a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>1&#x3001;&#x9f20;&#x6807;&#x79fb;&#x5230;&#x6587;&#x5b57;&#x4e0a;&#x65f6;&#xff0c;&#x6587;&#x5b57;&#x989c;&#x8272;&#x53d8;&#x7ea2;&#xff1b;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>2&#x3001;&#x9f20;&#x6807;&#x5728;&#x6587;&#x5b57;&#x4e0a;&#x70b9;&#x51fb;&#x65f6;&#xff0c;&#x7c92;&#x5b50;&#x8fdc;&#x79bb;&#x9f20;&#x6807;&#x6307;&#x9488;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">if</span>(drawing1.<span class=\"hljs-property\">getContext</span>){\n  <span class=\"hljs-keyword\">var</span> cxt = drawing1.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> W = drawing1.<span class=\"hljs-property\">width</span> = <span class=\"hljs-number\">300</span>;\n  <span class=\"hljs-keyword\">var</span> H = drawing1.<span class=\"hljs-property\">height</span> = <span class=\"hljs-number\">200</span>; \n  <span class=\"hljs-keyword\">var</span> imageData;\n  <span class=\"hljs-keyword\">var</span> dataArr;\n  btnSetText.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-title function_\">fnSetText</span>(textValue.<span class=\"hljs-property\">value</span>);\n  }  \n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fnSetText</span>(<span class=\"hljs-params\">str</span>){\n    cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n    cxt.<span class=\"hljs-property\">textBaseline</span> = <span class=\"hljs-string\">&apos;top&apos;</span>;\n    <span class=\"hljs-keyword\">var</span> sh = <span class=\"hljs-number\">60</span>;\n    cxt.<span class=\"hljs-property\">font</span> = sh + <span class=\"hljs-string\">&apos;px  &#x5b8b;&#x4f53;&apos;</span>\n    <span class=\"hljs-keyword\">var</span> sw = cxt.<span class=\"hljs-title function_\">measureText</span>(str).<span class=\"hljs-property\">width</span>;\n    <span class=\"hljs-keyword\">if</span>(sw &gt; W){\n        sw = W;\n    }\n    cxt.<span class=\"hljs-title function_\">fillText</span>(str,(W - sw)/<span class=\"hljs-number\">2</span>,(H - sh)/<span class=\"hljs-number\">2</span>,W);  \n    imageData = cxt.<span class=\"hljs-title function_\">getImageData</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H); \n    dataArr = <span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>); \n  }\n  <span class=\"hljs-title function_\">fnSetText</span>(<span class=\"hljs-string\">&apos;&#x5c0f;&#x706b;&#x67f4;&apos;</span>);\n  btnchoose1.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    dataArr = <span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">saveData</span>(dataArr);  \n  }\n  btnchoose2.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    dataArr = <span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-title function_\">saveData</span>(dataArr); \n  }\n  btnchoose3.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    dataArr = <span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-title function_\">saveData</span>(dataArr); \n  }    \n  <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">setData</span>(<span class=\"hljs-params\">imageData,n,m</span>){\n    <span class=\"hljs-comment\">//&#x4ece;imageData&#x5bf9;&#x8c61;&#x4e2d;&#x53d6;&#x5f97;&#x7c92;&#x5b50;&#xff0c;&#x5e76;&#x5b58;&#x50a8;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> dots = [];\n    <span class=\"hljs-comment\">//dots&#x7684;&#x7d22;&#x5f15;</span>\n    <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; W; i+=n){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; H ;j+=n){\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;</span>\n        <span class=\"hljs-keyword\">var</span> k = <span class=\"hljs-number\">4</span>*(i + j*W);\n        <span class=\"hljs-comment\">//data&#x503c;&#x4e2d;&#x7684;&#x900f;&#x660e;&#x5ea6;</span>\n        <span class=\"hljs-keyword\">if</span>(imageData.<span class=\"hljs-property\">data</span>[k+<span class=\"hljs-number\">3</span>] &gt; <span class=\"hljs-number\">0</span>){\n          <span class=\"hljs-comment\">//&#x5c06;&#x900f;&#x660e;&#x5ea6;&#x5927;&#x4e8e;0&#x7684;data&#x4e2d;&#x7684;&#x7ea2;&#x8272;&#x503c;&#x4fdd;&#x5b58;&#x5230;dots&#x6570;&#x7ec4;&#x4e2d;</span>\n          dots.<span class=\"hljs-title function_\">push</span>(k);\n          dots[index++] = {\n            <span class=\"hljs-string\">&apos;index&apos;</span>:index,\n            <span class=\"hljs-string\">&apos;x&apos;</span>:i,\n            <span class=\"hljs-string\">&apos;y&apos;</span>:j,\n            <span class=\"hljs-string\">&apos;red&apos;</span>:k,\n            <span class=\"hljs-string\">&apos;green&apos;</span>:k+<span class=\"hljs-number\">1</span>,\n            <span class=\"hljs-string\">&apos;blue&apos;</span>:k+<span class=\"hljs-number\">2</span>,\n            <span class=\"hljs-string\">&apos;randomX&apos;</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*W,\n            <span class=\"hljs-string\">&apos;randomY&apos;</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*H,\n            <span class=\"hljs-string\">&apos;mark&apos;</span>:<span class=\"hljs-literal\">false</span>\n          }\n        }\n      }\n    }    \n    <span class=\"hljs-comment\">//&#x7b5b;&#x9009;&#x7c92;&#x5b50;&#xff0c;&#x4ec5;&#x4fdd;&#x5b58;dots.length/m&#x4e2a;&#x5230;newDots&#x6570;&#x7ec4;&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> newDots = [];\n    <span class=\"hljs-keyword\">var</span> len = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(dots.<span class=\"hljs-property\">length</span>/m);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++){\n      newDots.<span class=\"hljs-title function_\">push</span>(dots.<span class=\"hljs-title function_\">splice</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*dots.<span class=\"hljs-property\">length</span>),<span class=\"hljs-number\">1</span>)[<span class=\"hljs-number\">0</span>]);\n    }\n    <span class=\"hljs-keyword\">return</span> newDots;\n  }\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">saveData</span>(<span class=\"hljs-params\">dataArr</span>){\n    <span class=\"hljs-comment\">//&#x5c06;&#x7b5b;&#x9009;&#x540e;&#x7684;&#x7c92;&#x5b50;&#x4fe1;&#x606f;&#x4fdd;&#x5b58;&#x5230;&#x65b0;&#x5efa;&#x7684;imageData&#x4e2d;</span>\n    <span class=\"hljs-keyword\">var</span> oNewImage = cxt.<span class=\"hljs-title function_\">createImageData</span>(W,H);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> j = <span class=\"hljs-number\">0</span>; j &lt; <span class=\"hljs-number\">4</span>; j++){\n        oNewImage.<span class=\"hljs-property\">data</span>[dataArr[i].<span class=\"hljs-property\">red</span>+j] = imageData.<span class=\"hljs-property\">data</span>[dataArr[i].<span class=\"hljs-property\">red</span>+j];\n      }\n    }\n    <span class=\"hljs-comment\">//&#x5199;&#x5165;canvas&#x4e2d;</span>\n    cxt.<span class=\"hljs-title function_\">putImageData</span>(oNewImage,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);       \n  }\n  <span class=\"hljs-comment\">//&#x663e;&#x793a;&#x7c92;&#x5b50;</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showData</span>(<span class=\"hljs-params\">arr,oTimer,index,n</span>){\n    oTimer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-comment\">//&#x5199;&#x5165;canvas&#x4e2d; </span>\n      <span class=\"hljs-title function_\">saveData</span>(arr[index++]); \n      <span class=\"hljs-keyword\">if</span>(index == n){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n      }<span class=\"hljs-keyword\">else</span>{\n        <span class=\"hljs-comment\">//&#x8fed;&#x4ee3;&#x51fd;&#x6570;       </span>\n        <span class=\"hljs-title function_\">showData</span>(arr,oTimer,index,n);           \n      }                     \n    },<span class=\"hljs-number\">60</span>);      \n  }   \n  <span class=\"hljs-comment\">//&#x91cd;&#x65b0;&#x6df7;&#x4e71;</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showDataToRandom</span>(<span class=\"hljs-params\">dataArr,oTimer,n</span>){\n    oTimer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n        <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n        <span class=\"hljs-keyword\">var</span> x0 = temp.<span class=\"hljs-property\">x</span>;\n        <span class=\"hljs-keyword\">var</span> y0 = temp.<span class=\"hljs-property\">y</span>;\n        <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">randomX</span> - temp.<span class=\"hljs-property\">x</span>;\n        <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">randomY</span> - temp.<span class=\"hljs-property\">y</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);             \n      } \n      n--;\n      <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">0</span>){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n      }<span class=\"hljs-keyword\">else</span>{\n        <span class=\"hljs-title function_\">showDataToRandom</span>(dataArr,oTimer,n); \n      }             \n    },<span class=\"hljs-number\">60</span>);  \n  } \n  <span class=\"hljs-comment\">//&#x6df7;&#x4e71;&#x805a;&#x5408;</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">showRandomToData</span>(<span class=\"hljs-params\">dataArr,oTimer,n</span>){\n    oTimer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n      <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n        <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n        <span class=\"hljs-keyword\">var</span> x0 = temp.<span class=\"hljs-property\">randomX</span>;\n        <span class=\"hljs-keyword\">var</span> y0 = temp.<span class=\"hljs-property\">randomY</span>;\n        <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">x</span> - temp.<span class=\"hljs-property\">randomX</span>;\n        <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">y</span> - temp.<span class=\"hljs-property\">randomY</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n      }   \n      n--;\n      <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">0</span>){\n        <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n      }<span class=\"hljs-keyword\">else</span>{\n        <span class=\"hljs-title function_\">showRandomToData</span>(dataArr,oTimer,n); \n      }      \n    },<span class=\"hljs-number\">60</span>);  \n  }\n  btn1.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    btn1.<span class=\"hljs-property\">arr</span> = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">10</span>; i &gt; <span class=\"hljs-number\">1</span>; i--){\n      btn1.<span class=\"hljs-property\">arr</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title function_\">setData</span>(imageData,i,<span class=\"hljs-number\">1</span>));\n    }\n    <span class=\"hljs-title function_\">showData</span>(btn1.<span class=\"hljs-property\">arr</span>,btn1.<span class=\"hljs-property\">oTimer</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">9</span>);\n  }\n  btn2.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    btn2.<span class=\"hljs-property\">arr</span> = [];\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">10</span>; i &gt; <span class=\"hljs-number\">0</span>; i--){\n      btn2.<span class=\"hljs-property\">arr</span>.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-title function_\">setData</span>(imageData,<span class=\"hljs-number\">2</span>,i));\n    }\n    <span class=\"hljs-title function_\">showData</span>(btn2.<span class=\"hljs-property\">arr</span>,btn2.<span class=\"hljs-property\">oTimer</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">10</span>);\n  }   \n  btn3.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(btn3.<span class=\"hljs-property\">oTimer</span>);\n    <span class=\"hljs-title function_\">showRandomToData</span>(dataArr,btn3.<span class=\"hljs-property\">oTimer</span>,<span class=\"hljs-number\">10</span>);\n  }\n  btn4.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-built_in\">clearTimeout</span>(btn4.<span class=\"hljs-property\">oTimer</span>);\n    <span class=\"hljs-title function_\">showDataToRandom</span>(dataArr,btn4.<span class=\"hljs-property\">oTimer</span>,<span class=\"hljs-number\">10</span>);\n  }  \n  <span class=\"hljs-comment\">//&#x9f20;&#x6807;&#x79fb;&#x52a8;</span>\n  drawing1.<span class=\"hljs-property\">onmousemove</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>){\n    e = e || event;\n    <span class=\"hljs-keyword\">var</span> x = e.<span class=\"hljs-property\">clientX</span> - drawing1.<span class=\"hljs-title function_\">getBoundingClientRect</span>().<span class=\"hljs-property\">left</span>;\n    <span class=\"hljs-keyword\">var</span> y = e.<span class=\"hljs-property\">clientY</span> - drawing1.<span class=\"hljs-title function_\">getBoundingClientRect</span>().<span class=\"hljs-property\">top</span>;\n    cxt.<span class=\"hljs-title function_\">beginPath</span>();\n    cxt.<span class=\"hljs-title function_\">arc</span>(x,y,<span class=\"hljs-number\">10</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span>*<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n      <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n      <span class=\"hljs-keyword\">if</span>(cxt.<span class=\"hljs-title function_\">isPointInPath</span>(temp.<span class=\"hljs-property\">x</span>,temp.<span class=\"hljs-property\">y</span>)){   \n        cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;red&apos;</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(temp.<span class=\"hljs-property\">x</span>,temp.<span class=\"hljs-property\">y</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n      }        \n    }\n    cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;black&apos;</span>;   \n  }    \n  <span class=\"hljs-comment\">//&#x9f20;&#x6807;&#x70b9;&#x51fb;</span>\n  drawing1.<span class=\"hljs-property\">onmousedown</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>){\n    <span class=\"hljs-keyword\">var</span> r = <span class=\"hljs-number\">20</span>;\n    e = e || event;\n    <span class=\"hljs-keyword\">var</span> x = e.<span class=\"hljs-property\">clientX</span> - drawing1.<span class=\"hljs-title function_\">getBoundingClientRect</span>().<span class=\"hljs-property\">left</span>;\n    <span class=\"hljs-keyword\">var</span> y = e.<span class=\"hljs-property\">clientY</span> - drawing1.<span class=\"hljs-title function_\">getBoundingClientRect</span>().<span class=\"hljs-property\">top</span>;\n    cxt.<span class=\"hljs-title function_\">beginPath</span>();\n    cxt.<span class=\"hljs-title function_\">arc</span>(x,y,r,<span class=\"hljs-number\">0</span>,<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span>*<span class=\"hljs-number\">2</span>);\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n      <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n      <span class=\"hljs-keyword\">if</span>(cxt.<span class=\"hljs-title function_\">isPointInPath</span>(temp.<span class=\"hljs-property\">x</span>,temp.<span class=\"hljs-property\">y</span>)){  \n        temp.<span class=\"hljs-property\">mark</span> = <span class=\"hljs-literal\">true</span>;\n        <span class=\"hljs-keyword\">var</span> angle = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">atan2</span>((temp.<span class=\"hljs-property\">y</span> - y),(temp.<span class=\"hljs-property\">x</span> - x));\n        temp.<span class=\"hljs-property\">endX</span> =  x - r*<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">cos</span>(angle);\n        temp.<span class=\"hljs-property\">endY</span> =  y - r*<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">sin</span>(angle);\n        <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">x</span> - temp.<span class=\"hljs-property\">endX</span>;\n        <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">y</span> - temp.<span class=\"hljs-property\">endY</span>;\n        cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;#fff&apos;</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(temp.<span class=\"hljs-property\">x</span>,temp.<span class=\"hljs-property\">y</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n        cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;#f00&apos;</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(temp.<span class=\"hljs-property\">endX</span>,temp.<span class=\"hljs-property\">endY</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n        cxt.<span class=\"hljs-property\">fillStyle</span>=<span class=\"hljs-string\">&quot;#000&quot;</span>;\n        <span class=\"hljs-title function_\">dataRecovery</span>(<span class=\"hljs-number\">10</span>);\n      }<span class=\"hljs-keyword\">else</span>{\n        temp.<span class=\"hljs-property\">mark</span> = <span class=\"hljs-literal\">false</span>;\n      }     \n    }\n    <span class=\"hljs-keyword\">var</span> oTimer = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">dataRecovery</span>(<span class=\"hljs-params\">n</span>){\n      <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n      oTimer = <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n        cxt.<span class=\"hljs-title function_\">clearRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n        <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; dataArr.<span class=\"hljs-property\">length</span>; i++){\n          <span class=\"hljs-keyword\">var</span> temp = dataArr[i];\n          <span class=\"hljs-keyword\">if</span>(temp.<span class=\"hljs-property\">mark</span>){\n            <span class=\"hljs-keyword\">var</span> x0 = temp.<span class=\"hljs-property\">endX</span>;\n            <span class=\"hljs-keyword\">var</span> y0 = temp.<span class=\"hljs-property\">endY</span>;\n            <span class=\"hljs-keyword\">var</span> disX = temp.<span class=\"hljs-property\">x</span> - x0;\n            <span class=\"hljs-keyword\">var</span> disY = temp.<span class=\"hljs-property\">y</span> - y0;\n            cxt.<span class=\"hljs-title function_\">fillRect</span>(x0 + disX/n,y0 + disY/n,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);  \n          }<span class=\"hljs-keyword\">else</span>{\n            cxt.<span class=\"hljs-title function_\">fillRect</span>(temp.<span class=\"hljs-property\">x</span>,temp.<span class=\"hljs-property\">y</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>);\n          }\n        }   \n        <span class=\"hljs-title function_\">dataRecovery</span>(n-<span class=\"hljs-number\">1</span>);    \n        <span class=\"hljs-keyword\">if</span>(n === <span class=\"hljs-number\">1</span>){\n          <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n        }      \n      },<span class=\"hljs-number\">17</span>);\n    } \n  }  \n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1005,1266"}}],"payload":{"tag":"h3","lines":"999,1000"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
