<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"","children":[{"content":"Day06&#x56de;&#x987e;","children":[{"content":"&#x591a;&#x7ebf;&#x7a0b;&#x722c;&#x866b;","children":[{"content":"&#x601d;&#x8def;","children":[{"content":"<pre data-lines=\"6,37\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x5c06;&#x5f85;&#x722c;&#x53d6;&#x7684;URL&#x5730;&#x5740;&#x5b58;&#x653e;&#x5230;&#x961f;&#x5217;&#x4e2d;\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x4ece;&#x961f;&#x5217;&#x4e2d;&#x83b7;&#x53d6;&#x5730;&#x5740;,&#x8fdb;&#x884c;&#x6570;&#x636e;&#x6293;&#x53d6;\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x6ce8;&#x610f;&#x83b7;&#x53d6;&#x5730;&#x5740;&#x8fc7;&#x7a0b;&#x4e2d;&#x7a0b;&#x5e8f;&#x963b;&#x585e;&#x95ee;&#x9898;&#x3001;&#x7ebf;&#x7a0b;&#x9501;&#x95ee;&#x9898;\n    <span class=\"hljs-number\">3.1</span>) &#x65b9;&#x5f0f;&#x4e00;\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n        lock.acquire()\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> q.empty():\n            url = q.get()\n            lock.release()\n            ... ... \n        <span class=\"hljs-keyword\">else</span>:\n            lock.release()\n            <span class=\"hljs-keyword\">break</span>\n        \n    <span class=\"hljs-number\">3.2</span>) &#x65b9;&#x5f0f;&#x4e8c;-&gt;&#x3010;&#x591a;&#x7ea7;&#x9875;&#x9762;&#x6570;&#x636e;&#x6293;&#x53d6;&#x6240;&#x9700;&#x3011;\n    <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n        <span class=\"hljs-keyword\">try</span>:\n            lock.acquire()\n            url = q.get(block=<span class=\"hljs-literal\">True</span>,timeout=<span class=\"hljs-number\">3</span>)\n            lock.release()\n            ... ... \n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            lock.release()\n            <span class=\"hljs-keyword\">break</span>\n            \n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x6ce8;&#x610f;: &#x4f7f;&#x7528;&#x591a;&#x7ebf;&#x7a0b;&#x722c;&#x53d6;&#x591a;&#x7ea7;&#x9875;&#x9762;\n    <span class=\"hljs-number\">4.1</span>) &#x521b;&#x5efa;&#x5bf9;&#x5e94;&#x961f;&#x5217;&#xff0c;&#x7528;&#x6765;&#x5b58;&#x50a8;&#x4e0d;&#x540c;&#x7ea7;&#x9875;&#x9762;&#x7684;URL&#x5730;&#x5740;\n    <span class=\"hljs-number\">4.2</span>) &#x9664;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x961f;&#x5217;&#x5916;&#xff0c;&#x5176;&#x4ed6;&#x961f;&#x5217;&#x83b7;&#x53d6;&#x5730;&#x5740;&#x5747;&#x91c7;&#x7528;&#x5982;&#x4e0b;&#x65b9;&#x5f0f;\n         url = q.get(block=<span class=\"hljs-literal\">True</span>,timeout=<span class=\"hljs-number\">2</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,37"}}],"payload":{"tag":"h3","lines":"4,5"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"&#x89e3;&#x6790;&#x6a21;&#x5757;&#x6c47;&#x603b;","children":[{"content":"re&#x3001;lxml+xpath&#x3001;json","children":[{"content":"<pre data-lines=\"43,60\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;re\n    <span class=\"hljs-keyword\">import</span> re\n    pattern = re.<span class=\"hljs-built_in\">compile</span>(<span class=\"hljs-string\">r&apos;&apos;</span>,re.S)\n    r_list = pattern.findall(html)\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;lxml+xpath\n    <span class=\"hljs-keyword\">from</span> lxml <span class=\"hljs-keyword\">import</span> etree\n    parse_html = etree.HTML(html)\n    r_list = parse_html.xpath(<span class=\"hljs-string\">&apos;&apos;</span>)\n\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;json\n    <span class=\"hljs-number\">3.1</span>) &#x54cd;&#x5e94;&#x5185;&#x5bb9;&#x7531;json&#x8f6c;&#x4e3a;python : html = json.loads(res.text) \n    <span class=\"hljs-number\">3.2</span>) &#x6240;&#x6293;&#x6570;&#x636e;&#x4fdd;&#x5b58;&#x5230;json&#x6587;&#x4ef6;\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;xxx.json&apos;</span>,<span class=\"hljs-string\">&apos;a&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            json.dump(item_list,f,ensure_ascii=<span class=\"hljs-literal\">False</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"43,60"}}],"payload":{"tag":"h3","lines":"41,42"}}],"payload":{"tag":"h2","lines":"39,40"}},{"content":"selenium+phantomjs | chrome | firefox","children":[{"content":"&#x7279;&#x70b9;","children":[{"content":"<pre data-lines=\"65,69\"><code class=\"language-python\">&#x3010;1&#x3011;&#x7b80;&#x5355;&#xff0c;&#x65e0;&#x9700;&#x53bb;&#x8be6;&#x7ec6;&#x6293;&#x53d6;&#x5206;&#x6790;&#x7f51;&#x7edc;&#x6570;&#x636e;&#x5305;&#xff0c;&#x4f7f;&#x7528;&#x771f;&#x5b9e;&#x6d4f;&#x89c8;&#x5668;\n&#x3010;2&#x3011;&#x9700;&#x8981;&#x7b49;&#x5f85;&#x9875;&#x9762;&#x5143;&#x7d20;&#x52a0;&#x8f7d;&#xff0c;&#x9700;&#x8981;&#x65f6;&#x95f4;&#xff0c;&#x6548;&#x7387;&#x4f4e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"65,69"}}],"payload":{"tag":"h3","lines":"63,64"}},{"content":"&#x5b89;&#x88c5;","children":[{"content":"<pre data-lines=\"72,83\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x4e0b;&#x8f7d;&#x3001;&#x89e3;&#x538b;\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x6dfb;&#x52a0;&#x5230;&#x7cfb;&#x7edf;&#x73af;&#x5883;&#x53d8;&#x91cf;\n    <span class=\"hljs-number\">2.1</span>) windows: &#x62f7;&#x8d1d;&#x5230;Python&#x5b89;&#x88c5;&#x76ee;&#x5f55;&#x7684;Scripts&#x76ee;&#x5f55;&#x4e2d;\n    <span class=\"hljs-number\">2.2</span>) Linux :  &#x62f7;&#x8d1d;&#x5230;/usr/<span class=\"hljs-built_in\">bin</span>&#x76ee;&#x5f55;&#x4e2d; : sudo cp chromedriver /usr/<span class=\"hljs-built_in\">bin</span>/\n        \n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;Linux&#x4e2d;&#x9700;&#x8981;&#x4fee;&#x6539;&#x6743;&#x9650;(&#x4e3b;&#x8981;&#x662f;&#x6dfb;&#x52a0;x&#x6743;&#x9650;)\n    sudo chmod <span class=\"hljs-number\">777</span> /usr/<span class=\"hljs-built_in\">bin</span>/chromedriver\n    sudo chmod +x /usr/<span class=\"hljs-built_in\">bin</span>/chromedriver\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"72,83"}}],"payload":{"tag":"h3","lines":"70,71"}},{"content":"&#x4f7f;&#x7528;&#x6d41;&#x7a0b;","children":[{"content":"<pre data-lines=\"86,101\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x521b;&#x5efa;&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61;</span>\nbrowser = webdriver.Firefox(executable_path=<span class=\"hljs-string\">&apos;/xxx/geckodriver&apos;</span>)\n<span class=\"hljs-comment\"># 2&#x3001;&#x8f93;&#x5165;&#x7f51;&#x5740;</span>\nbrowser.get(<span class=\"hljs-string\">&apos;URL&apos;</span>)\n<span class=\"hljs-comment\"># 3&#x3001;&#x67e5;&#x627e;&#x8282;&#x70b9;</span>\nbrower.find_xxxx\n<span class=\"hljs-comment\"># 4&#x3001;&#x505a;&#x5bf9;&#x5e94;&#x64cd;&#x4f5c;</span>\nelement.send_keys(<span class=\"hljs-string\">&apos;&apos;</span>)\nelement.click()\n<span class=\"hljs-comment\"># 5&#x3001;&#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;</span>\nbrowser.quit()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"86,101"}}],"payload":{"tag":"h3","lines":"84,85"}},{"content":"&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61;(browser)&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"104,112\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;browser.get(url=url)   - &#x5730;&#x5740;&#x680f;&#x8f93;&#x5165;url&#x5730;&#x5740;&#x5e76;&#x786e;&#x8ba4;   \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;browser.quit()         - &#x5173;&#x95ed;&#x6d4f;&#x89c8;&#x5668;\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;browser.close()        - &#x5173;&#x95ed;&#x5f53;&#x524d;&#x9875;\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;browser.page_source    - HTML&#x7ed3;&#x6784;&#x6e90;&#x7801;\n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;browser.page_source.find(<span class=\"hljs-string\">&apos;&#x5b57;&#x7b26;&#x4e32;&apos;</span>) - &#x6ca1;&#x6709;&#x627e;&#x5230;&#x8fd4;&#x56de; -<span class=\"hljs-number\">1</span> ,&#x7ecf;&#x5e38;&#x7528;&#x4e8e;&#x5224;&#x65ad;&#x662f;&#x5426;&#x4e3a;&#x6700;&#x540e;&#x4e00;&#x9875;\n&#x3010;<span class=\"hljs-number\">6</span>&#x3011;browser.maximize_window() - &#x6d4f;&#x89c8;&#x5668;&#x7a97;&#x53e3;&#x6700;&#x5927;&#x5316;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"104,112"}}],"payload":{"tag":"h3","lines":"102,103"}},{"content":"&#x5b9a;&#x4f4d;&#x8282;&#x70b9;&#x7684;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"115,129\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6700;&#x5e38;&#x7528;     -  browser.find_element_by_id(<span class=\"hljs-string\">&apos;id&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x6700;&#x5e38;&#x7528;     -  browser.find_element_by_name(<span class=\"hljs-string\">&apos;name&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x6700;&#x5e38;&#x7528;     -  browser.find_element_by_class_name(<span class=\"hljs-string\">&apos;class&#x5c5e;&#x6027;&#x503c;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x6700;&#x4e07;&#x80fd;     -  browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;xpath&#x8868;&#x8fbe;&#x5f0f;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;&#x6587;&#x5b57;&#x94fe;&#x63a5;   -  browser.find_element_by_link_text(<span class=\"hljs-string\">&apos;&#x94fe;&#x63a5;&#x6587;&#x672c;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">6</span>&#x3011;&#x6587;&#x5b57;&#x94fe;&#x63a5;   -  browser.find_element_by_partical_link_text(<span class=\"hljs-string\">&apos;&#x90e8;&#x5206;&#x94fe;&#x63a5;&#x6587;&#x672c;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">7</span>&#x3011;&#x4e5f;&#x8fd8;&#x4e0d;&#x9519;   -  browser.find_element_by_css_selector(<span class=\"hljs-string\">&apos;css&#x8868;&#x8fbe;&#x5f0f;&apos;</span>)\n&#x3010;<span class=\"hljs-number\">8</span>&#x3011;&#x6700;&#x4e0d;&#x9760;&#x8c31;   -  browser.find_element_by_tag_name(<span class=\"hljs-string\">&apos;&#x6807;&#x8bb0;&#x540d;&#x79f0;&apos;</span>)\n\n&#x3010;&#x6ce8;&#x610f;&#x3011;\n   <span class=\"hljs-number\">1</span>) &#x7ed3;&#x679c;&#x4e3a;&#x8282;&#x70b9;&#x5bf9;&#x8c61;:     find_element_\n   <span class=\"hljs-number\">2</span>) &#x7ed3;&#x679c;&#x4e3a;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5217;&#x8868;: find_elements_\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"115,129"}}],"payload":{"tag":"h3","lines":"113,114"}},{"content":"&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"132,140\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;node.send_keys(<span class=\"hljs-string\">&apos;&apos;</span>)        - &#x5411;&#x6587;&#x672c;&#x6846;&#x53d1;&#x9001;&#x5185;&#x5bb9;\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;node.click()              - &#x70b9;&#x51fb;\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;node.clear()              - &#x6e05;&#x7a7a;&#x6587;&#x672c;\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;node.is_enabled()         - &#x5224;&#x65ad;&#x6309;&#x94ae;&#x662f;&#x5426;&#x53ef;&#x7528;\n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;node.get_attribute(<span class=\"hljs-string\">&apos;href&apos;</span>)- &#x83b7;&#x53d6;&#x8282;&#x70b9;&#x5c5e;&#x6027;&#x503c;\n&#x3010;<span class=\"hljs-number\">6</span>&#x3011;node.text                 - &#x83b7;&#x53d6;&#x8282;&#x70b9;&#x6587;&#x672c;&#x5185;&#x5bb9;&#xff08;&#x5305;&#x542b;&#x5b50;&#x8282;&#x70b9;&#x548c;&#x540e;&#x4ee3;&#x8282;&#x70b9;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"132,140"}}],"payload":{"tag":"h3","lines":"130,131"}}],"payload":{"tag":"h2","lines":"61,62"}}],"payload":{"tag":"h1","lines":"0,1"}},{"content":"Day07&#x7b14;&#x8bb0;","children":[{"content":"selenium+PhantomJS|Chrome|Firefox","children":[{"content":"chromedriver&#x8bbe;&#x7f6e;&#x65e0;&#x754c;&#x9762;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"147,155\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\noptions = webdriver.ChromeOptions()\n<span class=\"hljs-comment\"># &#x6dfb;&#x52a0;&#x65e0;&#x754c;&#x9762;&#x53c2;&#x6570;</span>\noptions.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\nbrowser = webdriver.Chrome(options=options)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"147,155"}}],"payload":{"tag":"h3","lines":"145,146"}}],"payload":{"tag":"h2","lines":"143,144"}},{"content":"&#x4eac;&#x4e1c;&#x722c;&#x866b;","children":[{"content":"&#x76ee;&#x6807;","children":[{"content":"<pre data-lines=\"160,164\"><code class=\"language-python\">&#x3010;1&#x3011;&#x76ee;&#x6807;&#x7f51;&#x5740; &#xff1a;https://www.jd.com/\n&#x3010;2&#x3011;&#x6293;&#x53d6;&#x76ee;&#x6807; &#xff1a;&#x5546;&#x54c1;&#x540d;&#x79f0;&#x3001;&#x5546;&#x54c1;&#x4ef7;&#x683c;&#x3001;&#x8bc4;&#x4ef7;&#x6570;&#x91cf;&#x3001;&#x5546;&#x54c1;&#x5546;&#x5bb6;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"160,164"}}],"payload":{"tag":"h3","lines":"158,159"}},{"content":"&#x601d;&#x8def;&#x63d0;&#x9192;","children":[{"content":"<pre data-lines=\"167,174\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6253;&#x5f00;&#x4eac;&#x4e1c;&#xff0c;&#x5230;&#x5546;&#x54c1;&#x641c;&#x7d22;&#x9875;\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x5339;&#x914d;&#x6240;&#x6709;&#x5546;&#x54c1;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5217;&#x8868;\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x628a;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x7684;&#x6587;&#x672c;&#x5185;&#x5bb9;&#x53d6;&#x51fa;&#x6765;&#xff0c;&#x67e5;&#x770b;&#x89c4;&#x5f8b;&#xff0c;&#x662f;&#x5426;&#x6709;&#x66f4;&#x597d;&#x7684;&#x5904;&#x7406;&#x529e;&#x6cd5;&#xff1f;\n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x63d0;&#x53d6;&#x5b8c;<span class=\"hljs-number\">1</span>&#x9875;&#x540e;&#xff0c;&#x5224;&#x65ad;&#x5982;&#x679c;&#x4e0d;&#x662f;&#x6700;&#x540e;<span class=\"hljs-number\">1</span>&#x9875;&#xff0c;&#x5219;&#x70b9;&#x51fb;&#x4e0b;&#x4e00;&#x9875;\n    <span class=\"hljs-string\">&apos;&#x95ee;&#x9898;: &#x5982;&#x4f55;&#x5224;&#x65ad;&#x662f;&#x5426;&#x4e3a;&#x6700;&#x540e;1&#x9875;&#xff1f;&#xff1f;&#xff1f;&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"167,174"}}],"payload":{"tag":"h3","lines":"165,166"}},{"content":"&#x5b9e;&#x73b0;&#x6b65;&#x9aa4;","children":[{"content":"<pre data-lines=\"177,193\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x627e;&#x8282;&#x70b9;\n    <span class=\"hljs-number\">1.1</span>) &#x9996;&#x9875;&#x641c;&#x7d22;&#x6846; : //*[@<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;key&quot;</span>]\n    <span class=\"hljs-number\">2.1</span>) &#x9996;&#x9875;&#x641c;&#x7d22;&#x6309;&#x94ae;   ://*[@<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;search&quot;</span>]/div/div[<span class=\"hljs-number\">2</span>]/button\n    <span class=\"hljs-number\">2.3</span>) &#x5546;&#x54c1;&#x9875;&#x7684; &#x5546;&#x54c1;&#x4fe1;&#x606f;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5217;&#x8868; ://*[@<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-string\">&quot;J_goodsList&quot;</span>]/ul/li\n    <span class=\"hljs-number\">2.4</span>) <span class=\"hljs-keyword\">for</span>&#x5faa;&#x73af;&#x904d;&#x5386;&#x540e;\n        a&gt; &#x540d;&#x79f0;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-name&quot;</span>]/a/em\n        b&gt; &#x4ef7;&#x683c;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-price&quot;</span>]\n        c&gt; &#x8bc4;&#x8bba;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-commit&quot;</span>]/strong\n        d&gt; &#x5546;&#x5bb6;: .//div[@<span class=\"hljs-keyword\">class</span>=<span class=\"hljs-string\">&quot;p-shopnum&quot;</span>]\n    \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x6267;&#x884c;JS&#x811a;&#x672c;&#xff0c;&#x83b7;&#x53d6;&#x52a8;&#x6001;&#x52a0;&#x8f7d;&#x6570;&#x636e;\n    browser.execute_script(\n      <span class=\"hljs-string\">&apos;window.scrollTo(0,document.body.scrollHeight)&apos;</span>\n    )\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"177,193"}}],"payload":{"tag":"h3","lines":"175,176"}},{"content":"&#x4ee3;&#x7801;&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"196,247\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JdSpider</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.url = <span class=\"hljs-string\">&apos;https://www.jd.com/&apos;</span>\n        <span class=\"hljs-comment\"># &#x8bbe;&#x7f6e;&#x65e0;&#x754c;&#x9762;&#x6a21;&#x5f0f;</span>\n        <span class=\"hljs-variable language_\">self</span>.options = webdriver.ChromeOptions()\n        <span class=\"hljs-variable language_\">self</span>.options.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\n        <span class=\"hljs-variable language_\">self</span>.browser = webdriver.Chrome(options=<span class=\"hljs-variable language_\">self</span>.options)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># get():&#x7b49;&#x9875;&#x9762;&#x6240;&#x6709;&#x5143;&#x7d20;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x540e;,&#x624d;&#x4f1a;&#x6267;&#x884c;&#x540e;&#x9762;&#x7684;&#x4ee3;&#x7801;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.get(<span class=\"hljs-variable language_\">self</span>.url)\n        <span class=\"hljs-comment\"># &#x641c;&#x7d22;&#x6846; + &#x641c;&#x7d22;&#x6309;&#x94ae;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;key&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x722c;&#x866b;&#x4e66;&apos;</span>)\n        <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;search&quot;]/div/div[2]/button&apos;</span>).click()\n\n    <span class=\"hljs-comment\"># &#x5faa;&#x73af;&#x4f53;&#x4e2d;&#x7684;&#x51fd;&#x6570;: &#x62c9;&#x8fdb;&#x5ea6;&#x6761;,&#x63d0;&#x53d6;&#x6570;&#x636e;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># &#x6267;&#x884c;js&#x811a;&#x672c;,&#x5c06;&#x8fdb;&#x5ea6;&#x6761;&#x62c9;&#x5230;&#x6700;&#x5e95;&#x90e8;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.execute_script(\n            <span class=\"hljs-string\">&apos;window.scrollTo(0,document.body.scrollHeight)&apos;</span>\n        )\n        <span class=\"hljs-comment\"># &#x7ed9;&#x9875;&#x9762;&#x5143;&#x7d20;&#x52a0;&#x8f7d;&#x9884;&#x7559;&#x65f6;&#x95f4;</span>\n        time.sleep(<span class=\"hljs-number\">3</span>)\n        li_list = <span class=\"hljs-variable language_\">self</span>.browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;J_goodsList&quot;]/ul/li&apos;</span>)\n\n        <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> li_list:\n            item = {}\n            item[<span class=\"hljs-string\">&apos;price&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-price&quot;]&apos;</span>).text\n            item[<span class=\"hljs-string\">&apos;mame&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-name&quot;]/a/em&apos;</span>).text\n            item[<span class=\"hljs-string\">&apos;commit&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-commit&quot;]/strong&apos;</span>).text\n            item[<span class=\"hljs-string\">&apos;shop&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-shopnum&quot;]&apos;</span>).text\n            <span class=\"hljs-built_in\">print</span>(item)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.get_html()\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-variable language_\">self</span>.parse_html()\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable language_\">self</span>.browser.page_source.find(<span class=\"hljs-string\">&apos;pn-next disabled&apos;</span>) == -<span class=\"hljs-number\">1</span>:\n                <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;J_bottomPage&quot;]/span[1]/a[9]&apos;</span>).click()\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-variable language_\">self</span>.browser.quit()\n                <span class=\"hljs-keyword\">break</span>\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    spider = JdSpider()\n    spider.run()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"196,247"}}],"payload":{"tag":"h3","lines":"194,195"}}],"payload":{"tag":"h2","lines":"156,157"}},{"content":"selenium - &#x952e;&#x76d8;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"250,268\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium.webdriver.common.keys <span class=\"hljs-keyword\">import</span> Keys\n\nbrowser = webdriver.Chrome()\nbrowser.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n<span class=\"hljs-comment\"># 1&#x3001;&#x5728;&#x641c;&#x7d22;&#x6846;&#x4e2d;&#x8f93;&#x5165;&quot;selenium&quot;</span>\nbrowser.find_element_by_id(<span class=\"hljs-string\">&apos;kw&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x8d75;&#x4e3d;&#x9896;&apos;</span>)\n<span class=\"hljs-comment\"># 2&#x3001;&#x8f93;&#x5165;&#x7a7a;&#x683c;</span>\nbrowser.find_element_by_id(<span class=\"hljs-string\">&apos;kw&apos;</span>).send_keys(Keys.SPACE)\n<span class=\"hljs-comment\"># 3&#x3001;Ctrl+a &#x6a21;&#x62df;&#x5168;&#x9009;</span>\nbrowser.find_element_by_id(<span class=\"hljs-string\">&apos;kw&apos;</span>).send_keys(Keys.CONTROL, <span class=\"hljs-string\">&apos;a&apos;</span>)\n<span class=\"hljs-comment\"># 4&#x3001;Ctrl+c &#x6a21;&#x62df;&#x590d;&#x5236;</span>\nbrowser.find_element_by_id(<span class=\"hljs-string\">&apos;kw&apos;</span>).send_keys(Keys.CONTROL, <span class=\"hljs-string\">&apos;c&apos;</span>)\n<span class=\"hljs-comment\"># 5&#x3001;Ctrl+v &#x6a21;&#x62df;&#x7c98;&#x8d34;</span>\nbrowser.find_element_by_id(<span class=\"hljs-string\">&apos;kw&apos;</span>).send_keys(Keys.CONTROL, <span class=\"hljs-string\">&apos;v&apos;</span>)\n<span class=\"hljs-comment\"># 6&#x3001;&#x8f93;&#x5165;&#x56de;&#x8f66;,&#x4ee3;&#x66ff; &#x641c;&#x7d22; &#x6309;&#x94ae;</span>\nbrowser.find_element_by_id(<span class=\"hljs-string\">&apos;kw&apos;</span>).send_keys(Keys.ENTER)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"250,268"}}],"payload":{"tag":"h2","lines":"248,249"}},{"content":"<mark>selenium - &#x9f20;&#x6807;&#x64cd;&#x4f5c;</mark>","children":[{"content":"<pre data-lines=\"271,286\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-comment\"># &#x5bfc;&#x5165;&#x9f20;&#x6807;&#x4e8b;&#x4ef6;&#x7c7b;</span>\n<span class=\"hljs-keyword\">from</span> selenium.webdriver <span class=\"hljs-keyword\">import</span> ActionChains\n\ndriver = webdriver.Chrome()\ndriver.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n\n<span class=\"hljs-comment\"># &#x79fb;&#x52a8;&#x5230; &#x8bbe;&#x7f6e;&#xff0c;perform()&#x662f;&#x771f;&#x6b63;&#x6267;&#x884c;&#x64cd;&#x4f5c;&#xff0c;&#x5fc5;&#x987b;&#x6709;</span>\nelement = driver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;u1&quot;]/a[8]&apos;</span>)\nActionChains(driver).move_to_element(element).perform()\n\n<span class=\"hljs-comment\"># &#x5355;&#x51fb;&#xff0c;&#x5f39;&#x51fa;&#x7684;Ajax&#x5143;&#x7d20;&#xff0c;&#x6839;&#x636e;&#x94fe;&#x63a5;&#x8282;&#x70b9;&#x7684;&#x6587;&#x672c;&#x5185;&#x5bb9;&#x67e5;&#x627e;</span>\ndriver.find_element_by_link_text(<span class=\"hljs-string\">&apos;&#x9ad8;&#x7ea7;&#x641c;&#x7d22;&apos;</span>).click()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"271,286"}}],"payload":{"tag":"h2","lines":"269,270"}},{"content":"selenium - &#x5207;&#x6362;&#x9875;&#x9762;","children":[{"content":"&#x9002;&#x7528;&#x7f51;&#x7ad9;+&#x5e94;&#x5bf9;&#x65b9;&#x6848;","children":[{"content":"<pre data-lines=\"291,302\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x9002;&#x7528;&#x7f51;&#x7ad9;&#x7c7b;&#x578b;\n    &#x9875;&#x9762;&#x4e2d;&#x70b9;&#x5f00;&#x94fe;&#x63a5;&#x51fa;&#x73b0;&#x65b0;&#x7684;&#x7a97;&#x53e3;&#xff0c;&#x4f46;&#x662f;&#x6d4f;&#x89c8;&#x5668;&#x5bf9;&#x8c61;browser&#x8fd8;&#x662f;&#x4e4b;&#x524d;&#x9875;&#x9762;&#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x9700;&#x8981;&#x5207;&#x6362;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x7a97;&#x53e3;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;\n    \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x5e94;&#x5bf9;&#x65b9;&#x6848; - browser.switch_to.window()\n    \n    <span class=\"hljs-comment\"># &#x83b7;&#x53d6;&#x5f53;&#x524d;&#x6240;&#x6709;&#x53e5;&#x67c4;&#xff08;&#x7a97;&#x53e3;&#xff09;- [handle1,handle2]</span>\n    all_handles = browser.window_handles\n    <span class=\"hljs-comment\"># &#x5207;&#x6362;browser&#x5230;&#x65b0;&#x7684;&#x7a97;&#x53e3;&#xff0c;&#x83b7;&#x53d6;&#x65b0;&#x7a97;&#x53e3;&#x7684;&#x5bf9;&#x8c61;</span>\n    browser.switch_to.window(all_handles[<span class=\"hljs-number\">1</span>])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"291,302"}}],"payload":{"tag":"h3","lines":"289,290"}},{"content":"&#x6c11;&#x653f;&#x90e8;&#x7f51;&#x7ad9;&#x6848;&#x4f8b;-selenium","children":[{"content":"<pre data-lines=\"305,345\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x9002;&#x7528;selenium+Chrome&#x6293;&#x53d6;&#x6c11;&#x653f;&#x90e8;&#x884c;&#x653f;&#x533a;&#x5212;&#x4ee3;&#x7801;\nhttp://www.mca.gov.cn/article/sj/xzqh/2019/\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GovSpider</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># &#x8bbe;&#x7f6e;&#x65e0;&#x754c;&#x9762;</span>\n        options = webdriver.ChromeOptions()\n        options.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\n        <span class=\"hljs-comment\"># &#x6dfb;&#x52a0;&#x53c2;&#x6570;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser = webdriver.Chrome(options=options)\n        <span class=\"hljs-variable language_\">self</span>.one_url = <span class=\"hljs-string\">&apos;http://www.mca.gov.cn/article/sj/xzqh/2019/&apos;</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_incr_url</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.browser.get(<span class=\"hljs-variable language_\">self</span>.one_url)\n        <span class=\"hljs-comment\"># &#x63d0;&#x53d6;&#x6700;&#x65b0;&#x94fe;&#x63a5;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x5e76;&#x70b9;&#x51fb;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//td[@class=&quot;arlisttd&quot;]/a[contains(@title,&quot;&#x4ee3;&#x7801;&quot;)]&apos;</span>).click()\n        <span class=\"hljs-comment\"># &#x5207;&#x6362;&#x53e5;&#x67c4;</span>\n        all_handlers = <span class=\"hljs-variable language_\">self</span>.browser.window_handles\n        <span class=\"hljs-variable language_\">self</span>.browser.switch_to.window(all_handlers[<span class=\"hljs-number\">1</span>])\n        <span class=\"hljs-variable language_\">self</span>.get_data()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_data</span>(<span class=\"hljs-params\">self</span>):\n        tr_list = <span class=\"hljs-variable language_\">self</span>.browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//tr[@height=&quot;19&quot;]&apos;</span>)\n        <span class=\"hljs-keyword\">for</span> tr <span class=\"hljs-keyword\">in</span> tr_list:\n            code = tr.find_element_by_xpath(<span class=\"hljs-string\">&apos;./td[2]&apos;</span>).text.strip()\n            name = tr.find_element_by_xpath(<span class=\"hljs-string\">&apos;./td[3]&apos;</span>).text.strip()\n            <span class=\"hljs-built_in\">print</span>(name,code)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.get_incr_url()\n        <span class=\"hljs-variable language_\">self</span>.browser.quit()\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n  spider = GovSpider()\n  spider.run()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"305,345"}}],"payload":{"tag":"h3","lines":"303,304"}}],"payload":{"tag":"h2","lines":"287,288"}},{"content":"selenium - iframe","children":[{"content":"&#x7279;&#x70b9;+&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"350,370\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x7279;&#x70b9;\n    &#x7f51;&#x9875;&#x4e2d;&#x5d4c;&#x5957;&#x4e86;&#x7f51;&#x9875;&#xff0c;&#x5148;&#x5207;&#x6362;&#x5230;iframe&#xff0c;&#x7136;&#x540e;&#x518d;&#x6267;&#x884c;&#x5176;&#x4ed6;&#x64cd;&#x4f5c;\n \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x5904;&#x7406;&#x6b65;&#x9aa4;\n    <span class=\"hljs-number\">2.1</span>) &#x5207;&#x6362;&#x5230;&#x8981;&#x5904;&#x7406;&#x7684;Frame\n    <span class=\"hljs-number\">2.2</span>) &#x5728;Frame&#x4e2d;&#x5b9a;&#x4f4d;&#x9875;&#x9762;&#x5143;&#x7d20;&#x5e76;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;\n    <span class=\"hljs-number\">2.3</span>) &#x8fd4;&#x56de;&#x5f53;&#x524d;&#x5904;&#x7406;&#x7684;Frame&#x7684;&#x4e0a;&#x4e00;&#x7ea7;&#x9875;&#x9762;&#x6216;&#x4e3b;&#x9875;&#x9762;\n\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x5e38;&#x7528;&#x65b9;&#x6cd5;\n    <span class=\"hljs-number\">3.1</span>) &#x5207;&#x6362;&#x5230;frame  -  browser.switch_to.frame(frame&#x8282;&#x70b9;&#x5bf9;&#x8c61;)\n    <span class=\"hljs-number\">3.2</span>) &#x8fd4;&#x56de;&#x4e0a;&#x4e00;&#x7ea7;   -  browser.switch_to.parent_frame()\n    <span class=\"hljs-number\">3.3</span>) &#x8fd4;&#x56de;&#x4e3b;&#x9875;&#x9762;   -  browser.switch_to.default_content()\n    \n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x4f7f;&#x7528;&#x8bf4;&#x660e;\n    <span class=\"hljs-number\">4.1</span>) &#x65b9;&#x6cd5;&#x4e00;: &#x9ed8;&#x8ba4;&#x652f;&#x6301;<span class=\"hljs-built_in\">id</span>&#x548c;name&#x5c5e;&#x6027;&#x503c; : switch_to.frame(<span class=\"hljs-built_in\">id</span>&#x5c5e;&#x6027;&#x503c;|name&#x5c5e;&#x6027;&#x503c;)\n    <span class=\"hljs-number\">4.2</span>) &#x65b9;&#x6cd5;&#x4e8c;:\n        a&gt; &#x5148;&#x627e;&#x5230;frame&#x8282;&#x70b9; : frame_node = browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;xxxx&apos;</span>)\n        b&gt; &#x5728;&#x5207;&#x6362;&#x5230;frame   : browser.switch_to.frame(frame_node)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"350,370"}}],"payload":{"tag":"h3","lines":"348,349"}},{"content":"&#x793a;&#x4f8b;1 - &#x767b;&#x5f55;&#x8c46;&#x74e3;&#x7f51;","children":[{"content":"<pre data-lines=\"373,398\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x767b;&#x5f55;&#x8c46;&#x74e3;&#x7f51;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-comment\"># &#x6253;&#x5f00;&#x8c46;&#x74e3;&#x5b98;&#x7f51;</span>\nbrowser = webdriver.Chrome()\nbrowser.get(<span class=\"hljs-string\">&apos;https://www.douban.com/&apos;</span>)\n\n<span class=\"hljs-comment\"># &#x5207;&#x6362;&#x5230;iframe&#x5b50;&#x9875;&#x9762;</span>\nlogin_frame = browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;anony-reg-new&quot;]/div/div[1]/iframe&apos;</span>)\nbrowser.switch_to.frame(login_frame)\n\n<span class=\"hljs-comment\"># &#x5bc6;&#x7801;&#x767b;&#x5f55; + &#x7528;&#x6237;&#x540d; + &#x5bc6;&#x7801; + &#x767b;&#x5f55;&#x8c46;&#x74e3;</span>\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;/html/body/div[1]/div[1]/ul[1]/li[2]&apos;</span>).click()\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;username&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x7684;&#x7528;&#x6237;&#x540d;&apos;</span>)\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;password&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x81ea;&#x5df1;&#x7684;&#x5bc6;&#x7801;&apos;</span>)\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;/html/body/div[1]/div[2]/div[1]/div[5]/a&apos;</span>).click()\ntime.sleep(<span class=\"hljs-number\">3</span>)\n\n<span class=\"hljs-comment\"># &#x70b9;&#x51fb;&#x6211;&#x7684;&#x8c46;&#x74e3;</span>\nbrowser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;db-nav-sns&quot;]/div/div/div[3]/ul/li[2]/a&apos;</span>).click()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"373,398"}}],"payload":{"tag":"h3","lines":"371,372"}},{"content":"&#x793a;&#x4f8b;2-&#x767b;&#x5f55;QQ&#x90ae;&#x7bb1;","children":[{"content":"<pre data-lines=\"401,416\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\ndriver = webdriver.Chrome()\ndriver.get(<span class=\"hljs-string\">&apos;https://mail.qq.com/&apos;</span>)\n\n<span class=\"hljs-comment\"># &#x5207;&#x6362;&#x5230;iframe&#x5b50;&#x6846;&#x67b6;</span>\ndriver.switch_to.frame(<span class=\"hljs-string\">&quot;login_frame&quot;</span>)\n\n<span class=\"hljs-comment\"># &#x7528;&#x6237;&#x540d;+&#x5bc6;&#x7801;+&#x767b;&#x5f55;</span>\ndriver.find_element_by_id(<span class=\"hljs-string\">&apos;u&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;2621470058&apos;</span>)\ndriver.find_element_by_id(<span class=\"hljs-string\">&apos;p&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;zhanshen001&apos;</span>)\ndriver.find_element_by_id(<span class=\"hljs-string\">&apos;login_button&apos;</span>).click()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"401,416"}}],"payload":{"tag":"h3","lines":"399,400"}},{"content":"selenium+phantomjs|chrome|firefox&#x5c0f;&#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"419,445\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x8bbe;&#x7f6e;&#x65e0;&#x754c;&#x9762;&#x6a21;&#x5f0f;\n    options = webdriver.ChromeOptions()\n    options.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\n    browser = webdriver.Chrome(excutable_path=<span class=\"hljs-string\">&apos;/home/tarena/chromedriver&apos;</span>)\n    \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;browser&#x6267;&#x884c;JS&#x811a;&#x672c;\n    browser.execute_script(<span class=\"hljs-string\">&apos;window.scrollTo(0,document.body.scrollHeight)&apos;</span>)\n    \n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x952e;&#x76d8;&#x64cd;&#x4f5c;\n    <span class=\"hljs-keyword\">from</span> selenium.webdriver.common.keys <span class=\"hljs-keyword\">import</span> Keys\n    \n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x9f20;&#x6807;&#x64cd;&#x4f5c;\n    <span class=\"hljs-keyword\">from</span> selenium.webdriver <span class=\"hljs-keyword\">import</span> ActionChains\n    ActionChains(browser).move_to_element(<span class=\"hljs-string\">&apos;node&apos;</span>).perform()\n    \n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;&#x5207;&#x6362;&#x53e5;&#x67c4; - switch_to.frame(handle)\n    all_handles = browser.window_handles\n    browser.switch_to.window(all_handles[<span class=\"hljs-number\">1</span>])\n    <span class=\"hljs-comment\"># &#x5f00;&#x59cb;&#x8fdb;&#x884c;&#x6570;&#x636e;&#x6293;&#x53d6;</span>\n    browser.close()\n    browser.switch_to.window(all_handles[<span class=\"hljs-number\">0</span>])\n    \n&#x3010;<span class=\"hljs-number\">6</span>&#x3011;iframe&#x5b50;&#x9875;&#x9762;\n    browser.switch_to.frame(frame_node)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"419,445"}}],"payload":{"tag":"h3","lines":"417,418"}},{"content":"lxml&#x4e2d;&#x7684;xpath &#x548c; selenium&#x4e2d;&#x7684;xpath&#x7684;&#x533a;&#x522b;","children":[{"content":"<pre data-lines=\"448,463\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;lxml&#x4e2d;&#x7684;xpath&#x7528;&#x6cd5; - &#x63a8;&#x8350;&#x81ea;&#x5df1;&#x624b;&#x5199;\n    div_list = p.xpath(<span class=\"hljs-string\">&apos;//div[@class=&quot;abc&quot;]/div&apos;</span>)\n    item = {}\n    <span class=\"hljs-keyword\">for</span> div <span class=\"hljs-keyword\">in</span> div_list:\n        item[<span class=\"hljs-string\">&apos;name&apos;</span>] = div.xpath(<span class=\"hljs-string\">&apos;.//a/@href&apos;</span>)[<span class=\"hljs-number\">0</span>]\n        item[<span class=\"hljs-string\">&apos;likes&apos;</span>] = div.xpath(<span class=\"hljs-string\">&apos;.//a/text()&apos;</span>)[<span class=\"hljs-number\">0</span>]\n        \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;selenium&#x4e2d;&#x7684;xpath&#x7528;&#x6cd5; - &#x63a8;&#x8350;copy - copy xpath\n    div_list = browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//div[@class=&quot;abc&quot;]/div&apos;</span>)\n    item = {}\n    <span class=\"hljs-keyword\">for</span> div <span class=\"hljs-keyword\">in</span> div_list:\n        item[<span class=\"hljs-string\">&apos;name&apos;</span>] = div.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//a&apos;</span>).get_attribute(<span class=\"hljs-string\">&apos;href&apos;</span>)\n        item[<span class=\"hljs-string\">&apos;likes&apos;</span>] = div.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//a&apos;</span>).text\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"448,463"}}],"payload":{"tag":"h3","lines":"446,447"}}],"payload":{"tag":"h2","lines":"346,347"}},{"content":"scrapy&#x6846;&#x67b6;","children":[{"content":"&#x5b9a;&#x4e49;","children":[{"content":"<pre data-lines=\"468,471\"><code class=\"language-python\">&#x5f02;&#x6b65;&#x5904;&#x7406;&#x6846;&#x67b6;,&#x53ef;&#x914d;&#x7f6e;&#x548c;&#x53ef;&#x6269;&#x5c55;&#x7a0b;&#x5ea6;&#x975e;&#x5e38;&#x9ad8;,Python&#x4e2d;&#x4f7f;&#x7528;&#x6700;&#x5e7f;&#x6cdb;&#x7684;&#x722c;&#x866b;&#x6846;&#x67b6;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"468,471"}}],"payload":{"tag":"h3","lines":"466,467"}},{"content":"&#x5b89;&#x88c5;","children":[{"content":"<pre data-lines=\"474,494\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;Ubuntu&#x5b89;&#x88c5;\n    <span class=\"hljs-number\">1.1</span>) &#x5b89;&#x88c5;&#x4f9d;&#x8d56;&#x5305;\n        a&gt; sudo apt-get install libffi-dev\n        b&gt; sudo apt-get install libssl-dev\n        c&gt; sudo apt-get install libxml2-dev\n        d&gt; sudo apt-get install python3-dev\n        e&gt; sudo apt-get install libxslt1-dev\n        f&gt; sudo apt-get install zlib1g-dev\n        g&gt; sudo pip3 install -I -U service_identity\n        \n    <span class=\"hljs-number\">1.2</span>) &#x5b89;&#x88c5;scrapy&#x6846;&#x67b6;\n        a&gt; sudo pip3 install Scrapy\n        \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;Windows&#x5b89;&#x88c5;\n    <span class=\"hljs-number\">2.1</span>) cmd&#x547d;&#x4ee4;&#x884c;(&#x7ba1;&#x7406;&#x5458;): python -m pip install Scrapy\n   &#x3010;&#x6ce8;&#x610f;&#x3011;: &#x5982;&#x679c;&#x5b89;&#x88c5;&#x8fc7;&#x7a0b;&#x4e2d;&#x62a5;&#x5982;&#x4e0b;&#x9519;&#x8bef;\n            <span class=\"hljs-string\">&apos;Error: Microsoft Vistual C++ 14.0 is required xxx&apos;</span>\n            &#x5219;&#x5b89;&#x88c5;Windows&#x4e0b;&#x7684;Microsoft Vistual C++ <span class=\"hljs-number\">14.0</span> &#x5373;&#x53ef;&#xff08;&#x7b14;&#x8bb0;spiderfiles&#x4e2d;&#x6709;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"474,494"}}],"payload":{"tag":"h3","lines":"472,473"}},{"content":"Scrapy&#x6846;&#x67b6;&#x4e94;&#x5927;&#x7ec4;&#x4ef6;","children":[{"content":"<pre data-lines=\"497,507\"><code class=\"language-python\">&#x3010;1&#x3011;&#x5f15;&#x64ce;(Engine)      &#xff1a;&#x6574;&#x4e2a;&#x6846;&#x67b6;&#x6838;&#x5fc3;\n&#x3010;2&#x3011;&#x8c03;&#x5ea6;&#x5668;(Scheduler) &#xff1a;&#x7ef4;&#x62a4;&#x8bf7;&#x6c42;&#x961f;&#x5217;\n&#x3010;3&#x3011;&#x4e0b;&#x8f7d;&#x5668;(Downloader)&#xff1a;&#x83b7;&#x53d6;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;\n&#x3010;4&#x3011;&#x722c;&#x866b;&#x6587;&#x4ef6;(Spider)  &#xff1a;&#x6570;&#x636e;&#x89e3;&#x6790;&#x63d0;&#x53d6;\n&#x3010;5&#x3011;&#x9879;&#x76ee;&#x7ba1;&#x9053;(Pipeline)&#xff1a;&#x6570;&#x636e;&#x5165;&#x5e93;&#x5904;&#x7406;\n\n&#x3010;&#x4e2d;&#x95f4;&#x4ef6;1&#x3011;: &#x4e0b;&#x8f7d;&#x5668;&#x4e2d;&#x95f4;&#x4ef6;(Downloader Middlewares) : &#x5f15;&#x64ce;-&gt;&#x4e0b;&#x8f7d;&#x5668;,&#x5305;&#x88c5;&#x8bf7;&#x6c42;(&#x968f;&#x673a;&#x4ee3;&#x7406;&#x7b49;)\n&#x3010;&#x4e2d;&#x95f4;&#x4ef6;2&#x3011;: &#x8718;&#x86db;&#x4e2d;&#x95f4;&#x4ef6;(Spider Middlewares) : &#x5f15;&#x64ce;-&gt;&#x722c;&#x866b;&#x6587;&#x4ef6;,&#x53ef;&#x4fee;&#x6539;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;&#x5c5e;&#x6027;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"497,507"}}],"payload":{"tag":"h3","lines":"495,496"}},{"content":"scrapy&#x722c;&#x866b;&#x5de5;&#x4f5c;&#x6d41;&#x7a0b;","children":[{"content":"<pre data-lines=\"510,518\"><code class=\"language-python\">&#x3010;1&#x3011;&#x722c;&#x866b;&#x9879;&#x76ee;&#x542f;&#x52a8;,&#x7531;&#x5f15;&#x64ce;&#x5411;&#x722c;&#x866b;&#x7a0b;&#x5e8f;&#x7d22;&#x8981;&#x7b2c;&#x4e00;&#x6279;&#x8981;&#x722c;&#x53d6;&#x7684;URL,&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x53bb;&#x5165;&#x961f;&#x5217;\n&#x3010;2&#x3011;&#x8c03;&#x5ea6;&#x5668;&#x5904;&#x7406;&#x8bf7;&#x6c42;&#x540e;&#x51fa;&#x961f;&#x5217;,&#x901a;&#x8fc7;&#x4e0b;&#x8f7d;&#x5668;&#x4e2d;&#x95f4;&#x4ef6;&#x4ea4;&#x7ed9;&#x4e0b;&#x8f7d;&#x5668;&#x53bb;&#x4e0b;&#x8f7d;\n&#x3010;3&#x3011;&#x4e0b;&#x8f7d;&#x5668;&#x5f97;&#x5230;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;&#x540e;,&#x901a;&#x8fc7;&#x8718;&#x86db;&#x4e2d;&#x95f4;&#x4ef6;&#x4ea4;&#x7ed9;&#x722c;&#x866b;&#x7a0b;&#x5e8f;\n&#x3010;4&#x3011;&#x722c;&#x866b;&#x7a0b;&#x5e8f;&#x8fdb;&#x884c;&#x6570;&#x636e;&#x63d0;&#x53d6;&#xff1a;\n    4.1) &#x6570;&#x636e;&#x4ea4;&#x7ed9;&#x7ba1;&#x9053;&#x6587;&#x4ef6;&#x53bb;&#x5165;&#x5e93;&#x5904;&#x7406;\n    4.2) &#x5bf9;&#x4e8e;&#x9700;&#x8981;&#x7ee7;&#x7eed;&#x8ddf;&#x8fdb;&#x7684;URL,&#x518d;&#x6b21;&#x4ea4;&#x7ed9;&#x8c03;&#x5ea6;&#x5668;&#x5165;&#x961f;&#x5217;&#xff0c;&#x4f9d;&#x6b21;&#x5faa;&#x73af;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"510,518"}}],"payload":{"tag":"h3","lines":"508,509"}},{"content":"scrapy&#x5e38;&#x7528;&#x547d;&#x4ee4;","children":[{"content":"<pre data-lines=\"521,531\"><code class=\"language-python\">&#x3010;1&#x3011;&#x521b;&#x5efa;&#x722c;&#x866b;&#x9879;&#x76ee;\n    scrapy startproject &#x9879;&#x76ee;&#x540d;\n    \n&#x3010;2&#x3011;&#x521b;&#x5efa;&#x722c;&#x866b;&#x6587;&#x4ef6;\n    scrapy genspider &#x722c;&#x866b;&#x540d; &#x57df;&#x540d;\n    \n&#x3010;3&#x3011;&#x8fd0;&#x884c;&#x722c;&#x866b;\n    scrapy crawl &#x722c;&#x866b;&#x540d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"521,531"}}],"payload":{"tag":"h3","lines":"519,520"}},{"content":"scrapy&#x9879;&#x76ee;&#x76ee;&#x5f55;&#x7ed3;&#x6784;","children":[{"content":"<pre data-lines=\"534,545\"><code class=\"language-python\">Baidu                   <span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x6587;&#x4ef6;&#x5939;</span>\n&#x251c;&#x2500;&#x2500; Baidu               <span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x76ee;&#x5f55;</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; items.py        <span class=\"hljs-comment\"># &#x5b9a;&#x4e49;&#x6570;&#x636e;&#x7ed3;&#x6784;</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; middlewares.py  <span class=\"hljs-comment\"># &#x4e2d;&#x95f4;&#x4ef6;</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; pipelines.py    <span class=\"hljs-comment\"># &#x6570;&#x636e;&#x5904;&#x7406;</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; settings.py     <span class=\"hljs-comment\"># &#x5168;&#x5c40;&#x914d;&#x7f6e;</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; spiders\n&#x2502;       &#x251c;&#x2500;&#x2500; baidu.py    <span class=\"hljs-comment\"># &#x722c;&#x866b;&#x6587;&#x4ef6;</span>\n&#x2514;&#x2500;&#x2500; scrapy.cfg          <span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x57fa;&#x672c;&#x914d;&#x7f6e;&#x6587;&#x4ef6;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"534,545"}}],"payload":{"tag":"h3","lines":"532,533"}},{"content":"settings.py&#x5e38;&#x7528;&#x53d8;&#x91cf;","children":[{"content":"<pre data-lines=\"548,566\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;USER_AGENT = <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>\n\n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;ROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n    &#x662f;&#x5426;&#x9075;&#x5faa;robots&#x534f;&#x8bae;,&#x4e00;&#x822c;&#x6211;&#x4eec;&#x4e00;&#x5b9a;&#x8981;&#x8bbe;&#x7f6e;&#x4e3a;<span class=\"hljs-literal\">False</span>\n\n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;CONCURRENT_REQUESTS = <span class=\"hljs-number\">32</span>\n    &#x6700;&#x5927;&#x5e76;&#x53d1;&#x91cf;,&#x9ed8;&#x8ba4;&#x4e3a;<span class=\"hljs-number\">16</span>\n    \n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;DOWNLOAD_DELAY = <span class=\"hljs-number\">0.5</span>\n    &#x4e0b;&#x8f7d;&#x5ef6;&#x8fdf;&#x65f6;&#x95f4;: &#x8bbf;&#x95ee;&#x76f8;&#x90bb;&#x9875;&#x9762;&#x7684;&#x95f4;&#x9694;&#x65f6;&#x95f4;,&#x964d;&#x4f4e;&#x6570;&#x636e;&#x6293;&#x53d6;&#x7684;&#x9891;&#x7387;\n\n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;COOKIES_ENABLED = <span class=\"hljs-literal\">False</span> | <span class=\"hljs-literal\">True</span>\n    Cookie&#x9ed8;&#x8ba4;&#x662f;&#x7981;&#x7528;&#x7684;&#xff0c;&#x53d6;&#x6d88;&#x6ce8;&#x91ca;&#x5219; &#x542f;&#x7528;Cookie&#xff0c;&#x5373;&#xff1a;<span class=\"hljs-literal\">True</span>&#x548c;<span class=\"hljs-literal\">False</span>&#x90fd;&#x662f;&#x542f;&#x7528;Cookie\n    \n&#x3010;<span class=\"hljs-number\">6</span>&#x3011;DEFAULT_REQUEST_HEADERS = {}\n    &#x8bf7;&#x6c42;&#x5934;,&#x76f8;&#x5f53;&#x4e8e;requests.get(headers=headers)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"548,566"}}],"payload":{"tag":"h3","lines":"546,547"}},{"content":"&#x5b89;&#x88c5;scrapy&#x51fa;&#x73b0;&#x95ee;&#x9898;","children":[{"content":"<pre data-lines=\"569,573\"><code class=\"language-python\">xxx has requirement &#x6a21;&#x5757;&gt;=4.4.2 but you&apos;ll have &#x6a21;&#x5757; 4.3.2\n&#x5347;&#x7ea7;&#x6a21;&#x5757;: sudo pip3 install &#x6a21;&#x5757; --upgrade\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"569,573"}}],"payload":{"tag":"h3","lines":"567,568"}}],"payload":{"tag":"h2","lines":"464,465"}},{"content":"&#x5c0f;&#x8bd5;&#x725b;&#x5200;","children":[{"content":"<pre data-lines=\"576,607\"><code class=\"language-python\">&#x3010;<span class=\"hljs-number\">1</span>&#x3011;&#x6267;&#x884c;<span class=\"hljs-number\">3</span>&#x6761;&#x547d;&#x4ee4;,&#x521b;&#x5efa;&#x9879;&#x76ee;&#x57fa;&#x672c;&#x7ed3;&#x6784;\n    scrapy startproject Baidu\n    cd Baidu\n    scrapy genspider baidu www.baidu.com\n    \n&#x3010;<span class=\"hljs-number\">2</span>&#x3011;&#x5b8c;&#x6210;&#x722c;&#x866b;&#x6587;&#x4ef6;: spiders/baidu.py\n    <span class=\"hljs-keyword\">import</span> scrapy\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduSpider</span>(scrapy.Spider):\n        name = <span class=\"hljs-string\">&apos;baidu&apos;</span>\n        allowed_domains = [<span class=\"hljs-string\">&apos;www.baidu.com&apos;</span>]\n        start_urls = [<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>]\n        \n        <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\">self,response</span>):\n            r_list = response.xpath(<span class=\"hljs-string\">&apos;/html/head/title/text()&apos;</span>).extract()[<span class=\"hljs-number\">0</span>]\n            <span class=\"hljs-built_in\">print</span>(r_list)\n  \n&#x3010;<span class=\"hljs-number\">3</span>&#x3011;&#x5b8c;&#x6210;settings.py&#x914d;&#x7f6e;\n    <span class=\"hljs-number\">3.1</span>) ROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-number\">3.2</span>) DEFAULT_REQUEST_HEADERS = {\n        <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>\n    }\n    \n&#x3010;<span class=\"hljs-number\">4</span>&#x3011;&#x8fd0;&#x884c;&#x722c;&#x866b;\n    <span class=\"hljs-number\">4.1</span>) &#x521b;&#x5efa;run.py(&#x548c;scrapy.cfg&#x540c;&#x8def;&#x5f84;)\n    <span class=\"hljs-number\">4.2</span>) run.py\n         <span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> cmdline\n         cmdline.execute(<span class=\"hljs-string\">&apos;scrapy crawl baidu&apos;</span>.split())\n            \n&#x3010;<span class=\"hljs-number\">5</span>&#x3011;&#x6267;&#x884c; run.py &#x8fd0;&#x884c;&#x722c;&#x866b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"576,607"}}],"payload":{"tag":"h2","lines":"574,575"}},{"content":"&#x4eca;&#x65e5;&#x4f5c;&#x4e1a;","children":[{"content":"&#x793a;&#x4f8b;","children":[{"content":"Baidu","children":[{"content":"<pre data-lines=\"814,831\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    <span class=\"hljs-keyword\">pass</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"814,831"}},{"content":"<pre data-lines=\"832,938\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"832,938"}},{"content":"<pre data-lines=\"939,953\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"939,953"}},{"content":"<pre data-lines=\"954,1055\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Baidu project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Baidu&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Baidu.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Baidu.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\nUSER_AGENT = <span class=\"hljs-string\">&apos;Mozilla/5.0 xxx&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\n<span class=\"hljs-comment\"># &#x662f;&#x5426;&#x9075;&#x5faa;robots&#x534f;&#x8bae;</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\"># &#x6700;&#x5927;&#x5e76;&#x53d1;&#x91cf;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;16</span>\nCONCURRENT_REQUESTS = <span class=\"hljs-number\">32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\n\n<span class=\"hljs-comment\"># &#x4e0b;&#x8f7d;&#x5ef6;&#x8fdf;&#x65f6;&#x95f4; - &#x8bbf;&#x95ee;&#x76f8;&#x90bb;&#x4e24;&#x4e2a;&#x9875;&#x9762;&#x7684;&#x65f6;&#x95f4;&#x95f4;&#x9694;</span>\nDOWNLOAD_DELAY = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\"># &#x9ed8;&#x8ba4;&#x7981;&#x7528;cookie&#xff0c;&#x53d6;&#x6d88;&#x6ce8;&#x91ca;&#x540e;&#x5219;&#x5f00;&#x542f;cookie</span>\nCOOKIES_ENABLED = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\n<span class=\"hljs-comment\"># &#x8bf7;&#x6c42;&#x5934;</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baidu.middlewares.BaiduSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baidu.middlewares.BaiduDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n<span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x7ba1;&#x9053;</span>\nITEM_PIPELINES = {\n   <span class=\"hljs-string\">&apos;Baidu.pipelines.BaiduPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n}\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"954,1055"}}],"payload":{"tag":"h5","lines":"812,813"}},{"content":"Baixiaodu","children":[{"content":"<pre data-lines=\"1058,1075\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    <span class=\"hljs-keyword\">pass</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1058,1075"}},{"content":"<pre data-lines=\"1076,1182\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1076,1182"}},{"content":"<pre data-lines=\"1183,1197\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1183,1197"}},{"content":"<pre data-lines=\"1198,1292\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Baixiaodu project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Baixiaodu&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Baixiaodu.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Baixiaodu.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Baixiaodu (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\n<span class=\"hljs-comment\">#DOWNLOAD_DELAY = 3</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\">#COOKIES_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baixiaodu.middlewares.BaixiaoduSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baixiaodu.middlewares.BaixiaoduDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n<span class=\"hljs-comment\">#ITEM_PIPELINES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baixiaodu.pipelines.BaixiaoduPipeline&apos;: 300,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1198,1292"}},{"content":"<pre data-lines=\"1293,1298\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> cmdline\n\ncmdline.execute(<span class=\"hljs-string\">&apos;scrapy crawl baixiaodu&apos;</span>.split())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1293,1298"}}],"payload":{"tag":"h5","lines":"1056,1057"}},{"content":"Car","children":[{"content":"<pre data-lines=\"1301,1318\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    <span class=\"hljs-keyword\">pass</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1301,1318"}},{"content":"<pre data-lines=\"1319,1425\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\n<span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarSpiderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\">self, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\">self, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> result:\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\">self, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\">self, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> start_requests:\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarDownloaderMiddleware</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n<span class=\"hljs-meta\">    @classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        <span class=\"hljs-keyword\">pass</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\">self, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1319,1425"}},{"content":"<pre data-lines=\"1426,1440\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarPipeline</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\">self, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1426,1440"}},{"content":"<pre data-lines=\"1441,1536\"><code class=\"language-python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Car project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Car&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Car.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Car.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-comment\">#USER_AGENT = &apos;Car (+http://www.yourdomain.com)&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\n<span class=\"hljs-comment\">#DOWNLOAD_DELAY = 3</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\nCOOKIES_ENABLED = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;Cookie&apos;</span> : <span class=\"hljs-string\">&apos;antipas=3g35lm41V408p5832Cp050B49m41; uuid=05611c70-8e38-4a82-c7d5-02a86e74c090; clueSourceCode=%2A%2300; user_city_id=1001737; ganji_uuid=5484236533304847117197; sessionid=fbe6b318-3390-48d1-cab2-9d8950086914; lg=1; lng_lat=116.94274_39.95689; gps_type=1; close_finance_popup=2020-03-25; cainfo=%7B%22ca_a%22%3A%22-%22%2C%22ca_b%22%3A%22-%22%2C%22ca_s%22%3A%22self%22%2C%22ca_n%22%3A%22self%22%2C%22ca_medium%22%3A%22-%22%2C%22ca_term%22%3A%22-%22%2C%22ca_content%22%3A%22-%22%2C%22ca_campaign%22%3A%22-%22%2C%22ca_kw%22%3A%22-%22%2C%22ca_i%22%3A%22-%22%2C%22scode%22%3A%22-%22%2C%22keyword%22%3A%22-%22%2C%22ca_keywordid%22%3A%22-%22%2C%22display_finance_flag%22%3A%22-%22%2C%22platform%22%3A%221%22%2C%22version%22%3A1%2C%22client_ab%22%3A%22-%22%2C%22guid%22%3A%2205611c70-8e38-4a82-c7d5-02a86e74c090%22%2C%22ca_city%22%3A%22langfang%22%2C%22sessionid%22%3A%22fbe6b318-3390-48d1-cab2-9d8950086914%22%7D; preTime=%7B%22last%22%3A1585129201%2C%22this%22%3A1585128131%2C%22pre%22%3A1585128131%7D; cityDomain=langfang&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Car.middlewares.CarSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Car.middlewares.CarDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n<span class=\"hljs-comment\">#ITEM_PIPELINES = {</span>\n<span class=\"hljs-comment\">#    &apos;Car.pipelines.CarPipeline&apos;: 300,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1441,1536"}},{"content":"<pre data-lines=\"1537,1542\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> cmdline\n\ncmdline.execute(<span class=\"hljs-string\">&apos;scrapy crawl car&apos;</span>.split())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1537,1542"}}],"payload":{"tag":"h5","lines":"1299,1300"}}],"payload":{"tag":"h3","lines":"617,618"}},{"content":"&#x793a;&#x4f8b;","children":[{"content":"Baidu","children":[{"content":"<pre data-lines=\"1547,1564\"><code data-lines=\"1547,1564\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\nimport scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduSpider</span>(scrapy.<span class=\"hljs-title class_\">Spider</span>):\n    <span class=\"hljs-comment\"># &#x722c;&#x866b;&#x540d;</span>\n    name = <span class=\"hljs-string\">&apos;baidu&apos;</span>\n    <span class=\"hljs-comment\"># &#x5141;&#x8bb8;&#x722c;&#x53d6;&#x7684;&#x57df;&#x540d;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;www.baidu.com&apos;</span>]\n    <span class=\"hljs-comment\"># &#x8d77;&#x59cb;&#x7684;URL&#x5730;&#x5740;</span>\n    start_urls = [<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>]\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response</span>):\n        pass\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1547,1564"}},{"content":"<pre data-lines=\"1565,1582\"><code data-lines=\"1565,1582\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    pass\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1565,1582"}},{"content":"<pre data-lines=\"1583,1689\"><code data-lines=\"1583,1689\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nfrom scrapy import signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduSpiderMiddleware</span>(object):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n    <span class=\"hljs-variable\">@classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-symbol\">result:</span>\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        pass\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> <span class=\"hljs-symbol\">start_requests:</span>\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduDownloaderMiddleware</span>(object):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n    <span class=\"hljs-variable\">@classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        pass\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1583,1689"}},{"content":"<pre data-lines=\"1690,1704\"><code data-lines=\"1690,1704\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaiduPipeline</span>(object):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1690,1704"}},{"content":"<pre data-lines=\"1705,1806\"><code data-lines=\"1705,1806\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Scrapy settings for Baidu project</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-comment\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/settings.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Baidu&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Baidu.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Baidu.spiders&apos;</span>\n\n\n<span class=\"hljs-comment\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\nUSER_AGENT = <span class=\"hljs-string\">&apos;Mozilla/5.0 xxx&apos;</span>\n\n<span class=\"hljs-comment\"># Obey robots.txt rules</span>\n<span class=\"hljs-comment\"># &#x662f;&#x5426;&#x9075;&#x5faa;robots&#x534f;&#x8bae;</span>\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-comment\"># &#x6700;&#x5927;&#x5e76;&#x53d1;&#x91cf;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;16</span>\nCONCURRENT_REQUESTS = <span class=\"hljs-number\">32</span>\n\n<span class=\"hljs-comment\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n<span class=\"hljs-comment\"># See also autothrottle settings and docs</span>\n\n<span class=\"hljs-comment\"># &#x4e0b;&#x8f7d;&#x5ef6;&#x8fdf;&#x65f6;&#x95f4; - &#x8bbf;&#x95ee;&#x76f8;&#x90bb;&#x4e24;&#x4e2a;&#x9875;&#x9762;&#x7684;&#x65f6;&#x95f4;&#x95f4;&#x9694;</span>\nDOWNLOAD_DELAY = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-comment\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-comment\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-comment\"># Disable cookies (enabled by default)</span>\n<span class=\"hljs-comment\"># &#x9ed8;&#x8ba4;&#x7981;&#x7528;cookie&#xff0c;&#x53d6;&#x6d88;&#x6ce8;&#x91ca;&#x540e;&#x5219;&#x5f00;&#x542f;cookie</span>\nCOOKIES_ENABLED = <span class=\"hljs-literal\">False</span>\n\n<span class=\"hljs-comment\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-comment\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-comment\"># Override the default request headers:</span>\n<span class=\"hljs-comment\"># &#x8bf7;&#x6c42;&#x5934;</span>\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>,\n}\n\n<span class=\"hljs-comment\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n<span class=\"hljs-comment\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baidu.middlewares.BaiduSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n<span class=\"hljs-comment\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-comment\">#    &apos;Baidu.middlewares.BaiduDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Enable or disable extensions</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span>\n<span class=\"hljs-comment\">#EXTENSIONS = {</span>\n<span class=\"hljs-comment\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-comment\">#}</span>\n\n<span class=\"hljs-comment\"># Configure item pipelines</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n<span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x7ba1;&#x9053;</span>\nITEM_PIPELINES = {\n   <span class=\"hljs-string\">&apos;Baidu.pipelines.BaiduPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n}\n\n<span class=\"hljs-comment\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-comment\"># The initial download delay</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-comment\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-comment\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-comment\"># each remote server</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-comment\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-comment\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-comment\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-comment\"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n<span class=\"hljs-comment\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-comment\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-comment\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-comment\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-comment\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1705,1806"}}],"payload":{"tag":"h5","lines":"1545,1546"}},{"content":"Baixiaodu","children":[{"content":"<pre data-lines=\"1809,1827\"><code data-lines=\"1809,1827\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"hljs-keyword\">import</span> scrapy\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduSpider</span>(scrapy.Spider):\n    name = <span class=\"hljs-string\">&apos;baixiaodu&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;www.baidu.com&apos;</span>]\n    start_urls = [<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>]\n\n    <span class=\"hljs-comment\"># response &#xff1a;http://www.baidu.com/ &#x7684;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-params\">self, response</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x89e3;&#x6790;&#x63d0;&#x53d6;&#x6570;&#x636e; - &#x767e;&#x5ea6;&#x4e00;&#x4e0b;,&#x4f60;&#x5c31;&#x77e5;&#x9053;&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># response &#x53ef;&#x76f4;&#x63a5;&#x8c03;&#x7528; xpath &#x63d0;&#x53d6;&#x6570;&#x636e;</span>\n        title = response.xpath(<span class=\"hljs-string\">&apos;/html/head/title/text()&apos;</span>)\n        <span class=\"hljs-built_in\">print</span>(title)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;*&apos;</span> * <span class=\"hljs-number\">50</span>)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1809,1827"}},{"content":"<pre data-lines=\"1828,1845\"><code data-lines=\"1828,1845\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    pass\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1828,1845"}},{"content":"<pre data-lines=\"1846,1952\"><code data-lines=\"1846,1952\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nfrom scrapy import signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduSpiderMiddleware</span>(object):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n    <span class=\"hljs-variable\">@classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-symbol\">result:</span>\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        pass\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> <span class=\"hljs-symbol\">start_requests:</span>\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduDownloaderMiddleware</span>(object):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n    <span class=\"hljs-variable\">@classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        pass\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1846,1952"}},{"content":"<pre data-lines=\"1953,1967\"><code data-lines=\"1953,1967\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BaixiaoduPipeline</span>(object):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1953,1967"}},{"content":"<pre data-lines=\"1968,2062\"><code data-lines=\"1968,2062\"># -*- coding: utf<span class=\"hljs-number\">-8</span> -*-\n\n# Scrapy settings for Baixiaodu project\n#\n# For simplicity, this file contains only settings considered important or\n# commonly used. You can find more settings consulting the documentation:\n#\n#     https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/settings.html</span>\n#     https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n#     https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nBOT_NAME = <span class=\"hljs-string\">&apos;Baixiaodu&apos;</span>\n\nSPIDER_MODULES = [<span class=\"hljs-string\">&apos;Baixiaodu.spiders&apos;</span>]\nNEWSPIDER_MODULE = <span class=\"hljs-string\">&apos;Baixiaodu.spiders&apos;</span>\n\n\n# Crawl responsibly by identifying yourself (and your website) on the user-agent\n#USER_AGENT = <span class=\"hljs-string\">&apos;Baixiaodu (+http://www.yourdomain.com)&apos;</span>\n\n# Obey robots.txt rules\nROBOTSTXT_OBEY = <span class=\"hljs-literal\">False</span>\n\n# Configure maximum concurrent requests performed by Scrapy (default: <span class=\"hljs-number\">16</span>)\n#CONCURRENT_REQUESTS = <span class=\"hljs-number\">32</span>\n\n# Configure a delay for requests for the same website (default: <span class=\"hljs-number\">0</span>)\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/settings.html#download-delay</span>\n# See also autothrottle settings and docs\n#DOWNLOAD_DELAY = <span class=\"hljs-number\">3</span>\n# The download delay setting will honor only one <span class=\"hljs-keyword\">of</span>:\n#CONCURRENT_REQUESTS_PER_DOMAIN = <span class=\"hljs-number\">16</span>\n#CONCURRENT_REQUESTS_PER_IP = <span class=\"hljs-number\">16</span>\n\n# Disable cookies (enabled by default)\n#COOKIES_ENABLED = <span class=\"hljs-literal\">False</span>\n\n# Disable Telnet Console (enabled by default)\n#TELNETCONSOLE_ENABLED = <span class=\"hljs-literal\">False</span>\n\n# Override the default request headers:\nDEFAULT_REQUEST_HEADERS = {\n  <span class=\"hljs-string\">&apos;Accept&apos;</span>: <span class=\"hljs-string\">&apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;</span>,\n  <span class=\"hljs-string\">&apos;Accept-Language&apos;</span>: <span class=\"hljs-string\">&apos;en&apos;</span>,\n  <span class=\"hljs-string\">&apos;User-Agent&apos;</span> : <span class=\"hljs-string\">&apos;Mozilla/5.0&apos;</span>,\n}\n\n# Enable or disable spider middlewares\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n#SPIDER_MIDDLEWARES = {\n#    <span class=\"hljs-string\">&apos;Baixiaodu.middlewares.BaixiaoduSpiderMiddleware&apos;</span>: <span class=\"hljs-number\">543</span>,\n#}\n\n# Enable or disable downloader middlewares\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/downloader-middleware.html</span>\n#DOWNLOADER_MIDDLEWARES = {\n#    <span class=\"hljs-string\">&apos;Baixiaodu.middlewares.BaixiaoduDownloaderMiddleware&apos;</span>: <span class=\"hljs-number\">543</span>,\n#}\n\n# Enable or disable extensions\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/extensions.html</span>\n#EXTENSIONS = {\n#    <span class=\"hljs-string\">&apos;scrapy.extensions.telnet.TelnetConsole&apos;</span>: None,\n#}\n\n# Configure item pipelines\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n#ITEM_PIPELINES = {\n#    <span class=\"hljs-string\">&apos;Baixiaodu.pipelines.BaixiaoduPipeline&apos;</span>: <span class=\"hljs-number\">300</span>,\n#}\n\n# Enable and configure the AutoThrottle extension (disabled by default)\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/autothrottle.html</span>\n#AUTOTHROTTLE_ENABLED = <span class=\"hljs-literal\">True</span>\n# The initial download delay\n#AUTOTHROTTLE_START_DELAY = <span class=\"hljs-number\">5</span>\n# The maximum download delay to be set <span class=\"hljs-keyword\">in</span> <span class=\"hljs-keyword\">case</span> <span class=\"hljs-keyword\">of</span> high latencies\n#AUTOTHROTTLE_MAX_DELAY = <span class=\"hljs-number\">60</span>\n# The average number <span class=\"hljs-keyword\">of</span> requests Scrapy should be sending <span class=\"hljs-keyword\">in</span> parallel to\n# each remote server\n#AUTOTHROTTLE_TARGET_CONCURRENCY = <span class=\"hljs-number\">1.0</span>\n# Enable showing throttling stats for every response received:\n#AUTOTHROTTLE_DEBUG = <span class=\"hljs-literal\">False</span>\n\n# Enable and configure HTTP caching (disabled by default)\n# See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span>\n#HTTPCACHE_ENABLED = <span class=\"hljs-literal\">True</span>\n#HTTPCACHE_EXPIRATION_SECS = <span class=\"hljs-number\">0</span>\n#HTTPCACHE_DIR = <span class=\"hljs-string\">&apos;httpcache&apos;</span>\n#HTTPCACHE_IGNORE_HTTP_CODES = []\n#HTTPCACHE_STORAGE = <span class=\"hljs-string\">&apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1968,2062"}},{"content":"<pre data-lines=\"2063,2068\"><code data-lines=\"2063,2068\"><span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> cmdline\n\ncmdline.<span class=\"hljs-keyword\">execute</span>(<span class=\"hljs-string\">&apos;scrapy crawl baixiaodu&apos;</span>.split())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2063,2068"}}],"payload":{"tag":"h5","lines":"1807,1808"}},{"content":"Car","children":[{"content":"<pre data-lines=\"2071,2100\"><code data-lines=\"2071,2100\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\nimport scrapy\n\n\nclass CarSpider(scrapy.Spider):\n    name = <span class=\"hljs-string\">&apos;car&apos;</span>\n    allowed_domains = [<span class=\"hljs-string\">&apos;www.guazi.com&apos;</span>]\n    start_urls = [<span class=\"hljs-string\">&apos;https://www.guazi.com/dachang/buy/&apos;</span>]\n\n    def parse(self, response):\n        li_list = response.xpath(<span class=\"hljs-string\">&apos;//ul[@class=&quot;carlist clearfix js-top&quot;]/li&apos;</span>)\n        <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> li_list:\n            item = {}\n            # 1&#x3001;xpath() &#x5f97;&#x5230;&#x7684;&#x4e00;&#x5b9a;&#x662f;&#x5217;&#x8868;,&#x5217;&#x8868;&#x4e2d;&#x4e3a; &#x9009;&#x62e9;&#x5668;&#x5bf9;&#x8c61;\n            #    &#x7ed3;&#x679c;&#xff1a;[&lt;seletor <span class=\"hljs-attribute\">xpath</span>=<span class=\"hljs-string\">&apos;xxx&apos;</span> <span class=\"hljs-attribute\">data</span>=<span class=\"hljs-string\">&apos;&#x6570;&#x636e;1&apos;</span>&gt;,&lt;selector <span class=\"hljs-attribute\">xpath</span>=<span class=\"hljs-string\">&apos;xxx&apos;</span> <span class=\"hljs-attribute\">data</span>=<span class=\"hljs-string\">&apos;&#x6570;&#x636e;2&apos;</span>&gt;]\n            # 2&#x3001;extract() &#xff1a;&#x628a;&#x5217;&#x8868;&#x4e2d;&#x6240;&#x6709;&#x7684;&#x9009;&#x62e9;&#x5668;&#x5bf9;&#x8c61;&#x5e8f;&#x5217;&#x5316;&#x4e3a;unicode&#x5b57;&#x7b26;&#x4e32;\n            #    &#x7ed3;&#x679c;&#xff1a;[<span class=\"hljs-string\">&apos;&#x6570;&#x636e;1&apos;</span>,<span class=\"hljs-string\">&apos;&#x6570;&#x636e;2&apos;</span>]\n            # 3&#x3001;extract_first() &#xff1a;&#x5e8f;&#x5217;&#x5316;&#x63d0;&#x53d6;&#x7b2c;1&#x4e2a;&#x9009;&#x62e9;&#x5668;&#x7684;&#x6570;&#x636e;\n            #    &#x7ed3;&#x679c;&#xff1a;<span class=\"hljs-string\">&apos;&#x6570;&#x636e;1&apos;</span>\n            # 4&#x3001;<span class=\"hljs-built_in\">get</span>() &#xff1a;&#x4f5c;&#x7528;&#x540c; extract_first()\n            #    &#x7ed3;&#x679c;&#xff1a;<span class=\"hljs-string\">&apos;&#x6570;&#x636e;1&apos;</span>\n            item[<span class=\"hljs-string\">&apos;name&apos;</span>] = li.xpath(<span class=\"hljs-string\">&apos;.//h2[@class=&quot;t&quot;]/text()&apos;</span>).<span class=\"hljs-built_in\">get</span>()\n            item[<span class=\"hljs-string\">&apos;price&apos;</span>] = li.xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;t-price&quot;]/p/text()&apos;</span>).<span class=\"hljs-built_in\">get</span>()\n            item[<span class=\"hljs-string\">&apos;url&apos;</span>] = li.xpath(<span class=\"hljs-string\">&apos;./a[1]/@href&apos;</span>).<span class=\"hljs-built_in\">get</span>()\n\n            <span class=\"hljs-built_in\">print</span>(item)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2071,2100"}},{"content":"<pre data-lines=\"2101,2118\"><code data-lines=\"2101,2118\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your scraped items</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/items.html</span>\n\n<span class=\"hljs-keyword\">import</span> scrapy\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarItem</span>(scrapy.Item):\n    <span class=\"hljs-comment\"># define the fields for your item here like:</span>\n    <span class=\"hljs-comment\"># name = scrapy.Field()</span>\n    pass\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2101,2118"}},{"content":"<pre data-lines=\"2119,2225\"><code data-lines=\"2119,2225\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define here the models for your spider middleware</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># See documentation in:</span>\n<span class=\"hljs-comment\"># https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span>\n\nfrom scrapy import signals\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarSpiderMiddleware</span>(object):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the spider middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n    <span class=\"hljs-variable\">@classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_input</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, spider</span>):\n        <span class=\"hljs-comment\"># Called for each response that goes through the spider</span>\n        <span class=\"hljs-comment\"># middleware and into the spider.</span>\n\n        <span class=\"hljs-comment\"># Should return None or raise an exception.</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_output</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, result, spider</span>):\n        <span class=\"hljs-comment\"># Called with the results returned from the Spider, after</span>\n        <span class=\"hljs-comment\"># it has processed the response.</span>\n\n        <span class=\"hljs-comment\"># Must return an iterable of Request, dict or Item objects.</span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-symbol\">result:</span>\n            <span class=\"hljs-keyword\">yield</span> i\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_spider_exception</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, response, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a spider or process_spider_input() method</span>\n        <span class=\"hljs-comment\"># (from other spider middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Should return either None or an iterable of Response, dict</span>\n        <span class=\"hljs-comment\"># or Item objects.</span>\n        pass\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_start_requests</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, start_requests, spider</span>):\n        <span class=\"hljs-comment\"># Called with the start requests of the spider, and works</span>\n        <span class=\"hljs-comment\"># similarly to the process_spider_output() method, except</span>\n        <span class=\"hljs-comment\"># that it doesn&#x2019;t have a response associated.</span>\n\n        <span class=\"hljs-comment\"># Must return only requests (not items).</span>\n        <span class=\"hljs-keyword\">for</span> r <span class=\"hljs-keyword\">in</span> <span class=\"hljs-symbol\">start_requests:</span>\n            <span class=\"hljs-keyword\">yield</span> r\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarDownloaderMiddleware</span>(object):\n    <span class=\"hljs-comment\"># Not all methods need to be defined. If a method is not defined,</span>\n    <span class=\"hljs-comment\"># scrapy acts as if the downloader middleware does not modify the</span>\n    <span class=\"hljs-comment\"># passed objects.</span>\n\n    <span class=\"hljs-variable\">@classmethod</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">from_crawler</span>(<span class=\"hljs-params\">cls, crawler</span>):\n        <span class=\"hljs-comment\"># This method is used by Scrapy to create your spiders.</span>\n        s = cls()\n        crawler.signals.connect(s.spider_opened, signal=signals.spider_opened)\n        <span class=\"hljs-keyword\">return</span> s\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, spider</span>):\n        <span class=\"hljs-comment\"># Called for each request that goes through the downloader</span>\n        <span class=\"hljs-comment\"># middleware.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this request</span>\n        <span class=\"hljs-comment\"># - or return a Response object</span>\n        <span class=\"hljs-comment\"># - or return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest: process_exception() methods of</span>\n        <span class=\"hljs-comment\">#   installed downloader middleware will be called</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">None</span>\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, response, spider</span>):\n        <span class=\"hljs-comment\"># Called with the response returned from the downloader.</span>\n\n        <span class=\"hljs-comment\"># Must either;</span>\n        <span class=\"hljs-comment\"># - return a Response object</span>\n        <span class=\"hljs-comment\"># - return a Request object</span>\n        <span class=\"hljs-comment\"># - or raise IgnoreRequest</span>\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, request, exception, spider</span>):\n        <span class=\"hljs-comment\"># Called when a download handler or a process_request()</span>\n        <span class=\"hljs-comment\"># (from other downloader middleware) raises an exception.</span>\n\n        <span class=\"hljs-comment\"># Must either:</span>\n        <span class=\"hljs-comment\"># - return None: continue processing this exception</span>\n        <span class=\"hljs-comment\"># - return a Response object: stops process_exception() chain</span>\n        <span class=\"hljs-comment\"># - return a Request object: stops process_exception() chain</span>\n        pass\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">spider_opened</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, spider</span>):\n        spider.logger.info(<span class=\"hljs-string\">&apos;Spider opened: %s&apos;</span> % spider.name)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2119,2225"}},{"content":"<pre data-lines=\"2226,2240\"><code data-lines=\"2226,2240\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-comment\"># Define your item pipelines here</span>\n<span class=\"hljs-comment\">#</span>\n<span class=\"hljs-comment\"># Don&apos;t forget to add your pipeline to the ITEM_PIPELINES setting</span>\n<span class=\"hljs-comment\"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span>\n\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CarPipeline</span>(object):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_item</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">self</span>, item, spider</span>):\n        <span class=\"hljs-keyword\">return</span> item\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2226,2240"}},{"content":"<pre data-lines=\"2241,2336\"><code data-lines=\"2241,2336\"><span class=\"hljs-meta\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"hljs-meta\"># Scrapy settings for Car project</span>\n<span class=\"hljs-meta\">#</span>\n<span class=\"hljs-meta\"># For simplicity, this file contains only settings considered important or</span>\n<span class=\"hljs-meta\"># commonly used. You can find more settings consulting the documentation:</span>\n<span class=\"hljs-meta\">#</span>\n<span class=\"hljs-meta\">#     https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/settings.html</span></span>\n<span class=\"hljs-meta\">#     https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span>\n<span class=\"hljs-meta\">#     https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/spider-middleware.html</span></span>\n\nBOT_NAME <span class=\"hljs-punctuation\">=</span> &apos;Car&apos;\n\nSPIDER_MODULES <span class=\"hljs-punctuation\">=</span> [&apos;Car.spiders&apos;]\nNEWSPIDER_MODULE <span class=\"hljs-punctuation\">=</span> &apos;Car.spiders&apos;\n\n\n<span class=\"hljs-meta\"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span>\n<span class=\"hljs-meta\">#USER_AGENT = &apos;Car (+http:<span class=\"hljs-comment\">//www.yourdomain.com)&apos;</span></span>\n\n<span class=\"hljs-meta\"># Obey robots.txt rules</span>\nROBOTSTXT_OBEY <span class=\"hljs-punctuation\">=</span> False\n\n<span class=\"hljs-meta\"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span>\n<span class=\"hljs-meta\">#CONCURRENT_REQUESTS = 32</span>\n\n<span class=\"hljs-meta\"># Configure a delay for requests for the same website (default: 0)</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/settings.html#download-delay</span></span>\n<span class=\"hljs-meta\"># See also autothrottle settings and docs</span>\n<span class=\"hljs-meta\">#DOWNLOAD_DELAY = 3</span>\n<span class=\"hljs-meta\"># The download delay setting will honor only one of:</span>\n<span class=\"hljs-meta\">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span>\n<span class=\"hljs-meta\">#CONCURRENT_REQUESTS_PER_IP = 16</span>\n\n<span class=\"hljs-meta\"># Disable cookies (enabled by default)</span>\nCOOKIES_ENABLED <span class=\"hljs-punctuation\">=</span> False\n\n<span class=\"hljs-meta\"># Disable Telnet Console (enabled by default)</span>\n<span class=\"hljs-meta\">#TELNETCONSOLE_ENABLED = False</span>\n\n<span class=\"hljs-meta\"># Override the default request headers:</span>\nDEFAULT_REQUEST_HEADERS <span class=\"hljs-punctuation\">=</span> {\n  &apos;Accept&apos;<span class=\"hljs-punctuation\">:</span> &apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;<span class=\"hljs-punctuation\">,</span>\n  &apos;Accept-Language&apos;<span class=\"hljs-punctuation\">:</span> &apos;en&apos;<span class=\"hljs-punctuation\">,</span>\n  &apos;Cookie&apos; <span class=\"hljs-punctuation\">:</span> &apos;antipas=3g35lm41V408p<span class=\"hljs-number\">5832</span>Cp050B49m41; uuid=<span class=\"hljs-number\">0561</span>1c70-8e38-4a82-c7d5-02a86e74c090; clueSourceCode=%2A%<span class=\"hljs-number\">2300</span>; user_city_id=<span class=\"hljs-number\">100173</span>7; ganji_uuid=<span class=\"hljs-number\">54842365333048</span><span class=\"hljs-number\">47117197</span>; sessionid=fbe6b318-<span class=\"hljs-number\">3390-48</span>d1-cab2-9d<span class=\"hljs-number\">8950086914</span>; lg=1; lng_lat=116.<span class=\"hljs-number\">9427</span>4_39.<span class=\"hljs-number\">9568</span>9; gps_type=1; close_finance_popup=<span class=\"hljs-number\">2020-03-25</span>; cainfo=%7B%22ca_a%22%3A%22-%22%2C%22ca_b%22%3A%22-%22%2C%22ca_s%22%3A%22self%22%2C%22ca_n%22%3A%22self%22%2C%22ca_medium%22%3A%22-%22%2C%22ca_term%22%3A%22-%22%2C%22ca_content%22%3A%22-%22%2C%22ca_campaign%22%3A%22-%22%2C%22ca_kw%22%3A%22-%22%2C%22ca_i%22%3A%22-%22%2C%22scode%22%3A%22-%22%2C%22keyword%22%3A%22-%22%2C%22ca_keywordid%22%3A%22-%22%2C%22display_finance_flag%22%3A%22-%22%2C%22platform%22%3A%221%22%2C%22version%22%3A1%2C%22client_ab%22%3A%22-%22%2C%22guid%22%3A%<span class=\"hljs-number\">220561</span>1c70-8e38-4a82-c7d5-02a86e74c090%22%2C%22ca_city%22%3A%22langfang%22%2C%22sessionid%22%3A%22fbe6b318-<span class=\"hljs-number\">3390-48</span>d1-cab2-9d<span class=\"hljs-number\">8950086914</span>%22%7D; preTime=%7B%22last%22%3A<span class=\"hljs-number\">1585129201</span>%2C%22this%22%3A<span class=\"hljs-number\">1585128131</span>%2C%22pre%22%3A<span class=\"hljs-number\">1585128131</span>%7D; cityDomain=langfang&apos;<span class=\"hljs-punctuation\">,</span>\n  &apos;User-Agent&apos; <span class=\"hljs-punctuation\">:</span> &apos;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.<span class=\"hljs-number\">3987.14</span>9 Safari/537.36&apos;<span class=\"hljs-punctuation\">,</span>\n}\n\n<span class=\"hljs-meta\"># Enable or disable spider middlewares</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/spider-middleware.html</span></span>\n<span class=\"hljs-meta\">#SPIDER_MIDDLEWARES = {</span>\n<span class=\"hljs-meta\">#    &apos;Car.middlewares.CarSpiderMiddleware&apos;: 543,</span>\n<span class=\"hljs-meta\">#}</span>\n\n<span class=\"hljs-meta\"># Enable or disable downloader middlewares</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span>\n<span class=\"hljs-meta\">#DOWNLOADER_MIDDLEWARES = {</span>\n<span class=\"hljs-meta\">#    &apos;Car.middlewares.CarDownloaderMiddleware&apos;: 543,</span>\n<span class=\"hljs-meta\">#}</span>\n\n<span class=\"hljs-meta\"># Enable or disable extensions</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/extensions.html</span></span>\n<span class=\"hljs-meta\">#EXTENSIONS = {</span>\n<span class=\"hljs-meta\">#    &apos;scrapy.extensions.telnet.TelnetConsole&apos;: None,</span>\n<span class=\"hljs-meta\">#}</span>\n\n<span class=\"hljs-meta\"># Configure item pipelines</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span>\n<span class=\"hljs-meta\">#ITEM_PIPELINES = {</span>\n<span class=\"hljs-meta\">#    &apos;Car.pipelines.CarPipeline&apos;: 300,</span>\n<span class=\"hljs-meta\">#}</span>\n\n<span class=\"hljs-meta\"># Enable and configure the AutoThrottle extension (disabled by default)</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/autothrottle.html</span></span>\n<span class=\"hljs-meta\">#AUTOTHROTTLE_ENABLED = True</span>\n<span class=\"hljs-meta\"># The initial download delay</span>\n<span class=\"hljs-meta\">#AUTOTHROTTLE_START_DELAY = 5</span>\n<span class=\"hljs-meta\"># The maximum download delay to be set in case of high latencies</span>\n<span class=\"hljs-meta\">#AUTOTHROTTLE_MAX_DELAY = 60</span>\n<span class=\"hljs-meta\"># The average number of requests Scrapy should be sending in parallel to</span>\n<span class=\"hljs-meta\"># each remote server</span>\n<span class=\"hljs-meta\">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span>\n<span class=\"hljs-meta\"># Enable showing throttling stats for every response received:</span>\n<span class=\"hljs-meta\">#AUTOTHROTTLE_DEBUG = False</span>\n\n<span class=\"hljs-meta\"># Enable and configure HTTP caching (disabled by default)</span>\n<span class=\"hljs-meta\"># See https:<span class=\"hljs-comment\">//doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span></span>\n<span class=\"hljs-meta\">#HTTPCACHE_ENABLED = True</span>\n<span class=\"hljs-meta\">#HTTPCACHE_EXPIRATION_SECS = 0</span>\n<span class=\"hljs-meta\">#HTTPCACHE_DIR = &apos;httpcache&apos;</span>\n<span class=\"hljs-meta\">#HTTPCACHE_IGNORE_HTTP_CODES = []</span>\n<span class=\"hljs-meta\">#HTTPCACHE_STORAGE = &apos;scrapy.extensions.httpcache.FilesystemCacheStorage&apos;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2241,2336"}},{"content":"<pre data-lines=\"2337,2342\"><code data-lines=\"2337,2342\"><span class=\"hljs-keyword\">from</span> scrapy <span class=\"hljs-keyword\">import</span> cmdline\n\ncmdline.<span class=\"hljs-keyword\">execute</span>(<span class=\"hljs-string\">&apos;scrapy crawl car&apos;</span>.split())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2337,2342"}}],"payload":{"tag":"h5","lines":"2069,2070"}},{"content":"&#x5176;&#x4ed6;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"2345,2361\"><code data-lines=\"2345,2361\"><span class=\"hljs-string\">&quot;&quot;&quot;\nChrome | Firefox &#x8bbe;&#x7f6e;&#x65e0;&#x5934;&#x6a21;&#x5f0f;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\n<span class=\"hljs-comment\"># &#x8bbe;&#x7f6e;&#x65e0;&#x5934;&#x6a21;&#x5f0f;</span>\noptions = webdriver.ChromeOptions()\noptions.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\ndriver = webdriver.Chrome(options=options)\n\n\ndriver.get(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\ndriver.save_screenshot(<span class=\"hljs-string\">&apos;baidu.png&apos;</span>)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2345,2361"}},{"content":"<pre data-lines=\"2362,2426\"><code data-lines=\"2362,2426\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x4eac;&#x4e1c;&#x6307;&#x5b9a;&#x5546;&#x54c1;&#x6570;&#x636e;&#x6293;&#x53d6;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n<span class=\"hljs-keyword\">import</span> pymongo\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">JdSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># &#x8bbe;&#x7f6e;&#x4e3a;&#x65e0;&#x754c;&#x9762;&#x6a21;&#x5f0f;</span>\n        <span class=\"hljs-variable language_\">self</span>.options = webdriver.ChromeOptions()\n        <span class=\"hljs-variable language_\">self</span>.options.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\n        <span class=\"hljs-variable language_\">self</span>.browser = webdriver.Chrome(options=<span class=\"hljs-variable language_\">self</span>.options)\n        <span class=\"hljs-comment\"># &#x6253;&#x5f00;&#x4eac;&#x4e1c;&#x9996;&#x9875;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.get(<span class=\"hljs-string\">&apos;https://www.jd.com/&apos;</span>)\n        <span class=\"hljs-comment\"># &#x5b9a;&#x4e49;mongodb&#x76f8;&#x5173;&#x53d8;&#x91cf;</span>\n        <span class=\"hljs-variable language_\">self</span>.conn = pymongo.MongoClient(<span class=\"hljs-string\">&apos;localhost&apos;</span>,<span class=\"hljs-number\">27017</span>)\n        <span class=\"hljs-variable language_\">self</span>.db = <span class=\"hljs-variable language_\">self</span>.conn[<span class=\"hljs-string\">&apos;jddb&apos;</span>]\n        <span class=\"hljs-variable language_\">self</span>.myset = <span class=\"hljs-variable language_\">self</span>.db[<span class=\"hljs-string\">&apos;jdset&apos;</span>]\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x8fdb;&#x5165;&#x5230;&#x5546;&#x54c1;&#x9875;&#x9762;&quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;key&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;&#x722c;&#x866b;&#x4e66;&apos;</span>)\n        <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;search&quot;]/div/div[2]/button&apos;</span>).click()\n        <span class=\"hljs-comment\"># &#x7ed9;&#x9875;&#x9762;&#x5143;&#x7d20;&#x52a0;&#x8f7d;&#x9884;&#x7559;&#x65f6;&#x95f4;</span>\n        time.sleep(<span class=\"hljs-number\">1</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_one_page</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;&#x722c;&#x53d6;&#x5177;&#x4f53;&#x6570;&#x636e;&quot;&quot;&quot;</span>\n        <span class=\"hljs-comment\"># execute_script() : &#x6267;&#x884c;js&#x811a;&#x672c;</span>\n        <span class=\"hljs-variable language_\">self</span>.browser.execute_script(\n            <span class=\"hljs-string\">&apos;window.scrollTo(0,document.body.scrollHeight)&apos;</span>\n        )\n        time.sleep(<span class=\"hljs-number\">3</span>)\n        <span class=\"hljs-comment\"># &#x57fa;&#x51c6;xpath&#xff1a;[&lt;selenium xxx li xxx&gt;,&lt;selenium xxx li xxx&gt;,...]</span>\n        li_list = <span class=\"hljs-variable language_\">self</span>.browser.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;J_goodsList&quot;]/ul/li&apos;</span>)\n        <span class=\"hljs-keyword\">for</span> li <span class=\"hljs-keyword\">in</span> li_list:\n            item = {}\n            item[<span class=\"hljs-string\">&apos;name&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-name&quot;]/a/em&apos;</span>).text.strip()\n            item[<span class=\"hljs-string\">&apos;price&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-price&quot;]&apos;</span>).text.strip()\n            item[<span class=\"hljs-string\">&apos;commit&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-commit&quot;]/strong&apos;</span>).text.strip()\n            item[<span class=\"hljs-string\">&apos;shop&apos;</span>] = li.find_element_by_xpath(<span class=\"hljs-string\">&apos;.//div[@class=&quot;p-shopnum&quot;]&apos;</span>).text.strip()\n            <span class=\"hljs-built_in\">print</span>(item)\n            <span class=\"hljs-comment\"># &#x5c06;&#x6570;&#x636e;&#x5b58;&#x5165;&#x5230;mongodb&#x6570;&#x636e;&#x5e93;</span>\n            <span class=\"hljs-variable language_\">self</span>.myset.insert_one(item)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.get_html()\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            <span class=\"hljs-variable language_\">self</span>.parse_one_page()\n            <span class=\"hljs-comment\"># &#x975e;&#x6700;&#x540e;&#x4e00;&#x9875;class: pn-next   &#x6700;&#x540e;&#x4e00;&#x9875;class: pn-next disabled</span>\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable language_\">self</span>.browser.page_source.find(<span class=\"hljs-string\">&apos;pn-next disabled&apos;</span>) == -<span class=\"hljs-number\">1</span>:\n                <span class=\"hljs-variable language_\">self</span>.browser.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;J_bottomPage&quot;]/span[1]/a[9]&apos;</span>).click()\n                time.sleep(<span class=\"hljs-number\">3</span>)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-variable language_\">self</span>.browser.quit()\n                <span class=\"hljs-keyword\">break</span>\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    spider = JdSpider()\n    spider.run()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2362,2426"}},{"content":"<pre data-lines=\"2427,2451\"><code data-lines=\"2427,2451\">&quot;&quot;&quot;\nselenium - &#x9f20;&#x6807;&#x64cd;&#x4f5c;\n1&#x3001;&#x521b;&#x5efa;&#x9f20;&#x6807;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;\n2&#x3001;&#x6307;&#x5b9a;&#x884c;&#x4e3a;\n3&#x3001;&#x6267;&#x884c;&#x884c;&#x4e3a;\n&quot;&quot;&quot;\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n# &#x5bfc;&#x5165;&#x9f20;&#x6807;&#x4e8b;&#x4ef6;&#x7c7b;\n<span class=\"hljs-keyword\">from</span> selenium.webdriver <span class=\"hljs-keyword\">import</span> ActionChains\n\n# <span class=\"hljs-number\">1</span>&#x3001;&#x6253;&#x5f00;&#x767e;&#x5ea6;\ndriver = webdriver.Chrome()\ndriver.maximize_window()\ndriver.<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-string\">&apos;http://www.baidu.com/&apos;</span>)\n\n# <span class=\"hljs-number\">2</span>&#x3001;&#x628a;&#x9f20;&#x6807;&#x79fb;&#x52a8;&#x5230; &#x8bbe;&#x7f6e; &#x8282;&#x70b9;&#x4f4d;&#x7f6e;\nset_node = driver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;u1&quot;]/a[9]&apos;</span>)\nActionChains(driver).move_to_element(to_element=set_node).<span class=\"hljs-keyword\">perform</span>()\n\n# <span class=\"hljs-number\">3</span>&#x3001;&#x627e;&#x5230; &#x9ad8;&#x7ea7;&#x641c;&#x7d22;&#x8282;&#x70b9; &#x5e76;&#x70b9;&#x51fb;\ndriver.find_element_by_link_text(<span class=\"hljs-string\">&apos;&#x9ad8;&#x7ea7;&#x641c;&#x7d22;&apos;</span>).click()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2427,2451"}},{"content":"<pre data-lines=\"2452,2494\"><code data-lines=\"2452,2494\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x6293;&#x53d6;&#x6c11;&#x653f;&#x90e8; - &#x6700;&#x65b0;&#x884c;&#x653f;&#x533a;&#x5212;&#x4ee3;&#x7801;\n1&#x3001;&#x6253;&#x5f00;&#x4e3b;&#x9875;,&#x627e;&#x5230;&#x6700;&#x65b0;&#x6708;&#x4efd;&#x8282;&#x70b9;,&#x5e76;&#x70b9;&#x51fb;\n2&#x3001;&#x5207;&#x6362;&#x53e5;&#x67c4;&#x5230;&#x65b0;&#x7684;&#x7a97;&#x53e3;\n3&#x3001;&#x63d0;&#x53d6;&#x5177;&#x4f53;&#x6570;&#x636e;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MzbSpider</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.options = webdriver.ChromeOptions()\n        <span class=\"hljs-variable language_\">self</span>.options.add_argument(<span class=\"hljs-string\">&apos;--headless&apos;</span>)\n        <span class=\"hljs-variable language_\">self</span>.driver = webdriver.Chrome(options=<span class=\"hljs-variable language_\">self</span>.options)\n\n        <span class=\"hljs-variable language_\">self</span>.driver.get(<span class=\"hljs-string\">&apos;http://www.mca.gov.cn/article/sj/xzqh/2019/&apos;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_html</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-comment\"># 1&#x3001;&#x627e;&#x5230;&#x6700;&#x65b0;&#x6708;&#x4efd;&#x8282;&#x70b9;</span>\n        <span class=\"hljs-variable language_\">self</span>.driver.find_element_by_partial_link_text(<span class=\"hljs-string\">&apos;&#x4e2d;&#x534e;&#x4eba;&#x6c11;&#x5171;&#x548c;&#x56fd;&#x53bf;&#x4ee5;&#x4e0a;&#x884c;&#x653f;&#x533a;&#x5212;&#x4ee3;&#x7801;&apos;</span>).click()\n        time.sleep(<span class=\"hljs-number\">1</span>)\n        <span class=\"hljs-comment\"># 2&#x3001;&#x5207;&#x6362;&#x53e5;&#x67c4;</span>\n        all_handles = <span class=\"hljs-variable language_\">self</span>.driver.window_handles\n        <span class=\"hljs-variable language_\">self</span>.driver.switch_to.window(all_handles[<span class=\"hljs-number\">1</span>])\n        <span class=\"hljs-comment\"># 3&#x3001;&#x63d0;&#x53d6;&#x6570;&#x636e;</span>\n        tr_list = <span class=\"hljs-variable language_\">self</span>.driver.find_elements_by_xpath(<span class=\"hljs-string\">&apos;//tr[@height=&quot;19&quot;]&apos;</span>)\n        <span class=\"hljs-keyword\">for</span> tr <span class=\"hljs-keyword\">in</span> tr_list:\n            name = tr.find_element_by_xpath(<span class=\"hljs-string\">&apos;./td[3]&apos;</span>).text.strip()\n            code = tr.find_element_by_xpath(<span class=\"hljs-string\">&apos;./td[2]&apos;</span>).text.strip()\n            <span class=\"hljs-built_in\">print</span>(name,code)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.parse_html()\n        <span class=\"hljs-variable language_\">self</span>.driver.quit()\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    spider = MzbSpider()\n    spider.run()\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2452,2494"}},{"content":"<pre data-lines=\"2495,2517\"><code data-lines=\"2495,2517\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x4f7f;&#x7528;selenium&#x767b;&#x5f55;&#x8c46;&#x74e3;\nswitch_to.frame()\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n<span class=\"hljs-keyword\">import</span> time\n\ndriver = webdriver.Chrome()\ndriver.get(<span class=\"hljs-string\">&apos;https://www.douban.com/&apos;</span>)\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x5207;&#x6362;&#x5230;frame&#x5b50;&#x9875;&#x9762;</span>\nframe_node = driver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;anony-reg-new&quot;]/div/div[1]/iframe&apos;</span>)\ndriver.switch_to.frame(frame_node)\n\n<span class=\"hljs-comment\"># 2&#x3001;&#x5bc6;&#x7801;&#x767b;&#x5f55; + &#x7528;&#x6237;&#x540d; + &#x5bc6;&#x7801; + &#x767b;&#x5f55;&#x8c46;&#x74e3;&#x6309;&#x94ae;</span>\ndriver.find_element_by_xpath(<span class=\"hljs-string\">&apos;/html/body/div[1]/div[1]/ul[1]/li[2]&apos;</span>).click()\ndriver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;username&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;13603263409&apos;</span>)\ndriver.find_element_by_xpath(<span class=\"hljs-string\">&apos;//*[@id=&quot;password&quot;]&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;zhanshen001&apos;</span>)\ndriver.find_element_by_xpath(<span class=\"hljs-string\">&apos;/html/body/div[1]/div[2]/div[1]/div[5]/a&apos;</span>).click()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2495,2517"}},{"content":"<pre data-lines=\"2518,2538\"><code data-lines=\"2518,2538\"><span class=\"hljs-string\">&quot;&quot;&quot;\n&#x767b;&#x5f55;QQ&#x90ae;&#x7bb1;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> selenium <span class=\"hljs-keyword\">import</span> webdriver\n\ndriver = webdriver.Chrome()\ndriver.get(<span class=\"hljs-string\">&apos;https://mail.qq.com/&apos;</span>)\n\n<span class=\"hljs-comment\"># 1&#x3001;&#x5148;&#x5207;&#x6362;frame : &#x9ed8;&#x8ba4;&#x652f;&#x6301; id &#x548c; name &#x5c5e;&#x6027;&#x503c;</span>\ndriver.switch_to.frame(<span class=\"hljs-string\">&apos;login_frame&apos;</span>)\n\n<span class=\"hljs-comment\"># 2&#x3001;&#x627e;&#x8282;&#x70b9;</span>\ndriver.find_element_by_id(<span class=\"hljs-string\">&apos;u&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;2621470058&apos;</span>)\ndriver.find_element_by_id(<span class=\"hljs-string\">&apos;p&apos;</span>).send_keys(<span class=\"hljs-string\">&apos;zhanshen001&apos;</span>)\ndriver.find_element_by_id(<span class=\"hljs-string\">&apos;login_button&apos;</span>).click()\n\ndriver.switch_to.default_content()\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2518,2538"}},{"content":"<img src=\"../../image/12-python-new/13-spider/scrapy%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png\" alt=\"img\">","children":[],"payload":{"tag":"img","lines":"2539,2540"}}],"payload":{"tag":"h5","lines":"2343,2344"}}],"payload":{"tag":"h3","lines":"1543,1544"}}],"payload":{"tag":"h2","lines":"608,609"}}],"payload":{"tag":"h1","lines":"141,142"}}]},{})</script>
</body>
</html>
