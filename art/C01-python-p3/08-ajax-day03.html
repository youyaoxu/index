<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"08-ajax-day03","children":[{"content":"&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"4,82\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask\n<span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> render_template\n<span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> request\n<span class=\"hljs-keyword\">import</span> json\n\napp = Flask(__name__)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/load&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_view</span>():\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;load.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/load_server&apos;</span>,methods=[<span class=\"hljs-string\">&apos;get&apos;</span>,<span class=\"hljs-string\">&apos;post&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_server</span>():\n    <span class=\"hljs-comment\"># &#x524d;&#x7aef;&#x4ee3;&#x7801; &#x24;(&apos;#show&apos;).load(&apos;/load_server&apos;,&apos;uname=shibw&amp;age=18&apos;)</span>\n    <span class=\"hljs-comment\"># uname = request.args.get(&apos;uname&apos;)</span>\n    <span class=\"hljs-comment\"># age = request.args.get(&apos;age&apos;)</span>\n    <span class=\"hljs-comment\"># print(uname,age)</span>\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;load_server.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/get&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_view</span>():\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;jq_get.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/get_server&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_server</span>():\n    uname = request.args.get(<span class=\"hljs-string\">&apos;uname&apos;</span>)\n    json_data = {<span class=\"hljs-string\">&quot;code&quot;</span>:<span class=\"hljs-number\">200</span>,<span class=\"hljs-string\">&quot;msg&quot;</span>:<span class=\"hljs-string\">&quot;username is %s&quot;</span> % uname}\n    <span class=\"hljs-comment\"># import json 15:38~15:40</span>\n    <span class=\"hljs-comment\"># &#x8bbe;&#x7f6e;&#x54cd;&#x5e94;&#x5934;&#x7684;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x7684;&#x683c;&#x5f0f;&#x4e3a;json&#x683c;&#x5f0f;  application/json</span>\n    <span class=\"hljs-keyword\">return</span> json.dumps(json_data),{<span class=\"hljs-string\">&quot;Content-Type&quot;</span>:<span class=\"hljs-string\">&quot;application/json&quot;</span>}\n    <span class=\"hljs-comment\"># return json_data</span>\n\n\n<span class=\"hljs-comment\">#16:00~16:15</span>\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/post&apos;</span>,methods=[<span class=\"hljs-string\">&apos;get&apos;</span>,<span class=\"hljs-string\">&apos;post&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">post_view</span>():\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&apos;GET&apos;</span>:\n        <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;jq_post.html&apos;</span>)\n    <span class=\"hljs-keyword\">elif</span> request.method == <span class=\"hljs-string\">&apos;POST&apos;</span>:\n        data = {<span class=\"hljs-string\">&apos;code&apos;</span>:<span class=\"hljs-number\">200</span>,<span class=\"hljs-string\">&apos;msg&apos;</span>:<span class=\"hljs-string\">&apos;post is ok&apos;</span>}\n        age = request.form.get(<span class=\"hljs-string\">&apos;age&apos;</span>)\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">int</span>(age)&gt;<span class=\"hljs-number\">100</span>:\n            data = {<span class=\"hljs-string\">&apos;code&apos;</span>:<span class=\"hljs-number\">201</span>,<span class=\"hljs-string\">&apos;msg&apos;</span>:<span class=\"hljs-string\">&apos;Your age is so big!&apos;</span>}\n        <span class=\"hljs-keyword\">return</span> data<span class=\"hljs-comment\">#1.1.1</span>\n        <span class=\"hljs-comment\"># return json.dumps(data),{&quot;Content-Type&quot;:&quot;application/json&quot;}</span>\n\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/ajax&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">ajax_view</span>():\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;jq_ajax.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/ajax_server&apos;</span>,methods=[<span class=\"hljs-string\">&apos;get&apos;</span>,<span class=\"hljs-string\">&apos;post&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">ajax_server</span>():\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&apos;GET&apos;</span>:\n        <span class=\"hljs-keyword\">import</span> time\n        time.sleep(<span class=\"hljs-number\">3</span>)\n        data = {<span class=\"hljs-string\">&quot;code&quot;</span>:<span class=\"hljs-number\">200</span>,<span class=\"hljs-string\">&quot;msg&quot;</span>:<span class=\"hljs-string\">&apos;OK!&apos;</span>}\n        <span class=\"hljs-comment\"># int(data)  &#x9519;&#x8bef;&#x4ee3;&#x7801; &#x6f14;&#x793a;&#x524d;&#x7aef;error</span>\n        <span class=\"hljs-keyword\">return</span> data\n        <span class=\"hljs-comment\"># return json.dumps(data)</span>\n    <span class=\"hljs-keyword\">elif</span> request.method == <span class=\"hljs-string\">&apos;POST&apos;</span>:\n        <span class=\"hljs-comment\"># uname = request.form.get(&apos;uname&apos;)</span>\n        <span class=\"hljs-comment\">#request.json  &#x83b7;&#x53d6;&#x524d;&#x7aef;json&#x683c;&#x5f0f;&#x63d0;&#x4ea4;&#x7684;&#x6570;&#x636e;</span>\n        <span class=\"hljs-comment\"># json_obj = request.get_json()</span>\n        <span class=\"hljs-comment\"># uname = json_obj.get(&apos;uname&apos;)</span>\n        uname = request.json.get(<span class=\"hljs-string\">&apos;uname&apos;</span>)\n        data = {<span class=\"hljs-string\">&quot;code&quot;</span>:<span class=\"hljs-number\">200</span>,<span class=\"hljs-string\">&quot;msg&quot;</span>:<span class=\"hljs-string\">&apos;&#x6b22;&#x8fce;&#x60a8;:%s&apos;</span> % uname}\n        <span class=\"hljs-comment\"># return json.dumps(data)</span>\n        <span class=\"hljs-keyword\">return</span> data\n\n\n\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    app.run(debug=<span class=\"hljs-literal\">True</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,82"}}],"payload":{"tag":"h3","lines":"2,3"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
