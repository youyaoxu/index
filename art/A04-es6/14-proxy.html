<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Proxy","children":[{"content":"&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"12,15\"><code>Proxy &#x7528;&#x4e8e;&#x4fee;&#x6539;&#x67d0;&#x4e9b;&#x64cd;&#x4f5c;&#x7684;&#x9ed8;&#x8ba4;&#x884c;&#x4e3a;&#xff0c;&#x7b49;&#x540c;&#x4e8e;&#x5728;&#x8bed;&#x8a00;&#x5c42;&#x9762;&#x505a;&#x51fa;&#x4fee;&#x6539;&#xff0c;&#x6240;&#x4ee5;&#x5c5e;&#x4e8e;&#x4e00;&#x79cd;&#x201c;&#x5143;&#x7f16;&#x7a0b;&#x201d;&#xff08;meta programming&#xff09;&#xff0c;&#x5373;&#x5bf9;&#x7f16;&#x7a0b;&#x8bed;&#x8a00;&#x8fdb;&#x884c;&#x7f16;&#x7a0b;&#x3002;\n\nProxy &#x53ef;&#x4ee5;&#x7406;&#x89e3;&#x6210;&#xff0c;&#x5728;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e4b;&#x524d;&#x67b6;&#x8bbe;&#x4e00;&#x5c42;&#x201c;&#x62e6;&#x622a;&#x201d;&#xff0c;&#x5916;&#x754c;&#x5bf9;&#x8be5;&#x5bf9;&#x8c61;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x90fd;&#x5fc5;&#x987b;&#x5148;&#x901a;&#x8fc7;&#x8fd9;&#x5c42;&#x62e6;&#x622a;&#xff0c;&#x56e0;&#x6b64;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x79cd;&#x673a;&#x5236;&#xff0c;&#x53ef;&#x4ee5;&#x5bf9;&#x5916;&#x754c;&#x7684;&#x8bbf;&#x95ee;&#x8fdb;&#x884c;&#x8fc7;&#x6ee4;&#x548c;&#x6539;&#x5199;&#x3002;Proxy &#x8fd9;&#x4e2a;&#x8bcd;&#x7684;&#x539f;&#x610f;&#x662f;&#x4ee3;&#x7406;&#xff0c;&#x7528;&#x5728;&#x8fd9;&#x91cc;&#x8868;&#x793a;&#x7531;&#x5b83;&#x6765;&#x201c;&#x4ee3;&#x7406;&#x201d;&#x67d0;&#x4e9b;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x4ee5;&#x8bd1;&#x4e3a;&#x201c;&#x4ee3;&#x7406;&#x5668;&#x201d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"12,15"}},{"content":"<pre data-lines=\"16,28\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> obj = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">target, propKey, receiver</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`getting <span class=\"hljs-subst\">&#x24;{propKey}</span>!`</span>);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">get</span>(target, propKey, receiver);\n  },\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">target, propKey, value, receiver</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`setting <span class=\"hljs-subst\">&#x24;{propKey}</span>!`</span>);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">set</span>(target, propKey, value, receiver);\n  }\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"16,28"}},{"content":"<pre data-lines=\"29,30\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x5bf9;&#x4e00;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61;&#x67b6;&#x8bbe;&#x4e86;&#x4e00;&#x5c42;&#x62e6;&#x622a;&#xff0c;&#x91cd;&#x5b9a;&#x4e49;&#x4e86;&#x5c5e;&#x6027;&#x7684;&#x8bfb;&#x53d6;&#xff08;`get`&#xff09;&#x548c;&#x8bbe;&#x7f6e;&#xff08;`set`&#xff09;&#x884c;&#x4e3a;&#x3002;&#x8fd9;&#x91cc;&#x6682;&#x65f6;&#x5148;&#x4e0d;&#x89e3;&#x91ca;&#x5177;&#x4f53;&#x7684;&#x8bed;&#x6cd5;&#xff0c;&#x53ea;&#x770b;&#x8fd0;&#x884c;&#x7ed3;&#x679c;&#x3002;&#x5bf9;&#x8bbe;&#x7f6e;&#x4e86;&#x62e6;&#x622a;&#x884c;&#x4e3a;&#x7684;&#x5bf9;&#x8c61;`obj`&#xff0c;&#x53bb;&#x8bfb;&#x5199;&#x5b83;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x5c31;&#x4f1a;&#x5f97;&#x5230;&#x4e0b;&#x9762;&#x7684;&#x7ed3;&#x679c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"29,30"}},{"content":"<pre data-lines=\"31,39\"><code class=\"language-javascript\">obj.<span class=\"hljs-property\">count</span> = <span class=\"hljs-number\">1</span>\n<span class=\"hljs-comment\">//  setting count!</span>\n++obj.<span class=\"hljs-property\">count</span>\n<span class=\"hljs-comment\">//  getting count!</span>\n<span class=\"hljs-comment\">//  setting count!</span>\n<span class=\"hljs-comment\">//  2</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"31,39"}},{"content":"<pre data-lines=\"40,43\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8bf4;&#x660e;&#xff0c;Proxy &#x5b9e;&#x9645;&#x4e0a;&#x91cd;&#x8f7d;&#xff08;overload&#xff09;&#x4e86;&#x70b9;&#x8fd0;&#x7b97;&#x7b26;&#xff0c;&#x5373;&#x7528;&#x81ea;&#x5df1;&#x7684;&#x5b9a;&#x4e49;&#x8986;&#x76d6;&#x4e86;&#x8bed;&#x8a00;&#x7684;&#x539f;&#x59cb;&#x5b9a;&#x4e49;&#x3002;\n\nES6 &#x539f;&#x751f;&#x63d0;&#x4f9b; Proxy &#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x7528;&#x6765;&#x751f;&#x6210; Proxy &#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"40,43"}},{"content":"<pre data-lines=\"44,47\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"44,47"}},{"content":"<pre data-lines=\"48,51\"><code>Proxy &#x5bf9;&#x8c61;&#x7684;&#x6240;&#x6709;&#x7528;&#x6cd5;&#xff0c;&#x90fd;&#x662f;&#x4e0a;&#x9762;&#x8fd9;&#x79cd;&#x5f62;&#x5f0f;&#xff0c;&#x4e0d;&#x540c;&#x7684;&#x53ea;&#x662f;`handler`&#x53c2;&#x6570;&#x7684;&#x5199;&#x6cd5;&#x3002;&#x5176;&#x4e2d;&#xff0c;`new Proxy()`&#x8868;&#x793a;&#x751f;&#x6210;&#x4e00;&#x4e2a;`Proxy`&#x5b9e;&#x4f8b;&#xff0c;`target`&#x53c2;&#x6570;&#x8868;&#x793a;&#x6240;&#x8981;&#x62e6;&#x622a;&#x7684;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#xff0c;`handler`&#x53c2;&#x6570;&#x4e5f;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x7528;&#x6765;&#x5b9a;&#x5236;&#x62e6;&#x622a;&#x884c;&#x4e3a;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x53e6;&#x4e00;&#x4e2a;&#x62e6;&#x622a;&#x8bfb;&#x53d6;&#x5c5e;&#x6027;&#x884c;&#x4e3a;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"48,51"}},{"content":"<pre data-lines=\"52,63\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, propKey</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">35</span>;\n  }\n});\n\nproxy.<span class=\"hljs-property\">time</span> <span class=\"hljs-comment\">// 35</span>\nproxy.<span class=\"hljs-property\">name</span> <span class=\"hljs-comment\">// 35</span>\nproxy.<span class=\"hljs-property\">title</span> <span class=\"hljs-comment\">// 35</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"52,63"}},{"content":"<pre data-lines=\"64,69\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4f5c;&#x4e3a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;`Proxy`&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x3002;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x6240;&#x8981;&#x4ee3;&#x7406;&#x7684;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#xff08;&#x4e0a;&#x4f8b;&#x662f;&#x4e00;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61;&#xff09;&#xff0c;&#x5373;&#x5982;&#x679c;&#x6ca1;&#x6709;`Proxy`&#x7684;&#x4ecb;&#x5165;&#xff0c;&#x64cd;&#x4f5c;&#x539f;&#x6765;&#x8981;&#x8bbf;&#x95ee;&#x7684;&#x5c31;&#x662f;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#xff1b;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;&#xff0c;&#x5bf9;&#x4e8e;&#x6bcf;&#x4e00;&#x4e2a;&#x88ab;&#x4ee3;&#x7406;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x9700;&#x8981;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x5bf9;&#x5e94;&#x7684;&#x5904;&#x7406;&#x51fd;&#x6570;&#xff0c;&#x8be5;&#x51fd;&#x6570;&#x5c06;&#x62e6;&#x622a;&#x5bf9;&#x5e94;&#x7684;&#x64cd;&#x4f5c;&#x3002;&#x6bd4;&#x5982;&#xff0c;&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;&#x6709;&#x4e00;&#x4e2a;`get`&#x65b9;&#x6cd5;&#xff0c;&#x7528;&#x6765;&#x62e6;&#x622a;&#x5bf9;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x5c5e;&#x6027;&#x7684;&#x8bbf;&#x95ee;&#x8bf7;&#x6c42;&#x3002;`get`&#x65b9;&#x6cd5;&#x7684;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x5206;&#x522b;&#x662f;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x548c;&#x6240;&#x8981;&#x8bbf;&#x95ee;&#x7684;&#x5c5e;&#x6027;&#x3002;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#xff0c;&#x7531;&#x4e8e;&#x62e6;&#x622a;&#x51fd;&#x6570;&#x603b;&#x662f;&#x8fd4;&#x56de;`35`&#xff0c;&#x6240;&#x4ee5;&#x8bbf;&#x95ee;&#x4efb;&#x4f55;&#x5c5e;&#x6027;&#x90fd;&#x5f97;&#x5230;`35`&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x8981;&#x4f7f;&#x5f97;`Proxy`&#x8d77;&#x4f5c;&#x7528;&#xff0c;&#x5fc5;&#x987b;&#x9488;&#x5bf9;`Proxy`&#x5b9e;&#x4f8b;&#xff08;&#x4e0a;&#x4f8b;&#x662f;`proxy`&#x5bf9;&#x8c61;&#xff09;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x9488;&#x5bf9;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#xff08;&#x4e0a;&#x4f8b;&#x662f;&#x7a7a;&#x5bf9;&#x8c61;&#xff09;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;&#x3002;\n\n&#x5982;&#x679c;`handler`&#x6ca1;&#x6709;&#x8bbe;&#x7f6e;&#x4efb;&#x4f55;&#x62e6;&#x622a;&#xff0c;&#x90a3;&#x5c31;&#x7b49;&#x540c;&#x4e8e;&#x76f4;&#x63a5;&#x901a;&#x5411;&#x539f;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"64,69"}},{"content":"<pre data-lines=\"70,77\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> target = {};\n<span class=\"hljs-keyword\">var</span> handler = {};\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\nproxy.<span class=\"hljs-property\">a</span> = <span class=\"hljs-string\">&apos;b&apos;</span>;\ntarget.<span class=\"hljs-property\">a</span> <span class=\"hljs-comment\">// &quot;b&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"70,77"}},{"content":"<pre data-lines=\"78,81\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`handler`&#x662f;&#x4e00;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61;&#xff0c;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x62e6;&#x622a;&#x6548;&#x679c;&#xff0c;&#x8bbf;&#x95ee;`proxy`&#x5c31;&#x7b49;&#x540c;&#x4e8e;&#x8bbf;&#x95ee;`target`&#x3002;\n\n&#x4e00;&#x4e2a;&#x6280;&#x5de7;&#x662f;&#x5c06; Proxy &#x5bf9;&#x8c61;&#xff0c;&#x8bbe;&#x7f6e;&#x5230;`object.proxy`&#x5c5e;&#x6027;&#xff0c;&#x4ece;&#x800c;&#x53ef;&#x4ee5;&#x5728;`object`&#x5bf9;&#x8c61;&#x4e0a;&#x8c03;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"78,81"}},{"content":"<pre data-lines=\"82,85\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> object = { <span class=\"hljs-attr\">proxy</span>: <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler) };\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"82,85"}},{"content":"<pre data-lines=\"86,87\"><code>Proxy &#x5b9e;&#x4f8b;&#x4e5f;&#x53ef;&#x4ee5;&#x4f5c;&#x4e3a;&#x5176;&#x4ed6;&#x5bf9;&#x8c61;&#x7684;&#x539f;&#x578b;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"86,87"}},{"content":"<pre data-lines=\"88,98\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, propKey</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">35</span>;\n  }\n});\n\n<span class=\"hljs-keyword\">let</span> obj = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(proxy);\nobj.<span class=\"hljs-property\">time</span> <span class=\"hljs-comment\">// 35</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"88,98"}},{"content":"<pre data-lines=\"99,102\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`proxy`&#x5bf9;&#x8c61;&#x662f;`obj`&#x5bf9;&#x8c61;&#x7684;&#x539f;&#x578b;&#xff0c;`obj`&#x5bf9;&#x8c61;&#x672c;&#x8eab;&#x5e76;&#x6ca1;&#x6709;`time`&#x5c5e;&#x6027;&#xff0c;&#x6240;&#x4ee5;&#x6839;&#x636e;&#x539f;&#x578b;&#x94fe;&#xff0c;&#x4f1a;&#x5728;`proxy`&#x5bf9;&#x8c61;&#x4e0a;&#x8bfb;&#x53d6;&#x8be5;&#x5c5e;&#x6027;&#xff0c;&#x5bfc;&#x81f4;&#x88ab;&#x62e6;&#x622a;&#x3002;\n\n&#x540c;&#x4e00;&#x4e2a;&#x62e6;&#x622a;&#x5668;&#x51fd;&#x6570;&#xff0c;&#x53ef;&#x4ee5;&#x8bbe;&#x7f6e;&#x62e6;&#x622a;&#x591a;&#x4e2a;&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"99,102"}},{"content":"<pre data-lines=\"103,130\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, name</span>) {\n    <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">&apos;prototype&apos;</span>) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>;\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;Hello, &apos;</span> + name;\n  },\n\n  <span class=\"hljs-attr\">apply</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, thisBinding, args</span>) {\n    <span class=\"hljs-keyword\">return</span> args[<span class=\"hljs-number\">0</span>];\n  },\n\n  <span class=\"hljs-attr\">construct</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, args</span>) {\n    <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-attr\">value</span>: args[<span class=\"hljs-number\">1</span>]};\n  }\n};\n\n<span class=\"hljs-keyword\">var</span> fproxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">x, y</span>) {\n  <span class=\"hljs-keyword\">return</span> x + y;\n}, handler);\n\n<span class=\"hljs-title function_\">fproxy</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>) <span class=\"hljs-comment\">// 1</span>\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">fproxy</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>) <span class=\"hljs-comment\">// {value: 2}</span>\nfproxy.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> === <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> <span class=\"hljs-comment\">// true</span>\nfproxy.<span class=\"hljs-property\">foo</span> === <span class=\"hljs-string\">&quot;Hello, foo&quot;</span> <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"103,130"}},{"content":"<pre data-lines=\"131,148\"><code>&#x5bf9;&#x4e8e;&#x53ef;&#x4ee5;&#x8bbe;&#x7f6e;&#x3001;&#x4f46;&#x6ca1;&#x6709;&#x8bbe;&#x7f6e;&#x62e6;&#x622a;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x5219;&#x76f4;&#x63a5;&#x843d;&#x5728;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0a;&#xff0c;&#x6309;&#x7167;&#x539f;&#x5148;&#x7684;&#x65b9;&#x5f0f;&#x4ea7;&#x751f;&#x7ed3;&#x679c;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f; Proxy &#x652f;&#x6301;&#x7684;&#x62e6;&#x622a;&#x64cd;&#x4f5c;&#x4e00;&#x89c8;&#xff0c;&#x4e00;&#x5171; 13 &#x79cd;&#x3002;\n\n- **get(target, propKey, receiver)**&#xff1a;&#x62e6;&#x622a;&#x5bf9;&#x8c61;&#x5c5e;&#x6027;&#x7684;&#x8bfb;&#x53d6;&#xff0c;&#x6bd4;&#x5982;`proxy.foo`&#x548c;`proxy[&apos;foo&apos;]`&#x3002;\n- **set(target, propKey, value, receiver)**&#xff1a;&#x62e6;&#x622a;&#x5bf9;&#x8c61;&#x5c5e;&#x6027;&#x7684;&#x8bbe;&#x7f6e;&#xff0c;&#x6bd4;&#x5982;`proxy.foo = v`&#x6216;`proxy[&apos;foo&apos;] = v`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n- **has(target, propKey)**&#xff1a;&#x62e6;&#x622a;`propKey in proxy`&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n- **deleteProperty(target, propKey)**&#xff1a;&#x62e6;&#x622a;`delete proxy[propKey]`&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n- **ownKeys(target)**&#xff1a;&#x62e6;&#x622a;`Object.getOwnPropertyNames(proxy)`&#x3001;`Object.getOwnPropertySymbols(proxy)`&#x3001;`Object.keys(proxy)`&#x3001;`for...in`&#x5faa;&#x73af;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x6240;&#x6709;&#x81ea;&#x8eab;&#x7684;&#x5c5e;&#x6027;&#x7684;&#x5c5e;&#x6027;&#x540d;&#xff0c;&#x800c;`Object.keys()`&#x7684;&#x8fd4;&#x56de;&#x7ed3;&#x679c;&#x4ec5;&#x5305;&#x62ec;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x81ea;&#x8eab;&#x7684;&#x53ef;&#x904d;&#x5386;&#x5c5e;&#x6027;&#x3002;\n- **getOwnPropertyDescriptor(target, propKey)**&#xff1a;&#x62e6;&#x622a;`Object.getOwnPropertyDescriptor(proxy, propKey)`&#xff0c;&#x8fd4;&#x56de;&#x5c5e;&#x6027;&#x7684;&#x63cf;&#x8ff0;&#x5bf9;&#x8c61;&#x3002;\n- **defineProperty(target, propKey, propDesc)**&#xff1a;&#x62e6;&#x622a;`Object.defineProperty(proxy, propKey, propDesc&#xff09;`&#x3001;`Object.defineProperties(proxy, propDescs)`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n- **preventExtensions(target)**&#xff1a;&#x62e6;&#x622a;`Object.preventExtensions(proxy)`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n- **getPrototypeOf(target)**&#xff1a;&#x62e6;&#x622a;`Object.getPrototypeOf(proxy)`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x3002;\n- **isExtensible(target)**&#xff1a;&#x62e6;&#x622a;`Object.isExtensible(proxy)`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n- **setPrototypeOf(target, proto)**&#xff1a;&#x62e6;&#x622a;`Object.setPrototypeOf(proxy, proto)`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#x3002;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x90a3;&#x4e48;&#x8fd8;&#x6709;&#x4e24;&#x79cd;&#x989d;&#x5916;&#x64cd;&#x4f5c;&#x53ef;&#x4ee5;&#x62e6;&#x622a;&#x3002;\n- **apply(target, object, args)**&#xff1a;&#x62e6;&#x622a; Proxy &#x5b9e;&#x4f8b;&#x4f5c;&#x4e3a;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x6bd4;&#x5982;`proxy(...args)`&#x3001;`proxy.call(object, ...args)`&#x3001;`proxy.apply(...)`&#x3002;\n- **construct(target, args)**&#xff1a;&#x62e6;&#x622a; Proxy &#x5b9e;&#x4f8b;&#x4f5c;&#x4e3a;&#x6784;&#x9020;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x6bd4;&#x5982;`new proxy(...args)`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,148"}}],"payload":{"tag":"h2","lines":"10,11"}},{"content":"Proxy &#x5b9e;&#x4f8b;&#x7684;&#x65b9;&#x6cd5;","children":[{"content":"get()","children":[{"content":"<pre data-lines=\"155,158\"><code>`get`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x62e6;&#x622a;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#x7684;&#x8bfb;&#x53d6;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x4f9d;&#x6b21;&#x4e3a;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x3001;&#x5c5e;&#x6027;&#x540d;&#x548c; proxy &#x5b9e;&#x4f8b;&#x672c;&#x8eab;&#xff08;&#x4e25;&#x683c;&#x5730;&#x8bf4;&#xff0c;&#x662f;&#x64cd;&#x4f5c;&#x884c;&#x4e3a;&#x6240;&#x9488;&#x5bf9;&#x7684;&#x5bf9;&#x8c61;&#xff09;&#xff0c;&#x5176;&#x4e2d;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x9009;&#x3002;\n\n`get`&#x65b9;&#x6cd5;&#x7684;&#x7528;&#x6cd5;&#xff0c;&#x4e0a;&#x6587;&#x5df2;&#x7ecf;&#x6709;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#xff0c;&#x4e0b;&#x9762;&#x662f;&#x53e6;&#x4e00;&#x4e2a;&#x62e6;&#x622a;&#x8bfb;&#x53d6;&#x64cd;&#x4f5c;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"155,158"}},{"content":"<pre data-lines=\"159,177\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> person = {\n  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>\n};\n\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(person, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, propKey</span>) {\n    <span class=\"hljs-keyword\">if</span> (propKey <span class=\"hljs-keyword\">in</span> target) {\n      <span class=\"hljs-keyword\">return</span> target[propKey];\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ReferenceError</span>(<span class=\"hljs-string\">&quot;Prop name \\&quot;&quot;</span> + propKey + <span class=\"hljs-string\">&quot;\\&quot; does not exist.&quot;</span>);\n    }\n  }\n});\n\nproxy.<span class=\"hljs-property\">name</span> <span class=\"hljs-comment\">// &quot;&#x5f20;&#x4e09;&quot;</span>\nproxy.<span class=\"hljs-property\">age</span> <span class=\"hljs-comment\">// &#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"159,177"}},{"content":"<pre data-lines=\"178,181\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8868;&#x793a;&#xff0c;&#x5982;&#x679c;&#x8bbf;&#x95ee;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4f1a;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x3002;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x8fd9;&#x4e2a;&#x62e6;&#x622a;&#x51fd;&#x6570;&#xff0c;&#x8bbf;&#x95ee;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x53ea;&#x4f1a;&#x8fd4;&#x56de;`undefined`&#x3002;\n\n`get`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x7ee7;&#x627f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"178,181"}},{"content":"<pre data-lines=\"182,193\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> proto = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, propertyKey, receiver</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;GET &apos;</span> + propertyKey);\n    <span class=\"hljs-keyword\">return</span> target[propertyKey];\n  }\n});\n\n<span class=\"hljs-keyword\">let</span> obj = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(proto);\nobj.<span class=\"hljs-property\">foo</span> <span class=\"hljs-comment\">// &quot;GET foo&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"182,193"}},{"content":"<pre data-lines=\"194,197\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x62e6;&#x622a;&#x64cd;&#x4f5c;&#x5b9a;&#x4e49;&#x5728;`Prototype`&#x5bf9;&#x8c61;&#x4e0a;&#x9762;&#xff0c;&#x6240;&#x4ee5;&#x5982;&#x679c;&#x8bfb;&#x53d6;`obj`&#x5bf9;&#x8c61;&#x7ee7;&#x627f;&#x7684;&#x5c5e;&#x6027;&#x65f6;&#xff0c;&#x62e6;&#x622a;&#x4f1a;&#x751f;&#x6548;&#x3002;\n\n&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x4f7f;&#x7528;`get`&#x62e6;&#x622a;&#xff0c;&#x5b9e;&#x73b0;&#x6570;&#x7ec4;&#x8bfb;&#x53d6;&#x8d1f;&#x6570;&#x7684;&#x7d22;&#x5f15;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"194,197"}},{"content":"<pre data-lines=\"198,218\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createArray</span>(<span class=\"hljs-params\">...elements</span>) {\n  <span class=\"hljs-keyword\">let</span> handler = {\n    <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, propKey, receiver</span>) {\n      <span class=\"hljs-keyword\">let</span> index = <span class=\"hljs-title class_\">Number</span>(propKey);\n      <span class=\"hljs-keyword\">if</span> (index &lt; <span class=\"hljs-number\">0</span>) {\n        propKey = <span class=\"hljs-title class_\">String</span>(target.<span class=\"hljs-property\">length</span> + index);\n      }\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">get</span>(target, propKey, receiver);\n    }\n  };\n\n  <span class=\"hljs-keyword\">let</span> target = [];\n  target.<span class=\"hljs-title function_\">push</span>(...elements);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n}\n\n<span class=\"hljs-keyword\">let</span> arr = <span class=\"hljs-title function_\">createArray</span>(<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;b&apos;</span>, <span class=\"hljs-string\">&apos;c&apos;</span>);\narr[-<span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\">// c</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"198,218"}},{"content":"<pre data-lines=\"219,222\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6570;&#x7ec4;&#x7684;&#x4f4d;&#x7f6e;&#x53c2;&#x6570;&#x662f;`-1`&#xff0c;&#x5c31;&#x4f1a;&#x8f93;&#x51fa;&#x6570;&#x7ec4;&#x7684;&#x5012;&#x6570;&#x7b2c;&#x4e00;&#x4e2a;&#x6210;&#x5458;&#x3002;\n\n&#x5229;&#x7528; Proxy&#xff0c;&#x53ef;&#x4ee5;&#x5c06;&#x8bfb;&#x53d6;&#x5c5e;&#x6027;&#x7684;&#x64cd;&#x4f5c;&#xff08;`get`&#xff09;&#xff0c;&#x8f6c;&#x53d8;&#x4e3a;&#x6267;&#x884c;&#x67d0;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x4ece;&#x800c;&#x5b9e;&#x73b0;&#x5c5e;&#x6027;&#x7684;&#x94fe;&#x5f0f;&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"219,222"}},{"content":"<pre data-lines=\"223,247\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> pipe = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">value</span>) {\n  <span class=\"hljs-keyword\">var</span> funcStack = [];\n  <span class=\"hljs-keyword\">var</span> oproxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({} , {\n    get : <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">pipeObject, fnName</span>) {\n      <span class=\"hljs-keyword\">if</span> (fnName === <span class=\"hljs-string\">&apos;get&apos;</span>) {\n        <span class=\"hljs-keyword\">return</span> funcStack.<span class=\"hljs-title function_\">reduce</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">val, fn</span>) {\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">fn</span>(val);\n        },value);\n      }\n      funcStack.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-variable language_\">window</span>[fnName]);\n      <span class=\"hljs-keyword\">return</span> oproxy;\n    }\n  });\n\n  <span class=\"hljs-keyword\">return</span> oproxy;\n}\n\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title function_\">double</span> = n =&gt; n * <span class=\"hljs-number\">2</span>;\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title function_\">pow</span>    = n =&gt; n * n;\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title function_\">reverseInt</span> = n =&gt; n.<span class=\"hljs-title function_\">toString</span>().<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&quot;&quot;</span>).<span class=\"hljs-title function_\">reverse</span>().<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&quot;&quot;</span>) | <span class=\"hljs-number\">0</span>;\n\n<span class=\"hljs-title function_\">pipe</span>(<span class=\"hljs-number\">3</span>).<span class=\"hljs-property\">double</span>.<span class=\"hljs-property\">pow</span>.<span class=\"hljs-property\">reverseInt</span>.<span class=\"hljs-property\">get</span>; <span class=\"hljs-comment\">// 63</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"223,247"}},{"content":"<pre data-lines=\"248,251\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8bbe;&#x7f6e; Proxy &#x4ee5;&#x540e;&#xff0c;&#x8fbe;&#x5230;&#x4e86;&#x5c06;&#x51fd;&#x6570;&#x540d;&#x94fe;&#x5f0f;&#x4f7f;&#x7528;&#x7684;&#x6548;&#x679c;&#x3002;\n\n&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x5219;&#x662f;&#x5229;&#x7528;`get`&#x62e6;&#x622a;&#xff0c;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x751f;&#x6210;&#x5404;&#x79cd; DOM &#x8282;&#x70b9;&#x7684;&#x901a;&#x7528;&#x51fd;&#x6570;`dom`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"248,251"}},{"content":"<pre data-lines=\"252,284\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> dom = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, property</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">attrs = {}, ...children</span>) {\n      <span class=\"hljs-keyword\">const</span> el = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(property);\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> prop <span class=\"hljs-keyword\">of</span> <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(attrs)) {\n        el.<span class=\"hljs-title function_\">setAttribute</span>(prop, attrs[prop]);\n      }\n      <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> child <span class=\"hljs-keyword\">of</span> children) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> child === <span class=\"hljs-string\">&apos;string&apos;</span>) {\n          child = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createTextNode</span>(child);\n        }\n        el.<span class=\"hljs-title function_\">appendChild</span>(child);\n      }\n      <span class=\"hljs-keyword\">return</span> el;\n    }\n  }\n});\n\n<span class=\"hljs-keyword\">const</span> el = dom.<span class=\"hljs-title function_\">div</span>({},\n  <span class=\"hljs-string\">&apos;Hello, my name is &apos;</span>,\n  dom.<span class=\"hljs-title function_\">a</span>({<span class=\"hljs-attr\">href</span>: <span class=\"hljs-string\">&apos;//example.com&apos;</span>}, <span class=\"hljs-string\">&apos;Mark&apos;</span>),\n  <span class=\"hljs-string\">&apos;. I like:&apos;</span>,\n  dom.<span class=\"hljs-title function_\">ul</span>({},\n    dom.<span class=\"hljs-title function_\">li</span>({}, <span class=\"hljs-string\">&apos;The web&apos;</span>),\n    dom.<span class=\"hljs-title function_\">li</span>({}, <span class=\"hljs-string\">&apos;Food&apos;</span>),\n    dom.<span class=\"hljs-title function_\">li</span>({}, <span class=\"hljs-string\">&apos;&#x2026;actually that\\&apos;s it&apos;</span>)\n  )\n);\n\n<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(el);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"252,284"}},{"content":"<pre data-lines=\"285,286\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;`get`&#x65b9;&#x6cd5;&#x7684;&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x7684;&#x4f8b;&#x5b50;&#xff0c;&#x5b83;&#x603b;&#x662f;&#x6307;&#x5411;&#x539f;&#x59cb;&#x7684;&#x8bfb;&#x64cd;&#x4f5c;&#x6240;&#x5728;&#x7684;&#x90a3;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#x5c31;&#x662f; Proxy &#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"285,286"}},{"content":"<pre data-lines=\"287,295\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, key, receiver</span>) {\n    <span class=\"hljs-keyword\">return</span> receiver;\n  }\n});\nproxy.<span class=\"hljs-property\">getReceiver</span> === proxy <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"287,295"}},{"content":"<pre data-lines=\"296,297\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`proxy`&#x5bf9;&#x8c61;&#x7684;`getReceiver`&#x5c5e;&#x6027;&#x662f;&#x7531;`proxy`&#x5bf9;&#x8c61;&#x63d0;&#x4f9b;&#x7684;&#xff0c;&#x6240;&#x4ee5;`receiver`&#x6307;&#x5411;`proxy`&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"296,297"}},{"content":"<pre data-lines=\"298,308\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">get</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, key, receiver</span>) {\n    <span class=\"hljs-keyword\">return</span> receiver;\n  }\n});\n\n<span class=\"hljs-keyword\">const</span> d = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(proxy);\nd.<span class=\"hljs-property\">a</span> === d <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"298,308"}},{"content":"<pre data-lines=\"309,312\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`d`&#x5bf9;&#x8c61;&#x672c;&#x8eab;&#x6ca1;&#x6709;`a`&#x5c5e;&#x6027;&#xff0c;&#x6240;&#x4ee5;&#x8bfb;&#x53d6;`d.a`&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x53bb;`d`&#x7684;&#x539f;&#x578b;`proxy`&#x5bf9;&#x8c61;&#x627e;&#x3002;&#x8fd9;&#x65f6;&#xff0c;`receiver`&#x5c31;&#x6307;&#x5411;`d`&#xff0c;&#x4ee3;&#x8868;&#x539f;&#x59cb;&#x7684;&#x8bfb;&#x64cd;&#x4f5c;&#x6240;&#x5728;&#x7684;&#x90a3;&#x4e2a;&#x5bf9;&#x8c61;&#x3002;\n\n&#x5982;&#x679c;&#x4e00;&#x4e2a;&#x5c5e;&#x6027;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#xff08;configurable&#xff09;&#x4e14;&#x4e0d;&#x53ef;&#x5199;&#xff08;writable&#xff09;&#xff0c;&#x5219; Proxy &#x4e0d;&#x80fd;&#x4fee;&#x6539;&#x8be5;&#x5c5e;&#x6027;&#xff0c;&#x5426;&#x5219;&#x901a;&#x8fc7; Proxy &#x5bf9;&#x8c61;&#x8bbf;&#x95ee;&#x8be5;&#x5c5e;&#x6027;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"309,312"}},{"content":"<pre data-lines=\"313,333\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> target = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperties</span>({}, {\n  <span class=\"hljs-attr\">foo</span>: {\n    <span class=\"hljs-attr\">value</span>: <span class=\"hljs-number\">123</span>,\n    <span class=\"hljs-attr\">writable</span>: <span class=\"hljs-literal\">false</span>,\n    <span class=\"hljs-attr\">configurable</span>: <span class=\"hljs-literal\">false</span>\n  },\n});\n\n<span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, propKey</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;abc&apos;</span>;\n  }\n};\n\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\nproxy.<span class=\"hljs-property\">foo</span>\n<span class=\"hljs-comment\">// TypeError: Invariant check failed</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"313,333"}}],"payload":{"tag":"h3","lines":"153,154"}},{"content":"set()","children":[{"content":"<pre data-lines=\"336,339\"><code>`set`&#x65b9;&#x6cd5;&#x7528;&#x6765;&#x62e6;&#x622a;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#x7684;&#x8d4b;&#x503c;&#x64cd;&#x4f5c;&#xff0c;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x56db;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x4f9d;&#x6b21;&#x4e3a;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x3001;&#x5c5e;&#x6027;&#x540d;&#x3001;&#x5c5e;&#x6027;&#x503c;&#x548c; Proxy &#x5b9e;&#x4f8b;&#x672c;&#x8eab;&#xff0c;&#x5176;&#x4e2d;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x9009;&#x3002;\n\n&#x5047;&#x5b9a;`Person`&#x5bf9;&#x8c61;&#x6709;&#x4e00;&#x4e2a;`age`&#x5c5e;&#x6027;&#xff0c;&#x8be5;&#x5c5e;&#x6027;&#x5e94;&#x8be5;&#x662f;&#x4e00;&#x4e2a;&#x4e0d;&#x5927;&#x4e8e; 200 &#x7684;&#x6574;&#x6570;&#xff0c;&#x90a3;&#x4e48;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;`Proxy`&#x4fdd;&#x8bc1;`age`&#x7684;&#x5c5e;&#x6027;&#x503c;&#x7b26;&#x5408;&#x8981;&#x6c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"336,339"}},{"content":"<pre data-lines=\"340,365\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> validator = {\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">obj, prop, value</span>) {\n    <span class=\"hljs-keyword\">if</span> (prop === <span class=\"hljs-string\">&apos;age&apos;</span>) {\n      <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">Number</span>.<span class=\"hljs-title function_\">isInteger</span>(value)) {\n        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TypeError</span>(<span class=\"hljs-string\">&apos;The age is not an integer&apos;</span>);\n      }\n      <span class=\"hljs-keyword\">if</span> (value &gt; <span class=\"hljs-number\">200</span>) {\n        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RangeError</span>(<span class=\"hljs-string\">&apos;The age seems invalid&apos;</span>);\n      }\n    }\n\n    <span class=\"hljs-comment\">// &#x5bf9;&#x4e8e;&#x6ee1;&#x8db3;&#x6761;&#x4ef6;&#x7684; age &#x5c5e;&#x6027;&#x4ee5;&#x53ca;&#x5176;&#x4ed6;&#x5c5e;&#x6027;&#xff0c;&#x76f4;&#x63a5;&#x4fdd;&#x5b58;</span>\n    obj[prop] = value;\n  }\n};\n\n<span class=\"hljs-keyword\">let</span> person = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, validator);\n\nperson.<span class=\"hljs-property\">age</span> = <span class=\"hljs-number\">100</span>;\n\nperson.<span class=\"hljs-property\">age</span> <span class=\"hljs-comment\">// 100</span>\nperson.<span class=\"hljs-property\">age</span> = <span class=\"hljs-string\">&apos;young&apos;</span> <span class=\"hljs-comment\">// &#x62a5;&#x9519;</span>\nperson.<span class=\"hljs-property\">age</span> = <span class=\"hljs-number\">300</span> <span class=\"hljs-comment\">// &#x62a5;&#x9519;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"340,365"}},{"content":"<pre data-lines=\"366,369\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x7531;&#x4e8e;&#x8bbe;&#x7f6e;&#x4e86;&#x5b58;&#x503c;&#x51fd;&#x6570;`set`&#xff0c;&#x4efb;&#x4f55;&#x4e0d;&#x7b26;&#x5408;&#x8981;&#x6c42;&#x7684;`age`&#x5c5e;&#x6027;&#x8d4b;&#x503c;&#xff0c;&#x90fd;&#x4f1a;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#xff0c;&#x8fd9;&#x662f;&#x6570;&#x636e;&#x9a8c;&#x8bc1;&#x7684;&#x4e00;&#x79cd;&#x5b9e;&#x73b0;&#x65b9;&#x6cd5;&#x3002;&#x5229;&#x7528;`set`&#x65b9;&#x6cd5;&#xff0c;&#x8fd8;&#x53ef;&#x4ee5;&#x6570;&#x636e;&#x7ed1;&#x5b9a;&#xff0c;&#x5373;&#x6bcf;&#x5f53;&#x5bf9;&#x8c61;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x65f6;&#xff0c;&#x4f1a;&#x81ea;&#x52a8;&#x66f4;&#x65b0; DOM&#x3002;\n\n&#x6709;&#x65f6;&#xff0c;&#x6211;&#x4eec;&#x4f1a;&#x5728;&#x5bf9;&#x8c61;&#x4e0a;&#x9762;&#x8bbe;&#x7f6e;&#x5185;&#x90e8;&#x5c5e;&#x6027;&#xff0c;&#x5c5e;&#x6027;&#x540d;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4f7f;&#x7528;&#x4e0b;&#x5212;&#x7ebf;&#x5f00;&#x5934;&#xff0c;&#x8868;&#x793a;&#x8fd9;&#x4e9b;&#x5c5e;&#x6027;&#x4e0d;&#x5e94;&#x8be5;&#x88ab;&#x5916;&#x90e8;&#x4f7f;&#x7528;&#x3002;&#x7ed3;&#x5408;`get`&#x548c;`set`&#x65b9;&#x6cd5;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x505a;&#x5230;&#x9632;&#x6b62;&#x8fd9;&#x4e9b;&#x5185;&#x90e8;&#x5c5e;&#x6027;&#x88ab;&#x5916;&#x90e8;&#x8bfb;&#x5199;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"366,369"}},{"content":"<pre data-lines=\"370,394\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-title function_\">get</span> (target, key) {\n    <span class=\"hljs-title function_\">invariant</span>(key, <span class=\"hljs-string\">&apos;get&apos;</span>);\n    <span class=\"hljs-keyword\">return</span> target[key];\n  },\n  <span class=\"hljs-title function_\">set</span> (target, key, value) {\n    <span class=\"hljs-title function_\">invariant</span>(key, <span class=\"hljs-string\">&apos;set&apos;</span>);\n    target[key] = value;\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n};\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">invariant</span> (<span class=\"hljs-params\">key, action</span>) {\n  <span class=\"hljs-keyword\">if</span> (key[<span class=\"hljs-number\">0</span>] === <span class=\"hljs-string\">&apos;_&apos;</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">`Invalid attempt to <span class=\"hljs-subst\">&#x24;{action}</span> private &quot;<span class=\"hljs-subst\">&#x24;{key}</span>&quot; property`</span>);\n  }\n}\n<span class=\"hljs-keyword\">const</span> target = {};\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\nproxy.<span class=\"hljs-property\">_prop</span>\n<span class=\"hljs-comment\">// Error: Invalid attempt to get private &quot;_prop&quot; property</span>\nproxy.<span class=\"hljs-property\">_prop</span> = <span class=\"hljs-string\">&apos;c&apos;</span>\n<span class=\"hljs-comment\">// Error: Invalid attempt to set private &quot;_prop&quot; property</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"370,394"}},{"content":"<pre data-lines=\"395,398\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x53ea;&#x8981;&#x8bfb;&#x5199;&#x7684;&#x5c5e;&#x6027;&#x540d;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x662f;&#x4e0b;&#x5212;&#x7ebf;&#xff0c;&#x4e00;&#x5f8b;&#x629b;&#x9519;&#xff0c;&#x4ece;&#x800c;&#x8fbe;&#x5230;&#x7981;&#x6b62;&#x8bfb;&#x5199;&#x5185;&#x90e8;&#x5c5e;&#x6027;&#x7684;&#x76ee;&#x7684;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;`set`&#x65b9;&#x6cd5;&#x7b2c;&#x56db;&#x4e2a;&#x53c2;&#x6570;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"395,398"}},{"content":"<pre data-lines=\"399,409\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">obj, prop, value, receiver</span>) {\n    obj[prop] = receiver;\n  }\n};\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, handler);\nproxy.<span class=\"hljs-property\">foo</span> = <span class=\"hljs-string\">&apos;bar&apos;</span>;\nproxy.<span class=\"hljs-property\">foo</span> === proxy <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"399,409"}},{"content":"<pre data-lines=\"410,411\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`set`&#x65b9;&#x6cd5;&#x7684;&#x7b2c;&#x56db;&#x4e2a;&#x53c2;&#x6570;`receiver`&#xff0c;&#x6307;&#x7684;&#x662f;&#x539f;&#x59cb;&#x7684;&#x64cd;&#x4f5c;&#x884c;&#x4e3a;&#x6240;&#x5728;&#x7684;&#x90a3;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#x662f;`proxy`&#x5b9e;&#x4f8b;&#x672c;&#x8eab;&#xff0c;&#x8bf7;&#x770b;&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"410,411"}},{"content":"<pre data-lines=\"412,425\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">obj, prop, value, receiver</span>) {\n    obj[prop] = receiver;\n  }\n};\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, handler);\n<span class=\"hljs-keyword\">const</span> myObj = {};\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">setPrototypeOf</span>(myObj, proxy);\n\nmyObj.<span class=\"hljs-property\">foo</span> = <span class=\"hljs-string\">&apos;bar&apos;</span>;\nmyObj.<span class=\"hljs-property\">foo</span> === myObj <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"412,425"}},{"content":"<pre data-lines=\"426,429\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x8bbe;&#x7f6e;`myObj.foo`&#x5c5e;&#x6027;&#x7684;&#x503c;&#x65f6;&#xff0c;`myObj`&#x5e76;&#x6ca1;&#x6709;`foo`&#x5c5e;&#x6027;&#xff0c;&#x56e0;&#x6b64;&#x5f15;&#x64ce;&#x4f1a;&#x5230;`myObj`&#x7684;&#x539f;&#x578b;&#x94fe;&#x53bb;&#x627e;`foo`&#x5c5e;&#x6027;&#x3002;`myObj`&#x7684;&#x539f;&#x578b;&#x5bf9;&#x8c61;`proxy`&#x662f;&#x4e00;&#x4e2a; Proxy &#x5b9e;&#x4f8b;&#xff0c;&#x8bbe;&#x7f6e;&#x5b83;&#x7684;`foo`&#x5c5e;&#x6027;&#x4f1a;&#x89e6;&#x53d1;`set`&#x65b9;&#x6cd5;&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x7b2c;&#x56db;&#x4e2a;&#x53c2;&#x6570;`receiver`&#x5c31;&#x6307;&#x5411;&#x539f;&#x59cb;&#x8d4b;&#x503c;&#x884c;&#x4e3a;&#x6240;&#x5728;&#x7684;&#x5bf9;&#x8c61;`myObj`&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x81ea;&#x8eab;&#x7684;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#xff0c;&#x4e0d;&#x53ef;&#x5199;&#x4e14;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#xff0c;&#x90a3;&#x4e48;`set`&#x65b9;&#x6cd5;&#x5c06;&#x4e0d;&#x8d77;&#x4f5c;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"426,429"}},{"content":"<pre data-lines=\"430,447\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> obj = {};\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(obj, <span class=\"hljs-string\">&apos;foo&apos;</span>, {\n  <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&apos;bar&apos;</span>,\n  <span class=\"hljs-attr\">writable</span>: <span class=\"hljs-literal\">false</span>,\n});\n\n<span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">obj, prop, value, receiver</span>) {\n    obj[prop] = <span class=\"hljs-string\">&apos;baz&apos;</span>;\n  }\n};\n\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, handler);\nproxy.<span class=\"hljs-property\">foo</span> = <span class=\"hljs-string\">&apos;baz&apos;</span>;\nproxy.<span class=\"hljs-property\">foo</span> <span class=\"hljs-comment\">// &quot;bar&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"430,447"}},{"content":"<pre data-lines=\"448,451\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`obj.foo`&#x5c5e;&#x6027;&#x4e0d;&#x53ef;&#x5199;&#xff0c;Proxy &#x5bf9;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x7684;`set`&#x4ee3;&#x7406;&#x5c06;&#x4e0d;&#x4f1a;&#x751f;&#x6548;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x4e25;&#x683c;&#x6a21;&#x5f0f;&#x4e0b;&#xff0c;`set`&#x4ee3;&#x7406;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x8fd4;&#x56de;`true`&#xff0c;&#x5c31;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"448,451"}},{"content":"<pre data-lines=\"452,465\"><code class=\"language-javascript\"><span class=\"hljs-meta\">&apos;use strict&apos;</span>;\n<span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-attr\">set</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">obj, prop, value, receiver</span>) {\n    obj[prop] = receiver;\n    <span class=\"hljs-comment\">// &#x65e0;&#x8bba;&#x6709;&#x6ca1;&#x6709;&#x4e0b;&#x9762;&#x8fd9;&#x4e00;&#x884c;&#xff0c;&#x90fd;&#x4f1a;&#x62a5;&#x9519;</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  }\n};\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, handler);\nproxy.<span class=\"hljs-property\">foo</span> = <span class=\"hljs-string\">&apos;bar&apos;</span>;\n<span class=\"hljs-comment\">// TypeError: &apos;set&apos; on proxy: trap returned falsish for property &apos;foo&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"452,465"}},{"content":"<pre data-lines=\"466,467\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4e25;&#x683c;&#x6a21;&#x5f0f;&#x4e0b;&#xff0c;`set`&#x4ee3;&#x7406;&#x8fd4;&#x56de;`false`&#x6216;&#x8005;`undefined`&#xff0c;&#x90fd;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"466,467"}}],"payload":{"tag":"h3","lines":"334,335"}},{"content":"apply()","children":[{"content":"<pre data-lines=\"470,473\"><code>`apply`&#x65b9;&#x6cd5;&#x62e6;&#x622a;&#x51fd;&#x6570;&#x7684;&#x8c03;&#x7528;&#x3001;`call`&#x548c;`apply`&#x64cd;&#x4f5c;&#x3002;\n\n`apply`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5206;&#x522b;&#x662f;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x3001;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x5bf9;&#x8c61;&#xff08;`this`&#xff09;&#x548c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x53c2;&#x6570;&#x6570;&#x7ec4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"470,473"}},{"content":"<pre data-lines=\"474,481\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">apply</span> (target, ctx, args) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">apply</span>(...<span class=\"hljs-variable language_\">arguments</span>);\n  }\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"474,481"}},{"content":"<pre data-lines=\"482,483\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"482,483"}},{"content":"<pre data-lines=\"484,497\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> target = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;I am the target&apos;</span>; };\n<span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-attr\">apply</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;I am the proxy&apos;</span>;\n  }\n};\n\n<span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\n<span class=\"hljs-title function_\">p</span>()\n<span class=\"hljs-comment\">// &quot;I am the proxy&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"484,497"}},{"content":"<pre data-lines=\"498,501\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x53d8;&#x91cf;`p`&#x662f; Proxy &#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x5f53;&#x5b83;&#x4f5c;&#x4e3a;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x65f6;&#xff08;`p()`&#xff09;&#xff0c;&#x5c31;&#x4f1a;&#x88ab;`apply`&#x65b9;&#x6cd5;&#x62e6;&#x622a;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x53e6;&#x5916;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"498,501"}},{"content":"<pre data-lines=\"502,516\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> twice = {\n  <span class=\"hljs-title function_\">apply</span> (target, ctx, args) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">apply</span>(...<span class=\"hljs-variable language_\">arguments</span>) * <span class=\"hljs-number\">2</span>;\n  }\n};\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">sum</span> (<span class=\"hljs-params\">left, right</span>) {\n  <span class=\"hljs-keyword\">return</span> left + right;\n};\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(sum, twice);\n<span class=\"hljs-title function_\">proxy</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>) <span class=\"hljs-comment\">// 6</span>\nproxy.<span class=\"hljs-title function_\">call</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>) <span class=\"hljs-comment\">// 22</span>\nproxy.<span class=\"hljs-title function_\">apply</span>(<span class=\"hljs-literal\">null</span>, [<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">8</span>]) <span class=\"hljs-comment\">// 30</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"502,516"}},{"content":"<pre data-lines=\"517,520\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6bcf;&#x5f53;&#x6267;&#x884c;`proxy`&#x51fd;&#x6570;&#xff08;&#x76f4;&#x63a5;&#x8c03;&#x7528;&#x6216;`call`&#x548c;`apply`&#x8c03;&#x7528;&#xff09;&#xff0c;&#x5c31;&#x4f1a;&#x88ab;`apply`&#x65b9;&#x6cd5;&#x62e6;&#x622a;&#x3002;\n\n&#x53e6;&#x5916;&#xff0c;&#x76f4;&#x63a5;&#x8c03;&#x7528;`Reflect.apply`&#x65b9;&#x6cd5;&#xff0c;&#x4e5f;&#x4f1a;&#x88ab;&#x62e6;&#x622a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"517,520"}},{"content":"<pre data-lines=\"521,524\"><code class=\"language-javascript\"><span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">apply</span>(proxy, <span class=\"hljs-literal\">null</span>, [<span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">10</span>]) <span class=\"hljs-comment\">// 38</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"521,524"}}],"payload":{"tag":"h3","lines":"468,469"}},{"content":"has()","children":[{"content":"<pre data-lines=\"527,532\"><code>`has`&#x65b9;&#x6cd5;&#x7528;&#x6765;&#x62e6;&#x622a;`HasProperty`&#x64cd;&#x4f5c;&#xff0c;&#x5373;&#x5224;&#x65ad;&#x5bf9;&#x8c61;&#x662f;&#x5426;&#x5177;&#x6709;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#x65f6;&#xff0c;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x4f1a;&#x751f;&#x6548;&#x3002;&#x5178;&#x578b;&#x7684;&#x64cd;&#x4f5c;&#x5c31;&#x662f;`in`&#x8fd0;&#x7b97;&#x7b26;&#x3002;\n\n`has`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5206;&#x522b;&#x662f;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x3001;&#x9700;&#x67e5;&#x8be2;&#x7684;&#x5c5e;&#x6027;&#x540d;&#x3002;\n\n&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x4f7f;&#x7528;`has`&#x65b9;&#x6cd5;&#x9690;&#x85cf;&#x67d0;&#x4e9b;&#x5c5e;&#x6027;&#xff0c;&#x4e0d;&#x88ab;`in`&#x8fd0;&#x7b97;&#x7b26;&#x53d1;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"527,532"}},{"content":"<pre data-lines=\"533,546\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">has</span> (target, key) {\n    <span class=\"hljs-keyword\">if</span> (key[<span class=\"hljs-number\">0</span>] === <span class=\"hljs-string\">&apos;_&apos;</span>) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    }\n    <span class=\"hljs-keyword\">return</span> key <span class=\"hljs-keyword\">in</span> target;\n  }\n};\n<span class=\"hljs-keyword\">var</span> target = { <span class=\"hljs-attr\">_prop</span>: <span class=\"hljs-string\">&apos;foo&apos;</span>, <span class=\"hljs-attr\">prop</span>: <span class=\"hljs-string\">&apos;foo&apos;</span> };\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n<span class=\"hljs-string\">&apos;_prop&apos;</span> <span class=\"hljs-keyword\">in</span> proxy <span class=\"hljs-comment\">// false</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"533,546"}},{"content":"<pre data-lines=\"547,550\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x539f;&#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x540d;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x662f;&#x4e0b;&#x5212;&#x7ebf;&#xff0c;`proxy.has`&#x5c31;&#x4f1a;&#x8fd4;&#x56de;`false`&#xff0c;&#x4ece;&#x800c;&#x4e0d;&#x4f1a;&#x88ab;`in`&#x8fd0;&#x7b97;&#x7b26;&#x53d1;&#x73b0;&#x3002;\n\n&#x5982;&#x679c;&#x539f;&#x5bf9;&#x8c61;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#x6216;&#x8005;&#x7981;&#x6b62;&#x6269;&#x5c55;&#xff0c;&#x8fd9;&#x65f6;`has`&#x62e6;&#x622a;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"547,550"}},{"content":"<pre data-lines=\"551,563\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> obj = { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">10</span> };\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">preventExtensions</span>(obj);\n\n<span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, {\n  <span class=\"hljs-attr\">has</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, prop</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  }\n});\n\n<span class=\"hljs-string\">&apos;a&apos;</span> <span class=\"hljs-keyword\">in</span> p <span class=\"hljs-comment\">// TypeError is thrown</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"551,563"}},{"content":"<pre data-lines=\"564,569\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`obj`&#x5bf9;&#x8c61;&#x7981;&#x6b62;&#x6269;&#x5c55;&#xff0c;&#x7ed3;&#x679c;&#x4f7f;&#x7528;`has`&#x62e6;&#x622a;&#x5c31;&#x4f1a;&#x62a5;&#x9519;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x5982;&#x679c;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#xff08;&#x6216;&#x8005;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#xff09;&#xff0c;&#x5219;`has`&#x65b9;&#x6cd5;&#x5c31;&#x4e0d;&#x5f97;&#x201c;&#x9690;&#x85cf;&#x201d;&#xff08;&#x5373;&#x8fd4;&#x56de;`false`&#xff09;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x8be5;&#x5c5e;&#x6027;&#x3002;\n\n&#x503c;&#x5f97;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;`has`&#x65b9;&#x6cd5;&#x62e6;&#x622a;&#x7684;&#x662f;`HasProperty`&#x64cd;&#x4f5c;&#xff0c;&#x800c;&#x4e0d;&#x662f;`HasOwnProperty`&#x64cd;&#x4f5c;&#xff0c;&#x5373;`has`&#x65b9;&#x6cd5;&#x4e0d;&#x5224;&#x65ad;&#x4e00;&#x4e2a;&#x5c5e;&#x6027;&#x662f;&#x5bf9;&#x8c61;&#x81ea;&#x8eab;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x8fd8;&#x662f;&#x7ee7;&#x627f;&#x7684;&#x5c5e;&#x6027;&#x3002;\n\n&#x53e6;&#x5916;&#xff0c;&#x867d;&#x7136;`for...in`&#x5faa;&#x73af;&#x4e5f;&#x7528;&#x5230;&#x4e86;`in`&#x8fd0;&#x7b97;&#x7b26;&#xff0c;&#x4f46;&#x662f;`has`&#x62e6;&#x622a;&#x5bf9;`for...in`&#x5faa;&#x73af;&#x4e0d;&#x751f;&#x6548;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,569"}},{"content":"<pre data-lines=\"570,606\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> stu1 = {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;&#x5f20;&#x4e09;&apos;</span>, <span class=\"hljs-attr\">score</span>: <span class=\"hljs-number\">59</span>};\n<span class=\"hljs-keyword\">let</span> stu2 = {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;&#x674e;&#x56db;&apos;</span>, <span class=\"hljs-attr\">score</span>: <span class=\"hljs-number\">99</span>};\n\n<span class=\"hljs-keyword\">let</span> handler = {\n  <span class=\"hljs-title function_\">has</span>(<span class=\"hljs-params\">target, prop</span>) {\n    <span class=\"hljs-keyword\">if</span> (prop === <span class=\"hljs-string\">&apos;score&apos;</span> &amp;&amp; target[prop] &lt; <span class=\"hljs-number\">60</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{target.name}</span> &#x4e0d;&#x53ca;&#x683c;`</span>);\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    }\n    <span class=\"hljs-keyword\">return</span> prop <span class=\"hljs-keyword\">in</span> target;\n  }\n}\n\n<span class=\"hljs-keyword\">let</span> oproxy1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(stu1, handler);\n<span class=\"hljs-keyword\">let</span> oproxy2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(stu2, handler);\n\n<span class=\"hljs-string\">&apos;score&apos;</span> <span class=\"hljs-keyword\">in</span> oproxy1\n<span class=\"hljs-comment\">// &#x5f20;&#x4e09; &#x4e0d;&#x53ca;&#x683c;</span>\n<span class=\"hljs-comment\">// false</span>\n\n<span class=\"hljs-string\">&apos;score&apos;</span> <span class=\"hljs-keyword\">in</span> oproxy2\n<span class=\"hljs-comment\">// true</span>\n\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> a <span class=\"hljs-keyword\">in</span> oproxy1) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(oproxy1[a]);\n}\n<span class=\"hljs-comment\">// &#x5f20;&#x4e09;</span>\n<span class=\"hljs-comment\">// 59</span>\n\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> b <span class=\"hljs-keyword\">in</span> oproxy2) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(oproxy2[b]);\n}\n<span class=\"hljs-comment\">// &#x674e;&#x56db;</span>\n<span class=\"hljs-comment\">// 99</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"570,606"}},{"content":"<pre data-lines=\"607,608\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`has`&#x62e6;&#x622a;&#x53ea;&#x5bf9;`in`&#x8fd0;&#x7b97;&#x7b26;&#x751f;&#x6548;&#xff0c;&#x5bf9;`for...in`&#x5faa;&#x73af;&#x4e0d;&#x751f;&#x6548;&#xff0c;&#x5bfc;&#x81f4;&#x4e0d;&#x7b26;&#x5408;&#x8981;&#x6c42;&#x7684;&#x5c5e;&#x6027;&#x6ca1;&#x6709;&#x88ab;`for...in`&#x5faa;&#x73af;&#x6240;&#x6392;&#x9664;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"607,608"}}],"payload":{"tag":"h3","lines":"525,526"}},{"content":"construct()","children":[{"content":"<pre data-lines=\"611,612\"><code>`construct`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x62e6;&#x622a;`new`&#x547d;&#x4ee4;&#xff0c;&#x4e0b;&#x9762;&#x662f;&#x62e6;&#x622a;&#x5bf9;&#x8c61;&#x7684;&#x5199;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"611,612"}},{"content":"<pre data-lines=\"613,620\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">construct</span> (target, args, newTarget) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">target</span>(...args);\n  }\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"613,620"}},{"content":"<pre data-lines=\"621,626\"><code>`construct`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x3002;\n\n- `target`&#xff1a;&#x76ee;&#x6807;&#x5bf9;&#x8c61;\n- `args`&#xff1a;&#x6784;&#x9020;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x5bf9;&#x8c61;\n- `newTarget`&#xff1a;&#x521b;&#x9020;&#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x65f6;&#xff0c;`new`&#x547d;&#x4ee4;&#x4f5c;&#x7528;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff08;&#x4e0b;&#x9762;&#x4f8b;&#x5b50;&#x7684;`p`&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"621,626"}},{"content":"<pre data-lines=\"627,639\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {}, {\n  <span class=\"hljs-attr\">construct</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, args</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;called: &apos;</span> + args.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&apos;, &apos;</span>));\n    <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">value</span>: args[<span class=\"hljs-number\">0</span>] * <span class=\"hljs-number\">10</span> };\n  }\n});\n\n(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">p</span>(<span class=\"hljs-number\">1</span>)).<span class=\"hljs-property\">value</span>\n<span class=\"hljs-comment\">// &quot;called: 1&quot;</span>\n<span class=\"hljs-comment\">// 10</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"627,639"}},{"content":"<pre data-lines=\"640,641\"><code>`construct`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x5fc5;&#x987b;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"640,641"}},{"content":"<pre data-lines=\"642,652\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {}, {\n  <span class=\"hljs-attr\">construct</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target, argumentsList</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">1</span>;\n  }\n});\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">p</span>() <span class=\"hljs-comment\">// &#x62a5;&#x9519;</span>\n<span class=\"hljs-comment\">// Uncaught TypeError: &apos;construct&apos; on proxy: trap returned non-object (&apos;1&apos;)</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"642,652"}}],"payload":{"tag":"h3","lines":"609,610"}},{"content":"deleteProperty()","children":[{"content":"<pre data-lines=\"655,656\"><code>`deleteProperty`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x62e6;&#x622a;`delete`&#x64cd;&#x4f5c;&#xff0c;&#x5982;&#x679c;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x6216;&#x8005;&#x8fd4;&#x56de;`false`&#xff0c;&#x5f53;&#x524d;&#x5c5e;&#x6027;&#x5c31;&#x65e0;&#x6cd5;&#x88ab;`delete`&#x547d;&#x4ee4;&#x5220;&#x9664;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"655,656"}},{"content":"<pre data-lines=\"657,676\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">deleteProperty</span> (target, key) {\n    <span class=\"hljs-title function_\">invariant</span>(key, <span class=\"hljs-string\">&apos;delete&apos;</span>);\n    <span class=\"hljs-keyword\">delete</span> target[key];\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n};\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">invariant</span> (<span class=\"hljs-params\">key, action</span>) {\n  <span class=\"hljs-keyword\">if</span> (key[<span class=\"hljs-number\">0</span>] === <span class=\"hljs-string\">&apos;_&apos;</span>) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">`Invalid attempt to <span class=\"hljs-subst\">&#x24;{action}</span> private &quot;<span class=\"hljs-subst\">&#x24;{key}</span>&quot; property`</span>);\n  }\n}\n\n<span class=\"hljs-keyword\">var</span> target = { <span class=\"hljs-attr\">_prop</span>: <span class=\"hljs-string\">&apos;foo&apos;</span> };\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n<span class=\"hljs-keyword\">delete</span> proxy.<span class=\"hljs-property\">_prop</span>\n<span class=\"hljs-comment\">// Error: Invalid attempt to delete private &quot;_prop&quot; property</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"657,676"}},{"content":"<pre data-lines=\"677,680\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`deleteProperty`&#x65b9;&#x6cd5;&#x62e6;&#x622a;&#x4e86;`delete`&#x64cd;&#x4f5c;&#x7b26;&#xff0c;&#x5220;&#x9664;&#x7b2c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e3a;&#x4e0b;&#x5212;&#x7ebf;&#x7684;&#x5c5e;&#x6027;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x81ea;&#x8eab;&#x7684;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#xff08;configurable&#xff09;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x4e0d;&#x80fd;&#x88ab;`deleteProperty`&#x65b9;&#x6cd5;&#x5220;&#x9664;&#xff0c;&#x5426;&#x5219;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"677,680"}}],"payload":{"tag":"h3","lines":"653,654"}},{"content":"defineProperty()","children":[{"content":"<pre data-lines=\"683,684\"><code>`defineProperty`&#x65b9;&#x6cd5;&#x62e6;&#x622a;&#x4e86;`Object.defineProperty`&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"683,684"}},{"content":"<pre data-lines=\"685,695\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">defineProperty</span> (target, key, descriptor) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  }\n};\n<span class=\"hljs-keyword\">var</span> target = {};\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\nproxy.<span class=\"hljs-property\">foo</span> = <span class=\"hljs-string\">&apos;bar&apos;</span> <span class=\"hljs-comment\">// &#x4e0d;&#x4f1a;&#x751f;&#x6548;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"685,695"}},{"content":"<pre data-lines=\"696,699\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`defineProperty`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;`false`&#xff0c;&#x5bfc;&#x81f4;&#x6dfb;&#x52a0;&#x65b0;&#x5c5e;&#x6027;&#x603b;&#x662f;&#x65e0;&#x6548;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#xff08;non-extensible&#xff09;&#xff0c;&#x5219;`defineProperty`&#x4e0d;&#x80fd;&#x589e;&#x52a0;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0a;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x62a5;&#x9519;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#x4e0d;&#x53ef;&#x5199;&#xff08;writable&#xff09;&#x6216;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#xff08;configurable&#xff09;&#xff0c;&#x5219;`defineProperty`&#x65b9;&#x6cd5;&#x4e0d;&#x5f97;&#x6539;&#x53d8;&#x8fd9;&#x4e24;&#x4e2a;&#x8bbe;&#x7f6e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"696,699"}}],"payload":{"tag":"h3","lines":"681,682"}},{"content":"getOwnPropertyDescriptor()","children":[{"content":"<pre data-lines=\"702,703\"><code>`getOwnPropertyDescriptor`&#x65b9;&#x6cd5;&#x62e6;&#x622a;`Object.getOwnPropertyDescriptor()`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5c5e;&#x6027;&#x63cf;&#x8ff0;&#x5bf9;&#x8c61;&#x6216;&#x8005;`undefined`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"702,703"}},{"content":"<pre data-lines=\"704,722\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">getOwnPropertyDescriptor</span> (target, key) {\n    <span class=\"hljs-keyword\">if</span> (key[<span class=\"hljs-number\">0</span>] === <span class=\"hljs-string\">&apos;_&apos;</span>) {\n      <span class=\"hljs-keyword\">return</span>;\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyDescriptor</span>(target, key);\n  }\n};\n<span class=\"hljs-keyword\">var</span> target = { <span class=\"hljs-attr\">_foo</span>: <span class=\"hljs-string\">&apos;bar&apos;</span>, <span class=\"hljs-attr\">baz</span>: <span class=\"hljs-string\">&apos;tar&apos;</span> };\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyDescriptor</span>(proxy, <span class=\"hljs-string\">&apos;wat&apos;</span>)\n<span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyDescriptor</span>(proxy, <span class=\"hljs-string\">&apos;_foo&apos;</span>)\n<span class=\"hljs-comment\">// undefined</span>\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyDescriptor</span>(proxy, <span class=\"hljs-string\">&apos;baz&apos;</span>)\n<span class=\"hljs-comment\">// { value: &apos;tar&apos;, writable: true, enumerable: true, configurable: true }</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"704,722"}},{"content":"<pre data-lines=\"723,724\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`handler.getOwnPropertyDescriptor`&#x65b9;&#x6cd5;&#x5bf9;&#x4e8e;&#x7b2c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e3a;&#x4e0b;&#x5212;&#x7ebf;&#x7684;&#x5c5e;&#x6027;&#x540d;&#x4f1a;&#x8fd4;&#x56de;`undefined`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"723,724"}}],"payload":{"tag":"h3","lines":"700,701"}},{"content":"getPrototypeOf()","children":[{"content":"<pre data-lines=\"727,736\"><code>`getPrototypeOf`&#x65b9;&#x6cd5;&#x4e3b;&#x8981;&#x7528;&#x6765;&#x62e6;&#x622a;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;&#x539f;&#x578b;&#x3002;&#x5177;&#x4f53;&#x6765;&#x8bf4;&#xff0c;&#x62e6;&#x622a;&#x4e0b;&#x9762;&#x8fd9;&#x4e9b;&#x64cd;&#x4f5c;&#x3002;\n\n- `Object.prototype.__proto__`\n- `Object.prototype.isPrototypeOf()`\n- `Object.getPrototypeOf()`\n- `Reflect.getPrototypeOf()`\n- `instanceof`\n\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"727,736"}},{"content":"<pre data-lines=\"737,746\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> proto = {};\n<span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-title function_\">getPrototypeOf</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> proto;\n  }\n});\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getPrototypeOf</span>(p) === proto <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"737,746"}},{"content":"<pre data-lines=\"747,750\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`getPrototypeOf`&#x65b9;&#x6cd5;&#x62e6;&#x622a;`Object.getPrototypeOf()`&#xff0c;&#x8fd4;&#x56de;`proto`&#x5bf9;&#x8c61;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;`getPrototypeOf`&#x65b9;&#x6cd5;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x5fc5;&#x987b;&#x662f;&#x5bf9;&#x8c61;&#x6216;&#x8005;`null`&#xff0c;&#x5426;&#x5219;&#x62a5;&#x9519;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#xff08;non-extensible&#xff09;&#xff0c; `getPrototypeOf`&#x65b9;&#x6cd5;&#x5fc5;&#x987b;&#x8fd4;&#x56de;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x539f;&#x578b;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"747,750"}}],"payload":{"tag":"h3","lines":"725,726"}},{"content":"isExtensible()","children":[{"content":"<pre data-lines=\"753,754\"><code>`isExtensible`&#x65b9;&#x6cd5;&#x62e6;&#x622a;`Object.isExtensible`&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"753,754"}},{"content":"<pre data-lines=\"755,767\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">isExtensible</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;called&quot;</span>);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">isExtensible</span>(p)\n<span class=\"hljs-comment\">// &quot;called&quot;</span>\n<span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"755,767"}},{"content":"<pre data-lines=\"768,773\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8bbe;&#x7f6e;&#x4e86;`isExtensible`&#x65b9;&#x6cd5;&#xff0c;&#x5728;&#x8c03;&#x7528;`Object.isExtensible`&#x65f6;&#x4f1a;&#x8f93;&#x51fa;`called`&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x8fd4;&#x56de;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x503c;&#x4f1a;&#x88ab;&#x81ea;&#x52a8;&#x8f6c;&#x4e3a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n\n&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x6709;&#x4e00;&#x4e2a;&#x5f3a;&#x9650;&#x5236;&#xff0c;&#x5b83;&#x7684;&#x8fd4;&#x56de;&#x503c;&#x5fc5;&#x987b;&#x4e0e;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;`isExtensible`&#x5c5e;&#x6027;&#x4fdd;&#x6301;&#x4e00;&#x81f4;&#xff0c;&#x5426;&#x5219;&#x5c31;&#x4f1a;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"768,773"}},{"content":"<pre data-lines=\"774,777\"><code class=\"language-javascript\"><span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">isExtensible</span>(proxy) === <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">isExtensible</span>(target)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"774,777"}},{"content":"<pre data-lines=\"778,779\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"778,779"}},{"content":"<pre data-lines=\"780,790\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">isExtensible</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">isExtensible</span>(p)\n<span class=\"hljs-comment\">// Uncaught TypeError: &apos;isExtensible&apos; on proxy: trap result does not reflect extensibility of proxy target (which is &apos;true&apos;)</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"780,790"}}],"payload":{"tag":"h3","lines":"751,752"}},{"content":"ownKeys()","children":[{"content":"<pre data-lines=\"793,801\"><code>`ownKeys`&#x65b9;&#x6cd5;&#x7528;&#x6765;&#x62e6;&#x622a;&#x5bf9;&#x8c61;&#x81ea;&#x8eab;&#x5c5e;&#x6027;&#x7684;&#x8bfb;&#x53d6;&#x64cd;&#x4f5c;&#x3002;&#x5177;&#x4f53;&#x6765;&#x8bf4;&#xff0c;&#x62e6;&#x622a;&#x4ee5;&#x4e0b;&#x64cd;&#x4f5c;&#x3002;\n\n- `Object.getOwnPropertyNames()`\n- `Object.getOwnPropertySymbols()`\n- `Object.keys()`\n- `for...in`&#x5faa;&#x73af;\n\n&#x4e0b;&#x9762;&#x662f;&#x62e6;&#x622a;`Object.keys()`&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"793,801"}},{"content":"<pre data-lines=\"802,820\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> target = {\n  <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-attr\">b</span>: <span class=\"hljs-number\">2</span>,\n  <span class=\"hljs-attr\">c</span>: <span class=\"hljs-number\">3</span>\n};\n\n<span class=\"hljs-keyword\">let</span> handler = {\n  <span class=\"hljs-title function_\">ownKeys</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&apos;a&apos;</span>];\n  }\n};\n\n<span class=\"hljs-keyword\">let</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(proxy)\n<span class=\"hljs-comment\">// [ &apos;a&apos; ]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"802,820"}},{"content":"<pre data-lines=\"821,824\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x62e6;&#x622a;&#x4e86;&#x5bf9;&#x4e8e;`target`&#x5bf9;&#x8c61;&#x7684;`Object.keys()`&#x64cd;&#x4f5c;&#xff0c;&#x53ea;&#x8fd4;&#x56de;`a`&#x3001;`b`&#x3001;`c`&#x4e09;&#x4e2a;&#x5c5e;&#x6027;&#x4e4b;&#x4e2d;&#x7684;`a`&#x5c5e;&#x6027;&#x3002;\n\n&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x662f;&#x62e6;&#x622a;&#x7b2c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e3a;&#x4e0b;&#x5212;&#x7ebf;&#x7684;&#x5c5e;&#x6027;&#x540d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"821,824"}},{"content":"<pre data-lines=\"825,844\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> target = {\n  <span class=\"hljs-attr\">_bar</span>: <span class=\"hljs-string\">&apos;foo&apos;</span>,\n  <span class=\"hljs-attr\">_prop</span>: <span class=\"hljs-string\">&apos;bar&apos;</span>,\n  <span class=\"hljs-attr\">prop</span>: <span class=\"hljs-string\">&apos;baz&apos;</span>\n};\n\n<span class=\"hljs-keyword\">let</span> handler = {\n  <span class=\"hljs-title function_\">ownKeys</span> (target) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">ownKeys</span>(target).<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">key</span> =&gt;</span> key[<span class=\"hljs-number\">0</span>] !== <span class=\"hljs-string\">&apos;_&apos;</span>);\n  }\n};\n\n<span class=\"hljs-keyword\">let</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">of</span> <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(proxy)) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(target[key]);\n}\n<span class=\"hljs-comment\">// &quot;baz&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"825,844"}},{"content":"<pre data-lines=\"845,850\"><code>&#x6ce8;&#x610f;&#xff0c;&#x4f7f;&#x7528;`Object.keys`&#x65b9;&#x6cd5;&#x65f6;&#xff0c;&#x6709;&#x4e09;&#x7c7b;&#x5c5e;&#x6027;&#x4f1a;&#x88ab;`ownKeys`&#x65b9;&#x6cd5;&#x81ea;&#x52a8;&#x8fc7;&#x6ee4;&#xff0c;&#x4e0d;&#x4f1a;&#x8fd4;&#x56de;&#x3002;\n\n- &#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0a;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x5c5e;&#x6027;\n- &#x5c5e;&#x6027;&#x540d;&#x4e3a; Symbol &#x503c;\n- &#x4e0d;&#x53ef;&#x904d;&#x5386;&#xff08;`enumerable`&#xff09;&#x7684;&#x5c5e;&#x6027;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"845,850"}},{"content":"<pre data-lines=\"851,877\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> target = {\n  <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-attr\">b</span>: <span class=\"hljs-number\">2</span>,\n  <span class=\"hljs-attr\">c</span>: <span class=\"hljs-number\">3</span>,\n  [<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">for</span>(<span class=\"hljs-string\">&apos;secret&apos;</span>)]: <span class=\"hljs-string\">&apos;4&apos;</span>,\n};\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(target, <span class=\"hljs-string\">&apos;key&apos;</span>, {\n  <span class=\"hljs-attr\">enumerable</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">configurable</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">writable</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&apos;static&apos;</span>\n});\n\n<span class=\"hljs-keyword\">let</span> handler = {\n  <span class=\"hljs-title function_\">ownKeys</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;d&apos;</span>, <span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-title function_\">for</span>(<span class=\"hljs-string\">&apos;secret&apos;</span>), <span class=\"hljs-string\">&apos;key&apos;</span>];\n  }\n};\n\n<span class=\"hljs-keyword\">let</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(proxy)\n<span class=\"hljs-comment\">// [&apos;a&apos;]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"851,877"}},{"content":"<pre data-lines=\"878,881\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`ownKeys`&#x65b9;&#x6cd5;&#x4e4b;&#x4e2d;&#xff0c;&#x663e;&#x5f0f;&#x8fd4;&#x56de;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x5c5e;&#x6027;&#xff08;`d`&#xff09;&#x3001;Symbol &#x503c;&#xff08;`Symbol.for(&apos;secret&apos;)`&#xff09;&#x3001;&#x4e0d;&#x53ef;&#x904d;&#x5386;&#x7684;&#x5c5e;&#x6027;&#xff08;`key`&#xff09;&#xff0c;&#x7ed3;&#x679c;&#x90fd;&#x88ab;&#x81ea;&#x52a8;&#x8fc7;&#x6ee4;&#x6389;&#x3002;\n\n`ownKeys`&#x65b9;&#x6cd5;&#x8fd8;&#x53ef;&#x4ee5;&#x62e6;&#x622a;`Object.getOwnPropertyNames()`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"878,881"}},{"content":"<pre data-lines=\"882,892\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">ownKeys</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;b&apos;</span>, <span class=\"hljs-string\">&apos;c&apos;</span>];\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyNames</span>(p)\n<span class=\"hljs-comment\">// [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos; ]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"882,892"}},{"content":"<pre data-lines=\"893,894\"><code>`for...in`&#x5faa;&#x73af;&#x4e5f;&#x53d7;&#x5230;`ownKeys`&#x65b9;&#x6cd5;&#x7684;&#x62e6;&#x622a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"893,894"}},{"content":"<pre data-lines=\"895,907\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> obj = { <span class=\"hljs-attr\">hello</span>: <span class=\"hljs-string\">&apos;world&apos;</span> };\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, {\n  <span class=\"hljs-attr\">ownKeys</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;b&apos;</span>];\n  }\n});\n\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> key <span class=\"hljs-keyword\">in</span> proxy) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(key); <span class=\"hljs-comment\">// &#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x8f93;&#x51fa;</span>\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"895,907"}},{"content":"<pre data-lines=\"908,911\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`ownkeys`&#x6307;&#x5b9a;&#x53ea;&#x8fd4;&#x56de;`a`&#x548c;`b`&#x5c5e;&#x6027;&#xff0c;&#x7531;&#x4e8e;`obj`&#x6ca1;&#x6709;&#x8fd9;&#x4e24;&#x4e2a;&#x5c5e;&#x6027;&#xff0c;&#x56e0;&#x6b64;`for...in`&#x5faa;&#x73af;&#x4e0d;&#x4f1a;&#x6709;&#x4efb;&#x4f55;&#x8f93;&#x51fa;&#x3002;\n\n`ownKeys`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x6570;&#x7ec4;&#x6210;&#x5458;&#xff0c;&#x53ea;&#x80fd;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216; Symbol &#x503c;&#x3002;&#x5982;&#x679c;&#x6709;&#x5176;&#x4ed6;&#x7c7b;&#x578b;&#x7684;&#x503c;&#xff0c;&#x6216;&#x8005;&#x8fd4;&#x56de;&#x7684;&#x6839;&#x672c;&#x4e0d;&#x662f;&#x6570;&#x7ec4;&#xff0c;&#x5c31;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"908,911"}},{"content":"<pre data-lines=\"912,924\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> obj = {};\n\n<span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, {\n  <span class=\"hljs-attr\">ownKeys</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-number\">123</span>, <span class=\"hljs-literal\">true</span>, <span class=\"hljs-literal\">undefined</span>, <span class=\"hljs-literal\">null</span>, {}, []];\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyNames</span>(p)\n<span class=\"hljs-comment\">// Uncaught TypeError: 123 is not a valid property name</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"912,924"}},{"content":"<pre data-lines=\"925,928\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`ownKeys`&#x65b9;&#x6cd5;&#x867d;&#x7136;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x4f46;&#x662f;&#x6bcf;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x6210;&#x5458;&#x90fd;&#x4e0d;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216; Symbol &#x503c;&#xff0c;&#x56e0;&#x6b64;&#x5c31;&#x62a5;&#x9519;&#x4e86;&#x3002;\n\n&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x81ea;&#x8eab;&#x5305;&#x542b;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x5219;&#x8be5;&#x5c5e;&#x6027;&#x5fc5;&#x987b;&#x88ab;`ownKeys`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#xff0c;&#x5426;&#x5219;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"925,928"}},{"content":"<pre data-lines=\"929,946\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> obj = {};\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">defineProperty</span>(obj, <span class=\"hljs-string\">&apos;a&apos;</span>, {\n  <span class=\"hljs-attr\">configurable</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">enumerable</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">value</span>: <span class=\"hljs-number\">10</span> }\n);\n\n<span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, {\n  <span class=\"hljs-attr\">ownKeys</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&apos;b&apos;</span>];\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyNames</span>(p)\n<span class=\"hljs-comment\">// Uncaught TypeError: &apos;ownKeys&apos; on proxy: trap result did not include &apos;a&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"929,946"}},{"content":"<pre data-lines=\"947,950\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`obj`&#x5bf9;&#x8c61;&#x7684;`a`&#x5c5e;&#x6027;&#x662f;&#x4e0d;&#x53ef;&#x914d;&#x7f6e;&#x7684;&#xff0c;&#x8fd9;&#x65f6;`ownKeys`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x6570;&#x7ec4;&#x4e4b;&#x4e2d;&#xff0c;&#x5fc5;&#x987b;&#x5305;&#x542b;`a`&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n\n&#x53e6;&#x5916;&#xff0c;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x662f;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#x7684;&#xff08;non-extensible&#xff09;&#xff0c;&#x8fd9;&#x65f6;`ownKeys`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x6570;&#x7ec4;&#x4e4b;&#x4e2d;&#xff0c;&#x5fc5;&#x987b;&#x5305;&#x542b;&#x539f;&#x5bf9;&#x8c61;&#x7684;&#x6240;&#x6709;&#x5c5e;&#x6027;&#xff0c;&#x4e14;&#x4e0d;&#x80fd;&#x5305;&#x542b;&#x591a;&#x4f59;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x5426;&#x5219;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"947,950"}},{"content":"<pre data-lines=\"951,967\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> obj = {\n  <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">1</span>\n};\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">preventExtensions</span>(obj);\n\n<span class=\"hljs-keyword\">var</span> p = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(obj, {\n  <span class=\"hljs-attr\">ownKeys</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;b&apos;</span>];\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">getOwnPropertyNames</span>(p)\n<span class=\"hljs-comment\">// Uncaught TypeError: &apos;ownKeys&apos; on proxy: trap returned extra keys but proxy target is non-extensible</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"951,967"}},{"content":"<pre data-lines=\"968,969\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`obj`&#x5bf9;&#x8c61;&#x662f;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#x7684;&#xff0c;&#x8fd9;&#x65f6;`ownKeys`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x6570;&#x7ec4;&#x4e4b;&#x4e2d;&#xff0c;&#x5305;&#x542b;&#x4e86;`obj`&#x5bf9;&#x8c61;&#x7684;&#x591a;&#x4f59;&#x5c5e;&#x6027;`b`&#xff0c;&#x6240;&#x4ee5;&#x5bfc;&#x81f4;&#x4e86;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"968,969"}}],"payload":{"tag":"h3","lines":"791,792"}},{"content":"preventExtensions()","children":[{"content":"<pre data-lines=\"972,975\"><code>`preventExtensions`&#x65b9;&#x6cd5;&#x62e6;&#x622a;`Object.preventExtensions()`&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x5fc5;&#x987b;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x88ab;&#x81ea;&#x52a8;&#x8f6c;&#x4e3a;&#x5e03;&#x5c14;&#x503c;&#x3002;\n\n&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x6709;&#x4e00;&#x4e2a;&#x9650;&#x5236;&#xff0c;&#x53ea;&#x6709;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#x65f6;&#xff08;&#x5373;`Object.isExtensible(proxy)`&#x4e3a;`false`&#xff09;&#xff0c;`proxy.preventExtensions`&#x624d;&#x80fd;&#x8fd4;&#x56de;`true`&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"972,975"}},{"content":"<pre data-lines=\"976,986\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">preventExtensions</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">preventExtensions</span>(proxy)\n<span class=\"hljs-comment\">// Uncaught TypeError: &apos;preventExtensions&apos; on proxy: trap returned truish but the proxy target is extensible</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"976,986"}},{"content":"<pre data-lines=\"987,990\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`proxy.preventExtensions`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;`true`&#xff0c;&#x4f46;&#x8fd9;&#x65f6;`Object.isExtensible(proxy)`&#x4f1a;&#x8fd4;&#x56de;`true`&#xff0c;&#x56e0;&#x6b64;&#x62a5;&#x9519;&#x3002;\n\n&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x51fa;&#x73b0;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#xff0c;&#x901a;&#x5e38;&#x8981;&#x5728;`proxy.preventExtensions`&#x65b9;&#x6cd5;&#x91cc;&#x9762;&#xff0c;&#x8c03;&#x7528;&#x4e00;&#x6b21;`Object.preventExtensions`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"987,990"}},{"content":"<pre data-lines=\"991,1004\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n  <span class=\"hljs-attr\">preventExtensions</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">target</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;called&apos;</span>);\n    <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">preventExtensions</span>(target);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  }\n});\n\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">preventExtensions</span>(proxy)\n<span class=\"hljs-comment\">// &quot;called&quot;</span>\n<span class=\"hljs-comment\">// Proxy {}</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"991,1004"}}],"payload":{"tag":"h3","lines":"970,971"}},{"content":"setPrototypeOf()","children":[{"content":"<pre data-lines=\"1007,1010\"><code>`setPrototypeOf`&#x65b9;&#x6cd5;&#x4e3b;&#x8981;&#x7528;&#x6765;&#x62e6;&#x622a;`Object.setPrototypeOf`&#x65b9;&#x6cd5;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1007,1010"}},{"content":"<pre data-lines=\"1011,1023\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> handler = {\n  <span class=\"hljs-title function_\">setPrototypeOf</span> (target, proto) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&apos;Changing the prototype is forbidden&apos;</span>);\n  }\n};\n<span class=\"hljs-keyword\">var</span> proto = {};\n<span class=\"hljs-keyword\">var</span> target = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {};\n<span class=\"hljs-keyword\">var</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">setPrototypeOf</span>(proxy, proto);\n<span class=\"hljs-comment\">// Error: Changing the prototype is forbidden</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1011,1023"}},{"content":"<pre data-lines=\"1024,1027\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x53ea;&#x8981;&#x4fee;&#x6539;`target`&#x7684;&#x539f;&#x578b;&#x5bf9;&#x8c61;&#xff0c;&#x5c31;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x8fd4;&#x56de;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x88ab;&#x81ea;&#x52a8;&#x8f6c;&#x4e3a;&#x5e03;&#x5c14;&#x503c;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x5982;&#x679c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x53ef;&#x6269;&#x5c55;&#xff08;non-extensible&#xff09;&#xff0c;`setPrototypeOf`&#x65b9;&#x6cd5;&#x4e0d;&#x5f97;&#x6539;&#x53d8;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x539f;&#x578b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1024,1027"}}],"payload":{"tag":"h3","lines":"1005,1006"}}],"payload":{"tag":"h2","lines":"149,150"}},{"content":"Proxy.revocable()","children":[{"content":"<pre data-lines=\"1030,1031\"><code>`Proxy.revocable`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x53ef;&#x53d6;&#x6d88;&#x7684; Proxy &#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1030,1031"}},{"content":"<pre data-lines=\"1032,1044\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> target = {};\n<span class=\"hljs-keyword\">let</span> handler = {};\n\n<span class=\"hljs-keyword\">let</span> {proxy, revoke} = <span class=\"hljs-title class_\">Proxy</span>.<span class=\"hljs-title function_\">revocable</span>(target, handler);\n\nproxy.<span class=\"hljs-property\">foo</span> = <span class=\"hljs-number\">123</span>;\nproxy.<span class=\"hljs-property\">foo</span> <span class=\"hljs-comment\">// 123</span>\n\n<span class=\"hljs-title function_\">revoke</span>();\nproxy.<span class=\"hljs-property\">foo</span> <span class=\"hljs-comment\">// TypeError: Revoked</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1032,1044"}},{"content":"<pre data-lines=\"1045,1048\"><code>`Proxy.revocable`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x7684;`proxy`&#x5c5e;&#x6027;&#x662f;`Proxy`&#x5b9e;&#x4f8b;&#xff0c;`revoke`&#x5c5e;&#x6027;&#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x53ef;&#x4ee5;&#x53d6;&#x6d88;`Proxy`&#x5b9e;&#x4f8b;&#x3002;&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5f53;&#x6267;&#x884c;`revoke`&#x51fd;&#x6570;&#x4e4b;&#x540e;&#xff0c;&#x518d;&#x8bbf;&#x95ee;`Proxy`&#x5b9e;&#x4f8b;&#xff0c;&#x5c31;&#x4f1a;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x3002;\n\n`Proxy.revocable`&#x7684;&#x4e00;&#x4e2a;&#x4f7f;&#x7528;&#x573a;&#x666f;&#x662f;&#xff0c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x4e0d;&#x5141;&#x8bb8;&#x76f4;&#x63a5;&#x8bbf;&#x95ee;&#xff0c;&#x5fc5;&#x987b;&#x901a;&#x8fc7;&#x4ee3;&#x7406;&#x8bbf;&#x95ee;&#xff0c;&#x4e00;&#x65e6;&#x8bbf;&#x95ee;&#x7ed3;&#x675f;&#xff0c;&#x5c31;&#x6536;&#x56de;&#x4ee3;&#x7406;&#x6743;&#xff0c;&#x4e0d;&#x5141;&#x8bb8;&#x518d;&#x6b21;&#x8bbf;&#x95ee;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1045,1048"}}],"payload":{"tag":"h2","lines":"1028,1029"}},{"content":"this &#x95ee;&#x9898;","children":[{"content":"<pre data-lines=\"1051,1052\"><code>&#x867d;&#x7136; Proxy &#x53ef;&#x4ee5;&#x4ee3;&#x7406;&#x9488;&#x5bf9;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x4f46;&#x5b83;&#x4e0d;&#x662f;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x900f;&#x660e;&#x4ee3;&#x7406;&#xff0c;&#x5373;&#x4e0d;&#x505a;&#x4efb;&#x4f55;&#x62e6;&#x622a;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x4e5f;&#x65e0;&#x6cd5;&#x4fdd;&#x8bc1;&#x4e0e;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x884c;&#x4e3a;&#x4e00;&#x81f4;&#x3002;&#x4e3b;&#x8981;&#x539f;&#x56e0;&#x5c31;&#x662f;&#x5728; Proxy &#x4ee3;&#x7406;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x5185;&#x90e8;&#x7684;`this`&#x5173;&#x952e;&#x5b57;&#x4f1a;&#x6307;&#x5411; Proxy &#x4ee3;&#x7406;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1051,1052"}},{"content":"<pre data-lines=\"1053,1066\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> target = {\n  <span class=\"hljs-attr\">m</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-variable language_\">this</span> === proxy);\n  }\n};\n<span class=\"hljs-keyword\">const</span> handler = {};\n\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\ntarget.<span class=\"hljs-title function_\">m</span>() <span class=\"hljs-comment\">// false</span>\nproxy.<span class=\"hljs-title function_\">m</span>()  <span class=\"hljs-comment\">// true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1053,1066"}},{"content":"<pre data-lines=\"1067,1070\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4e00;&#x65e6;`proxy`&#x4ee3;&#x7406;`target.m`&#xff0c;&#x540e;&#x8005;&#x5185;&#x90e8;&#x7684;`this`&#x5c31;&#x662f;&#x6307;&#x5411;`proxy`&#xff0c;&#x800c;&#x4e0d;&#x662f;`target`&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#xff0c;&#x7531;&#x4e8e;`this`&#x6307;&#x5411;&#x7684;&#x53d8;&#x5316;&#xff0c;&#x5bfc;&#x81f4; Proxy &#x65e0;&#x6cd5;&#x4ee3;&#x7406;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1067,1070"}},{"content":"<pre data-lines=\"1071,1089\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> _name = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">WeakMap</span>();\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Person</span> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">name</span>) {\n    _name.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-variable language_\">this</span>, name);\n  }\n  <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">name</span>() {\n    <span class=\"hljs-keyword\">return</span> _name.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-variable language_\">this</span>);\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> jane = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Person</span>(<span class=\"hljs-string\">&apos;Jane&apos;</span>);\njane.<span class=\"hljs-property\">name</span> <span class=\"hljs-comment\">// &apos;Jane&apos;</span>\n\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(jane, {});\nproxy.<span class=\"hljs-property\">name</span> <span class=\"hljs-comment\">// undefined</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1071,1089"}},{"content":"<pre data-lines=\"1090,1093\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x76ee;&#x6807;&#x5bf9;&#x8c61;`jane`&#x7684;`name`&#x5c5e;&#x6027;&#xff0c;&#x5b9e;&#x9645;&#x4fdd;&#x5b58;&#x5728;&#x5916;&#x90e8;`WeakMap`&#x5bf9;&#x8c61;`_name`&#x4e0a;&#x9762;&#xff0c;&#x901a;&#x8fc7;`this`&#x952e;&#x533a;&#x5206;&#x3002;&#x7531;&#x4e8e;&#x901a;&#x8fc7;`proxy.name`&#x8bbf;&#x95ee;&#x65f6;&#xff0c;`this`&#x6307;&#x5411;`proxy`&#xff0c;&#x5bfc;&#x81f4;&#x65e0;&#x6cd5;&#x53d6;&#x5230;&#x503c;&#xff0c;&#x6240;&#x4ee5;&#x8fd4;&#x56de;`undefined`&#x3002;\n\n&#x6b64;&#x5916;&#xff0c;&#x6709;&#x4e9b;&#x539f;&#x751f;&#x5bf9;&#x8c61;&#x7684;&#x5185;&#x90e8;&#x5c5e;&#x6027;&#xff0c;&#x53ea;&#x6709;&#x901a;&#x8fc7;&#x6b63;&#x786e;&#x7684;`this`&#x624d;&#x80fd;&#x62ff;&#x5230;&#xff0c;&#x6240;&#x4ee5; Proxy &#x4e5f;&#x65e0;&#x6cd5;&#x4ee3;&#x7406;&#x8fd9;&#x4e9b;&#x539f;&#x751f;&#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1090,1093"}},{"content":"<pre data-lines=\"1094,1102\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> target = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>();\n<span class=\"hljs-keyword\">const</span> handler = {};\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\nproxy.<span class=\"hljs-title function_\">getDate</span>();\n<span class=\"hljs-comment\">// TypeError: this is not a Date object.</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1094,1102"}},{"content":"<pre data-lines=\"1103,1104\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`getDate`&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x5728;`Date`&#x5bf9;&#x8c61;&#x5b9e;&#x4f8b;&#x4e0a;&#x9762;&#x62ff;&#x5230;&#xff0c;&#x5982;&#x679c;`this`&#x4e0d;&#x662f;`Date`&#x5bf9;&#x8c61;&#x5b9e;&#x4f8b;&#x5c31;&#x4f1a;&#x62a5;&#x9519;&#x3002;&#x8fd9;&#x65f6;&#xff0c;`this`&#x7ed1;&#x5b9a;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1103,1104"}},{"content":"<pre data-lines=\"1105,1119\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> target = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(<span class=\"hljs-string\">&apos;2015-01-01&apos;</span>);\n<span class=\"hljs-keyword\">const</span> handler = {\n  <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, prop</span>) {\n    <span class=\"hljs-keyword\">if</span> (prop === <span class=\"hljs-string\">&apos;getDate&apos;</span>) {\n      <span class=\"hljs-keyword\">return</span> target.<span class=\"hljs-property\">getDate</span>.<span class=\"hljs-title function_\">bind</span>(target);\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Reflect</span>.<span class=\"hljs-title function_\">get</span>(target, prop);\n  }\n};\n<span class=\"hljs-keyword\">const</span> proxy = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>(target, handler);\n\nproxy.<span class=\"hljs-title function_\">getDate</span>() <span class=\"hljs-comment\">// 1</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1105,1119"}}],"payload":{"tag":"h2","lines":"1049,1050"}},{"content":"&#x5b9e;&#x4f8b;&#xff1a;Web &#x670d;&#x52a1;&#x7684;&#x5ba2;&#x6237;&#x7aef;","children":[{"content":"<pre data-lines=\"1122,1123\"><code>Proxy &#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x62e6;&#x622a;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x4efb;&#x610f;&#x5c5e;&#x6027;&#xff0c;&#x8fd9;&#x4f7f;&#x5f97;&#x5b83;&#x5f88;&#x5408;&#x9002;&#x7528;&#x6765;&#x5199; Web &#x670d;&#x52a1;&#x7684;&#x5ba2;&#x6237;&#x7aef;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1122,1123"}},{"content":"<pre data-lines=\"1124,1132\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> service = <span class=\"hljs-title function_\">createWebService</span>(<span class=\"hljs-string\">&apos;http://example.com/data&apos;</span>);\n\nservice.<span class=\"hljs-title function_\">employees</span>().<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">json</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> employees = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(json);\n  <span class=\"hljs-comment\">// &#xb7;&#xb7;&#xb7;</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1124,1132"}},{"content":"<pre data-lines=\"1133,1134\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x65b0;&#x5efa;&#x4e86;&#x4e00;&#x4e2a; Web &#x670d;&#x52a1;&#x7684;&#x63a5;&#x53e3;&#xff0c;&#x8fd9;&#x4e2a;&#x63a5;&#x53e3;&#x8fd4;&#x56de;&#x5404;&#x79cd;&#x6570;&#x636e;&#x3002;Proxy &#x53ef;&#x4ee5;&#x62e6;&#x622a;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x7684;&#x4efb;&#x610f;&#x5c5e;&#x6027;&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x7528;&#x4e3a;&#x6bcf;&#x4e00;&#x79cd;&#x6570;&#x636e;&#x5199;&#x4e00;&#x4e2a;&#x9002;&#x914d;&#x65b9;&#x6cd5;&#xff0c;&#x53ea;&#x8981;&#x5199;&#x4e00;&#x4e2a; Proxy &#x62e6;&#x622a;&#x5c31;&#x53ef;&#x4ee5;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1133,1134"}},{"content":"<pre data-lines=\"1135,1144\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createWebService</span>(<span class=\"hljs-params\">baseUrl</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Proxy</span>({}, {\n    <span class=\"hljs-title function_\">get</span>(<span class=\"hljs-params\">target, propKey, receiver</span>) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">httpGet</span>(baseUrl + <span class=\"hljs-string\">&apos;/&apos;</span> + propKey);\n    }\n  });\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1135,1144"}},{"content":"<pre data-lines=\"1145,1146\"><code>&#x540c;&#x7406;&#xff0c;Proxy &#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x5b9e;&#x73b0;&#x6570;&#x636e;&#x5e93;&#x7684; ORM &#x5c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1145,1146"}}],"payload":{"tag":"h2","lines":"1120,1121"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
