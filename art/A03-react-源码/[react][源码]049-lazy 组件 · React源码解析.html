<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"lazy","children":[{"content":"<pre data-lines=\"2,3\"><code>&#x901a;&#x8fc7;`React.lazy`&#x6211;&#x4eec;&#x975e;&#x5e38;&#x65b9;&#x4fbf;&#x5730;&#x5b9e;&#x73b0;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x6a21;&#x5757;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x901a;&#x8fc7;&#x8fd9;&#x4e2a; API &#x521b;&#x5efa;&#x7684;&#x5bf9;&#x8c61;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2,3"}},{"content":"<pre data-lines=\"4,14\"><code data-lines=\"4,14\">{\n  &#x24;&#x24;<span class=\"hljs-params\">typeof:</span> REACT_LAZY_TYPE,\n  <span class=\"hljs-params\">_ctor:</span> ctor,\n  \n  <span class=\"hljs-params\">_status:</span> <span class=\"hljs-operator\">-</span><span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-params\">_result:</span> <span class=\"hljs-literal\">null</span>,\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,14"}},{"content":"<pre data-lines=\"15,18\"><code>&#x5176;&#x4e2d;`_status`&#x548c;`_result`&#x4e24;&#x4e2a;&#x503c;&#x662f;&#x975e;&#x5e38;&#x91cd;&#x8981;&#x7684;&#xff0c;&#x7528;&#x6765;&#x6807;&#x8bb0;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x7684;&#x6a21;&#x5757;&#x7684;&#x5185;&#x5bb9;&#xff0c;&#x800c;`_ctor`&#x5219;&#x8bb0;&#x8f7d;&#x4e86;&#x6211;&#x4eec;&#x4f20;&#x5165;&#x7684;&#x751f;&#x4ea7;`thenable`&#x5bf9;&#x8c61;&#x7684;&#x65b9;&#x6cd5;&#x3002;\n\n&#x5728;&#x66f4;&#x65b0;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x9047;&#x5230;`lazy`&#x7ec4;&#x4ef6;&#x4f1a;&#x600e;&#x4e48;&#x6837;&#x5462;&#xff1f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"15,18"}},{"content":"<pre data-lines=\"19,51\"><code data-lines=\"19,51\"><span class=\"hljs-function\">function <span class=\"hljs-title\">mountLazyComponent</span>(<span class=\"hljs-params\">\n  _current,\n  workInProgress,\n  elementType,\n  updateExpirationTime,\n  renderExpirationTime,\n</span>)</span> {\n  <span class=\"hljs-keyword\">if</span> (_current !== <span class=\"hljs-literal\">null</span>) {\n    _current.alternate = <span class=\"hljs-literal\">null</span>\n    workInProgress.alternate = <span class=\"hljs-literal\">null</span>\n    workInProgress.effectTag |= Placement\n  }\n\n  <span class=\"hljs-keyword\">const</span> props = workInProgress.<span class=\"hljs-function\">pendingProps\n  <span class=\"hljs-title\">cancelWorkTimer</span>(<span class=\"hljs-params\">workInProgress</span>)\n  <span class=\"hljs-keyword\">let</span> Component</span> = readLazyComponentType(elementType)\n  workInProgress.type = Component\n  <span class=\"hljs-keyword\">const</span> resolvedTag = (workInProgress.tag = resolveLazyComponentTag(Component))\n  startWorkTimer(workInProgress)\n  <span class=\"hljs-keyword\">const</span> resolvedProps = resolveDefaultProps(Component, props)\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">let</span> child\n  <span class=\"hljs-title\">switch</span> (<span class=\"hljs-params\">resolvedTag</span>)</span> {\n    \n    <span class=\"hljs-literal\">default</span>: {\n      \n    }\n  }\n  <span class=\"hljs-keyword\">return</span> child\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"19,51"}},{"content":"<pre data-lines=\"52,53\"><code>&#x9996;&#x5148;&#x6211;&#x4eec;&#x770b;&#x5230;&#x5982;&#x679c;`_current`&#x5b58;&#x5728;&#x503c;&#x4f1a;&#x5f3a;&#x884c;&#x5220;&#x9664;`current`&#x7684;&#x5f15;&#x7528;&#xff0c;&#x4e3a;&#x4ec0;&#x4e48;&#x8981;&#x8fd9;&#x4e48;&#x505a;&#x5462;&#xff1f;&#x56e0;&#x4e3a;`lazy`&#x7ec4;&#x4ef6;&#x53ea;&#x6709;&#x5728;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#x7684;&#x65f6;&#x5019;&#x624d;&#x4f1a;&#x8c03;&#x7528;&#x8be5;&#x65b9;&#x6cd5;&#xff0c;&#x7b49;&#x5230;&#x7ec4;&#x4ef6;&#x5df2;&#x7ecf;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x4e86;&#xff0c;&#x5c31;&#x4f1a;&#x8d70;&#x76f4;&#x63a5;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;&#x6d41;&#x7a0b;&#xff0c;&#x5177;&#x4f53;&#x8bc1;&#x636e;&#x5c31;&#x662f;&#x4e0b;&#x9762;&#x8fd9;&#x53e5;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"52,53"}},{"content":"<pre data-lines=\"54,58\"><code data-lines=\"54,58\">const resolvedTag = (workInProgress.<span class=\"hljs-keyword\">tag</span> <span class=\"hljs-title\">= resolveLazyComponentTag</span>(Component))\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"54,58"}},{"content":"<pre data-lines=\"59,62\"><code>`resolveLazyComponentTag`&#x662f;`ReactFiber`&#x63d0;&#x4f9b;&#x7684;&#x6839;&#x636e;&#x7279;&#x6027;&#x5224;&#x65ad;&#x7ec4;&#x4ef6;&#x7c7b;&#x578b;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x53ef;&#x4ee5;&#x5224;&#x65ad;&#x662f;`ClassComponent`&#x8fd8;&#x662f;`FunctionalComponent`&#x8fd8;&#x662f;&#x4e00;&#x4e9b;&#x5185;&#x7f6e;&#x7c7b;&#x578b;&#x3002;&#x5728;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x4e4b;&#x540e;&#xff0c;&#x5c31;&#x76f4;&#x63a5;&#x8bbe;&#x7f6e;`tag`&#x4e3a;&#x65b0;&#x7684;&#x7c7b;&#x578b;&#x4e86;&#xff0c;&#x5e76;&#x4e14;&#x8bbe;&#x7f6e;&#x4e86;`type`&#x4e3a;&#x8fd4;&#x56de;&#x7684;`Component`&#xff0c;&#x5c31;&#x53d8;&#x6210;&#x4e86;&#x5f02;&#x6b65;&#x52a0;&#x8f7d;&#x8fc7;&#x6765;&#x7684;&#x7ec4;&#x4ef6;&#x4e86;&#x3002;\n\n&#x90a3;&#x4e48;&#x5982;&#x679c;&#x8fd8;&#x6ca1;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x5462;&#xff1f;&#x6211;&#x4eec;&#x6765;&#x770b;`readLazyComponentType`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,62"}},{"content":"<pre data-lines=\"63,110\"><code data-lines=\"63,110\">export <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">Pending</span> = <span class=\"hljs-number\">0</span>\nexport <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">Resolved</span> = <span class=\"hljs-number\">1</span>\nexport <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">Rejected</span> = <span class=\"hljs-number\">2</span>\n\nexport <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">readLazyComponentType</span>&lt;<span class=\"hljs-title\">T</span>&gt;(<span class=\"hljs-params\">lazyComponent: LazyComponent&lt;T&gt;</span>): <span class=\"hljs-title\">T</span> </span>{\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">status</span> = lazyComponent._status\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">result</span> = lazyComponent._result\n  <span class=\"hljs-keyword\">switch</span> (status) {\n    <span class=\"hljs-keyword\">case</span> Resolved: {\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">Component</span>: T = result\n      <span class=\"hljs-keyword\">return</span> Component\n    }\n    <span class=\"hljs-keyword\">case</span> Rejected: {\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">error</span>: <span class=\"hljs-keyword\">mixed</span> = result\n      <span class=\"hljs-keyword\">throw</span> error\n    }\n    <span class=\"hljs-keyword\">case</span> Pending: {\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">thenable</span>: Thenable&lt;T, <span class=\"hljs-keyword\">mixed</span>&gt; = result\n      <span class=\"hljs-keyword\">throw</span> thenable\n    }\n    <span class=\"hljs-keyword\">default</span>: {\n      lazyComponent._status = Pending\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">ctor</span> = lazyComponent._ctor\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">thenable</span> = <span class=\"hljs-title function_ invoke__\">ctor</span>()\n      thenable.<span class=\"hljs-title function_ invoke__\">then</span>(\n        moduleObject =&gt; {\n          <span class=\"hljs-keyword\">if</span> (lazyComponent._status === Pending) {\n            <span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">defaultExport</span> = moduleObject.<span class=\"hljs-keyword\">default</span>\n            lazyComponent._status = Resolved\n            lazyComponent._result = defaultExport\n          }\n        },\n        error =&gt; {\n          <span class=\"hljs-keyword\">if</span> (lazyComponent._status === Pending) {\n            lazyComponent._status = Rejected\n            lazyComponent._result = error\n          }\n        },\n      )\n      lazyComponent._result = thenable\n      <span class=\"hljs-keyword\">throw</span> thenable\n    }\n  }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"63,110"}},{"content":"<pre data-lines=\"111,112\"><code>&#x8fd9;&#x91cc;&#x5c31;&#x7528;&#x5230;&#x4e86;`_status`&#x548c;`_result`&#xff0c;&#x4e00;&#x5f00;&#x59cb;`_status`&#x662f;`-1`&#xff0c;&#x6240;&#x4ee5;&#x4e0d;&#x7b26;&#x5408;&#x524d;&#x4e09;&#x4e2a;`case`&#xff0c;&#x7136;&#x540e;&#x5c31;&#x8fdb;&#x5165;`default`&#xff0c;&#x8fd9;&#x91cc;&#x9762;&#x8c03;&#x7528;&#x4e86;`_ctor`&#x521b;&#x5efa;&#x4e86;`thenable`&#x5bf9;&#x8c61;&#xff0c;&#x8c03;&#x7528;`then`&#x65b9;&#x6cd5;&#xff0c;`resolve`&#x548c;`reject`&#x4e4b;&#x540e;&#x4f1a;&#x5206;&#x522b;&#x8bbe;&#x7f6e;`_status`&#x548c;`_result`&#xff0c;&#x9ed8;&#x8ba4;`_status`&#x53d8;&#x6210;`pendding`&#xff0c;&#x6240;&#x4ee5;&#x4e0b;&#x4e00;&#x6b21;&#x8fdb;&#x6765;&#x4f1a;`throw thenable`&#xff0c;&#x8fd9;&#x5c31;&#x8fdb;&#x5165;&#x4e86;`Suspense`&#x7684;&#x9636;&#x6bb5;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"111,112"}},{"content":"<img src=\"https://static.coursebetter.com/202112/Jokcy%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81.png\" alt>","children":[],"payload":{"tag":"img","lines":"113,114"}},{"content":"<img src=\"https://static.coursebetter.com/202112/Jokcy%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81.png\" alt>","children":[],"payload":{"tag":"img","lines":"117,118"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
