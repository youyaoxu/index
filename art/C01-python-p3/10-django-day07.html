<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x300a;Django Web&#x6846;&#x67b6;&#x6559;&#x5b66;&#x7b14;&#x8bb0;&#x300b;","children":[{"content":"&#x76ee;&#x5f55;","children":[],"payload":{"tag":"h2","lines":"1,2"}},{"content":"&#x7f13;&#x5b58;","children":[{"content":"&#x4ec0;&#x4e48;&#x662f;&#x7f13;&#x5b58;&#xff1f;","children":[{"content":"&#x7f13;&#x5b58;&#x662f;&#x4e00;&#x7c7b;&#x53ef;&#x4ee5;&#x66f4;&#x5feb;&#x7684;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x7684;&#x4ecb;&#x8d28;&#x7edf;&#x79f0;&#xff0c;&#x4e5f;&#x6307;&#x5176;&#x5b83;&#x53ef;&#x4ee5;&#x52a0;&#x5feb;&#x6570;&#x636e;&#x8bfb;&#x53d6;&#x7684;&#x5b58;&#x50a8;&#x65b9;&#x5f0f;&#x3002;&#x4e00;&#x822c;&#x7528;&#x6765;&#x5b58;&#x50a8;&#x4e34;&#x65f6;&#x6570;&#x636e;&#xff0c;&#x5e38;&#x7528;&#x4ecb;&#x8d28;&#x7684;&#x662f;&#x8bfb;&#x53d6;&#x901f;&#x5ea6;&#x5f88;&#x5feb;&#x7684;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"8,10"}}],"payload":{"tag":"h3","lines":"6,7"}},{"content":"&#x4e3a;&#x4ec0;&#x4e48;&#x4f7f;&#x7528;&#x7f13;&#x5b58;&#xff1f;","children":[{"content":"<pre data-lines=\"12,15\"><code>&#x89c6;&#x56fe;&#x6e32;&#x67d3;&#x6709;&#x4e00;&#x5b9a;&#x6210;&#x672c;&#xff0c;&#x5bf9;&#x4e8e;&#x4f4e;&#x9891;&#x53d8;&#x52a8;&#x7684;&#x9875;&#x9762;&#x53ef;&#x4ee5;&#x8003;&#x8651;&#x4f7f;&#x7528;&#x7f13;&#x5b58;&#x6280;&#x672f;&#xff0c;&#x51cf;&#x5c11;&#x5b9e;&#x9645;&#x6e32;&#x67d3;&#x6b21;&#x6570;\n\n&#x6848;&#x4f8b;&#x5206;&#x6790;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"12,15"}},{"content":"<pre data-lines=\"16,24\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.shortcuts <span class=\"hljs-keyword\">import</span> render\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>(<span class=\"hljs-params\">request</span>):\n    <span class=\"hljs-comment\"># &#x65f6;&#x95f4;&#x590d;&#x6742;&#x5ea6;&#x6781;&#x9ad8;&#x7684;&#x6e32;&#x67d3;</span>\n    book_list = Book.objects.<span class=\"hljs-built_in\">all</span>()  <span class=\"hljs-comment\">#-&gt; &#x6b64;&#x5904;&#x5047;&#x8bbe;&#x8017;&#x65f6;2s</span>\n    <span class=\"hljs-keyword\">return</span> render(request, <span class=\"hljs-string\">&apos;index.html&apos;</span>, <span class=\"hljs-built_in\">locals</span>())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"16,24"}},{"content":"<pre data-lines=\"25,26\"><code>&#x4f18;&#x5316;&#x601d;&#x60f3;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"25,26"}},{"content":"<pre data-lines=\"27,36\"><code class=\"language-python\">given a URL, <span class=\"hljs-keyword\">try</span> finding that page <span class=\"hljs-keyword\">in</span> the cache\n<span class=\"hljs-keyword\">if</span> the page <span class=\"hljs-keyword\">is</span> <span class=\"hljs-keyword\">in</span> the cache:\n    <span class=\"hljs-keyword\">return</span> the cached page\n<span class=\"hljs-keyword\">else</span>:\n    generate the page\n    save the generated page <span class=\"hljs-keyword\">in</span> the cache (<span class=\"hljs-keyword\">for</span> <span class=\"hljs-built_in\">next</span> time)\n    <span class=\"hljs-keyword\">return</span> the generated page\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"27,36"}}],"payload":{"tag":"h3","lines":"10,11"}},{"content":"&#x4f7f;&#x7528;&#x7f13;&#x5b58;&#x573a;&#x666f;&#xff1a;","children":[{"content":"<pre data-lines=\"41,46\"><code>1&#xff0c;&#x535a;&#x5ba2;&#x5217;&#x8868;&#x9875;\n\n2&#xff0c;&#x7535;&#x5546;&#x5546;&#x54c1;&#x8be6;&#x60c5;&#x9875;\n\n3&#xff0c;&#x7f13;&#x5b58;&#x5bfc;&#x822a;&#x53ca;&#x9875;&#x811a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"41,46"}}],"payload":{"tag":"h3","lines":"39,40"}},{"content":"Django&#x4e2d;&#x8bbe;&#x7f6e;&#x7f13;&#x5b58;","children":[{"content":"<pre data-lines=\"49,56\"><code data-lines=\"49,56\">Django&#x4e2d;&#x63d0;&#x4f9b;&#x591a;&#x79cd;&#x7f13;&#x5b58;&#x65b9;&#x5f0f;&#xff0c;&#x5982;&#x9700;&#x4f7f;&#x7528;&#x9700;&#x8981;&#x5728;settings.py&#x4e2d;&#x8fdb;&#x884c;&#x914d;&#x7f6e;\n<span class=\"hljs-built_in\">\n1,</span>&#x6570;&#x636e;&#x5e93;&#x7f13;&#x5b58;\n\nDjango&#x53ef;&#x4ee5;&#x5c06;&#x5176;&#x7f13;&#x5b58;&#x7684;&#x6570;&#x636e;&#x5b58;&#x50a8;&#x5728;&#x60a8;&#x7684;&#x6570;&#x636e;&#x5e93;&#x4e2d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"49,56"}},{"content":"<pre data-lines=\"56,69\"><code class=\"language-python\">CACHES = {\n    <span class=\"hljs-string\">&apos;default&apos;</span>: {\n        <span class=\"hljs-string\">&apos;BACKEND&apos;</span>: <span class=\"hljs-string\">&apos;django.core.cache.backends.db.DatabaseCache&apos;</span>,\n        <span class=\"hljs-string\">&apos;LOCATION&apos;</span>: <span class=\"hljs-string\">&apos;my_cache_table&apos;</span>,\n        <span class=\"hljs-string\">&apos;TIMEOUT&apos;</span>: <span class=\"hljs-number\">300</span>,  <span class=\"hljs-comment\">#&#x7f13;&#x5b58;&#x4fdd;&#x5b58;&#x65f6;&#x95f4; &#x5355;&#x4f4d;&#x79d2;&#xff0c;&#x9ed8;&#x8ba4;&#x503c;&#x4e3a;300, </span>\n        <span class=\"hljs-string\">&apos;OPTIONS&apos;</span>:{\n            <span class=\"hljs-string\">&apos;MAX_ENTRIES&apos;</span>: <span class=\"hljs-number\">300</span>, <span class=\"hljs-comment\">#&#x7f13;&#x5b58;&#x6700;&#x5927;&#x6570;&#x636e;&#x6761;&#x6570;</span>\n            <span class=\"hljs-string\">&apos;CULL_FREQUENCY&apos;</span>: <span class=\"hljs-number\">2</span>,<span class=\"hljs-comment\">#&#x7f13;&#x5b58;&#x6761;&#x6570;&#x8fbe;&#x5230;&#x6700;&#x5927;&#x503c;&#x65f6; &#x5220;&#x9664;1/x&#x7684;&#x7f13;&#x5b58;&#x6570;&#x636e;</span>\n        }\n    }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"56,69"}},{"content":"<pre data-lines=\"70,71\"><code>&#x521b;&#x5efa;&#x7f13;&#x5b58;&#x8868;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"70,71"}},{"content":"<pre data-lines=\"72,75\"><code class=\"language-python\">python3 manage.py createcachetable\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"72,75"}},{"content":"<pre data-lines=\"76,77\"><code>2,&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x7f13;&#x5b58;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,77"}},{"content":"<pre data-lines=\"78,87\"><code class=\"language-python\">CACHES = {\n    <span class=\"hljs-string\">&apos;default&apos;</span>: {\n        <span class=\"hljs-string\">&apos;BACKEND&apos;</span>: <span class=\"hljs-string\">&apos;django.core.cache.backends.filebased.FileBasedCache&apos;</span>,\n        <span class=\"hljs-string\">&apos;LOCATION&apos;</span>: <span class=\"hljs-string\">&apos;/var/tmp/django_cache&apos;</span>,<span class=\"hljs-comment\">#&#x8fd9;&#x4e2a;&#x662f;&#x6587;&#x4ef6;&#x5939;&#x7684;&#x8def;&#x5f84;</span>\n        <span class=\"hljs-comment\">#&apos;LOCATION&apos;: &apos;c:\\test\\cache&apos;,#windows&#x4e0b;&#x793a;&#x4f8b;</span>\n    }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"78,87"}},{"content":"<pre data-lines=\"88,89\"><code>3, &#x672c;&#x5730;&#x5185;&#x5b58;&#x7f13;&#x5b58;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"88,89"}},{"content":"<pre data-lines=\"90,98\"><code class=\"language-python\">CACHES = {\n    <span class=\"hljs-string\">&apos;default&apos;</span>: {\n        <span class=\"hljs-string\">&apos;BACKEND&apos;</span>: <span class=\"hljs-string\">&apos;django.core.cache.backends.locmem.LocMemCache&apos;</span>,\n        <span class=\"hljs-string\">&apos;LOCATION&apos;</span>: <span class=\"hljs-string\">&apos;unique-snowflake&apos;</span>\n    }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"90,98"}}],"payload":{"tag":"h3","lines":"48,49"}},{"content":"Django&#x4e2d;&#x4f7f;&#x7528;&#x7f13;&#x5b58;","children":[{"content":"<pre data-lines=\"101,106\"><code>- &#x5728;&#x89c6;&#x56fe;View&#x4e2d;&#x4f7f;&#x7528;\n- &#x5728;&#x8def;&#x7531;URL&#x4e2d;&#x4f7f;&#x7528;\n- &#x5728;&#x6a21;&#x677f;&#x4e2d;&#x4f7f;&#x7528;\n\n&#x5728;&#x89c6;&#x56fe;View&#x4e2d;&#x4f7f;&#x7528;cache\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"101,106"}},{"content":"<pre data-lines=\"107,119\"><code class=\"language-python\"> <span class=\"hljs-keyword\">from</span> django.views.decorators.cache <span class=\"hljs-keyword\">import</span> cache_page\n\n<span class=\"hljs-meta\">@cache_page(<span class=\"hljs-params\"><span class=\"hljs-number\">30</span></span>)  -&gt; &#x5355;&#x4f4d;s</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">my_view</span>(<span class=\"hljs-params\">request</span>):\n    \n    a1 = A.objects.<span class=\"hljs-built_in\">all</span>()  -<span class=\"hljs-number\">0.05</span>s\n    \n    b = B.objects.<span class=\"hljs-built_in\">all</span>() - 1s\n    \n    <span class=\"hljs-keyword\">return</span> render(request, <span class=\"hljs-string\">&apos;xx.html&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"107,119"}},{"content":"<pre data-lines=\"120,121\"><code>&#x5728;&#x8def;&#x7531;&#x4e2d;&#x4f7f;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,121"}},{"content":"<pre data-lines=\"122,129\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.views.decorators.cache <span class=\"hljs-keyword\">import</span> cache_page\n\nurlpatterns = [\n    path(<span class=\"hljs-string\">&apos;foo/&apos;</span>, cache_page(<span class=\"hljs-number\">60</span>)(my_view)),\n]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"122,129"}},{"content":"<pre data-lines=\"130,131\"><code>&#x5728;&#x6a21;&#x677f;&#x4e2d;&#x4f7f;&#x7528;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"130,131"}},{"content":"<pre data-lines=\"132,138\"><code class=\"language-python\">{% load cache %}\n{% cache 500 sidebar request.user.username %}\n    .. sidebar for logged in user ..\n{% endcache %}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"132,138"}},{"content":"<pre data-lines=\"139,144\"><code>- &#x7f13;&#x5b58;api\n\n&#x4f5c;&#x7528;&#xff1a;&#x5c40;&#x90e8;&#x7f13;&#x5b58;&#x90e8;&#x5206;&#x7ed3;&#x679c;\n\n&#x4f7f;&#x7528;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"139,144"}},{"content":"<pre data-lines=\"145,191\"><code class=\"language-PYTHON\"><span class=\"hljs-comment\">#&#x6307;&#x5b9a;&#x914d;&#x7f6e;&#x5f15;&#x5165;</span>\n<span class=\"hljs-keyword\">from</span> django.core.cache <span class=\"hljs-keyword\">import</span> caches\ncache1 = caches[<span class=\"hljs-string\">&apos;myalias&apos;</span>]\ncache2 = caches[<span class=\"hljs-string\">&apos;myalias_2&apos;</span>]\n\n<span class=\"hljs-comment\">#&#x9ed8;&#x8ba4;&#x914d;&#x7f6e;&#x5f15;&#x5165;&#x3010;&#x6307;&#x7684;&#x914d;&#x7f6e;&#x4e2d;&#x7684;default&#x9879;&#x3011; &#x7b49;&#x540c;&#x4e8e; caches[&apos;default&apos;]</span>\n<span class=\"hljs-keyword\">from</span> django.core.cache <span class=\"hljs-keyword\">import</span> cache\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; set</span>\n<span class=\"hljs-comment\">#key: &#x5b57;&#x7b26;&#x4e32;&#x7c7b;&#x578b;</span>\n<span class=\"hljs-comment\">#value: Python&#x5bf9;&#x8c61;</span>\n<span class=\"hljs-comment\">#timeout&#xff1a;&#x7f13;&#x5b58;&#x5b58;&#x50a8;&#x65f6;&#x95f4;  &#x9ed8;&#x8ba4;&#x503c;&#x4e3a;settings.py CACHES&#x5bf9;&#x5e94;&#x914d;&#x7f6e;&#x7684;TIMEOUT</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c;&#xff1a;True</span>\ncache.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-string\">&apos;my_key&apos;</span>, <span class=\"hljs-string\">&apos;myvalue&apos;</span>, <span class=\"hljs-number\">30</span>)\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; get</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c;&#xff1a;&#x4e3a;key&#x7684;&#x5177;&#x4f53;&#x503c;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6570;&#x636e;&#xff0c;&#x5219;&#x8fd4;&#x56de;None</span>\ncache.get(<span class=\"hljs-string\">&apos;my_key&apos;</span>)\n<span class=\"hljs-comment\">#&#x53ef;&#x6dfb;&#x52a0;&#x9ed8;&#x8ba4;&#x503c;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x53d6;&#x5230;&#x8fd4;&#x56de;&#x9ed8;&#x8ba4;&#x503c;</span>\ncache.get(<span class=\"hljs-string\">&apos;my_key&apos;</span>, <span class=\"hljs-string\">&apos;default&#x503c;&apos;</span>)\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; add &#x53ea;&#x6709;&#x5728;key&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x65f6;&#x5019; &#x624d;&#x80fd;&#x8bbe;&#x7f6e;&#x6210;&#x529f;</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c; True or None</span>\ncache.add(<span class=\"hljs-string\">&apos;my_key&apos;</span>, <span class=\"hljs-string\">&apos;value&apos;</span>) <span class=\"hljs-comment\">#&#x5982;&#x679c;my_key&#x5df2;&#x7ecf;&#x5b58;&#x5728;&#xff0c;&#x5219;&#x6b64;&#x6b21;&#x8d4b;&#x503c;&#x5931;&#x6548;</span>\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; get_or_set &#x5982;&#x679c;&#x672a;&#x83b7;&#x53d6;&#x5230;&#x6570;&#x636e; &#x5219;&#x6267;&#x884c;set&#x64cd;&#x4f5c;</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c; key&#x7684;&#x503c;</span>\ncache.get_or_set(<span class=\"hljs-string\">&apos;my_key&apos;</span>, <span class=\"hljs-string\">&apos;value&apos;</span>, <span class=\"hljs-number\">10</span>)\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; get_many() set_many()</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c;  set: None</span>\n<span class=\"hljs-comment\">#       get: OrderedDict</span>\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>cache.set_many({<span class=\"hljs-string\">&apos;a&apos;</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;b&apos;</span>: <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&apos;c&apos;</span>: <span class=\"hljs-number\">3</span>})\n<span class=\"hljs-meta\">&gt;&gt;&gt; </span>cache.get_many([<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;b&apos;</span>, <span class=\"hljs-string\">&apos;c&apos;</span>])\n{<span class=\"hljs-string\">&apos;a&apos;</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;b&apos;</span>: <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&apos;c&apos;</span>: <span class=\"hljs-number\">3</span>}\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; delete</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c;  &#x6210;&#x529f;&#x5220;&#x9664; 1   &#x5220;&#x9664;&#x5931;&#x8d25;0</span>\ncache.delete(<span class=\"hljs-string\">&apos;my_key&apos;</span>)\n\n<span class=\"hljs-comment\">#&#x5e38;&#x89c4;&#x547d;&#x4ee4; delete_many</span>\n<span class=\"hljs-comment\">#&#x8fd4;&#x56de;&#x503c;  &#x6210;&#x529f;&#x5220;&#x9664;&#x7684;&#x6570;&#x636e;&#x6761;&#x6570;</span>\ncache.delete_many([<span class=\"hljs-string\">&apos;a&apos;</span>, <span class=\"hljs-string\">&apos;b&apos;</span>, <span class=\"hljs-string\">&apos;c&apos;</span>])\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"145,191"}}],"payload":{"tag":"h3","lines":"99,100"}},{"content":"&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#x7684;&#x7f13;&#x5b58;","children":[{"content":"&#x5f3a;&#x7f13;&#x5b58;","children":[{"content":"<pre data-lines=\"202,217\"><code>**&#x4e0d;&#x4f1a;&#x5411;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#xff0c;&#x76f4;&#x63a5;&#x4ece;&#x7f13;&#x5b58;&#x4e2d;&#x8bfb;&#x53d6;&#x8d44;&#x6e90;**\n\n1&#xff0c;Expires\n\n**&#x7f13;&#x5b58;&#x8fc7;&#x671f;&#x65f6;&#x95f4;&#xff0c;&#x7528;&#x6765;&#x6307;&#x5b9a;&#x8d44;&#x6e90;&#x5230;&#x671f;&#x7684;&#x65f6;&#x95f4;&#xff0c;&#x662f;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x7684;&#x5177;&#x4f53;&#x7684;&#x65f6;&#x95f4;&#x70b9;**\n\nExpires=max-age + &#x8bf7;&#x6c42;&#x65f6;&#x95f4;\n\n**Expires &#x662f; HTTP/1 &#x7684;&#x4ea7;&#x7269;&#xff0c;&#x53d7;&#x9650;&#x4e8e;&#x672c;&#x5730;&#x65f6;&#x95f4;&#xff0c;&#x5982;&#x679c;&#x4fee;&#x6539;&#x4e86;&#x672c;&#x5730;&#x65f6;&#x95f4;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x9020;&#x6210;&#x7f13;&#x5b58;&#x5931;&#x6548;**\n\n2, Cache-Control \n\n&#x5728;HTTP/1.1&#x4e2d;&#xff0c;Cache-Control&#x4e3b;&#x8981;&#x7528;&#x4e8e;&#x63a7;&#x5236;&#x7f51;&#x9875;&#x7f13;&#x5b58;&#x3002;&#x6bd4;&#x5982;&#x5f53;`Cache-Control:max-age=120  `&#x4ee3;&#x8868;&#x8bf7;&#x6c42;&#x521b;&#x5efa;&#x65f6;&#x95f4;&#x540e;&#x7684;120&#x79d2;&#xff0c;&#x7f13;&#x5b58;&#x5931;&#x6548;\n\n&#x6a2a;&#x5411;&#x5bf9;&#x6bd4;   Expires  VS Cache-Control\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"202,217"}}],"payload":{"tag":"h4","lines":"200,201"}},{"content":"&#x534f;&#x5546;&#x7f13;&#x5b58;","children":[{"content":"<pre data-lines=\"222,251\"><code>**&#x534f;&#x5546;&#x7f13;&#x5b58;&#x5c31;&#x662f;&#x5f3a;&#x5236;&#x7f13;&#x5b58;&#x5931;&#x6548;&#x540e;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x643a;&#x5e26;&#x7f13;&#x5b58;&#x6807;&#x8bc6;&#x5411;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x8d77;&#x8bf7;&#x6c42;&#xff0c;&#x7531;&#x670d;&#x52a1;&#x5668;&#x6839;&#x636e;&#x7f13;&#x5b58;&#x6807;&#x8bc6;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x4f7f;&#x7528;&#x7f13;&#x5b58;&#x7684;&#x8fc7;&#x7a0b;\n\n1&#xff0c;Last-Modified&#x548c;If-Modified-Since\n\n    &#x7b2c;&#x4e00;&#x6b21;&#x8bbf;&#x95ee;&#x65f6;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x4f1a;&#x8fd4;&#x56de; \n\nLast-Modified: Fri, 22 Jul 2016 01:47:00 GMT\n\n    &#x6d4f;&#x89c8;&#x5668;&#x4e0b;&#x6b21;&#x8bf7;&#x6c42;&#x65f6; &#x643a;&#x5e26;If-Modified-Since&#x8fd9;&#x4e2a;header , &#x8be5;&#x503c;&#x4e3a; Last-Modified\n    \n    &#x670d;&#x52a1;&#x5668;&#x63a5;&#x6536;&#x8bf7;&#x6c42;&#x540e;&#xff0c;&#x5bf9;&#x6bd4;&#x7ed3;&#x679c;&#xff0c;&#x82e5;&#x8d44;&#x6e90;&#x672a;&#x53d1;&#x751f;&#x6539;&#x53d8;&#xff0c;&#x5219;&#x8fd4;&#x56de;304&#xff0c; &#x5426;&#x5219;&#x8fd4;&#x56de;200&#x5e76;&#x5c06;&#x65b0;&#x8d44;&#x6e90;&#x8fd4;&#x56de;&#x7ed9;&#x6d4f;&#x89c8;&#x5668;\n    \n    &#x7f3a;&#x70b9;&#xff1a;&#x53ea;&#x80fd;&#x7cbe;&#x786e;&#x5230;&#x79d2;&#xff0c;&#x5bb9;&#x6613;&#x53d1;&#x751f;&#x5355;&#x79d2;&#x5185;&#x591a;&#x6b21;&#x4fee;&#x6539;&#xff0c;&#x68c0;&#x6d4b;&#x4e0d;&#x5230;\n\n\n2&#xff0c;ETag&#x548c;If-None-Match\n\n    Etag&#x662f;&#x670d;&#x52a1;&#x5668;&#x54cd;&#x5e94;&#x8bf7;&#x6c42;&#x65f6;&#xff0c;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x8d44;&#x6e90;&#x6587;&#x4ef6;&#x7684;&#x4e00;&#x4e2a;&#x552f;&#x4e00;&#x6807;&#x8bc6;(&#x7531;&#x670d;&#x52a1;&#x5668;&#x751f;&#x6210;)&#xff0c;&#x53ea;&#x8981;&#x8d44;&#x6e90;&#x6709;&#x53d8;&#x5316;&#xff0c;Etag&#x5c31;&#x4f1a;&#x91cd;&#x65b0;&#x751f;&#x6210;\n    \n    &#x6d41;&#x7a0b;&#x540c;&#x4e0a;\n\n\n&#x5bf9;&#x6bd4;  Last-Modified VS  ETag  \n\n1&#xff0c;&#x7cbe;&#x5ea6;&#x4e0d;&#x4e00;&#x6837; -  Etag &#x9ad8;\n\n2&#xff0c;&#x6027;&#x80fd;&#x4e0a; - Last-Modifi &#x9ad8;\n\n3&#xff0c;&#x4f18;&#x5148;&#x7ea7; - Etag &#x9ad8;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"222,251"}}],"payload":{"tag":"h4","lines":"220,221"}}],"payload":{"tag":"h3","lines":"194,195"}}],"payload":{"tag":"h2","lines":"4,5"}},{"content":"&#x4e2d;&#x95f4;&#x4ef6; Middleware","children":[{"content":"","children":[{"content":"<pre data-lines=\"258,272\"><code>- &#x4e2d;&#x95f4;&#x4ef6;&#x662f; Django &#x8bf7;&#x6c42;/&#x54cd;&#x5e94;&#x5904;&#x7406;&#x7684;&#x94a9;&#x5b50;&#x6846;&#x67b6;&#x3002;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x8f7b;&#x91cf;&#x7ea7;&#x7684;&#x3001;&#x4f4e;&#x7ea7;&#x7684;&#x201c;&#x63d2;&#x4ef6;&#x201d;&#x7cfb;&#x7edf;&#xff0c;&#x7528;&#x4e8e;&#x5168;&#x5c40;&#x6539;&#x53d8; Django &#x7684;&#x8f93;&#x5165;&#x6216;&#x8f93;&#x51fa;&#x3002;\n- &#x6bcf;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x7ec4;&#x4ef6;&#x8d1f;&#x8d23;&#x505a;&#x4e00;&#x4e9b;&#x7279;&#x5b9a;&#x7684;&#x529f;&#x80fd;&#x3002;&#x4f8b;&#x5982;&#xff0c;Django &#x5305;&#x542b;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x7ec4;&#x4ef6; AuthenticationMiddleware&#xff0c;&#x5b83;&#x4f7f;&#x7528;&#x4f1a;&#x8bdd;&#x5c06;&#x7528;&#x6237;&#x4e0e;&#x8bf7;&#x6c42;&#x5173;&#x8054;&#x8d77;&#x6765;&#x3002;\n- &#x4ed6;&#x7684;&#x6587;&#x6863;&#x89e3;&#x91ca;&#x4e86;&#x4e2d;&#x95f4;&#x4ef6;&#x662f;&#x5982;&#x4f55;&#x5de5;&#x4f5c;&#x7684;&#xff0c;&#x5982;&#x4f55;&#x6fc0;&#x6d3b;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x4ee5;&#x53ca;&#x5982;&#x4f55;&#x7f16;&#x5199;&#x81ea;&#x5df1;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;Django &#x5177;&#x6709;&#x4e00;&#x4e9b;&#x5185;&#x7f6e;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x4f60;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x4f7f;&#x7528;&#x3002;&#x5b83;&#x4eec;&#x88ab;&#x8bb0;&#x5f55;&#x5728; built-in middleware reference &#x4e2d;&#x3002;\n- &#x4e2d;&#x95f4;&#x4ef6;&#x7c7b;:\n    - &#x4e2d;&#x95f4;&#x4ef6;&#x7c7b;&#x987b;&#x7ee7;&#x627f;&#x81ea; `django.utils.deprecation.MiddlewareMixin`&#x7c7b;\n    - &#x4e2d;&#x95f4;&#x4ef6;&#x7c7b;&#x987b;&#x5b9e;&#x73b0;&#x4e0b;&#x5217;&#x4e94;&#x4e2a;&#x65b9;&#x6cd5;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#x6216;&#x591a;&#x4e2a;:\n        - `def process_request(self, request):` &#x6267;&#x884c;&#x8def;&#x7531;&#x4e4b;&#x524d;&#x88ab;&#x8c03;&#x7528;&#xff0c;&#x5728;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#x4e0a;&#x8c03;&#x7528;&#xff0c;&#x8fd4;&#x56de;None&#x6216;HttpResponse&#x5bf9;&#x8c61; \n        - `def process_view(self, request, callback, callback_args, callback_kwargs):` &#x8c03;&#x7528;&#x89c6;&#x56fe;&#x4e4b;&#x524d;&#x88ab;&#x8c03;&#x7528;&#xff0c;&#x5728;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#x4e0a;&#x8c03;&#x7528;&#xff0c;&#x8fd4;&#x56de;None&#x6216;HttpResponse&#x5bf9;&#x8c61;\n        - `def process_response(self, request, response):` &#x6240;&#x6709;&#x54cd;&#x5e94;&#x8fd4;&#x56de;&#x6d4f;&#x89c8;&#x5668;  &#x88ab;&#x8c03;&#x7528;&#xff0c;&#x5728;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#x4e0a;&#x8c03;&#x7528;&#xff0c;&#x8fd4;&#x56de;HttpResponse&#x5bf9;&#x8c61;\n        - `def process_exception(self, request, exception):` &#x5f53;&#x5904;&#x7406;&#x8fc7;&#x7a0b;&#x4e2d;&#x629b;&#x51fa;&#x5f02;&#x5e38;&#x65f6;&#x8c03;&#x7528;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;HttpResponse&#x5bf9;&#x8c61;\n        - `def process_template_response(self, request, response):` &#x5728;&#x89c6;&#x56fe;&#x521a;&#x597d;&#x6267;&#x884c;&#x5b8c;&#x6bd5;&#x4e4b;&#x540e;&#x88ab;&#x8c03;&#x7528;&#xff0c;&#x5728;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#x4e0a;&#x8c03;&#x7528;&#xff0c;&#x8fd4;&#x56de;&#x5b9e;&#x73b0;&#x4e86;render&#x65b9;&#x6cd5;&#x7684;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;\n    - &#x6ce8;&#xff1a; &#x4e2d;&#x95f4;&#x4ef6;&#x4e2d;&#x7684;&#x5927;&#x591a;&#x6570;&#x65b9;&#x6cd5;&#x5728;&#x8fd4;&#x56de;None&#x65f6;&#x8868;&#x793a;&#x5ffd;&#x7565;&#x5f53;&#x524d;&#x64cd;&#x4f5c;&#x8fdb;&#x5165;&#x4e0b;&#x4e00;&#x9879;&#x4e8b;&#x4ef6;&#xff0c;&#x5f53;&#x8fd4;&#x56de;HttpResponese&#x5bf9;&#x8c61;&#x65f6;&#x8868;&#x793a;&#x6b64;&#x8bf7;&#x6c42;&#x7ed3;&#x675f;&#xff0c;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#x7ed9;&#x5ba2;&#x6237;&#x7aef;\n\n- &#x7f16;&#x5199;&#x4e2d;&#x95f4;&#x4ef6;&#x7c7b;:\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"258,272"}},{"content":"<pre data-lines=\"272,295\"><code class=\"language-python\"><span class=\"hljs-comment\"># file : middleware/mymiddleware.py</span>\n<span class=\"hljs-keyword\">from</span> django.http <span class=\"hljs-keyword\">import</span> HttpResponse, Http404\n<span class=\"hljs-keyword\">from</span> django.utils.deprecation <span class=\"hljs-keyword\">import</span> MiddlewareMixin\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyMiddleWare</span>(<span class=\"hljs-title class_ inherited__\">MiddlewareMixin</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e2d;&#x95f4;&#x4ef6;&#x65b9;&#x6cd5; process_request &#x88ab;&#x8c03;&#x7528;&quot;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_view</span>(<span class=\"hljs-params\">self, request, callback, callback_args, callback_kwargs</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e2d;&#x95f4;&#x4ef6;&#x65b9;&#x6cd5; process_view &#x88ab;&#x8c03;&#x7528;&quot;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_response</span>(<span class=\"hljs-params\">self, request, response</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e2d;&#x95f4;&#x4ef6;&#x65b9;&#x6cd5; process_response &#x88ab;&#x8c03;&#x7528;&quot;</span>)\n        <span class=\"hljs-keyword\">return</span> response\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_exception</span>(<span class=\"hljs-params\">self, request, exception</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e2d;&#x95f4;&#x4ef6;&#x65b9;&#x6cd5; process_exception &#x88ab;&#x8c03;&#x7528;&quot;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_template_response</span>(<span class=\"hljs-params\">self, request, response</span>):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e2d;&#x95f4;&#x4ef6;&#x65b9;&#x6cd5; process_template_response &#x88ab;&#x8c03;&#x7528;&quot;</span>)\n        <span class=\"hljs-keyword\">return</span> response\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"272,295"}},{"content":"<pre data-lines=\"295,296\"><code>- &#x6ce8;&#x518c;&#x4e2d;&#x95f4;&#x4ef6;:\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"295,296"}},{"content":"<pre data-lines=\"296,302\"><code class=\"language-python\"><span class=\"hljs-comment\"># file : settings.py</span>\nMIDDLEWARE = [\n    ...\n       ]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"296,302"}},{"content":"<pre data-lines=\"302,312\"><code>- &#x4e2d;&#x95f4;&#x4ef6;&#x7684;&#x6267;&#x884c;&#x8fc7;&#x7a0b;\n    - ![](images/middleware.jpeg)\n\n\n- &#x7ec3;&#x4e60;\n    - &#x7528;&#x4e2d;&#x95f4;&#x4ef6;&#x5b9e;&#x73b0;&#x5f3a;&#x5236;&#x67d0;&#x4e2a;IP&#x5730;&#x5740;&#x53ea;&#x80fd;&#x5411;/test &#x53d1;&#x9001; 5 &#x6b21;GET&#x8bf7;&#x6c42;\n    - &#x63d0;&#x793a;:\n        - request.META[&apos;REMOTE_ADDR&apos;] &#x53ef;&#x4ee5;&#x5f97;&#x5230;&#x8fdc;&#x7a0b;&#x5ba2;&#x6237;&#x7aef;&#x7684;IP&#x5730;&#x5740;\n        - request.path_info &#x53ef;&#x4ee5;&#x5f97;&#x5230;&#x5ba2;&#x6237;&#x7aef;&#x8bbf;&#x95ee;&#x7684;GET&#x8bf7;&#x6c42;&#x8def;&#x7531;&#x4fe1;&#x606f;\n    - &#x7b54;&#x6848;:\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"302,312"}},{"content":"<pre data-lines=\"312,337\"><code class=\"language-python\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">VisitLimit</span>(<span class=\"hljs-title class_ inherited__\">MiddlewareMixin</span>):\n\n    visit_times = {}\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_request</span>(<span class=\"hljs-params\">self, request</span>):\n\n        ip_address = request.META[<span class=\"hljs-string\">&apos;REMOTE_ADDR&apos;</span>]\n        <span class=\"hljs-comment\">#/test &#x9650;&#x5236;</span>\n        path = request.path_info\n        <span class=\"hljs-comment\">#/user&#x5f00;&#x5934;&#x7684;&#x5730;&#x5740; &#x90fd;&#x8981;&#x8ba1;&#x6570; &#x9650;&#x5236;&#x8bbf;&#x95ee;&#x6b21;&#x6570;</span>\n        <span class=\"hljs-comment\"># if not re.match(&apos;^/user&apos;, path):</span>\n        <span class=\"hljs-comment\">#     return</span>\n        <span class=\"hljs-keyword\">if</span> path != <span class=\"hljs-string\">&apos;/test_html_cache&apos;</span>:\n            <span class=\"hljs-keyword\">return</span>\n\n        <span class=\"hljs-comment\">#&#x8ba1;&#x6570;</span>\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;---Limit count is&apos;</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-variable language_\">self</span>.visit_times)\n        times = <span class=\"hljs-variable language_\">self</span>.visit_times.get(ip_address, <span class=\"hljs-number\">0</span>)\n        <span class=\"hljs-keyword\">if</span> times &lt; <span class=\"hljs-number\">5</span>:\n            <span class=\"hljs-variable language_\">self</span>.visit_times[ip_address] = times + <span class=\"hljs-number\">1</span>\n            <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&apos;&#x5bf9;&#x4e0d;&#x8d77;&#xff0c;&#x8bbf;&#x95ee;&#x6b21;&#x6570;&#x5df2;&#x8fbe;&#x4e0a;&#x9650;&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"312,337"}}],"payload":{"tag":"h3","lines":"257,258"}},{"content":"&#x8de8;&#x7ad9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;&#x4fdd;&#x62a4; CSRF","children":[{"content":"\n<p data-lines=\"340,341\">&#x8de8;&#x7ad9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;&#x653b;&#x51fb;</p>","children":[{"content":"&#x67d0;&#x4e9b;&#x6076;&#x610f;&#x7f51;&#x7ad9;&#x4e0a;&#x5305;&#x542b;&#x94fe;&#x63a5;&#x3001;&#x8868;&#x5355;&#x6309;&#x94ae;&#x6216;&#x8005;JavaScript&#xff0c;&#x5b83;&#x4eec;&#x4f1a;&#x5229;&#x7528;&#x767b;&#x5f55;&#x8fc7;&#x7684;&#x7528;&#x6237;&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#x7684;&#x8ba4;&#x8bc1;&#x4fe1;&#x606f;&#x8bd5;&#x56fe;&#x5728;&#x4f60;&#x7684;&#x7f51;&#x7ad9;&#x4e0a;&#x5b8c;&#x6210;&#x67d0;&#x4e9b;&#x64cd;&#x4f5c;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x8de8;&#x7ad9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;(CSRF&#xff0c;&#x5373;Cross-Site Request Forgey)&#x3002;","children":[],"payload":{"tag":"li","lines":"342,343"}}],"payload":{"tag":"li","lines":"340,343"}},{"content":"\n<p data-lines=\"343,344\">&#x8bf4;&#x660e;:</p>","children":[],"payload":{"tag":"li","lines":"343,345"}},{"content":"\n<p data-lines=\"345,346\">CSRF&#x4e2d;&#x95f4;&#x4ef6;&#x548c;&#x6a21;&#x677f;&#x6807;&#x7b7e;&#x63d0;&#x4f9b;&#x5bf9;&#x8de8;&#x7ad9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;&#x7b80;&#x5355;&#x6613;&#x7528;&#x7684;&#x9632;&#x62a4;&#x3002;</p>","children":[],"payload":{"tag":"li","lines":"345,347"}},{"content":"\n<p data-lines=\"347,348\">&#x4f5c;&#x7528;:</p>","children":[{"content":"&#x4e0d;&#x8ba9;&#x5176;&#x5b83;&#x8868;&#x5355;&#x63d0;&#x4ea4;&#x5230;&#x6b64; Django &#x670d;&#x52a1;&#x5668;","children":[],"payload":{"tag":"li","lines":"349,350"}}],"payload":{"tag":"li","lines":"347,350"}},{"content":"\n<p data-lines=\"350,351\">&#x89e3;&#x51b3;&#x65b9;&#x6848;:</p>","children":[{"content":"1. \n<p data-lines=\"351,352\">&#x53d6;&#x6d88; csrf &#x9a8c;&#x8bc1;(&#x4e0d;&#x63a8;&#x8350;)</p>","children":[{"content":"&#x5220;&#x9664; settings.py &#x4e2d; MIDDLEWARE &#x4e2d;&#x7684; <code>django.middleware.csrf.CsrfViewMiddleware</code> &#x7684;&#x4e2d;&#x95f4;&#x4ef6;","children":[],"payload":{"tag":"li","lines":"353,354"}}],"payload":{"tag":"li","lines":"351,354","listIndex":1}},{"content":"2. \n<p data-lines=\"354,355\">&#x901a;&#x8fc7;&#x9a8c;&#x8bc1; csrf_token &#x9a8c;&#x8bc1;</p>\n<pre data-lines=\"355,359\"><code class=\"language-python\">&#x9700;&#x8981;&#x5728;&#x8868;&#x5355;&#x4e2d;&#x589e;&#x52a0;&#x4e00;&#x4e2a;&#x6807;&#x7b7e; \n{% csrf_token %}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"354,362","listIndex":2}}],"payload":{"tag":"li","lines":"350,362"}}],"payload":{"tag":"h3","lines":"339,340"}}],"payload":{"tag":"h2","lines":"255,256"}},{"content":"&#x5206;&#x9875;","children":[{"content":"<pre data-lines=\"365,371\"><code>- &#x5206;&#x9875;&#x662f;&#x6307;&#x5728;web&#x9875;&#x9762;&#x6709;&#x5927;&#x91cf;&#x6570;&#x636e;&#x9700;&#x8981;&#x663e;&#x793a;&#xff0c;&#x4e3a;&#x4e86;&#x9605;&#x8bfb;&#x65b9;&#x4fbf;&#x5728;&#x6bcf;&#x4e2a;&#x9875;&#x9875;&#x4e2d;&#x53ea;&#x663e;&#x793a;&#x90e8;&#x5206;&#x6570;&#x636e;&#x3002;\n- &#x597d;&#x5904;:\n    1. &#x65b9;&#x4fbf;&#x9605;&#x8bfb;\n    2. &#x51cf;&#x5c11;&#x6570;&#x636e;&#x63d0;&#x53d6;&#x91cf;&#xff0c;&#x51cf;&#x8f7b;&#x670d;&#x52a1;&#x5668;&#x538b;&#x529b;&#x3002;\n- Django&#x63d0;&#x4f9b;&#x4e86;Paginator&#x7c7b;&#x53ef;&#x4ee5;&#x65b9;&#x4fbf;&#x7684;&#x5b9e;&#x73b0;&#x5206;&#x9875;&#x529f;&#x80fd; \n- Paginator&#x7c7b;&#x4f4d;&#x4e8e;`django.core.paginator` &#x6a21;&#x5757;&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"365,371"}},{"content":"Paginator&#x5bf9;&#x8c61;","children":[{"content":"\n<p data-lines=\"373,374\">&#x5bf9;&#x8c61;&#x7684;&#x6784;&#x9020;&#x65b9;&#x6cd5;</p>","children":[{"content":"Paginator(object_list, per_page)","children":[],"payload":{"tag":"li","lines":"374,375"}},{"content":"&#x53c2;&#x6570;","children":[{"content":"object_list &#x9700;&#x8981;&#x5206;&#x7c7b;&#x6570;&#x636e;&#x7684;&#x5bf9;&#x8c61;&#x5217;&#x8868;","children":[],"payload":{"tag":"li","lines":"376,377"}},{"content":"per_page &#x6bcf;&#x9875;&#x6570;&#x636e;&#x4e2a;&#x6570;","children":[],"payload":{"tag":"li","lines":"377,378"}}],"payload":{"tag":"li","lines":"375,378"}},{"content":"&#x8fd4;&#x56de;&#x503c;:","children":[{"content":"&#x5206;&#x9875;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"379,381"}}],"payload":{"tag":"li","lines":"378,381"}}],"payload":{"tag":"li","lines":"373,381"}},{"content":"\n<p data-lines=\"381,382\">Paginator&#x5c5e;&#x6027;</p>","children":[{"content":"count&#xff1a;&#x9700;&#x8981;&#x5206;&#x7c7b;&#x6570;&#x636e;&#x7684;&#x5bf9;&#x8c61;&#x603b;&#x6570;","children":[],"payload":{"tag":"li","lines":"382,383"}},{"content":"num_pages&#xff1a;&#x5206;&#x9875;&#x540e;&#x7684;&#x9875;&#x9762;&#x603b;&#x6570;","children":[],"payload":{"tag":"li","lines":"383,384"}},{"content":"page_range&#xff1a;&#x4ece;1&#x5f00;&#x59cb;&#x7684;range&#x5bf9;&#x8c61;, &#x7528;&#x4e8e;&#x8bb0;&#x5f55;&#x5f53;&#x524d;&#x9762;&#x7801;&#x6570;","children":[],"payload":{"tag":"li","lines":"384,385"}},{"content":"per_page &#x6bcf;&#x9875;&#x6570;&#x636e;&#x7684;&#x4e2a;&#x6570;","children":[],"payload":{"tag":"li","lines":"385,387"}}],"payload":{"tag":"li","lines":"381,387"}},{"content":"\n<p data-lines=\"387,388\">Paginator&#x65b9;&#x6cd5;</p>","children":[{"content":"Paginator.page(number)","children":[{"content":"&#x53c2;&#x6570; number&#x4e3a;&#x9875;&#x7801;&#x4fe1;&#x606f;(&#x4ece;1&#x5f00;&#x59cb;)","children":[],"payload":{"tag":"li","lines":"389,390"}},{"content":"&#x8fd4;&#x56de;&#x5f53;&#x524d;number&#x9875;&#x5bf9;&#x5e94;&#x7684;&#x9875;&#x4fe1;&#x606f;","children":[],"payload":{"tag":"li","lines":"390,391"}},{"content":"&#x5982;&#x679c;&#x63d0;&#x4f9b;&#x7684;&#x9875;&#x7801;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x629b;&#x51fa;InvalidPage&#x5f02;&#x5e38;","children":[],"payload":{"tag":"li","lines":"391,393"}}],"payload":{"tag":"li","lines":"388,393"}}],"payload":{"tag":"li","lines":"387,393"}},{"content":"\n<p data-lines=\"393,394\">Paginator&#x5f02;&#x5e38;exception</p>","children":[{"content":"InvalidPage&#xff1a;&#x5f53;&#x5411;page()&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x65e0;&#x6548;&#x7684;&#x9875;&#x7801;&#x65f6;&#x629b;&#x51fa;","children":[],"payload":{"tag":"li","lines":"394,395"}},{"content":"PageNotAnInteger&#xff1a;&#x5f53;&#x5411;page()&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x4e0d;&#x662f;&#x6574;&#x6570;&#x7684;&#x503c;&#x65f6;&#x629b;&#x51fa;","children":[],"payload":{"tag":"li","lines":"395,396"}},{"content":"EmptyPage&#xff1a;&#x5f53;&#x5411;page()&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x6709;&#x6548;&#x503c;&#xff0c;&#x4f46;&#x662f;&#x90a3;&#x4e2a;&#x9875;&#x9762;&#x4e0a;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x5bf9;&#x8c61;&#x65f6;&#x629b;&#x51fa;","children":[],"payload":{"tag":"li","lines":"396,398"}}],"payload":{"tag":"li","lines":"393,398"}}],"payload":{"tag":"h3","lines":"372,373"}},{"content":"Page&#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"420,434\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.core.paginator <span class=\"hljs-keyword\">import</span> Paginator\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">book</span>(<span class=\"hljs-params\">request</span>):\n    bks = models.Book.objects.<span class=\"hljs-built_in\">all</span>()\n    paginator = Paginator(bks, <span class=\"hljs-number\">10</span>)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x7684;&#x603b;&#x4e2a;&#x6570;&#x662f;:&apos;</span>, paginator.count)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x7684;&#x9762;&#x7801;&#x8303;&#x56f4;&#x662f;:&apos;</span>, paginator.page_range)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x603b;&#x9875;&#x6570;&#x662f;&#xff1a;&apos;</span>, paginator.num_pages)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&apos;&#x6bcf;&#x9875;&#x6700;&#x5927;&#x4e2a;&#x6570;:&apos;</span>, paginator.per_page)\n\n    cur_page = request.GET.get(<span class=\"hljs-string\">&apos;page&apos;</span>, <span class=\"hljs-number\">1</span>)  <span class=\"hljs-comment\"># &#x5f97;&#x5230;&#x9ed8;&#x8ba4;&#x7684;&#x5f53;&#x524d;&#x9875;</span>\n    page = paginator.page(cur_page)\n    <span class=\"hljs-keyword\">return</span> render(request, <span class=\"hljs-string\">&apos;bookstore/book.html&apos;</span>, <span class=\"hljs-built_in\">locals</span>())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"420,434"}},{"content":"<pre data-lines=\"434,435\"><code>- &#x6a21;&#x677f;&#x8bbe;&#x8ba1;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"434,435"}},{"content":"<pre data-lines=\"435,470\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>&#x5206;&#x9875;&#x663e;&#x793a;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n{% for b in page %}\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>{{ b.title }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n{% endfor %}\n\n{# &#x5206;&#x9875;&#x529f;&#x80fd; #}\n{# &#x4e0a;&#x4e00;&#x9875;&#x529f;&#x80fd; #}\n{% if page.has_previous %}\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;{% url &apos;book&apos; %}?page={{ page.previous_page_number }}&quot;</span>&gt;</span>&#x4e0a;&#x4e00;&#x9875;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n{% else %}\n&#x4e0a;&#x4e00;&#x9875;\n{% endif %}\n\n{% for p in paginator.page_range %}\n    {% if p == page.number %}\n        {{ p }}\n    {% else %}\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;{% url &apos;book&apos; %}?page={{ p }}&quot;</span>&gt;</span>{{ p }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n    {% endif %}\n{% endfor %}\n\n{#&#x4e0b;&#x4e00;&#x9875;&#x529f;&#x80fd;#}\n{% if page.has_next %}\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;{% url &apos;book&apos; %}?page={{ page.next_page_number }}&quot;</span>&gt;</span>&#x4e0b;&#x4e00;&#x9875;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n{% else %}\n&#x4e0b;&#x4e00;&#x9875;\n{% endif %}\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"435,470"}}],"payload":{"tag":"h3","lines":"398,399"}}],"payload":{"tag":"h2","lines":"362,363"}},{"content":"&#x6587;&#x4ef6;&#x4e0a;&#x4f20;","children":[{"content":"<pre data-lines=\"473,483\"><code>- &#x6587;&#x4ef6;&#x4e0a;&#x4f20;&#x5fc5;&#x987b;&#x4e3a;POST&#x63d0;&#x4ea4;&#x65b9;&#x5f0f;\n- &#x8868;&#x5355;`&lt;form&gt;`&#x4e2d;&#x6587;&#x4ef6;&#x4e0a;&#x4f20;&#x65f6;&#x5fc5;&#x987b;&#x6709;&#x5e26;&#x6709;`enctype=&quot;multipart/form-data&quot;` &#x65f6;&#x624d;&#x4f1a;&#x5305;&#x542b;&#x6587;&#x4ef6;&#x5185;&#x5bb9;&#x6570;&#x636e;&#x3002;\n- &#x8868;&#x5355;&#x4e2d;&#x7528;`&lt;input type=&quot;file&quot; name=&quot;xxx&quot;&gt;`&#x6807;&#x7b7e;&#x4e0a;&#x4f20;&#x6587;&#x4ef6;\n    - &#x540d;&#x5b57;`xxx`&#x5bf9;&#x5e94;`request.FILES[&apos;xxx&apos;]` &#x5bf9;&#x5e94;&#x7684;&#x5185;&#x5b58;&#x7f13;&#x51b2;&#x6587;&#x4ef6;&#x6d41;&#x5bf9;&#x8c61;&#x3002;&#x53ef;&#x901a;&#x80fd;&#x8fc7;`request.FILES[&apos;xxx&apos;]` &#x8fd4;&#x56de;&#x7684;&#x5bf9;&#x8c61;&#x83b7;&#x53d6;&#x4e0a;&#x4f20;&#x6587;&#x4ef6;&#x6570;&#x636e;\n    - `file=request.FILES[&apos;xxx&apos;]` file &#x7ed1;&#x5b9a;&#x6587;&#x4ef6;&#x6d41;&#x5bf9;&#x8c61;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x6587;&#x4ef6;&#x6d41;&#x5bf9;&#x8c61;&#x7684;&#x5982;&#x4e0b;&#x4fe1;&#x606f;&#x83b7;&#x53d6;&#x6587;&#x4ef6;&#x6570;&#x636e;\n        file.name &#x6587;&#x4ef6;&#x540d;\n        file.file &#x6587;&#x4ef6;&#x7684;&#x5b57;&#x8282;&#x6d41;&#x6570;&#x636e;\n\n\n- &#x4e0a;&#x4f20;&#x6587;&#x4ef6;&#x7684;&#x8868;&#x5355;&#x4e66;&#x5199;&#x65b9;&#x5f0f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"473,483"}},{"content":"<pre data-lines=\"483,499\"><code class=\"language-html\"><span class=\"hljs-comment\">&lt;!-- file: index/templates/index/upload.html --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;utf-8&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>&#x6587;&#x4ef6;&#x4e0a;&#x4f20;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h3</span>&gt;</span>&#x4e0a;&#x4f20;&#x6587;&#x4ef6;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h3</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">method</span>=<span class=\"hljs-string\">&quot;post&quot;</span> <span class=\"hljs-attr\">action</span>=<span class=\"hljs-string\">&quot;/upload&quot;</span> <span class=\"hljs-attr\">enctype</span>=<span class=\"hljs-string\">&quot;multipart/form-data&quot;</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;file&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;myfile&quot;</span>/&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;submit&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;&#x4e0a;&#x4f20;&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"483,499"}},{"content":"<pre data-lines=\"500,513\"><code>- &#x5728;setting.py &#x4e2d;&#x8bbe;&#x7f6e;&#x4e00;&#x4e2a;&#x53d8;&#x91cf;MEDIA_ROOT &#x7528;&#x6765;&#x8bb0;&#x5f55;&#x4e0a;&#x4f20;&#x6587;&#x4ef6;&#x7684;&#x4f4d;&#x7f6e;\n    ```python\n    # file : settings.py\n    ...\n    MEDIA_ROOT = os.path.join(BASE_DIR, &apos;static/files&apos;)\n    ```\n    \n- &#x5728;&#x5f53;&#x524d;&#x9879;&#x76ee;&#x6587;&#x4ef6;&#x5939;&#x4e0b;&#x521b;&#x5efa; `static/files` &#x6587;&#x4ef6;&#x5939;\n    ```shell\n    &#x24; mkdir -p static/files\n    ```\n    \n- &#x6dfb;&#x52a0;&#x8def;&#x7531;&#x53ca;&#x5bf9;&#x5e94;&#x7684;&#x5904;&#x7406;&#x51fd;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"500,513"}},{"content":"<pre data-lines=\"513,520\"><code class=\"language-python\"><span class=\"hljs-comment\"># file urls.py</span>\nurlpatterns = [\n    url(<span class=\"hljs-string\">r&apos;^admin/&apos;</span>, admin.site.urls),\n    url(<span class=\"hljs-string\">r&apos;^upload&apos;</span>, views.upload_view)\n]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"513,520"}},{"content":"<pre data-lines=\"521,522\"><code>- &#x4e0a;&#x4f20;&#x6587;&#x4ef6;&#x7684;&#x89c6;&#x56fe;&#x5904;&#x7406;&#x51fd;&#x6570;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"521,522"}},{"content":"<pre data-lines=\"523,543\"><code class=\"language-python\"><span class=\"hljs-comment\"># file views.py</span>\n<span class=\"hljs-keyword\">from</span> django.http <span class=\"hljs-keyword\">import</span> HttpResponse, Http404\n<span class=\"hljs-keyword\">from</span> django.conf <span class=\"hljs-keyword\">import</span> settings\n<span class=\"hljs-keyword\">import</span> os\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">upload_view</span>(<span class=\"hljs-params\">request</span>):\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&apos;GET&apos;</span>:\n        <span class=\"hljs-keyword\">return</span> render(request, <span class=\"hljs-string\">&apos;index/upload.html&apos;</span>)\n    <span class=\"hljs-keyword\">elif</span> request.method == <span class=\"hljs-string\">&quot;POST&quot;</span>:\n        a_file = request.FILES[<span class=\"hljs-string\">&apos;myfile&apos;</span>]\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e0a;&#x4f20;&#x6587;&#x4ef6;&#x540d;&#x662f;:&quot;</span>, a_file.name)\n\n        filename =os.path.join(settings.MEDIA_ROOT, a_file.name)\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(filename, <span class=\"hljs-string\">&apos;wb&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            data = a_file.file.read()\n            f.write(data)  \n        <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&quot;&#x63a5;&#x6536;&#x6587;&#x4ef6;:&quot;</span> + a_file.name + <span class=\"hljs-string\">&quot;&#x6210;&#x529f;&quot;</span>)\n    <span class=\"hljs-keyword\">raise</span> Http404\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"523,543"}}],"payload":{"tag":"h2","lines":"472,473"}},{"content":"&#x6587;&#x4ef6;&#x4e0b;&#x8f7d;","children":[{"content":"<pre data-lines=\"550,551\"><code>Django&#x53ef;&#x76f4;&#x63a5;&#x5728;&#x89c6;&#x56fe;&#x51fd;&#x6570;&#x4e2d;&#x751f;&#x6210;**csv**&#x6587;&#x4ef6; &#x5e76;&#x54cd;&#x5e94;&#x7ed9;&#x6d4f;&#x89c8;&#x5668;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"550,551"}},{"content":"<pre data-lines=\"552,568\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> csv\n<span class=\"hljs-keyword\">from</span> django.http <span class=\"hljs-keyword\">import</span> HttpResponse\n<span class=\"hljs-keyword\">from</span> .models <span class=\"hljs-keyword\">import</span> Book\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">make_csv_view</span>(<span class=\"hljs-params\">request</span>):\n    response = HttpResponse(content_type=<span class=\"hljs-string\">&apos;text/csv&apos;</span>)\n    response[<span class=\"hljs-string\">&apos;Content-Disposition&apos;</span>] = <span class=\"hljs-string\">&apos;attachment; filename=&quot;mybook.csv&quot;&apos;</span>\n\tall_book = Book.objects.<span class=\"hljs-built_in\">all</span>()\n    writer = csv.writer(response)\n    writer.writerow([<span class=\"hljs-string\">&apos;id&apos;</span>, <span class=\"hljs-string\">&apos;title&apos;</span>])\n    <span class=\"hljs-keyword\">for</span> b <span class=\"hljs-keyword\">in</span> all_book:    \n    \twriter.writerow([b.<span class=\"hljs-built_in\">id</span>, b.title])\n\n    <span class=\"hljs-keyword\">return</span> response\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"552,568"}},{"content":"<pre data-lines=\"569,572\"><code>- &#x54cd;&#x5e94;&#x83b7;&#x5f97;&#x4e00;&#x4e2a;&#x7279;&#x6b8a;&#x7684;MIME&#x7c7b;&#x578b;*text / csv*&#x3002;&#x8fd9;&#x544a;&#x8bc9;&#x6d4f;&#x89c8;&#x5668;&#x8be5;&#x6587;&#x6863;&#x662f;CSV&#x6587;&#x4ef6;&#xff0c;&#x800c;&#x4e0d;&#x662f;HTML&#x6587;&#x4ef6;\n- &#x54cd;&#x5e94;&#x4f1a;&#x83b7;&#x5f97;&#x4e00;&#x4e2a;&#x989d;&#x5916;&#x7684;`Content-Disposition`&#x6807;&#x5934;&#xff0c;&#x5176;&#x4e2d;&#x5305;&#x542b;CSV&#x6587;&#x4ef6;&#x7684;&#x540d;&#x79f0;&#x3002;&#x5b83;&#x5c06;&#x88ab;&#x6d4f;&#x89c8;&#x5668;&#x7528;&#x4e8e;&#x201c;&#x53e6;&#x5b58;&#x4e3a;...&#x201d;&#x5bf9;&#x8bdd;&#x6846;\n- &#x5bf9;&#x4e8e;CSV&#x6587;&#x4ef6;&#x4e2d;&#x7684;&#x6bcf;&#x4e00;&#x884c;&#xff0c;&#x8c03;&#x7528;`writer.writerow`&#xff0c;&#x4f20;&#x9012;&#x4e00;&#x4e2a;&#x53ef;&#x8fed;&#x4ee3;&#x5bf9;&#x8c61;&#xff0c;&#x5982;&#x5217;&#x8868;&#x6216;&#x5143;&#x7ec4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"569,572"}}],"payload":{"tag":"h2","lines":"548,549"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
