<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"IndexedDB API","children":[{"content":"&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"4,23\"><code>&#x968f;&#x7740;&#x6d4f;&#x89c8;&#x5668;&#x7684;&#x529f;&#x80fd;&#x4e0d;&#x65ad;&#x589e;&#x5f3a;&#xff0c;&#x8d8a;&#x6765;&#x8d8a;&#x591a;&#x7684;&#x7f51;&#x7ad9;&#x5f00;&#x59cb;&#x8003;&#x8651;&#xff0c;&#x5c06;&#x5927;&#x91cf;&#x6570;&#x636e;&#x50a8;&#x5b58;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#xff0c;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x51cf;&#x5c11;&#x4ece;&#x670d;&#x52a1;&#x5668;&#x83b7;&#x53d6;&#x6570;&#x636e;&#xff0c;&#x76f4;&#x63a5;&#x4ece;&#x672c;&#x5730;&#x83b7;&#x53d6;&#x6570;&#x636e;&#x3002;\n\n&#x73b0;&#x6709;&#x7684;&#x6d4f;&#x89c8;&#x5668;&#x6570;&#x636e;&#x50a8;&#x5b58;&#x65b9;&#x6848;&#xff0c;&#x90fd;&#x4e0d;&#x9002;&#x5408;&#x50a8;&#x5b58;&#x5927;&#x91cf;&#x6570;&#x636e;&#xff1a;Cookie &#x7684;&#x5927;&#x5c0f;&#x4e0d;&#x8d85;&#x8fc7; 4KB&#xff0c;&#x4e14;&#x6bcf;&#x6b21;&#x8bf7;&#x6c42;&#x90fd;&#x4f1a;&#x53d1;&#x9001;&#x56de;&#x670d;&#x52a1;&#x5668;&#xff1b;LocalStorage &#x5728; 2.5MB &#x5230; 10MB &#x4e4b;&#x95f4;&#xff08;&#x5404;&#x5bb6;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x540c;&#xff09;&#xff0c;&#x800c;&#x4e14;&#x4e0d;&#x63d0;&#x4f9b;&#x641c;&#x7d22;&#x529f;&#x80fd;&#xff0c;&#x4e0d;&#x80fd;&#x5efa;&#x7acb;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x7d22;&#x5f15;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x9700;&#x8981;&#x4e00;&#x79cd;&#x65b0;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x6848;&#xff0c;&#x8fd9;&#x5c31;&#x662f; IndexedDB &#x8bde;&#x751f;&#x7684;&#x80cc;&#x666f;&#x3002;\n\n&#x901a;&#x4fd7;&#x5730;&#x8bf4;&#xff0c;IndexedDB &#x5c31;&#x662f;&#x6d4f;&#x89c8;&#x5668;&#x63d0;&#x4f9b;&#x7684;&#x672c;&#x5730;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x88ab;&#x7f51;&#x9875;&#x811a;&#x672c;&#x521b;&#x5efa;&#x548c;&#x64cd;&#x4f5c;&#x3002;IndexedDB &#x5141;&#x8bb8;&#x50a8;&#x5b58;&#x5927;&#x91cf;&#x6570;&#x636e;&#xff0c;&#x63d0;&#x4f9b;&#x67e5;&#x627e;&#x63a5;&#x53e3;&#xff0c;&#x8fd8;&#x80fd;&#x5efa;&#x7acb;&#x7d22;&#x5f15;&#x3002;&#x8fd9;&#x4e9b;&#x90fd;&#x662f; LocalStorage &#x6240;&#x4e0d;&#x5177;&#x5907;&#x7684;&#x3002;&#x5c31;&#x6570;&#x636e;&#x5e93;&#x7c7b;&#x578b;&#x800c;&#x8a00;&#xff0c;IndexedDB &#x4e0d;&#x5c5e;&#x4e8e;&#x5173;&#x7cfb;&#x578b;&#x6570;&#x636e;&#x5e93;&#xff08;&#x4e0d;&#x652f;&#x6301; SQL &#x67e5;&#x8be2;&#x8bed;&#x53e5;&#xff09;&#xff0c;&#x66f4;&#x63a5;&#x8fd1; NoSQL &#x6570;&#x636e;&#x5e93;&#x3002;\n\nIndexedDB &#x5177;&#x6709;&#x4ee5;&#x4e0b;&#x7279;&#x70b9;&#x3002;\n\n**&#xff08;1&#xff09;&#x952e;&#x503c;&#x5bf9;&#x50a8;&#x5b58;&#x3002;** IndexedDB &#x5185;&#x90e8;&#x91c7;&#x7528;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff08;object store&#xff09;&#x5b58;&#x653e;&#x6570;&#x636e;&#x3002;&#x6240;&#x6709;&#x7c7b;&#x578b;&#x7684;&#x6570;&#x636e;&#x90fd;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x5b58;&#x5165;&#xff0c;&#x5305;&#x62ec; JavaScript &#x5bf9;&#x8c61;&#x3002;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x4e2d;&#xff0c;&#x6570;&#x636e;&#x4ee5;&#x201c;&#x952e;&#x503c;&#x5bf9;&#x201d;&#x7684;&#x5f62;&#x5f0f;&#x4fdd;&#x5b58;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x90fd;&#x6709;&#x5bf9;&#x5e94;&#x7684;&#x4e3b;&#x952e;&#xff0c;&#x4e3b;&#x952e;&#x662f;&#x72ec;&#x4e00;&#x65e0;&#x4e8c;&#x7684;&#xff0c;&#x4e0d;&#x80fd;&#x6709;&#x91cd;&#x590d;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x3002;\n\n**&#xff08;2&#xff09;&#x5f02;&#x6b65;&#x3002;**  IndexedDB &#x64cd;&#x4f5c;&#x65f6;&#x4e0d;&#x4f1a;&#x9501;&#x6b7b;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x7528;&#x6237;&#x4f9d;&#x7136;&#x53ef;&#x4ee5;&#x8fdb;&#x884c;&#x5176;&#x4ed6;&#x64cd;&#x4f5c;&#xff0c;&#x8fd9;&#x4e0e; LocalStorage &#x5f62;&#x6210;&#x5bf9;&#x6bd4;&#xff0c;&#x540e;&#x8005;&#x7684;&#x64cd;&#x4f5c;&#x662f;&#x540c;&#x6b65;&#x7684;&#x3002;&#x5f02;&#x6b65;&#x8bbe;&#x8ba1;&#x662f;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x5927;&#x91cf;&#x6570;&#x636e;&#x7684;&#x8bfb;&#x5199;&#xff0c;&#x62d6;&#x6162;&#x7f51;&#x9875;&#x7684;&#x8868;&#x73b0;&#x3002;\n\n**&#xff08;3&#xff09;&#x652f;&#x6301;&#x4e8b;&#x52a1;&#x3002;** IndexedDB &#x652f;&#x6301;&#x4e8b;&#x52a1;&#xff08;transaction&#xff09;&#xff0c;&#x8fd9;&#x610f;&#x5473;&#x7740;&#x4e00;&#x7cfb;&#x5217;&#x64cd;&#x4f5c;&#x6b65;&#x9aa4;&#x4e4b;&#x4e2d;&#xff0c;&#x53ea;&#x8981;&#x6709;&#x4e00;&#x6b65;&#x5931;&#x8d25;&#xff0c;&#x6574;&#x4e2a;&#x4e8b;&#x52a1;&#x5c31;&#x90fd;&#x53d6;&#x6d88;&#xff0c;&#x6570;&#x636e;&#x5e93;&#x56de;&#x6eda;&#x5230;&#x4e8b;&#x52a1;&#x53d1;&#x751f;&#x4e4b;&#x524d;&#x7684;&#x72b6;&#x6001;&#xff0c;&#x4e0d;&#x5b58;&#x5728;&#x53ea;&#x6539;&#x5199;&#x4e00;&#x90e8;&#x5206;&#x6570;&#x636e;&#x7684;&#x60c5;&#x51b5;&#x3002;\n\n**&#xff08;4&#xff09;&#x540c;&#x6e90;&#x9650;&#x5236;&#x3002;** IndexedDB &#x53d7;&#x5230;&#x540c;&#x6e90;&#x9650;&#x5236;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#x5bf9;&#x5e94;&#x521b;&#x5efa;&#x5b83;&#x7684;&#x57df;&#x540d;&#x3002;&#x7f51;&#x9875;&#x53ea;&#x80fd;&#x8bbf;&#x95ee;&#x81ea;&#x8eab;&#x57df;&#x540d;&#x4e0b;&#x7684;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x800c;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#x8de8;&#x57df;&#x7684;&#x6570;&#x636e;&#x5e93;&#x3002;\n\n**&#xff08;5&#xff09;&#x50a8;&#x5b58;&#x7a7a;&#x95f4;&#x5927;&#x3002;** IndexedDB &#x7684;&#x50a8;&#x5b58;&#x7a7a;&#x95f4;&#x6bd4; LocalStorage &#x5927;&#x5f97;&#x591a;&#xff0c;&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x4e0d;&#x5c11;&#x4e8e; 250MB&#xff0c;&#x751a;&#x81f3;&#x6ca1;&#x6709;&#x4e0a;&#x9650;&#x3002;\n\n**&#xff08;6&#xff09;&#x652f;&#x6301;&#x4e8c;&#x8fdb;&#x5236;&#x50a8;&#x5b58;&#x3002;** IndexedDB &#x4e0d;&#x4ec5;&#x53ef;&#x4ee5;&#x50a8;&#x5b58;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8fd8;&#x53ef;&#x4ee5;&#x50a8;&#x5b58;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#xff08;ArrayBuffer &#x5bf9;&#x8c61;&#x548c; Blob &#x5bf9;&#x8c61;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,23"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"&#x57fa;&#x672c;&#x6982;&#x5ff5;","children":[{"content":"<pre data-lines=\"26,51\"><code>IndexedDB &#x662f;&#x4e00;&#x4e2a;&#x6bd4;&#x8f83;&#x590d;&#x6742;&#x7684; API&#xff0c;&#x6d89;&#x53ca;&#x4e0d;&#x5c11;&#x6982;&#x5ff5;&#x3002;&#x5b83;&#x628a;&#x4e0d;&#x540c;&#x7684;&#x5b9e;&#x4f53;&#xff0c;&#x62bd;&#x8c61;&#x6210;&#x4e00;&#x4e2a;&#x4e2a;&#x5bf9;&#x8c61;&#x63a5;&#x53e3;&#x3002;&#x5b66;&#x4e60;&#x8fd9;&#x4e2a; API&#xff0c;&#x5c31;&#x662f;&#x5b66;&#x4e60;&#x5b83;&#x7684;&#x5404;&#x79cd;&#x5bf9;&#x8c61;&#x63a5;&#x53e3;&#x3002;\n\n- &#x6570;&#x636e;&#x5e93;&#xff1a;IDBDatabase &#x5bf9;&#x8c61;\n- &#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff1a;IDBObjectStore &#x5bf9;&#x8c61;\n- &#x7d22;&#x5f15;&#xff1a; IDBIndex &#x5bf9;&#x8c61;\n- &#x4e8b;&#x52a1;&#xff1a; IDBTransaction &#x5bf9;&#x8c61;\n- &#x64cd;&#x4f5c;&#x8bf7;&#x6c42;&#xff1a;IDBRequest &#x5bf9;&#x8c61;\n- &#x6307;&#x9488;&#xff1a; IDBCursor &#x5bf9;&#x8c61;\n- &#x4e3b;&#x952e;&#x96c6;&#x5408;&#xff1a;IDBKeyRange &#x5bf9;&#x8c61;\n\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e9b;&#x4e3b;&#x8981;&#x7684;&#x6982;&#x5ff5;&#x3002;\n\n**&#xff08;1&#xff09;&#x6570;&#x636e;&#x5e93;**\n\n&#x6570;&#x636e;&#x5e93;&#x662f;&#x4e00;&#x7cfb;&#x5217;&#x76f8;&#x5173;&#x6570;&#x636e;&#x7684;&#x5bb9;&#x5668;&#x3002;&#x6bcf;&#x4e2a;&#x57df;&#x540d;&#xff08;&#x4e25;&#x683c;&#x7684;&#x8bf4;&#xff0c;&#x662f;&#x534f;&#x8bae; + &#x57df;&#x540d; + &#x7aef;&#x53e3;&#xff09;&#x90fd;&#x53ef;&#x4ee5;&#x65b0;&#x5efa;&#x4efb;&#x610f;&#x591a;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#x3002;\n\nIndexedDB &#x6570;&#x636e;&#x5e93;&#x6709;&#x7248;&#x672c;&#x7684;&#x6982;&#x5ff5;&#x3002;&#x540c;&#x4e00;&#x4e2a;&#x65f6;&#x523b;&#xff0c;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x7248;&#x672c;&#x7684;&#x6570;&#x636e;&#x5e93;&#x5b58;&#x5728;&#x3002;&#x5982;&#x679c;&#x8981;&#x4fee;&#x6539;&#x6570;&#x636e;&#x5e93;&#x7ed3;&#x6784;&#xff08;&#x65b0;&#x589e;&#x6216;&#x5220;&#x9664;&#x8868;&#x3001;&#x7d22;&#x5f15;&#x6216;&#x8005;&#x4e3b;&#x952e;&#xff09;&#xff0c;&#x53ea;&#x80fd;&#x901a;&#x8fc7;&#x5347;&#x7ea7;&#x6570;&#x636e;&#x5e93;&#x7248;&#x672c;&#x5b8c;&#x6210;&#x3002;\n\n**&#xff08;2&#xff09;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;**\n\n&#x6bcf;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#x5305;&#x542b;&#x82e5;&#x5e72;&#x4e2a;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff08;object store&#xff09;&#x3002;&#x5b83;&#x7c7b;&#x4f3c;&#x4e8e;&#x5173;&#x7cfb;&#x578b;&#x6570;&#x636e;&#x5e93;&#x7684;&#x8868;&#x683c;&#x3002;\n\n**&#xff08;3&#xff09;&#x6570;&#x636e;&#x8bb0;&#x5f55;**\n\n&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x4fdd;&#x5b58;&#x7684;&#x662f;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;&#x6bcf;&#x6761;&#x8bb0;&#x5f55;&#x7c7b;&#x4f3c;&#x4e8e;&#x5173;&#x7cfb;&#x578b;&#x6570;&#x636e;&#x5e93;&#x7684;&#x884c;&#xff0c;&#x4f46;&#x662f;&#x53ea;&#x6709;&#x4e3b;&#x952e;&#x548c;&#x6570;&#x636e;&#x4f53;&#x4e24;&#x90e8;&#x5206;&#x3002;&#x4e3b;&#x952e;&#x7528;&#x6765;&#x5efa;&#x7acb;&#x9ed8;&#x8ba4;&#x7684;&#x7d22;&#x5f15;&#xff0c;&#x5fc5;&#x987b;&#x662f;&#x4e0d;&#x540c;&#x7684;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x62a5;&#x9519;&#x3002;&#x4e3b;&#x952e;&#x53ef;&#x4ee5;&#x662f;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x91cc;&#x9762;&#x7684;&#x4e00;&#x4e2a;&#x5c5e;&#x6027;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x4e3a;&#x4e00;&#x4e2a;&#x9012;&#x589e;&#x7684;&#x6574;&#x6570;&#x7f16;&#x53f7;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"26,51"}},{"content":"<pre data-lines=\"52,55\"><code class=\"language-javascript\">{ <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">text</span>: <span class=\"hljs-string\">&apos;foo&apos;</span> }\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"52,55"}},{"content":"<pre data-lines=\"56,67\"><code>&#x4e0a;&#x9762;&#x7684;&#x5bf9;&#x8c61;&#x4e2d;&#xff0c;`id`&#x5c5e;&#x6027;&#x53ef;&#x4ee5;&#x5f53;&#x4f5c;&#x4e3b;&#x952e;&#x3002;\n\n&#x6570;&#x636e;&#x4f53;&#x53ef;&#x4ee5;&#x662f;&#x4efb;&#x610f;&#x6570;&#x636e;&#x7c7b;&#x578b;&#xff0c;&#x4e0d;&#x9650;&#x4e8e;&#x5bf9;&#x8c61;&#x3002;\n\n**&#xff08;4&#xff09;&#x7d22;&#x5f15;**\n\n&#x4e3a;&#x4e86;&#x52a0;&#x901f;&#x6570;&#x636e;&#x7684;&#x68c0;&#x7d22;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x91cc;&#x9762;&#xff0c;&#x4e3a;&#x4e0d;&#x540c;&#x7684;&#x5c5e;&#x6027;&#x5efa;&#x7acb;&#x7d22;&#x5f15;&#x3002;\n\n**&#xff08;5&#xff09;&#x4e8b;&#x52a1;**\n\n&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x7684;&#x8bfb;&#x5199;&#x548c;&#x5220;&#x6539;&#xff0c;&#x90fd;&#x8981;&#x901a;&#x8fc7;&#x4e8b;&#x52a1;&#x5b8c;&#x6210;&#x3002;&#x4e8b;&#x52a1;&#x5bf9;&#x8c61;&#x63d0;&#x4f9b;`error`&#x3001;`abort`&#x548c;`complete`&#x4e09;&#x4e2a;&#x4e8b;&#x4ef6;&#xff0c;&#x7528;&#x6765;&#x76d1;&#x542c;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"56,67"}}],"payload":{"tag":"h2","lines":"24,25"}},{"content":"&#x64cd;&#x4f5c;&#x6d41;&#x7a0b;","children":[{"content":"&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;","children":[{"content":"<pre data-lines=\"74,75\"><code>&#x4f7f;&#x7528; IndexedDB &#x7684;&#x7b2c;&#x4e00;&#x6b65;&#x662f;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x4f7f;&#x7528;`indexedDB.open()`&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"74,75"}},{"content":"<pre data-lines=\"76,79\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> request = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">open</span>(databaseName, version);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,79"}},{"content":"<pre data-lines=\"80,87\"><code>&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8868;&#x793a;&#x6570;&#x636e;&#x5e93;&#x7684;&#x540d;&#x5b57;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x7684;&#x6570;&#x636e;&#x5e93;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5c31;&#x4f1a;&#x65b0;&#x5efa;&#x6570;&#x636e;&#x5e93;&#x3002;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x6574;&#x6570;&#xff0c;&#x8868;&#x793a;&#x6570;&#x636e;&#x5e93;&#x7684;&#x7248;&#x672c;&#x3002;&#x5982;&#x679c;&#x7701;&#x7565;&#xff0c;&#x6253;&#x5f00;&#x5df2;&#x6709;&#x6570;&#x636e;&#x5e93;&#x65f6;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;&#x5f53;&#x524d;&#x7248;&#x672c;&#xff1b;&#x65b0;&#x5efa;&#x6570;&#x636e;&#x5e93;&#x65f6;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;`1`&#x3002;\n\n`indexedDB.open()`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x901a;&#x8fc7;&#x4e09;&#x79cd;&#x4e8b;&#x4ef6;`error`&#x3001;`success`&#x3001;`upgradeneeded`&#xff0c;&#x5904;&#x7406;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x7684;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x3002;\n\n**&#xff08;1&#xff09;error &#x4e8b;&#x4ef6;**\n\n`error`&#x4e8b;&#x4ef6;&#x8868;&#x793a;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x5931;&#x8d25;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"80,87"}},{"content":"<pre data-lines=\"88,93\"><code class=\"language-javascript\">request.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x5e93;&#x6253;&#x5f00;&#x62a5;&#x9519;&apos;</span>);\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"88,93"}},{"content":"<pre data-lines=\"94,97\"><code>**&#xff08;2&#xff09;success &#x4e8b;&#x4ef6;**\n\n`success`&#x4e8b;&#x4ef6;&#x8868;&#x793a;&#x6210;&#x529f;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"94,97"}},{"content":"<pre data-lines=\"98,106\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> db;\n\nrequest.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  db = request.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x5e93;&#x6253;&#x5f00;&#x6210;&#x529f;&apos;</span>);\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"98,106"}},{"content":"<pre data-lines=\"107,112\"><code>&#x8fd9;&#x65f6;&#xff0c;&#x901a;&#x8fc7;`request`&#x5bf9;&#x8c61;&#x7684;`result`&#x5c5e;&#x6027;&#x62ff;&#x5230;&#x6570;&#x636e;&#x5e93;&#x5bf9;&#x8c61;&#x3002;\n\n**&#xff08;3&#xff09;upgradeneeded &#x4e8b;&#x4ef6;**\n\n&#x5982;&#x679c;&#x6307;&#x5b9a;&#x7684;&#x7248;&#x672c;&#x53f7;&#xff0c;&#x5927;&#x4e8e;&#x6570;&#x636e;&#x5e93;&#x7684;&#x5b9e;&#x9645;&#x7248;&#x672c;&#x53f7;&#xff0c;&#x5c31;&#x4f1a;&#x53d1;&#x751f;&#x6570;&#x636e;&#x5e93;&#x5347;&#x7ea7;&#x4e8b;&#x4ef6;`upgradeneeded`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"107,112"}},{"content":"<pre data-lines=\"113,120\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> db;\n\nrequest.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  db = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"113,120"}},{"content":"<pre data-lines=\"121,122\"><code>&#x8fd9;&#x65f6;&#x901a;&#x8fc7;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x7684;`target.result`&#x5c5e;&#x6027;&#xff0c;&#x62ff;&#x5230;&#x6570;&#x636e;&#x5e93;&#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"121,122"}}],"payload":{"tag":"h3","lines":"72,73"}},{"content":"&#x65b0;&#x5efa;&#x6570;&#x636e;&#x5e93;","children":[{"content":"<pre data-lines=\"125,128\"><code>&#x65b0;&#x5efa;&#x6570;&#x636e;&#x5e93;&#x4e0e;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x662f;&#x540c;&#x4e00;&#x4e2a;&#x64cd;&#x4f5c;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x7684;&#x6570;&#x636e;&#x5e93;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5c31;&#x4f1a;&#x65b0;&#x5efa;&#x3002;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x5728;&#x4e8e;&#xff0c;&#x540e;&#x7eed;&#x7684;&#x64cd;&#x4f5c;&#x4e3b;&#x8981;&#x5728;`upgradeneeded`&#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x91cc;&#x9762;&#x5b8c;&#x6210;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x65f6;&#x7248;&#x672c;&#x4ece;&#x65e0;&#x5230;&#x6709;&#xff0c;&#x6240;&#x4ee5;&#x4f1a;&#x89e6;&#x53d1;&#x8fd9;&#x4e2a;&#x4e8b;&#x4ef6;&#x3002;\n\n&#x901a;&#x5e38;&#xff0c;&#x65b0;&#x5efa;&#x6570;&#x636e;&#x5e93;&#x4ee5;&#x540e;&#xff0c;&#x7b2c;&#x4e00;&#x4ef6;&#x4e8b;&#x662f;&#x65b0;&#x5efa;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff08;&#x5373;&#x65b0;&#x5efa;&#x8868;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"125,128"}},{"content":"<pre data-lines=\"129,135\"><code class=\"language-javascript\">request.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n  db = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">var</span> objectStore = db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>, { <span class=\"hljs-attr\">keyPath</span>: <span class=\"hljs-string\">&apos;id&apos;</span> });\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"129,135"}},{"content":"<pre data-lines=\"136,139\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6570;&#x636e;&#x5e93;&#x65b0;&#x5efa;&#x6210;&#x529f;&#x4ee5;&#x540e;&#xff0c;&#x65b0;&#x589e;&#x4e00;&#x5f20;&#x53eb;&#x505a;`person`&#x7684;&#x8868;&#x683c;&#xff0c;&#x4e3b;&#x952e;&#x662f;`id`&#x3002;\n\n&#x66f4;&#x597d;&#x7684;&#x5199;&#x6cd5;&#x662f;&#x5148;&#x5224;&#x65ad;&#x4e00;&#x4e0b;&#xff0c;&#x8fd9;&#x5f20;&#x8868;&#x683c;&#x662f;&#x5426;&#x5b58;&#x5728;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x5b58;&#x5728;&#x518d;&#x65b0;&#x5efa;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"136,139"}},{"content":"<pre data-lines=\"140,149\"><code class=\"language-javascript\">request.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  db = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">var</span> objectStore;\n  <span class=\"hljs-keyword\">if</span> (!db.<span class=\"hljs-property\">objectStoreNames</span>.<span class=\"hljs-title function_\">contains</span>(<span class=\"hljs-string\">&apos;person&apos;</span>)) {\n    objectStore = db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>, { <span class=\"hljs-attr\">keyPath</span>: <span class=\"hljs-string\">&apos;id&apos;</span> });\n  }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"140,149"}},{"content":"<pre data-lines=\"150,153\"><code>&#x4e3b;&#x952e;&#xff08;key&#xff09;&#x662f;&#x9ed8;&#x8ba4;&#x5efa;&#x7acb;&#x7d22;&#x5f15;&#x7684;&#x5c5e;&#x6027;&#x3002;&#x6bd4;&#x5982;&#xff0c;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x662f;`{ id: 1, name: &apos;&#x5f20;&#x4e09;&apos; }`&#xff0c;&#x90a3;&#x4e48;`id`&#x5c5e;&#x6027;&#x53ef;&#x4ee5;&#x4f5c;&#x4e3a;&#x4e3b;&#x952e;&#x3002;&#x4e3b;&#x952e;&#x4e5f;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x4e3a;&#x4e0b;&#x4e00;&#x5c42;&#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x6bd4;&#x5982;`{ foo: { bar: &apos;baz&apos; } }`&#x7684;`foo.bar`&#x4e5f;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x4e3a;&#x4e3b;&#x952e;&#x3002;\n\n&#x5982;&#x679c;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x91cc;&#x9762;&#x6ca1;&#x6709;&#x5408;&#x9002;&#x4f5c;&#x4e3a;&#x4e3b;&#x952e;&#x7684;&#x5c5e;&#x6027;&#xff0c;&#x90a3;&#x4e48;&#x53ef;&#x4ee5;&#x8ba9; IndexedDB &#x81ea;&#x52a8;&#x751f;&#x6210;&#x4e3b;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,153"}},{"content":"<pre data-lines=\"154,160\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> objectStore = db.<span class=\"hljs-title function_\">createObjectStore</span>(\n  <span class=\"hljs-string\">&apos;person&apos;</span>,\n  { <span class=\"hljs-attr\">autoIncrement</span>: <span class=\"hljs-literal\">true</span> }\n);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"154,160"}},{"content":"<pre data-lines=\"161,164\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#x4e3a;&#x4e00;&#x4e2a;&#x9012;&#x589e;&#x7684;&#x6574;&#x6570;&#x3002;\n\n&#x65b0;&#x5efa;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x4ee5;&#x540e;&#xff0c;&#x4e0b;&#x4e00;&#x6b65;&#x53ef;&#x4ee5;&#x65b0;&#x5efa;&#x7d22;&#x5f15;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"161,164"}},{"content":"<pre data-lines=\"165,173\"><code class=\"language-javascript\">request.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n  db = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">var</span> objectStore = db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>, { <span class=\"hljs-attr\">keyPath</span>: <span class=\"hljs-string\">&apos;id&apos;</span> });\n  objectStore.<span class=\"hljs-title function_\">createIndex</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;name&apos;</span>, { <span class=\"hljs-attr\">unique</span>: <span class=\"hljs-literal\">false</span> });\n  objectStore.<span class=\"hljs-title function_\">createIndex</span>(<span class=\"hljs-string\">&apos;email&apos;</span>, <span class=\"hljs-string\">&apos;email&apos;</span>, { <span class=\"hljs-attr\">unique</span>: <span class=\"hljs-literal\">true</span> });\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"165,173"}},{"content":"<pre data-lines=\"174,175\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`IDBObject.createIndex()`&#x7684;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x5206;&#x522b;&#x4e3a;&#x7d22;&#x5f15;&#x540d;&#x79f0;&#x3001;&#x7d22;&#x5f15;&#x6240;&#x5728;&#x7684;&#x5c5e;&#x6027;&#x3001;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;&#xff08;&#x8bf4;&#x660e;&#x8be5;&#x5c5e;&#x6027;&#x662f;&#x5426;&#x5305;&#x542b;&#x91cd;&#x590d;&#x7684;&#x503c;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"174,175"}}],"payload":{"tag":"h3","lines":"123,124"}},{"content":"&#x65b0;&#x589e;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"178,179\"><code>&#x65b0;&#x589e;&#x6570;&#x636e;&#x6307;&#x7684;&#x662f;&#x5411;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x5199;&#x5165;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;&#x8fd9;&#x9700;&#x8981;&#x901a;&#x8fc7;&#x4e8b;&#x52a1;&#x5b8c;&#x6210;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"178,179"}},{"content":"<pre data-lines=\"180,197\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">add</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> request = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;person&apos;</span>], <span class=\"hljs-string\">&apos;readwrite&apos;</span>)\n    .<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>)\n    .<span class=\"hljs-title function_\">add</span>({ <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;&#x5f20;&#x4e09;&apos;</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">24</span>, <span class=\"hljs-attr\">email</span>: <span class=\"hljs-string\">&apos;zhangsan@example.com&apos;</span> });\n\n  request.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x5199;&#x5165;&#x6210;&#x529f;&apos;</span>);\n  };\n\n  request.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x5199;&#x5165;&#x5931;&#x8d25;&apos;</span>);\n  }\n}\n\n<span class=\"hljs-title function_\">add</span>();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"180,197"}},{"content":"<pre data-lines=\"198,201\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5199;&#x5165;&#x6570;&#x636e;&#x9700;&#x8981;&#x65b0;&#x5efa;&#x4e00;&#x4e2a;&#x4e8b;&#x52a1;&#x3002;&#x65b0;&#x5efa;&#x65f6;&#x5fc5;&#x987b;&#x6307;&#x5b9a;&#x8868;&#x683c;&#x540d;&#x79f0;&#x548c;&#x64cd;&#x4f5c;&#x6a21;&#x5f0f;&#xff08;&#x201c;&#x53ea;&#x8bfb;&#x201d;&#x6216;&#x201c;&#x8bfb;&#x5199;&#x201d;&#xff09;&#x3002;&#x65b0;&#x5efa;&#x4e8b;&#x52a1;&#x4ee5;&#x540e;&#xff0c;&#x901a;&#x8fc7;`IDBTransaction.objectStore(name)`&#x65b9;&#x6cd5;&#xff0c;&#x62ff;&#x5230; IDBObjectStore &#x5bf9;&#x8c61;&#xff0c;&#x518d;&#x901a;&#x8fc7;&#x8868;&#x683c;&#x5bf9;&#x8c61;&#x7684;`add()`&#x65b9;&#x6cd5;&#xff0c;&#x5411;&#x8868;&#x683c;&#x5199;&#x5165;&#x4e00;&#x6761;&#x8bb0;&#x5f55;&#x3002;\n\n&#x5199;&#x5165;&#x64cd;&#x4f5c;&#x662f;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x901a;&#x8fc7;&#x76d1;&#x542c;&#x8fde;&#x63a5;&#x5bf9;&#x8c61;&#x7684;`success`&#x4e8b;&#x4ef6;&#x548c;`error`&#x4e8b;&#x4ef6;&#xff0c;&#x4e86;&#x89e3;&#x662f;&#x5426;&#x5199;&#x5165;&#x6210;&#x529f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"198,201"}}],"payload":{"tag":"h3","lines":"176,177"}},{"content":"&#x8bfb;&#x53d6;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"204,205\"><code>&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x4e5f;&#x662f;&#x901a;&#x8fc7;&#x4e8b;&#x52a1;&#x5b8c;&#x6210;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"204,205"}},{"content":"<pre data-lines=\"206,229\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">read</span>(<span class=\"hljs-params\"></span>) {\n   <span class=\"hljs-keyword\">var</span> transaction = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;person&apos;</span>]);\n   <span class=\"hljs-keyword\">var</span> objectStore = transaction.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>);\n   <span class=\"hljs-keyword\">var</span> request = objectStore.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-number\">1</span>);\n\n   request.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n     <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x4e8b;&#x52a1;&#x5931;&#x8d25;&apos;</span>);\n   };\n\n   request.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"> event</span>) {\n      <span class=\"hljs-keyword\">if</span> (request.<span class=\"hljs-property\">result</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Name: &apos;</span> + request.<span class=\"hljs-property\">result</span>.<span class=\"hljs-property\">name</span>);\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Age: &apos;</span> + request.<span class=\"hljs-property\">result</span>.<span class=\"hljs-property\">age</span>);\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Email: &apos;</span> + request.<span class=\"hljs-property\">result</span>.<span class=\"hljs-property\">email</span>);\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x672a;&#x83b7;&#x5f97;&#x6570;&#x636e;&#x8bb0;&#x5f55;&apos;</span>);\n      }\n   };\n}\n\n<span class=\"hljs-title function_\">read</span>();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"206,229"}},{"content":"<pre data-lines=\"230,231\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`objectStore.get()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#xff0c;&#x53c2;&#x6570;&#x662f;&#x4e3b;&#x952e;&#x7684;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"230,231"}}],"payload":{"tag":"h3","lines":"202,203"}},{"content":"&#x904d;&#x5386;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"234,235\"><code>&#x904d;&#x5386;&#x6570;&#x636e;&#x8868;&#x683c;&#x7684;&#x6240;&#x6709;&#x8bb0;&#x5f55;&#xff0c;&#x8981;&#x4f7f;&#x7528;&#x6307;&#x9488;&#x5bf9;&#x8c61; IDBCursor&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"234,235"}},{"content":"<pre data-lines=\"236,257\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">readAll</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> objectStore = db.<span class=\"hljs-title function_\">transaction</span>(<span class=\"hljs-string\">&apos;person&apos;</span>).<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>);\n\n   objectStore.<span class=\"hljs-title function_\">openCursor</span>().<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n     <span class=\"hljs-keyword\">var</span> cursor = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n\n     <span class=\"hljs-keyword\">if</span> (cursor) {\n       <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Id: &apos;</span> + cursor.<span class=\"hljs-property\">key</span>);\n       <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Name: &apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">name</span>);\n       <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Age: &apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">age</span>);\n       <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Email: &apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">email</span>);\n       cursor.<span class=\"hljs-title function_\">continue</span>();\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6ca1;&#x6709;&#x66f4;&#x591a;&#x6570;&#x636e;&#x4e86;&#xff01;&apos;</span>);\n    }\n  };\n}\n\n<span class=\"hljs-title function_\">readAll</span>();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,257"}},{"content":"<pre data-lines=\"258,259\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x65b0;&#x5efa;&#x6307;&#x9488;&#x5bf9;&#x8c61;&#x7684;`openCursor()`&#x65b9;&#x6cd5;&#x662f;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x6240;&#x4ee5;&#x8981;&#x76d1;&#x542c;`success`&#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"258,259"}}],"payload":{"tag":"h3","lines":"232,233"}},{"content":"&#x66f4;&#x65b0;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"262,263\"><code>&#x66f4;&#x65b0;&#x6570;&#x636e;&#x8981;&#x4f7f;&#x7528;`IDBObject.put()`&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"262,263"}},{"content":"<pre data-lines=\"264,281\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">update</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> request = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;person&apos;</span>], <span class=\"hljs-string\">&apos;readwrite&apos;</span>)\n    .<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>)\n    .<span class=\"hljs-title function_\">put</span>({ <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;&#x674e;&#x56db;&apos;</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">35</span>, <span class=\"hljs-attr\">email</span>: <span class=\"hljs-string\">&apos;lisi@example.com&apos;</span> });\n\n  request.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x66f4;&#x65b0;&#x6210;&#x529f;&apos;</span>);\n  };\n\n  request.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x66f4;&#x65b0;&#x5931;&#x8d25;&apos;</span>);\n  }\n}\n\n<span class=\"hljs-title function_\">update</span>();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"264,281"}},{"content":"<pre data-lines=\"282,283\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`put()`&#x65b9;&#x6cd5;&#x81ea;&#x52a8;&#x66f4;&#x65b0;&#x4e86;&#x4e3b;&#x952e;&#x4e3a;`1`&#x7684;&#x8bb0;&#x5f55;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"282,283"}}],"payload":{"tag":"h3","lines":"260,261"}},{"content":"&#x5220;&#x9664;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"286,287\"><code>`IDBObjectStore.delete()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x5220;&#x9664;&#x8bb0;&#x5f55;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"286,287"}},{"content":"<pre data-lines=\"288,301\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">remove</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> request = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;person&apos;</span>], <span class=\"hljs-string\">&apos;readwrite&apos;</span>)\n    .<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>)\n    .<span class=\"hljs-title function_\">delete</span>(<span class=\"hljs-number\">1</span>);\n\n  request.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;&#x6570;&#x636e;&#x5220;&#x9664;&#x6210;&#x529f;&apos;</span>);\n  };\n}\n\n<span class=\"hljs-title function_\">remove</span>();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"288,301"}}],"payload":{"tag":"h3","lines":"284,285"}},{"content":"&#x4f7f;&#x7528;&#x7d22;&#x5f15;","children":[{"content":"<pre data-lines=\"304,307\"><code>&#x7d22;&#x5f15;&#x7684;&#x610f;&#x4e49;&#x5728;&#x4e8e;&#xff0c;&#x53ef;&#x4ee5;&#x8ba9;&#x4f60;&#x641c;&#x7d22;&#x4efb;&#x610f;&#x5b57;&#x6bb5;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x4ece;&#x4efb;&#x610f;&#x5b57;&#x6bb5;&#x62ff;&#x5230;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x5efa;&#x7acb;&#x7d22;&#x5f15;&#xff0c;&#x9ed8;&#x8ba4;&#x53ea;&#x80fd;&#x641c;&#x7d22;&#x4e3b;&#x952e;&#xff08;&#x5373;&#x4ece;&#x4e3b;&#x952e;&#x53d6;&#x503c;&#xff09;&#x3002;\n\n&#x5047;&#x5b9a;&#x65b0;&#x5efa;&#x8868;&#x683c;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5bf9;`name`&#x5b57;&#x6bb5;&#x5efa;&#x7acb;&#x4e86;&#x7d22;&#x5f15;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"304,307"}},{"content":"<pre data-lines=\"308,311\"><code class=\"language-javascript\">objectStore.<span class=\"hljs-title function_\">createIndex</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;name&apos;</span>, { <span class=\"hljs-attr\">unique</span>: <span class=\"hljs-literal\">false</span> });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"308,311"}},{"content":"<pre data-lines=\"312,313\"><code>&#x73b0;&#x5728;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x4ece;`name`&#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"312,313"}},{"content":"<pre data-lines=\"314,329\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> transaction = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;person&apos;</span>], <span class=\"hljs-string\">&apos;readonly&apos;</span>);\n<span class=\"hljs-keyword\">var</span> store = transaction.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;person&apos;</span>);\n<span class=\"hljs-keyword\">var</span> index = store.<span class=\"hljs-title function_\">index</span>(<span class=\"hljs-string\">&apos;name&apos;</span>);\n<span class=\"hljs-keyword\">var</span> request = index.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;&#x674e;&#x56db;&apos;</span>);\n\nrequest.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-keyword\">var</span> result = e.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">if</span> (result) {\n    <span class=\"hljs-comment\">// ...</span>\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// ...</span>\n  }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"314,329"}}],"payload":{"tag":"h3","lines":"302,303"}}],"payload":{"tag":"h2","lines":"68,69"}},{"content":"indexedDB &#x5bf9;&#x8c61;","children":[{"content":"indexedDB.open()","children":[{"content":"<pre data-lines=\"336,337\"><code>`indexedDB.open()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x3002;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x4f46;&#x662f;&#x4f1a;&#x7acb;&#x523b;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBOpenDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"336,337"}},{"content":"<pre data-lines=\"338,341\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> openRequest = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&apos;test&apos;</span>, <span class=\"hljs-number\">1</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"338,341"}},{"content":"<pre data-lines=\"342,356\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8868;&#x793a;&#xff0c;&#x6253;&#x5f00;&#x4e00;&#x4e2a;&#x540d;&#x4e3a;`test`&#x3001;&#x7248;&#x672c;&#x4e3a;`1`&#x7684;&#x6570;&#x636e;&#x5e93;&#x3002;&#x5982;&#x679c;&#x8be5;&#x6570;&#x636e;&#x5e93;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5219;&#x4f1a;&#x65b0;&#x5efa;&#x8be5;&#x6570;&#x636e;&#x5e93;&#x3002;\n\n`open()`&#x65b9;&#x6cd5;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x6570;&#x636e;&#x5e93;&#x540d;&#x79f0;&#xff0c;&#x683c;&#x5f0f;&#x4e3a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4e0d;&#x53ef;&#x7701;&#x7565;&#xff1b;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x6570;&#x636e;&#x5e93;&#x7248;&#x672c;&#xff0c;&#x662f;&#x4e00;&#x4e2a;&#x5927;&#x4e8e;`0`&#x7684;&#x6b63;&#x6574;&#x6570;&#xff08;`0`&#x5c06;&#x62a5;&#x9519;&#xff09;&#xff0c;&#x5982;&#x679c;&#x8be5;&#x53c2;&#x6570;&#x5927;&#x4e8e;&#x5f53;&#x524d;&#x7248;&#x672c;&#xff0c;&#x4f1a;&#x89e6;&#x53d1;&#x6570;&#x636e;&#x5e93;&#x5347;&#x7ea7;&#x3002;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x7701;&#x7565;&#xff0c;&#x5982;&#x679c;&#x6570;&#x636e;&#x5e93;&#x5df2;&#x5b58;&#x5728;&#xff0c;&#x5c06;&#x6253;&#x5f00;&#x5f53;&#x524d;&#x7248;&#x672c;&#x7684;&#x6570;&#x636e;&#x5e93;&#xff1b;&#x5982;&#x679c;&#x6570;&#x636e;&#x5e93;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5c06;&#x521b;&#x5efa;&#x8be5;&#x7248;&#x672c;&#x7684;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x9ed8;&#x8ba4;&#x7248;&#x672c;&#x4e3a;`1`&#x3002;\n\n&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x662f;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x901a;&#x8fc7;&#x5404;&#x79cd;&#x4e8b;&#x4ef6;&#x901a;&#x77e5;&#x5ba2;&#x6237;&#x7aef;&#x3002;&#x4e0b;&#x9762;&#x662f;&#x6709;&#x53ef;&#x80fd;&#x89e6;&#x53d1;&#x7684;4&#x79cd;&#x4e8b;&#x4ef6;&#x3002;\n\n- **success**&#xff1a;&#x6253;&#x5f00;&#x6210;&#x529f;&#x3002;\n- **error**&#xff1a;&#x6253;&#x5f00;&#x5931;&#x8d25;&#x3002;\n- **upgradeneeded**&#xff1a;&#x7b2c;&#x4e00;&#x6b21;&#x6253;&#x5f00;&#x8be5;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x6216;&#x8005;&#x6570;&#x636e;&#x5e93;&#x7248;&#x672c;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x3002;\n- **blocked**&#xff1a;&#x4e0a;&#x4e00;&#x6b21;&#x7684;&#x6570;&#x636e;&#x5e93;&#x8fde;&#x63a5;&#x8fd8;&#x672a;&#x5173;&#x95ed;&#x3002;\n\n&#x7b2c;&#x4e00;&#x6b21;&#x6253;&#x5f00;&#x6570;&#x636e;&#x5e93;&#x65f6;&#xff0c;&#x4f1a;&#x5148;&#x89e6;&#x53d1;`upgradeneeded`&#x4e8b;&#x4ef6;&#xff0c;&#x7136;&#x540e;&#x89e6;&#x53d1;`success`&#x4e8b;&#x4ef6;&#x3002;\n\n&#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684;&#x9700;&#x8981;&#xff0c;&#x5bf9;&#x4e0a;&#x9762;4&#x79cd;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"342,356"}},{"content":"<pre data-lines=\"357,375\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> openRequest = indexedDB.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&apos;test&apos;</span>, <span class=\"hljs-number\">1</span>);\n<span class=\"hljs-keyword\">var</span> db;\n\nopenRequest.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Upgrading...&apos;</span>);\n}\n\nopenRequest.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Success!&apos;</span>);\n  db = openRequest.<span class=\"hljs-property\">result</span>;\n}\n\nopenRequest.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Error&apos;</span>);\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(e);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"357,375"}},{"content":"<pre data-lines=\"376,377\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x6709;&#x4e24;&#x4e2a;&#x5730;&#x65b9;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x3002;&#x9996;&#x5148;&#xff0c;`open()`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff08;IDBOpenDBRequest&#xff09;&#xff0c;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x5c31;&#x5b9a;&#x4e49;&#x5728;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x4e0a;&#x9762;&#x3002;&#x5176;&#x6b21;&#xff0c;`success`&#x4e8b;&#x4ef6;&#x53d1;&#x751f;&#x540e;&#xff0c;&#x4ece;`openRequest.result`&#x5c5e;&#x6027;&#x53ef;&#x4ee5;&#x62ff;&#x5230;&#x5df2;&#x7ecf;&#x6253;&#x5f00;&#x7684;`IndexedDB`&#x6570;&#x636e;&#x5e93;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"376,377"}}],"payload":{"tag":"h3","lines":"334,335"}},{"content":"indexedDB.deleteDatabase()","children":[{"content":"<pre data-lines=\"380,384\"><code>`indexedDB.deleteDatabase()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x5220;&#x9664;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#xff0c;&#x53c2;&#x6570;&#x4e3a;&#x6570;&#x636e;&#x5e93;&#x7684;&#x540d;&#x5b57;&#x3002;&#x5b83;&#x4f1a;&#x7acb;&#x523b;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;`IDBOpenDBRequest`&#x5bf9;&#x8c61;&#xff0c;&#x7136;&#x540e;&#x5bf9;&#x6570;&#x636e;&#x5e93;&#x6267;&#x884c;&#x5f02;&#x6b65;&#x5220;&#x9664;&#x3002;&#x5220;&#x9664;&#x64cd;&#x4f5c;&#x7684;&#x7ed3;&#x679c;&#x4f1a;&#x901a;&#x8fc7;&#x4e8b;&#x4ef6;&#x901a;&#x77e5;&#xff0c;`IDBOpenDBRequest`&#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x76d1;&#x542c;&#x4ee5;&#x4e0b;&#x4e8b;&#x4ef6;&#x3002;\n\n- `success`&#xff1a;&#x5220;&#x9664;&#x6210;&#x529f;\n- `error`&#xff1a;&#x5220;&#x9664;&#x62a5;&#x9519;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"380,384"}},{"content":"<pre data-lines=\"385,396\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">DBDeleteRequest</span> = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">deleteDatabase</span>(<span class=\"hljs-string\">&apos;demo&apos;</span>);\n\n<span class=\"hljs-title class_\">DBDeleteRequest</span>.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Error&apos;</span>);\n};\n\n<span class=\"hljs-title class_\">DBDeleteRequest</span>.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;success&apos;</span>);\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"385,396"}},{"content":"<pre data-lines=\"397,400\"><code>&#x8c03;&#x7528;`deleteDatabase()`&#x65b9;&#x6cd5;&#x4ee5;&#x540e;&#xff0c;&#x5f53;&#x524d;&#x6570;&#x636e;&#x5e93;&#x7684;&#x5176;&#x4ed6;&#x5df2;&#x7ecf;&#x6253;&#x5f00;&#x7684;&#x8fde;&#x63a5;&#x90fd;&#x4f1a;&#x63a5;&#x6536;&#x5230;`versionchange`&#x4e8b;&#x4ef6;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x5220;&#x9664;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x6570;&#x636e;&#x5e93;&#x5e76;&#x4e0d;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"397,400"}}],"payload":{"tag":"h3","lines":"378,379"}},{"content":"indexedDB.cmp()","children":[{"content":"<pre data-lines=\"403,404\"><code>`indexedDB.cmp()`&#x65b9;&#x6cd5;&#x6bd4;&#x8f83;&#x4e24;&#x4e2a;&#x503c;&#x662f;&#x5426;&#x4e3a; indexedDB &#x7684;&#x76f8;&#x540c;&#x7684;&#x4e3b;&#x952e;&#x3002;&#x5b83;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x6574;&#x6570;&#xff0c;&#x8868;&#x793a;&#x6bd4;&#x8f83;&#x7684;&#x7ed3;&#x679c;&#xff1a;`0`&#x8868;&#x793a;&#x76f8;&#x540c;&#xff0c;`1`&#x8868;&#x793a;&#x7b2c;&#x4e00;&#x4e2a;&#x4e3b;&#x952e;&#x5927;&#x4e8e;&#x7b2c;&#x4e8c;&#x4e2a;&#x4e3b;&#x952e;&#xff0c;`-1`&#x8868;&#x793a;&#x7b2c;&#x4e00;&#x4e2a;&#x4e3b;&#x952e;&#x5c0f;&#x4e8e;&#x7b2c;&#x4e8c;&#x4e2a;&#x4e3b;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"403,404"}},{"content":"<pre data-lines=\"405,408\"><code class=\"language-javascript\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">cmp</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>) <span class=\"hljs-comment\">// -1</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"405,408"}},{"content":"<pre data-lines=\"409,410\"><code>&#x6ce8;&#x610f;&#xff0c;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x4e0d;&#x80fd;&#x7528;&#x6765;&#x6bd4;&#x8f83;&#x4efb;&#x610f;&#x7684; JavaScript &#x503c;&#x3002;&#x5982;&#x679c;&#x53c2;&#x6570;&#x662f;&#x5e03;&#x5c14;&#x503c;&#x6216;&#x5bf9;&#x8c61;&#xff0c;&#x5b83;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"409,410"}},{"content":"<pre data-lines=\"411,415\"><code class=\"language-javascript\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">cmp</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-literal\">true</span>) <span class=\"hljs-comment\">// &#x62a5;&#x9519;</span>\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">cmp</span>({}, {}) <span class=\"hljs-comment\">// &#x62a5;&#x9519;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"411,415"}}],"payload":{"tag":"h3","lines":"401,402"}}],"payload":{"tag":"h2","lines":"330,331"}},{"content":"IDBRequest &#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"418,438\"><code>IDBRequest &#x5bf9;&#x8c61;&#x8868;&#x793a;&#x6253;&#x5f00;&#x7684;&#x6570;&#x636e;&#x5e93;&#x8fde;&#x63a5;&#xff0c;`indexedDB.open()`&#x65b9;&#x6cd5;&#x548c;`indexedDB.deleteDatabase()`&#x65b9;&#x6cd5;&#x4f1a;&#x8fd4;&#x56de;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x3002;&#x6570;&#x636e;&#x5e93;&#x7684;&#x64cd;&#x4f5c;&#x90fd;&#x662f;&#x901a;&#x8fc7;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x5b8c;&#x6210;&#x7684;&#x3002;\n\n&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x7684;&#x6240;&#x6709;&#x64cd;&#x4f5c;&#x90fd;&#x662f;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#xff0c;&#x8981;&#x901a;&#x8fc7;`readyState`&#x5c5e;&#x6027;&#x5224;&#x65ad;&#x662f;&#x5426;&#x5b8c;&#x6210;&#xff0c;&#x5982;&#x679c;&#x4e3a;`pending`&#x5c31;&#x8868;&#x793a;&#x64cd;&#x4f5c;&#x6b63;&#x5728;&#x8fdb;&#x884c;&#xff0c;&#x5982;&#x679c;&#x4e3a;`done`&#x5c31;&#x8868;&#x793a;&#x64cd;&#x4f5c;&#x5b8c;&#x6210;&#xff0c;&#x53ef;&#x80fd;&#x6210;&#x529f;&#x4e5f;&#x53ef;&#x80fd;&#x5931;&#x8d25;&#x3002;\n\n&#x64cd;&#x4f5c;&#x5b8c;&#x6210;&#x4ee5;&#x540e;&#xff0c;&#x89e6;&#x53d1;`success`&#x4e8b;&#x4ef6;&#x6216;`error`&#x4e8b;&#x4ef6;&#xff0c;&#x8fd9;&#x65f6;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;`result`&#x5c5e;&#x6027;&#x548c;`error`&#x5c5e;&#x6027;&#x62ff;&#x5230;&#x64cd;&#x4f5c;&#x7ed3;&#x679c;&#x3002;&#x5982;&#x679c;&#x5728;`pending`&#x9636;&#x6bb5;&#xff0c;&#x5c31;&#x53bb;&#x8bfb;&#x53d6;&#x8fd9;&#x4e24;&#x4e2a;&#x5c5e;&#x6027;&#xff0c;&#x662f;&#x4f1a;&#x62a5;&#x9519;&#x7684;&#x3002;\n\nIDBRequest &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBRequest.readyState`&#xff1a;&#x7b49;&#x4e8e;`pending`&#x8868;&#x793a;&#x64cd;&#x4f5c;&#x6b63;&#x5728;&#x8fdb;&#x884c;&#xff0c;&#x7b49;&#x4e8e;`done`&#x8868;&#x793a;&#x64cd;&#x4f5c;&#x6b63;&#x5728;&#x5b8c;&#x6210;&#x3002;\n- `IDBRequest.result`&#xff1a;&#x8fd4;&#x56de;&#x8bf7;&#x6c42;&#x7684;&#x7ed3;&#x679c;&#x3002;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x5931;&#x8d25;&#x3001;&#x7ed3;&#x679c;&#x4e0d;&#x53ef;&#x7528;&#xff0c;&#x8bfb;&#x53d6;&#x8be5;&#x5c5e;&#x6027;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n- `IDBRequest.error`&#xff1a;&#x8bf7;&#x6c42;&#x5931;&#x8d25;&#x65f6;&#xff0c;&#x8fd4;&#x56de;&#x9519;&#x8bef;&#x5bf9;&#x8c61;&#x3002;\n- `IDBRequest.source`&#xff1a;&#x8fd4;&#x56de;&#x8bf7;&#x6c42;&#x7684;&#x6765;&#x6e90;&#xff08;&#x6bd4;&#x5982;&#x7d22;&#x5f15;&#x5bf9;&#x8c61;&#x6216; ObjectStore&#xff09;&#x3002;\n- `IDBRequest.transaction`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x8bf7;&#x6c42;&#x6b63;&#x5728;&#x8fdb;&#x884c;&#x7684;&#x4e8b;&#x52a1;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x5305;&#x542b;&#x4e8b;&#x52a1;&#xff0c;&#x8fd4;&#x56de;`null`&#x3002;\n- `IDBRequest.onsuccess`&#xff1a;&#x6307;&#x5b9a;`success`&#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBRequest.onerror`&#xff1a;&#x6307;&#x5b9a;`error`&#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n\nIDBOpenDBRequest &#x5bf9;&#x8c61;&#x7ee7;&#x627f;&#x4e86; IDBRequest &#x5bf9;&#x8c61;&#xff0c;&#x63d0;&#x4f9b;&#x4e86;&#x4e24;&#x4e2a;&#x989d;&#x5916;&#x7684;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBOpenDBRequest.onblocked`&#xff1a;&#x6307;&#x5b9a;`blocked`&#x4e8b;&#x4ef6;&#xff08;`upgradeneeded`&#x4e8b;&#x4ef6;&#x89e6;&#x53d1;&#x65f6;&#xff0c;&#x6570;&#x636e;&#x5e93;&#x4ecd;&#x7136;&#x5728;&#x4f7f;&#x7528;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBOpenDBRequest.onupgradeneeded`&#xff1a;`upgradeneeded`&#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"418,438"}}],"payload":{"tag":"h2","lines":"416,417"}},{"content":"IDBDatabase &#x5bf9;&#x8c61;","children":[{"content":"&#x5c5e;&#x6027;","children":[{"content":"<pre data-lines=\"459,470\"><code>IDBDatabase &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBDatabase.name`&#xff1a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x6570;&#x636e;&#x5e93;&#x540d;&#x79f0;&#x3002;\n- `IDBDatabase.version`&#xff1a;&#x6574;&#x6570;&#xff0c;&#x6570;&#x636e;&#x5e93;&#x7248;&#x672c;&#x3002;&#x6570;&#x636e;&#x5e93;&#x7b2c;&#x4e00;&#x6b21;&#x521b;&#x5efa;&#x65f6;&#xff0c;&#x8be5;&#x5c5e;&#x6027;&#x4e3a;&#x7a7a;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n- `IDBDatabase.objectStoreNames`&#xff1a;DOMStringList &#x5bf9;&#x8c61;&#xff08;&#x5b57;&#x7b26;&#x4e32;&#x7684;&#x96c6;&#x5408;&#xff09;&#xff0c;&#x5305;&#x542b;&#x5f53;&#x524d;&#x6570;&#x636e;&#x7684;&#x6240;&#x6709; object store &#x7684;&#x540d;&#x5b57;&#x3002;\n- `IDBDatabase.onabort`&#xff1a;&#x6307;&#x5b9a; abort &#x4e8b;&#x4ef6;&#xff08;&#x4e8b;&#x52a1;&#x4e2d;&#x6b62;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBDatabase.onclose`&#xff1a;&#x6307;&#x5b9a; close &#x4e8b;&#x4ef6;&#xff08;&#x6570;&#x636e;&#x5e93;&#x610f;&#x5916;&#x5173;&#x95ed;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBDatabase.onerror`&#xff1a;&#x6307;&#x5b9a; error &#x4e8b;&#x4ef6;&#xff08;&#x8bbf;&#x95ee;&#x6570;&#x636e;&#x5e93;&#x5931;&#x8d25;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBDatabase.onversionchange`&#xff1a;&#x6570;&#x636e;&#x5e93;&#x7248;&#x672c;&#x53d8;&#x5316;&#x65f6;&#x89e6;&#x53d1;&#xff08;&#x53d1;&#x751f;`upgradeneeded`&#x4e8b;&#x4ef6;&#xff0c;&#x6216;&#x8c03;&#x7528;`indexedDB.deleteDatabase()`&#xff09;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;`objectStoreNames`&#x5c5e;&#x6027;&#x7684;&#x4f8b;&#x5b50;&#x3002;&#x8be5;&#x5c5e;&#x6027;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; DOMStringList &#x5bf9;&#x8c61;&#xff0c;&#x5305;&#x542b;&#x4e86;&#x5f53;&#x524d;&#x6570;&#x636e;&#x5e93;&#x6240;&#x6709;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x540d;&#x79f0;&#xff08;&#x5373;&#x8868;&#x540d;&#xff09;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; DOMStringList &#x5bf9;&#x8c61;&#x7684;`contains`&#x65b9;&#x6cd5;&#xff0c;&#x68c0;&#x67e5;&#x6570;&#x636e;&#x5e93;&#x662f;&#x5426;&#x5305;&#x542b;&#x67d0;&#x4e2a;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"459,470"}},{"content":"<pre data-lines=\"471,476\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">if</span> (!db.<span class=\"hljs-property\">objectStoreNames</span>.<span class=\"hljs-title function_\">contains</span>(<span class=\"hljs-string\">&apos;firstOS&apos;</span>)) {\n  db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;firstOS&apos;</span>);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"471,476"}},{"content":"<pre data-lines=\"477,478\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x5148;&#x5224;&#x65ad;&#x67d0;&#x4e2a;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x662f;&#x5426;&#x5b58;&#x5728;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x5b58;&#x5728;&#x5c31;&#x521b;&#x5efa;&#x8be5;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"477,478"}}],"payload":{"tag":"h3","lines":"457,458"}},{"content":"&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"481,489\"><code>IDBDatabase &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x65b9;&#x6cd5;&#x3002;\n\n- `IDBDatabase.close()`&#xff1a;&#x5173;&#x95ed;&#x6570;&#x636e;&#x5e93;&#x8fde;&#x63a5;&#xff0c;&#x5b9e;&#x9645;&#x4f1a;&#x7b49;&#x6240;&#x6709;&#x4e8b;&#x52a1;&#x5b8c;&#x6210;&#x540e;&#x518d;&#x5173;&#x95ed;&#x3002;\n- `IDBDatabase.createObjectStore()`&#xff1a;&#x521b;&#x5efa;&#x5b58;&#x653e;&#x6570;&#x636e;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff0c;&#x7c7b;&#x4f3c;&#x4e8e;&#x4f20;&#x7edf;&#x5173;&#x7cfb;&#x578b;&#x6570;&#x636e;&#x5e93;&#x7684;&#x8868;&#x683c;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBObjectStore &#x5bf9;&#x8c61;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x5728;`versionchange`&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x4e2d;&#x8c03;&#x7528;&#x3002;\n- `IDBDatabase.deleteObjectStore()`&#xff1a;&#x5220;&#x9664;&#x6307;&#x5b9a;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x5728;`versionchange`&#x4e8b;&#x4ef6;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x4e2d;&#x8c03;&#x7528;&#x3002;\n- `IDBDatabase.transaction()`&#xff1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBTransaction &#x4e8b;&#x52a1;&#x5bf9;&#x8c61;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;`createObjectStore()`&#x65b9;&#x6cd5;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"481,489"}},{"content":"<pre data-lines=\"490,505\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> request = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&apos;demo&apos;</span>, <span class=\"hljs-number\">2</span>);\n\nrequest.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> db = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n\n  db.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;error&apos;</span>);\n  };\n\n  <span class=\"hljs-keyword\">var</span> objectStore = db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;items&apos;</span>);\n\n  <span class=\"hljs-comment\">// ...</span>\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"490,505"}},{"content":"<pre data-lines=\"506,518\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x540d;&#x4e3a;`items`&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff0c;&#x5982;&#x679c;&#x8be5;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x5df2;&#x7ecf;&#x5b58;&#x5728;&#xff0c;&#x5c31;&#x4f1a;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x3002;&#x4e3a;&#x4e86;&#x907f;&#x514d;&#x51fa;&#x9519;&#xff0c;&#x9700;&#x8981;&#x7528;&#x5230;&#x4e0b;&#x6587;&#x7684;`objectStoreNames`&#x5c5e;&#x6027;&#xff0c;&#x68c0;&#x67e5;&#x5df2;&#x6709;&#x54ea;&#x4e9b;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x3002;\n\n`createObjectStore()`&#x65b9;&#x6cd5;&#x8fd8;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x7b2c;&#x4e8c;&#x4e2a;&#x5bf9;&#x8c61;&#x53c2;&#x6570;&#xff0c;&#x7528;&#x6765;&#x8bbe;&#x7f6e;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x5c5e;&#x6027;&#x3002;\n\n```javascript\ndb.createObjectStore(&apos;test&apos;, { keyPath: &apos;email&apos; });\ndb.createObjectStore(&apos;test2&apos;, { autoIncrement: true });\n```\n\n&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`keyPath`&#x5c5e;&#x6027;&#x8868;&#x793a;&#x4e3b;&#x952e;&#xff08;&#x7531;&#x4e8e;&#x4e3b;&#x952e;&#x7684;&#x503c;&#x4e0d;&#x80fd;&#x91cd;&#x590d;&#xff0c;&#x6240;&#x4ee5;&#x4e0a;&#x4f8b;&#x5b58;&#x5165;&#x4e4b;&#x524d;&#xff0c;&#x5fc5;&#x987b;&#x4fdd;&#x8bc1;&#x6570;&#x636e;&#x7684;`email`&#x5c5e;&#x6027;&#x503c;&#x90fd;&#x662f;&#x4e0d;&#x4e00;&#x6837;&#x7684;&#xff09;&#xff0c;&#x9ed8;&#x8ba4;&#x503c;&#x4e3a;`null`&#xff1b;`autoIncrement`&#x5c5e;&#x6027;&#x8868;&#x793a;&#xff0c;&#x662f;&#x5426;&#x4f7f;&#x7528;&#x81ea;&#x52a8;&#x9012;&#x589e;&#x7684;&#x6574;&#x6570;&#x4f5c;&#x4e3a;&#x4e3b;&#x952e;&#xff08;&#x7b2c;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x4e3a;1&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x4e3a;2&#xff0c;&#x4ee5;&#x6b64;&#x7c7b;&#x63a8;&#xff09;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;`false`&#x3002;&#x4e00;&#x822c;&#x6765;&#x8bf4;&#xff0c;`keyPath`&#x548c;`autoIncrement`&#x5c5e;&#x6027;&#x53ea;&#x8981;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x5c31;&#x591f;&#x4e86;&#xff0c;&#x5982;&#x679c;&#x4e24;&#x4e2a;&#x540c;&#x65f6;&#x4f7f;&#x7528;&#xff0c;&#x8868;&#x793a;&#x4e3b;&#x952e;&#x4e3a;&#x9012;&#x589e;&#x7684;&#x6574;&#x6570;&#xff0c;&#x4e14;&#x5bf9;&#x8c61;&#x4e0d;&#x5f97;&#x7f3a;&#x5c11;`keyPath`&#x6307;&#x5b9a;&#x7684;&#x5c5e;&#x6027;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;`deleteObjectStore()`&#x65b9;&#x6cd5;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"506,518"}},{"content":"<pre data-lines=\"519,538\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> dbName = <span class=\"hljs-string\">&apos;sampleDB&apos;</span>;\n<span class=\"hljs-keyword\">var</span> dbVersion = <span class=\"hljs-number\">2</span>;\n<span class=\"hljs-keyword\">var</span> request = indexedDB.<span class=\"hljs-title function_\">open</span>(dbName, dbVersion);\n\nrequest.<span class=\"hljs-property\">onupgradeneeded</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-keyword\">var</span> db = request.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">if</span> (e.<span class=\"hljs-property\">oldVersion</span> &lt; <span class=\"hljs-number\">1</span>) {\n    db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;store1&apos;</span>);\n  }\n\n  <span class=\"hljs-keyword\">if</span> (e.<span class=\"hljs-property\">oldVersion</span> &lt; <span class=\"hljs-number\">2</span>) {\n    db.<span class=\"hljs-title function_\">deleteObjectStore</span>(<span class=\"hljs-string\">&apos;store1&apos;</span>);\n    db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;store2&apos;</span>);\n  }\n\n  <span class=\"hljs-comment\">// ...</span>\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"519,538"}},{"content":"<pre data-lines=\"539,540\"><code>&#x4e0b;&#x9762;&#x662f;`transaction()`&#x65b9;&#x6cd5;&#x7684;&#x4f8b;&#x5b50;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5e93;&#x4e8b;&#x52a1;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBTransaction &#x5bf9;&#x8c61;&#x3002;&#x5411;&#x6570;&#x636e;&#x5e93;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#x4e4b;&#x524d;&#xff0c;&#x5fc5;&#x987b;&#x5148;&#x521b;&#x5efa;&#x6570;&#x636e;&#x5e93;&#x4e8b;&#x52a1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"539,540"}},{"content":"<pre data-lines=\"541,544\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> t = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;items&apos;</span>], <span class=\"hljs-string\">&apos;readwrite&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"541,544"}},{"content":"<pre data-lines=\"545,546\"><code>`transaction()`&#x65b9;&#x6cd5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff1a;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x91cc;&#x9762;&#x662f;&#x6240;&#x6d89;&#x53ca;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff0c;&#x901a;&#x5e38;&#x662f;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#xff1b;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x8868;&#x793a;&#x64cd;&#x4f5c;&#x7c7b;&#x578b;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x3002;&#x76ee;&#x524d;&#xff0c;&#x64cd;&#x4f5c;&#x7c7b;&#x578b;&#x53ea;&#x6709;&#x4e24;&#x79cd;&#xff1a;`readonly`&#xff08;&#x53ea;&#x8bfb;&#xff09;&#x548c;`readwrite`&#xff08;&#x8bfb;&#x5199;&#xff09;&#x3002;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#x4f7f;&#x7528;`readwrite`&#xff0c;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x4f7f;&#x7528;`readonly`&#x3002;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x53ef;&#x9009;&#x7684;&#xff0c;&#x7701;&#x7565;&#x65f6;&#x9ed8;&#x8ba4;&#x4e3a;`readonly`&#x6a21;&#x5f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"545,546"}}],"payload":{"tag":"h3","lines":"479,480"}}],"payload":{"tag":"h2","lines":"439,440"}},{"content":"IDBObjectStore &#x5bf9;&#x8c61;","children":[{"content":"&#x5c5e;&#x6027;","children":[{"content":"<pre data-lines=\"562,569\"><code>IDBObjectStore &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBObjectStore.indexNames`&#xff1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x7c7b;&#x4f3c;&#x6570;&#x7ec4;&#x7684;&#x5bf9;&#x8c61;&#xff08;DOMStringList&#xff09;&#xff0c;&#x5305;&#x542b;&#x4e86;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x6240;&#x6709;&#x7d22;&#x5f15;&#x3002;\n- `IDBObjectStore.keyPath`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x4e3b;&#x952e;&#x3002;\n- `IDBObjectStore.name`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x540d;&#x79f0;&#x3002;\n- `IDBObjectStore.transaction`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x6240;&#x5c5e;&#x7684;&#x4e8b;&#x52a1;&#x5bf9;&#x8c61;&#x3002;\n- `IDBObjectStore.autoIncrement`&#xff1a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x4e3b;&#x952e;&#x662f;&#x5426;&#x4f1a;&#x81ea;&#x52a8;&#x9012;&#x589e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"562,569"}}],"payload":{"tag":"h3","lines":"560,561"}},{"content":"&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"572,577\"><code>IDBObjectStore &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x65b9;&#x6cd5;&#x3002;\n\n**&#xff08;1&#xff09;IDBObjectStore.add()**\n\n`IDBObjectStore.add()`&#x7528;&#x4e8e;&#x5411;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x7528;&#x4e8e;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#xff0c;&#x5982;&#x679c;&#x4e3b;&#x952e;&#x76f8;&#x540c;&#x4f1a;&#x62a5;&#x9519;&#xff0c;&#x56e0;&#x6b64;&#x66f4;&#x65b0;&#x6570;&#x636e;&#x5fc5;&#x987b;&#x4f7f;&#x7528;`put()`&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"572,577"}},{"content":"<pre data-lines=\"578,581\"><code class=\"language-javascript\">objectStore.add(value, key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"578,581"}},{"content":"<pre data-lines=\"582,585\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x952e;&#x503c;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e3b;&#x952e;&#xff0c;&#x8be5;&#x53c2;&#x6570;&#x53ef;&#x9009;&#xff0c;&#x5982;&#x679c;&#x7701;&#x7565;&#x9ed8;&#x8ba4;&#x4e3a;`null`&#x3002;\n\n&#x521b;&#x5efa;&#x4e8b;&#x52a1;&#x4ee5;&#x540e;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#xff0c;&#x7136;&#x540e;&#x4f7f;&#x7528;`add()`&#x65b9;&#x6cd5;&#x5f80;&#x91cc;&#x9762;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"582,585"}},{"content":"<pre data-lines=\"586,611\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> db;\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">DBOpenRequest</span> = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&apos;demo&apos;</span>, <span class=\"hljs-number\">1</span>);\n\n<span class=\"hljs-title class_\">DBOpenRequest</span>.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  db = <span class=\"hljs-title class_\">DBOpenRequest</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">var</span> transaction = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;items&apos;</span>], <span class=\"hljs-string\">&apos;readwrite&apos;</span>);\n\n  transaction.<span class=\"hljs-property\">oncomplete</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;transaction success&apos;</span>);\n  };\n\n  transaction.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;transaction error: &apos;</span> + transaction.<span class=\"hljs-property\">error</span>);\n  };\n\n  <span class=\"hljs-keyword\">var</span> objectStore = transaction.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;items&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> objectStoreRequest = objectStore.<span class=\"hljs-title function_\">add</span>({ <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-number\">1</span> });\n\n  objectStoreRequest.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;add data success&apos;</span>);\n  };\n\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"586,611"}},{"content":"<pre data-lines=\"612,615\"><code>**&#xff08;2&#xff09;IDBObjectStore.put()**\n\n`IDBObjectStore.put()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x66f4;&#x65b0;&#x67d0;&#x4e2a;&#x4e3b;&#x952e;&#x5bf9;&#x5e94;&#x7684;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#xff0c;&#x5982;&#x679c;&#x5bf9;&#x5e94;&#x7684;&#x952e;&#x503c;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5219;&#x63d2;&#x5165;&#x4e00;&#x6761;&#x65b0;&#x7684;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"612,615"}},{"content":"<pre data-lines=\"616,619\"><code class=\"language-javascript\">objectStore.put(item, key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"616,619"}},{"content":"<pre data-lines=\"620,625\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x4e3a;&#x65b0;&#x6570;&#x636e;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x4e3a;&#x4e3b;&#x952e;&#xff0c;&#x8be5;&#x53c2;&#x6570;&#x53ef;&#x9009;&#xff0c;&#x4e14;&#x53ea;&#x5728;&#x81ea;&#x52a8;&#x9012;&#x589e;&#x65f6;&#x624d;&#x6709;&#x5fc5;&#x8981;&#x63d0;&#x4f9b;&#xff0c;&#x56e0;&#x4e3a;&#x90a3;&#x65f6;&#x4e3b;&#x952e;&#x4e0d;&#x5305;&#x542b;&#x5728;&#x6570;&#x636e;&#x503c;&#x91cc;&#x9762;&#x3002;\n\n**&#xff08;3&#xff09;IDBObjectStore.clear()**\n\n`IDBObjectStore.clear()`&#x5220;&#x9664;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x6240;&#x6709;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"620,625"}},{"content":"<pre data-lines=\"626,629\"><code class=\"language-javascript\">objectStore.clear()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"626,629"}},{"content":"<pre data-lines=\"630,635\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x4e0d;&#x9700;&#x8981;&#x53c2;&#x6570;&#x3002;\n\n**&#xff08;4&#xff09;IDBObjectStore.delete()**\n\n`IDBObjectStore.delete()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x5220;&#x9664;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#x7684;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"630,635"}},{"content":"<pre data-lines=\"636,639\"><code class=\"language-javascript\">objectStore.delete(Key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"636,639"}},{"content":"<pre data-lines=\"640,645\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#x4e3a;&#x4e3b;&#x952e;&#x7684;&#x503c;&#x3002;\n\n**&#xff08;5&#xff09;IDBObjectStore.count()**\n\n`IDBObjectStore.count()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x8ba1;&#x7b97;&#x8bb0;&#x5f55;&#x7684;&#x6570;&#x91cf;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"640,645"}},{"content":"<pre data-lines=\"646,649\"><code class=\"language-javascript\">IDBObjectStore.count(key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"646,649"}},{"content":"<pre data-lines=\"650,655\"><code>&#x4e0d;&#x5e26;&#x53c2;&#x6570;&#x65f6;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x6240;&#x6709;&#x8bb0;&#x5f55;&#x6570;&#x91cf;&#x3002;&#x5982;&#x679c;&#x4e3b;&#x952e;&#x6216; IDBKeyRange &#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x5219;&#x8fd4;&#x56de;&#x5bf9;&#x5e94;&#x7684;&#x8bb0;&#x5f55;&#x6570;&#x91cf;&#x3002;\n\n**&#xff08;6&#xff09;IDBObjectStore.getKey()**\n\n`IDBObjectStore.getKey()`&#x7528;&#x4e8e;&#x83b7;&#x53d6;&#x4e3b;&#x952e;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"650,655"}},{"content":"<pre data-lines=\"656,659\"><code class=\"language-javascript\">objectStore.getKey(key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"656,659"}},{"content":"<pre data-lines=\"660,665\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f;&#x4e3b;&#x952e;&#x503c;&#x6216; IDBKeyRange &#x5bf9;&#x8c61;&#x3002;\n\n**&#xff08;7&#xff09;IDBObjectStore.get()**\n\n`IDBObjectStore.get()`&#x7528;&#x4e8e;&#x83b7;&#x53d6;&#x4e3b;&#x952e;&#x5bf9;&#x5e94;&#x7684;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"660,665"}},{"content":"<pre data-lines=\"666,669\"><code class=\"language-javascript\">objectStore.get(key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"666,669"}},{"content":"<pre data-lines=\"670,673\"><code>**&#xff08;8&#xff09;IDBObjectStore.getAll()**\n\n`DBObjectStore.getAll()`&#x7528;&#x4e8e;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"670,673"}},{"content":"<pre data-lines=\"674,684\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x6240;&#x6709;&#x8bb0;&#x5f55;</span>\nobjectStore.<span class=\"hljs-title function_\">getAll</span>()\n\n<span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x6240;&#x6709;&#x7b26;&#x5408;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#x6216; IDBKeyRange &#x7684;&#x8bb0;&#x5f55;</span>\nobjectStore.<span class=\"hljs-title function_\">getAll</span>(query)\n\n<span class=\"hljs-comment\">// &#x6307;&#x5b9a;&#x83b7;&#x53d6;&#x8bb0;&#x5f55;&#x7684;&#x6570;&#x91cf;</span>\nobjectStore.<span class=\"hljs-title function_\">getAll</span>(query, count)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"674,684"}},{"content":"<pre data-lines=\"685,688\"><code>**&#xff08;9&#xff09;IDBObjectStore.getAllKeys()**\n\n`IDBObjectStore.getAllKeys()`&#x7528;&#x4e8e;&#x83b7;&#x53d6;&#x6240;&#x6709;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x7684;&#x4e3b;&#x952e;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"685,688"}},{"content":"<pre data-lines=\"689,699\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x6240;&#x6709;&#x8bb0;&#x5f55;&#x7684;&#x4e3b;&#x952e;</span>\nobjectStore.<span class=\"hljs-title function_\">getAllKeys</span>()\n\n<span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x6240;&#x6709;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x7684;&#x4e3b;&#x952e;</span>\nobjectStore.<span class=\"hljs-title function_\">getAllKeys</span>(query)\n\n<span class=\"hljs-comment\">// &#x6307;&#x5b9a;&#x83b7;&#x53d6;&#x4e3b;&#x952e;&#x7684;&#x6570;&#x91cf;</span>\nobjectStore.<span class=\"hljs-title function_\">getAllKeys</span>(query, count)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"689,699"}},{"content":"<pre data-lines=\"700,703\"><code>**&#xff08;10&#xff09;IDBObjectStore.index()**\n\n`IDBObjectStore.index()`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x540d;&#x79f0;&#x7684;&#x7d22;&#x5f15;&#x5bf9;&#x8c61; IDBIndex&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"700,703"}},{"content":"<pre data-lines=\"704,707\"><code class=\"language-javascript\">objectStore.index(name)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"704,707"}},{"content":"<pre data-lines=\"708,709\"><code>&#x6709;&#x4e86;&#x7d22;&#x5f15;&#x4ee5;&#x540e;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x9488;&#x5bf9;&#x7d22;&#x5f15;&#x6240;&#x5728;&#x7684;&#x5c5e;&#x6027;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"708,709"}},{"content":"<pre data-lines=\"710,717\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> t = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;people&apos;</span>], <span class=\"hljs-string\">&apos;readonly&apos;</span>);\n<span class=\"hljs-keyword\">var</span> store = t.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;people&apos;</span>);\n<span class=\"hljs-keyword\">var</span> index = store.<span class=\"hljs-title function_\">index</span>(<span class=\"hljs-string\">&apos;name&apos;</span>);\n\n<span class=\"hljs-keyword\">var</span> request = index.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"710,717"}},{"content":"<pre data-lines=\"718,723\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x6253;&#x5f00;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x4ee5;&#x540e;&#xff0c;&#x5148;&#x7528;`index()`&#x65b9;&#x6cd5;&#x6307;&#x5b9a;&#x83b7;&#x53d6;`name`&#x5c5e;&#x6027;&#x7684;&#x7d22;&#x5f15;&#xff0c;&#x7136;&#x540e;&#x7528;`get()`&#x65b9;&#x6cd5;&#x8bfb;&#x53d6;&#x67d0;&#x4e2a;`name`&#x5c5e;&#x6027;(`foo`)&#x5bf9;&#x5e94;&#x7684;&#x6570;&#x636e;&#x3002;&#x5982;&#x679c;`name`&#x5c5e;&#x6027;&#x4e0d;&#x662f;&#x5bf9;&#x5e94;&#x552f;&#x4e00;&#x503c;&#xff0c;&#x8fd9;&#x65f6;`get()`&#x65b9;&#x6cd5;&#x6709;&#x53ef;&#x80fd;&#x53d6;&#x56de;&#x591a;&#x4e2a;&#x6570;&#x636e;&#x5bf9;&#x8c61;&#x3002;&#x53e6;&#x5916;&#xff0c;`get()`&#x662f;&#x5f02;&#x6b65;&#x65b9;&#x6cd5;&#xff0c;&#x8bfb;&#x53d6;&#x6210;&#x529f;&#x4ee5;&#x540e;&#xff0c;&#x53ea;&#x80fd;&#x5728;`success`&#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x4e2d;&#x5904;&#x7406;&#x6570;&#x636e;&#x3002;\n\n**&#xff08;11&#xff09;IDBObjectStore.createIndex()**\n\n`IDBObjectStore.createIndex()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x65b0;&#x5efa;&#x5f53;&#x524d;&#x6570;&#x636e;&#x5e93;&#x7684;&#x4e00;&#x4e2a;&#x7d22;&#x5f15;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x5728;`VersionChange`&#x76d1;&#x542c;&#x51fd;&#x6570;&#x91cc;&#x9762;&#x8c03;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"718,723"}},{"content":"<pre data-lines=\"724,727\"><code class=\"language-javascript\">objectStore.createIndex(indexName, keyPath, objectParameters)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"724,727"}},{"content":"<pre data-lines=\"728,740\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x3002;\n\n- indexName&#xff1a;&#x7d22;&#x5f15;&#x540d;\n- keyPath&#xff1a;&#x4e3b;&#x952e;\n- objectParameters&#xff1a;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;&#xff08;&#x53ef;&#x9009;&#xff09;\n\n&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x914d;&#x7f6e;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n- unique&#xff1a;&#x5982;&#x679c;&#x8bbe;&#x4e3a;`true`&#xff0c;&#x5c06;&#x4e0d;&#x5141;&#x8bb8;&#x91cd;&#x590d;&#x7684;&#x503c;\n- multiEntry&#xff1a;&#x5982;&#x679c;&#x8bbe;&#x4e3a;`true`&#xff0c;&#x5bf9;&#x4e8e;&#x6709;&#x591a;&#x4e2a;&#x503c;&#x7684;&#x4e3b;&#x952e;&#x6570;&#x7ec4;&#xff0c;&#x6bcf;&#x4e2a;&#x503c;&#x5c06;&#x5728;&#x7d22;&#x5f15;&#x91cc;&#x9762;&#x65b0;&#x5efa;&#x4e00;&#x4e2a;&#x6761;&#x76ee;&#xff0c;&#x5426;&#x5219;&#x4e3b;&#x952e;&#x6570;&#x7ec4;&#x5bf9;&#x5e94;&#x4e00;&#x4e2a;&#x6761;&#x76ee;&#x3002;\n\n&#x5047;&#x5b9a;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x4e2d;&#x7684;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x90fd;&#x662f;&#x5982;&#x4e0b;&#x7684;`person`&#x7c7b;&#x578b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"728,740"}},{"content":"<pre data-lines=\"741,748\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> person = {\n  <span class=\"hljs-attr\">name</span>: name,\n  <span class=\"hljs-attr\">email</span>: email,\n  <span class=\"hljs-attr\">created</span>: <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>()\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"741,748"}},{"content":"<pre data-lines=\"749,750\"><code>&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x7684;&#x67d0;&#x4e2a;&#x5c5e;&#x6027;&#x6765;&#x5efa;&#x7acb;&#x7d22;&#x5f15;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"749,750"}},{"content":"<pre data-lines=\"751,757\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> store = db.<span class=\"hljs-title function_\">createObjectStore</span>(<span class=\"hljs-string\">&apos;people&apos;</span>, { <span class=\"hljs-attr\">autoIncrement</span>: <span class=\"hljs-literal\">true</span> });\n\nstore.<span class=\"hljs-title function_\">createIndex</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;name&apos;</span>, { <span class=\"hljs-attr\">unique</span>: <span class=\"hljs-literal\">false</span> });\nstore.<span class=\"hljs-title function_\">createIndex</span>(<span class=\"hljs-string\">&apos;email&apos;</span>, <span class=\"hljs-string\">&apos;email&apos;</span>, { <span class=\"hljs-attr\">unique</span>: <span class=\"hljs-literal\">true</span> });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"751,757"}},{"content":"<pre data-lines=\"758,763\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x544a;&#x8bc9;&#x7d22;&#x5f15;&#x5bf9;&#x8c61;&#xff0c;`name`&#x5c5e;&#x6027;&#x4e0d;&#x662f;&#x552f;&#x4e00;&#x503c;&#xff0c;`email`&#x5c5e;&#x6027;&#x662f;&#x552f;&#x4e00;&#x503c;&#x3002;\n\n**&#xff08;12&#xff09;IDBObjectStore.deleteIndex()**\n\n`IDBObjectStore.deleteIndex()`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x5220;&#x9664;&#x6307;&#x5b9a;&#x7684;&#x7d22;&#x5f15;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x5728;`VersionChange`&#x76d1;&#x542c;&#x51fd;&#x6570;&#x91cc;&#x9762;&#x8c03;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"758,763"}},{"content":"<pre data-lines=\"764,767\"><code class=\"language-javascript\">objectStore.deleteIndex(indexName)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"764,767"}},{"content":"<pre data-lines=\"768,771\"><code>**&#xff08;13&#xff09;IDBObjectStore.openCursor()**\n\n`IDBObjectStore.openCursor()`&#x7528;&#x4e8e;&#x83b7;&#x53d6;&#x4e00;&#x4e2a;&#x6307;&#x9488;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"768,771"}},{"content":"<pre data-lines=\"772,775\"><code class=\"language-javascript\">IDBObjectStore.openCursor()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"772,775"}},{"content":"<pre data-lines=\"776,777\"><code>&#x6307;&#x9488;&#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x904d;&#x5386;&#x6570;&#x636e;&#x3002;&#x8be5;&#x5bf9;&#x8c61;&#x4e5f;&#x662f;&#x5f02;&#x6b65;&#x7684;&#xff0c;&#x6709;&#x81ea;&#x5df1;&#x7684;`success`&#x548c;`error`&#x4e8b;&#x4ef6;&#xff0c;&#x53ef;&#x4ee5;&#x5bf9;&#x5b83;&#x4eec;&#x6307;&#x5b9a;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"776,777"}},{"content":"<pre data-lines=\"778,793\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> t = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;test&apos;</span>], <span class=\"hljs-string\">&apos;readonly&apos;</span>);\n<span class=\"hljs-keyword\">var</span> store = t.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;test&apos;</span>);\n\n<span class=\"hljs-keyword\">var</span> cursor = store.<span class=\"hljs-title function_\">openCursor</span>();\n\ncursor.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> res = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">if</span> (res) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Key&apos;</span>, res.<span class=\"hljs-property\">key</span>);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(<span class=\"hljs-string\">&apos;Data&apos;</span>, res.<span class=\"hljs-property\">value</span>);\n    res.<span class=\"hljs-title function_\">continue</span>();\n  }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"778,793"}},{"content":"<pre data-lines=\"794,801\"><code>&#x76d1;&#x542c;&#x51fd;&#x6570;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x7684;`target.result`&#x5c5e;&#x6027;&#x6307;&#x5411;&#x5f53;&#x524d;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x8bb0;&#x5f55;&#x7684;`key`&#x548c;`value`&#x5206;&#x522b;&#x8fd4;&#x56de;&#x4e3b;&#x952e;&#x548c;&#x952e;&#x503c;&#xff08;&#x5373;&#x5b9e;&#x9645;&#x5b58;&#x5165;&#x7684;&#x6570;&#x636e;&#xff09;&#x3002;`continue()`&#x65b9;&#x6cd5;&#x5c06;&#x5149;&#x6807;&#x79fb;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5bf9;&#x8c61;&#xff0c;&#x5982;&#x679c;&#x5f53;&#x524d;&#x6570;&#x636e;&#x5bf9;&#x8c61;&#x5df2;&#x7ecf;&#x662f;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x4e86;&#xff0c;&#x5219;&#x5149;&#x6807;&#x6307;&#x5411;`null`&#x3002;\n\n`openCursor()`&#x65b9;&#x6cd5;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e3b;&#x952e;&#x503c;&#xff0c;&#x6216;&#x8005;&#x4e00;&#x4e2a; IDBKeyRange &#x5bf9;&#x8c61;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x8be5;&#x53c2;&#x6570;&#xff0c;&#x5c06;&#x53ea;&#x5904;&#x7406;&#x5305;&#x542b;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#x7684;&#x8bb0;&#x5f55;&#xff1b;&#x5982;&#x679c;&#x7701;&#x7565;&#xff0c;&#x5c06;&#x5904;&#x7406;&#x6240;&#x6709;&#x7684;&#x8bb0;&#x5f55;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd8;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x8868;&#x793a;&#x904d;&#x5386;&#x65b9;&#x5411;&#xff0c;&#x9ed8;&#x8ba4;&#x503c;&#x4e3a;`next`&#xff0c;&#x5176;&#x4ed6;&#x53ef;&#x80fd;&#x7684;&#x503c;&#x4e3a;`prev`&#x3001;`nextunique`&#x548c;`prevunique`&#x3002;&#x540e;&#x4e24;&#x4e2a;&#x503c;&#x8868;&#x793a;&#x5982;&#x679c;&#x9047;&#x5230;&#x91cd;&#x590d;&#x503c;&#xff0c;&#x4f1a;&#x81ea;&#x52a8;&#x8df3;&#x8fc7;&#x3002;\n\n**&#xff08;14&#xff09;IDBObjectStore.openKeyCursor()**\n\n`IDBObjectStore.openKeyCursor()`&#x7528;&#x4e8e;&#x83b7;&#x53d6;&#x4e00;&#x4e2a;&#x4e3b;&#x952e;&#x6307;&#x9488;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"794,801"}},{"content":"<pre data-lines=\"802,805\"><code class=\"language-javascript\">IDBObjectStore.openKeyCursor()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"802,805"}}],"payload":{"tag":"h3","lines":"570,571"}}],"payload":{"tag":"h2","lines":"547,548"}},{"content":"IDBTransaction &#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"808,811\"><code>IDBTransaction &#x5bf9;&#x8c61;&#x7528;&#x6765;&#x5f02;&#x6b65;&#x64cd;&#x4f5c;&#x6570;&#x636e;&#x5e93;&#x4e8b;&#x52a1;&#xff0c;&#x6240;&#x6709;&#x7684;&#x8bfb;&#x5199;&#x64cd;&#x4f5c;&#x90fd;&#x8981;&#x901a;&#x8fc7;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x8fdb;&#x884c;&#x3002;\n\n`IDBDatabase.transaction()`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x5c31;&#x662f;&#x4e00;&#x4e2a; IDBTransaction &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"808,811"}},{"content":"<pre data-lines=\"812,837\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> db;\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">DBOpenRequest</span> = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">indexedDB</span>.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&apos;demo&apos;</span>, <span class=\"hljs-number\">1</span>);\n\n<span class=\"hljs-title class_\">DBOpenRequest</span>.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n  db = <span class=\"hljs-title class_\">DBOpenRequest</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">var</span> transaction = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;demo&apos;</span>], <span class=\"hljs-string\">&apos;readwrite&apos;</span>);\n\n  transaction.<span class=\"hljs-property\">oncomplete</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;transaction success&apos;</span>);\n  };\n\n  transaction.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;transaction error: &apos;</span> + transaction.<span class=\"hljs-property\">error</span>);\n  };\n\n  <span class=\"hljs-keyword\">var</span> objectStore = transaction.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;demo&apos;</span>);\n  <span class=\"hljs-keyword\">var</span> objectStoreRequest = objectStore.<span class=\"hljs-title function_\">add</span>({ <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-number\">1</span> });\n\n  objectStoreRequest.<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;add data success&apos;</span>);\n  };\n\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"812,837"}},{"content":"<pre data-lines=\"838,839\"><code>&#x4e8b;&#x52a1;&#x7684;&#x6267;&#x884c;&#x987a;&#x5e8f;&#x662f;&#x6309;&#x7167;&#x521b;&#x5efa;&#x7684;&#x987a;&#x5e8f;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x53d1;&#x51fa;&#x8bf7;&#x6c42;&#x7684;&#x987a;&#x5e8f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"838,839"}},{"content":"<pre data-lines=\"840,848\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> trans1 = db.<span class=\"hljs-title function_\">transaction</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>, <span class=\"hljs-string\">&apos;readwrite&apos;</span>);\n<span class=\"hljs-keyword\">var</span> trans2 = db.<span class=\"hljs-title function_\">transaction</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>, <span class=\"hljs-string\">&apos;readwrite&apos;</span>);\n<span class=\"hljs-keyword\">var</span> objectStore2 = trans2.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>)\n<span class=\"hljs-keyword\">var</span> objectStore1 = trans1.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>)\nobjectStore2.<span class=\"hljs-title function_\">put</span>(<span class=\"hljs-string\">&apos;2&apos;</span>, <span class=\"hljs-string\">&apos;key&apos;</span>);\nobjectStore1.<span class=\"hljs-title function_\">put</span>(<span class=\"hljs-string\">&apos;1&apos;</span>, <span class=\"hljs-string\">&apos;key&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"840,848"}},{"content":"<pre data-lines=\"849,867\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`key`&#x5bf9;&#x5e94;&#x7684;&#x952e;&#x503c;&#x6700;&#x7ec8;&#x662f;`2`&#xff0c;&#x800c;&#x4e0d;&#x662f;`1`&#x3002;&#x56e0;&#x4e3a;&#x4e8b;&#x52a1;`trans1`&#x5148;&#x4e8e;`trans2`&#x521b;&#x5efa;&#xff0c;&#x6240;&#x4ee5;&#x9996;&#x5148;&#x6267;&#x884c;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x4e8b;&#x52a1;&#x6709;&#x53ef;&#x80fd;&#x5931;&#x8d25;&#xff0c;&#x53ea;&#x6709;&#x76d1;&#x542c;&#x5230;&#x4e8b;&#x52a1;&#x7684;`complete`&#x4e8b;&#x4ef6;&#xff0c;&#x624d;&#x80fd;&#x4fdd;&#x8bc1;&#x4e8b;&#x52a1;&#x64cd;&#x4f5c;&#x6210;&#x529f;&#x3002;\n\nIDBTransaction &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBTransaction.db`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x4e8b;&#x52a1;&#x6240;&#x5728;&#x7684;&#x6570;&#x636e;&#x5e93;&#x5bf9;&#x8c61; IDBDatabase&#x3002;\n- `IDBTransaction.error`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x4e8b;&#x52a1;&#x7684;&#x9519;&#x8bef;&#x3002;&#x5982;&#x679c;&#x4e8b;&#x52a1;&#x6ca1;&#x6709;&#x7ed3;&#x675f;&#xff0c;&#x6216;&#x8005;&#x4e8b;&#x52a1;&#x6210;&#x529f;&#x7ed3;&#x675f;&#xff0c;&#x6216;&#x8005;&#x88ab;&#x624b;&#x52a8;&#x7ec8;&#x6b62;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;`null`&#x3002;\n- `IDBTransaction.mode`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x4e8b;&#x52a1;&#x7684;&#x6a21;&#x5f0f;&#xff0c;&#x9ed8;&#x8ba4;&#x662f;`readonly`&#xff08;&#x53ea;&#x8bfb;&#xff09;&#xff0c;&#x53e6;&#x4e00;&#x4e2a;&#x503c;&#x662f;`readwrite`&#x3002;\n- `IDBTransaction.objectStoreNames`&#xff1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x7c7b;&#x4f3c;&#x6570;&#x7ec4;&#x7684;&#x5bf9;&#x8c61; DOMStringList&#xff0c;&#x6210;&#x5458;&#x662f;&#x5f53;&#x524d;&#x4e8b;&#x52a1;&#x6d89;&#x53ca;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x7684;&#x540d;&#x5b57;&#x3002;\n- `IDBTransaction.onabort`&#xff1a;&#x6307;&#x5b9a;`abort`&#x4e8b;&#x4ef6;&#xff08;&#x4e8b;&#x52a1;&#x4e2d;&#x65ad;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBTransaction.oncomplete`&#xff1a;&#x6307;&#x5b9a;`complete`&#x4e8b;&#x4ef6;&#xff08;&#x4e8b;&#x52a1;&#x6210;&#x529f;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- `IDBTransaction.onerror`&#xff1a;&#x6307;&#x5b9a;`error`&#x4e8b;&#x4ef6;&#xff08;&#x4e8b;&#x52a1;&#x5931;&#x8d25;&#xff09;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n\nIDBTransaction &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x65b9;&#x6cd5;&#x3002;\n\n- `IDBTransaction.abort()`&#xff1a;&#x7ec8;&#x6b62;&#x5f53;&#x524d;&#x4e8b;&#x52a1;&#xff0c;&#x56de;&#x6eda;&#x6240;&#x6709;&#x5df2;&#x7ecf;&#x8fdb;&#x884c;&#x7684;&#x53d8;&#x66f4;&#x3002;\n- `IDBTransaction.objectStore(name)`&#xff1a;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x540d;&#x79f0;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93; IDBObjectStore&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"849,867"}}],"payload":{"tag":"h2","lines":"806,807"}},{"content":"IDBIndex &#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"870,875\"><code>IDBIndex &#x5bf9;&#x8c61;&#x4ee3;&#x8868;&#x6570;&#x636e;&#x5e93;&#x7684;&#x7d22;&#x5f15;&#xff0c;&#x901a;&#x8fc7;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x6570;&#x636e;&#x5e93;&#x91cc;&#x9762;&#x7684;&#x8bb0;&#x5f55;&#x3002;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x7684;&#x4e3b;&#x952e;&#x9ed8;&#x8ba4;&#x5c31;&#x662f;&#x5e26;&#x6709;&#x7d22;&#x5f15;&#xff0c;IDBIndex &#x5bf9;&#x8c61;&#x4e3b;&#x8981;&#x7528;&#x4e8e;&#x901a;&#x8fc7;&#x9664;&#x4e3b;&#x952e;&#x4ee5;&#x5916;&#x7684;&#x5176;&#x4ed6;&#x952e;&#xff0c;&#x5efa;&#x7acb;&#x7d22;&#x5f15;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;&#x3002;\n\nIDBIndex &#x662f;&#x6301;&#x4e45;&#x6027;&#x7684;&#x952e;&#x503c;&#x5bf9;&#x5b58;&#x50a8;&#x3002;&#x53ea;&#x8981;&#x63d2;&#x5165;&#x3001;&#x66f4;&#x65b0;&#x6216;&#x5220;&#x9664;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#xff0c;&#x5f15;&#x7528;&#x7684;&#x5bf9;&#x8c61;&#x5e93;&#x4e2d;&#x7684;&#x8bb0;&#x5f55;&#xff0c;&#x7d22;&#x5f15;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;&#x66f4;&#x65b0;&#x3002;\n\n`IDBObjectStore.index()`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x83b7;&#x53d6; IDBIndex &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"870,875"}},{"content":"<pre data-lines=\"876,901\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> transaction = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;contactsList&apos;</span>], <span class=\"hljs-string\">&apos;readonly&apos;</span>);\n<span class=\"hljs-keyword\">var</span> objectStore = transaction.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;contactsList&apos;</span>);\n<span class=\"hljs-keyword\">var</span> myIndex = objectStore.<span class=\"hljs-title function_\">index</span>(<span class=\"hljs-string\">&apos;lName&apos;</span>);\n\nmyIndex.<span class=\"hljs-title function_\">openCursor</span>().<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> cursor = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">if</span> (cursor) {\n    <span class=\"hljs-keyword\">var</span> tableRow = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&apos;tr&apos;</span>);\n    tableRow.<span class=\"hljs-property\">innerHTML</span> =   <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">id</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">lName</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">fName</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">jTitle</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">company</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">eMail</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">phone</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>\n                         + <span class=\"hljs-string\">&apos;&lt;td&gt;&apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">age</span> + <span class=\"hljs-string\">&apos;&lt;/td&gt;&apos;</span>;\n    tableEntry.<span class=\"hljs-title function_\">appendChild</span>(tableRow);\n\n    cursor.<span class=\"hljs-title function_\">continue</span>();\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Entries all displayed.&apos;</span>);\n  }\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"876,901"}},{"content":"<pre data-lines=\"902,919\"><code>IDBIndex &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBIndex.name`&#xff1a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x7d22;&#x5f15;&#x7684;&#x540d;&#x79f0;&#x3002;\n- `IDBIndex.objectStore`&#xff1a;&#x7d22;&#x5f15;&#x6240;&#x5728;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x3002;\n- `IDBIndex.keyPath`&#xff1a;&#x7d22;&#x5f15;&#x7684;&#x4e3b;&#x952e;&#x3002;\n- `IDBIndex.multiEntry`&#xff1a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x9488;&#x5bf9;`keyPath`&#x4e3a;&#x6570;&#x7ec4;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5982;&#x679c;&#x8bbe;&#x4e3a;`true`&#xff0c;&#x521b;&#x5efa;&#x6570;&#x7ec4;&#x65f6;&#xff0c;&#x6bcf;&#x4e2a;&#x6570;&#x7ec4;&#x6210;&#x5458;&#x90fd;&#x4f1a;&#x6709;&#x4e00;&#x4e2a;&#x6761;&#x76ee;&#xff0c;&#x5426;&#x5219;&#x6bcf;&#x4e2a;&#x6570;&#x7ec4;&#x90fd;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x6761;&#x76ee;&#x3002;\n- `IDBIndex.unique`&#xff1a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x521b;&#x5efa;&#x7d22;&#x5f15;&#x65f6;&#x662f;&#x5426;&#x5141;&#x8bb8;&#x76f8;&#x540c;&#x7684;&#x4e3b;&#x952e;&#x3002;\n\nIDBIndex &#x5bf9;&#x8c61;&#x6709;&#x4ee5;&#x4e0b;&#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x4eec;&#x90fd;&#x662f;&#x5f02;&#x6b65;&#x7684;&#xff0c;&#x7acb;&#x5373;&#x8fd4;&#x56de;&#x7684;&#x90fd;&#x662f;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;\n\n- `IDBIndex.count()`&#xff1a;&#x7528;&#x6765;&#x83b7;&#x53d6;&#x8bb0;&#x5f55;&#x7684;&#x6570;&#x91cf;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e3b;&#x952e;&#x6216; IDBKeyRange &#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x8fd9;&#x65f6;&#x53ea;&#x8fd4;&#x56de;&#x7b26;&#x5408;&#x4e3b;&#x952e;&#x7684;&#x8bb0;&#x5f55;&#x6570;&#x91cf;&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de;&#x6240;&#x6709;&#x8bb0;&#x5f55;&#x7684;&#x6570;&#x91cf;&#x3002;\n- `IDBIndex.get(key)`&#xff1a;&#x7528;&#x6765;&#x83b7;&#x53d6;&#x7b26;&#x5408;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#x7684;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;\n- `IDBIndex.getKey(key)`&#xff1a;&#x7528;&#x6765;&#x83b7;&#x53d6;&#x6307;&#x5b9a;&#x7684;&#x4e3b;&#x952e;&#x3002;\n- `IDBIndex.getAll()`&#xff1a;&#x7528;&#x6765;&#x83b7;&#x53d6;&#x6240;&#x6709;&#x7684;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x90fd;&#x662f;&#x53ef;&#x9009;&#x7684;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x7528;&#x6765;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x7528;&#x6765;&#x6307;&#x5b9a;&#x8fd4;&#x56de;&#x8bb0;&#x5f55;&#x7684;&#x6570;&#x91cf;&#x3002;&#x5982;&#x679c;&#x7701;&#x7565;&#x8fd9;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5219;&#x8fd4;&#x56de;&#x6240;&#x6709;&#x8bb0;&#x5f55;&#x3002;&#x7531;&#x4e8e;&#x83b7;&#x53d6;&#x6210;&#x529f;&#x65f6;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x5fc5;&#x987b;&#x751f;&#x6210;&#x6240;&#x6709;&#x5bf9;&#x8c61;&#xff0c;&#x6240;&#x4ee5;&#x5bf9;&#x6027;&#x80fd;&#x6709;&#x5f71;&#x54cd;&#x3002;&#x5982;&#x679c;&#x6570;&#x636e;&#x96c6;&#x6bd4;&#x8f83;&#x5927;&#xff0c;&#x5efa;&#x8bae;&#x4f7f;&#x7528; IDBCursor &#x5bf9;&#x8c61;&#x3002;\n- `IDBIndex.getAllKeys()`&#xff1a;&#x8be5;&#x65b9;&#x6cd5;&#x4e0e;`IDBIndex.getAll()`&#x65b9;&#x6cd5;&#x76f8;&#x4f3c;&#xff0c;&#x533a;&#x522b;&#x662f;&#x83b7;&#x53d6;&#x6240;&#x6709;&#x4e3b;&#x952e;&#x3002;\n- `IDBIndex.openCursor()`&#xff1a;&#x7528;&#x6765;&#x83b7;&#x53d6;&#x4e00;&#x4e2a; IDBCursor &#x5bf9;&#x8c61;&#xff0c;&#x7528;&#x6765;&#x904d;&#x5386;&#x7d22;&#x5f15;&#x91cc;&#x9762;&#x7684;&#x6240;&#x6709;&#x6761;&#x76ee;&#x3002;\n- `IDBIndex.openKeyCursor()`&#xff1a;&#x8be5;&#x65b9;&#x6cd5;&#x4e0e;`IDBIndex.openCursor()`&#x65b9;&#x6cd5;&#x76f8;&#x4f3c;&#xff0c;&#x533a;&#x522b;&#x662f;&#x904d;&#x5386;&#x6240;&#x6709;&#x6761;&#x76ee;&#x7684;&#x4e3b;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"902,919"}}],"payload":{"tag":"h2","lines":"868,869"}},{"content":"IDBCursor &#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"922,925\"><code>IDBCursor &#x5bf9;&#x8c61;&#x4ee3;&#x8868;&#x6307;&#x9488;&#x5bf9;&#x8c61;&#xff0c;&#x7528;&#x6765;&#x904d;&#x5386;&#x6570;&#x636e;&#x4ed3;&#x5e93;&#xff08;IDBObjectStore&#xff09;&#x6216;&#x7d22;&#x5f15;&#xff08;IDBIndex&#xff09;&#x7684;&#x8bb0;&#x5f55;&#x3002;\n\nIDBCursor &#x5bf9;&#x8c61;&#x4e00;&#x822c;&#x901a;&#x8fc7;`IDBObjectStore.openCursor()`&#x65b9;&#x6cd5;&#x83b7;&#x5f97;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"922,925"}},{"content":"<pre data-lines=\"926,945\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> transaction = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;rushAlbumList&apos;</span>], <span class=\"hljs-string\">&apos;readonly&apos;</span>);\n<span class=\"hljs-keyword\">var</span> objectStore = transaction.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;rushAlbumList&apos;</span>);\n\nobjectStore.<span class=\"hljs-title function_\">openCursor</span>(<span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&apos;next&apos;</span>).<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> cursor = event.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">if</span> (cursor) {\n    <span class=\"hljs-keyword\">var</span> listItem = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&apos;li&apos;</span>);\n      listItem.<span class=\"hljs-property\">innerHTML</span> = cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">albumTitle</span> + <span class=\"hljs-string\">&apos;, &apos;</span> + cursor.<span class=\"hljs-property\">value</span>.<span class=\"hljs-property\">year</span>;\n      list.<span class=\"hljs-title function_\">appendChild</span>(listItem);\n\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(cursor.<span class=\"hljs-property\">source</span>);\n      cursor.<span class=\"hljs-title function_\">continue</span>();\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Entries all displayed.&apos;</span>);\n    }\n  };\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"926,945"}},{"content":"<pre data-lines=\"946,961\"><code>IDBCursor &#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBCursor.source`&#xff1a;&#x8fd4;&#x56de;&#x6b63;&#x5728;&#x904d;&#x5386;&#x7684;&#x5bf9;&#x8c61;&#x4ed3;&#x5e93;&#x6216;&#x7d22;&#x5f15;&#x3002;\n- `IDBCursor.direction`&#xff1a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8868;&#x793a;&#x6307;&#x9488;&#x904d;&#x5386;&#x7684;&#x65b9;&#x5411;&#x3002;&#x5171;&#x6709;&#x56db;&#x4e2a;&#x53ef;&#x80fd;&#x7684;&#x503c;&#xff1a;next&#xff08;&#x4ece;&#x5934;&#x5f00;&#x59cb;&#x5411;&#x540e;&#x904d;&#x5386;&#xff09;&#x3001;nextunique&#xff08;&#x4ece;&#x5934;&#x5f00;&#x59cb;&#x5411;&#x540e;&#x904d;&#x5386;&#xff0c;&#x91cd;&#x590d;&#x7684;&#x503c;&#x53ea;&#x904d;&#x5386;&#x4e00;&#x6b21;&#xff09;&#x3001;prev&#xff08;&#x4ece;&#x5c3e;&#x90e8;&#x5f00;&#x59cb;&#x5411;&#x524d;&#x904d;&#x5386;&#xff09;&#x3001;prevunique&#xff08;&#x4ece;&#x5c3e;&#x90e8;&#x5f00;&#x59cb;&#x5411;&#x524d;&#x904d;&#x5386;&#xff0c;&#x91cd;&#x590d;&#x7684;&#x503c;&#x53ea;&#x904d;&#x5386;&#x4e00;&#x6b21;&#xff09;&#x3002;&#x8be5;&#x5c5e;&#x6027;&#x901a;&#x8fc7;`IDBObjectStore.openCursor()`&#x65b9;&#x6cd5;&#x7684;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x6307;&#x5b9a;&#xff0c;&#x4e00;&#x65e6;&#x6307;&#x5b9a;&#x5c31;&#x4e0d;&#x80fd;&#x6539;&#x53d8;&#x4e86;&#x3002;\n- `IDBCursor.key`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x8bb0;&#x5f55;&#x7684;&#x4e3b;&#x952e;&#x3002;\n- `IDBCursor.value`&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x8bb0;&#x5f55;&#x7684;&#x6570;&#x636e;&#x503c;&#x3002;\n- IDBCursor.primaryKey&#xff1a;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x8bb0;&#x5f55;&#x7684;&#x4e3b;&#x952e;&#x3002;&#x5bf9;&#x4e8e;&#x6570;&#x636e;&#x4ed3;&#x5e93;&#xff08;objectStore&#xff09;&#x6765;&#x8bf4;&#xff0c;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x7b49;&#x540c;&#x4e8e; IDBCursor.key&#xff1b;&#x5bf9;&#x4e8e;&#x7d22;&#x5f15;&#xff0c;IDBCursor.key &#x8fd4;&#x56de;&#x7d22;&#x5f15;&#x7684;&#x4f4d;&#x7f6e;&#x503c;&#xff0c;&#x8be5;&#x5c5e;&#x6027;&#x8fd4;&#x56de;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x7684;&#x4e3b;&#x952e;&#x3002;\n\nIDBCursor &#x5bf9;&#x8c61;&#x6709;&#x5982;&#x4e0b;&#x65b9;&#x6cd5;&#x3002;\n\n- `IDBCursor.advance(n)`&#xff1a;&#x6307;&#x9488;&#x5411;&#x524d;&#x79fb;&#x52a8; n &#x4e2a;&#x4f4d;&#x7f6e;&#x3002;\n- `IDBCursor.continue()`&#xff1a;&#x6307;&#x9488;&#x5411;&#x524d;&#x79fb;&#x52a8;&#x4e00;&#x4e2a;&#x4f4d;&#x7f6e;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x4e3b;&#x952e;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x8fd9;&#x65f6;&#x4f1a;&#x8df3;&#x8f6c;&#x5230;&#x8fd9;&#x4e2a;&#x4e3b;&#x952e;&#x3002;\n- `IDBCursor.continuePrimaryKey()`&#xff1a;&#x8be5;&#x65b9;&#x6cd5;&#x9700;&#x8981;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x7b2c;&#x4e00;&#x4e2a;&#x662f;`key`&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x662f;`primaryKey`&#xff0c;&#x5c06;&#x6307;&#x9488;&#x79fb;&#x5230;&#x7b26;&#x5408;&#x8fd9;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x7684;&#x4f4d;&#x7f6e;&#x3002;\n- `IDBCursor.delete()`&#xff1a;&#x7528;&#x6765;&#x5220;&#x9664;&#x5f53;&#x524d;&#x4f4d;&#x7f6e;&#x7684;&#x8bb0;&#x5f55;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x4e0d;&#x4f1a;&#x6539;&#x53d8;&#x6307;&#x9488;&#x7684;&#x4f4d;&#x7f6e;&#x3002;\n- `IDBCursor.update()`&#xff1a;&#x7528;&#x6765;&#x66f4;&#x65b0;&#x5f53;&#x524d;&#x4f4d;&#x7f6e;&#x7684;&#x8bb0;&#x5f55;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; IDBRequest &#x5bf9;&#x8c61;&#x3002;&#x5b83;&#x7684;&#x53c2;&#x6570;&#x662f;&#x8981;&#x5199;&#x5165;&#x6570;&#x636e;&#x5e93;&#x7684;&#x65b0;&#x7684;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"946,961"}}],"payload":{"tag":"h2","lines":"920,921"}},{"content":"IDBKeyRange &#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"964,974\"><code>IDBKeyRange &#x5bf9;&#x8c61;&#x4ee3;&#x8868;&#x6570;&#x636e;&#x4ed3;&#x5e93;&#xff08;object store&#xff09;&#x91cc;&#x9762;&#x7684;&#x4e00;&#x7ec4;&#x4e3b;&#x952e;&#x3002;&#x6839;&#x636e;&#x8fd9;&#x7ec4;&#x4e3b;&#x952e;&#xff0c;&#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x6570;&#x636e;&#x4ed3;&#x5e93;&#x6216;&#x7d22;&#x5f15;&#x91cc;&#x9762;&#x7684;&#x4e00;&#x7ec4;&#x8bb0;&#x5f55;&#x3002;\n\nIDBKeyRange &#x53ef;&#x4ee5;&#x53ea;&#x5305;&#x542b;&#x4e00;&#x4e2a;&#x503c;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x4e0a;&#x9650;&#x548c;&#x4e0b;&#x9650;&#x3002;&#x5b83;&#x6709;&#x56db;&#x4e2a;&#x9759;&#x6001;&#x65b9;&#x6cd5;&#xff0c;&#x7528;&#x6765;&#x6307;&#x5b9a;&#x4e3b;&#x952e;&#x7684;&#x8303;&#x56f4;&#x3002;\n\n- `IDBKeyRange.lowerBound()`&#xff1a;&#x6307;&#x5b9a;&#x4e0b;&#x9650;&#x3002;\n- `IDBKeyRange.upperBound()`&#xff1a;&#x6307;&#x5b9a;&#x4e0a;&#x9650;&#x3002;\n- `IDBKeyRange.bound()`&#xff1a;&#x540c;&#x65f6;&#x6307;&#x5b9a;&#x4e0a;&#x4e0b;&#x9650;&#x3002;\n- `IDBKeyRange.only()`&#xff1a;&#x6307;&#x5b9a;&#x53ea;&#x5305;&#x542b;&#x4e00;&#x4e2a;&#x503c;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e9b;&#x4ee3;&#x7801;&#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"964,974"}},{"content":"<pre data-lines=\"975,1003\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// All keys &#x2264; x</span>\n<span class=\"hljs-keyword\">var</span> r1 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">upperBound</span>(x);\n\n<span class=\"hljs-comment\">// All keys &lt; x</span>\n<span class=\"hljs-keyword\">var</span> r2 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">upperBound</span>(x, <span class=\"hljs-literal\">true</span>);\n\n<span class=\"hljs-comment\">// All keys &#x2265; y</span>\n<span class=\"hljs-keyword\">var</span> r3 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">lowerBound</span>(y);\n\n<span class=\"hljs-comment\">// All keys &gt; y</span>\n<span class=\"hljs-keyword\">var</span> r4 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">lowerBound</span>(y, <span class=\"hljs-literal\">true</span>);\n\n<span class=\"hljs-comment\">// All keys &#x2265; x &amp;&amp; &#x2264; y</span>\n<span class=\"hljs-keyword\">var</span> r5 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">bound</span>(x, y);\n\n<span class=\"hljs-comment\">// All keys &gt; x &amp;&amp;&lt; y</span>\n<span class=\"hljs-keyword\">var</span> r6 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">bound</span>(x, y, <span class=\"hljs-literal\">true</span>, <span class=\"hljs-literal\">true</span>);\n\n<span class=\"hljs-comment\">// All keys &gt; x &amp;&amp; &#x2264; y</span>\n<span class=\"hljs-keyword\">var</span> r7 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">bound</span>(x, y, <span class=\"hljs-literal\">true</span>, <span class=\"hljs-literal\">false</span>);\n\n<span class=\"hljs-comment\">// All keys &#x2265; x &amp;&amp;&lt; y</span>\n<span class=\"hljs-keyword\">var</span> r8 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">bound</span>(x, y, <span class=\"hljs-literal\">false</span>, <span class=\"hljs-literal\">true</span>);\n\n<span class=\"hljs-comment\">// The key = z</span>\n<span class=\"hljs-keyword\">var</span> r9 = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">only</span>(z);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"975,1003"}},{"content":"<pre data-lines=\"1004,1014\"><code>`IDBKeyRange.lowerBound()`&#x3001;`IDBKeyRange.upperBound()`&#x3001;`IDBKeyRange.bound()`&#x8fd9;&#x4e09;&#x4e2a;&#x65b9;&#x6cd5;&#x9ed8;&#x8ba4;&#x5305;&#x62ec;&#x7aef;&#x70b9;&#x503c;&#xff0c;&#x53ef;&#x4ee5;&#x4f20;&#x5165;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x4fee;&#x6539;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x3002;\n\n&#x4e0e;&#x4e4b;&#x5bf9;&#x5e94;&#xff0c;IDBKeyRange &#x5bf9;&#x8c61;&#x6709;&#x56db;&#x4e2a;&#x53ea;&#x8bfb;&#x5c5e;&#x6027;&#x3002;\n\n- `IDBKeyRange.lower`&#xff1a;&#x8fd4;&#x56de;&#x4e0b;&#x9650;\n- `IDBKeyRange.lowerOpen`&#xff1a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x4e0b;&#x9650;&#x662f;&#x5426;&#x4e3a;&#x5f00;&#x533a;&#x95f4;&#xff08;&#x5373;&#x4e0b;&#x9650;&#x662f;&#x5426;&#x6392;&#x9664;&#x5728;&#x8303;&#x56f4;&#x4e4b;&#x5916;&#xff09;\n- `IDBKeyRange.upper`&#xff1a;&#x8fd4;&#x56de;&#x4e0a;&#x9650;\n- `IDBKeyRange.upperOpen`&#xff1a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x4e0a;&#x9650;&#x662f;&#x5426;&#x4e3a;&#x5f00;&#x533a;&#x95f4;&#xff08;&#x5373;&#x4e0a;&#x9650;&#x662f;&#x5426;&#x6392;&#x9664;&#x5728;&#x8303;&#x56f4;&#x4e4b;&#x5916;&#xff09;\n\nIDBKeyRange &#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x751f;&#x6210;&#x4ee5;&#x540e;&#xff0c;&#x5c06;&#x5b83;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x8f93;&#x5165; IDBObjectStore &#x6216; IDBIndex &#x5bf9;&#x8c61;&#x7684;`openCursor()`&#x65b9;&#x6cd5;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x5728;&#x6240;&#x8bbe;&#x5b9a;&#x7684;&#x8303;&#x56f4;&#x5185;&#x8bfb;&#x53d6;&#x6570;&#x636e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1004,1014"}},{"content":"<pre data-lines=\"1015,1034\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> t = db.<span class=\"hljs-title function_\">transaction</span>([<span class=\"hljs-string\">&apos;people&apos;</span>], <span class=\"hljs-string\">&apos;readonly&apos;</span>);\n<span class=\"hljs-keyword\">var</span> store = t.<span class=\"hljs-title function_\">objectStore</span>(<span class=\"hljs-string\">&apos;people&apos;</span>);\n<span class=\"hljs-keyword\">var</span> index = store.<span class=\"hljs-title function_\">index</span>(<span class=\"hljs-string\">&apos;name&apos;</span>);\n\n<span class=\"hljs-keyword\">var</span> range = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">bound</span>(<span class=\"hljs-string\">&apos;B&apos;</span>, <span class=\"hljs-string\">&apos;D&apos;</span>);\n\nindex.<span class=\"hljs-title function_\">openCursor</span>(range).<span class=\"hljs-property\">onsuccess</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-keyword\">var</span> cursor = e.<span class=\"hljs-property\">target</span>.<span class=\"hljs-property\">result</span>;\n  <span class=\"hljs-keyword\">if</span> (cursor) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(cursor.<span class=\"hljs-property\">key</span> + <span class=\"hljs-string\">&apos;:&apos;</span>);\n\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> field <span class=\"hljs-keyword\">in</span> cursor.<span class=\"hljs-property\">value</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(cursor.<span class=\"hljs-property\">value</span>[field]);\n    }\n    cursor.<span class=\"hljs-title function_\">continue</span>();\n  }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1015,1034"}},{"content":"<pre data-lines=\"1035,1036\"><code>IDBKeyRange &#x6709;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;&#x65b9;&#x6cd5;`includes(key)`&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x67d0;&#x4e2a;&#x4e3b;&#x952e;&#x662f;&#x5426;&#x5305;&#x542b;&#x5728;&#x5f53;&#x524d;&#x8fd9;&#x4e2a;&#x4e3b;&#x952e;&#x7ec4;&#x4e4b;&#x5185;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1035,1036"}},{"content":"<pre data-lines=\"1037,1043\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> keyRangeValue = <span class=\"hljs-title class_\">IDBKeyRange</span>.<span class=\"hljs-title function_\">bound</span>(<span class=\"hljs-string\">&apos;A&apos;</span>, <span class=\"hljs-string\">&apos;K&apos;</span>, <span class=\"hljs-literal\">false</span>, <span class=\"hljs-literal\">false</span>);\n\nkeyRangeValue.<span class=\"hljs-title function_\">includes</span>(<span class=\"hljs-string\">&apos;F&apos;</span>) <span class=\"hljs-comment\">// true</span>\nkeyRangeValue.<span class=\"hljs-title function_\">includes</span>(<span class=\"hljs-string\">&apos;W&apos;</span>) <span class=\"hljs-comment\">// false</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1037,1043"}}],"payload":{"tag":"h2","lines":"962,963"}},{"content":"&#x53c2;&#x8003;&#x94fe;&#x63a5;","children":[{"content":"Raymond Camden, <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/working-with-indexeddb/\">Working With IndexedDB &#x2013; Part 1</a>","children":[],"payload":{"tag":"li","lines":"1046,1047"}},{"content":"Raymond Camden, <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/working-with-indexeddb-part-2/\">Working With IndexedDB &#x2013; Part 2</a>","children":[],"payload":{"tag":"li","lines":"1047,1048"}},{"content":"Raymond Camden, <a href=\"https://code.tutsplus.com/tutorials/working-with-indexeddb-part-3--net-36220\">Working With IndexedDB - Part 3</a>","children":[],"payload":{"tag":"li","lines":"1048,1049"}},{"content":"Tiffany Brown, <a href=\"http://dev.opera.com/articles/introduction-to-indexeddb/\">An Introduction to IndexedDB</a>","children":[],"payload":{"tag":"li","lines":"1049,1050"}},{"content":"David Fahlander, <a href=\"https://hacks.mozilla.org/2014/06/breaking-the-borders-of-indexeddb/\">Breaking the Borders of IndexedDB</a>","children":[],"payload":{"tag":"li","lines":"1050,1051"}},{"content":"TutorialsPoint, <a href=\"https://www.tutorialspoint.com/html5/html5_indexeddb.htm\">HTML5 - IndexedDB</a>","children":[],"payload":{"tag":"li","lines":"1051,1052"}}],"payload":{"tag":"h2","lines":"1044,1045"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
