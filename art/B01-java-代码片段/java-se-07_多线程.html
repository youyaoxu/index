<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"java-se-07_&#x591a;&#x7ebf;&#x7a0b;","children":[{"content":"&#x7b2c;&#x4e03;&#x7ae0; &#x591a;&#x7ebf;&#x7a0b;&#x76ee;&#x5f55;","children":[{"content":"<pre data-lines=\"4,19\"><code data-lines=\"4,19\"><span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">1</span>&#x3001;&#x6982;&#x8ff0;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">2</span>&#x3001;&#x5b9e;&#x73b0;&#x65b9;&#x5f0f;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">1</span>&#x3001;&#x65b9;&#x5f0f;&#x4e00;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">2</span>&#x3001;&#x65b9;&#x5f0f;&#x4e8c;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">3</span>&#x3001;&#x7ebf;&#x7a0b;&#x4f18;&#x5148;&#x7ea7;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">4</span>&#x3001;&#x7ebf;&#x7a0b;&#x7684;&#x63a7;&#x5236;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">5</span>&#x3001;&#x7ebf;&#x7a0b;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">6</span>&#x3001;&#x89e3;&#x51b3;&#x591a;&#x7ebf;&#x7a0b;&#x6570;&#x636e;&#x5b89;&#x5168;&#x95ee;&#x9898;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">6</span>.<span class=\"hljs-number\">1</span>&#x3001;&#x540c;&#x6b65;&#x4ee3;&#x7801;&#x5757;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">6</span>.<span class=\"hljs-number\">2</span>&#x3001;&#x666e;&#x901a;&#x540c;&#x6b65;&#x65b9;&#x6cd5;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">6</span>.<span class=\"hljs-number\">3</span>&#x3001;&#x9759;&#x6001;&#x540c;&#x6b65;&#x65b9;&#x6cd5;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">6</span>.<span class=\"hljs-number\">4</span>&#x3001;Look&#x9501;\n<span class=\"hljs-attribute\">7</span>.<span class=\"hljs-number\">7</span>&#x3001;&#x751f;&#x4ea7;&#x8005;&#x548c;&#x6d88;&#x8d39;&#x8005;&#x6a21;&#x5f0f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,19"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"7.1&#x3001;&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"22,27\"><code data-lines=\"22,27\">&#x8fdb;&#x7a0b;&#xff1a;&#x662f;&#x6b63;&#x5728;&#x8fd0;&#x884c;&#x7684;&#x7a0b;&#x5e8f;\n\n&#x7ebf;&#x7a0b;&#xff1a;&#x662f;&#x8fdb;&#x7a0b;&#x4e2d;&#x7684;&#x5355;&#x4e2a;&#x987a;&#x5e8f;&#x63a7;&#x5236;&#x6d41;&#xff0c;&#x662f;&#x4e00;&#x6761;&#x6267;&#x884c;&#x8def;&#x5f84;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"22,27"}}],"payload":{"tag":"h2","lines":"20,21"}},{"content":"7.2&#x3001;&#x5b9e;&#x73b0;&#x65b9;&#x5f0f;","children":[{"content":"7.2.1&#x3001;&#x65b9;&#x5f0f;&#x4e00;","children":[{"content":"<pre data-lines=\"34,56\"><code class=\"language-java\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyThread</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Thread</span> {\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">100</span>; i++) {\n\t\t\tSystem.out.println(getName() + <span class=\"hljs-string\">&quot;:&quot;</span> + i);\n\t\t}\n\t}\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">MyThread</span> <span class=\"hljs-variable\">my1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyThread</span>();\n\t\t<span class=\"hljs-type\">MyThread</span> <span class=\"hljs-variable\">my2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyThread</span>();\n\t\tmy1.setName(<span class=\"hljs-string\">&quot;&#x7ebf;&#x7a0b;&#x4e00;&quot;</span>);\n\t\tmy2.setName(<span class=\"hljs-string\">&quot;&#x7ebf;&#x7a0b;&#x4e8c;&quot;</span>);\n\t\tmy1.start();\n\t\tmy2.start();\n\t}\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"34,56"}}],"payload":{"tag":"h3","lines":"32,33"}},{"content":"7.2.2&#x3001;&#x65b9;&#x5f0f;&#x4e8c;","children":[{"content":"<pre data-lines=\"59,80\"><code class=\"language-java\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">MyRunnable</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">100</span>; i++) {\n\t\t\tSystem.out.println(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot;:&quot;</span> + i);\n\t\t}\n\t}\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">MyRunnable</span> <span class=\"hljs-variable\">my</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MyRunnable</span>();\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(my, <span class=\"hljs-string\">&quot;&#x7ebf;&#x7a0b;&#x4e00;&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(my, <span class=\"hljs-string\">&quot;&#x7ebf;&#x7a0b;&#x4e8c;&quot;</span>);\n\t\tt1.start();\n\t\tt2.start();\n\t}\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,80"}}],"payload":{"tag":"h3","lines":"57,58"}}],"payload":{"tag":"h2","lines":"30,31"}},{"content":"7.3&#x3001;&#x7ebf;&#x7a0b;&#x4f18;&#x5148;&#x7ea7;","children":[{"content":"<pre data-lines=\"83,118\"><code class=\"language-java\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ThreadPriority</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Thread</span> {\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">100</span>; i++) {\n\t\t\tSystem.out.println(getName() + <span class=\"hljs-string\">&quot;:&quot;</span> + i);\n\t\t}\n\t}\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">ThreadPriority</span> <span class=\"hljs-variable\">tp1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ThreadPriority</span>();\n\t\t<span class=\"hljs-type\">ThreadPriority</span> <span class=\"hljs-variable\">tp2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ThreadPriority</span>();\n\t\t<span class=\"hljs-type\">ThreadPriority</span> <span class=\"hljs-variable\">tp3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ThreadPriority</span>();\n\t\t<span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;&#x7ebf;&#x7a0b;&#x7684;&#x540d;&#x79f0;</span>\n\t\ttp1.setName(<span class=\"hljs-string\">&quot;&#x9ad8;&#x94c1;&quot;</span>);\n\t\ttp2.setName(<span class=\"hljs-string\">&quot;&#x98de;&#x673a;&quot;</span>);\n\t\ttp3.setName(<span class=\"hljs-string\">&quot;&#x6c7d;&#x8f66;&quot;</span>);\n\t\t<span class=\"hljs-comment\">// &#x8fd4;&#x56de;&#x7ebf;&#x7a0b;&#x4f18;&#x5148;&#x7ea7;</span>\n\t\tSystem.out.println(tp1.getPriority());\n\t\tSystem.out.println(tp2.getPriority());\n\t\tSystem.out.println(tp3.getPriority());\n\t\t<span class=\"hljs-comment\">// &#x8bbe;&#x7f6e;&#x7ebf;&#x7a0b;&#x4f18;&#x5148;&#x7ea7;</span>\n\t\ttp1.setPriority(<span class=\"hljs-number\">5</span>);\n\t\ttp2.setPriority(<span class=\"hljs-number\">10</span>);\n\t\ttp3.setPriority(<span class=\"hljs-number\">1</span>);\n\t\t<span class=\"hljs-comment\">// &#x542f;&#x52a8;&#x6240;&#x6709;&#x7684;&#x7ebf;&#x7a0b;</span>\n\t\ttp1.start();\n\t\ttp2.start();\n\t\ttp3.start();\n\t}\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"83,118"}}],"payload":{"tag":"h2","lines":"81,82"}},{"content":"7.4&#x3001;&#x7ebf;&#x7a0b;&#x7684;&#x63a7;&#x5236;","children":[{"content":"7.6.1&#x3001;&#x540c;&#x6b65;&#x4ee3;&#x7801;&#x5757;","children":[{"content":"<pre data-lines=\"236,273\"><code data-lines=\"236,273\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SellTicket</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\n&#x200b;\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">tickets</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">100</span>;\n&#x200b;\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">obj</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Object</span>();\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\n\t\t\t<span class=\"hljs-keyword\">synchronized</span> (obj) {\n\t\t\t\t<span class=\"hljs-keyword\">if</span> (tickets &gt; <span class=\"hljs-number\">0</span>) {\n\t\t\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\t\t\tThread.sleep(<span class=\"hljs-number\">100</span>);\n\t\t\t\t\t} <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\tSystem.out.println(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot;&#x6b63;&#x5728;&#x51fa;&#x552e;&#x7b2c;&quot;</span> + tickets + <span class=\"hljs-string\">&quot;&#x5f20;&#x7968;&quot;</span>);\n\t\t\t\t\ttickets--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">SellTicket</span> <span class=\"hljs-variable\">st</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SellTicket</span>();\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;1&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;2&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;3&quot;</span>);\n\t\tt1.start();\n\t\tt2.start();\n\t\tt3.start();\n\t}\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,273"}}],"payload":{"tag":"h3","lines":"234,235"}},{"content":"7.6.2&#x3001;&#x666e;&#x901a;&#x540c;&#x6b65;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"276,313\"><code data-lines=\"276,313\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SellTicket</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">tickets</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">100</span>;\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\n\t\t\tsellTicket();\n\t\t}\n\t}\n\t\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">synchronized</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">sellTicket</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">if</span> (tickets &gt; <span class=\"hljs-number\">0</span>) {\n\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\tThread.sleep(<span class=\"hljs-number\">100</span>);\n\t\t\t} <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t\tSystem.out.println(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot;&#x6b63;&#x5728;&#x51fa;&#x552e;&#x7b2c;&quot;</span> + tickets + <span class=\"hljs-string\">&quot;&#x5f20;&#x7968;&quot;</span>);\n\t\t\ttickets--;\n\t\t}\n\t}\n\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">SellTicket</span> <span class=\"hljs-variable\">st</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SellTicket</span>();\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;1&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;2&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;3&quot;</span>);\n\t\tt1.start();\n\t\tt2.start();\n\t\tt3.start();\n\t}\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"276,313"}}],"payload":{"tag":"h3","lines":"274,275"}},{"content":"7.6.3&#x3001;&#x9759;&#x6001;&#x540c;&#x6b65;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"316,353\"><code data-lines=\"316,353\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SellTicket</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">tickets</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">100</span>;\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\n\t\t\tsellTicket();\n\t\t}\n\t}\n\t\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">synchronized</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">sellTicket</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">if</span> (tickets &gt; <span class=\"hljs-number\">0</span>) {\n\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\tThread.sleep(<span class=\"hljs-number\">100</span>);\n\t\t\t} <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t\tSystem.out.println(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot;&#x6b63;&#x5728;&#x51fa;&#x552e;&#x7b2c;&quot;</span> + tickets + <span class=\"hljs-string\">&quot;&#x5f20;&#x7968;&quot;</span>);\n\t\t\ttickets--;\n\t\t}\n\t}\n\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">SellTicket</span> <span class=\"hljs-variable\">st</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SellTicket</span>();\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;1&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;2&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;3&quot;</span>);\n\t\tt1.start();\n\t\tt2.start();\n\t\tt3.start();\n\t}\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"316,353"}}],"payload":{"tag":"h3","lines":"314,315"}},{"content":"7.6.4&#x3001;Look&#x9501;","children":[{"content":"<pre data-lines=\"356,400\"><code data-lines=\"356,400\"><span class=\"hljs-keyword\">import</span> java.util.concurrent.locks.Lock;\n<span class=\"hljs-keyword\">import</span> java.util.concurrent.locks.ReentrantLock;\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SellTicket</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">tickets</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">100</span>;\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">Lock</span> <span class=\"hljs-variable\">lock</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ReentrantLock</span>();\n\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\n\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\t<span class=\"hljs-comment\">// &#x83b7;&#x5f97;&#x9501;</span>\n\t\t\t\tlock.lock();\n\t\t\t\t<span class=\"hljs-keyword\">if</span> (tickets &gt; <span class=\"hljs-number\">0</span>) {\n\t\t\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\t\t\tThread.sleep(<span class=\"hljs-number\">100</span>);\n\t\t\t\t\t} <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\tSystem.out.println(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot;&#x6b63;&#x5728;&#x51fa;&#x552e;&#x7b2c;&quot;</span> + tickets + <span class=\"hljs-string\">&quot;&#x5f20;&#x7968;&quot;</span>);\n\t\t\t\t\ttickets--;\n\t\t\t\t}\n\t\t\t} <span class=\"hljs-keyword\">finally</span> {\n\t\t\t\t<span class=\"hljs-comment\">// &#x91ca;&#x653e;&#x9501;</span>\n\t\t\t\tlock.unlock();\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">SellTicket</span> <span class=\"hljs-variable\">st</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">SellTicket</span>();\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;1&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;2&quot;</span>);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t3</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(st, <span class=\"hljs-string\">&quot;&#x7a97;&#x53e3;3&quot;</span>);\n\t\tt1.start();\n\t\tt2.start();\n\t\tt3.start();\n\t}\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"356,400"}}],"payload":{"tag":"h3","lines":"354,355"}}],"payload":{"tag":"h2","lines":"119,120"}},{"content":"7.7&#x3001;&#x751f;&#x4ea7;&#x8005;&#x548c;&#x6d88;&#x8d39;&#x8005;&#x6a21;&#x5f0f;","children":[{"content":"<pre data-lines=\"403,498\"><code data-lines=\"403,498\">&#x6982;&#x8ff0;&#xff1a;&#x751f;&#x4ea7;&#x8005;&#x6d88;&#x8d39;&#x8005;&#x6a21;&#x5f0f;&#x662f;&#x4e00;&#x4e2a;&#x5341;&#x5206;&#x7ecf;&#x5178;&#x7684;&#x591a;&#x7ebf;&#x7a0b;&#x534f;&#x4f5c;&#x7684;&#x6a21;&#x5f0f;&#xff0c;&#x5f04;&#x61c2;&#x751f;&#x4ea7;&#x8005;&#x6d88;&#x8d39;&#x8005;&#x95ee;&#x9898;&#x80fd;&#x591f;&#x8ba9;&#x6211;&#x4eec;&#x5bf9;&#x591a;&#x7ebf;&#x7a0b;&#x7f16;&#x7a0b;&#x7684;&#x7406;&#x89e3;&#x66f4;&#x52a0;&#x6df1;&#x523b;&#x3002;\n&#x6f14;&#x793a;&#xff1a;\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Box</span> {\n\t<span class=\"hljs-comment\">// &#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x6210;&#x5458;&#x53d8;&#x91cf;&#xff0c;&#x8868;&#x793a;&#x7b2c;&#x51e0;&#x74f6;&#x725b;&#x5976;</span>\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">int</span> milk;\n\t<span class=\"hljs-comment\">// &#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x6210;&#x5458;&#x53d8;&#x91cf;&#xff0c;&#x8868;&#x793a;&#x5976;&#x7bb1;&#x7684;&#x72b6;&#x6001;</span>\n\t<span class=\"hljs-keyword\">private</span> <span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">state</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>;\n\n\t<span class=\"hljs-comment\">// &#x5b58;&#x50a8;&#x725b;&#x5976;</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">synchronized</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">put</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> milk)</span> {\n\t\t<span class=\"hljs-comment\">// &#x5982;&#x679c;&#x6709;&#x725b;&#x5976;&#xff0c;&#x7b49;&#x5f85;&#x6d88;&#x8d39;</span>\n\t\t<span class=\"hljs-keyword\">if</span> (state) {\n\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\twait();\n\t\t\t} <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\t<span class=\"hljs-comment\">// &#x5982;&#x679c;&#x6ca1;&#x6709;&#x725b;&#x5976;&#xff0c;&#x5c31;&#x751f;&#x4ea7;&#x725b;&#x5976;</span>\n\t\t<span class=\"hljs-built_in\">this</span>.milk = milk;\n\t\tSystem.out.println(<span class=\"hljs-string\">&quot;&#x9001;&#x5976;&#x5de5;&#x9001;&#x7b2c;&quot;</span> + <span class=\"hljs-built_in\">this</span>.milk + <span class=\"hljs-string\">&quot;&#x74f6;&#x5976;&quot;</span>);\n\t\t<span class=\"hljs-comment\">// &#x751f;&#x4ea7;&#x5b8c;&#x6bd5;&#x4e4b;&#x540e;&#xff0c;&#x4fee;&#x6539;&#x5976;&#x7bb1;&#x72b6;&#x6001;</span>\n\t\tstate = <span class=\"hljs-literal\">true</span>;\n\t\t<span class=\"hljs-comment\">// &#x5524;&#x9192;&#x5176;&#x5b83;&#x7b49;&#x5f85;&#x7684;&#x7ebf;&#x7a0b;</span>\n\t\tnotifyAll();\n\t}\n\t\n\t<span class=\"hljs-comment\">// &#x83b7;&#x53d6;&#x725b;&#x5976;</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">synchronized</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">get</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-comment\">// &#x5982;&#x679c;&#x6ca1;&#x6709;&#x725b;&#x5976;&#xff0c;&#x7b49;&#x5f85;&#x751f;&#x4ea7;</span>\n\t\t<span class=\"hljs-keyword\">if</span> (!state) {\n\t\t\t<span class=\"hljs-keyword\">try</span> {\n\t\t\t\twait();\n\t\t\t} <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\t<span class=\"hljs-comment\">// &#x5982;&#x679c;&#x6709;&#x725b;&#x5976;&#xff0c;&#x5c31;&#x6d88;&#x8d39;&#x725b;&#x5976;</span>\n\t\tSystem.out.println(<span class=\"hljs-string\">&quot;&#x7528;&#x6237;&#x62ff;&#x5230;&#x7b2c;&quot;</span> + <span class=\"hljs-built_in\">this</span>.milk + <span class=\"hljs-string\">&quot;&#x74f6;&#x5976;&quot;</span>);\n\t\t<span class=\"hljs-comment\">// &#x6d88;&#x8d39;&#x5b8c;&#x6bd5;&#x4e4b;&#x540e;&#xff0c;&#x4fee;&#x6539;&#x5976;&#x7bb1;&#x72b6;&#x6001;</span>\n\t\tstate = <span class=\"hljs-literal\">false</span>;\n\t\t<span class=\"hljs-comment\">// &#x5524;&#x9192;&#x5176;&#x5b83;&#x7b49;&#x5f85;&#x7684;&#x7ebf;&#x7a0b;</span>\n\t\tnotifyAll();\n\t}\n\n}\n\n<span class=\"hljs-comment\">// &#x751f;&#x4ea7;&#x8005;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Producer</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\t<span class=\"hljs-keyword\">private</span> Box b;\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Producer</span><span class=\"hljs-params\">(Box b)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.b = b;\n\t}\n\t\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">1</span>; i &lt;= <span class=\"hljs-number\">5</span>; i++) {\n\t\t\tb.put(i);\n\t\t}\n\t}\n\n}\n\n<span class=\"hljs-comment\">// &#x6d88;&#x8d39;&#x8005;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Customer</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Runnable</span> {\n\t<span class=\"hljs-keyword\">private</span> Box b;\n\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">Customer</span><span class=\"hljs-params\">(Box b)</span> {\n\t\t<span class=\"hljs-built_in\">this</span>.b = b;\n\t}\n\t\n\t<span class=\"hljs-meta\">@Override</span>\t\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">run</span><span class=\"hljs-params\">()</span> {\n\t\t<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\n\t\t\tb.get();\n\t\t}\n\t}\n\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Main</span> {\n\t<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n\t\t<span class=\"hljs-type\">Box</span> <span class=\"hljs-variable\">b</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Box</span>();\n\t\t<span class=\"hljs-type\">Producer</span> <span class=\"hljs-variable\">p</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Producer</span>(b);\n\t\t<span class=\"hljs-type\">Customer</span> <span class=\"hljs-variable\">c</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Customer</span>(b);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t1</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(p);\n\t\t<span class=\"hljs-type\">Thread</span> <span class=\"hljs-variable\">t2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Thread</span>(c);\n\t\tt1.start();\n\t\tt2.start();\n\t}\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"403,498"}}],"payload":{"tag":"h2","lines":"401,402"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
