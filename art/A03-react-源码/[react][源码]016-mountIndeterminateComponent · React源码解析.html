<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"mountIndeterminateComponent","children":[{"content":"<pre data-lines=\"2,5\"><code>&#x5224;&#x65ad;`_current`&#x662f;&#x5426;&#x5b58;&#x5728;&#x7136;&#x540e;&#x505a;&#x7684;&#x64cd;&#x4f5c;&#x4e3b;&#x8981;&#x662f;&#x56e0;&#x4e3a;&#xff1a;`IndeterminateComponent`&#x53ea;&#x6709;&#x5728;&#x7ec4;&#x4ef6;&#x88ab;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x624d;&#x4f1a;&#x51fa;&#x73b0;&#xff0c;&#x5728;&#x7ecf;&#x8fc7;&#x7b2c;&#x4e00;&#x6b21;&#x6e32;&#x67d3;&#x4e4b;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x4f1a;&#x66f4;&#x65b0;&#x7ec4;&#x4ef6;&#x7684;&#x7c7b;&#x578b;&#xff0c;&#x4e5f;&#x5c31;&#x662f;`Fiber.tag`&#x3002;&#x5982;&#x679c;&#x51fa;&#x73b0;&#x4e86;`_current`&#x5b58;&#x5728;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x90a3;&#x4e48;&#x53ef;&#x80fd;&#x662f;&#x56e0;&#x4e3a;&#x6e32;&#x67d3;&#x65f6;&#x6709;`Suspend`&#x7684;&#x60c5;&#x51b5;&#x3002;\n\n&#x5bf9;&#x4e8e;`ClassComponent`&#x548c;`FunctionalComponent`&#x7684;&#x5224;&#x65ad;&#x6761;&#x4ef6;&#x4ec5;&#x4ec5;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2,5"}},{"content":"<pre data-lines=\"6,15\"><code data-lines=\"6,15\"><span class=\"hljs-keyword\">if</span> (\n  <span class=\"hljs-keyword\">typeof</span> value === <span class=\"hljs-string\">&apos;object&apos;</span> &amp;&amp;\n  value !== <span class=\"hljs-literal\">null</span> &amp;&amp;\n  <span class=\"hljs-keyword\">typeof</span> value.render === <span class=\"hljs-string\">&apos;function&apos;</span> &amp;&amp;\n  value.&#x24;&#x24;<span class=\"hljs-keyword\">typeof</span> === <span class=\"hljs-literal\">undefined</span>\n)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,15"}},{"content":"<pre data-lines=\"16,17\"><code>&#x8bf4;&#x660e;`FunctionalComponent`&#x6211;&#x4eec;&#x8fd9;&#x4e48;&#x4e9b;&#xff0c;&#x4f1a;&#x88ab;&#x5f53;&#x505a;`ClassComponent`&#x5904;&#x7406;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"16,17"}},{"content":"<pre data-lines=\"18,33\"><code data-lines=\"18,33\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;react&apos;</span>\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">TestIndeterminateComponent</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-title function_\">componentDidMount</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;invoker&apos;</span>)\n    },\n    <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>aaa<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span></span>\n    },\n  }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"18,33"}},{"content":"<pre data-lines=\"34,40\"><code>**&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x7ec4;&#x4ef6;&#x4f1a;&#x662f;`IndeterminateComponent`&#xff1f;**\n\n`FunctionalComponent`&#x5728;&#x7b2c;&#x4e00;&#x6b21;&#x521b;&#x5efa; Fiber &#x7684;&#x65f6;&#x5019;&#x5c31;&#x662f;&#xff0c;&#x8be6;&#x7ec6;&#x770b;`createFiberFormTypeAndProps`&#x65b9;&#x6cd5;&#x3002;\n\n*   [`updateClassComponent`](https://react.jokcy.me/book/flow/begin-work/update-class-component.html)\n*   [`updateFunctionalComponent`](https://react.jokcy.me/book/flow/begin-work/update-functional-component.html)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"34,40"}},{"content":"<pre data-lines=\"41,121\"><code data-lines=\"41,121\">\n<span class=\"hljs-function\">function <span class=\"hljs-title\">mountIndeterminateComponent</span>(<span class=\"hljs-params\">\n  _current,\n  workInProgress,\n  Component,\n  renderExpirationTime,\n</span>)</span> {\n  <span class=\"hljs-keyword\">if</span> (_current !== <span class=\"hljs-literal\">null</span>) {\n    \n    \n    \n    \n    _current.alternate = <span class=\"hljs-literal\">null</span>\n    workInProgress.alternate = <span class=\"hljs-literal\">null</span>\n    \n    workInProgress.effectTag |= Placement\n  }\n\n  <span class=\"hljs-keyword\">const</span> props = workInProgress.pendingProps\n  <span class=\"hljs-keyword\">const</span> unmaskedContext = getUnmaskedContext(workInProgress, Component, <span class=\"hljs-literal\">false</span>)\n  <span class=\"hljs-keyword\">const</span> context = getMaskedContext(workInProgress, unmaskedContext)\n\n  prepareToReadContext(workInProgress, renderExpirationTime)\n\n  <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">value</span>\n\n  <span class=\"hljs-keyword\">value</span> = Component(props, context)\n  \n  workInProgress.effectTag |= <span class=\"hljs-function\">PerformedWork\n\n  <span class=\"hljs-title\">if</span> (<span class=\"hljs-params\">\n    <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">value</span> === <span class=\"hljs-string\">&apos;object&apos;</span> &amp;&amp;\n    <span class=\"hljs-keyword\">value</span> !== <span class=\"hljs-literal\">null</span> &amp;&amp;\n    <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">value</span>.render === <span class=\"hljs-string\">&apos;function&apos;</span> &amp;&amp;\n    <span class=\"hljs-keyword\">value</span>.&#x24;&#x24;<span class=\"hljs-keyword\">typeof</span> === undefined\n  </span>)</span> {\n    \n    workInProgress.tag = ClassComponent\n\n    <span class=\"hljs-keyword\">let</span> hasContext = <span class=\"hljs-function\"><span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-title\">if</span> (<span class=\"hljs-params\">isLegacyContextProvider(Component</span>))</span> {\n      hasContext = <span class=\"hljs-function\"><span class=\"hljs-literal\">true</span>\n      <span class=\"hljs-title\">pushLegacyContextProvider</span>(<span class=\"hljs-params\">workInProgress</span>)\n    } <span class=\"hljs-keyword\">else</span></span> {\n      hasContext = <span class=\"hljs-literal\">false</span>\n    }\n\n    workInProgress.memoizedState =\n      <span class=\"hljs-keyword\">value</span>.state !== <span class=\"hljs-literal\">null</span> &amp;&amp; <span class=\"hljs-keyword\">value</span>.state !== undefined ? <span class=\"hljs-keyword\">value</span>.state : <span class=\"hljs-literal\">null</span>\n\n    <span class=\"hljs-keyword\">const</span> getDerivedStateFromProps = Component.<span class=\"hljs-function\">getDerivedStateFromProps\n    <span class=\"hljs-title\">if</span> (<span class=\"hljs-params\"><span class=\"hljs-keyword\">typeof</span> getDerivedStateFromProps === <span class=\"hljs-string\">&apos;function&apos;</span></span>)</span> {\n      applyDerivedStateFromProps(\n        workInProgress,\n        Component,\n        getDerivedStateFromProps,\n        props,\n      )\n    }\n\n    adoptClassInstance(workInProgress, <span class=\"hljs-keyword\">value</span>)\n    mountClassInstance(workInProgress, Component, props, renderExpirationTime)\n    <span class=\"hljs-keyword\">return</span> finishClassComponent(\n      <span class=\"hljs-literal\">null</span>,\n      workInProgress,\n      Component,\n      <span class=\"hljs-literal\">true</span>,\n      hasContext,\n      renderExpirationTime,\n    )\n  } <span class=\"hljs-keyword\">else</span> {\n    \n    workInProgress.tag = <span class=\"hljs-function\">FunctionComponent\n    <span class=\"hljs-title\">reconcileChildren</span>(<span class=\"hljs-params\"><span class=\"hljs-literal\">null</span>, workInProgress, <span class=\"hljs-keyword\">value</span>, renderExpirationTime</span>)\n    <span class=\"hljs-keyword\">return</span> workInProgress.child\n  }\n}\n\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"41,121"}},{"content":"<img src=\"https://static.coursebetter.com/202112/Jokcy%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81.png\" alt>","children":[],"payload":{"tag":"img","lines":"122,123"}},{"content":"<img src=\"https://static.coursebetter.com/202112/Jokcy%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81.png\" alt>","children":[],"payload":{"tag":"img","lines":"126,127"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
