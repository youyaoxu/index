<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"https://www.cnblogs.com/xiaohuochai/p/6370952.html\">canvas&#x63a2;&#x7167;&#x706f;&#x6548;&#x679c;</a><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoklEQVQ4T+2T4Q2CMBCFv27CBjgCG+gIjAAbOAIjOIJs4Ai6gRvIBpjXXCOp19T/8pJLoTneXcj3Ah91wAV4bu68xwXoAZ2EzEAmE9AWTB6AelRDyaAx9zgh0wE4ATczcTdIE7wl0oe7wX/8RMHigfQTB3fDdM1IEvYyONdIVEOSqDwCY2Z2NaS/UNbqMSQmvauUPlfbNKpBSdTUVyXSs/XyBlRCNBG20I28AAAAAElFTkSuQmCC\" alt=\"img\">","children":[{"content":"<pre data-lines=\"2,7\"><code>&#x3000;&#x3000;canvas&#x4e2d;&#x7684;clip()&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x4ece;&#x539f;&#x59cb;&#x753b;&#x5e03;&#x4e2d;&#x526a;&#x5207;&#x4efb;&#x610f;&#x5f62;&#x72b6;&#x548c;&#x5c3a;&#x5bf8;&#x3002;&#x4e00;&#x65e6;&#x526a;&#x5207;&#x4e86;&#x67d0;&#x4e2a;&#x533a;&#x57df;&#xff0c;&#x5219;&#x6240;&#x6709;&#x4e4b;&#x540e;&#x7684;&#x7ed8;&#x56fe;&#x90fd;&#x4f1a;&#x88ab;&#x9650;&#x5236;&#x5728;&#x88ab;&#x526a;&#x5207;&#x7684;&#x533a;&#x57df;&#x5185;(&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#x753b;&#x5e03;&#x4e0a;&#x7684;&#x5176;&#x4ed6;&#x533a;&#x57df;)\n\n&#x3000;&#x3000;&#x4e5f;&#x53ef;&#x4ee5;&#x5728;&#x4f7f;&#x7528;clip()&#x65b9;&#x6cd5;&#x524d;&#x901a;&#x8fc7;&#x4f7f;&#x7528;save()&#x65b9;&#x6cd5;&#x5bf9;&#x5f53;&#x524d;&#x753b;&#x5e03;&#x533a;&#x57df;&#x8fdb;&#x884c;&#x4fdd;&#x5b58;&#xff0c;&#x5e76;&#x5728;&#x4ee5;&#x540e;&#x7684;&#x4efb;&#x610f;&#x65f6;&#x95f4;&#x901a;&#x8fc7;restore()&#x65b9;&#x6cd5;&#x5bf9;&#x5176;&#x8fdb;&#x884c;&#x6062;&#x590d;\n\n&#x3000;&#x3000;&#x63a5;&#x4e0b;&#x6765;&#x4f7f;&#x7528;clip()&#x65b9;&#x6cd5;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x63a2;&#x7167;&#x706f;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2,7"}},{"content":"<pre data-lines=\"12,116\"><code data-lines=\"12,116\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;</span>&#x53d8;&#x6362;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;con&quot;</span>&gt;</span>&#x6682;&#x505c;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">canvas</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;canvas&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;400&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;290&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;border:1px solid black&quot;</span>&gt;</span>&#x5f53;&#x524d;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;canvas&#xff0c;&#x8bf7;&#x66f4;&#x6362;&#x6d4f;&#x89c8;&#x5668;&#x540e;&#x518d;&#x8bd5;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">canvas</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\nbtn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){history.<span class=\"hljs-title function_\">go</span>();}\ncon.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">innerHTML</span> == <span class=\"hljs-string\">&apos;&#x6682;&#x505c;&apos;</span>){\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-string\">&apos;&#x6062;&#x590d;&apos;</span>;\n        <span class=\"hljs-built_in\">clearInterval</span>(oTimer);\n    }<span class=\"hljs-keyword\">else</span>{\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-string\">&apos;&#x6682;&#x505c;&apos;</span>; \n        oTimer = <span class=\"hljs-built_in\">setInterval</span>(fnInterval,<span class=\"hljs-number\">50</span>);\n    }\n}\n<span class=\"hljs-keyword\">var</span> canvas = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;canvas&apos;</span>);\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x753b;&#x5e03;&#x5bbd;&#x9ad8;</span>\n<span class=\"hljs-keyword\">var</span> H=<span class=\"hljs-number\">290</span>,W=<span class=\"hljs-number\">400</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x63a2;&#x7167;&#x706f;</span>\n<span class=\"hljs-keyword\">var</span> ball = {};\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x7167;&#x7247;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">IMG</span>;\n<span class=\"hljs-comment\">//&#x5b58;&#x50a8;&#x7167;&#x7247;&#x5730;&#x5740;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">URL</span> = <span class=\"hljs-string\">&apos;http://sandbox.runjs.cn/uploads/rs/26/ddzmgynp/chunfen.jpg&apos;</span>;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">initial</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">if</span>(canvas.<span class=\"hljs-property\">getContext</span>){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        <span class=\"hljs-keyword\">var</span> tempR = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*<span class=\"hljs-number\">30</span>+<span class=\"hljs-number\">20</span>);\n        <span class=\"hljs-keyword\">var</span> tempX = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*(W-tempR) + tempR);\n        <span class=\"hljs-keyword\">var</span> tempY = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>()*(H-tempR) + tempR)        \n        ball = {\n            <span class=\"hljs-attr\">x</span>:tempX,\n            <span class=\"hljs-attr\">y</span>:tempY,\n            <span class=\"hljs-attr\">r</span>:tempR,\n            <span class=\"hljs-attr\">stepX</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>() * <span class=\"hljs-number\">21</span> -<span class=\"hljs-number\">10</span>),\n            <span class=\"hljs-attr\">stepY</span>:<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>(<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">random</span>() * <span class=\"hljs-number\">21</span> -<span class=\"hljs-number\">10</span>)\n        };\n        <span class=\"hljs-variable constant_\">IMG</span> = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&apos;img&apos;</span>);\n        <span class=\"hljs-variable constant_\">IMG</span>.<span class=\"hljs-property\">src</span>=<span class=\"hljs-variable constant_\">URL</span>;\n        <span class=\"hljs-variable constant_\">IMG</span>.<span class=\"hljs-property\">onload</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n            cxt.<span class=\"hljs-title function_\">drawImage</span>(<span class=\"hljs-variable constant_\">IMG</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n        }   \n    }    \n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">update</span>(<span class=\"hljs-params\"></span>){\n    ball.<span class=\"hljs-property\">x</span> += ball.<span class=\"hljs-property\">stepX</span>;\n    ball.<span class=\"hljs-property\">y</span> += ball.<span class=\"hljs-property\">stepY</span>; \n    <span class=\"hljs-title function_\">bumpTest</span>(ball);\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">bumpTest</span>(<span class=\"hljs-params\">ele</span>){\n    <span class=\"hljs-comment\">//&#x5de6;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-property\">x</span> &lt;= ele.<span class=\"hljs-property\">r</span>){\n        ele.<span class=\"hljs-property\">x</span> = ele.<span class=\"hljs-property\">r</span>;\n        ele.<span class=\"hljs-property\">stepX</span> = -ele.<span class=\"hljs-property\">stepX</span>;\n    }\n    <span class=\"hljs-comment\">//&#x53f3;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-property\">x</span> &gt;= W - ele.<span class=\"hljs-property\">r</span>){\n        ele.<span class=\"hljs-property\">x</span> = W - ele.<span class=\"hljs-property\">r</span>;\n        ele.<span class=\"hljs-property\">stepX</span> = -ele.<span class=\"hljs-property\">stepX</span>;\n    }\n    <span class=\"hljs-comment\">//&#x4e0a;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-property\">y</span> &lt;= ele.<span class=\"hljs-property\">r</span>){\n        ele.<span class=\"hljs-property\">y</span> = ele.<span class=\"hljs-property\">r</span>;\n        ele.<span class=\"hljs-property\">stepY</span> = -ele.<span class=\"hljs-property\">stepY</span>;\n    }\n    <span class=\"hljs-comment\">//&#x4e0b;&#x4fa7;</span>\n    <span class=\"hljs-keyword\">if</span>(ele.<span class=\"hljs-property\">y</span> &gt;= H - ele.<span class=\"hljs-property\">r</span>){\n        ele.<span class=\"hljs-property\">y</span> = H - ele.<span class=\"hljs-property\">r</span>;\n        ele.<span class=\"hljs-property\">stepY</span> = -ele.<span class=\"hljs-property\">stepY</span>;\n    }\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">render</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-comment\">//&#x91cd;&#x7f6e;&#x753b;&#x5e03;&#x9ad8;&#x5ea6;&#xff0c;&#x8fbe;&#x5230;&#x6e05;&#x7a7a;&#x753b;&#x5e03;&#x7684;&#x6548;&#x679c;</span>\n    canvas.<span class=\"hljs-property\">height</span> = H;    \n    <span class=\"hljs-keyword\">if</span>(canvas.<span class=\"hljs-property\">getContext</span>){\n        <span class=\"hljs-keyword\">var</span> cxt = canvas.<span class=\"hljs-title function_\">getContext</span>(<span class=\"hljs-string\">&apos;2d&apos;</span>);\n        cxt.<span class=\"hljs-title function_\">save</span>();\n        <span class=\"hljs-comment\">//&#x5c06;&#x753b;&#x5e03;&#x80cc;&#x666f;&#x6d82;&#x9ed1;</span>\n        cxt.<span class=\"hljs-title function_\">beginPath</span>();\n        cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;#000&apos;</span>;\n        cxt.<span class=\"hljs-title function_\">fillRect</span>(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,W,H);\n        <span class=\"hljs-comment\">//&#x6e32;&#x67d3;&#x63a2;&#x7167;&#x706f;</span>\n        cxt.<span class=\"hljs-title function_\">beginPath</span>();\n        cxt.<span class=\"hljs-title function_\">arc</span>(ball.<span class=\"hljs-property\">x</span>,ball.<span class=\"hljs-property\">y</span>,ball.<span class=\"hljs-property\">r</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>*<span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-property\">PI</span>);\n        cxt.<span class=\"hljs-property\">fillStyle</span> = <span class=\"hljs-string\">&apos;#000&apos;</span>;\n        cxt.<span class=\"hljs-title function_\">fill</span>(); \n        cxt.<span class=\"hljs-title function_\">clip</span>();      \n        <span class=\"hljs-comment\">//&#x7531;&#x4e8e;&#x4f7f;&#x7528;&#x4e86;clip()&#xff0c;&#x753b;&#x5e03;&#x80cc;&#x666f;&#x56fe;&#x7247;&#x4f1a;&#x51fa;&#x73b0;&#x5728;clip()&#x533a;&#x57df;&#x5185;</span>\n        cxt.<span class=\"hljs-title function_\">drawImage</span>(<span class=\"hljs-variable constant_\">IMG</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>);\n        cxt.<span class=\"hljs-title function_\">restore</span>();\n    }\n\n}\n<span class=\"hljs-title function_\">initial</span>();\n<span class=\"hljs-built_in\">clearInterval</span>(oTimer);\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fnInterval</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-comment\">//&#x66f4;&#x65b0;&#x8fd0;&#x52a8;&#x72b6;&#x6001;</span>\n    <span class=\"hljs-title function_\">update</span>();\n    <span class=\"hljs-comment\">//&#x6e32;&#x67d3;</span>\n    <span class=\"hljs-title function_\">render</span>();    \n}\n<span class=\"hljs-keyword\">var</span> oTimer = <span class=\"hljs-built_in\">setInterval</span>(fnInterval,<span class=\"hljs-number\">50</span>);\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"12,116"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
