<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Server-Sent Events","children":[{"content":"&#x7b80;&#x4ecb; <a href=\"#%E7%AE%80%E4%BB%8B\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"5,10\"><code>&#x670d;&#x52a1;&#x5668;&#x5411;&#x5ba2;&#x6237;&#x7aef;&#x63a8;&#x9001;&#x6570;&#x636e;&#xff0c;&#x6709;&#x5f88;&#x591a;&#x89e3;&#x51b3;&#x65b9;&#x6848;&#x3002;&#x9664;&#x4e86;&#x201c;&#x8f6e;&#x8be2;&#x201d; &#x548c; WebSocket&#xff0c;HTML 5 &#x8fd8;&#x63d0;&#x4f9b;&#x4e86; Server-Sent Events&#xff08;&#x4ee5;&#x4e0b;&#x7b80;&#x79f0; SSE&#xff09;&#x3002;\n\n&#x4e00;&#x822c;&#x6765;&#x8bf4;&#xff0c;HTTP &#x534f;&#x8bae;&#x53ea;&#x80fd;&#x5ba2;&#x6237;&#x7aef;&#x5411;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x8d77;&#x8bf7;&#x6c42;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x4e0d;&#x80fd;&#x4e3b;&#x52a8;&#x5411;&#x5ba2;&#x6237;&#x7aef;&#x63a8;&#x9001;&#x3002;&#x4f46;&#x662f;&#x6709;&#x4e00;&#x79cd;&#x7279;&#x6b8a;&#x60c5;&#x51b5;&#xff0c;&#x5c31;&#x662f;&#x670d;&#x52a1;&#x5668;&#x5411;&#x5ba2;&#x6237;&#x7aef;&#x58f0;&#x660e;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x8981;&#x53d1;&#x9001;&#x7684;&#x662f;&#x6d41;&#x4fe1;&#x606f;&#xff08;streaming&#xff09;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x53d1;&#x9001;&#x7684;&#x4e0d;&#x662f;&#x4e00;&#x6b21;&#x6027;&#x7684;&#x6570;&#x636e;&#x5305;&#xff0c;&#x800c;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x6d41;&#xff0c;&#x4f1a;&#x8fde;&#x7eed;&#x4e0d;&#x65ad;&#x5730;&#x53d1;&#x9001;&#x8fc7;&#x6765;&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x5ba2;&#x6237;&#x7aef;&#x4e0d;&#x4f1a;&#x5173;&#x95ed;&#x8fde;&#x63a5;&#xff0c;&#x4f1a;&#x4e00;&#x76f4;&#x7b49;&#x7740;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x8fc7;&#x6765;&#x7684;&#x65b0;&#x7684;&#x6570;&#x636e;&#x6d41;&#x3002;&#x672c;&#x8d28;&#x4e0a;&#xff0c;&#x8fd9;&#x79cd;&#x901a;&#x4fe1;&#x5c31;&#x662f;&#x4ee5;&#x6d41;&#x4fe1;&#x606f;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x5b8c;&#x6210;&#x4e00;&#x6b21;&#x7528;&#x65f6;&#x5f88;&#x957f;&#x7684;&#x4e0b;&#x8f7d;&#x3002;\n\nSSE &#x5c31;&#x662f;&#x5229;&#x7528;&#x8fd9;&#x79cd;&#x673a;&#x5236;&#xff0c;&#x4f7f;&#x7528;&#x6d41;&#x4fe1;&#x606f;&#x5411;&#x6d4f;&#x89c8;&#x5668;&#x63a8;&#x9001;&#x4fe1;&#x606f;&#x3002;&#x5b83;&#x57fa;&#x4e8e; HTTP &#x534f;&#x8bae;&#xff0c;&#x76ee;&#x524d;&#x9664;&#x4e86; IE/Edge&#xff0c;&#x5176;&#x4ed6;&#x6d4f;&#x89c8;&#x5668;&#x90fd;&#x652f;&#x6301;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5,10"}}],"payload":{"tag":"h2","lines":"2,4"}},{"content":"&#x4e0e; WebSocket &#x7684;&#x6bd4;&#x8f83; <a href=\"#%E4%B8%8E-websocket-%E7%9A%84%E6%AF%94%E8%BE%83\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"14,27\"><code>SSE &#x4e0e; WebSocket &#x4f5c;&#x7528;&#x76f8;&#x4f3c;&#xff0c;&#x90fd;&#x662f;&#x5efa;&#x7acb;&#x6d4f;&#x89c8;&#x5668;&#x4e0e;&#x670d;&#x52a1;&#x5668;&#x4e4b;&#x95f4;&#x7684;&#x901a;&#x4fe1;&#x6e20;&#x9053;&#xff0c;&#x7136;&#x540e;&#x670d;&#x52a1;&#x5668;&#x5411;&#x6d4f;&#x89c8;&#x5668;&#x63a8;&#x9001;&#x4fe1;&#x606f;&#x3002;\n\n&#x603b;&#x4f53;&#x6765;&#x8bf4;&#xff0c;WebSocket &#x66f4;&#x5f3a;&#x5927;&#x548c;&#x7075;&#x6d3b;&#x3002;&#x56e0;&#x4e3a;&#x5b83;&#x662f;&#x5168;&#x53cc;&#x5de5;&#x901a;&#x9053;&#xff0c;&#x53ef;&#x4ee5;&#x53cc;&#x5411;&#x901a;&#x4fe1;&#xff1b;SSE &#x662f;&#x5355;&#x5411;&#x901a;&#x9053;&#xff0c;&#x53ea;&#x80fd;&#x670d;&#x52a1;&#x5668;&#x5411;&#x6d4f;&#x89c8;&#x5668;&#x53d1;&#x9001;&#xff0c;&#x56e0;&#x4e3a; streaming &#x672c;&#x8d28;&#x4e0a;&#x5c31;&#x662f;&#x4e0b;&#x8f7d;&#x3002;&#x5982;&#x679c;&#x6d4f;&#x89c8;&#x5668;&#x5411;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x9001;&#x4fe1;&#x606f;&#xff0c;&#x5c31;&#x53d8;&#x6210;&#x4e86;&#x53e6;&#x4e00;&#x6b21; HTTP &#x8bf7;&#x6c42;&#x3002;\n\n&#x4f46;&#x662f;&#xff0c;SSE &#x4e5f;&#x6709;&#x81ea;&#x5df1;&#x7684;&#x4f18;&#x70b9;&#x3002;\n\n*   SSE &#x4f7f;&#x7528; HTTP &#x534f;&#x8bae;&#xff0c;&#x73b0;&#x6709;&#x7684;&#x670d;&#x52a1;&#x5668;&#x8f6f;&#x4ef6;&#x90fd;&#x652f;&#x6301;&#x3002;WebSocket &#x662f;&#x4e00;&#x4e2a;&#x72ec;&#x7acb;&#x534f;&#x8bae;&#x3002;\n*   SSE &#x5c5e;&#x4e8e;&#x8f7b;&#x91cf;&#x7ea7;&#xff0c;&#x4f7f;&#x7528;&#x7b80;&#x5355;&#xff1b;WebSocket &#x534f;&#x8bae;&#x76f8;&#x5bf9;&#x590d;&#x6742;&#x3002;\n*   SSE &#x9ed8;&#x8ba4;&#x652f;&#x6301;&#x65ad;&#x7ebf;&#x91cd;&#x8fde;&#xff0c;WebSocket &#x9700;&#x8981;&#x81ea;&#x5df1;&#x5b9e;&#x73b0;&#x65ad;&#x7ebf;&#x91cd;&#x8fde;&#x3002;\n*   SSE &#x4e00;&#x822c;&#x53ea;&#x7528;&#x6765;&#x4f20;&#x9001;&#x6587;&#x672c;&#xff0c;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#x9700;&#x8981;&#x7f16;&#x7801;&#x540e;&#x4f20;&#x9001;&#xff0c;WebSocket &#x9ed8;&#x8ba4;&#x652f;&#x6301;&#x4f20;&#x9001;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#x3002;\n*   SSE &#x652f;&#x6301;&#x81ea;&#x5b9a;&#x4e49;&#x53d1;&#x9001;&#x7684;&#x6d88;&#x606f;&#x7c7b;&#x578b;&#x3002;\n\n&#x56e0;&#x6b64;&#xff0c;&#x4e24;&#x8005;&#x5404;&#x6709;&#x7279;&#x70b9;&#xff0c;&#x9002;&#x5408;&#x4e0d;&#x540c;&#x7684;&#x573a;&#x5408;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"14,27"}}],"payload":{"tag":"h2","lines":"11,13"}},{"content":"&#x5ba2;&#x6237;&#x7aef; API <a href=\"#%E5%AE%A2%E6%88%B7%E7%AB%AF-api\">#</a><a href=\"#navbar\"></a>","children":[{"content":"EventSource &#x5bf9;&#x8c61; <a href=\"#eventsource-%E5%AF%B9%E8%B1%A1\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"33,34\"><code>SSE &#x7684;&#x5ba2;&#x6237;&#x7aef; API &#x90e8;&#x7f72;&#x5728;`EventSource`&#x5bf9;&#x8c61;&#x4e0a;&#x3002;&#x4e0b;&#x9762;&#x7684;&#x4ee3;&#x7801;&#x53ef;&#x4ee5;&#x68c0;&#x6d4b;&#x6d4f;&#x89c8;&#x5668;&#x662f;&#x5426;&#x652f;&#x6301; SSE&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"33,34"}},{"content":"<pre data-lines=\"35,40\"><code data-lines=\"35,40\"><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&apos;EventSource&apos;</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">window</span>) {\n  \n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"35,40"}},{"content":"<pre data-lines=\"41,42\"><code>&#x4f7f;&#x7528; SSE &#x65f6;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x9996;&#x5148;&#x751f;&#x6210;&#x4e00;&#x4e2a;`EventSource`&#x5b9e;&#x4f8b;&#xff0c;&#x5411;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x8d77;&#x8fde;&#x63a5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"41,42"}},{"content":"<pre data-lines=\"43,46\"><code data-lines=\"43,46\"><span class=\"hljs-keyword\">var</span> source = <span class=\"hljs-keyword\">new</span> EventSource(<span class=\"hljs-built_in\">url</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"43,46"}},{"content":"<pre data-lines=\"47,48\"><code>&#x4e0a;&#x9762;&#x7684;`url`&#x53ef;&#x4ee5;&#x4e0e;&#x5f53;&#x524d;&#x7f51;&#x5740;&#x540c;&#x57df;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x8de8;&#x57df;&#x3002;&#x8de8;&#x57df;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x6253;&#x5f00;`withCredentials`&#x5c5e;&#x6027;&#xff0c;&#x8868;&#x793a;&#x662f;&#x5426;&#x4e00;&#x8d77;&#x53d1;&#x9001; Cookie&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"47,48"}},{"content":"<pre data-lines=\"49,52\"><code data-lines=\"49,52\"><span class=\"hljs-keyword\">var</span> source = <span class=\"hljs-keyword\">new</span> EventSource(<span class=\"hljs-built_in\">url</span>, { <span class=\"hljs-attribute\">withCredentials</span>: <span class=\"hljs-literal\">true</span> }); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"49,52"}}],"payload":{"tag":"h3","lines":"31,32"}},{"content":"readyState &#x5c5e;&#x6027; <a href=\"#readystate-%E5%B1%9E%E6%80%A7\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"55,60\"><code>`EventSource`&#x5b9e;&#x4f8b;&#x7684;`readyState`&#x5c5e;&#x6027;&#xff0c;&#x8868;&#x660e;&#x8fde;&#x63a5;&#x7684;&#x5f53;&#x524d;&#x72b6;&#x6001;&#x3002;&#x8be5;&#x5c5e;&#x6027;&#x53ea;&#x8bfb;&#xff0c;&#x53ef;&#x4ee5;&#x53d6;&#x4ee5;&#x4e0b;&#x503c;&#x3002;\n\n*   0&#xff1a;&#x76f8;&#x5f53;&#x4e8e;&#x5e38;&#x91cf;`EventSource.CONNECTING`&#xff0c;&#x8868;&#x793a;&#x8fde;&#x63a5;&#x8fd8;&#x672a;&#x5efa;&#x7acb;&#xff0c;&#x6216;&#x8005;&#x65ad;&#x7ebf;&#x6b63;&#x5728;&#x91cd;&#x8fde;&#x3002;\n*   1&#xff1a;&#x76f8;&#x5f53;&#x4e8e;&#x5e38;&#x91cf;`EventSource.OPEN`&#xff0c;&#x8868;&#x793a;&#x8fde;&#x63a5;&#x5df2;&#x7ecf;&#x5efa;&#x7acb;&#xff0c;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x6570;&#x636e;&#x3002;\n*   2&#xff1a;&#x76f8;&#x5f53;&#x4e8e;&#x5e38;&#x91cf;`EventSource.CLOSED`&#xff0c;&#x8868;&#x793a;&#x8fde;&#x63a5;&#x5df2;&#x65ad;&#xff0c;&#x4e14;&#x4e0d;&#x4f1a;&#x91cd;&#x8fde;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,60"}},{"content":"<pre data-lines=\"61,65\"><code data-lines=\"61,65\"><span class=\"hljs-keyword\">var</span> source = <span class=\"hljs-keyword\">new</span> EventSource(url);\n<span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(source.readyState); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"61,65"}}],"payload":{"tag":"h3","lines":"53,54"}},{"content":"url &#x5c5e;&#x6027; <a href=\"#url-%E5%B1%9E%E6%80%A7\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"68,69\"><code>`EventSource`&#x5b9e;&#x4f8b;&#x7684;`url`&#x5c5e;&#x6027;&#x8fd4;&#x56de;&#x8fde;&#x63a5;&#x7684;&#x7f51;&#x5740;&#xff0c;&#x8be5;&#x5c5e;&#x6027;&#x53ea;&#x8bfb;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"68,69"}}],"payload":{"tag":"h3","lines":"66,67"}},{"content":"withCredentials &#x5c5e;&#x6027; <a href=\"#withcredentials-%E5%B1%9E%E6%80%A7\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"72,73\"><code>`EventSource`&#x5b9e;&#x4f8b;&#x7684;`withCredentials`&#x5c5e;&#x6027;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x5f53;&#x524d;&#x5b9e;&#x4f8b;&#x662f;&#x5426;&#x5f00;&#x542f; CORS &#x7684;`withCredentials`&#x3002;&#x8be5;&#x5c5e;&#x6027;&#x53ea;&#x8bfb;&#xff0c;&#x9ed8;&#x8ba4;&#x662f;`false`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"72,73"}}],"payload":{"tag":"h3","lines":"70,71"}},{"content":"onopen &#x5c5e;&#x6027; <a href=\"#onopen-%E5%B1%9E%E6%80%A7\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"76,77\"><code>&#x8fde;&#x63a5;&#x4e00;&#x65e6;&#x5efa;&#x7acb;&#xff0c;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;`open`&#x4e8b;&#x4ef6;&#xff0c;&#x53ef;&#x4ee5;&#x5728;`onopen`&#x5c5e;&#x6027;&#x5b9a;&#x4e49;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,77"}},{"content":"<pre data-lines=\"78,88\"><code data-lines=\"78,88\">source.onopen = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-params\">(<span class=\"hljs-keyword\">event</span>)</span> <span class=\"hljs-comment\">{\n  \n}</span>;\n\n\nsource.addEventListener(<span class=\"hljs-string\">&apos;open&apos;</span>, <span class=\"hljs-keyword\">function</span> <span class=\"hljs-params\">(<span class=\"hljs-keyword\">event</span>)</span> <span class=\"hljs-comment\">{\n  \n}</span>, <span class=\"hljs-title function_\">false</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"78,88"}}],"payload":{"tag":"h3","lines":"74,75"}},{"content":"onmessage &#x5c5e;&#x6027; <a href=\"#onmessage-%E5%B1%9E%E6%80%A7\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"91,92\"><code>&#x5ba2;&#x6237;&#x7aef;&#x6536;&#x5230;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x6765;&#x7684;&#x6570;&#x636e;&#xff0c;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;`message`&#x4e8b;&#x4ef6;&#xff0c;&#x53ef;&#x4ee5;&#x5728;`onmessage`&#x5c5e;&#x6027;&#x5b9a;&#x4e49;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"91,92"}},{"content":"<pre data-lines=\"93,109\"><code data-lines=\"93,109\">source.onmessage = function (<span class=\"hljs-keyword\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> data = <span class=\"hljs-keyword\">event</span>.data;\n  <span class=\"hljs-keyword\">var</span> origin = <span class=\"hljs-keyword\">event</span>.origin;\n  <span class=\"hljs-keyword\">var</span> lastEventId = <span class=\"hljs-keyword\">event</span>.lastEventId;\n  \n};\n\n\nsource.addEventListener(<span class=\"hljs-string\">&apos;message&apos;</span>, function (<span class=\"hljs-keyword\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> data = <span class=\"hljs-keyword\">event</span>.data;\n  <span class=\"hljs-keyword\">var</span> origin = <span class=\"hljs-keyword\">event</span>.origin;\n  <span class=\"hljs-keyword\">var</span> lastEventId = <span class=\"hljs-keyword\">event</span>.lastEventId;\n  \n}, <span class=\"hljs-literal\">false</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"93,109"}},{"content":"<pre data-lines=\"110,115\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x53c2;&#x6570;&#x5bf9;&#x8c61;`event`&#x6709;&#x5982;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n*   `data`&#xff1a;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x4f20;&#x56de;&#x7684;&#x6570;&#x636e;&#xff08;&#x6587;&#x672c;&#x683c;&#x5f0f;&#xff09;&#x3002;\n*   `origin`&#xff1a; &#x670d;&#x52a1;&#x5668; URL &#x7684;&#x57df;&#x540d;&#x90e8;&#x5206;&#xff0c;&#x5373;&#x534f;&#x8bae;&#x3001;&#x57df;&#x540d;&#x548c;&#x7aef;&#x53e3;&#xff0c;&#x8868;&#x793a;&#x6d88;&#x606f;&#x7684;&#x6765;&#x6e90;&#x3002;\n*   `lastEventId`&#xff1a;&#x6570;&#x636e;&#x7684;&#x7f16;&#x53f7;&#xff0c;&#x7531;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x53d1;&#x9001;&#x3002;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x7f16;&#x53f7;&#xff0c;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x4e3a;&#x7a7a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"110,115"}}],"payload":{"tag":"h3","lines":"89,90"}},{"content":"onerror &#x5c5e;&#x6027; <a href=\"#onerror-%E5%B1%9E%E6%80%A7\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"118,119\"><code>&#x5982;&#x679c;&#x53d1;&#x751f;&#x901a;&#x4fe1;&#x9519;&#x8bef;&#xff08;&#x6bd4;&#x5982;&#x8fde;&#x63a5;&#x4e2d;&#x65ad;&#xff09;&#xff0c;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;`error`&#x4e8b;&#x4ef6;&#xff0c;&#x53ef;&#x4ee5;&#x5728;`onerror`&#x5c5e;&#x6027;&#x5b9a;&#x4e49;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"118,119"}},{"content":"<pre data-lines=\"120,130\"><code data-lines=\"120,130\">source.onerror = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-params\">(<span class=\"hljs-keyword\">event</span>)</span> <span class=\"hljs-comment\">{\n  \n}</span>;\n\n\nsource.addEventListener(<span class=\"hljs-string\">&apos;error&apos;</span>, <span class=\"hljs-keyword\">function</span> <span class=\"hljs-params\">(<span class=\"hljs-keyword\">event</span>)</span> <span class=\"hljs-comment\">{\n  \n}</span>, <span class=\"hljs-title function_\">false</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,130"}}],"payload":{"tag":"h3","lines":"116,117"}},{"content":"&#x81ea;&#x5b9a;&#x4e49;&#x4e8b;&#x4ef6; <a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"133,134\"><code>&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x6765;&#x7684;&#x6570;&#x636e;&#xff0c;&#x603b;&#x662f;&#x89e6;&#x53d1;&#x6d4f;&#x89c8;&#x5668;`EventSource`&#x5b9e;&#x4f8b;&#x7684;`message`&#x4e8b;&#x4ef6;&#x3002;&#x5f00;&#x53d1;&#x8005;&#x8fd8;&#x53ef;&#x4ee5;&#x81ea;&#x5b9a;&#x4e49; SSE &#x4e8b;&#x4ef6;&#xff0c;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x53d1;&#x9001;&#x56de;&#x6765;&#x7684;&#x6570;&#x636e;&#x4e0d;&#x4f1a;&#x89e6;&#x53d1;`message`&#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"133,134"}},{"content":"<pre data-lines=\"135,143\"><code data-lines=\"135,143\">source.addEventListener(<span class=\"hljs-string\">&apos;foo&apos;</span>, function (<span class=\"hljs-keyword\">event</span>) {\n  <span class=\"hljs-keyword\">var</span> data = <span class=\"hljs-keyword\">event</span>.data;\n  <span class=\"hljs-keyword\">var</span> origin = <span class=\"hljs-keyword\">event</span>.origin;\n  <span class=\"hljs-keyword\">var</span> lastEventId = <span class=\"hljs-keyword\">event</span>.lastEventId;\n  \n}, <span class=\"hljs-literal\">false</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"135,143"}},{"content":"<pre data-lines=\"144,145\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x5bf9; SSE &#x7684;`foo`&#x4e8b;&#x4ef6;&#x8fdb;&#x884c;&#x76d1;&#x542c;&#x3002;&#x5982;&#x4f55;&#x5b9e;&#x73b0;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x9001;`foo`&#x4e8b;&#x4ef6;&#xff0c;&#x8bf7;&#x770b;&#x4e0b;&#x6587;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"144,145"}}],"payload":{"tag":"h3","lines":"131,132"}},{"content":"close() &#x65b9;&#x6cd5; <a href=\"#close-%E6%96%B9%E6%B3%95\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"148,149\"><code>`close`&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x5173;&#x95ed; SSE &#x8fde;&#x63a5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"148,149"}},{"content":"<pre data-lines=\"150,153\"><code data-lines=\"150,153\"><span class=\"hljs-keyword\">source</span>.<span class=\"hljs-keyword\">close</span>(); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,153"}}],"payload":{"tag":"h3","lines":"146,147"}}],"payload":{"tag":"h2","lines":"28,30"}},{"content":"&#x670d;&#x52a1;&#x5668;&#x5b9e;&#x73b0; <a href=\"#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E7%8E%B0\">#</a><a href=\"#navbar\"></a>","children":[{"content":"&#x6570;&#x636e;&#x683c;&#x5f0f; <a href=\"#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"159,160\"><code>&#x670d;&#x52a1;&#x5668;&#x5411;&#x6d4f;&#x89c8;&#x5668;&#x53d1;&#x9001;&#x7684; SSE &#x6570;&#x636e;&#xff0c;&#x5fc5;&#x987b;&#x662f; UTF-8 &#x7f16;&#x7801;&#x7684;&#x6587;&#x672c;&#xff0c;&#x5177;&#x6709;&#x5982;&#x4e0b;&#x7684; HTTP &#x5934;&#x4fe1;&#x606f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"159,160"}},{"content":"<pre data-lines=\"161,166\"><code data-lines=\"161,166\"><span class=\"hljs-params\">Content-Type:</span> text<span class=\"hljs-symbol\">/event-stream</span>\n<span class=\"hljs-params\">Cache-Control:</span> no-cache\n<span class=\"hljs-params\">Connection:</span> keep-alive \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"161,166"}},{"content":"<pre data-lines=\"167,170\"><code>&#x4e0a;&#x9762;&#x4e09;&#x884c;&#x4e4b;&#x4e2d;&#xff0c;&#x7b2c;&#x4e00;&#x884c;&#x7684;`Content-Type`&#x5fc5;&#x987b;&#x6307;&#x5b9a; MIME &#x7c7b;&#x578b;&#x4e3a;`event-steam`&#x3002;\n\n&#x6bcf;&#x4e00;&#x6b21;&#x53d1;&#x9001;&#x7684;&#x4fe1;&#x606f;&#xff0c;&#x7531;&#x82e5;&#x5e72;&#x4e2a;`message`&#x7ec4;&#x6210;&#xff0c;&#x6bcf;&#x4e2a;`message`&#x4e4b;&#x95f4;&#x7528;`\\n\\n`&#x5206;&#x9694;&#x3002;&#x6bcf;&#x4e2a;`message`&#x5185;&#x90e8;&#x7531;&#x82e5;&#x5e72;&#x884c;&#x7ec4;&#x6210;&#xff0c;&#x6bcf;&#x4e00;&#x884c;&#x90fd;&#x662f;&#x5982;&#x4e0b;&#x683c;&#x5f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"167,170"}},{"content":"<pre data-lines=\"171,174\"><code data-lines=\"171,174\">[<span class=\"hljs-symbol\">field</span>]: <span class=\"hljs-link\">value\\n </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"171,174"}},{"content":"<pre data-lines=\"175,183\"><code>&#x4e0a;&#x9762;&#x7684;`field`&#x53ef;&#x4ee5;&#x53d6;&#x56db;&#x4e2a;&#x503c;&#x3002;\n\n*   data\n*   event\n*   id\n*   retry\n\n&#x6b64;&#x5916;&#xff0c;&#x8fd8;&#x53ef;&#x4ee5;&#x6709;&#x5192;&#x53f7;&#x5f00;&#x5934;&#x7684;&#x884c;&#xff0c;&#x8868;&#x793a;&#x6ce8;&#x91ca;&#x3002;&#x901a;&#x5e38;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x6bcf;&#x9694;&#x4e00;&#x6bb5;&#x65f6;&#x95f4;&#x5c31;&#x4f1a;&#x5411;&#x6d4f;&#x89c8;&#x5668;&#x53d1;&#x9001;&#x4e00;&#x4e2a;&#x6ce8;&#x91ca;&#xff0c;&#x4fdd;&#x6301;&#x8fde;&#x63a5;&#x4e0d;&#x4e2d;&#x65ad;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"175,183"}},{"content":"<pre data-lines=\"184,187\"><code data-lines=\"184,187\">: This <span class=\"hljs-keyword\">is</span> a <span class=\"hljs-keyword\">comment</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"184,187"}},{"content":"<pre data-lines=\"188,189\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"188,189"}},{"content":"<pre data-lines=\"190,198\"><code data-lines=\"190,198\">: this is a test stream<span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span>\n\ndata: some text<span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span>\n\ndata: another message<span class=\"hljs-symbol\">\\n</span>\ndata: with two lines <span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"190,198"}}],"payload":{"tag":"h3","lines":"157,158"}},{"content":"data &#x5b57;&#x6bb5; <a href=\"#data-%E5%AD%97%E6%AE%B5\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"201,202\"><code>&#x6570;&#x636e;&#x5185;&#x5bb9;&#x7528;`data`&#x5b57;&#x6bb5;&#x8868;&#x793a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"201,202"}},{"content":"<pre data-lines=\"203,206\"><code data-lines=\"203,206\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span>:  message\\n\\n </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"203,206"}},{"content":"<pre data-lines=\"207,208\"><code>&#x5982;&#x679c;&#x6570;&#x636e;&#x5f88;&#x957f;&#xff0c;&#x53ef;&#x4ee5;&#x5206;&#x6210;&#x591a;&#x884c;&#xff0c;&#x6700;&#x540e;&#x4e00;&#x884c;&#x7528;`\\n\\n`&#x7ed3;&#x5c3e;&#xff0c;&#x524d;&#x9762;&#x884c;&#x90fd;&#x7528;`\\n`&#x7ed3;&#x5c3e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"207,208"}},{"content":"<pre data-lines=\"209,213\"><code data-lines=\"209,213\">data: <span class=\"hljs-keyword\">begin</span> <span class=\"hljs-keyword\">message</span>\\n\ndata: <span class=\"hljs-keyword\">continue</span> <span class=\"hljs-keyword\">message</span>\\n\\n \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"209,213"}},{"content":"<pre data-lines=\"214,215\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x53d1;&#x9001; JSON &#x6570;&#x636e;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"214,215"}},{"content":"<pre data-lines=\"216,222\"><code data-lines=\"216,222\"><span class=\"hljs-symbol\">data:</span> {\\n\n<span class=\"hljs-symbol\">data:</span> <span class=\"hljs-string\">&quot;foo&quot;</span>: <span class=\"hljs-string\">&quot;bar&quot;</span>,\\n\n<span class=\"hljs-symbol\">data:</span> <span class=\"hljs-string\">&quot;baz&quot;</span>, <span class=\"hljs-number\">555</span>\\n\n<span class=\"hljs-symbol\">data:</span> }\\n\\n \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"216,222"}}],"payload":{"tag":"h3","lines":"199,200"}},{"content":"id &#x5b57;&#x6bb5; <a href=\"#id-%E5%AD%97%E6%AE%B5\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"225,226\"><code>&#x6570;&#x636e;&#x6807;&#x8bc6;&#x7b26;&#x7528;`id`&#x5b57;&#x6bb5;&#x8868;&#x793a;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x6bcf;&#x4e00;&#x6761;&#x6570;&#x636e;&#x7684;&#x7f16;&#x53f7;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"225,226"}},{"content":"<pre data-lines=\"227,231\"><code data-lines=\"227,231\">id: msg1<span class=\"hljs-symbol\">\\n</span>\ndata: message<span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"227,231"}},{"content":"<pre data-lines=\"232,233\"><code>&#x6d4f;&#x89c8;&#x5668;&#x7528;`lastEventId`&#x5c5e;&#x6027;&#x8bfb;&#x53d6;&#x8fd9;&#x4e2a;&#x503c;&#x3002;&#x4e00;&#x65e6;&#x8fde;&#x63a5;&#x65ad;&#x7ebf;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4f1a;&#x53d1;&#x9001;&#x4e00;&#x4e2a; HTTP &#x5934;&#xff0c;&#x91cc;&#x9762;&#x5305;&#x542b;&#x4e00;&#x4e2a;&#x7279;&#x6b8a;&#x7684;`Last-Event-ID`&#x5934;&#x4fe1;&#x606f;&#xff0c;&#x5c06;&#x8fd9;&#x4e2a;&#x503c;&#x53d1;&#x9001;&#x56de;&#x6765;&#xff0c;&#x7528;&#x6765;&#x5e2e;&#x52a9;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x91cd;&#x5efa;&#x8fde;&#x63a5;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x8fd9;&#x4e2a;&#x5934;&#x4fe1;&#x606f;&#x53ef;&#x4ee5;&#x88ab;&#x89c6;&#x4e3a;&#x4e00;&#x79cd;&#x540c;&#x6b65;&#x673a;&#x5236;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"232,233"}}],"payload":{"tag":"h3","lines":"223,224"}},{"content":"event &#x5b57;&#x6bb5; <a href=\"#event-%E5%AD%97%E6%AE%B5\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"236,237\"><code>`event`&#x5b57;&#x6bb5;&#x8868;&#x793a;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x4e8b;&#x4ef6;&#x7c7b;&#x578b;&#xff0c;&#x9ed8;&#x8ba4;&#x662f;`message`&#x4e8b;&#x4ef6;&#x3002;&#x6d4f;&#x89c8;&#x5668;&#x53ef;&#x4ee5;&#x7528;`addEventListener()`&#x76d1;&#x542c;&#x8be5;&#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,237"}},{"content":"<pre data-lines=\"238,247\"><code data-lines=\"238,247\">event: foo<span class=\"hljs-symbol\">\\n</span>\ndata: a foo event<span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span>\n\ndata: an unnamed event<span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span>\n\nevent: bar<span class=\"hljs-symbol\">\\n</span>\ndata: a bar event<span class=\"hljs-symbol\">\\n</span><span class=\"hljs-symbol\">\\n</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"238,247"}},{"content":"<pre data-lines=\"248,251\"><code>&#x4e0a;&#x9762;&#x7684;&#x4ee3;&#x7801;&#x521b;&#x9020;&#x4e86;&#x4e09;&#x6761;&#x4fe1;&#x606f;&#x3002;&#x7b2c;&#x4e00;&#x6761;&#x7684;&#x540d;&#x5b57;&#x662f;`foo`&#xff0c;&#x89e6;&#x53d1;&#x6d4f;&#x89c8;&#x5668;&#x7684;`foo`&#x4e8b;&#x4ef6;&#xff1b;&#x7b2c;&#x4e8c;&#x6761;&#x672a;&#x53d6;&#x540d;&#xff0c;&#x8868;&#x793a;&#x9ed8;&#x8ba4;&#x7c7b;&#x578b;&#xff0c;&#x89e6;&#x53d1;&#x6d4f;&#x89c8;&#x5668;&#x7684;`message`&#x4e8b;&#x4ef6;&#xff1b;&#x7b2c;&#x4e09;&#x6761;&#x662f;`bar`&#xff0c;&#x89e6;&#x53d1;&#x6d4f;&#x89c8;&#x5668;&#x7684;`bar`&#x4e8b;&#x4ef6;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x53e6;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"248,251"}},{"content":"<pre data-lines=\"252,265\"><code data-lines=\"252,265\"><span class=\"hljs-symbol\">event:</span> userconnect\n<span class=\"hljs-symbol\">data:</span> {<span class=\"hljs-string\">&quot;username&quot;</span>: <span class=\"hljs-string\">&quot;bobby&quot;</span>, <span class=\"hljs-string\">&quot;time&quot;</span>: <span class=\"hljs-string\">&quot;02:33:48&quot;</span>}\n\n<span class=\"hljs-symbol\">event:</span> usermessage\n<span class=\"hljs-symbol\">data:</span> {<span class=\"hljs-string\">&quot;username&quot;</span>: <span class=\"hljs-string\">&quot;bobby&quot;</span>, <span class=\"hljs-string\">&quot;time&quot;</span>: <span class=\"hljs-string\">&quot;02:34:11&quot;</span>, <span class=\"hljs-string\">&quot;text&quot;</span>: <span class=\"hljs-string\">&quot;Hi everyone.&quot;</span>}\n\n<span class=\"hljs-symbol\">event:</span> userdisconnect\n<span class=\"hljs-symbol\">data:</span> {<span class=\"hljs-string\">&quot;username&quot;</span>: <span class=\"hljs-string\">&quot;bobby&quot;</span>, <span class=\"hljs-string\">&quot;time&quot;</span>: <span class=\"hljs-string\">&quot;02:34:23&quot;</span>}\n\n<span class=\"hljs-symbol\">event:</span> usermessage\n<span class=\"hljs-symbol\">data:</span> {<span class=\"hljs-string\">&quot;username&quot;</span>: <span class=\"hljs-string\">&quot;sean&quot;</span>, <span class=\"hljs-string\">&quot;time&quot;</span>: <span class=\"hljs-string\">&quot;02:34:36&quot;</span>, <span class=\"hljs-string\">&quot;text&quot;</span>: <span class=\"hljs-string\">&quot;Bye, bobby.&quot;</span>} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"252,265"}}],"payload":{"tag":"h3","lines":"234,235"}},{"content":"retry &#x5b57;&#x6bb5; <a href=\"#retry-%E5%AD%97%E6%AE%B5\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"268,269\"><code>&#x670d;&#x52a1;&#x5668;&#x53ef;&#x4ee5;&#x7528;`retry`&#x5b57;&#x6bb5;&#xff0c;&#x6307;&#x5b9a;&#x6d4f;&#x89c8;&#x5668;&#x91cd;&#x65b0;&#x53d1;&#x8d77;&#x8fde;&#x63a5;&#x7684;&#x65f6;&#x95f4;&#x95f4;&#x9694;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"268,269"}},{"content":"<pre data-lines=\"270,273\"><code data-lines=\"270,273\"><span class=\"hljs-attribute\">retry</span>: <span class=\"hljs-number\">10000</span>\\n \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"270,273"}},{"content":"<pre data-lines=\"274,275\"><code>&#x4e24;&#x79cd;&#x60c5;&#x51b5;&#x4f1a;&#x5bfc;&#x81f4;&#x6d4f;&#x89c8;&#x5668;&#x91cd;&#x65b0;&#x53d1;&#x8d77;&#x8fde;&#x63a5;&#xff1a;&#x4e00;&#x79cd;&#x662f;&#x65f6;&#x95f4;&#x95f4;&#x9694;&#x5230;&#x671f;&#xff0c;&#x4e8c;&#x662f;&#x7531;&#x4e8e;&#x7f51;&#x7edc;&#x9519;&#x8bef;&#x7b49;&#x539f;&#x56e0;&#xff0c;&#x5bfc;&#x81f4;&#x8fde;&#x63a5;&#x51fa;&#x9519;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"274,275"}}],"payload":{"tag":"h3","lines":"266,267"}}],"payload":{"tag":"h2","lines":"154,156"}},{"content":"Node &#x670d;&#x52a1;&#x5668;&#x5b9e;&#x4f8b; <a href=\"#node-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E4%BE%8B\">#</a><a href=\"#navbar\"></a>","children":[{"content":"<pre data-lines=\"279,282\"><code>SSE &#x8981;&#x6c42;&#x670d;&#x52a1;&#x5668;&#x4e0e;&#x6d4f;&#x89c8;&#x5668;&#x4fdd;&#x6301;&#x8fde;&#x63a5;&#x3002;&#x5bf9;&#x4e8e;&#x4e0d;&#x540c;&#x7684;&#x670d;&#x52a1;&#x5668;&#x8f6f;&#x4ef6;&#x6765;&#x8bf4;&#xff0c;&#x6240;&#x6d88;&#x8017;&#x7684;&#x8d44;&#x6e90;&#x662f;&#x4e0d;&#x4e00;&#x6837;&#x7684;&#x3002;Apache &#x670d;&#x52a1;&#x5668;&#xff0c;&#x6bcf;&#x4e2a;&#x8fde;&#x63a5;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#xff0c;&#x5982;&#x679c;&#x8981;&#x7ef4;&#x6301;&#x5927;&#x91cf;&#x8fde;&#x63a5;&#xff0c;&#x52bf;&#x5fc5;&#x8981;&#x6d88;&#x8017;&#x5927;&#x91cf;&#x8d44;&#x6e90;&#x3002;Node &#x5219;&#x662f;&#x6240;&#x6709;&#x8fde;&#x63a5;&#x90fd;&#x4f7f;&#x7528;&#x540c;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#xff0c;&#x56e0;&#x6b64;&#x6d88;&#x8017;&#x7684;&#x8d44;&#x6e90;&#x4f1a;&#x5c0f;&#x5f97;&#x591a;&#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x8981;&#x6c42;&#x6bcf;&#x4e2a;&#x8fde;&#x63a5;&#x4e0d;&#x80fd;&#x5305;&#x542b;&#x5f88;&#x8017;&#x65f6;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x6bd4;&#x5982;&#x78c1;&#x76d8;&#x7684; IO &#x8bfb;&#x5199;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f; Node &#x7684; SSE &#x670d;&#x52a1;&#x5668;[&#x5b9e;&#x4f8b;](http://cjihrig.com/blog/server-sent-events-in-node-js/)&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"279,282"}},{"content":"<pre data-lines=\"283,311\"><code data-lines=\"283,311\">var http = require(&quot;http&quot;);\n\nhttp.createServer(<span class=\"hljs-keyword\">function</span> (req, res) {\n  var fileName = &quot;.&quot; + req.url;\n\n  <span class=\"hljs-keyword\">if</span> (fileName === &quot;./stream&quot;) {\n    res.writeHead(<span class=\"hljs-number\">200</span>, {\n      &quot;Content-Type&quot;:&quot;text/event-stream&quot;,\n      &quot;Cache-Control&quot;:&quot;no-cache&quot;,\n      &quot;Connection&quot;:&quot;keep-alive&quot;,\n      &quot;Access-Control-Allow-Origin&quot;: <span class=\"hljs-string\">&apos;*&apos;</span>,\n    });\n    res.<span class=\"hljs-keyword\">write</span>(&quot;retry: 10000\\n&quot;);\n    res.<span class=\"hljs-keyword\">write</span>(&quot;event: connecttime\\n&quot;);\n    res.<span class=\"hljs-keyword\">write</span>(&quot;data: &quot; + (<span class=\"hljs-built_in\">new</span> <span class=\"hljs-type\">Date</span>()) + &quot;\\n\\n&quot;);\n    res.<span class=\"hljs-keyword\">write</span>(&quot;data: &quot; + (<span class=\"hljs-built_in\">new</span> <span class=\"hljs-type\">Date</span>()) + &quot;\\n\\n&quot;);\n\n    <span class=\"hljs-type\">interval</span> = setInterval(<span class=\"hljs-keyword\">function</span> () {\n      res.<span class=\"hljs-keyword\">write</span>(&quot;data: &quot; + (<span class=\"hljs-built_in\">new</span> <span class=\"hljs-type\">Date</span>()) + &quot;\\n\\n&quot;);\n    }, <span class=\"hljs-number\">1000</span>);\n\n    req.<span class=\"hljs-keyword\">connection</span>.addListener(&quot;close&quot;, <span class=\"hljs-keyword\">function</span> () {\n      clearInterval(<span class=\"hljs-type\">interval</span>);\n    }, <span class=\"hljs-keyword\">false</span>);\n  }\n}).<span class=\"hljs-keyword\">listen</span>(<span class=\"hljs-number\">8844</span>, &quot;127.0.0.1&quot;); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"283,311"}}],"payload":{"tag":"h2","lines":"276,278"}},{"content":"&#x53c2;&#x8003;&#x94fe;&#x63a5; <a href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\">#</a><a href=\"#navbar\"></a>","children":[{"content":"Colin Ihrig, <a href=\"http://jspro.com/apis/implementing-push-technology-using-server-sent-events/\">Implementing Push Technology Using Server-Sent Events</a>","children":[],"payload":{"tag":"li","lines":"315,316"}},{"content":"Colin Ihrig&#xff0c;<a href=\"http://cjihrig.com/blog/the-server-side-of-server-sent-events/\">The Server Side of Server-Sent Events</a>","children":[],"payload":{"tag":"li","lines":"316,317"}},{"content":"Eric Bidelman, <a href=\"http://www.html5rocks.com/en/tutorials/eventsource/basics/\">Stream Updates with Server-Sent Events</a>","children":[],"payload":{"tag":"li","lines":"317,318"}},{"content":"MDN&#xff0c;<a href=\"https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events\">Using server-sent events</a>","children":[],"payload":{"tag":"li","lines":"318,319"}},{"content":"Segment.io, <a href=\"https://segment.io/blog/2014-04-03-server-sent-events-the-simplest-realtime-browser-spec/\">Server-Sent Events: The simplest realtime browser spec</a>","children":[],"payload":{"tag":"li","lines":"319,320"}}],"payload":{"tag":"h2","lines":"312,314"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
