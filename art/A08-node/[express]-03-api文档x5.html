<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"","children":[{"content":"express()","children":[{"content":"<pre data-lines=\"2,8\"><code data-lines=\"2,8\">&#x5e94;&#x7528;\n&#x8bf7;&#x6c42;\n&#x54cd;&#x5e94;\n&#x8def;&#x7531;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2,8"}}],"payload":{"tag":"h1","lines":"0,1"}},{"content":"express()&#x4e2d;&#x82f1;","children":[{"content":"","children":[{"content":"<pre data-lines=\"13,19\"><code data-lines=\"13,19\">express<span class=\"hljs-selector-class\">.json</span>(<span class=\"hljs-selector-attr\">[options]</span>)\nexpress<span class=\"hljs-selector-class\">.static</span>(root, <span class=\"hljs-selector-attr\">[options]</span>)\nexpress<span class=\"hljs-selector-class\">.Router</span>(<span class=\"hljs-selector-attr\">[options]</span>)\nexpress<span class=\"hljs-selector-class\">.urlencoded</span>(<span class=\"hljs-selector-attr\">[options]</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"13,19"}},{"content":"<pre data-lines=\"20,21\"><code>&#x521b;&#x5efa;&#x4e00;&#x4e2a; Express &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x3002;express() &#x51fd;&#x6570;&#x662f; express &#x6a21;&#x5757;&#x5bfc;&#x51fa;&#x7684;&#x9876;&#x7ea7;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"20,21"}},{"content":"<pre data-lines=\"22,26\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"22,26"}}],"payload":{"tag":"h2","lines":"11,12"}},{"content":"express.json([options])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"29,58\"><code>&#x8fd9;&#x662f; Express &#x4e2d;&#x5185;&#x7f6e;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;&#x5b83;&#x4f7f;&#x7528; JSON &#x6709;&#x6548;&#x8d1f;&#x8f7d;&#x89e3;&#x6790;&#x4f20;&#x5165;&#x8bf7;&#x6c42;&#xff0c;&#x5e76;&#x4e14;&#x57fa;&#x4e8e; body-parser&#x3002;\n\n&#x8fd4;&#x56de;&#x4ec5;&#x89e3;&#x6790; JSON &#x5e76;&#x4e14;&#x4ec5;&#x67e5;&#x770b; Content-Type &#x6807;&#x5934;&#x4e0e; type &#x9009;&#x9879;&#x5339;&#x914d;&#x7684;&#x8bf7;&#x6c42;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;\n&#x6b64;&#x89e3;&#x6790;&#x5668;&#x63a5;&#x53d7;&#x6b63;&#x6587;&#x7684;&#x4efb;&#x4f55;&#x200b;&#x200b; Unicode &#x7f16;&#x7801;&#xff0c;&#x5e76;&#x652f;&#x6301; gzip &#x548c; deflate &#x7f16;&#x7801;&#x7684;&#x81ea;&#x52a8;&#x81a8;&#x80c0;&#x3002;\n\n&#x5305;&#x542b;&#x89e3;&#x6790;&#x6570;&#x636e;&#x7684;&#x65b0; body &#x5bf9;&#x8c61;&#x5728;&#x4e2d;&#x95f4;&#x4ef6;&#xff08;&#x5373; req.body&#xff09;&#x4e4b;&#x540e;&#x586b;&#x5145;&#x5230; request &#x5bf9;&#x8c61;&#x4e0a;&#xff0c;\n&#x5982;&#x679c;&#x6ca1;&#x6709;&#x8981;&#x89e3;&#x6790;&#x7684;&#x4e3b;&#x4f53;&#x3001;Content-Type &#x4e0d;&#x5339;&#x914d;&#x6216;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;&#x5219;&#x586b;&#x5145;&#x4e00;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61;&#xff08;{}&#xff09;&#x3002;\n\n&#x7531;&#x4e8e; req.body &#x7684;&#x5f62;&#x72b6;&#x57fa;&#x4e8e;&#x7528;&#x6237;&#x63a7;&#x5236;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x56e0;&#x6b64;&#x8be5;&#x5bf9;&#x8c61;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x5c5e;&#x6027;&#x548c;&#x503c;&#x90fd;&#x662f;&#x4e0d;&#x53ef;&#x4fe1;&#x7684;&#xff0c;&#x5e94;&#x8be5;&#x5728;&#x4fe1;&#x4efb;&#x4e4b;&#x524d;&#x8fdb;&#x884c;&#x9a8c;&#x8bc1;&#x3002;\n&#x4f8b;&#x5982;&#xff0c;req.body.foo.toString() &#x53ef;&#x80fd;&#x4ee5;&#x591a;&#x79cd;&#x65b9;&#x5f0f;&#x5931;&#x8d25;&#xff0c;&#x4f8b;&#x5982; foo &#x53ef;&#x80fd;&#x4e0d;&#x5b58;&#x5728;&#x6216;&#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;\ntoString &#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x800c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x5176;&#x4ed6;&#x7528;&#x6237;&#x8f93;&#x5165;&#x3002;\n\n**&#x4e0b;&#x8868;&#x63cf;&#x8ff0;&#x4e86;&#x53ef;&#x9009; options &#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x3002;**\n\n- inflate\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x5904;&#x7406;&#x653e;&#x6c14;&#xff08;&#x538b;&#x7f29;&#xff09;&#x7684;&#x4e3b;&#x4f53;&#xff1b;&#x5f53;&#x7981;&#x7528;&#x65f6;&#xff0c;&#x762a;&#x7684;&#x4e3b;&#x4f53;&#x4f1a;&#x88ab;&#x62d2;&#x7edd;&#x3002;\t&#x5e03;&#x5c14;&#x503c;\ttrue\n\n- limit\t&#x63a7;&#x5236;&#x6700;&#x5927;&#x8bf7;&#x6c42;&#x6b63;&#x6587;&#x5927;&#x5c0f;&#x3002;&#x5982;&#x679c;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x5b57;&#xff0c;&#x5219;&#x8be5;&#x503c;&#x6307;&#x5b9a;&#x5b57;&#x8282;&#x6570;&#xff1b;&#x5982;&#x679c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x5219;&#x5c06;&#x503c;&#x4f20;&#x9012;&#x7ed9;bytes&#x5e93;&#x8fdb;&#x884c;&#x89e3;&#x6790;&#x3002;\t&#x6df7;&#x5408;\t&quot;100kb&quot;\n\n- reviver\treviver &#x9009;&#x9879;&#x4f5c;&#x4e3a;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x76f4;&#x63a5;&#x4f20;&#x9012;&#x7ed9; JSON.parse&#x3002;&#x60a8;&#x53ef;&#x4ee5;&#x627e;&#x5230;&#x6709;&#x5173;&#x6b64;&#x8bba;&#x70b9; &#x5728;&#x5173;&#x4e8e; JSON.parse &#x7684; MDN &#x6587;&#x6863;&#x4e2d; &#x7684;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#x3002;\t&#x51fd;&#x6570;\tnull\n\n- strict\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x4ec5;&#x63a5;&#x53d7;&#x6570;&#x7ec4;&#x548c;&#x5bf9;&#x8c61;&#xff1b;&#x7981;&#x7528;&#x65f6;&#x5c06;&#x63a5;&#x53d7; JSON.parse &#x63a5;&#x53d7;&#x7684;&#x4efb;&#x4f55;&#x5185;&#x5bb9;&#x3002;\t&#x5e03;&#x5c14;&#x503c;\ttrue\n\n- type\t&#x8fd9;&#x7528;&#x4e8e;&#x786e;&#x5b9a;&#x4e2d;&#x95f4;&#x4ef6;&#x5c06;&#x89e3;&#x6790;&#x7684;&#x5a92;&#x4f53;&#x7c7b;&#x578b;&#x3002;&#x6b64;&#x9009;&#x9879;&#x53ef;&#x4ee5;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x3001;&#x5b57;&#x7b26;&#x4e32;&#x6570;&#x7ec4;&#x6216;&#x51fd;&#x6570;&#x3002;\n- &#x5982;&#x679c;&#x4e0d;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x5219; type &#x9009;&#x9879;&#x76f4;&#x63a5;&#x4f20;&#x9012;&#x7ed9; type-is &#x5e93;&#xff0c;\n- &#x5b83;&#x53ef;&#x4ee5;&#x662f;&#x6269;&#x5c55;&#x540d;&#xff08;&#x5982; json&#xff09;&#x3001;mime &#x7c7b;&#x578b;&#xff08;&#x5982; application/json&#xff09;&#x6216;&#x5e26;&#x6709;&#x901a;&#x914d;&#x7b26;&#x7684; mime &#x7c7b;&#x578b;&#xff08;&#x5982; */* &#x6216; */json&#xff09;&#x3002;\n- &#x5982;&#x679c;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x5219; type &#x9009;&#x9879;&#x88ab;&#x79f0;&#x4e3a; fn(req)&#xff0c;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x8fd4;&#x56de;&#x771f;&#x503c;&#xff0c;&#x5219;&#x89e3;&#x6790;&#x8bf7;&#x6c42;&#x3002;\t&#x6df7;&#x5408;\t&quot;application/json&quot;\n\n- verify\t&#x6b64;&#x9009;&#x9879;&#xff08;&#x5982;&#x679c;&#x63d0;&#x4f9b;&#xff09;&#x79f0;&#x4e3a; verify(req, res, buf, encoding)&#xff0c;\n- &#x5176;&#x4e2d; buf &#x662f;&#x539f;&#x59cb;&#x8bf7;&#x6c42;&#x6b63;&#x6587;&#x7684; Buffer&#xff0c;encoding &#x662f;&#x8bf7;&#x6c42;&#x7684;&#x7f16;&#x7801;&#x3002;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x6765;&#x4e2d;&#x6b62;&#x89e3;&#x6790;&#x3002;\t&#x51fd;&#x6570;\tundefined\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"29,58"}}],"payload":{"tag":"h2","lines":"27,28"}},{"content":"express.static(root, [options])&#x4e2d;&#x82f1;","children":[{"content":"dotfiles&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"93,98\"><code>&#x6b64;&#x9009;&#x9879;&#x7684;&#x53ef;&#x80fd;&#x503c;&#x4e3a;&#xff1a;\n\n- &quot;allow&quot; - &#x5bf9;&#x70b9;&#x6587;&#x4ef6;&#x6ca1;&#x6709;&#x7279;&#x6b8a;&#x5904;&#x7406;&#x3002;\n- &quot;deny&quot; - &#x62d2;&#x7edd;&#x5bf9;&#x70b9;&#x6587;&#x4ef6;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x4ee5; 403 &#x54cd;&#x5e94;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528; next()&#x3002;\n- &quot;ignore&quot; - &#x5c31;&#x597d;&#x50cf;&#x70b9;&#x6587;&#x4ef6;&#x4e0d;&#x5b58;&#x5728;&#x4e00;&#x6837;&#xff0c;&#x7528; 404 &#x54cd;&#x5e94;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528; next()&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"93,98"}}],"payload":{"tag":"h3","lines":"91,92"}},{"content":"fallthrough&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"101,108\"><code>&#x5f53;&#x6b64;&#x9009;&#x9879;&#x4e3a; true &#x65f6;&#xff0c;&#x5ba2;&#x6237;&#x7aef;&#x9519;&#x8bef;&#xff08;&#x4f8b;&#x5982;&#x9519;&#x8bef;&#x8bf7;&#x6c42;&#x6216;&#x5bf9;&#x4e0d;&#x5b58;&#x5728;&#x6587;&#x4ef6;&#x7684;&#x8bf7;&#x6c42;&#xff09;&#x5c06;&#x5bfc;&#x81f4;&#x6b64;&#x4e2d;&#x95f4;&#x4ef6;&#x7b80;&#x5355;&#x5730;&#x8c03;&#x7528; next() \n&#x4ee5;&#x8c03;&#x7528;&#x5806;&#x6808;&#x4e2d;&#x7684;&#x4e0b;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;&#x5f53;&#x4e3a; false &#x65f6;&#xff0c;&#x8fd9;&#x4e9b;&#x9519;&#x8bef;&#xff08;&#x751a;&#x81f3;&#x662f; 404&#xff09;&#x5c06;&#x8c03;&#x7528; next(err)&#x3002;\n\n&#x5c06;&#x6b64;&#x9009;&#x9879;&#x8bbe;&#x7f6e;&#x4e3a; true&#xff0c;&#x4ee5;&#x4fbf;&#x60a8;&#x53ef;&#x4ee5;&#x5c06;&#x591a;&#x4e2a;&#x7269;&#x7406;&#x76ee;&#x5f55;&#x6620;&#x5c04;&#x5230;&#x540c;&#x4e00;&#x4e2a; Web &#x5730;&#x5740;&#x6216;&#x8def;&#x7531;&#x4ee5;&#x586b;&#x5145;&#x4e0d;&#x5b58;&#x5728;&#x7684;&#x6587;&#x4ef6;&#x3002;\n\n&#x5982;&#x679c;&#x60a8;&#x5df2;&#x5c06;&#x6b64;&#x4e2d;&#x95f4;&#x4ef6;&#x5b89;&#x88c5;&#x5728;&#x4e25;&#x683c;&#x8bbe;&#x8ba1;&#x4e3a;&#x5355;&#x4e2a;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x76ee;&#x5f55;&#x7684;&#x8def;&#x5f84;&#x4e0a;&#xff0c;&#x8bf7;&#x4f7f;&#x7528; false&#xff0c;&#x8fd9;&#x5141;&#x8bb8;&#x77ed;&#x8def; 404 &#x4ee5;&#x51cf;&#x5c11;&#x5f00;&#x9500;&#x3002;\n&#x8fd9;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x4e5f;&#x4f1a;&#x54cd;&#x5e94;&#x6240;&#x6709;&#x7684;&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"101,108"}}],"payload":{"tag":"h3","lines":"99,100"}},{"content":"setHeaders&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"111,114\"><code>&#x5bf9;&#x4e8e;&#x6b64;&#x9009;&#x9879;&#xff0c;&#x6307;&#x5b9a;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x6765;&#x8bbe;&#x7f6e;&#x81ea;&#x5b9a;&#x4e49;&#x54cd;&#x5e94;&#x6807;&#x5934;&#x3002;&#x5bf9;&#x6807;&#x5934;&#x7684;&#x66f4;&#x6539;&#x5fc5;&#x987b;&#x540c;&#x6b65;&#x53d1;&#x751f;&#x3002;\n\n&#x8be5;&#x51fd;&#x6570;&#x7684;&#x7b7e;&#x540d;&#x662f;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"111,114"}},{"content":"<pre data-lines=\"115,118\"><code data-lines=\"115,118\"><span class=\"hljs-function\"><span class=\"hljs-title\">fn</span><span class=\"hljs-params\">(res, path, stat)</span></span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"115,118"}}],"payload":{"tag":"h3","lines":"109,110"}},{"content":"express.static &#x793a;&#x4f8b;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"128,129\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x5c06; express.static &#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x4e0e;&#x7cbe;&#x5fc3;&#x8bbe;&#x8ba1;&#x7684;&#x9009;&#x9879;&#x5bf9;&#x8c61;&#x4e00;&#x8d77;&#x4f7f;&#x7528;&#x7684;&#x793a;&#x4f8b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"128,129"}},{"content":"<pre data-lines=\"130,145\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> options = {\n  <span class=\"hljs-attr\">dotfiles</span>: <span class=\"hljs-string\">&apos;ignore&apos;</span>,\n  <span class=\"hljs-attr\">etag</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">extensions</span>: [<span class=\"hljs-string\">&apos;htm&apos;</span>, <span class=\"hljs-string\">&apos;html&apos;</span>],\n  <span class=\"hljs-attr\">index</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">maxAge</span>: <span class=\"hljs-string\">&apos;1d&apos;</span>,\n  <span class=\"hljs-attr\">redirect</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-title function_\">setHeaders</span> (res, path, stat) {\n    res.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;x-timestamp&apos;</span>, <span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>())\n  }\n}\n\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(<span class=\"hljs-string\">&apos;public&apos;</span>, options))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"130,145"}}],"payload":{"tag":"h3","lines":"126,127"}},{"content":"express.Router([options])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"148,149\"><code>&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x65b0;&#x7684; router &#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"148,149"}},{"content":"<pre data-lines=\"150,153\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> router = express.<span class=\"hljs-title class_\">Router</span>([options])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,153"}},{"content":"<pre data-lines=\"154,161\"><code>&#x53ef;&#x9009;&#x7684; options &#x53c2;&#x6570;&#x6307;&#x5b9a;&#x8def;&#x7531;&#x7684;&#x884c;&#x4e3a;&#x3002;\n\n- caseSensitive\t&#x542f;&#x7528;&#x533a;&#x5206;&#x5927;&#x5c0f;&#x5199;&#x3002;\t&#x9ed8;&#x8ba4;&#x7981;&#x7528;&#xff0c;&#x5c06; &quot;/Foo&quot; &#x548c; &quot;/foo&quot; &#x89c6;&#x4e3a;&#x76f8;&#x540c;&#x3002;\n\n- mergeParams\t&#x4fdd;&#x7559;&#x6765;&#x81ea;&#x7236;&#x8def;&#x7531;&#x7684; req.params &#x503c;&#x3002;&#x5982;&#x679c;&#x7236;&#x9879;&#x548c;&#x5b50;&#x9879;&#x7684;&#x53c2;&#x6570;&#x540d;&#x79f0;&#x51b2;&#x7a81;&#xff0c;&#x5219;&#x5b50;&#x9879;&#x7684;&#x503c;&#x4f18;&#x5148;&#x3002;\tfalse\t4.5.0+\n\n- strict\t&#x542f;&#x7528;&#x4e25;&#x683c;&#x8def;&#x7531;&#x3002;\t&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#x7981;&#x7528;&#xff0c;&#x8def;&#x7531;&#x5bf9; &quot;/foo&quot; &#x548c; &quot;/foo/&quot; &#x7684;&#x5904;&#x7406;&#x76f8;&#x540c;&#x3002;\t\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"154,161"}}],"payload":{"tag":"h3","lines":"146,147"}},{"content":"express.urlencoded([options])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"164,197\"><code>&#x8fd9;&#x662f; Express &#x4e2d;&#x5185;&#x7f6e;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;&#x5b83;&#x4f7f;&#x7528; urlencoded &#x6709;&#x6548;&#x8d1f;&#x8f7d;&#x89e3;&#x6790;&#x4f20;&#x5165;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x5e76;&#x4e14;&#x57fa;&#x4e8e; body-parser&#x3002;\n\n&#x8fd4;&#x56de;&#x4ec5;&#x89e3;&#x6790; urlencoded &#x6b63;&#x6587;&#x5e76;&#x4ec5;&#x67e5;&#x770b; Content-Type &#x6807;&#x5934;&#x4e0e; type &#x9009;&#x9879;&#x5339;&#x914d;&#x7684;&#x8bf7;&#x6c42;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;\n&#x6b64;&#x89e3;&#x6790;&#x5668;&#x4ec5;&#x63a5;&#x53d7;&#x6b63;&#x6587;&#x7684; UTF-8 &#x7f16;&#x7801;&#xff0c;&#x5e76;&#x652f;&#x6301; gzip &#x548c; deflate &#x7f16;&#x7801;&#x7684;&#x81ea;&#x52a8;&#x81a8;&#x80c0;&#x3002;\n\n&#x5305;&#x542b;&#x89e3;&#x6790;&#x6570;&#x636e;&#x7684;&#x65b0; body &#x5bf9;&#x8c61;&#x5728;&#x4e2d;&#x95f4;&#x4ef6;&#xff08;&#x5373; req.body&#xff09;&#x4e4b;&#x540e;&#x586b;&#x5145;&#x5230; request &#x5bf9;&#x8c61;&#x4e0a;&#xff0c;\n&#x5982;&#x679c;&#x6ca1;&#x6709;&#x8981;&#x89e3;&#x6790;&#x7684;&#x4e3b;&#x4f53;&#x3001;Content-Type &#x4e0d;&#x5339;&#x914d;&#x6216;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;&#x5219;&#x586b;&#x5145;&#x4e00;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61;&#xff08;{}&#xff09;&#x3002;\n&#x8be5;&#x5bf9;&#x8c61;&#x5c06;&#x5305;&#x542b;&#x952e;&#x503c;&#x5bf9;&#xff0c;&#x5176;&#x4e2d;&#x503c;&#x53ef;&#x4ee5;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x6570;&#x7ec4;&#xff08;&#x5f53; extended &#x4e3a; false &#x65f6;&#xff09;&#x6216;&#x4efb;&#x4f55;&#x7c7b;&#x578b;\n&#xff08;&#x5f53; extended &#x4e3a; true &#x65f6;&#xff09;&#x3002;\n\n&#x7531;&#x4e8e; req.body &#x7684;&#x5f62;&#x72b6;&#x57fa;&#x4e8e;&#x7528;&#x6237;&#x63a7;&#x5236;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x56e0;&#x6b64;&#x8be5;&#x5bf9;&#x8c61;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x5c5e;&#x6027;&#x548c;&#x503c;&#x90fd;&#x662f;&#x4e0d;&#x53ef;&#x4fe1;&#x7684;&#xff0c;\n&#x5e94;&#x8be5;&#x5728;&#x4fe1;&#x4efb;&#x4e4b;&#x524d;&#x8fdb;&#x884c;&#x9a8c;&#x8bc1;&#x3002;&#x4f8b;&#x5982;&#xff0c;req.body.foo.toString() &#x53ef;&#x80fd;&#x4ee5;&#x591a;&#x79cd;&#x65b9;&#x5f0f;&#x5931;&#x8d25;&#xff0c;\n&#x4f8b;&#x5982; foo &#x53ef;&#x80fd;&#x4e0d;&#x5b58;&#x5728;&#x6216;&#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;toString &#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x800c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x5176;&#x4ed6;&#x7528;&#x6237;&#x8f93;&#x5165;&#x3002;\n\n&#x4e0b;&#x8868;&#x63cf;&#x8ff0;&#x4e86;&#x53ef;&#x9009; options &#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x3002;\n\n- extended\t&#x6b64;&#x9009;&#x9879;&#x5141;&#x8bb8;&#x5728;&#x4f7f;&#x7528; querystring &#x5e93;&#xff08;&#x5f53; false&#xff09;&#x6216; qs &#x5e93;&#xff08;&#x5f53; true&#xff09;&#x89e3;&#x6790; URL \n- &#x7f16;&#x7801;&#x6570;&#x636e;&#x4e4b;&#x95f4;&#x8fdb;&#x884c;&#x9009;&#x62e9;&#x3002;&quot;extended&quot; &#x8bed;&#x6cd5;&#x5141;&#x8bb8;&#x5c06;&#x4e30;&#x5bcc;&#x7684;&#x5bf9;&#x8c61;&#x548c;&#x6570;&#x7ec4;&#x7f16;&#x7801;&#x4e3a; URL &#x7f16;&#x7801;&#x683c;&#x5f0f;&#xff0c;\n- &#x4ece;&#x800c;&#x63d0;&#x4f9b;&#x7c7b;&#x4f3c; JSON &#x7684; URL &#x7f16;&#x7801;&#x4f53;&#x9a8c;&#x3002;&#x6b32;&#x4e86;&#x89e3;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x8bf7; &#x67e5;&#x770b; qs &#x5e93;&#x3002;\t&#x5e03;&#x5c14;&#x503c;\tfalse\n\n- inflate\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x5904;&#x7406;&#x653e;&#x6c14;&#xff08;&#x538b;&#x7f29;&#xff09;&#x7684;&#x4e3b;&#x4f53;&#xff1b;&#x5f53;&#x7981;&#x7528;&#x65f6;&#xff0c;&#x762a;&#x7684;&#x4e3b;&#x4f53;&#x4f1a;&#x88ab;&#x62d2;&#x7edd;&#x3002;\t&#x5e03;&#x5c14;&#x503c;\ttrue\n\n- limit\t&#x63a7;&#x5236;&#x6700;&#x5927;&#x8bf7;&#x6c42;&#x6b63;&#x6587;&#x5927;&#x5c0f;&#x3002;&#x5982;&#x679c;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x5b57;&#xff0c;&#x5219;&#x8be5;&#x503c;&#x6307;&#x5b9a;&#x5b57;&#x8282;&#x6570;&#xff1b;&#x5982;&#x679c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x5219;&#x5c06;&#x503c;&#x4f20;&#x9012;&#x7ed9;bytes&#x5e93;&#x8fdb;&#x884c;&#x89e3;&#x6790;&#x3002;\t&#x6df7;&#x5408;\t&quot;100kb&quot;\n\n- parameterLimit\t&#x6b64;&#x9009;&#x9879;&#x63a7;&#x5236; URL &#x7f16;&#x7801;&#x6570;&#x636e;&#x4e2d;&#x5141;&#x8bb8;&#x7684;&#x6700;&#x5927;&#x53c2;&#x6570;&#x6570;&#x3002;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x5305;&#x542b;&#x7684;&#x53c2;&#x6570;&#x591a;&#x4e8e;&#x8be5;&#x503c;&#xff0c;&#x5219;&#x4f1a;&#x5f15;&#x53d1;&#x9519;&#x8bef;&#x3002;\t&#x6570;&#x5b57;\t1000\n\n- type\t&#x8fd9;&#x7528;&#x4e8e;&#x786e;&#x5b9a;&#x4e2d;&#x95f4;&#x4ef6;&#x5c06;&#x89e3;&#x6790;&#x7684;&#x5a92;&#x4f53;&#x7c7b;&#x578b;&#x3002;&#x6b64;&#x9009;&#x9879;&#x53ef;&#x4ee5;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x3001;&#x5b57;&#x7b26;&#x4e32;&#x6570;&#x7ec4;&#x6216;&#x51fd;&#x6570;&#x3002;\n- &#x5982;&#x679c;&#x4e0d;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x5219; type &#x9009;&#x9879;&#x76f4;&#x63a5;&#x4f20;&#x9012;&#x7ed9; type-is &#x5e93;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x662f;&#x6269;&#x5c55;&#x540d;&#xff08;&#x5982; urlencoded&#xff09;&#x3001;mime &#x7c7b;&#x578b;\n- &#xff08;&#x5982; application/x-www-form-urlencoded&#xff09;&#x6216;&#x5e26;&#x6709;&#x901a;&#x914d;&#x7b26;&#x7684; mime &#x7c7b;&#x578b;&#xff08;&#x5982; */x-www-form-urlencoded&#xff09;&#x3002;\n- &#x5982;&#x679c;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x5219; type &#x9009;&#x9879;&#x88ab;&#x79f0;&#x4e3a; fn(req)&#xff0c;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x8fd4;&#x56de;&#x771f;&#x503c;&#xff0c;&#x5219;&#x89e3;&#x6790;&#x8bf7;&#x6c42;&#x3002;\t&#x6df7;&#x5408;\t&quot;application/x-www-form-urlencoded&quot;\n\n- verify\t&#x6b64;&#x9009;&#x9879;&#xff08;&#x5982;&#x679c;&#x63d0;&#x4f9b;&#xff09;&#x79f0;&#x4e3a; verify(req, res, buf, encoding)&#xff0c;\n- &#x5176;&#x4e2d; buf &#x662f;&#x539f;&#x59cb;&#x8bf7;&#x6c42;&#x6b63;&#x6587;&#x7684; Buffer&#xff0c;encoding &#x662f;&#x8bf7;&#x6c42;&#x7684;&#x7f16;&#x7801;&#x3002;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x6765;&#x4e2d;&#x6b62;&#x89e3;&#x6790;&#x3002;\t&#x51fd;&#x6570;\tundefined\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"164,197"}}],"payload":{"tag":"h3","lines":"162,163"}}],"payload":{"tag":"h2","lines":"59,60"}}],"payload":{"tag":"h1","lines":"9,10"}},{"content":"&#x5e94;&#x7528;","children":[{"content":"app.locals&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"254,255\"><code>app.locals &#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x662f;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x7684;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#xff0c;&#x5e76;&#x4e14;&#x53ef;&#x4ee5;&#x5728;&#x4f7f;&#x7528; res.render &#x5448;&#x73b0;&#x7684;&#x6a21;&#x677f;&#x4e2d;&#x4f7f;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"254,255"}},{"content":"<pre data-lines=\"256,263\"><code class=\"language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(app.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">title</span>)\n<span class=\"hljs-comment\">// =&gt; &apos;My App&apos;</span>\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(app.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">email</span>)\n<span class=\"hljs-comment\">// =&gt; &apos;me@myapp.com&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"256,263"}},{"content":"<pre data-lines=\"264,269\"><code>&#x8bbe;&#x7f6e;&#x540e;&#xff0c;app.locals &#x5c5e;&#x6027;&#x7684;&#x503c;&#x5c06;&#x5728;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684;&#x6574;&#x4e2a;&#x751f;&#x547d;&#x5468;&#x671f;&#x4e2d;&#x4fdd;&#x6301;&#x4e0d;&#x53d8;&#xff0c;&#x800c; res.locals \n&#x5c5e;&#x6027;&#x4ec5;&#x5728;&#x8bf7;&#x6c42;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5185;&#x6709;&#x6548;&#x3002;\n\n&#x60a8;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x5448;&#x73b0;&#x7684;&#x6a21;&#x677f;&#x4e2d;&#x7684;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x3002;&#x8fd9;&#x5bf9;&#x4e8e;&#x4e3a;&#x6a21;&#x677f;&#x4ee5;&#x53ca;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7ea7;&#x6570;&#x636e;&#x63d0;&#x4f9b;&#x5e2e;&#x52a9;&#x51fd;&#x6570;&#x5f88;&#x6709;&#x7528;&#x3002;\n&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x53ef;&#x901a;&#x8fc7; req.app.locals &#x5728;&#x4e2d;&#x95f4;&#x4ef6;&#x4e2d;&#x4f7f;&#x7528;&#xff08;&#x53c2;&#x89c1; req.app&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"264,269"}},{"content":"<pre data-lines=\"270,275\"><code class=\"language-js\">app.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">title</span> = <span class=\"hljs-string\">&apos;My App&apos;</span>\napp.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">strftime</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;strftime&apos;</span>)\napp.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">email</span> = <span class=\"hljs-string\">&apos;me@myapp.com&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"270,275"}}],"payload":{"tag":"h2","lines":"252,253"}},{"content":"app.mountpath&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"278,281\"><code>app.mountpath &#x5c5e;&#x6027;&#x5305;&#x542b;&#x4e00;&#x4e2a;&#x6216;&#x591a;&#x4e2a;&#x5b89;&#x88c5;&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684;&#x8def;&#x5f84;&#x6a21;&#x5f0f;&#x3002;\n\n&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x662f; express &#x7684;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;&#xff0c;&#x53ef;&#x7528;&#x4e8e;&#x5904;&#x7406;&#x5bf9;&#x8def;&#x7531;&#x7684;&#x8bf7;&#x6c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"278,281"}},{"content":"<pre data-lines=\"282,295\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>() <span class=\"hljs-comment\">// the main app</span>\n<span class=\"hljs-keyword\">const</span> admin = <span class=\"hljs-title function_\">express</span>() <span class=\"hljs-comment\">// the sub app</span>\n\nadmin.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(admin.<span class=\"hljs-property\">mountpath</span>) <span class=\"hljs-comment\">// /admin</span>\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Admin Homepage&apos;</span>)\n})\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/admin&apos;</span>, admin) <span class=\"hljs-comment\">// mount the sub app</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"282,295"}},{"content":"<pre data-lines=\"296,299\"><code>&#x5b83;&#x7c7b;&#x4f3c;&#x4e8e; req &#x5bf9;&#x8c61;&#x7684; baseUrl &#x5c5e;&#x6027;&#xff0c;&#x9664;&#x4e86; req.baseUrl &#x8fd4;&#x56de;&#x5339;&#x914d;&#x7684; URL &#x8def;&#x5f84;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x5339;&#x914d;&#x7684;&#x6a21;&#x5f0f;&#x3002;\n\n&#x5982;&#x679c;&#x5b50;&#x5e94;&#x7528;&#x6302;&#x8f7d;&#x5728;&#x591a;&#x4e2a;&#x8def;&#x5f84;&#x6a21;&#x5f0f;&#x4e0a;&#xff0c;app.mountpath &#x8fd4;&#x56de;&#x5176;&#x6302;&#x8f7d;&#x7684;&#x6a21;&#x5f0f;&#x5217;&#x8868;&#xff0c;&#x5982;&#x4e0b;&#x4f8b;&#x6240;&#x793a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"296,299"}},{"content":"<pre data-lines=\"300,317\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> admin = <span class=\"hljs-title function_\">express</span>()\n\nadmin.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(admin.<span class=\"hljs-property\">mountpath</span>) <span class=\"hljs-comment\">// [ &apos;/adm*n&apos;, &apos;/manager&apos; ]</span>\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Admin Homepage&apos;</span>)\n})\n\n<span class=\"hljs-keyword\">const</span> secret = <span class=\"hljs-title function_\">express</span>()\nsecret.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(secret.<span class=\"hljs-property\">mountpath</span>) <span class=\"hljs-comment\">// /secr*t</span>\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Admin Secret&apos;</span>)\n})\n\nadmin.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/secr*t&apos;</span>, secret) <span class=\"hljs-comment\">// load the &apos;secret&apos; router on &apos;/secr*t&apos;, on the &apos;admin&apos; sub app</span>\napp.<span class=\"hljs-title function_\">use</span>([<span class=\"hljs-string\">&apos;/adm*n&apos;</span>, <span class=\"hljs-string\">&apos;/manager&apos;</span>], admin) <span class=\"hljs-comment\">// load the &apos;admin&apos; router on &apos;/adm*n&apos; and &apos;/manager&apos;, on the parent app</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"300,317"}}],"payload":{"tag":"h2","lines":"276,277"}},{"content":"app.router&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"320,321\"><code>&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684;&#x5185;&#x7f6e;&#x8def;&#x7531;&#x5b9e;&#x4f8b;&#x3002;&#x8fd9;&#x662f;&#x5728;&#x7b2c;&#x4e00;&#x6b21;&#x8bbf;&#x95ee;&#x65f6;&#x61d2;&#x60f0;&#x5730;&#x521b;&#x5efa;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"320,321"}},{"content":"<pre data-lines=\"322,333\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n<span class=\"hljs-keyword\">const</span> router = app.<span class=\"hljs-property\">router</span>\n\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;hello world&apos;</span>)\n})\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"322,333"}},{"content":"<pre data-lines=\"334,335\"><code>&#x60a8;&#x53ef;&#x4ee5;&#x50cf;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e00;&#x6837;&#x5411; router &#x6dfb;&#x52a0;&#x4e2d;&#x95f4;&#x4ef6;&#x548c; HTTP &#x65b9;&#x6cd5;&#x8def;&#x7531;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"334,335"}}],"payload":{"tag":"h2","lines":"318,319"}},{"content":"app.on(&apos;mount&apos;, callback(parent))&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"338,348\"><code>&#x5f53;&#x5b50;&#x5e94;&#x7528;&#x5b89;&#x88c5;&#x5728;&#x7236;&#x5e94;&#x7528;&#x4e0a;&#x65f6;&#xff0c;mount &#x4e8b;&#x4ef6;&#x4f1a;&#x5728;&#x5b50;&#x5e94;&#x7528;&#x4e0a;&#x89e6;&#x53d1;&#x3002;&#x7236;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x88ab;&#x4f20;&#x9012;&#x7ed9;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n\n&#x6ce8;&#x610f;\n\n&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5c06;&#xff1a;\n\n- &#x4e0d;&#x7ee7;&#x627f;&#x5177;&#x6709;&#x9ed8;&#x8ba4;&#x503c;&#x7684;&#x8bbe;&#x7f6e;&#x503c;&#x3002;&#x60a8;&#x5fc5;&#x987b;&#x5728;&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x8bbe;&#x7f6e;&#x8be5;&#x503c;&#x3002;\n- &#x7ee7;&#x627f;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#xff0c;&#x6ca1;&#x6709;&#x9ed8;&#x8ba4;&#x503c;&#x3002;\n\n&#x8be6;&#x89c1; &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x8bbe;&#x7f6e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"338,348"}},{"content":"<pre data-lines=\"349,363\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> admin = <span class=\"hljs-title function_\">express</span>()\n\nadmin.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&apos;mount&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">parent</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Admin Mounted&apos;</span>)\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(parent) <span class=\"hljs-comment\">// refers to the parent app</span>\n})\n\nadmin.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Admin Homepage&apos;</span>)\n})\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/admin&apos;</span>, admin)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"349,363"}}],"payload":{"tag":"h2","lines":"336,337"}},{"content":"app.all(path, callback [, callback ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"366,406\"><code>&#x6b64;&#x65b9;&#x6cd5;&#x7c7b;&#x4f3c;&#x4e8e;&#x6807;&#x51c6; app.METHOD() &#x65b9;&#x6cd5;&#xff0c;&#x4e0d;&#x540c;&#x4e4b;&#x5904;&#x5728;&#x4e8e;&#x5b83;&#x5339;&#x914d;&#x6240;&#x6709; HTTP &#x52a8;&#x8bcd;&#x3002;\n\n- path\n\n&#x8c03;&#x7528;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x7684;&#x8def;&#x5f84;&#xff1b;&#x53ef;&#x4ee5;&#x662f;&#x4ee5;&#x4e0b;&#x4efb;&#x4f55;&#x4e00;&#x79cd;&#xff1a;\n\n- &#x8868;&#x793a;&#x8def;&#x5f84;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n- &#x8def;&#x5f84;&#x6a21;&#x5f0f;&#x3002;\n- &#x5339;&#x914d;&#x8def;&#x5f84;&#x7684;&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;&#x6a21;&#x5f0f;&#x3002;\n- &#x4ee5;&#x4e0a;&#x4efb;&#x4f55;&#x4e00;&#x79cd;&#x7ec4;&#x5408;&#x7684;&#x6570;&#x7ec4;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x53c2;&#x89c1; &#x8def;&#x5f84;&#x793a;&#x4f8b;&#x3002;\n\n&apos;/&apos;&#xff08;&#x6839;&#x8def;&#x5f84;&#xff09;\n\n- callback\n\n&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff1b;&#x53ef;&#x4ee5;&#x662f;&#xff1a;\n\n- &#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n\n- &#x4e00;&#x7cfb;&#x5217;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#xff08;&#x4ee5;&#x9017;&#x53f7;&#x5206;&#x9694;&#xff09;&#x3002;\n\n- &#x4e00;&#x7ec4;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n\n- &#x4ee5;&#x4e0a;&#x6240;&#x6709;&#x7684;&#x7ec4;&#x5408;&#x3002;\n\n&#x60a8;&#x53ef;&#x4ee5;&#x63d0;&#x4f9b;&#x591a;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x5176;&#x884c;&#x4e3a;&#x7c7b;&#x4f3c;&#x4e8e;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x53ea;&#x662f;&#x8fd9;&#x4e9b;&#x56de;&#x8c03;&#x53ef;&#x4ee5;&#x8c03;&#x7528; next(&apos;route&apos;) &#x4ee5;&#x7ed5;&#x8fc7;&#x5269;&#x4f59;&#x7684;&#x8def;&#x7531;&#x56de;&#x8c03;&#x3002;&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x6b64;&#x673a;&#x5236;&#x5bf9;&#x8def;&#x7531;&#x65bd;&#x52a0;&#x5148;&#x51b3;&#x6761;&#x4ef6;&#xff0c;&#x7136;&#x540e;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x7406;&#x7531;&#x7ee7;&#x7eed;&#x5f53;&#x524d;&#x8def;&#x7531;&#xff0c;&#x5219;&#x5c06;&#x63a7;&#x5236;&#x6743;&#x4f20;&#x9012;&#x7ed9;&#x540e;&#x7eed;&#x8def;&#x7531;&#x3002;\n\n&#x5f53;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x6216;&#x8fd4;&#x56de;&#x88ab;&#x62d2;&#x7edd;&#x7684; Promise &#x65f6;&#xff0c;next(err) &#x5c06;&#x88ab;&#x81ea;&#x52a8;&#x8c03;&#x7528;&#x3002;\n\n&#x7531;&#x4e8e; router &#x548c; app &#x5b9e;&#x73b0;&#x4e86;&#x4e2d;&#x95f4;&#x4ef6;&#x63a5;&#x53e3;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x50cf;&#x4f7f;&#x7528;&#x4efb;&#x4f55;&#x5176;&#x4ed6;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x4e00;&#x6837;&#x4f7f;&#x7528;&#x5b83;&#x4eec;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x53c2;&#x89c1; &#x4e2d;&#x95f4;&#x4ef6;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x793a;&#x4f8b;&#x3002;\n\n&#x65e0;\n\n**&#x793a;&#x4f8b;&#x4e2d;&#x82f1;**\n\n&#x65e0;&#x8bba;&#x4f7f;&#x7528; GET&#x3001;POST&#x3001;PUT&#x3001;DELETE &#x8fd8;&#x662f;&#x4efb;&#x4f55;&#x5176;&#x4ed6; HTTP &#x8bf7;&#x6c42;&#x65b9;&#x6cd5;&#xff0c;&#x5bf9; /secret &#x7684;&#x8bf7;&#x6c42;&#x90fd;&#x4f1a;&#x6267;&#x884c;&#x4ee5;&#x4e0b;&#x56de;&#x8c03;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"366,406"}},{"content":"<pre data-lines=\"407,413\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;/secret&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Accessing the secret section ...&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>() <span class=\"hljs-comment\">// pass control to the next handler</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"407,413"}},{"content":"<pre data-lines=\"414,415\"><code>app.all() &#x65b9;&#x6cd5;&#x5bf9;&#x4e8e;&#x4e3a;&#x7279;&#x5b9a;&#x8def;&#x5f84;&#x524d;&#x7f00;&#x6216;&#x4efb;&#x610f;&#x5339;&#x914d;&#x6620;&#x5c04; &quot;global&quot; &#x903b;&#x8f91;&#x5f88;&#x6709;&#x7528;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5982;&#x679c;&#x60a8;&#x5c06;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#x653e;&#x5728;&#x6240;&#x6709;&#x5176;&#x4ed6;&#x8def;&#x7531;&#x5b9a;&#x4e49;&#x7684;&#x9876;&#x90e8;&#xff0c;&#x5219;&#x8981;&#x6c42;&#x4ece;&#x8be5;&#x70b9;&#x5f00;&#x59cb;&#x7684;&#x6240;&#x6709;&#x8def;&#x7531;&#x90fd;&#x9700;&#x8981;&#x8eab;&#x4efd;&#x9a8c;&#x8bc1;&#xff0c;&#x5e76;&#x81ea;&#x52a8;&#x52a0;&#x8f7d;&#x7528;&#x6237;&#x3002;&#x8bf7;&#x8bb0;&#x4f4f;&#xff0c;&#x8fd9;&#x4e9b;&#x56de;&#x8c03;&#x4e0d;&#x5fc5;&#x5145;&#x5f53;&#x7aef;&#x70b9;&#xff1a;loadUser &#x53ef;&#x4ee5;&#x6267;&#x884c;&#x4efb;&#x52a1;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528; next() &#x4ee5;&#x7ee7;&#x7eed;&#x5339;&#x914d;&#x540e;&#x7eed;&#x8def;&#x7531;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"414,415"}},{"content":"<pre data-lines=\"416,419\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;*&apos;</span>, requireAuthentication, loadUser)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"416,419"}},{"content":"<pre data-lines=\"422,426\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;*&apos;</span>, requireAuthentication)\napp.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;*&apos;</span>, loadUser)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"422,426"}},{"content":"<pre data-lines=\"427,428\"><code>&#x53e6;&#x4e00;&#x4e2a;&#x793a;&#x4f8b;&#x662f;&#x5217;&#x5165;&#x767d;&#x540d;&#x5355;&#x7684; &quot;global&quot; &#x529f;&#x80fd;&#x3002;&#x8be5;&#x793a;&#x4f8b;&#x4e0e;&#x4e0a;&#x9762;&#x7684;&#x793a;&#x4f8b;&#x7c7b;&#x4f3c;&#xff0c;&#x4f46;&#x5b83;&#x4ec5;&#x9650;&#x5236;&#x4ee5; &quot;/api&quot; &#x5f00;&#x5934;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"427,428"}},{"content":"<pre data-lines=\"429,432\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;/api/*&apos;</span>, requireAuthentication)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"429,432"}}],"payload":{"tag":"h2","lines":"364,365"}},{"content":"app.delete(path, callback [, callback ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"435,475\"><code>&#x4f7f;&#x7528;&#x6307;&#x5b9a;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5c06; HTTP DELETE &#x8bf7;&#x6c42;&#x8def;&#x7531;&#x5230;&#x6307;&#x5b9a;&#x8def;&#x5f84;&#x3002;&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; &#x8def;&#x7531;&#x6307;&#x5357;&#x3002;\n\n- path\n\n&#x8c03;&#x7528;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x7684;&#x8def;&#x5f84;&#xff1b;&#x53ef;&#x4ee5;&#x662f;&#x4ee5;&#x4e0b;&#x4efb;&#x4f55;&#x4e00;&#x79cd;&#xff1a;\n\n- &#x8868;&#x793a;&#x8def;&#x5f84;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n\n- &#x8def;&#x5f84;&#x6a21;&#x5f0f;&#x3002;\n\n- &#x5339;&#x914d;&#x8def;&#x5f84;&#x7684;&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;&#x6a21;&#x5f0f;&#x3002;\n\n- &#x4ee5;&#x4e0a;&#x4efb;&#x4f55;&#x4e00;&#x79cd;&#x7ec4;&#x5408;&#x7684;&#x6570;&#x7ec4;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x53c2;&#x89c1; &#x8def;&#x5f84;&#x793a;&#x4f8b;&#x3002;\n\n&apos;/&apos;&#xff08;&#x6839;&#x8def;&#x5f84;&#xff09;\n\n- callback\n\n&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff1b;&#x53ef;&#x4ee5;&#x662f;&#xff1a;\n\n- &#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n\n- &#x4e00;&#x7cfb;&#x5217;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#xff08;&#x4ee5;&#x9017;&#x53f7;&#x5206;&#x9694;&#xff09;&#x3002;\n\n- &#x4e00;&#x7ec4;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n\n- &#x4ee5;&#x4e0a;&#x6240;&#x6709;&#x7684;&#x7ec4;&#x5408;&#x3002;\n\n&#x60a8;&#x53ef;&#x4ee5;&#x63d0;&#x4f9b;&#x591a;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x5176;&#x884c;&#x4e3a;&#x7c7b;&#x4f3c;&#x4e8e;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x53ea;&#x662f;&#x8fd9;&#x4e9b;&#x56de;&#x8c03;&#x53ef;&#x4ee5;&#x8c03;&#x7528; next(&apos;route&apos;) &#x4ee5;&#x7ed5;&#x8fc7;&#x5269;&#x4f59;&#x7684;&#x8def;&#x7531;&#x56de;&#x8c03;&#x3002;\n&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x6b64;&#x673a;&#x5236;&#x5bf9;&#x8def;&#x7531;&#x65bd;&#x52a0;&#x5148;&#x51b3;&#x6761;&#x4ef6;&#xff0c;&#x7136;&#x540e;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x7406;&#x7531;&#x7ee7;&#x7eed;&#x5f53;&#x524d;&#x8def;&#x7531;&#xff0c;&#x5219;&#x5c06;&#x63a7;&#x5236;&#x6743;&#x4f20;&#x9012;&#x7ed9;&#x540e;&#x7eed;&#x8def;&#x7531;&#x3002;\n\n&#x5f53;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x629b;&#x51fa;&#x9519;&#x8bef;&#x6216;&#x8fd4;&#x56de;&#x88ab;&#x62d2;&#x7edd;&#x7684; Promise &#x65f6;&#xff0c;next(err) &#x5c06;&#x88ab;&#x81ea;&#x52a8;&#x8c03;&#x7528;&#x3002;\n\n&#x7531;&#x4e8e; router &#x548c; app &#x5b9e;&#x73b0;&#x4e86;&#x4e2d;&#x95f4;&#x4ef6;&#x63a5;&#x53e3;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x50cf;&#x4f7f;&#x7528;&#x4efb;&#x4f55;&#x5176;&#x4ed6;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x4e00;&#x6837;&#x4f7f;&#x7528;&#x5b83;&#x4eec;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x53c2;&#x89c1; &#x4e2d;&#x95f4;&#x4ef6;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x793a;&#x4f8b;&#x3002;\n\n**&#x793a;&#x4f8b;**\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"435,475"}},{"content":"<pre data-lines=\"476,481\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">delete</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;DELETE request to homepage&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"476,481"}}],"payload":{"tag":"h2","lines":"433,434"}},{"content":"app.disable(name)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"484,487\"><code>&#x5c06;&#x5e03;&#x5c14;&#x8bbe;&#x7f6e; name &#x8bbe;&#x7f6e;&#x4e3a; false&#xff0c;&#x5176;&#x4e2d; name &#x662f; &#x5e94;&#x7528;&#x8bbe;&#x7f6e;&#x8868; &#x7684;&#x5c5e;&#x6027;&#x4e4b;&#x4e00;&#x3002;&#x4e3a;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#x8c03;&#x7528; app.set(&apos;foo&apos;, false) &#x4e0e;&#x8c03;&#x7528; app.disable(&apos;foo&apos;) &#x76f8;&#x540c;&#x3002;\n\n&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"484,487"}},{"content":"<pre data-lines=\"488,493\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">disable</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; false</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"488,493"}}],"payload":{"tag":"h2","lines":"482,483"}},{"content":"app.disabled(name)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"496,497\"><code>&#x5982;&#x679c;&#x7981;&#x7528;&#x5e03;&#x5c14;&#x8bbe;&#x7f6e; name (false)&#xff0c;&#x5219;&#x8fd4;&#x56de; true&#xff0c;&#x5176;&#x4e2d; name &#x662f; &#x5e94;&#x7528;&#x8bbe;&#x7f6e;&#x8868; &#x7684;&#x5c5e;&#x6027;&#x4e4b;&#x4e00;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"496,497"}},{"content":"<pre data-lines=\"498,506\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">disabled</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; true</span>\n\napp.<span class=\"hljs-title function_\">enable</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\napp.<span class=\"hljs-title function_\">disabled</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; false</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"498,506"}}],"payload":{"tag":"h2","lines":"494,495"}},{"content":"app.enable(name)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"509,511\"><code>&#x5c06;&#x5e03;&#x5c14;&#x8bbe;&#x7f6e; name &#x8bbe;&#x7f6e;&#x4e3a; true&#xff0c;&#x5176;&#x4e2d; name &#x662f; &#x5e94;&#x7528;&#x8bbe;&#x7f6e;&#x8868; &#x7684;&#x5c5e;&#x6027;&#x4e4b;&#x4e00;&#x3002;\n&#x4e3a;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#x8c03;&#x7528; app.set(&apos;foo&apos;, true) &#x4e0e;&#x8c03;&#x7528; app.enable(&apos;foo&apos;) &#x76f8;&#x540c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"509,511"}},{"content":"<pre data-lines=\"512,517\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">enable</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"512,517"}}],"payload":{"tag":"h2","lines":"507,508"}},{"content":"app.engine(ext, callback)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"520,525\"><code>&#x5c06;&#x7ed9;&#x5b9a;&#x7684;&#x6a21;&#x677f;&#x5f15;&#x64ce; callback &#x6ce8;&#x518c;&#x4e3a; ext&#x3002;\n\n&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;Express &#x4f1a;&#x6839;&#x636e;&#x6587;&#x4ef6;&#x6269;&#x5c55;&#x540d; require() &#x5f15;&#x64ce;&#x3002;\n&#x4f8b;&#x5982;&#xff0c;&#x5982;&#x679c;&#x60a8;&#x5c1d;&#x8bd5;&#x6e32;&#x67d3; &quot;foo.pug&quot; &#x6587;&#x4ef6;&#xff0c;Express &#x4f1a;&#x5728;&#x5185;&#x90e8;&#x8c03;&#x7528;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff0c;\n&#x5e76;&#x5728;&#x540e;&#x7eed;&#x8c03;&#x7528;&#x4e2d;&#x7f13;&#x5b58; require() &#x4ee5;&#x63d0;&#x9ad8;&#x6027;&#x80fd;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"520,525"}},{"content":"<pre data-lines=\"526,529\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">engine</span>(<span class=\"hljs-string\">&apos;pug&apos;</span>, <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;pug&apos;</span>).<span class=\"hljs-property\">__express</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"526,529"}},{"content":"<pre data-lines=\"530,533\"><code>&#x5bf9;&#x4e8e;&#x4e0d;&#x63d0;&#x4f9b;&#x5f00;&#x7bb1;&#x5373;&#x7528;&#x7684; .__express &#x7684;&#x5f15;&#x64ce;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x5e0c;&#x671b; &quot;map&quot; &#x4e3a;&#x6a21;&#x677f;&#x5f15;&#x64ce;&#x63d0;&#x4f9b;&#x4e0d;&#x540c;&#x7684;&#x6269;&#x5c55;&#xff0c;&#x8bf7;&#x4f7f;&#x7528;&#x6b64;&#x65b9;&#x6cd5;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x8981;&#x5c06; EJS &#x6a21;&#x677f;&#x5f15;&#x64ce;&#x6620;&#x5c04;&#x5230; &quot;.html&quot; &#x6587;&#x4ef6;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"530,533"}},{"content":"<pre data-lines=\"534,537\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">engine</span>(<span class=\"hljs-string\">&apos;html&apos;</span>, <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;ejs&apos;</span>).<span class=\"hljs-property\">renderFile</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"534,537"}},{"content":"<pre data-lines=\"538,542\"><code>&#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;EJS &#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e2a; .renderFile() &#x65b9;&#x6cd5;&#xff0c;&#x5176;&#x7b7e;&#x540d;&#x4e0e; Express &#x671f;&#x671b;&#x7684;&#x76f8;&#x540c;&#xff1a;(path, options, callback)&#xff0c;\n&#x4f46;&#x8bf7;&#x6ce8;&#x610f;&#xff0c;&#x5b83;&#x5728;&#x5185;&#x90e8;&#x5c06;&#x6b64;&#x65b9;&#x6cd5;&#x522b;&#x540d;&#x4e3a; ejs.__express&#xff0c;&#x56e0;&#x6b64;&#x5982;&#x679c;&#x60a8;&#x4f7f;&#x7528; &quot;.ejs&quot; &#x6269;&#x5c55;&#xff0c;&#x5219;&#x65e0;&#x9700;&#x6267;&#x884c;&#x4efb;&#x4f55;&#x64cd;&#x4f5c;&#x3002;\n\n&#x4e00;&#x4e9b;&#x6a21;&#x677f;&#x5f15;&#x64ce;&#x4e0d;&#x9075;&#x5faa;&#x8fd9;&#x4e2a;&#x7ea6;&#x5b9a;&#x3002;consolidate.js &#x5e93;&#x6620;&#x5c04; Node &#x6a21;&#x677f;&#x5f15;&#x64ce;&#x4ee5;&#x9075;&#x5faa;&#x6b64;&#x7ea6;&#x5b9a;&#xff0c;&#x56e0;&#x6b64;&#x5b83;&#x4eec;&#x53ef;&#x4ee5;&#x4e0e; Express &#x65e0;&#x7f1d;&#x534f;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"538,542"}},{"content":"<pre data-lines=\"543,548\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> engines = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;consolidate&apos;</span>)\napp.<span class=\"hljs-title function_\">engine</span>(<span class=\"hljs-string\">&apos;haml&apos;</span>, engines.<span class=\"hljs-property\">haml</span>)\napp.<span class=\"hljs-title function_\">engine</span>(<span class=\"hljs-string\">&apos;html&apos;</span>, engines.<span class=\"hljs-property\">hogan</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"543,548"}}],"payload":{"tag":"h2","lines":"518,519"}},{"content":"app.get(name)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"551,552\"><code>&#x8fd4;&#x56de; name &#x5e94;&#x7528;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#xff0c;&#x5176;&#x4e2d; name &#x662f; &#x5e94;&#x7528;&#x8bbe;&#x7f6e;&#x8868; &#x4e2d;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x4e4b;&#x4e00;&#x3002;&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"551,552"}},{"content":"<pre data-lines=\"553,561\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;title&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; undefined</span>\n\napp.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;title&apos;</span>, <span class=\"hljs-string\">&apos;My Site&apos;</span>)\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;title&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;My Site&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"553,561"}}],"payload":{"tag":"h2","lines":"549,550"}},{"content":"app.get(path, callback [, callback ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"564,565\"><code>&#x4f7f;&#x7528;&#x6307;&#x5b9a;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5c06; HTTP GET &#x8bf7;&#x6c42;&#x8def;&#x7531;&#x5230;&#x6307;&#x5b9a;&#x8def;&#x5f84;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,565"}},{"content":"<pre data-lines=\"566,571\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;GET request to homepage&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"566,571"}}],"payload":{"tag":"h2","lines":"562,563"}},{"content":"app.listen(path, [callback])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"574,575\"><code>&#x542f;&#x52a8;&#x4e00;&#x4e2a; UNIX &#x5957;&#x63a5;&#x5b57;&#x5e76;&#x76d1;&#x542c;&#x7ed9;&#x5b9a;&#x8def;&#x5f84;&#x4e0a;&#x7684;&#x8fde;&#x63a5;&#x3002;&#x6b64;&#x65b9;&#x6cd5;&#x4e0e; Node &#x7684; http.Server.listen() &#x76f8;&#x540c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"574,575"}},{"content":"<pre data-lines=\"576,581\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-string\">&apos;/tmp/sock&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"576,581"}}],"payload":{"tag":"h2","lines":"572,573"}},{"content":"app.listen([port[, host[, backlog]]][, callback])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"584,587\"><code>&#x7ed1;&#x5b9a;&#x5e76;&#x76d1;&#x542c;&#x6307;&#x5b9a;&#x4e3b;&#x673a;&#x548c;&#x7aef;&#x53e3;&#x4e0a;&#x7684;&#x8fde;&#x63a5;&#x3002;&#x6b64;&#x65b9;&#x6cd5;&#x4e0e; Node &#x7684; http.Server.listen() &#x76f8;&#x540c;&#x3002;\n\n&#x5982;&#x679c;&#x7aef;&#x53e3;&#x88ab;&#x7701;&#x7565;&#x6216;&#x4e3a; 0&#xff0c;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x5c06;&#x5206;&#x914d;&#x4e00;&#x4e2a;&#x4efb;&#x610f;&#x672a;&#x4f7f;&#x7528;&#x7684;&#x7aef;&#x53e3;&#xff0c;&#x8fd9;&#x5bf9;&#x4e8e;&#x81ea;&#x52a8;&#x5316;&#x4efb;&#x52a1;&#xff08;&#x6d4b;&#x8bd5;&#x7b49;&#xff09;&#x7b49;&#x60c5;&#x51b5;&#x5f88;&#x6709;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"584,587"}},{"content":"<pre data-lines=\"588,593\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"588,593"}},{"content":"<pre data-lines=\"594,595\"><code>express() &#x8fd4;&#x56de;&#x7684; app &#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x4e2a; JavaScript Function&#xff0c;&#x65e8;&#x5728;&#x4f5c;&#x4e3a;&#x56de;&#x8c03;&#x4f20;&#x9012;&#x7ed9; Node &#x7684; HTTP &#x670d;&#x52a1;&#x5668;&#x6765;&#x5904;&#x7406;&#x8bf7;&#x6c42;&#x3002;&#x8fd9;&#x4f7f;&#x5f97;&#x4e3a;&#x200b;&#x200b;&#x60a8;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684; HTTP &#x548c; HTTPS &#x7248;&#x672c;&#x63d0;&#x4f9b;&#x76f8;&#x540c;&#x7684;&#x4ee3;&#x7801;&#x5e93;&#x53d8;&#x5f97;&#x5f88;&#x5bb9;&#x6613;&#xff0c;&#x56e0;&#x4e3a;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e0d;&#x4f1a;&#x4ece;&#x8fd9;&#x4e9b;&#x7248;&#x672c;&#x7ee7;&#x627f;&#xff08;&#x5b83;&#x53ea;&#x662f;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#xff09;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"594,595"}},{"content":"<pre data-lines=\"596,605\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> https = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;https&apos;</span>)\n<span class=\"hljs-keyword\">const</span> http = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;http&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n\nhttp.<span class=\"hljs-title function_\">createServer</span>(app).<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">80</span>)\nhttps.<span class=\"hljs-title function_\">createServer</span>(options, app).<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">443</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"596,605"}},{"content":"<pre data-lines=\"606,607\"><code>app.listen() &#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; http.Server &#x5bf9;&#x8c61;&#xff0c;&#x5e76;&#x4e14;&#xff08;&#x5bf9;&#x4e8e; HTTP&#xff09;&#x662f;&#x4ee5;&#x4e0b;&#x7684;&#x4fbf;&#x6377;&#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"606,607"}},{"content":"<pre data-lines=\"608,614\"><code class=\"language-js\">app.<span class=\"hljs-property\">listen</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> server = http.<span class=\"hljs-title function_\">createServer</span>(<span class=\"hljs-variable language_\">this</span>)\n  <span class=\"hljs-keyword\">return</span> server.<span class=\"hljs-property\">listen</span>.<span class=\"hljs-title function_\">apply</span>(server, <span class=\"hljs-variable language_\">arguments</span>)\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"608,614"}},{"content":"<pre data-lines=\"615,616\"><code>&#x6ce8;&#x610f;&#xff1a;Node &#x7684; http.Server.listen() &#x65b9;&#x6cd5;&#x7684;&#x6240;&#x6709;&#x5f62;&#x5f0f;&#x5176;&#x5b9e;&#x90fd;&#x662f;&#x652f;&#x6301;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"615,616"}}],"payload":{"tag":"h2","lines":"582,583"}},{"content":"app.METHOD(path, callback [, callback ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"620,621\"><code>&#x8def;&#x7531; HTTP &#x8bf7;&#x6c42;&#xff0c;&#x5176;&#x4e2d; METHOD &#x662f;&#x8bf7;&#x6c42;&#x7684; HTTP &#x65b9;&#x6cd5;&#xff0c;&#x5982; GET&#x3001;PUT&#x3001;POST &#x7b49;&#xff0c;&#x5c0f;&#x5199;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"620,621"}}],"payload":{"tag":"h2","lines":"618,619"}},{"content":"&#x8def;&#x7531;&#x65b9;&#x6cd5;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"625,664\"><code>Express &#x652f;&#x6301;&#x4ee5;&#x4e0b;&#x4e0e; HTTP &#x540c;&#x540d;&#x65b9;&#x6cd5;&#x5bf9;&#x5e94;&#x7684;&#x8def;&#x7531;&#x65b9;&#x6cd5;&#xff1a;\n\n- checkout\n- copy\n- delete\n- get\n- head\n- lock\n- merge\n- mkactivity\n\n- mkcol\n- move\n- m-search\n- notify\n- options\n- patch\n- post\n\n- purge\n- put\n- report\n- search\n- subscribe\n- trace\n- unlock\n- unsubscribe\n\nAPI &#x6587;&#x6863;&#x4ec5;&#x9488;&#x5bf9;&#x6700;&#x6d41;&#x884c;&#x7684; HTTP &#x65b9;&#x6cd5; app.get()&#x3001;app.post()&#x3001;app.put() &#x548c; app.delete() &#x6709;&#x660e;&#x786e;&#x7684;&#x6761;&#x76ee;&#x3002;\n&#x4f46;&#x662f;&#xff0c;&#x4e0a;&#x9762;&#x5217;&#x51fa;&#x7684;&#x5176;&#x4ed6;&#x65b9;&#x6cd5;&#x7684;&#x5de5;&#x4f5c;&#x65b9;&#x5f0f;&#x5b8c;&#x5168;&#x76f8;&#x540c;&#x3002;\n\n&#x8981;&#x8def;&#x7531;&#x8f6c;&#x6362;&#x4e3a;&#x65e0;&#x6548; JavaScript &#x53d8;&#x91cf;&#x540d;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x8bf7;&#x4f7f;&#x7528;&#x65b9;&#x62ec;&#x53f7;&#x8868;&#x793a;&#x6cd5;&#x3002;\n&#x4f8b;&#x5982;&#xff0c;app[&apos;m-search&apos;](&apos;/&apos;, function ...&#x3002;\n\n&#x5982;&#x679c; app.get() &#x4e4b;&#x524d;&#x7684;&#x8def;&#x5f84;&#x6ca1;&#x6709;&#x8c03;&#x7528; app.head()&#xff0c;&#x5219;&#x9664;&#x4e86; GET &#x65b9;&#x6cd5;&#x4e4b;&#x5916;&#xff0c;&#x8fd8;&#x4f1a;&#x4e3a; HTTP HEAD &#x65b9;&#x6cd5;&#x81ea;&#x52a8;&#x8c03;&#x7528; app.get() &#x51fd;&#x6570;&#x3002;\n\n&#x65b9;&#x6cd5; app.all() &#x4e0d;&#x662f;&#x4ece;&#x4efb;&#x4f55; HTTP &#x65b9;&#x6cd5;&#x6d3e;&#x751f;&#x7684;&#xff0c;&#x800c;&#x662f;&#x5728;&#x6307;&#x5b9a;&#x8def;&#x5f84;&#x4e3a;&#x6240;&#x6709; HTTP &#x8bf7;&#x6c42;&#x65b9;&#x6cd5;&#x52a0;&#x8f7d;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; app.all&#x3002;\n\n&#x6709;&#x5173;&#x8def;&#x7531;&#x7684;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; &#x8def;&#x7531;&#x6307;&#x5357;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"625,664"}}],"payload":{"tag":"h2","lines":"623,624"}},{"content":"app.param(name, callback)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"668,677\"><code>&#x7ed9;&#x8def;&#x7531;&#x53c2;&#x6570;&#x6dfb;&#x52a0;&#x56de;&#x8c03;&#x89e6;&#x53d1;&#x5668;&#xff0c;&#x5176;&#x4e2d;name&#x4e3a;&#x53c2;&#x6570;&#x540d;&#x79f0;&#x6216;&#x53c2;&#x6570;&#x6570;&#x7ec4;&#xff0c;callback&#x4e3a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x4f9d;&#x6b21;&#x662f;&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;&#x3001;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;&#x3001;&#x4e0b;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x3001;&#x53c2;&#x6570;&#x7684;&#x503c;&#x548c;&#x53c2;&#x6570;&#x7684;&#x540d;&#x79f0;&#x3002;\n\n&#x5982;&#x679c; name &#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x5219;&#x4e3a;&#x5176;&#x4e2d;&#x58f0;&#x660e;&#x7684;&#x6bcf;&#x4e2a;&#x53c2;&#x6570;&#x6ce8;&#x518c; callback &#x89e6;&#x53d1;&#x5668;&#xff0c;&#x6309;&#x7167;&#x5b83;&#x4eec;&#x7684;&#x58f0;&#x660e;&#x987a;&#x5e8f;&#x3002;\n&#x6b64;&#x5916;&#xff0c;&#x5bf9;&#x4e8e;&#x9664;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x4e4b;&#x5916;&#x7684;&#x6bcf;&#x4e2a;&#x58f0;&#x660e;&#x7684;&#x53c2;&#x6570;&#xff0c;&#x5728;&#x56de;&#x8c03;&#x4e2d;&#x8c03;&#x7528; next &#x5c06;&#x4e3a;&#x4e0b;&#x4e00;&#x4e2a;&#x58f0;&#x660e;&#x7684;&#x53c2;&#x6570;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x3002;\n&#x5bf9;&#x4e8e;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5bf9; next &#x7684;&#x8c03;&#x7528;&#x5c06;&#x8c03;&#x7528;&#x5f53;&#x524d;&#x6b63;&#x5728;&#x5904;&#x7406;&#x7684;&#x8def;&#x7531;&#x7684;&#x4e0b;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x5c31;&#x50cf; name &#x53ea;&#x662f;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#x4e00;&#x6837;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x5f53; :user &#x51fa;&#x73b0;&#x5728;&#x8def;&#x7531;&#x8def;&#x5f84;&#x4e2d;&#x65f6;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x6620;&#x5c04;&#x7528;&#x6237;&#x52a0;&#x8f7d;&#x903b;&#x8f91;&#x4ee5;&#x81ea;&#x52a8;&#x5c06; req.user &#x63d0;&#x4f9b;&#x7ed9;&#x8def;&#x7531;&#xff0c;\n&#x6216;&#x5bf9;&#x53c2;&#x6570;&#x8f93;&#x5165;&#x6267;&#x884c;&#x9a8c;&#x8bc1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"668,677"}},{"content":"<pre data-lines=\"678,693\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;user&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, id</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// try to get the user details from the User model and attach it to the request object</span>\n  <span class=\"hljs-title class_\">User</span>.<span class=\"hljs-title function_\">find</span>(id, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, user</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (err) {\n      <span class=\"hljs-title function_\">next</span>(err)\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (user) {\n      req.<span class=\"hljs-property\">user</span> = user\n      <span class=\"hljs-title function_\">next</span>()\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&apos;failed to load user&apos;</span>))\n    }\n  })\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"678,693"}},{"content":"<pre data-lines=\"694,699\"><code>&#x53c2;&#x6570;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5728;&#x5b9a;&#x4e49;&#x5b83;&#x4eec;&#x7684;&#x8def;&#x7531;&#x4e0a;&#x662f;&#x672c;&#x5730;&#x7684;&#x3002;&#x5b83;&#x4eec;&#x4e0d;&#x4f1a;&#x88ab;&#x5b89;&#x88c5;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x6216;&#x8def;&#x7531;&#x7ee7;&#x627f;&#x3002;\n&#x56e0;&#x6b64;&#xff0c;&#x5728; app &#x4e0a;&#x5b9a;&#x4e49;&#x7684;&#x53c2;&#x6570;&#x56de;&#x8c03;&#x5c06;&#x4ec5;&#x7531;&#x5728; app &#x8def;&#x7531;&#x4e0a;&#x5b9a;&#x4e49;&#x7684;&#x8def;&#x7531;&#x53c2;&#x6570;&#x89e6;&#x53d1;&#x3002;\n\n&#x6240;&#x6709;&#x53c2;&#x6570;&#x56de;&#x8c03;&#x5c06;&#x5728;&#x53c2;&#x6570;&#x51fa;&#x73b0;&#x7684;&#x4efb;&#x4f55;&#x8def;&#x7531;&#x7684;&#x4efb;&#x4f55;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e4b;&#x524d;&#x8c03;&#x7528;&#xff0c;&#x5e76;&#x4e14;&#x5b83;&#x4eec;&#x5728;&#x8bf7;&#x6c42;-&#x54cd;&#x5e94;&#x5468;&#x671f;&#x4e2d;&#x4ec5;&#x88ab;&#x8c03;&#x7528;&#x4e00;&#x6b21;&#xff0c;\n&#x5373;&#x4f7f;&#x53c2;&#x6570;&#x5728;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x4e2d;&#x5339;&#x914d;&#xff0c;&#x5982;&#x4e0b;&#x4f8b;&#x6240;&#x793a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"694,699"}},{"content":"<pre data-lines=\"700,716\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, id</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;CALLED ONLY ONCE&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;although this matches&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;and this matches too&apos;</span>)\n  res.<span class=\"hljs-title function_\">end</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"700,716"}},{"content":"<pre data-lines=\"717,718\"><code>&#x5728; GET /user/42 &#x4e0a;&#xff0c;&#x6253;&#x5370;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"717,718"}},{"content":"<pre data-lines=\"719,724\"><code data-lines=\"719,724\">CALLED ONLY ONCE\nalthough <span class=\"hljs-keyword\">this</span> matches\nand <span class=\"hljs-keyword\">this</span> matches too\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"719,724"}},{"content":"<pre data-lines=\"725,741\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">param</span>([<span class=\"hljs-string\">&apos;id&apos;</span>, <span class=\"hljs-string\">&apos;page&apos;</span>], <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, value</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;CALLED ONLY ONCE with&apos;</span>, value)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id/:page&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;although this matches&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id/:page&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;and this matches too&apos;</span>)\n  res.<span class=\"hljs-title function_\">end</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"725,741"}},{"content":"<pre data-lines=\"742,743\"><code>&#x5728; GET /user/42/3 &#x4e0a;&#xff0c;&#x6253;&#x5370;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"742,743"}},{"content":"<pre data-lines=\"744,750\"><code data-lines=\"744,750\"><span class=\"hljs-keyword\">CALLED</span> <span class=\"hljs-keyword\">ONLY</span> ONCE <span class=\"hljs-keyword\">with</span> <span class=\"hljs-number\">42</span>\n<span class=\"hljs-keyword\">CALLED</span> <span class=\"hljs-keyword\">ONLY</span> ONCE <span class=\"hljs-keyword\">with</span> <span class=\"hljs-number\">3</span>\nalthough this <span class=\"hljs-keyword\">matches</span>\n<span class=\"hljs-keyword\">and</span> this <span class=\"hljs-keyword\">matches</span> too\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"744,750"}}],"payload":{"tag":"h2","lines":"666,667"}},{"content":"app.path()&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"754,755\"><code>&#x8fd4;&#x56de;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684;&#x89c4;&#x8303;&#x8def;&#x5f84;&#xff0c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"754,755"}},{"content":"<pre data-lines=\"756,768\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n<span class=\"hljs-keyword\">const</span> blog = <span class=\"hljs-title function_\">express</span>()\n<span class=\"hljs-keyword\">const</span> blogAdmin = <span class=\"hljs-title function_\">express</span>()\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/blog&apos;</span>, blog)\nblog.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/admin&apos;</span>, blogAdmin)\n\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(app.<span class=\"hljs-title function_\">path</span>()) <span class=\"hljs-comment\">// &apos;&apos;</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(blog.<span class=\"hljs-title function_\">path</span>()) <span class=\"hljs-comment\">// &apos;/blog&apos;</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(blogAdmin.<span class=\"hljs-title function_\">path</span>()) <span class=\"hljs-comment\">// &apos;/blog/admin&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"756,768"}},{"content":"<pre data-lines=\"769,770\"><code>&#x5728;&#x6302;&#x8f7d;&#x5e94;&#x7528;&#x7684;&#x590d;&#x6742;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x8fd9;&#x79cd;&#x65b9;&#x6cd5;&#x7684;&#x884c;&#x4e3a;&#x4f1a;&#x53d8;&#x5f97;&#x975e;&#x5e38;&#x590d;&#x6742;&#xff1a;&#x901a;&#x5e38;&#x6700;&#x597d;&#x4f7f;&#x7528; req.baseUrl &#x6765;&#x83b7;&#x53d6;&#x5e94;&#x7528;&#x7684;&#x89c4;&#x8303;&#x8def;&#x5f84;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"769,770"}}],"payload":{"tag":"h2","lines":"752,753"}},{"content":"app.post(path, callback [, callback ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"773,774\"><code>&#x4f7f;&#x7528;&#x6307;&#x5b9a;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5c06; HTTP POST &#x8bf7;&#x6c42;&#x8def;&#x7531;&#x5230;&#x6307;&#x5b9a;&#x8def;&#x5f84;&#x3002;&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; &#x8def;&#x7531;&#x6307;&#x5357;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"773,774"}},{"content":"<pre data-lines=\"775,780\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;POST request to homepage&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"775,780"}}],"payload":{"tag":"h2","lines":"771,772"}},{"content":"app.put(path, callback [, callback ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"783,784\"><code>&#x4f7f;&#x7528;&#x6307;&#x5b9a;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5c06; HTTP PUT &#x8bf7;&#x6c42;&#x8def;&#x7531;&#x5230;&#x6307;&#x5b9a;&#x8def;&#x5f84;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"783,784"}},{"content":"<pre data-lines=\"785,790\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">put</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;PUT request to homepage&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"785,790"}}],"payload":{"tag":"h2","lines":"781,782"}},{"content":"app.render(view, [locals], callback)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"793,800\"><code>&#x901a;&#x8fc7; callback &#x51fd;&#x6570;&#x8fd4;&#x56de;&#x89c6;&#x56fe;&#x7684;&#x5448;&#x73b0; HTML&#x3002;&#x5b83;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x53ef;&#x9009;&#x53c2;&#x6570;&#xff0c;&#x8be5;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x5305;&#x542b;&#x89c6;&#x56fe;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x7684;&#x5bf9;&#x8c61;&#x3002;\n&#x5b83;&#x548c; res.render() &#x4e00;&#x6837;&#xff0c;&#x53ea;&#x662f;&#x5b83;&#x4e0d;&#x80fd;&#x81ea;&#x5df1;&#x5c06;&#x6e32;&#x67d3;&#x89c6;&#x56fe;&#x53d1;&#x9001;&#x7ed9;&#x5ba2;&#x6237;&#x7aef;&#x3002;\n\n&#x5c06; app.render() &#x89c6;&#x4e3a;&#x751f;&#x6210;&#x6e32;&#x67d3;&#x89c6;&#x56fe;&#x5b57;&#x7b26;&#x4e32;&#x7684;&#x5b9e;&#x7528;&#x51fd;&#x6570;&#x3002;res.render() &#x5728;&#x5185;&#x90e8;&#x4f7f;&#x7528; app.render() &#x6765;&#x6e32;&#x67d3;&#x89c6;&#x56fe;&#x3002;\n\n&#x5c40;&#x90e8;&#x53d8;&#x91cf; cache &#x4fdd;&#x7559;&#x7528;&#x4e8e;&#x542f;&#x7528;&#x89c6;&#x56fe;&#x7f13;&#x5b58;&#x3002;&#x8bbe;&#x7f6e;&#x4e3a;true&#xff0c;&#x5982;&#x679c;&#x4f60;&#x60f3;&#x5728;&#x5f00;&#x53d1;&#x8fc7;&#x7a0b;&#x4e2d;&#x7f13;&#x5b58;&#x89c6;&#x56fe;&#xff1b;\n&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x89c6;&#x56fe;&#x7f13;&#x5b58;&#x5728;&#x751f;&#x4ea7;&#x4e2d;&#x542f;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"793,800"}},{"content":"<pre data-lines=\"801,810\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-string\">&apos;email&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, html</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ...</span>\n})\n\napp.<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-string\">&apos;email&apos;</span>, { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;Tobi&apos;</span> }, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, html</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ...</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"801,810"}}],"payload":{"tag":"h2","lines":"791,792"}},{"content":"app.route(path)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"813,815\"><code>&#x8fd4;&#x56de;&#x5355;&#x4e2a;&#x8def;&#x7531;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x7136;&#x540e;&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x5b83;&#x6765;&#x5904;&#x7406;&#x5e26;&#x6709;&#x53ef;&#x9009;&#x4e2d;&#x95f4;&#x4ef6;&#x7684; HTTP &#x52a8;&#x8bcd;&#x3002;\n&#x4f7f;&#x7528; app.route() &#x6765;&#x907f;&#x514d;&#x91cd;&#x590d;&#x7684;&#x8def;&#x7531;&#x540d;&#x79f0;&#xff08;&#x4ece;&#x800c;&#x907f;&#x514d;&#x62fc;&#x5199;&#x9519;&#x8bef;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"813,815"}},{"content":"<pre data-lines=\"816,831\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n\napp.<span class=\"hljs-title function_\">route</span>(<span class=\"hljs-string\">&apos;/events&apos;</span>)\n  .<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n    <span class=\"hljs-comment\">// runs for all HTTP verbs first</span>\n    <span class=\"hljs-comment\">// think of it as route specific middleware!</span>\n  })\n  .<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n    res.<span class=\"hljs-title function_\">json</span>({})\n  })\n  .<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n    <span class=\"hljs-comment\">// maybe add a new event...</span>\n  })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"816,831"}}],"payload":{"tag":"h2","lines":"811,812"}},{"content":"app.set(name, value)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"834,841\"><code>&#x5c06;&#x8bbe;&#x7f6e; name &#x5206;&#x914d;&#x7ed9; value&#x3002;&#x60a8;&#x53ef;&#x4ee5;&#x5b58;&#x50a8;&#x4efb;&#x4f55;&#x60a8;&#x60f3;&#x8981;&#x7684;&#x503c;&#xff0c;&#x4f46;&#x67d0;&#x4e9b;&#x540d;&#x79f0;&#x53ef;&#x7528;&#x4e8e;&#x914d;&#x7f6e;&#x670d;&#x52a1;&#x5668;&#x7684;&#x884c;&#x4e3a;&#x3002;\n&#x8fd9;&#x4e9b;&#x7279;&#x6b8a;&#x540d;&#x79f0;&#x5217;&#x5728; &#x5e94;&#x7528;&#x8bbe;&#x7f6e;&#x8868; &#x4e2d;&#x3002;\n\n&#x4e3a;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#x8c03;&#x7528; app.set(&apos;foo&apos;, true) &#x4e0e;&#x8c03;&#x7528; app.enable(&apos;foo&apos;) &#x76f8;&#x540c;&#x3002;\n&#x540c;&#x6837;&#xff0c;&#x4e3a;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#x8c03;&#x7528; app.set(&apos;foo&apos;, false) &#x4e0e;&#x8c03;&#x7528; app.disable(&apos;foo&apos;) &#x76f8;&#x540c;&#x3002;\n\n&#x4f7f;&#x7528; app.get() &#x68c0;&#x7d22;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"834,841"}},{"content":"<pre data-lines=\"842,846\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;title&apos;</span>, <span class=\"hljs-string\">&apos;My Site&apos;</span>)\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;title&apos;</span>) <span class=\"hljs-comment\">// &quot;My Site&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"842,846"}}],"payload":{"tag":"h2","lines":"832,833"}},{"content":"&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x8bbe;&#x7f6e;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"849,861\"><code data-lines=\"849,861\">&#x4e0b;&#x8868;&#x5217;&#x51fa;&#x4e86;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x8bbe;&#x7f6e;&#x3002;\n\n&#x8bf7;&#x6ce8;&#x610f;&#xff0c;&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5c06;&#xff1a;\n\n<span class=\"hljs-bullet\">- </span>&#x4e0d;&#x7ee7;&#x627f;&#x5177;&#x6709;&#x9ed8;&#x8ba4;&#x503c;&#x7684;&#x8bbe;&#x7f6e;&#x503c;&#x3002;&#x60a8;&#x5fc5;&#x987b;&#x5728;&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x8bbe;&#x7f6e;&#x8be5;&#x503c;&#x3002;\n\n<span class=\"hljs-bullet\">- </span>&#x7ee7;&#x627f;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#xff0c;&#x6ca1;&#x6709;&#x9ed8;&#x8ba4;&#x503c;&#xff1b; &#x8fd9;&#x4e9b;&#x5728;&#x4e0b;&#x8868;&#x4e2d;&#x660e;&#x786e;&#x6307;&#x51fa;&#x3002;\n\n&#x4f8b;&#x5916;&#xff1a;&#x5b50;&#x5e94;&#x7528;&#x5c06;&#x7ee7;&#x627f; trust proxy &#x7684;&#x503c;&#xff0c;&#x5373;&#x4f7f;&#x5b83;&#x6709;&#x4e00;&#x4e2a;&#x9ed8;&#x8ba4;&#x503c;&#xff08;&#x4e3a;&#x4e86;&#x5411;&#x540e;&#x517c;&#x5bb9;&#xff09;&#xff1b;\n&#x5b50;&#x5e94;&#x7528;&#x5728;&#x751f;&#x4ea7;&#x4e2d;&#x4e0d;&#x4f1a;&#x7ee7;&#x627f; view cache &#x7684;&#x503c;&#xff08;&#x5f53; NODE_ENV &#x4e3a; &quot;production&quot; &#x65f6;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"849,861"}},{"content":"<pre data-lines=\"862,868\"><code data-lines=\"862,868\">- <span class=\"hljs-keyword\">case</span> sensitive routing &#x5e03;&#x5c14;&#x503c;\n  - &#x542f;&#x7528;&#x533a;&#x5206;&#x5927;&#x5c0f;&#x5199;&#x3002;&#x542f;&#x7528;&#x540e;&#xff0c;<span class=\"hljs-string\">&quot;/Foo&quot;</span> &#x548c; <span class=\"hljs-string\">&quot;/foo&quot;</span> &#x662f;&#x4e0d;&#x540c;&#x7684;&#x8def;&#x7531;&#x3002;&#x7981;&#x7528;&#x65f6;&#xff0c;<span class=\"hljs-string\">&quot;/Foo&quot;</span> &#x548c; <span class=\"hljs-string\">&quot;/foo&quot;</span> &#x88ab;&#x89c6;&#x4e3a;&#x76f8;&#x540c;&#x3002;\n  - &#x6ce8;&#x610f;&#xff1a;&#x5b50;&#x5e94;&#x7528;&#x5c06;&#x7ee7;&#x627f;&#x6b64;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#x3002;\n  - N/A (<span class=\"hljs-literal\">undefined</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"862,868"}},{"content":"<pre data-lines=\"951,955\"><code data-lines=\"951,955\">\n<span class=\"hljs-code\">\t**trust proxy &#x8bbe;&#x7f6e;&#x9009;&#x9879;**\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"951,955"}},{"content":"<pre data-lines=\"961,964\"><code data-lines=\"961,964\">\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"961,964"}},{"content":"<pre data-lines=\"967,970\"><code data-lines=\"967,970\">\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"967,970"}},{"content":"<pre data-lines=\"995,1003\"><code data-lines=\"995,1003\">\n```js\napp.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-string\">&apos;trust proxy&apos;</span>, (ip) =&gt; {\n<span class=\"hljs-keyword\">if</span> (ip === <span class=\"hljs-string\">&apos;127.0.0.1&apos;</span> || ip === <span class=\"hljs-string\">&apos;123.123.123.123&apos;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">true</span> // <span class=\"hljs-keyword\">trusted</span> IPs\n<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">false</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"995,1003"}},{"content":"<pre data-lines=\"1004,1005\"><code>**etag &#x8bbe;&#x7f6e;&#x9009;&#x9879;&#x4e2d;&#x82f1;**\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1004,1005"}},{"content":"<pre data-lines=\"1006,1020\"><code data-lines=\"1006,1020\">&#x6ce8;&#x610f;&#xff1a;&#x8fd9;&#x4e9b;&#x8bbe;&#x7f6e;&#x4ec5;&#x9002;&#x7528;&#x4e8e;&#x52a8;&#x6001;&#x6587;&#x4ef6;&#xff0c;&#x4e0d;&#x9002;&#x7528;&#x4e8e;&#x9759;&#x6001;&#x6587;&#x4ef6;&#x3002;express.static &#x4e2d;&#x95f4;&#x4ef6;&#x4f1a;&#x5ffd;&#x7565;&#x8fd9;&#x4e9b;&#x8bbe;&#x7f6e;&#x3002;\n\nETag &#x529f;&#x80fd;&#x662f;&#x4f7f;&#x7528; etag &#x5305;&#x5b9e;&#x73b0;&#x7684;&#x3002;&#x6709;&#x5173;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605;&#x5176;&#x6587;&#x6863;&#x3002;\n\n<span class=\"hljs-bullet\">-</span> &#x5e03;&#x5c14;&#x503c;\n<span class=\"hljs-bullet\">  -</span> true &#x542f;&#x7528;&#x5f31; ETag&#x3002;&#x8fd9;&#x662f;&#x9ed8;&#x8ba4;&#x8bbe;&#x7f6e;&#x3002;false &#x5b8c;&#x5168;&#x7981;&#x7528; ETag&#x3002;\n\n<span class=\"hljs-bullet\">-</span> &#x5b57;&#x7b26;&#x4e32;\n<span class=\"hljs-bullet\">  -</span> &#x5982;&#x679c; &quot;strong&quot;&#xff0c;&#x542f;&#x7528;&#x5f3a; ETag&#x3002;&#x5982;&#x679c; &quot;weak&quot;&#xff0c;&#x542f;&#x7528;&#x5f31; ETag&#x3002;\n\n<span class=\"hljs-bullet\">-</span> &#x51fd;&#x6570;\n<span class=\"hljs-bullet\">  -</span> &#x81ea;&#x5b9a;&#x4e49; ETag &#x51fd;&#x6570;&#x5b9e;&#x73b0;&#x3002;&#x4ec5;&#x5f53;&#x60a8;&#x77e5;&#x9053;&#x81ea;&#x5df1;&#x5728;&#x505a;&#x4ec0;&#x4e48;&#x65f6;&#x624d;&#x4f7f;&#x7528;&#x5b83;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1006,1020"}},{"content":"<pre data-lines=\"1021,1026\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;etag&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">body, encoding</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">generateHash</span>(body, encoding) <span class=\"hljs-comment\">// consider the function is defined</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1021,1026"}}],"payload":{"tag":"h2","lines":"847,848"}},{"content":"app.use([path,] callback [, callback...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1031,1032\"><code>&#x5728;&#x6307;&#x5b9a;&#x8def;&#x5f84;&#x6302;&#x8f7d;&#x6307;&#x5b9a;&#x7684; &#x4e2d;&#x95f4;&#x4ef6; &#x51fd;&#x6570;&#x6216;&#x51fd;&#x6570;&#xff1a;&#x5f53;&#x8bf7;&#x6c42;&#x8def;&#x5f84;&#x7684;&#x57fa;&#x6570;&#x4e0e; path &#x5339;&#x914d;&#x65f6;&#x6267;&#x884c;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1031,1032"}},{"content":"&#x63cf;&#x8ff0;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1035,1040\"><code>&#x8def;&#x7531;&#x5c06;&#x5339;&#x914d;&#x7d27;&#x968f;&#x5176;&#x8def;&#x5f84;&#x7684;&#x4efb;&#x4f55;&#x8def;&#x5f84;&#xff0c;&#x5e76;&#x5e26;&#x6709; &quot;/&quot;&#x3002;\n&#x4f8b;&#x5982;&#xff1a;app.use(&apos;/apple&apos;, ...) &#x5c06;&#x5339;&#x914d; &quot;/apple&quot;&#x3001;&quot;/apple/images&quot;&#x3001;&quot;/apple/images/news&quot; &#x7b49;&#x3002;\n\n&#x7531;&#x4e8e; path &#x9ed8;&#x8ba4;&#x4e3a; &quot;/&quot;&#xff0c;&#x56e0;&#x6b64;&#x5bf9;&#x4e8e;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#xff0c;&#x90fd;&#x4f1a;&#x6267;&#x884c;&#x6ca1;&#x6709;&#x8def;&#x5f84;&#x6302;&#x8f7d;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;\n&#x4f8b;&#x5982;&#xff0c;&#x8fd9;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x5c06;&#x4e3a;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x7684;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#x6267;&#x884c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1035,1040"}},{"content":"<pre data-lines=\"1041,1047\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Time: %d&apos;</span>, <span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>())\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1041,1047"}},{"content":"<pre data-lines=\"1048,1057\"><code>&#x6ce8;&#x610f;\n\n- &#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5c06;&#xff1a;\n- &#x4e0d;&#x7ee7;&#x627f;&#x5177;&#x6709;&#x9ed8;&#x8ba4;&#x503c;&#x7684;&#x8bbe;&#x7f6e;&#x503c;&#x3002;&#x60a8;&#x5fc5;&#x987b;&#x5728;&#x5b50;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x8bbe;&#x7f6e;&#x8be5;&#x503c;&#x3002;\n- &#x7ee7;&#x627f;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#xff0c;&#x6ca1;&#x6709;&#x9ed8;&#x8ba4;&#x503c;&#x3002;\n\n&#x8be6;&#x89c1; &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x8bbe;&#x7f6e;&#x3002;\n\n&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x662f;&#x6309;&#x987a;&#x5e8f;&#x6267;&#x884c;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#x4e2d;&#x95f4;&#x4ef6;&#x5305;&#x542b;&#x7684;&#x987a;&#x5e8f;&#x5f88;&#x91cd;&#x8981;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1048,1057"}},{"content":"<pre data-lines=\"1058,1069\"><code class=\"language-js\"><span class=\"hljs-comment\">// this middleware will not allow the request to go beyond it</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Hello World&apos;</span>)\n})\n\n<span class=\"hljs-comment\">// requests will never reach this route</span>\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Welcome&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1058,1069"}}],"payload":{"tag":"h3","lines":"1033,1034"}}],"payload":{"tag":"h2","lines":"1027,1028"}},{"content":"&#x9519;&#x8bef;&#x5904;&#x7406;&#x4e2d;&#x95f4;&#x4ef6;","children":[{"content":"&#x8def;&#x5f84;&#x793a;&#x4f8b;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1088,1092\"><code>&#x4e0b;&#x8868;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e9b;&#x7528;&#x4e8e;&#x6302;&#x8f7d;&#x4e2d;&#x95f4;&#x4ef6;&#x7684;&#x6709;&#x6548; path &#x503c;&#x7684;&#x7b80;&#x5355;&#x793a;&#x4f8b;&#x3002;\n\n- &#x8def;&#x5f84;\n- &#x8fd9;&#x5c06;&#x5339;&#x914d;&#x4ee5; /abcd &#x5f00;&#x5934;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1088,1092"}},{"content":"<pre data-lines=\"1093,1098\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/abcd&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1093,1098"}},{"content":"<pre data-lines=\"1099,1101\"><code>- &#x8def;&#x5f84;&#x6a21;&#x5f0f;\n- &#x8fd9;&#x5c06;&#x5339;&#x914d;&#x4ee5; /abcd &#x548c; /abd &#x5f00;&#x5934;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1099,1101"}},{"content":"<pre data-lines=\"1102,1107\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/ab(c?)d&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1102,1107"}},{"content":"<pre data-lines=\"1108,1110\"><code>- &#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;\n- &#x8fd9;&#x5c06;&#x5339;&#x914d;&#x4ee5; /abc &#x548c; /xyz &#x5f00;&#x5934;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1108,1110"}},{"content":"<pre data-lines=\"1111,1116\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-regexp\">/\\/abc|\\/xyz/</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1111,1116"}},{"content":"<pre data-lines=\"1117,1119\"><code>- &#x6570;&#x7ec4;\n- &#x8fd9;&#x5c06;&#x5339;&#x914d;&#x4ee5; /abcd&#x3001;/xyza&#x3001;/lmn &#x548c; /pqr &#x5f00;&#x5934;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1117,1119"}},{"content":"<pre data-lines=\"1120,1125\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>([<span class=\"hljs-string\">&apos;/abcd&apos;</span>, <span class=\"hljs-string\">&apos;/xyza&apos;</span>, <span class=\"hljs-regexp\">/\\/lmn|\\/pqr/</span>], <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1120,1125"}}],"payload":{"tag":"h3","lines":"1086,1087"}}],"payload":{"tag":"h2","lines":"1070,1071"}},{"content":"&#x4e2d;&#x95f4;&#x4ef6;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x793a;&#x4f8b;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1128,1133\"><code>&#x4e0b;&#x8868;&#x63d0;&#x4f9b;&#x4e86;&#x53ef;&#x7528;&#x4f5c; app.use()&#x3001;app.METHOD() &#x548c; app.all() &#x7684; callback &#x53c2;&#x6570;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x7684;&#x4e00;&#x4e9b;&#x7b80;&#x5355;&#x793a;&#x4f8b;&#x3002;\n&#x5c3d;&#x7ba1;&#x8fd9;&#x4e9b;&#x793a;&#x4f8b;&#x9002;&#x7528;&#x4e8e; app.use()&#xff0c;&#x4f46;&#x5b83;&#x4eec;&#x4e5f;&#x9002;&#x7528;&#x4e8e; app.use()&#x3001;app.METHOD() &#x548c; app.all()&#x3002;\n\n- &#x5355;&#x4e00;&#x4e2d;&#x95f4;&#x4ef6;\n- &#x60a8;&#x53ef;&#x4ee5;&#x5728;&#x672c;&#x5730;&#x5b9a;&#x4e49;&#x548c;&#x6302;&#x8f7d;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1128,1133"}},{"content":"<pre data-lines=\"1134,1139\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1134,1139"}},{"content":"<pre data-lines=\"1140,1141\"><code>- &#x8def;&#x7531;&#x662f;&#x6709;&#x6548;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1140,1141"}},{"content":"<pre data-lines=\"1142,1149\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> router = express.<span class=\"hljs-title class_\">Router</span>()\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\napp.<span class=\"hljs-title function_\">use</span>(router)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1142,1149"}},{"content":"<pre data-lines=\"1150,1151\"><code>- Express &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x662f;&#x6709;&#x6548;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1150,1151"}},{"content":"<pre data-lines=\"1152,1159\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> subApp = <span class=\"hljs-title function_\">express</span>()\nsubApp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\napp.<span class=\"hljs-title function_\">use</span>(subApp)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1152,1159"}},{"content":"<pre data-lines=\"1160,1162\"><code>- &#x7cfb;&#x5217;&#x4e2d;&#x95f4;&#x4ef6;\n\t- &#x60a8;&#x53ef;&#x4ee5;&#x5728;&#x540c;&#x4e00;&#x6302;&#x8f7d;&#x8def;&#x5f84;&#x4e2d;&#x6307;&#x5b9a;&#x591a;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1160,1162"}},{"content":"<pre data-lines=\"1163,1176\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> r1 = express.<span class=\"hljs-title class_\">Router</span>()\nr1.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n\n<span class=\"hljs-keyword\">const</span> r2 = express.<span class=\"hljs-title class_\">Router</span>()\nr2.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n\napp.<span class=\"hljs-title function_\">use</span>(r1, r2)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1163,1176"}},{"content":"<pre data-lines=\"1177,1179\"><code>- &#x6570;&#x7ec4;\n\t- &#x4f7f;&#x7528;&#x6570;&#x7ec4;&#x5bf9;&#x4e2d;&#x95f4;&#x4ef6;&#x8fdb;&#x884c;&#x903b;&#x8f91;&#x5206;&#x7ec4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1177,1179"}},{"content":"<pre data-lines=\"1180,1193\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> r1 = express.<span class=\"hljs-title class_\">Router</span>()\nr1.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n\n<span class=\"hljs-keyword\">const</span> r2 = express.<span class=\"hljs-title class_\">Router</span>()\nr2.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-title function_\">next</span>()\n})\n\napp.<span class=\"hljs-title function_\">use</span>([r1, r2])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1180,1193"}},{"content":"<pre data-lines=\"1194,1196\"><code>- &#x7ec4;&#x5408;\n\t- &#x60a8;&#x53ef;&#x4ee5;&#x7ed3;&#x5408;&#x4e0a;&#x8ff0;&#x6240;&#x6709;&#x6302;&#x8f7d;&#x4e2d;&#x95f4;&#x4ef6;&#x7684;&#x65b9;&#x5f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1194,1196"}},{"content":"<pre data-lines=\"1197,1212\"><code class=\"language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">mw1</span> (<span class=\"hljs-params\">req, res, next</span>) { <span class=\"hljs-title function_\">next</span>() }\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">mw2</span> (<span class=\"hljs-params\">req, res, next</span>) { <span class=\"hljs-title function_\">next</span>() }\n\n<span class=\"hljs-keyword\">const</span> r1 = express.<span class=\"hljs-title class_\">Router</span>()\nr1.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> { <span class=\"hljs-title function_\">next</span>() })\n\n<span class=\"hljs-keyword\">const</span> r2 = express.<span class=\"hljs-title class_\">Router</span>()\nr2.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> { <span class=\"hljs-title function_\">next</span>() })\n\n<span class=\"hljs-keyword\">const</span> subApp = <span class=\"hljs-title function_\">express</span>()\nsubApp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> { <span class=\"hljs-title function_\">next</span>() })\n\napp.<span class=\"hljs-title function_\">use</span>(mw1, [mw2, r1, r2], subApp)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1197,1212"}},{"content":"<pre data-lines=\"1213,1216\"><code>&#x4ee5;&#x4e0b;&#x662f;&#x5728; Express &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x4f7f;&#x7528; express.static &#x4e2d;&#x95f4;&#x4ef6;&#x7684;&#x4e00;&#x4e9b;&#x793a;&#x4f8b;&#x3002;\n\n&#x4ece;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x76ee;&#x5f55;&#x4e2d;&#x7684; &quot;public&quot; &#x76ee;&#x5f55;&#x4e3a;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x63d0;&#x4f9b;&#x9759;&#x6001;&#x5185;&#x5bb9;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1213,1216"}},{"content":"<pre data-lines=\"1217,1221\"><code class=\"language-js\"><span class=\"hljs-comment\">// GET /style.css etc</span>\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1217,1221"}},{"content":"<pre data-lines=\"1222,1223\"><code>&#x4ec5;&#x5f53;&#x8bf7;&#x6c42;&#x8def;&#x5f84;&#x4ee5; &quot;/static&quot; &#x4e3a;&#x524d;&#x7f00;&#x65f6;&#xff0c;&#x5c06;&#x4e2d;&#x95f4;&#x4ef6;&#x5b89;&#x88c5;&#x5728; &quot;/static&quot; &#x4ee5;&#x63d0;&#x4f9b;&#x9759;&#x6001;&#x5185;&#x5bb9;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1222,1223"}},{"content":"<pre data-lines=\"1224,1228\"><code class=\"language-js\"><span class=\"hljs-comment\">// GET /static/style.css etc.</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/static&apos;</span>, express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1224,1228"}},{"content":"<pre data-lines=\"1229,1230\"><code>&#x901a;&#x8fc7;&#x5728;&#x9759;&#x6001;&#x4e2d;&#x95f4;&#x4ef6;&#x4e4b;&#x540e;&#x52a0;&#x8f7d;&#x8bb0;&#x5f55;&#x5668;&#x4e2d;&#x95f4;&#x4ef6;&#x6765;&#x7981;&#x7528;&#x9759;&#x6001;&#x5185;&#x5bb9;&#x8bf7;&#x6c42;&#x7684;&#x65e5;&#x5fd7;&#x8bb0;&#x5f55;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1229,1230"}},{"content":"<pre data-lines=\"1231,1235\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">logger</span>())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1231,1235"}},{"content":"<pre data-lines=\"1236,1237\"><code>&#x63d0;&#x4f9b;&#x6765;&#x81ea;&#x591a;&#x4e2a;&#x76ee;&#x5f55;&#x7684;&#x9759;&#x6001;&#x6587;&#x4ef6;&#xff0c;&#x4f46; &quot;./public&quot; &#x4f18;&#x5148;&#x4e8e;&#x5176;&#x4ed6;&#x76ee;&#x5f55;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1236,1237"}},{"content":"<pre data-lines=\"1238,1243\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;files&apos;</span>)))\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;uploads&apos;</span>)))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1238,1243"}},{"content":"<pre data-lines=\"1244,1270\"><code data-lines=\"1244,1270\">app<span class=\"hljs-selector-class\">.locals</span>\napp<span class=\"hljs-selector-class\">.mountpath</span>\napp<span class=\"hljs-selector-class\">.router</span>\napp<span class=\"hljs-selector-class\">.on</span>(<span class=\"hljs-string\">&apos;mount&apos;</span>, <span class=\"hljs-built_in\">callback</span>(parent))\napp<span class=\"hljs-selector-class\">.all</span>(<span class=\"hljs-selector-tag\">path</span>, callback <span class=\"hljs-selector-attr\">[, callback ...]</span>)\napp<span class=\"hljs-selector-class\">.delete</span>(<span class=\"hljs-selector-tag\">path</span>, callback <span class=\"hljs-selector-attr\">[, callback ...]</span>)\napp<span class=\"hljs-selector-class\">.disable</span>(name)\napp<span class=\"hljs-selector-class\">.disabled</span>(name)\napp<span class=\"hljs-selector-class\">.enable</span>(name)\napp<span class=\"hljs-selector-class\">.enabled</span>(name)\napp<span class=\"hljs-selector-class\">.engine</span>(ext, callback)\napp<span class=\"hljs-selector-class\">.get</span>(name)\napp<span class=\"hljs-selector-class\">.get</span>(<span class=\"hljs-selector-tag\">path</span>, callback <span class=\"hljs-selector-attr\">[, callback ...]</span>)\napp<span class=\"hljs-selector-class\">.listen</span>(<span class=\"hljs-selector-tag\">path</span>, <span class=\"hljs-selector-attr\">[callback]</span>)\napp<span class=\"hljs-selector-class\">.listen</span>(<span class=\"hljs-selector-attr\">[port[, host[, backlog]</span>]]<span class=\"hljs-selector-attr\">[, callback]</span>)\napp<span class=\"hljs-selector-class\">.METHOD</span>(<span class=\"hljs-selector-tag\">path</span>, callback <span class=\"hljs-selector-attr\">[, callback ...]</span>)\napp<span class=\"hljs-selector-class\">.param</span>(name, callback)\napp<span class=\"hljs-selector-class\">.path</span>()\napp<span class=\"hljs-selector-class\">.post</span>(<span class=\"hljs-selector-tag\">path</span>, callback <span class=\"hljs-selector-attr\">[, callback ...]</span>)\napp<span class=\"hljs-selector-class\">.put</span>(<span class=\"hljs-selector-tag\">path</span>, callback <span class=\"hljs-selector-attr\">[, callback ...]</span>)\napp<span class=\"hljs-selector-class\">.render</span>(view, <span class=\"hljs-selector-attr\">[locals]</span>, callback)\napp<span class=\"hljs-selector-class\">.route</span>(path)\napp<span class=\"hljs-selector-class\">.set</span>(name, value)\napp<span class=\"hljs-selector-class\">.use</span>(<span class=\"hljs-selector-attr\">[path,]</span> callback <span class=\"hljs-selector-attr\">[, callback...]</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1244,1270"}}],"payload":{"tag":"h2","lines":"1126,1127"}}],"payload":{"tag":"h1","lines":"199,200"}},{"content":"&#x8bf7;&#x6c42;&#x4e2d;&#x82f1;","children":[{"content":"req.body&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1328,1333\"><code>&#x5305;&#x542b;&#x5728;&#x8bf7;&#x6c42;&#x6b63;&#x6587;&#x4e2d;&#x63d0;&#x4ea4;&#x7684;&#x6570;&#x636e;&#x952e;&#x503c;&#x5bf9;&#x3002;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5b83;&#x662f; undefined&#xff0c;&#x5e76;&#x5728;&#x60a8;&#x4f7f;&#x7528; body-parser &#x548c; multer &#x7b49;&#x6b63;&#x6587;&#x89e3;&#x6790;&#x4e2d;&#x95f4;&#x4ef6;&#x65f6;&#x586b;&#x5145;&#x3002;\n\n&#x7531;&#x4e8e; req.body &#x7684;&#x5f62;&#x72b6;&#x57fa;&#x4e8e;&#x7528;&#x6237;&#x63a7;&#x5236;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x56e0;&#x6b64;&#x8be5;&#x5bf9;&#x8c61;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x5c5e;&#x6027;&#x548c;&#x503c;&#x90fd;&#x662f;&#x4e0d;&#x53ef;&#x4fe1;&#x7684;&#xff0c;&#x5e94;&#x8be5;&#x5728;&#x4fe1;&#x4efb;&#x4e4b;&#x524d;&#x8fdb;&#x884c;&#x9a8c;&#x8bc1;&#x3002;&#x4f8b;&#x5982;&#xff0c;req.body.foo.toString() &#x53ef;&#x80fd;&#x4ee5;&#x591a;&#x79cd;&#x65b9;&#x5f0f;&#x5931;&#x8d25;&#xff0c;&#x4f8b;&#x5982; foo &#x53ef;&#x80fd;&#x4e0d;&#x5b58;&#x5728;&#x6216;&#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;toString &#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x800c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x5176;&#x4ed6;&#x7528;&#x6237;&#x8f93;&#x5165;&#x3002;\n\n&#x4ee5;&#x4e0b;&#x793a;&#x4f8b;&#x663e;&#x793a;&#x5982;&#x4f55;&#x4f7f;&#x7528;&#x6b63;&#x6587;&#x89e3;&#x6790;&#x4e2d;&#x95f4;&#x4ef6;&#x586b;&#x5145; req.body&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1328,1333"}},{"content":"<pre data-lines=\"1334,1348\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)()\n<span class=\"hljs-keyword\">const</span> bodyParser = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;body-parser&apos;</span>)\n<span class=\"hljs-keyword\">const</span> multer = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;multer&apos;</span>) <span class=\"hljs-comment\">// v1.0.5</span>\n<span class=\"hljs-keyword\">const</span> upload = <span class=\"hljs-title function_\">multer</span>() <span class=\"hljs-comment\">// for parsing multipart/form-data</span>\n\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>()) <span class=\"hljs-comment\">// for parsing application/json</span>\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">urlencoded</span>({ <span class=\"hljs-attr\">extended</span>: <span class=\"hljs-literal\">true</span> })) <span class=\"hljs-comment\">// for parsing application/x-www-form-urlencoded</span>\n\napp.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">&apos;/profile&apos;</span>, upload.<span class=\"hljs-title function_\">array</span>(), <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(req.<span class=\"hljs-property\">body</span>)\n  res.<span class=\"hljs-title function_\">json</span>(req.<span class=\"hljs-property\">body</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1334,1348"}}],"payload":{"tag":"h2","lines":"1326,1327"}},{"content":"req.cookies&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1351,1352\"><code>&#x4f7f;&#x7528; cookie-parser &#x4e2d;&#x95f4;&#x4ef6;&#x65f6;&#xff0c;&#x8be5;&#x5c5e;&#x6027;&#x662f;&#x4e00;&#x4e2a;&#x5305;&#x542b;&#x8bf7;&#x6c42;&#x53d1;&#x9001;&#x7684; cookie &#x7684;&#x5bf9;&#x8c61;&#x3002;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x4e0d;&#x5305;&#x542b; cookie&#xff0c;&#x5219;&#x9ed8;&#x8ba4;&#x4e3a; {}&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1351,1352"}},{"content":"<pre data-lines=\"1353,1358\"><code class=\"language-js\"><span class=\"hljs-comment\">// Cookie: name=tj</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">cookies</span>.<span class=\"hljs-property\">name</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;tj&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1353,1358"}},{"content":"<pre data-lines=\"1359,1362\"><code>&#x5982;&#x679c; cookie &#x5df2;&#x7b7e;&#x540d;&#xff0c;&#x5219;&#x5fc5;&#x987b;&#x4f7f;&#x7528; req.signedCookies&#x3002;\n\n&#x6709;&#x5173;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#x3001;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; cookie-parser&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1359,1362"}}],"payload":{"tag":"h2","lines":"1349,1350"}},{"content":"req.fresh&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1365,1370\"><code>&#x5f53;&#x54cd;&#x5e94;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x7f13;&#x5b58;&#x4e2d;&#x4ecd;&#x7136;&#x662f; &quot;fresh&quot; &#x65f6;&#xff0c;&#x8fd4;&#x56de; true&#xff0c;&#x5426;&#x5219;&#x8fd4;&#x56de; false&#xff0c;&#x8868;&#x793a;&#x5ba2;&#x6237;&#x7aef;&#x7f13;&#x5b58;&#x73b0;&#x5728;&#x5df2;&#x7ecf;&#x8fc7;&#x65f6;&#xff0c;&#x5e94;&#x8be5;&#x53d1;&#x9001;&#x5b8c;&#x6574;&#x7684;&#x54cd;&#x5e94;&#x3002;\n\n&#x5f53;&#x5ba2;&#x6237;&#x7aef;&#x53d1;&#x9001; Cache-Control: no-cache &#x8bf7;&#x6c42;&#x5934;&#x6307;&#x793a;&#x7aef;&#x5230;&#x7aef;&#x7684;&#x91cd;&#x65b0;&#x52a0;&#x8f7d;&#x8bf7;&#x6c42;&#x65f6;&#xff0c;&#x8be5;&#x6a21;&#x5757;&#x5c06;&#x8fd4;&#x56de; false &#x4ee5;&#x4f7f;&#x5904;&#x7406;&#x8fd9;&#x4e9b;&#x8bf7;&#x6c42;&#x900f;&#x660e;&#x3002;\n\n&#x6709;&#x5173;&#x7f13;&#x5b58;&#x9a8c;&#x8bc1;&#x5982;&#x4f55;&#x5de5;&#x4f5c;&#x7684;&#x66f4;&#x591a;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; HTTP/1.1 &#x7f13;&#x5b58;&#x89c4;&#x8303;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1365,1370"}},{"content":"<pre data-lines=\"1371,1375\"><code class=\"language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">fresh</span>)\n<span class=\"hljs-comment\">// =&gt; true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1371,1375"}}],"payload":{"tag":"h2","lines":"1363,1364"}},{"content":"req.host&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1378,1383\"><code>&#x5305;&#x542b;&#x4ece; Host HTTP &#x6807;&#x5934;&#x6d3e;&#x751f;&#x7684;&#x4e3b;&#x673a;&#x3002;\n\n&#x5f53; trust proxy &#x8bbe;&#x7f6e; &#x4e0d;&#x8ba1;&#x7b97;&#x4e3a; false &#x65f6;&#xff0c;&#x6b64;&#x5c5e;&#x6027;&#x5c06;&#x6539;&#x4e3a;&#x4ece; X-Forwarded-Host &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x4e2d;&#x83b7;&#x53d6;&#x503c;&#x3002;&#x6b64;&#x6807;&#x5934;&#x53ef;&#x4ee5;&#x7531;&#x5ba2;&#x6237;&#x7aef;&#x6216;&#x4ee3;&#x7406;&#x8bbe;&#x7f6e;&#x3002;\n\n&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x4e2d;&#x6709;&#x591a;&#x4e2a; X-Forwarded-Host &#x6807;&#x5934;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x7b2c;&#x4e00;&#x4e2a;&#x6807;&#x5934;&#x7684;&#x503c;&#x3002;&#x8fd9;&#x5305;&#x62ec;&#x4e00;&#x4e2a;&#x5e26;&#x6709;&#x9017;&#x53f7;&#x5206;&#x9694;&#x503c;&#x7684;&#x6807;&#x5934;&#xff0c;&#x5176;&#x4e2d;&#x4f7f;&#x7528;&#x4e86;&#x7b2c;&#x4e00;&#x4e2a;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1378,1383"}},{"content":"<pre data-lines=\"1384,1393\"><code class=\"language-js\"><span class=\"hljs-comment\">// Host: &quot;example.com:3000&quot;</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">host</span>)\n<span class=\"hljs-comment\">// =&gt; &apos;example.com:3000&apos;</span>\n\n<span class=\"hljs-comment\">// Host: &quot;[::1]:3000&quot;</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">host</span>)\n<span class=\"hljs-comment\">// =&gt; &apos;[::1]:3000&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1384,1393"}}],"payload":{"tag":"h2","lines":"1376,1377"}},{"content":"req.hostname&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1396,1403\"><code>&#x5305;&#x542b;&#x4ece; Host HTTP &#x6807;&#x5934;&#x6d3e;&#x751f;&#x7684;&#x4e3b;&#x673a;&#x540d;&#x3002;\n\n&#x5f53; trust proxy &#x8bbe;&#x7f6e; &#x4e0d;&#x8ba1;&#x7b97;&#x4e3a; false &#x65f6;&#xff0c;&#x6b64;&#x5c5e;&#x6027;&#x5c06;&#x6539;&#x4e3a;&#x4ece; X-Forwarded-Host &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x4e2d;&#x83b7;&#x53d6;&#x503c;&#x3002;&#x6b64;&#x6807;&#x5934;&#x53ef;&#x4ee5;&#x7531;&#x5ba2;&#x6237;&#x7aef;&#x6216;&#x4ee3;&#x7406;&#x8bbe;&#x7f6e;&#x3002;\n\n&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x4e2d;&#x6709;&#x591a;&#x4e2a; X-Forwarded-Host &#x6807;&#x5934;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x7b2c;&#x4e00;&#x4e2a;&#x6807;&#x5934;&#x7684;&#x503c;&#x3002;&#x8fd9;&#x5305;&#x62ec;&#x4e00;&#x4e2a;&#x5e26;&#x6709;&#x9017;&#x53f7;&#x5206;&#x9694;&#x503c;&#x7684;&#x6807;&#x5934;&#xff0c;&#x5176;&#x4e2d;&#x4f7f;&#x7528;&#x4e86;&#x7b2c;&#x4e00;&#x4e2a;&#x503c;&#x3002;\n\n&#x5728; Express v4.17.0 &#x4e4b;&#x524d;&#xff0c;X-Forwarded-Host &#x4e0d;&#x80fd;&#x5305;&#x542b;&#x591a;&#x4e2a;&#x503c;&#x6216;&#x591a;&#x6b21;&#x51fa;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1396,1403"}},{"content":"<pre data-lines=\"1404,1409\"><code class=\"language-js\"><span class=\"hljs-comment\">// Host: &quot;example.com:3000&quot;</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">hostname</span>)\n<span class=\"hljs-comment\">// =&gt; &apos;example.com&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1404,1409"}}],"payload":{"tag":"h2","lines":"1394,1395"}},{"content":"req.ip&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1412,1415\"><code>&#x5305;&#x542b;&#x8bf7;&#x6c42;&#x7684;&#x8fdc;&#x7a0b; IP &#x5730;&#x5740;&#x3002;\n\n&#x5f53; trust proxy &#x8bbe;&#x7f6e; &#x4e0d;&#x8ba1;&#x7b97;&#x4e3a; false &#x65f6;&#xff0c;&#x6b64;&#x5c5e;&#x6027;&#x7684;&#x503c;&#x6d3e;&#x751f;&#x81ea; X-Forwarded-For &#x6807;&#x5934;&#x4e2d;&#x6700;&#x5de6;&#x4fa7;&#x7684;&#x6761;&#x76ee;&#x3002;&#x6b64;&#x6807;&#x5934;&#x53ef;&#x4ee5;&#x7531;&#x5ba2;&#x6237;&#x7aef;&#x6216;&#x4ee3;&#x7406;&#x8bbe;&#x7f6e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1412,1415"}},{"content":"<pre data-lines=\"1416,1420\"><code class=\"language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">ip</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;127.0.0.1&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1416,1420"}}],"payload":{"tag":"h2","lines":"1410,1411"}},{"content":"req.method&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1423,1424\"><code>&#x5305;&#x542b;&#x4e0e;&#x8bf7;&#x6c42;&#x7684; HTTP &#x65b9;&#x6cd5;&#x5bf9;&#x5e94;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#xff1a;GET&#x3001;POST&#x3001;PUT &#x7b49;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1423,1424"}}],"payload":{"tag":"h2","lines":"1421,1422"}},{"content":"req.originalUrl&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1427,1430\"><code>req.url &#x4e0d;&#x662f;&#x539f;&#x751f;&#x7684; Express &#x5c5e;&#x6027;&#xff0c;&#x5b83;&#x7ee7;&#x627f;&#x81ea; Node &#x7684; http &#x6a21;&#x5757;&#x3002;\n\n&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x5f88;&#x50cf;req.url&#xff1b;&#x4f46;&#x662f;&#xff0c;&#x5b83;&#x4fdd;&#x7559;&#x4e86;&#x539f;&#x59cb;&#x8bf7;&#x6c42; URL&#xff0c;&#x5141;&#x8bb8;&#x60a8;&#x51fa;&#x4e8e;&#x5185;&#x90e8;&#x8def;&#x7531;&#x76ee;&#x7684;&#x81ea;&#x7531;&#x91cd;&#x5199; req.url&#x3002;&#x4f8b;&#x5982;&#xff0c;app.use() &#x7684; &quot;mounting&quot; &#x7279;&#x6027;&#x5c06;&#x91cd;&#x5199; req.url &#x4ee5;&#x5265;&#x79bb;&#x6302;&#x8f7d;&#x70b9;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1427,1430"}},{"content":"<pre data-lines=\"1431,1436\"><code class=\"language-js\"><span class=\"hljs-comment\">// GET /search?q=something</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">originalUrl</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;/search?q=something&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1431,1436"}},{"content":"<pre data-lines=\"1439,1448\"><code class=\"language-js\"><span class=\"hljs-comment\">// GET &apos;http://www.example.com/admin/new?sort=desc&apos;</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/admin&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">originalUrl</span>) <span class=\"hljs-comment\">// &apos;/admin/new?sort=desc&apos;</span>\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">baseUrl</span>) <span class=\"hljs-comment\">// &apos;/admin&apos;</span>\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">path</span>) <span class=\"hljs-comment\">// &apos;/new&apos;</span>\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1439,1448"}}],"payload":{"tag":"h2","lines":"1425,1426"}},{"content":"req.params&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1451,1452\"><code>&#x6b64;&#x5c5e;&#x6027;&#x662f;&#x4e00;&#x4e2a;&#x5305;&#x542b;&#x6620;&#x5c04;&#x5230; &#x547d;&#x540d;&#x8def;&#x7531; &quot;parameters&quot; &#x7684;&#x5c5e;&#x6027;&#x7684;&#x5bf9;&#x8c61;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5982;&#x679c;&#x60a8;&#x6709;&#x8def;&#x7531; /user/:name&#xff0c;&#x5219; &quot;name&quot; &#x5c5e;&#x6027;&#x53ef;&#x7528;&#x4f5c; req.params.name&#x3002;&#x6b64;&#x5bf9;&#x8c61;&#x9ed8;&#x8ba4;&#x4e3a; {}&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1451,1452"}},{"content":"<pre data-lines=\"1453,1458\"><code class=\"language-js\"><span class=\"hljs-comment\">// GET /user/tj</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">params</span>.<span class=\"hljs-property\">name</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;tj&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1453,1458"}},{"content":"<pre data-lines=\"1459,1460\"><code>&#x5f53;&#x60a8;&#x5bf9;&#x8def;&#x7531;&#x5b9a;&#x4e49;&#x4f7f;&#x7528;&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;&#x65f6;&#xff0c;&#x6355;&#x83b7;&#x7ec4;&#x4f7f;&#x7528; req.params[n] &#x5728;&#x6570;&#x7ec4;&#x4e2d;&#x63d0;&#x4f9b;&#xff0c;&#x5176;&#x4e2d; n &#x662f; nth &#x6355;&#x83b7;&#x7ec4;&#x3002;&#x6b64;&#x89c4;&#x5219;&#x9002;&#x7528;&#x4e8e;&#x5e26;&#x6709;&#x5b57;&#x7b26;&#x4e32;&#x8def;&#x7531;&#x7684;&#x672a;&#x547d;&#x540d;&#x901a;&#x914d;&#x7b26;&#x5339;&#x914d;&#xff0c;&#x4f8b;&#x5982; /file/*&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1459,1460"}},{"content":"<pre data-lines=\"1461,1466\"><code class=\"language-js\"><span class=\"hljs-comment\">// GET /file/javascripts/jquery.js</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">params</span>[<span class=\"hljs-number\">0</span>])\n<span class=\"hljs-comment\">// =&gt; &quot;javascripts/jquery.js&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1461,1466"}},{"content":"<pre data-lines=\"1467,1472\"><code>&#x5982;&#x679c;&#x60a8;&#x9700;&#x8981;&#x66f4;&#x6539; req.params &#x4e2d;&#x7684;&#x952e;&#xff0c;&#x8bf7;&#x4f7f;&#x7528; app.param &#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;&#x66f4;&#x6539;&#x4ec5;&#x9002;&#x7528;&#x4e8e;&#x5df2;&#x5728;&#x8def;&#x7531;&#x8def;&#x5f84;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; &#x53c2;&#x6570;&#x3002;\n\n&#x5728;&#x4e2d;&#x95f4;&#x4ef6;&#x6216;&#x8def;&#x7531;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x4e2d;&#x5bf9; req.params &#x5bf9;&#x8c61;&#x6240;&#x505a;&#x7684;&#x4efb;&#x4f55;&#x66f4;&#x6539;&#x90fd;&#x5c06;&#x88ab;&#x91cd;&#x7f6e;&#x3002;\n\n&#x6ce8;&#x610f;&#xff1a;Express &#x81ea;&#x52a8;&#x89e3;&#x7801; req.params &#x4e2d;&#x7684;&#x503c;&#xff08;&#x4f7f;&#x7528; decodeURIComponent&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1467,1472"}}],"payload":{"tag":"h2","lines":"1449,1450"}},{"content":"req.path&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1475,1476\"><code>&#x5305;&#x542b;&#x8bf7;&#x6c42; URL &#x7684;&#x8def;&#x5f84;&#x90e8;&#x5206;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1475,1476"}},{"content":"<pre data-lines=\"1477,1482\"><code class=\"language-js\"><span class=\"hljs-comment\">// example.com/users?sort=desc</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">path</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;/users&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1477,1482"}},{"content":"<pre data-lines=\"1483,1484\"><code>&#x4ece;&#x4e2d;&#x95f4;&#x4ef6;&#x8c03;&#x7528;&#x65f6;&#xff0c;&#x6302;&#x8f7d;&#x70b9;&#x4e0d;&#x5305;&#x542b;&#x5728; req.path &#x4e2d;&#x3002;&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; app.use()&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1483,1484"}}],"payload":{"tag":"h2","lines":"1473,1474"}},{"content":"req.protocol&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1487,1490\"><code>&#x5305;&#x542b;&#x8bf7;&#x6c42;&#x534f;&#x8bae;&#x5b57;&#x7b26;&#x4e32;&#xff1a;http &#x6216;&#xff08;&#x5bf9;&#x4e8e; TLS &#x8bf7;&#x6c42;&#xff09;https&#x3002;\n\n&#x5f53; trust proxy &#x8bbe;&#x7f6e; &#x4e0d;&#x8ba1;&#x7b97;&#x4e3a; false &#x65f6;&#xff0c;&#x6b64;&#x5c5e;&#x6027;&#x5c06;&#x4f7f;&#x7528; X-Forwarded-Proto &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x7684;&#x503c;&#xff08;&#x5982;&#x679c;&#x5b58;&#x5728;&#xff09;&#x3002;&#x6b64;&#x6807;&#x5934;&#x53ef;&#x4ee5;&#x7531;&#x5ba2;&#x6237;&#x7aef;&#x6216;&#x4ee3;&#x7406;&#x8bbe;&#x7f6e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1487,1490"}},{"content":"<pre data-lines=\"1491,1495\"><code class=\"language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">protocol</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;http&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1491,1495"}}],"payload":{"tag":"h2","lines":"1485,1486"}},{"content":"req.query&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1498,1503\"><code>&#x6b64;&#x5c5e;&#x6027;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5176;&#x4e2d;&#x5305;&#x542b;&#x8def;&#x7531;&#x4e2d;&#x6bcf;&#x4e2a;&#x67e5;&#x8be2;&#x5b57;&#x7b26;&#x4e32;&#x53c2;&#x6570;&#x7684;&#x5c5e;&#x6027;&#x3002;&#x5f53; &#x67e5;&#x8be2;&#x89e3;&#x6790;&#x5668; &#x8bbe;&#x7f6e;&#x4e3a;&#x7981;&#x7528;&#x65f6;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61; {}&#xff0c;&#x5426;&#x5219;&#x5b83;&#x662f;&#x914d;&#x7f6e;&#x7684;&#x67e5;&#x8be2;&#x89e3;&#x6790;&#x5668;&#x7684;&#x7ed3;&#x679c;&#x3002;\n\n&#x7531;&#x4e8e; req.query &#x7684;&#x5f62;&#x72b6;&#x57fa;&#x4e8e;&#x7528;&#x6237;&#x63a7;&#x5236;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x56e0;&#x6b64;&#x8be5;&#x5bf9;&#x8c61;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x5c5e;&#x6027;&#x548c;&#x503c;&#x90fd;&#x662f;&#x4e0d;&#x53ef;&#x4fe1;&#x7684;&#xff0c;&#x5e94;&#x8be5;&#x5728;&#x4fe1;&#x4efb;&#x4e4b;&#x524d;&#x8fdb;&#x884c;&#x9a8c;&#x8bc1;&#x3002;&#x4f8b;&#x5982;&#xff0c;req.query.foo.toString() &#x53ef;&#x80fd;&#x4ee5;&#x591a;&#x79cd;&#x65b9;&#x5f0f;&#x5931;&#x8d25;&#xff0c;&#x4f8b;&#x5982; foo &#x53ef;&#x80fd;&#x4e0d;&#x5b58;&#x5728;&#x6216;&#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;toString &#x53ef;&#x80fd;&#x4e0d;&#x662f;&#x51fd;&#x6570;&#xff0c;&#x800c;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x5176;&#x4ed6;&#x7528;&#x6237;&#x8f93;&#x5165;&#x3002;\n\n&#x53ef;&#x4ee5;&#x4f7f;&#x7528; &#x67e5;&#x8be2;&#x89e3;&#x6790;&#x5668;&#x5e94;&#x7528;&#x8bbe;&#x7f6e; &#x914d;&#x7f6e;&#x6b64;&#x5c5e;&#x6027;&#x7684;&#x503c;&#xff0c;&#x4ee5;&#x6309;&#x7167;&#x60a8;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x9700;&#x8981;&#x7684;&#x65b9;&#x5f0f;&#x5de5;&#x4f5c;&#x3002;&#x4e00;&#x4e2a;&#x975e;&#x5e38;&#x6d41;&#x884c;&#x7684;&#x67e5;&#x8be2;&#x5b57;&#x7b26;&#x4e32;&#x89e3;&#x6790;&#x5668;&#x662f; qs &#x6a21;&#x5757;&#xff0c;&#x8fd9;&#x662f;&#x9ed8;&#x8ba4;&#x4f7f;&#x7528;&#x7684;&#x3002;qs &#x6a21;&#x5757;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x8bb8;&#x591a;&#x8bbe;&#x7f6e;&#x8fdb;&#x884c;&#x914d;&#x7f6e;&#xff0c;&#x5e76;&#x4e14;&#x53ef;&#x80fd;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x4e0e;&#x9ed8;&#x8ba4;&#x8bbe;&#x7f6e;&#x4e0d;&#x540c;&#x7684;&#x8bbe;&#x7f6e;&#x6765;&#x586b;&#x5145; req.query&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1498,1503"}},{"content":"<pre data-lines=\"1504,1509\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> qs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;qs&apos;</span>)\napp.<span class=\"hljs-title function_\">setting</span>(<span class=\"hljs-string\">&apos;query parser&apos;</span>,\n  <span class=\"hljs-function\">(<span class=\"hljs-params\">str</span>) =&gt;</span> qs.<span class=\"hljs-title function_\">parse</span>(str, { <span class=\"hljs-comment\">/* custom options */</span> }))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1504,1509"}},{"content":"<pre data-lines=\"1510,1511\"><code>&#x67e5;&#x770b; &#x67e5;&#x8be2;&#x89e3;&#x6790;&#x5668;&#x5e94;&#x7528;&#x8bbe;&#x7f6e; &#x6587;&#x6863;&#x4ee5;&#x4e86;&#x89e3;&#x5176;&#x4ed6;&#x81ea;&#x5b9a;&#x4e49;&#x9009;&#x9879;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1510,1511"}}],"payload":{"tag":"h2","lines":"1496,1497"}},{"content":"req.res&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1514,1515\"><code>&#x6b64;&#x5c5e;&#x6027;&#x5305;&#x542b;&#x5bf9;&#x4e0e;&#x6b64;&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;&#x76f8;&#x5173;&#x7684; &#x54cd;&#x5e94;&#x5bf9;&#x8c61; &#x7684;&#x5f15;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1514,1515"}}],"payload":{"tag":"h2","lines":"1512,1513"}},{"content":"req.route&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1518,1519\"><code>&#x5305;&#x542b;&#x5f53;&#x524d;&#x5339;&#x914d;&#x7684;&#x8def;&#x7531;&#xff0c;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#x3002;&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1518,1519"}},{"content":"<pre data-lines=\"1520,1526\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id?&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(req.<span class=\"hljs-property\">route</span>)\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;GET&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1520,1526"}},{"content":"<pre data-lines=\"1527,1528\"><code>&#x4e0a;&#x4e00;&#x4e2a;&#x7247;&#x6bb5;&#x7684;&#x793a;&#x4f8b;&#x8f93;&#x51fa;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1527,1528"}},{"content":"<pre data-lines=\"1529,1541\"><code class=\"language-json\">{ path: &apos;/user/:id?&apos;,\n  stack:\n   [ { handle: [Function: userIdHandler],\n       name: &apos;userIdHandler&apos;,\n       params: undefined,\n       path: undefined,\n       keys: [],\n       regexp: /^\\/?&#x24;/i,\n       method: &apos;get&apos; } ],\n  methods: { get: true } }\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1529,1541"}}],"payload":{"tag":"h2","lines":"1516,1517"}},{"content":"req.secure&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1544,1545\"><code>&#x5982;&#x679c;&#x5efa;&#x7acb;&#x4e86; TLS &#x8fde;&#x63a5;&#xff0c;&#x5219;&#x4e3a; true &#x7684;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#x3002;&#x76f8;&#x5f53;&#x4e8e;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1544,1545"}},{"content":"<pre data-lines=\"1546,1549\"><code class=\"language-js\">req.<span class=\"hljs-property\">protocol</span> === <span class=\"hljs-string\">&apos;https&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1546,1549"}}],"payload":{"tag":"h2","lines":"1542,1543"}},{"content":"req.signedCookies&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1552,1555\"><code>&#x4f7f;&#x7528; cookie-parser &#x4e2d;&#x95f4;&#x4ef6;&#x65f6;&#xff0c;&#x6b64;&#x5c5e;&#x6027;&#x5305;&#x542b;&#x8bf7;&#x6c42;&#x53d1;&#x9001;&#x7684;&#x5df2;&#x7b7e;&#x540d; cookie&#xff0c;&#x672a;&#x7b7e;&#x540d;&#x4e14;&#x53ef;&#x4f9b;&#x4f7f;&#x7528;&#x3002;&#x7b7e;&#x540d;&#x7684; cookie &#x9a7b;&#x7559;&#x5728;&#x4e0d;&#x540c;&#x7684;&#x5bf9;&#x8c61;&#x4e2d;&#x4ee5;&#x663e;&#x793a;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x7684;&#x610f;&#x56fe;&#xff1b;&#x5426;&#x5219;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x5bf9; req.cookie &#x503c;&#x8fdb;&#x884c;&#x6076;&#x610f;&#x653b;&#x51fb;&#xff08;&#x8fd9;&#x5f88;&#x5bb9;&#x6613;&#x88ab;&#x6b3a;&#x9a97;&#xff09;&#x3002;&#x8bf7;&#x6ce8;&#x610f;&#xff0c;&#x5bf9; cookie &#x8fdb;&#x884c;&#x7b7e;&#x540d;&#x4e0d;&#x4f1a;&#x4f7f;&#x5176;&#x6210;&#x4e3a; &quot;hidden&quot; &#x6216;&#x52a0;&#x5bc6;&#xff1b;&#x4f46;&#x53ea;&#x662f;&#x9632;&#x6b62;&#x7be1;&#x6539;&#xff08;&#x56e0;&#x4e3a;&#x7528;&#x4e8e;&#x7b7e;&#x540d;&#x7684;&#x79d8;&#x5bc6;&#x662f;&#x79c1;&#x4eba;&#x7684;&#xff09;&#x3002;\n\n&#x5982;&#x679c;&#x672a;&#x53d1;&#x9001;&#x7b7e;&#x540d; cookie&#xff0c;&#x5219;&#x8be5;&#x5c5e;&#x6027;&#x9ed8;&#x8ba4;&#x4e3a; {}&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1552,1555"}},{"content":"<pre data-lines=\"1556,1561\"><code class=\"language-js\"><span class=\"hljs-comment\">// Cookie: user=tobi.CP7AWaXDfAKIRfH49dQzKJx7sKzzSoPq7/AcBBRVwlI3</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">signedCookies</span>.<span class=\"hljs-property\">user</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;tobi&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1556,1561"}},{"content":"<pre data-lines=\"1562,1563\"><code>&#x6709;&#x5173;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#x3001;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; cookie-parser&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1562,1563"}}],"payload":{"tag":"h2","lines":"1550,1551"}},{"content":"req.stale&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1566,1567\"><code>&#x8868;&#x793a;&#x8bf7;&#x6c42;&#x662f;&#x5426;&#x4e3a;&quot;stale,&quot;&#xff0c;&#x4e0e;req.fresh&#x76f8;&#x53cd;&#x3002;&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; req.fresh&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1566,1567"}},{"content":"<pre data-lines=\"1568,1572\"><code class=\"language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">stale</span>)\n<span class=\"hljs-comment\">// =&gt; true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1568,1572"}}],"payload":{"tag":"h2","lines":"1564,1565"}},{"content":"req.subdomains&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1575,1576\"><code>&#x8bf7;&#x6c42;&#x57df;&#x540d;&#x4e2d;&#x7684;&#x5b50;&#x57df;&#x6570;&#x7ec4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1575,1576"}},{"content":"<pre data-lines=\"1577,1582\"><code class=\"language-js\"><span class=\"hljs-comment\">// Host: &quot;tobi.ferrets.example.com&quot;</span>\n<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">subdomains</span>)\n<span class=\"hljs-comment\">// =&gt; [&quot;ferrets&quot;, &quot;tobi&quot;]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1577,1582"}},{"content":"<pre data-lines=\"1583,1584\"><code>&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5c5e;&#x6027; subdomain offset&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a; 2&#xff0c;&#x7528;&#x4e8e;&#x786e;&#x5b9a;&#x5b50;&#x57df;&#x6bb5;&#x7684;&#x5f00;&#x59cb;&#x3002;&#x8981;&#x66f4;&#x6539;&#x6b64;&#x884c;&#x4e3a;&#xff0c;&#x8bf7;&#x4f7f;&#x7528; app.set &#x66f4;&#x6539;&#x5176;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1583,1584"}}],"payload":{"tag":"h2","lines":"1573,1574"}},{"content":"req.xhr&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1587,1588\"><code>&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x7684; X-Requested-With &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x4e3a; &quot;XMLHttpRequest&quot;&#xff0c;&#x5219;&#x4e3a; true &#x7684;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#xff0c;&#x8868;&#x793a;&#x8be5;&#x8bf7;&#x6c42;&#x662f;&#x7531; jQuery &#x7b49;&#x5ba2;&#x6237;&#x7aef;&#x5e93;&#x53d1;&#x51fa;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1587,1588"}},{"content":"<pre data-lines=\"1589,1593\"><code class=\"language-js\"><span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(req.<span class=\"hljs-property\">xhr</span>)\n<span class=\"hljs-comment\">// =&gt; true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1589,1593"}}],"payload":{"tag":"h2","lines":"1585,1586"}},{"content":"req.accepts(types)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1596,1599\"><code>&#x6839;&#x636e;&#x8bf7;&#x6c42;&#x7684; Accept HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x68c0;&#x67e5;&#x6307;&#x5b9a;&#x7684;&#x5185;&#x5bb9;&#x7c7b;&#x578b;&#x662f;&#x5426;&#x53ef;&#x63a5;&#x53d7;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x6700;&#x4f73;&#x5339;&#x914d;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x7684;&#x5185;&#x5bb9;&#x7c7b;&#x578b;&#x90fd;&#x4e0d;&#x53ef;&#x63a5;&#x53d7;&#xff0c;&#x5219;&#x8fd4;&#x56de; false&#xff08;&#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5e94;&#x4ee5; 406 &quot;Not Acceptable&quot; &#x54cd;&#x5e94;&#xff09;&#x3002;\n\ntype &#x503c;&#x53ef;&#x4ee5;&#x662f;&#x5355;&#x4e2a; MIME &#x7c7b;&#x578b;&#x5b57;&#x7b26;&#x4e32;&#xff08;&#x4f8b;&#x5982; &quot;application/json&quot;&#xff09;&#x3001;&#x6269;&#x5c55;&#x540d;&#xff08;&#x4f8b;&#x5982; &quot;json&quot;&#xff09;&#x3001;&#x9017;&#x53f7;&#x5206;&#x9694;&#x7684;&#x5217;&#x8868;&#x6216;&#x6570;&#x7ec4;&#x3002;&#x5bf9;&#x4e8e;&#x5217;&#x8868;&#x6216;&#x6570;&#x7ec4;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x6700;&#x4f73;&#x5339;&#x914d;&#xff08;&#x5982;&#x679c;&#x6709;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1596,1599"}},{"content":"<pre data-lines=\"1600,1624\"><code class=\"language-js\"><span class=\"hljs-comment\">// Accept: text/html</span>\nreq.<span class=\"hljs-title function_\">accepts</span>(<span class=\"hljs-string\">&apos;html&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;html&quot;</span>\n\n<span class=\"hljs-comment\">// Accept: text/*, application/json</span>\nreq.<span class=\"hljs-title function_\">accepts</span>(<span class=\"hljs-string\">&apos;html&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;html&quot;</span>\nreq.<span class=\"hljs-title function_\">accepts</span>(<span class=\"hljs-string\">&apos;text/html&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;text/html&quot;</span>\nreq.<span class=\"hljs-title function_\">accepts</span>([<span class=\"hljs-string\">&apos;json&apos;</span>, <span class=\"hljs-string\">&apos;text&apos;</span>])\n<span class=\"hljs-comment\">// =&gt; &quot;json&quot;</span>\nreq.<span class=\"hljs-title function_\">accepts</span>(<span class=\"hljs-string\">&apos;application/json&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;application/json&quot;</span>\n\n<span class=\"hljs-comment\">// Accept: text/*, application/json</span>\nreq.<span class=\"hljs-title function_\">accepts</span>(<span class=\"hljs-string\">&apos;image/png&apos;</span>)\nreq.<span class=\"hljs-title function_\">accepts</span>(<span class=\"hljs-string\">&apos;png&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; false</span>\n\n<span class=\"hljs-comment\">// Accept: text/*;q=.5, application/json</span>\nreq.<span class=\"hljs-title function_\">accepts</span>([<span class=\"hljs-string\">&apos;html&apos;</span>, <span class=\"hljs-string\">&apos;json&apos;</span>])\n<span class=\"hljs-comment\">// =&gt; &quot;json&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1600,1624"}},{"content":"<pre data-lines=\"1625,1626\"><code>&#x5982;&#x9700;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x6709;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; accepts&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1625,1626"}}],"payload":{"tag":"h2","lines":"1594,1595"}},{"content":"req.acceptsCharsets(charset [, ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1629,1632\"><code>&#x6839;&#x636e;&#x8bf7;&#x6c42;&#x7684; Accept-Charset HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#xff0c;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x5b57;&#x7b26;&#x96c6;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x63a5;&#x53d7;&#x7684;&#x5b57;&#x7b26;&#x96c6;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x63a5;&#x53d7;&#x4efb;&#x4f55;&#x6307;&#x5b9a;&#x7684;&#x5b57;&#x7b26;&#x96c6;&#xff0c;&#x5219;&#x8fd4;&#x56de; false&#x3002;\n\n&#x5982;&#x9700;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x6709;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; accepts&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1629,1632"}}],"payload":{"tag":"h2","lines":"1627,1628"}},{"content":"req.acceptsEncodings(encoding [, ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1635,1638\"><code>&#x6839;&#x636e;&#x8bf7;&#x6c42;&#x7684; Accept-Encoding HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#xff0c;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x7f16;&#x7801;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x63a5;&#x53d7;&#x7684;&#x7f16;&#x7801;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x63a5;&#x53d7;&#x4efb;&#x4f55;&#x6307;&#x5b9a;&#x7684;&#x7f16;&#x7801;&#xff0c;&#x5219;&#x8fd4;&#x56de; false&#x3002;\n\n&#x5982;&#x9700;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x6709;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; accepts&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1635,1638"}}],"payload":{"tag":"h2","lines":"1633,1634"}},{"content":"req.acceptsLanguages(lang [, ...])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1641,1644\"><code>&#x6839;&#x636e;&#x8bf7;&#x6c42;&#x7684; Accept-Language HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#xff0c;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x8bed;&#x8a00;&#x4e2d;&#x7b2c;&#x4e00;&#x4e2a;&#x63a5;&#x53d7;&#x7684;&#x8bed;&#x8a00;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x63a5;&#x53d7;&#x4efb;&#x4f55;&#x6307;&#x5b9a;&#x7684;&#x8bed;&#x8a00;&#xff0c;&#x5219;&#x8fd4;&#x56de; false&#x3002;\n\n&#x5982;&#x9700;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x6709;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; accepts&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1641,1644"}}],"payload":{"tag":"h2","lines":"1639,1640"}},{"content":"req.get(field)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1648,1649\"><code>&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x7684; HTTP &#x8bf7;&#x6c42;&#x5934;&#x5b57;&#x6bb5;&#xff08;&#x4e0d;&#x533a;&#x5206;&#x5927;&#x5c0f;&#x5199;&#x7684;&#x5339;&#x914d;&#xff09;&#x3002;Referrer &#x548c; Referer &#x5b57;&#x6bb5;&#x53ef;&#x4ee5;&#x4e92;&#x6362;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1648,1649"}},{"content":"<pre data-lines=\"1650,1660\"><code class=\"language-js\">req.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;Content-Type&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;text/plain&quot;</span>\n\nreq.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;content-type&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;text/plain&quot;</span>\n\nreq.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;Something&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; undefined</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1650,1660"}}],"payload":{"tag":"h2","lines":"1646,1647"}},{"content":"req.is(type)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1665,1666\"><code>&#x5982;&#x679c;&#x4f20;&#x5165;&#x8bf7;&#x6c42;&#x7684; &quot;Content-Type&quot; HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x4e0e; type &#x53c2;&#x6570;&#x6307;&#x5b9a;&#x7684; MIME &#x7c7b;&#x578b;&#x5339;&#x914d;&#xff0c;&#x5219;&#x8fd4;&#x56de;&#x5339;&#x914d;&#x7684;&#x5185;&#x5bb9;&#x7c7b;&#x578b;&#x3002;&#x5982;&#x679c;&#x8bf7;&#x6c42;&#x6ca1;&#x6709;&#x6b63;&#x6587;&#xff0c;&#x5219;&#x8fd4;&#x56de; null&#x3002;&#x5426;&#x5219;&#x8fd4;&#x56de; false&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1665,1666"}},{"content":"<pre data-lines=\"1667,1681\"><code class=\"language-js\"><span class=\"hljs-comment\">// With Content-Type: text/html; charset=utf-8</span>\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;html&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;html&apos;</span>\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;text/html&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;text/html&apos;</span>\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;text/*&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;text/*&apos;</span>\n\n<span class=\"hljs-comment\">// When Content-Type is application/json</span>\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;json&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;json&apos;</span>\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;application/json&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;application/json&apos;</span>\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;application/*&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;application/*&apos;</span>\n\nreq.<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&apos;html&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; false</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1667,1681"}},{"content":"<pre data-lines=\"1682,1683\"><code>&#x5982;&#x9700;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x6709;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; type-is&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1682,1683"}}],"payload":{"tag":"h2","lines":"1663,1664"}},{"content":"req.range(size[, options])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1687,1699\"><code>Range &#x6807;&#x5934;&#x89e3;&#x6790;&#x5668;&#x3002;\n\nsize &#x53c2;&#x6570;&#x662f;&#x8d44;&#x6e90;&#x7684;&#x6700;&#x5927;&#x5927;&#x5c0f;&#x3002;\n\noptions &#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x5177;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x7684;&#x5bf9;&#x8c61;&#x3002;\n\n&#x5c5e;&#x6027;\t&#x7c7b;&#x578b;\t&#x63cf;&#x8ff0;\ncombine\t&#x5e03;&#x5c14;&#x503c;\t&#x6307;&#x5b9a;&#x662f;&#x5426;&#x5e94;&#x5408;&#x5e76;&#x91cd;&#x53e0;&#x548c;&#x76f8;&#x90bb;&#x8303;&#x56f4;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a; false&#x3002;&#x5f53; true &#x65f6;&#xff0c;&#x8303;&#x56f4;&#x5c06;&#x88ab;&#x7ec4;&#x5408;&#x5e76;&#x8fd4;&#x56de;&#xff0c;&#x5c31;&#x597d;&#x50cf;&#x5b83;&#x4eec;&#x5728;&#x6807;&#x9898;&#x4e2d;&#x4ee5;&#x8fd9;&#x79cd;&#x65b9;&#x5f0f;&#x6307;&#x5b9a;&#x4e00;&#x6837;&#x3002;\n&#x5c06;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x8303;&#x56f4;&#x6570;&#x7ec4;&#x6216;&#x6307;&#x793a;&#x89e3;&#x6790;&#x9519;&#x8bef;&#x7684;&#x8d1f;&#x6570;&#x3002;\n\n-2 &#x8868;&#x793a;&#x683c;&#x5f0f;&#x9519;&#x8bef;&#x7684;&#x6807;&#x5934;&#x5b57;&#x7b26;&#x4e32;\n-1 &#x8868;&#x793a;&#x65e0;&#x6cd5;&#x6ee1;&#x8db3;&#x7684;&#x8303;&#x56f4;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1687,1699"}},{"content":"<pre data-lines=\"1700,1712\"><code class=\"language-js\"><span class=\"hljs-comment\">// parse header from request</span>\n<span class=\"hljs-keyword\">const</span> range = req.<span class=\"hljs-title function_\">range</span>(<span class=\"hljs-number\">1000</span>)\n\n<span class=\"hljs-comment\">// the type of the range</span>\n<span class=\"hljs-keyword\">if</span> (range.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&apos;bytes&apos;</span>) {\n  <span class=\"hljs-comment\">// the ranges</span>\n  range.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">r</span>) =&gt;</span> {\n    <span class=\"hljs-comment\">// do something with r.start and r.end</span>\n  })\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1700,1712"}},{"content":"<pre data-lines=\"1714,1745\"><code data-lines=\"1714,1745\">req<span class=\"hljs-selector-class\">.app</span>\nreq<span class=\"hljs-selector-class\">.baseUrl</span>\nreq<span class=\"hljs-selector-class\">.body</span>\nreq<span class=\"hljs-selector-class\">.cookies</span>\nreq<span class=\"hljs-selector-class\">.fresh</span>\nreq<span class=\"hljs-selector-class\">.host</span>\nreq<span class=\"hljs-selector-class\">.hostname</span>\nreq<span class=\"hljs-selector-class\">.ip</span>\nreq<span class=\"hljs-selector-class\">.ips</span>\nreq<span class=\"hljs-selector-class\">.method</span>\nreq<span class=\"hljs-selector-class\">.originalUrl</span>\nreq<span class=\"hljs-selector-class\">.params</span>\nreq<span class=\"hljs-selector-class\">.path</span>\nreq<span class=\"hljs-selector-class\">.protocol</span>\nreq<span class=\"hljs-selector-class\">.query</span>\nreq<span class=\"hljs-selector-class\">.res</span>\nreq<span class=\"hljs-selector-class\">.route</span>\nreq<span class=\"hljs-selector-class\">.secure</span>\nreq<span class=\"hljs-selector-class\">.signedCookies</span>\nreq<span class=\"hljs-selector-class\">.stale</span>\nreq<span class=\"hljs-selector-class\">.subdomains</span>\nreq<span class=\"hljs-selector-class\">.xhr</span>\nreq<span class=\"hljs-selector-class\">.accepts</span>(types)\nreq<span class=\"hljs-selector-class\">.acceptsCharsets</span>(charset <span class=\"hljs-selector-attr\">[, ...]</span>)\nreq<span class=\"hljs-selector-class\">.acceptsEncodings</span>(encoding <span class=\"hljs-selector-attr\">[, ...]</span>)\nreq<span class=\"hljs-selector-class\">.acceptsLanguages</span>(lang <span class=\"hljs-selector-attr\">[, ...]</span>)\nreq<span class=\"hljs-selector-class\">.get</span>(field)\nreq<span class=\"hljs-selector-class\">.is</span>(type)\nreq<span class=\"hljs-selector-class\">.range</span>(size<span class=\"hljs-selector-attr\">[, options]</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1714,1745"}}],"payload":{"tag":"h2","lines":"1685,1686"}}],"payload":{"tag":"h1","lines":"1271,1272"}},{"content":"&#x54cd;&#x5e94;","children":[{"content":"","children":[{"content":"<pre data-lines=\"1751,1778\"><code data-lines=\"1751,1778\">res<span class=\"hljs-selector-class\">.app</span>\nres<span class=\"hljs-selector-class\">.headersSent</span>\nres<span class=\"hljs-selector-class\">.locals</span>\nres<span class=\"hljs-selector-class\">.req</span>\nres<span class=\"hljs-selector-class\">.append</span>(field <span class=\"hljs-selector-attr\">[, value]</span>)\nres<span class=\"hljs-selector-class\">.attachment</span>(<span class=\"hljs-selector-attr\">[filename]</span>)\nres<span class=\"hljs-selector-class\">.cookie</span>(name, value <span class=\"hljs-selector-attr\">[, options]</span>)\nres<span class=\"hljs-selector-class\">.clearCookie</span>(name <span class=\"hljs-selector-attr\">[, options]</span>)\nres<span class=\"hljs-selector-class\">.download</span>(<span class=\"hljs-selector-tag\">path</span> <span class=\"hljs-selector-attr\">[, filename]</span> <span class=\"hljs-selector-attr\">[, options]</span> <span class=\"hljs-selector-attr\">[, fn]</span>)\nres<span class=\"hljs-selector-class\">.end</span>(<span class=\"hljs-selector-attr\">[data]</span> <span class=\"hljs-selector-attr\">[, encoding]</span>)\nres<span class=\"hljs-selector-class\">.format</span>(object)\nres<span class=\"hljs-selector-class\">.get</span>(field)\nres<span class=\"hljs-selector-class\">.json</span>(<span class=\"hljs-selector-attr\">[body]</span>)\nres<span class=\"hljs-selector-class\">.jsonp</span>(<span class=\"hljs-selector-attr\">[body]</span>)\nres<span class=\"hljs-selector-class\">.links</span>(links)\nres<span class=\"hljs-selector-class\">.location</span>(path)\nres<span class=\"hljs-selector-class\">.redirect</span>(<span class=\"hljs-selector-attr\">[status,]</span> path)\nres<span class=\"hljs-selector-class\">.render</span>(view <span class=\"hljs-selector-attr\">[, locals]</span> <span class=\"hljs-selector-attr\">[, callback]</span>)\nres<span class=\"hljs-selector-class\">.send</span>(<span class=\"hljs-selector-attr\">[body]</span>)\nres<span class=\"hljs-selector-class\">.sendFile</span>(<span class=\"hljs-selector-tag\">path</span> <span class=\"hljs-selector-attr\">[, options]</span> <span class=\"hljs-selector-attr\">[, fn]</span>)\nres<span class=\"hljs-selector-class\">.sendStatus</span>(statusCode)\nres<span class=\"hljs-selector-class\">.set</span>(field <span class=\"hljs-selector-attr\">[, value]</span>)\nres<span class=\"hljs-selector-class\">.status</span>(code)\nres<span class=\"hljs-selector-class\">.type</span>(type)\nres<span class=\"hljs-selector-class\">.vary</span>(field)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1751,1778"}},{"content":"<pre data-lines=\"1779,1784\"><code>res &#x5bf9;&#x8c61;&#x8868;&#x793a; Express &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5728;&#x6536;&#x5230; HTTP &#x8bf7;&#x6c42;&#x65f6;&#x53d1;&#x9001;&#x7684; HTTP &#x54cd;&#x5e94;&#x3002;\n\n&#x5728;&#x672c;&#x6587;&#x6863;&#x4e2d;&#xff0c;&#x6309;&#x7167;&#x60ef;&#x4f8b;&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x59cb;&#x7ec8;&#x79f0;&#x4e3a; res&#xff08;HTTP &#x8bf7;&#x6c42;&#x4e3a; req&#xff09;&#xff0c;&#x4f46;&#x5176;&#x5b9e;&#x9645;&#x540d;&#x79f0;&#x7531;&#x60a8;&#x6b63;&#x5728;&#x4f7f;&#x7528;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x786e;&#x5b9a;&#x3002;\n\n&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1779,1784"}},{"content":"<pre data-lines=\"1785,1790\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">`user <span class=\"hljs-subst\">&#x24;{req.params.id}</span>`</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1785,1790"}},{"content":"<pre data-lines=\"1793,1798\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">request, response</span>) =&gt;</span> {\n  response.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">`user <span class=\"hljs-subst\">&#x24;{request.params.id}</span>`</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1793,1798"}},{"content":"<pre data-lines=\"1799,1800\"><code>res&#x5bf9;&#x8c61;&#x662f;Node&#x81ea;&#x5e26;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;&#x7684;&#x589e;&#x5f3a;&#x7248;&#xff0c;&#x652f;&#x6301;&#x6240;&#x6709;&#x5185;&#x7f6e;&#x5b57;&#x6bb5;&#x548c;&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1799,1800"}}],"payload":{"tag":"h2","lines":"1749,1750"}},{"content":"res.app&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1803,1806\"><code>&#x6b64;&#x5c5e;&#x6027;&#x5305;&#x542b;&#x5bf9;&#x4f7f;&#x7528;&#x4e2d;&#x95f4;&#x4ef6;&#x7684; Express &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x5b9e;&#x4f8b;&#x7684;&#x5f15;&#x7528;&#x3002;\n\nres.app &#x4e0e;&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;&#x4e2d;&#x7684; req.app &#x5c5e;&#x6027;&#x76f8;&#x540c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1803,1806"}}],"payload":{"tag":"h2","lines":"1801,1802"}},{"content":"res.headersSent&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1809,1810\"><code>&#x6307;&#x793a;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x662f;&#x5426;&#x4e3a;&#x54cd;&#x5e94;&#x53d1;&#x9001; HTTP &#x6807;&#x5934;&#x7684;&#x5e03;&#x5c14;&#x5c5e;&#x6027;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1809,1810"}},{"content":"<pre data-lines=\"1811,1818\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res.<span class=\"hljs-property\">headersSent</span>) <span class=\"hljs-comment\">// false</span>\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;OK&apos;</span>)\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res.<span class=\"hljs-property\">headersSent</span>) <span class=\"hljs-comment\">// true</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1811,1818"}}],"payload":{"tag":"h2","lines":"1807,1808"}},{"content":"res.locals&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1821,1826\"><code>&#x4f7f;&#x7528;&#x6b64;&#x5c5e;&#x6027;&#x8bbe;&#x7f6e;&#x5728;&#x4f7f;&#x7528; res.render &#x5448;&#x73b0;&#x7684;&#x6a21;&#x677f;&#x4e2d;&#x53ef;&#x8bbf;&#x95ee;&#x7684;&#x53d8;&#x91cf;&#x3002;res.locals &#x4e0a;&#x8bbe;&#x7f6e;&#x7684;&#x53d8;&#x91cf;&#x5728;&#x5355;&#x4e2a;&#x8bf7;&#x6c42;-&#x54cd;&#x5e94;&#x5468;&#x671f;&#x5185;&#x53ef;&#x7528;&#xff0c;&#x5e76;&#x4e14;&#x4e0d;&#x4f1a;&#x5728;&#x8bf7;&#x6c42;&#x4e4b;&#x95f4;&#x5171;&#x4eab;&#x3002;\n\n&#x4e3a;&#x4e86;&#x4fdd;&#x7559;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x4ee5;&#x7528;&#x4e8e;&#x8bf7;&#x6c42;&#x4e4b;&#x95f4;&#x7684;&#x6a21;&#x677f;&#x6e32;&#x67d3;&#xff0c;&#x8bf7;&#x6539;&#x7528; app.locals&#x3002;\n\n&#x6b64;&#x5c5e;&#x6027;&#x5bf9;&#x4e8e;&#x5411;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x5448;&#x73b0;&#x7684;&#x6a21;&#x677f;&#x516c;&#x5f00;&#x8bf7;&#x6c42;&#x7ea7;&#x4fe1;&#x606f;&#xff08;&#x4f8b;&#x5982;&#x8bf7;&#x6c42;&#x8def;&#x5f84;&#x540d;&#x79f0;&#x3001;&#x7ecf;&#x8fc7;&#x8eab;&#x4efd;&#x9a8c;&#x8bc1;&#x7684;&#x7528;&#x6237;&#x3001;&#x7528;&#x6237;&#x8bbe;&#x7f6e;&#x7b49;&#xff09;&#x5f88;&#x6709;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1821,1826"}},{"content":"<pre data-lines=\"1827,1835\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// Make `user` and `authenticated` available in templates</span>\n  res.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">user</span> = req.<span class=\"hljs-property\">user</span>\n  res.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">authenticated</span> = !req.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">anonymous</span>\n  <span class=\"hljs-title function_\">next</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1827,1835"}}],"payload":{"tag":"h2","lines":"1819,1820"}},{"content":"res.req&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1838,1839\"><code>&#x6b64;&#x5c5e;&#x6027;&#x5305;&#x542b;&#x5bf9;&#x4e0e;&#x6b64;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;&#x76f8;&#x5173;&#x7684; &#x8bf7;&#x6c42;&#x5bf9;&#x8c61; &#x7684;&#x5f15;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1838,1839"}}],"payload":{"tag":"h2","lines":"1836,1837"}},{"content":"res.append(field [, value])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1842,1847\"><code>Express v4.11.0+ &#x652f;&#x6301; res.append()\n\n&#x5c06;&#x6307;&#x5b9a;&#x7684; value &#x9644;&#x52a0;&#x5230; HTTP &#x54cd;&#x5e94;&#x6807;&#x5934; field&#x3002;&#x5982;&#x679c;&#x5c1a;&#x672a;&#x8bbe;&#x7f6e;&#x6807;&#x5934;&#xff0c;&#x5219;&#x4f1a;&#x521b;&#x5efa;&#x5177;&#x6709;&#x6307;&#x5b9a;&#x503c;&#x7684;&#x6807;&#x5934;&#x3002;value &#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x6570;&#x7ec4;&#x3002;\n\n&#x6ce8;&#x610f;&#xff1a;&#x5728; res.append() &#x4e4b;&#x540e;&#x8c03;&#x7528; res.set() &#x4f1a;&#x91cd;&#x7f6e;&#x4e4b;&#x524d;&#x8bbe;&#x7f6e;&#x7684; header &#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1842,1847"}},{"content":"<pre data-lines=\"1848,1853\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&apos;Link&apos;</span>, [<span class=\"hljs-string\">&apos;&lt;http://localhost/&gt;&apos;</span>, <span class=\"hljs-string\">&apos;&lt;http://localhost:3000/&gt;&apos;</span>])\nres.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&apos;Set-Cookie&apos;</span>, <span class=\"hljs-string\">&apos;foo=bar; Path=/; HttpOnly&apos;</span>)\nres.<span class=\"hljs-title function_\">append</span>(<span class=\"hljs-string\">&apos;Warning&apos;</span>, <span class=\"hljs-string\">&apos;199 Miscellaneous warning&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1848,1853"}}],"payload":{"tag":"h2","lines":"1840,1841"}},{"content":"res.attachment([filename])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1856,1857\"><code>&#x5c06; HTTP &#x54cd;&#x5e94; Content-Disposition &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x8bbe;&#x7f6e;&#x4e3a; &quot;attachment&quot;&#x3002;&#x5982;&#x679c;&#x7ed9;&#x51fa;&#x4e86; filename&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x4f1a;&#x6839;&#x636e;&#x6269;&#x5c55;&#x540d;&#x901a;&#x8fc7; res.type() &#x8bbe;&#x7f6e; Content-Type&#xff0c;&#x5e76;&#x8bbe;&#x7f6e; Content-Disposition &quot;filename=&quot; &#x53c2;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1856,1857"}},{"content":"<pre data-lines=\"1858,1866\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">attachment</span>()\n<span class=\"hljs-comment\">// Content-Disposition: attachment</span>\n\nres.<span class=\"hljs-title function_\">attachment</span>(<span class=\"hljs-string\">&apos;path/to/logo.png&apos;</span>)\n<span class=\"hljs-comment\">// Content-Disposition: attachment; filename=&quot;logo.png&quot;</span>\n<span class=\"hljs-comment\">// Content-Type: image/png</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1858,1866"}}],"payload":{"tag":"h2","lines":"1854,1855"}},{"content":"res.cookie(name, value [, options])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1869,1872\"><code>&#x5c06; cookie name &#x8bbe;&#x7f6e;&#x4e3a; value&#x3002;value &#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x6216;&#x8f6c;&#x6362;&#x4e3a; JSON &#x7684;&#x5bf9;&#x8c61;&#x3002;\n\noptions &#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x5177;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x7684;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1869,1872"}},{"content":"<pre data-lines=\"1873,1885\"><code data-lines=\"1873,1885\">&#x5c5e;&#x6027;\t&#x7c7b;&#x578b;\t&#x63cf;&#x8ff0;\ndomain\t&#x5b57;&#x7b26;&#x4e32;\tcookie &#x7684;&#x57df;&#x540d;&#x3002;&#x9ed8;&#x8ba4;&#x4e3a;&#x5e94;&#x7528;&#x7684;&#x57df;&#x540d;&#x3002;\nencode\t&#x51fd;&#x6570;\t&#x7528;&#x4e8e; cookie &#x503c;&#x7f16;&#x7801;&#x7684;&#x540c;&#x6b65;&#x51fd;&#x6570;&#x3002;&#x9ed8;&#x8ba4;&#x4e3a; encodeURIComponent&#x3002;\nexpires\t&#x65e5;&#x671f;\t&#x683c;&#x6797;&#x5a01;&#x6cbb;&#x6807;&#x51c6;&#x65f6;&#x95f4; cookie &#x7684;&#x5230;&#x671f;&#x65e5;&#x671f;&#x3002;&#x5982;&#x679c;&#x672a;&#x6307;&#x5b9a;&#x6216;&#x8bbe;&#x7f6e;&#x4e3a; <span class=\"hljs-number\">0</span>&#xff0c;&#x5219;&#x521b;&#x5efa;&#x4f1a;&#x8bdd; cookie&#x3002;\nhttpOnly\t&#x5e03;&#x5c14;&#x503c;\t&#x5c06; cookie &#x6807;&#x8bb0;&#x4e3a;&#x53ea;&#x80fd;&#x7531; Web &#x670d;&#x52a1;&#x5668;&#x8bbf;&#x95ee;&#x3002;\nmaxAge\t&#x6570;&#x5b57;\t&#x65b9;&#x4fbf;&#x7684;&#x9009;&#x9879;&#xff0c;&#x7528;&#x4e8e;&#x8bbe;&#x7f6e;&#x76f8;&#x5bf9;&#x4e8e;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#x7684;&#x5230;&#x671f;&#x65f6;&#x95f4;&#xff08;&#x4ee5;&#x6beb;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff09;&#x3002;\npath\t&#x5b57;&#x7b26;&#x4e32;\tcookie &#x7684;&#x8def;&#x5f84;&#x3002;&#x9ed8;&#x8ba4;&#x4e3a; <span class=\"hljs-string\">&quot;/&quot;</span>&#x3002;\nsecure\t&#x5e03;&#x5c14;&#x503c;\t&#x5c06; cookie &#x6807;&#x8bb0;&#x4e3a;&#x4ec5;&#x4e0e; HTTPS &#x4e00;&#x8d77;&#x4f7f;&#x7528;&#x3002;\nsigned\t&#x5e03;&#x5c14;&#x503c;\t&#x6307;&#x793a;&#x662f;&#x5426;&#x5e94;&#x8be5;&#x5bf9; cookie &#x8fdb;&#x884c;&#x7b7e;&#x540d;&#x3002;\nsameSite\t&#x5e03;&#x5c14;&#x503c;&#x6216;&#x5b57;&#x7b26;&#x4e32;\t<span class=\"hljs-string\">&quot;SameSite&quot;</span> <span class=\"hljs-keyword\">Set</span>-Cookie &#x5c5e;&#x6027;&#x7684;&#x503c;&#x3002;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#x8bf7;&#x53c2;&#x89c1; <span class=\"hljs-comment\">https:</span>//<span class=\"hljs-comment\">tools.ietf.org</span>/html/<span class=\"hljs-comment\">draft-ietf-httpbis-cookie-same-site-00#section-4.1.1</span>&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1873,1885"}},{"content":"<pre data-lines=\"1886,1889\"><code>res.cookie() &#x6240;&#x505a;&#x7684;&#x53ea;&#x662f;&#x4f7f;&#x7528;&#x63d0;&#x4f9b;&#x7684;&#x9009;&#x9879;&#x8bbe;&#x7f6e; HTTP Set-Cookie &#x6807;&#x5934;&#x3002;&#x4efb;&#x4f55;&#x672a;&#x6307;&#x5b9a;&#x7684;&#x9009;&#x9879;&#x9ed8;&#x8ba4;&#x4e3a; RFC 6265 &#x4e2d;&#x89c4;&#x5b9a;&#x7684;&#x503c;&#x3002;\n\n&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1886,1889"}},{"content":"<pre data-lines=\"1890,1894\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;tobi&apos;</span>, { <span class=\"hljs-attr\">domain</span>: <span class=\"hljs-string\">&apos;.example.com&apos;</span>, <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">&apos;/admin&apos;</span>, <span class=\"hljs-attr\">secure</span>: <span class=\"hljs-literal\">true</span> })\nres.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;rememberme&apos;</span>, <span class=\"hljs-string\">&apos;1&apos;</span>, { <span class=\"hljs-attr\">expires</span>: <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(<span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>() + <span class=\"hljs-number\">900000</span>), <span class=\"hljs-attr\">httpOnly</span>: <span class=\"hljs-literal\">true</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1890,1894"}},{"content":"<pre data-lines=\"1895,1898\"><code>encode &#x9009;&#x9879;&#x5141;&#x8bb8;&#x60a8;&#x9009;&#x62e9;&#x7528;&#x4e8e; cookie &#x503c;&#x7f16;&#x7801;&#x7684;&#x51fd;&#x6570;&#x3002;&#x4e0d;&#x652f;&#x6301;&#x5f02;&#x6b65;&#x51fd;&#x6570;&#x3002;\n\n&#x793a;&#x4f8b;&#x7528;&#x4f8b;&#xff1a;&#x60a8;&#x9700;&#x8981;&#x4e3a;&#x7ec4;&#x7ec7;&#x4e2d;&#x7684;&#x53e6;&#x4e00;&#x4e2a;&#x7ad9;&#x70b9;&#x8bbe;&#x7f6e;&#x57df;&#x8303;&#x56f4;&#x7684; cookie&#x3002;&#x6b64;&#x5176;&#x4ed6;&#x7ad9;&#x70b9;&#xff08;&#x4e0d;&#x53d7;&#x60a8;&#x7684;&#x7ba1;&#x7406;&#x63a7;&#x5236;&#xff09;&#x4e0d;&#x4f7f;&#x7528; URI &#x7f16;&#x7801;&#x7684; cookie &#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1895,1898"}},{"content":"<pre data-lines=\"1899,1908\"><code class=\"language-js\"><span class=\"hljs-comment\">// Default encoding</span>\nres.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;some_cross_domain_cookie&apos;</span>, <span class=\"hljs-string\">&apos;http://mysubdomain.example.com&apos;</span>, { <span class=\"hljs-attr\">domain</span>: <span class=\"hljs-string\">&apos;example.com&apos;</span> })\n<span class=\"hljs-comment\">// Result: &apos;some_cross_domain_cookie=http%3A%2F%2Fmysubdomain.example.com; Domain=example.com; Path=/&apos;</span>\n\n<span class=\"hljs-comment\">// Custom encoding</span>\nres.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;some_cross_domain_cookie&apos;</span>, <span class=\"hljs-string\">&apos;http://mysubdomain.example.com&apos;</span>, { <span class=\"hljs-attr\">domain</span>: <span class=\"hljs-string\">&apos;example.com&apos;</span>, <span class=\"hljs-attr\">encode</span>: <span class=\"hljs-title class_\">String</span> })\n<span class=\"hljs-comment\">// Result: &apos;some_cross_domain_cookie=http://mysubdomain.example.com; Domain=example.com; Path=/;&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1899,1908"}},{"content":"<pre data-lines=\"1909,1910\"><code>maxAge &#x9009;&#x9879;&#x662f;&#x4e00;&#x4e2a;&#x65b9;&#x4fbf;&#x7684;&#x9009;&#x9879;&#xff0c;&#x7528;&#x4e8e;&#x8bbe;&#x7f6e; &quot;expires&quot; &#x76f8;&#x5bf9;&#x4e8e;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#xff08;&#x4ee5;&#x6beb;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff09;&#x3002;&#x4ee5;&#x4e0b;&#x7b49;&#x6548;&#x4e8e;&#x4e0a;&#x9762;&#x7684;&#x7b2c;&#x4e8c;&#x4e2a;&#x793a;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1909,1910"}},{"content":"<pre data-lines=\"1911,1914\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;rememberme&apos;</span>, <span class=\"hljs-string\">&apos;1&apos;</span>, { <span class=\"hljs-attr\">maxAge</span>: <span class=\"hljs-number\">900000</span>, <span class=\"hljs-attr\">httpOnly</span>: <span class=\"hljs-literal\">true</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1911,1914"}},{"content":"<pre data-lines=\"1915,1916\"><code>&#x60a8;&#x53ef;&#x4ee5;&#x5c06;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a; value &#x53c2;&#x6570;&#x4f20;&#x9012;&#xff1b;&#x7136;&#x540e;&#x5c06;&#x5176;&#x5e8f;&#x5217;&#x5316;&#x4e3a; JSON &#x5e76;&#x7531; bodyParser() &#x4e2d;&#x95f4;&#x4ef6;&#x89e3;&#x6790;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1915,1916"}},{"content":"<pre data-lines=\"1917,1921\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;cart&apos;</span>, { <span class=\"hljs-attr\">items</span>: [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>] })\nres.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;cart&apos;</span>, { <span class=\"hljs-attr\">items</span>: [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>] }, { <span class=\"hljs-attr\">maxAge</span>: <span class=\"hljs-number\">900000</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1917,1921"}},{"content":"<pre data-lines=\"1922,1923\"><code>&#x4f7f;&#x7528; cookie-parser &#x4e2d;&#x95f4;&#x4ef6;&#x65f6;&#xff0c;&#x6b64;&#x65b9;&#x6cd5;&#x8fd8;&#x652f;&#x6301;&#x7b7e;&#x540d; cookie&#x3002;&#x53ea;&#x9700;&#x5c06; signed &#x9009;&#x9879;&#x8bbe;&#x7f6e;&#x4e3a; true&#x3002;&#x7136;&#x540e; res.cookie() &#x5c06;&#x4f7f;&#x7528;&#x4f20;&#x9012;&#x7ed9; cookieParser(secret) &#x7684;&#x79d8;&#x5bc6;&#x5bf9;&#x503c;&#x8fdb;&#x884c;&#x7b7e;&#x540d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1922,1923"}},{"content":"<pre data-lines=\"1924,1927\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;tobi&apos;</span>, { <span class=\"hljs-attr\">signed</span>: <span class=\"hljs-literal\">true</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1924,1927"}},{"content":"<pre data-lines=\"1928,1929\"><code>&#x7a0d;&#x540e;&#x60a8;&#x53ef;&#x4ee5;&#x901a;&#x8fc7; req.signedCookies &#x5bf9;&#x8c61;&#x8bbf;&#x95ee;&#x6b64;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1928,1929"}}],"payload":{"tag":"h2","lines":"1867,1868"}},{"content":"res.clearCookie(name [, options])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1932,1935\"><code>&#x6e05;&#x9664; name &#x6307;&#x5b9a;&#x7684; cookie&#x3002;&#x5173;&#x4e8e; options &#x5bf9;&#x8c61;&#x7684;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x89c1; res.cookie()&#x3002;\n\nWeb &#x6d4f;&#x89c8;&#x5668;&#x548c;&#x5176;&#x4ed6;&#x517c;&#x5bb9;&#x7684;&#x5ba2;&#x6237;&#x7aef;&#x53ea;&#x4f1a;&#x5728;&#x7ed9;&#x5b9a;&#x7684; options &#x4e0e;&#x7ed9;&#x5b9a;&#x7ed9; res.cookie() &#x7684;&#x76f8;&#x540c;&#xff08;&#x4e0d;&#x5305;&#x62ec; expires &#x548c; maxAge&#xff09;&#x65f6;&#x6e05;&#x9664; cookie&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1932,1935"}},{"content":"<pre data-lines=\"1936,1940\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">cookie</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;tobi&apos;</span>, { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">&apos;/admin&apos;</span> })\nres.<span class=\"hljs-title function_\">clearCookie</span>(<span class=\"hljs-string\">&apos;name&apos;</span>, { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">&apos;/admin&apos;</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1936,1940"}}],"payload":{"tag":"h2","lines":"1930,1931"}},{"content":"res.download(path [, filename] [, options] [, fn])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1943,1950\"><code>Express v4.16.0 &#x53ca;&#x66f4;&#x9ad8;&#x7248;&#x672c;&#x652f;&#x6301;&#x53ef;&#x9009;&#x7684; options &#x53c2;&#x6570;&#x3002;\n\n&#x5c06; path &#x5904;&#x7684;&#x6587;&#x4ef6;&#x4f5c;&#x4e3a; &quot;attachment&quot; &#x4f20;&#x8f93;&#x3002;&#x901a;&#x5e38;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4f1a;&#x63d0;&#x793a;&#x7528;&#x6237;&#x4e0b;&#x8f7d;&#x3002;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;Content-Disposition &#x6807;&#x5934; &quot;filename=&quot; &#x53c2;&#x6570;&#x6d3e;&#x751f;&#x81ea; path &#x53c2;&#x6570;&#xff0c;&#x4f46;&#x53ef;&#x4ee5;&#x7528; filename &#x53c2;&#x6570;&#x8986;&#x76d6;&#x3002;&#x5982;&#x679c; path &#x662f;&#x76f8;&#x5bf9;&#x7684;&#xff0c;&#x90a3;&#x4e48;&#x5b83;&#x5c06;&#x57fa;&#x4e8e;&#x8fdb;&#x7a0b;&#x7684;&#x5f53;&#x524d;&#x5de5;&#x4f5c;&#x76ee;&#x5f55;&#x3002;\n\n&#x4e0b;&#x8868;&#x63d0;&#x4f9b;&#x4e86;&#x6709;&#x5173; options &#x53c2;&#x6570;&#x7684;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#x3002;\n\nExpress v4.16.0 &#x53ca;&#x66f4;&#x9ad8;&#x7248;&#x672c;&#x652f;&#x6301;&#x53ef;&#x9009;&#x7684; options &#x53c2;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1943,1950"}},{"content":"<pre data-lines=\"1952,1962\"><code data-lines=\"1952,1962\">&#x5c5e;&#x6027;\t&#x63cf;&#x8ff0;\t&#x9ed8;&#x8ba4;\t&#x53ef;&#x7528;&#x6027;\nmaxAge\t&#x8bbe;&#x7f6e; <span class=\"hljs-keyword\">Cache</span><span class=\"hljs-params\">-Control</span> &#x6807;&#x5934;&#x7684; <span class=\"hljs-keyword\">max</span><span class=\"hljs-params\">-age</span> &#x5c5e;&#x6027;&#xff08;&#x4ee5;&#x6beb;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff09;&#x6216; ms &#x683c;&#x5f0f; &#x4e2d;&#x7684;&#x5b57;&#x7b26;&#x4e32;\t<span class=\"hljs-number\">0</span>\t<span class=\"hljs-number\">4.16</span>+\nlastModified\t&#x5c06; Last<span class=\"hljs-params\">-Modified</span> &#x6807;&#x5934;&#x8bbe;&#x7f6e;&#x4e3a;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x4e0a;&#x6587;&#x4ef6;&#x7684;&#x6700;&#x540e;&#x4fee;&#x6539;&#x65e5;&#x671f;&#x3002;&#x8bbe;&#x7f6e; <span class=\"hljs-literal\">false</span> &#x4ee5;&#x7981;&#x7528;&#x5b83;&#x3002;\t&#x542f;&#x7528;\t<span class=\"hljs-number\">4.16</span>+\nheaders\t&#x5305;&#x542b;&#x4e0e;&#x6587;&#x4ef6;&#x4e00;&#x8d77;&#x670d;&#x52a1;&#x7684; HTTP &#x6807;&#x5934;&#x7684;&#x5bf9;&#x8c61;&#x3002;&#x6807;&#x9898; Content<span class=\"hljs-params\">-Disposition</span> &#x5c06;&#x88ab; filename &#x53c2;&#x6570;&#x8986;&#x76d6;&#x3002;\t\t<span class=\"hljs-number\">4.16</span>+\ndotfiles\t&#x63d0;&#x4f9b;&#x70b9;&#x6587;&#x4ef6;&#x7684;&#x9009;&#x9879;&#x3002;&#x53ef;&#x80fd;&#x7684;&#x503c;&#x4e3a; <span class=\"hljs-string\">&quot;allow&quot;</span>&#x3001;<span class=\"hljs-string\">&quot;deny&quot;</span>&#x3001;<span class=\"hljs-string\">&quot;ignore&quot;</span>&#x3002;\t<span class=\"hljs-string\">&quot;ignore&quot;</span>\t<span class=\"hljs-number\">4.16</span>+\nacceptRanges\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x63a5;&#x53d7;&#x8303;&#x56f4;&#x8bf7;&#x6c42;&#x3002;\t<span class=\"hljs-literal\">true</span>\t<span class=\"hljs-number\">4.16</span>+\ncacheControl\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x8bbe;&#x7f6e; <span class=\"hljs-keyword\">Cache</span><span class=\"hljs-params\">-Control</span> &#x54cd;&#x5e94;&#x6807;&#x5934;&#x3002;\t<span class=\"hljs-literal\">true</span>\t<span class=\"hljs-number\">4.16</span>+\nimmutable\t&#x5728; <span class=\"hljs-keyword\">Cache</span><span class=\"hljs-params\">-Control</span> &#x54cd;&#x5e94;&#x6807;&#x5934;&#x4e2d;&#x542f;&#x7528;&#x6216;&#x7981;&#x7528; immutable &#x6307;&#x4ee4;&#x3002;&#x5982;&#x679c;&#x542f;&#x7528;&#xff0c;&#x8fd8;&#x5e94;&#x6307;&#x5b9a; maxAge &#x9009;&#x9879;&#x4ee5;&#x542f;&#x7528;&#x7f13;&#x5b58;&#x3002;immutable &#x6307;&#x4ee4;&#x5c06;&#x963b;&#x6b62;&#x53d7;&#x652f;&#x6301;&#x7684;&#x5ba2;&#x6237;&#x7aef;&#x5728; maxAge &#x9009;&#x9879;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5185;&#x53d1;&#x51fa;&#x6761;&#x4ef6;&#x8bf7;&#x6c42;&#x4ee5;&#x68c0;&#x67e5;&#x6587;&#x4ef6;&#x662f;&#x5426;&#x5df2;&#x66f4;&#x6539;&#x3002;\t<span class=\"hljs-literal\">false</span>\t<span class=\"hljs-number\">4.16</span>+\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1952,1962"}},{"content":"<pre data-lines=\"1963,1964\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x5728;&#x4f20;&#x8f93;&#x5b8c;&#x6210;&#x6216;&#x53d1;&#x751f;&#x9519;&#x8bef;&#x65f6;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570; fn(err)&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5e76;&#x4e14;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;&#x5219;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5fc5;&#x987b;&#x901a;&#x8fc7;&#x7ed3;&#x675f;&#x8bf7;&#x6c42;-&#x54cd;&#x5e94;&#x5faa;&#x73af;&#x6216;&#x5c06;&#x63a7;&#x5236;&#x6743;&#x4f20;&#x9012;&#x7ed9;&#x4e0b;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x6765;&#x663e;&#x5f0f;&#x5904;&#x7406;&#x54cd;&#x5e94;&#x8fc7;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1963,1964"}},{"content":"<pre data-lines=\"1965,1979\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">download</span>(<span class=\"hljs-string\">&apos;/report-12345.pdf&apos;</span>)\n\nres.<span class=\"hljs-title function_\">download</span>(<span class=\"hljs-string\">&apos;/report-12345.pdf&apos;</span>, <span class=\"hljs-string\">&apos;report.pdf&apos;</span>)\n\nres.<span class=\"hljs-title function_\">download</span>(<span class=\"hljs-string\">&apos;/report-12345.pdf&apos;</span>, <span class=\"hljs-string\">&apos;report.pdf&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">err</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">if</span> (err) {\n    <span class=\"hljs-comment\">// Handle error, but keep in mind the response may be partially-sent</span>\n    <span class=\"hljs-comment\">// so check res.headersSent</span>\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// decrement a download credit, etc.</span>\n  }\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1965,1979"}}],"payload":{"tag":"h2","lines":"1941,1942"}},{"content":"res.end([data] [, encoding])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1982,1985\"><code>&#x7ed3;&#x675f;&#x54cd;&#x5e94;&#x8fc7;&#x7a0b;&#x3002;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x6765;&#x81ea; Node &#x6838;&#x5fc3;&#xff0c;&#x7279;&#x522b;&#x662f; http.ServerResponse &#x7684; response.end() &#x65b9;&#x6cd5;&#x3002;\n\n&#x7528;&#x4e8e;&#x5728;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x6570;&#x636e;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x5feb;&#x901f;&#x7ed3;&#x675f;&#x54cd;&#x5e94;&#x3002;&#x5982;&#x679c;&#x60a8;&#x9700;&#x8981;&#x7528;&#x6570;&#x636e;&#x54cd;&#x5e94;&#xff0c;&#x8bf7;&#x6539;&#x7528; res.send() &#x548c; res.json() &#x7b49;&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1982,1985"}},{"content":"<pre data-lines=\"1986,1990\"><code class=\"language-js\">res.end()\nres.status(404).end()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1986,1990"}}],"payload":{"tag":"h2","lines":"1980,1981"}},{"content":"res.format(object)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"1993,1998\"><code>&#x5bf9;&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;&#x7684; Accept HTTP &#x6807;&#x5934;&#xff08;&#x5982;&#x679c;&#x5b58;&#x5728;&#xff09;&#x6267;&#x884c;&#x5185;&#x5bb9;&#x534f;&#x5546;&#x3002;&#x5b83;&#x4f7f;&#x7528; req.accepts() &#x6839;&#x636e;&#x8d28;&#x91cf;&#x503c;&#x6392;&#x5e8f;&#x7684;&#x53ef;&#x63a5;&#x53d7;&#x7c7b;&#x578b;&#x4e3a;&#x8bf7;&#x6c42;&#x9009;&#x62e9;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;&#x5982;&#x679c;&#x672a;&#x6307;&#x5b9a;&#x6807;&#x5934;&#xff0c;&#x5219;&#x8c03;&#x7528;&#x7b2c;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x3002;&#x5f53;&#x6ca1;&#x6709;&#x627e;&#x5230;&#x5339;&#x914d;&#x65f6;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x54cd;&#x5e94; 406 &quot;Not Acceptable&quot;&#xff0c;&#x6216;&#x8005;&#x8c03;&#x7528; default &#x56de;&#x8c03;&#x3002;\n\n&#x9009;&#x62e9;&#x56de;&#x8c03;&#x65f6;&#x8bbe;&#x7f6e; Content-Type &#x54cd;&#x5e94;&#x6807;&#x5934;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; res.set() &#x6216; res.type() &#x7b49;&#x65b9;&#x6cd5;&#x5728;&#x56de;&#x8c03;&#x4e2d;&#x66f4;&#x6539;&#x5b83;&#x3002;\n\n&#x5f53; Accept &#x5934;&#x5b57;&#x6bb5;&#x8bbe;&#x7f6e;&#x4e3a; &quot;application/json&quot; &#x6216; &quot;*/json&quot; &#x65f6;&#xff0c;&#x4ee5;&#x4e0b;&#x793a;&#x4f8b;&#x5c06;&#x54cd;&#x5e94; { &quot;message&quot;: &quot;hey&quot; }&#xff08;&#x4f46;&#x662f;&#x5982;&#x679c;&#x5b83;&#x662f; &quot;*/*&quot;&#xff0c;&#x5219;&#x54cd;&#x5e94;&#x5c06;&#x4e3a; &quot;hey&quot;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1993,1998"}},{"content":"<pre data-lines=\"1999,2019\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">format</span>({\n  <span class=\"hljs-string\">&apos;text/plain&apos;</span> () {\n    res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;hey&apos;</span>)\n  },\n\n  <span class=\"hljs-string\">&apos;text/html&apos;</span> () {\n    res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;&lt;p&gt;hey&lt;/p&gt;&apos;</span>)\n  },\n\n  <span class=\"hljs-string\">&apos;application/json&apos;</span> () {\n    res.<span class=\"hljs-title function_\">send</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">&apos;hey&apos;</span> })\n  },\n\n  <span class=\"hljs-title function_\">default</span> () {\n    <span class=\"hljs-comment\">// log the request and respond with 406</span>\n    res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">406</span>).<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Not Acceptable&apos;</span>)\n  }\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1999,2019"}},{"content":"<pre data-lines=\"2020,2021\"><code>&#x9664;&#x4e86;&#x89c4;&#x8303;&#x5316;&#x7684; MIME &#x7c7b;&#x578b;&#x4e4b;&#x5916;&#xff0c;&#x60a8;&#x8fd8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x6620;&#x5c04;&#x5230;&#x8fd9;&#x4e9b;&#x7c7b;&#x578b;&#x7684;&#x6269;&#x5c55;&#x540d;&#x6765;&#x5b9e;&#x73b0;&#x7a0d;&#x5fae;&#x4e0d;&#x90a3;&#x4e48;&#x5197;&#x957f;&#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2020,2021"}},{"content":"<pre data-lines=\"2022,2037\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">format</span>({\n  <span class=\"hljs-title function_\">text</span> () {\n    res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;hey&apos;</span>)\n  },\n\n  <span class=\"hljs-title function_\">html</span> () {\n    res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;&lt;p&gt;hey&lt;/p&gt;&apos;</span>)\n  },\n\n  <span class=\"hljs-title function_\">json</span> () {\n    res.<span class=\"hljs-title function_\">send</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">&apos;hey&apos;</span> })\n  }\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2022,2037"}}],"payload":{"tag":"h2","lines":"1991,1992"}},{"content":"res.get(field)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2040,2041\"><code>&#x8fd4;&#x56de; field &#x6307;&#x5b9a;&#x7684; HTTP &#x54cd;&#x5e94;&#x6807;&#x5934;&#x3002;&#x5339;&#x914d;&#x4e0d;&#x533a;&#x5206;&#x5927;&#x5c0f;&#x5199;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2040,2041"}},{"content":"<pre data-lines=\"2042,2046\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;Content-Type&apos;</span>)\n<span class=\"hljs-comment\">// =&gt; &quot;text/plain&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2042,2046"}}],"payload":{"tag":"h2","lines":"2038,2039"}},{"content":"res.json([body])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2049,2052\"><code>&#x53d1;&#x9001; JSON &#x54cd;&#x5e94;&#x3002;&#x6b64;&#x65b9;&#x6cd5;&#x53d1;&#x9001;&#x4e00;&#x4e2a;&#x54cd;&#x5e94;&#xff08;&#x5177;&#x6709;&#x6b63;&#x786e;&#x7684;&#x5185;&#x5bb9;&#x7c7b;&#x578b;&#xff09;&#xff0c;&#x8be5;&#x54cd;&#x5e94;&#x662f;&#x4f7f;&#x7528; JSON.stringify() &#x8f6c;&#x6362;&#x4e3a; JSON &#x5b57;&#x7b26;&#x4e32;&#x7684;&#x53c2;&#x6570;&#x3002;\n\n&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f;&#x4efb;&#x4f55; JSON &#x7c7b;&#x578b;&#xff0c;&#x5305;&#x62ec;&#x5bf9;&#x8c61;&#x3001;&#x6570;&#x7ec4;&#x3001;&#x5b57;&#x7b26;&#x4e32;&#x3001;&#x5e03;&#x5c14;&#x503c;&#x3001;&#x6570;&#x5b57;&#x6216; null&#xff0c;&#x60a8;&#x4e5f;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x5b83;&#x6765;&#x5c06;&#x5176;&#x4ed6;&#x503c;&#x8f6c;&#x6362;&#x4e3a; JSON&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2049,2052"}},{"content":"<pre data-lines=\"2053,2058\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">json</span>(<span class=\"hljs-literal\">null</span>)\nres.<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">user</span>: <span class=\"hljs-string\">&apos;tobi&apos;</span> })\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">500</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">&apos;message&apos;</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2053,2058"}}],"payload":{"tag":"h2","lines":"2047,2048"}},{"content":"res.jsonp([body])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2061,2062\"><code>&#x53d1;&#x9001;&#x5e26;&#x6709; JSONP &#x652f;&#x6301;&#x7684; JSON &#x54cd;&#x5e94;&#x3002;&#x6b64;&#x65b9;&#x6cd5;&#x4e0e; res.json() &#x76f8;&#x540c;&#xff0c;&#x53ea;&#x662f;&#x5b83;&#x9009;&#x62e9;&#x52a0;&#x5165; JSONP &#x56de;&#x8c03;&#x652f;&#x6301;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2061,2062"}},{"content":"<pre data-lines=\"2063,2073\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-literal\">null</span>)\n<span class=\"hljs-comment\">// =&gt; callback(null)</span>\n\nres.<span class=\"hljs-title function_\">jsonp</span>({ <span class=\"hljs-attr\">user</span>: <span class=\"hljs-string\">&apos;tobi&apos;</span> })\n<span class=\"hljs-comment\">// =&gt; callback({ &quot;user&quot;: &quot;tobi&quot; })</span>\n\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">500</span>).<span class=\"hljs-title function_\">jsonp</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">&apos;message&apos;</span> })\n<span class=\"hljs-comment\">// =&gt; callback({ &quot;error&quot;: &quot;message&quot; })</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2063,2073"}},{"content":"<pre data-lines=\"2074,2077\"><code>&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;JSONP &#x56de;&#x8c03;&#x540d;&#x79f0;&#x53ea;&#x662f; callback&#x3002;&#x7528; jsonp &#x56de;&#x8c03;&#x540d;&#x79f0; &#x8bbe;&#x7f6e;&#x8986;&#x76d6;&#x5b83;&#x3002;\n\n&#x4ee5;&#x4e0b;&#x662f;&#x4f7f;&#x7528;&#x76f8;&#x540c;&#x4ee3;&#x7801;&#x7684; JSONP &#x54cd;&#x5e94;&#x7684;&#x4e00;&#x4e9b;&#x793a;&#x4f8b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2074,2077"}},{"content":"<pre data-lines=\"2078,2089\"><code class=\"language-js\"><span class=\"hljs-comment\">// ?callback=foo</span>\nres.<span class=\"hljs-title function_\">jsonp</span>({ <span class=\"hljs-attr\">user</span>: <span class=\"hljs-string\">&apos;tobi&apos;</span> })\n<span class=\"hljs-comment\">// =&gt; foo({ &quot;user&quot;: &quot;tobi&quot; })</span>\n\napp.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;jsonp callback name&apos;</span>, <span class=\"hljs-string\">&apos;cb&apos;</span>)\n\n<span class=\"hljs-comment\">// ?cb=foo</span>\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">500</span>).<span class=\"hljs-title function_\">jsonp</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">&apos;message&apos;</span> })\n<span class=\"hljs-comment\">// =&gt; foo({ &quot;error&quot;: &quot;message&quot; })</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2078,2089"}}],"payload":{"tag":"h2","lines":"2059,2060"}},{"content":"res.links(links)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2092,2095\"><code>&#x52a0;&#x5165;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x5c5e;&#x6027;&#x63d0;&#x4f9b;&#x7684; links &#x4ee5;&#x586b;&#x5145;&#x54cd;&#x5e94;&#x7684; Link HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x4ee5;&#x4e0b;&#x8c03;&#x7528;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2092,2095"}},{"content":"<pre data-lines=\"2096,2102\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">links</span>({\n  <span class=\"hljs-attr\">next</span>: <span class=\"hljs-string\">&apos;http://api.example.com/users?page=2&apos;</span>,\n  <span class=\"hljs-attr\">last</span>: <span class=\"hljs-string\">&apos;http://api.example.com/users?page=5&apos;</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2096,2102"}},{"content":"<pre data-lines=\"2103,2104\"><code>&#x4ea7;&#x751f;&#x4ee5;&#x4e0b;&#x7ed3;&#x679c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2103,2104"}},{"content":"<pre data-lines=\"2105,2109\"><code class=\"language-js\">Link: &lt;http://api.example.com/users?page=2&gt;; rel=&quot;next&quot;,\n      &lt;http://api.example.com/users?page=5&gt;; rel=&quot;last&quot;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2105,2109"}}],"payload":{"tag":"h2","lines":"2090,2091"}},{"content":"res.location(path)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2112,2113\"><code>&#x5c06;&#x54cd;&#x5e94; Location HTTP &#x6807;&#x5934;&#x8bbe;&#x7f6e;&#x4e3a;&#x6307;&#x5b9a;&#x7684; path &#x53c2;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2112,2113"}},{"content":"<pre data-lines=\"2114,2119\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">location</span>(<span class=\"hljs-string\">&apos;/foo/bar&apos;</span>)\nres.<span class=\"hljs-title function_\">location</span>(<span class=\"hljs-string\">&apos;http://example.com&apos;</span>)\nres.<span class=\"hljs-title function_\">location</span>(<span class=\"hljs-string\">&apos;back&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2114,2119"}},{"content":"<pre data-lines=\"2120,2125\"><code>&quot;back&quot; &#x7684; path &#x503c;&#x5177;&#x6709;&#x7279;&#x6b8a;&#x542b;&#x4e49;&#xff0c;&#x5b83;&#x6307;&#x7684;&#x662f;&#x8bf7;&#x6c42;&#x7684; Referer &#x6807;&#x5934;&#x4e2d;&#x6307;&#x5b9a;&#x7684; URL&#x3002;&#x5982;&#x679c;&#x672a;&#x6307;&#x5b9a; Referer &#x6807;&#x5934;&#xff0c;&#x5219;&#x5b83;&#x5f15;&#x7528; &quot;/&quot;&#x3002;\n\n&#x5728;&#x5bf9; URL &#x8fdb;&#x884c;&#x7f16;&#x7801;&#x540e;&#xff0c;&#x5982;&#x679c;&#x5c1a;&#x672a;&#x7f16;&#x7801;&#xff0c;Express &#x4f1a;&#x5c06;&#x6307;&#x5b9a;&#x7684; URL &#x5728; Location &#x6807;&#x5934;&#x4e2d;&#x4f20;&#x9012;&#x7ed9;&#x6d4f;&#x89c8;&#x5668;&#xff0c;&#x800c;&#x4e0d;&#x8fdb;&#x884c;&#x4efb;&#x4f55;&#x9a8c;&#x8bc1;&#x3002;\n\n&#x6d4f;&#x89c8;&#x5668;&#x8d1f;&#x8d23;&#x4ece;&#x5f53;&#x524d; URL &#x6216;&#x5f15;&#x7528; URL &#x4ee5;&#x53ca; Location &#x6807;&#x5934;&#x4e2d;&#x6307;&#x5b9a;&#x7684; URL &#x5bfc;&#x51fa;&#x9884;&#x671f; URL&#xff1b;&#x5e76;&#x76f8;&#x5e94;&#x5730;&#x91cd;&#x5b9a;&#x5411;&#x7528;&#x6237;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2120,2125"}}],"payload":{"tag":"h2","lines":"2110,2111"}},{"content":"res.redirect([status,] path)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2128,2129\"><code>&#x91cd;&#x5b9a;&#x5411;&#x5230;&#x4ece;&#x6307;&#x5b9a; path &#x6d3e;&#x751f;&#x7684; URL&#xff0c;&#x6307;&#x5b9a; status&#xff0c;&#x4e00;&#x4e2a;&#x5bf9;&#x5e94;&#x4e8e; HTTP &#x72b6;&#x6001;&#x7801; &#x7684;&#x6b63;&#x6574;&#x6570;&#x3002;&#x5982;&#x679c;&#x672a;&#x6307;&#x5b9a;&#xff0c;&#x5219; status &#x9ed8;&#x8ba4;&#x4e3a; &quot;302 &quot;Found&#x201d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2128,2129"}},{"content":"<pre data-lines=\"2130,2136\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;/foo/bar&apos;</span>)\nres.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;http://example.com&apos;</span>)\nres.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-number\">301</span>, <span class=\"hljs-string\">&apos;http://example.com&apos;</span>)\nres.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;../login&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2130,2136"}},{"content":"<pre data-lines=\"2137,2138\"><code>&#x91cd;&#x5b9a;&#x5411;&#x53ef;&#x4ee5;&#x662f;&#x7528;&#x4e8e;&#x91cd;&#x5b9a;&#x5411;&#x5230;&#x4e0d;&#x540c;&#x7ad9;&#x70b9;&#x7684;&#x5b8c;&#x5168;&#x9650;&#x5b9a; URL&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2137,2138"}},{"content":"<pre data-lines=\"2139,2142\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;http://google.com&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2139,2142"}},{"content":"<pre data-lines=\"2143,2144\"><code>&#x91cd;&#x5b9a;&#x5411;&#x53ef;&#x4ee5;&#x76f8;&#x5bf9;&#x4e8e;&#x4e3b;&#x673a;&#x540d;&#x7684;&#x6839;&#x76ee;&#x5f55;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5982;&#x679c;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4f4d;&#x4e8e; http://example.com/admin/post/new &#x4e0a;&#xff0c;&#x5219;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#x5c06;&#x91cd;&#x5b9a;&#x5411;&#x5230; URL http://example.com/admin&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2143,2144"}},{"content":"<pre data-lines=\"2145,2148\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;/admin&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2145,2148"}},{"content":"<pre data-lines=\"2149,2150\"><code>&#x91cd;&#x5b9a;&#x5411;&#x53ef;&#x4ee5;&#x76f8;&#x5bf9;&#x4e8e;&#x5f53;&#x524d; URL&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x4ece; http://example.com/blog/admin/&#xff08;&#x6ce8;&#x610f;&#x5c3e;&#x90e8;&#x659c;&#x6760;&#xff09;&#x5f00;&#x59cb;&#xff0c;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#x5c06;&#x91cd;&#x5b9a;&#x5411;&#x5230; URL http://example.com/blog/admin/post/new&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2149,2150"}},{"content":"<pre data-lines=\"2151,2154\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;post/new&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2151,2154"}},{"content":"<pre data-lines=\"2155,2160\"><code>&#x4ece; http://example.com/blog/admin &#x91cd;&#x5b9a;&#x5411;&#x5230; post/new&#xff08;&#x6ca1;&#x6709;&#x5c3e;&#x90e8;&#x659c;&#x6760;&#xff09;&#xff0c;&#x5c06;&#x91cd;&#x5b9a;&#x5411;&#x5230; http://example.com/blog/post/new&#x3002;\n\n&#x5982;&#x679c;&#x60a8;&#x53d1;&#x73b0;&#x4e0a;&#x8ff0;&#x884c;&#x4e3a;&#x4ee4;&#x4eba;&#x56f0;&#x60d1;&#xff0c;&#x8bf7;&#x5c06;&#x8def;&#x5f84;&#x6bb5;&#x89c6;&#x4e3a;&#x76ee;&#x5f55;&#xff08;&#x5e26;&#x6709;&#x5c3e;&#x90e8;&#x659c;&#x6760;&#xff09;&#x548c;&#x6587;&#x4ef6;&#xff0c;&#x8fd9;&#x5c06;&#x5f00;&#x59cb;&#x6709;&#x610f;&#x4e49;&#x3002;\n\n&#x8def;&#x5f84;&#x76f8;&#x5173;&#x7684;&#x91cd;&#x5b9a;&#x5411;&#x4e5f;&#x662f;&#x53ef;&#x80fd;&#x7684;&#x3002;&#x5982;&#x679c;&#x60a8;&#x5728; http://example.com/admin/post/new&#xff0c;&#x4ee5;&#x4e0b;&#x5c06;&#x91cd;&#x5b9a;&#x5411;&#x5230; http://example.com/admin/post&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2155,2160"}},{"content":"<pre data-lines=\"2161,2164\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;..&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2161,2164"}},{"content":"<pre data-lines=\"2165,2166\"><code>back &#x91cd;&#x5b9a;&#x5411;&#x5c06;&#x8bf7;&#x6c42;&#x91cd;&#x5b9a;&#x5411;&#x56de; referer&#xff0c;&#x5f53;&#x5f15;&#x7528;&#x8005;&#x4e22;&#x5931;&#x65f6;&#x9ed8;&#x8ba4;&#x4e3a; /&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2165,2166"}},{"content":"<pre data-lines=\"2167,2170\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">redirect</span>(<span class=\"hljs-string\">&apos;back&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2167,2170"}}],"payload":{"tag":"h2","lines":"2126,2127"}},{"content":"res.render(view [, locals] [, callback])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2173,2186\"><code>&#x5448;&#x73b0; view &#x5e76;&#x5c06;&#x5448;&#x73b0;&#x7684; HTML &#x5b57;&#x7b26;&#x4e32;&#x53d1;&#x9001;&#x5230;&#x5ba2;&#x6237;&#x7aef;&#x3002;&#x53ef;&#x9009;&#x53c2;&#x6570;&#xff1a;\n\n- locals&#xff0c;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5176;&#x5c5e;&#x6027;&#x5b9a;&#x4e49;&#x89c6;&#x56fe;&#x7684;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x3002;\n\n- callback&#xff0c;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x5982;&#x679c;&#x63d0;&#x4f9b;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x5c06;&#x8fd4;&#x56de;&#x53ef;&#x80fd;&#x7684;&#x9519;&#x8bef;&#x548c;&#x5448;&#x73b0;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4f46;&#x4e0d;&#x6267;&#x884c;&#x81ea;&#x52a8;&#x54cd;&#x5e94;&#x3002;&#x5f53;&#x53d1;&#x751f;&#x9519;&#x8bef;&#x65f6;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x5728;&#x5185;&#x90e8;&#x8c03;&#x7528; next(err)&#x3002;\n\nview &#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x5b83;&#x662f;&#x8981;&#x6e32;&#x67d3;&#x7684;&#x89c6;&#x56fe;&#x6587;&#x4ef6;&#x7684;&#x6587;&#x4ef6;&#x8def;&#x5f84;&#x3002;&#x8fd9;&#x53ef;&#x4ee5;&#x662f;&#x7edd;&#x5bf9;&#x8def;&#x5f84;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x662f;&#x76f8;&#x5bf9;&#x4e8e; views &#x8bbe;&#x7f6e;&#x7684;&#x8def;&#x5f84;&#x3002;&#x5982;&#x679c;&#x8def;&#x5f84;&#x4e0d;&#x5305;&#x542b;&#x6587;&#x4ef6;&#x6269;&#x5c55;&#x540d;&#xff0c;&#x5219; view engine &#x8bbe;&#x7f6e;&#x786e;&#x5b9a;&#x6587;&#x4ef6;&#x6269;&#x5c55;&#x540d;&#x3002;&#x5982;&#x679c;&#x8def;&#x5f84;&#x786e;&#x5b9e;&#x5305;&#x542b;&#x6587;&#x4ef6;&#x6269;&#x5c55;&#x540d;&#xff0c;&#x90a3;&#x4e48; Express &#x5c06;&#x52a0;&#x8f7d;&#x6307;&#x5b9a;&#x6a21;&#x677f;&#x5f15;&#x64ce;&#x7684;&#x6a21;&#x5757;&#xff08;&#x901a;&#x8fc7; require()&#xff09;&#x5e76;&#x4f7f;&#x7528;&#x52a0;&#x8f7d;&#x6a21;&#x5757;&#x7684; __express &#x51fd;&#x6570;&#x6e32;&#x67d3;&#x5b83;&#x3002;\n\n&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; &#x4f7f;&#x7528; Express &#x6a21;&#x677f;&#x5f15;&#x64ce;&#x3002;\n\n&#x6ce8;&#x610f;&#xff1a;view &#x53c2;&#x6570;&#x6267;&#x884c;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x64cd;&#x4f5c;&#xff0c;&#x4f8b;&#x5982;&#x4ece;&#x78c1;&#x76d8;&#x8bfb;&#x53d6;&#x6587;&#x4ef6;&#x548c;&#x8bc4;&#x4f30; Node.js &#x6a21;&#x5757;&#xff0c;&#x56e0;&#x6b64;&#x51fa;&#x4e8e;&#x5b89;&#x5168;&#x539f;&#x56e0;&#x4e0d;&#x5e94;&#x5305;&#x542b;&#x6765;&#x81ea;&#x6700;&#x7ec8;&#x7528;&#x6237;&#x7684;&#x8f93;&#x5165;&#x3002;\n\n&#x5c40;&#x90e8;&#x53d8;&#x91cf; cache &#x542f;&#x7528;&#x89c6;&#x56fe;&#x7f13;&#x5b58;&#x3002;&#x8bbe;&#x7f6e;&#x4e3a;true&#xff0c;&#x5f00;&#x53d1;&#x65f6;&#x7f13;&#x5b58;&#x89c6;&#x56fe;&#xff1b;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x89c6;&#x56fe;&#x7f13;&#x5b58;&#x5728;&#x751f;&#x4ea7;&#x4e2d;&#x542f;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2173,2186"}},{"content":"<pre data-lines=\"2187,2201\"><code class=\"language-js\"><span class=\"hljs-comment\">// send the rendered view to the client</span>\nres.<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-string\">&apos;index&apos;</span>)\n\n<span class=\"hljs-comment\">// if a callback is specified, the rendered HTML string has to be sent explicitly</span>\nres.<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-string\">&apos;index&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, html</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(html)\n})\n\n<span class=\"hljs-comment\">// pass a local variable to the view</span>\nres.<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-string\">&apos;user&apos;</span>, { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;Tobi&apos;</span> }, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, html</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ...</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2187,2201"}}],"payload":{"tag":"h2","lines":"2171,2172"}},{"content":"res.send([body])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2205,2208\"><code>&#x53d1;&#x9001; HTTP &#x54cd;&#x5e94;&#x3002;\n\nbody &#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f; Buffer &#x5bf9;&#x8c61;&#x3001;String&#x3001;&#x5bf9;&#x8c61;&#x3001;Boolean &#x6216; Array&#x3002;&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2205,2208"}},{"content":"<pre data-lines=\"2209,2216\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-title class_\">Buffer</span>.<span class=\"hljs-title function_\">from</span>(<span class=\"hljs-string\">&apos;whoop&apos;</span>))\nres.<span class=\"hljs-title function_\">send</span>({ <span class=\"hljs-attr\">some</span>: <span class=\"hljs-string\">&apos;json&apos;</span> })\nres.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;&lt;p&gt;some html&lt;/p&gt;&apos;</span>)\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">404</span>).<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Sorry, we cannot find that!&apos;</span>)\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">500</span>).<span class=\"hljs-title function_\">send</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">&apos;something blew up&apos;</span> })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2209,2216"}},{"content":"<pre data-lines=\"2217,2220\"><code>&#x6b64;&#x65b9;&#x6cd5;&#x5bf9;&#x7b80;&#x5355;&#x7684;&#x975e;&#x6d41;&#x5f0f;&#x54cd;&#x5e94;&#x6267;&#x884c;&#x8bb8;&#x591a;&#x6709;&#x7528;&#x7684;&#x4efb;&#x52a1;&#xff1a;&#x4f8b;&#x5982;&#xff0c;&#x5b83;&#x81ea;&#x52a8;&#x5206;&#x914d; Content-Length HTTP &#x54cd;&#x5e94;&#x5934;&#x5b57;&#x6bb5;&#xff08;&#x9664;&#x975e;&#x4e4b;&#x524d;&#x5b9a;&#x4e49;&#xff09;&#x5e76;&#x63d0;&#x4f9b;&#x81ea;&#x52a8; HEAD &#x548c; HTTP &#x7f13;&#x5b58;&#x65b0;&#x9c9c;&#x5ea6;&#x652f;&#x6301;&#x3002;\n\n&#x5f53;&#x53c2;&#x6570;&#x4e3a; Buffer &#x5bf9;&#x8c61;&#x65f6;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x5c06; Content-Type &#x54cd;&#x5e94;&#x5934;&#x5b57;&#x6bb5;&#x8bbe;&#x7f6e;&#x4e3a; &quot;application/octet-stream&quot;&#xff0c;&#x9664;&#x975e;&#x4e4b;&#x524d;&#x5b9a;&#x4e49;&#x5982;&#x4e0b;&#x6240;&#x793a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2217,2220"}},{"content":"<pre data-lines=\"2221,2225\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;Content-Type&apos;</span>, <span class=\"hljs-string\">&apos;text/html&apos;</span>)\nres.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-title class_\">Buffer</span>.<span class=\"hljs-title function_\">from</span>(<span class=\"hljs-string\">&apos;&lt;p&gt;some html&lt;/p&gt;&apos;</span>))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2221,2225"}},{"content":"<pre data-lines=\"2226,2227\"><code>&#x5f53;&#x53c2;&#x6570;&#x4e3a; String &#x65f6;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x5c06; Content-Type &#x8bbe;&#x7f6e;&#x4e3a; &quot;text/html&quot;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2226,2227"}},{"content":"<pre data-lines=\"2228,2231\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;&lt;p&gt;some html&lt;/p&gt;&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2228,2231"}},{"content":"<pre data-lines=\"2232,2233\"><code>&#x5f53;&#x53c2;&#x6570;&#x4e3a; Array &#x6216; Object &#x65f6;&#xff0c;Express &#x4ee5; JSON &#x8868;&#x793a;&#x5f62;&#x5f0f;&#x54cd;&#x5e94;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2232,2233"}},{"content":"<pre data-lines=\"2234,2238\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">send</span>({ <span class=\"hljs-attr\">user</span>: <span class=\"hljs-string\">&apos;tobi&apos;</span> })\nres.<span class=\"hljs-title function_\">send</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2234,2238"}}],"payload":{"tag":"h2","lines":"2203,2204"}},{"content":"res.sendFile(path [, options] [, fn])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2241,2250\"><code>Express v4.8.0 &#x53ca;&#x66f4;&#x9ad8;&#x7248;&#x672c;&#x652f;&#x6301; res.sendFile()&#x3002;\n\n&#x5728;&#x7ed9;&#x5b9a;&#x7684; path &#x4f20;&#x8f93;&#x6587;&#x4ef6;&#x3002;&#x6839;&#x636e;&#x6587;&#x4ef6;&#x540d;&#x7684;&#x6269;&#x5c55;&#x540d;&#x8bbe;&#x7f6e; Content-Type &#x54cd;&#x5e94; HTTP &#x6807;&#x5934;&#x5b57;&#x6bb5;&#x3002;&#x9664;&#x975e;&#x5728;&#x9009;&#x9879;&#x5bf9;&#x8c61;&#x4e2d;&#x8bbe;&#x7f6e;&#x4e86; root &#x9009;&#x9879;&#xff0c;&#x5426;&#x5219; path &#x5fc5;&#x987b;&#x662f;&#x6587;&#x4ef6;&#x7684;&#x7edd;&#x5bf9;&#x8def;&#x5f84;&#x3002;\n\n&#x6b64; API &#x63d0;&#x4f9b;&#x5bf9;&#x6b63;&#x5728;&#x8fd0;&#x884c;&#x7684;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x4e0a;&#x7684;&#x6570;&#x636e;&#x7684;&#x8bbf;&#x95ee;&#x3002;&#x786e;&#x4fdd; (a) &#x5c06; path &#x53c2;&#x6570;&#x6784;&#x9020;&#x4e3a;&#x7edd;&#x5bf9;&#x8def;&#x5f84;&#x7684;&#x65b9;&#x5f0f;&#x5728;&#x5305;&#x542b;&#x7528;&#x6237;&#x8f93;&#x5165;&#x65f6;&#x662f;&#x5b89;&#x5168;&#x7684;&#xff0c;&#x6216;&#x8005; (b) &#x5c06; root &#x9009;&#x9879;&#x8bbe;&#x7f6e;&#x4e3a;&#x76ee;&#x5f55;&#x7684;&#x7edd;&#x5bf9;&#x8def;&#x5f84;&#x4ee5;&#x5305;&#x542b;&#x5176;&#x4e2d;&#x7684;&#x8bbf;&#x95ee;&#x3002;\n\n&#x5f53;&#x63d0;&#x4f9b; root &#x9009;&#x9879;&#x65f6;&#xff0c;&#x5141;&#x8bb8; path &#x53c2;&#x6570;&#x4e3a;&#x76f8;&#x5bf9;&#x8def;&#x5f84;&#xff0c;&#x5305;&#x62ec;&#x5305;&#x542b; ..&#x3002;Express &#x5c06;&#x9a8c;&#x8bc1;&#x4f5c;&#x4e3a; path &#x63d0;&#x4f9b;&#x7684;&#x76f8;&#x5bf9;&#x8def;&#x5f84;&#x5c06;&#x5728;&#x7ed9;&#x5b9a;&#x7684; root &#x9009;&#x9879;&#x4e2d;&#x89e3;&#x6790;&#x3002;\n\n&#x4e0b;&#x8868;&#x63d0;&#x4f9b;&#x4e86;&#x6709;&#x5173; options &#x53c2;&#x6570;&#x7684;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2241,2250"}},{"content":"<pre data-lines=\"2251,2262\"><code data-lines=\"2251,2262\">&#x5c5e;&#x6027;\t&#x63cf;&#x8ff0;\t&#x9ed8;&#x8ba4;\t&#x53ef;&#x7528;&#x6027;\nmaxAge\t&#x8bbe;&#x7f6e; <span class=\"hljs-keyword\">Cache</span><span class=\"hljs-params\">-Control</span> &#x6807;&#x5934;&#x7684; <span class=\"hljs-keyword\">max</span><span class=\"hljs-params\">-age</span> &#x5c5e;&#x6027;&#xff08;&#x4ee5;&#x6beb;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff09;&#x6216; ms &#x683c;&#x5f0f; &#x4e2d;&#x7684;&#x5b57;&#x7b26;&#x4e32;\t<span class=\"hljs-number\">0</span>\t\nroot\t&#x76f8;&#x5bf9;&#x6587;&#x4ef6;&#x540d;&#x7684;&#x6839;&#x76ee;&#x5f55;&#x3002;\t\t\nlastModified\t&#x5c06; Last<span class=\"hljs-params\">-Modified</span> &#x6807;&#x5934;&#x8bbe;&#x7f6e;&#x4e3a;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x4e0a;&#x6587;&#x4ef6;&#x7684;&#x6700;&#x540e;&#x4fee;&#x6539;&#x65e5;&#x671f;&#x3002;&#x8bbe;&#x7f6e; <span class=\"hljs-literal\">false</span> &#x4ee5;&#x7981;&#x7528;&#x5b83;&#x3002;\t&#x542f;&#x7528;\t<span class=\"hljs-number\">4.9</span><span class=\"hljs-number\">.0</span>+\nheaders\t&#x5305;&#x542b;&#x4e0e;&#x6587;&#x4ef6;&#x4e00;&#x8d77;&#x670d;&#x52a1;&#x7684; HTTP &#x6807;&#x5934;&#x7684;&#x5bf9;&#x8c61;&#x3002;\t\t\ndotfiles\t&#x63d0;&#x4f9b;&#x70b9;&#x6587;&#x4ef6;&#x7684;&#x9009;&#x9879;&#x3002;&#x53ef;&#x80fd;&#x7684;&#x503c;&#x4e3a; <span class=\"hljs-string\">&quot;allow&quot;</span>&#x3001;<span class=\"hljs-string\">&quot;deny&quot;</span>&#x3001;<span class=\"hljs-string\">&quot;ignore&quot;</span>&#x3002;\t<span class=\"hljs-string\">&quot;ignore&quot;</span>\t \nacceptRanges\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x63a5;&#x53d7;&#x8303;&#x56f4;&#x8bf7;&#x6c42;&#x3002;\t<span class=\"hljs-literal\">true</span>\t<span class=\"hljs-number\">4.14</span>+\ncacheControl\t&#x542f;&#x7528;&#x6216;&#x7981;&#x7528;&#x8bbe;&#x7f6e; <span class=\"hljs-keyword\">Cache</span><span class=\"hljs-params\">-Control</span> &#x54cd;&#x5e94;&#x6807;&#x5934;&#x3002;\t<span class=\"hljs-literal\">true</span>\t<span class=\"hljs-number\">4.14</span>+\nimmutable\t&#x5728; <span class=\"hljs-keyword\">Cache</span><span class=\"hljs-params\">-Control</span> &#x54cd;&#x5e94;&#x6807;&#x5934;&#x4e2d;&#x542f;&#x7528;&#x6216;&#x7981;&#x7528; immutable &#x6307;&#x4ee4;&#x3002;&#x5982;&#x679c;&#x542f;&#x7528;&#xff0c;&#x8fd8;&#x5e94;&#x6307;&#x5b9a; maxAge &#x9009;&#x9879;&#x4ee5;&#x542f;&#x7528;&#x7f13;&#x5b58;&#x3002;immutable &#x6307;&#x4ee4;&#x5c06;&#x963b;&#x6b62;&#x53d7;&#x652f;&#x6301;&#x7684;&#x5ba2;&#x6237;&#x7aef;&#x5728; maxAge &#x9009;&#x9879;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#x5185;&#x53d1;&#x51fa;&#x6761;&#x4ef6;&#x8bf7;&#x6c42;&#x4ee5;&#x68c0;&#x67e5;&#x6587;&#x4ef6;&#x662f;&#x5426;&#x5df2;&#x66f4;&#x6539;&#x3002;\t<span class=\"hljs-literal\">false</span>\t<span class=\"hljs-number\">4.16</span>+\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2251,2262"}},{"content":"<pre data-lines=\"2263,2266\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x5728;&#x4f20;&#x8f93;&#x5b8c;&#x6210;&#x6216;&#x53d1;&#x751f;&#x9519;&#x8bef;&#x65f6;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570; fn(err)&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5e76;&#x4e14;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;&#x5219;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5fc5;&#x987b;&#x901a;&#x8fc7;&#x7ed3;&#x675f;&#x8bf7;&#x6c42;-&#x54cd;&#x5e94;&#x5faa;&#x73af;&#x6216;&#x5c06;&#x63a7;&#x5236;&#x6743;&#x4f20;&#x9012;&#x7ed9;&#x4e0b;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x6765;&#x663e;&#x5f0f;&#x5904;&#x7406;&#x54cd;&#x5e94;&#x8fc7;&#x7a0b;&#x3002;\n\n&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x4f7f;&#x7528; res.sendFile &#x53ca;&#x5176;&#x6240;&#x6709;&#x53c2;&#x6570;&#x7684;&#x793a;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2263,2266"}},{"content":"<pre data-lines=\"2267,2288\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/file/:name&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> options = {\n    <span class=\"hljs-attr\">root</span>: path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>),\n    <span class=\"hljs-attr\">dotfiles</span>: <span class=\"hljs-string\">&apos;deny&apos;</span>,\n    <span class=\"hljs-attr\">headers</span>: {\n      <span class=\"hljs-string\">&apos;x-timestamp&apos;</span>: <span class=\"hljs-title class_\">Date</span>.<span class=\"hljs-title function_\">now</span>(),\n      <span class=\"hljs-string\">&apos;x-sent&apos;</span>: <span class=\"hljs-literal\">true</span>\n    }\n  }\n\n  <span class=\"hljs-keyword\">const</span> fileName = req.<span class=\"hljs-property\">params</span>.<span class=\"hljs-property\">name</span>\n  res.<span class=\"hljs-title function_\">sendFile</span>(fileName, options, <span class=\"hljs-function\">(<span class=\"hljs-params\">err</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (err) {\n      <span class=\"hljs-title function_\">next</span>(err)\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Sent:&apos;</span>, fileName)\n    }\n  })\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2267,2288"}},{"content":"<pre data-lines=\"2289,2290\"><code>&#x4ee5;&#x4e0b;&#x793a;&#x4f8b;&#x8bf4;&#x660e;&#x4e86;&#x4f7f;&#x7528; res.sendFile &#x4e3a;&#x670d;&#x52a1;&#x6587;&#x4ef6;&#x63d0;&#x4f9b;&#x7ec6;&#x7c92;&#x5ea6;&#x652f;&#x6301;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2289,2290"}},{"content":"<pre data-lines=\"2291,2305\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:uid/photos/:file&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> uid = req.<span class=\"hljs-property\">params</span>.<span class=\"hljs-property\">uid</span>\n  <span class=\"hljs-keyword\">const</span> file = req.<span class=\"hljs-property\">params</span>.<span class=\"hljs-property\">file</span>\n\n  req.<span class=\"hljs-property\">user</span>.<span class=\"hljs-title function_\">mayViewFilesFrom</span>(uid, <span class=\"hljs-function\">(<span class=\"hljs-params\">yes</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (yes) {\n      res.<span class=\"hljs-title function_\">sendFile</span>(<span class=\"hljs-string\">`/uploads/<span class=\"hljs-subst\">&#x24;{uid}</span>/<span class=\"hljs-subst\">&#x24;{file}</span>`</span>)\n    } <span class=\"hljs-keyword\">else</span> {\n      res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">403</span>).<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&quot;Sorry! You can&apos;t see that.&quot;</span>)\n    }\n  })\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2291,2305"}},{"content":"<pre data-lines=\"2306,2307\"><code>&#x5982;&#x9700;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#xff0c;&#x6216;&#x8005;&#x5982;&#x679c;&#x60a8;&#x6709;&#x95ee;&#x9898;&#x6216;&#x7591;&#x8651;&#xff0c;&#x8bf7;&#x53c2;&#x9605; send&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2306,2307"}}],"payload":{"tag":"h2","lines":"2239,2240"}},{"content":"res.sendStatus(statusCode)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2310,2311\"><code>&#x5c06;&#x54cd;&#x5e94; HTTP &#x72b6;&#x6001;&#x4ee3;&#x7801;&#x8bbe;&#x7f6e;&#x4e3a; statusCode&#xff0c;&#x5e76;&#x5c06;&#x6ce8;&#x518c;&#x7684;&#x72b6;&#x6001;&#x6d88;&#x606f;&#x4f5c;&#x4e3a;&#x6587;&#x672c;&#x54cd;&#x5e94;&#x6b63;&#x6587;&#x53d1;&#x9001;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;&#x672a;&#x77e5;&#x72b6;&#x6001;&#x4ee3;&#x7801;&#xff0c;&#x5219;&#x54cd;&#x5e94;&#x6b63;&#x6587;&#x5c06;&#x53ea;&#x662f;&#x4ee3;&#x7801;&#x7f16;&#x53f7;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2310,2311"}},{"content":"<pre data-lines=\"2312,2315\"><code class=\"language-js\">res.sendStatus(404)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2312,2315"}},{"content":"<pre data-lines=\"2316,2319\"><code>&#x5f53; res.statusCode &#x8bbe;&#x7f6e;&#x4e3a;&#x65e0;&#x6548;&#x7684; HTTP &#x72b6;&#x6001;&#x4ee3;&#x7801;&#xff08;&#x8d85;&#x51fa;&#x8303;&#x56f4; 100 &#x5230; 599&#xff09;&#x65f6;&#xff0c;&#x67d0;&#x4e9b;&#x7248;&#x672c;&#x7684; Node.js &#x4f1a;&#x629b;&#x51fa;&#x5f02;&#x5e38;&#x3002;&#x8bf7;&#x67e5;&#x9605; HTTP &#x670d;&#x52a1;&#x5668;&#x6587;&#x6863;&#x4ee5;&#x4e86;&#x89e3;&#x6240;&#x4f7f;&#x7528;&#x7684; Node.js &#x7248;&#x672c;&#x3002;\n\n&#x66f4;&#x591a;&#x5173;&#x4e8e; HTTP &#x72b6;&#x6001;&#x7801;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2316,2319"}}],"payload":{"tag":"h2","lines":"2308,2309"}},{"content":"res.set(field [, value])&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2323,2324\"><code>&#x5c06;&#x54cd;&#x5e94;&#x7684; HTTP &#x6807;&#x5934; field &#x8bbe;&#x7f6e;&#x4e3a; value&#x3002;&#x8981;&#x4e00;&#x6b21;&#x8bbe;&#x7f6e;&#x591a;&#x4e2a;&#x5b57;&#x6bb5;&#xff0c;&#x8bf7;&#x5c06;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x9012;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2323,2324"}},{"content":"<pre data-lines=\"2325,2334\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;Content-Type&apos;</span>, <span class=\"hljs-string\">&apos;text/plain&apos;</span>)\n\nres.<span class=\"hljs-title function_\">set</span>({\n  <span class=\"hljs-string\">&apos;Content-Type&apos;</span>: <span class=\"hljs-string\">&apos;text/plain&apos;</span>,\n  <span class=\"hljs-string\">&apos;Content-Length&apos;</span>: <span class=\"hljs-string\">&apos;123&apos;</span>,\n  <span class=\"hljs-title class_\">ETag</span>: <span class=\"hljs-string\">&apos;12345&apos;</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2325,2334"}},{"content":"<pre data-lines=\"2335,2336\"><code>&#x522b;&#x540d;&#x4e3a; res.header(field [, value])&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2335,2336"}}],"payload":{"tag":"h2","lines":"2321,2322"}},{"content":"res.status(code)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2339,2340\"><code>&#x8bbe;&#x7f6e;&#x54cd;&#x5e94;&#x7684; HTTP &#x72b6;&#x6001;&#x3002;&#x5b83;&#x662f; Node &#x7684; response.statusCode &#x7684;&#x53ef;&#x94fe;&#x63a5;&#x522b;&#x540d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2339,2340"}},{"content":"<pre data-lines=\"2341,2346\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">403</span>).<span class=\"hljs-title function_\">end</span>()\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">400</span>).<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Bad Request&apos;</span>)\nres.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">404</span>).<span class=\"hljs-title function_\">sendFile</span>(<span class=\"hljs-string\">&apos;/absolute/path/to/404.png&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2341,2346"}}],"payload":{"tag":"h2","lines":"2337,2338"}},{"content":"res.type(type)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2349,2350\"><code>&#x5c06; Content-Type HTTP &#x6807;&#x5934;&#x8bbe;&#x7f6e;&#x4e3a;&#x7531;&#x6307;&#x5b9a; type &#x786e;&#x5b9a;&#x7684; MIME &#x7c7b;&#x578b;&#x3002;&#x5982;&#x679c; type &#x5305;&#x542b; &quot;/&quot; &#x5b57;&#x7b26;&#xff0c;&#x5219;&#x5b83;&#x5c06; Content-Type &#x8bbe;&#x7f6e;&#x4e3a; type &#x7684;&#x786e;&#x5207;&#x503c;&#xff0c;&#x5426;&#x5219;&#x5047;&#x5b9a;&#x5b83;&#x662f;&#x6587;&#x4ef6;&#x6269;&#x5c55;&#x540d;&#x5e76;&#x4f7f;&#x7528; express.static.mime.lookup() &#x65b9;&#x6cd5;&#x5728;&#x6620;&#x5c04;&#x4e2d;&#x67e5;&#x627e; MIME &#x7c7b;&#x578b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2349,2350"}},{"content":"<pre data-lines=\"2351,2358\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">type</span>(<span class=\"hljs-string\">&apos;.html&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;text/html&apos;</span>\nres.<span class=\"hljs-title function_\">type</span>(<span class=\"hljs-string\">&apos;html&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;text/html&apos;</span>\nres.<span class=\"hljs-title function_\">type</span>(<span class=\"hljs-string\">&apos;json&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;application/json&apos;</span>\nres.<span class=\"hljs-title function_\">type</span>(<span class=\"hljs-string\">&apos;application/json&apos;</span>) <span class=\"hljs-comment\">// =&gt; &apos;application/json&apos;</span>\nres.<span class=\"hljs-title function_\">type</span>(<span class=\"hljs-string\">&apos;png&apos;</span>) <span class=\"hljs-comment\">// =&gt; image/png:</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2351,2358"}}],"payload":{"tag":"h2","lines":"2347,2348"}},{"content":"res.vary(field)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2361,2362\"><code>&#x5c06;&#x8be5;&#x5b57;&#x6bb5;&#x6dfb;&#x52a0;&#x5230; Vary &#x54cd;&#x5e94;&#x6807;&#x5934;&#xff08;&#x5982;&#x679c;&#x5c1a;&#x4e0d;&#x5b58;&#x5728;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2361,2362"}},{"content":"<pre data-lines=\"2363,2366\"><code class=\"language-js\">res.<span class=\"hljs-title function_\">vary</span>(<span class=\"hljs-string\">&apos;User-Agent&apos;</span>).<span class=\"hljs-title function_\">render</span>(<span class=\"hljs-string\">&apos;docs&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2363,2366"}},{"content":"<pre data-lines=\"2369,2396\"><code data-lines=\"2369,2396\">res<span class=\"hljs-selector-class\">.app</span>\nres<span class=\"hljs-selector-class\">.headersSent</span>\nres<span class=\"hljs-selector-class\">.locals</span>\nres<span class=\"hljs-selector-class\">.req</span>\nres<span class=\"hljs-selector-class\">.append</span>(field <span class=\"hljs-selector-attr\">[, value]</span>)\nres<span class=\"hljs-selector-class\">.attachment</span>(<span class=\"hljs-selector-attr\">[filename]</span>)\nres<span class=\"hljs-selector-class\">.cookie</span>(name, value <span class=\"hljs-selector-attr\">[, options]</span>)\nres<span class=\"hljs-selector-class\">.clearCookie</span>(name <span class=\"hljs-selector-attr\">[, options]</span>)\nres<span class=\"hljs-selector-class\">.download</span>(<span class=\"hljs-selector-tag\">path</span> <span class=\"hljs-selector-attr\">[, filename]</span> <span class=\"hljs-selector-attr\">[, options]</span> <span class=\"hljs-selector-attr\">[, fn]</span>)\nres<span class=\"hljs-selector-class\">.end</span>(<span class=\"hljs-selector-attr\">[data]</span> <span class=\"hljs-selector-attr\">[, encoding]</span>)\nres<span class=\"hljs-selector-class\">.format</span>(object)\nres<span class=\"hljs-selector-class\">.get</span>(field)\nres<span class=\"hljs-selector-class\">.json</span>(<span class=\"hljs-selector-attr\">[body]</span>)\nres<span class=\"hljs-selector-class\">.jsonp</span>(<span class=\"hljs-selector-attr\">[body]</span>)\nres<span class=\"hljs-selector-class\">.links</span>(links)\nres<span class=\"hljs-selector-class\">.location</span>(path)\nres<span class=\"hljs-selector-class\">.redirect</span>(<span class=\"hljs-selector-attr\">[status,]</span> path)\nres<span class=\"hljs-selector-class\">.render</span>(view <span class=\"hljs-selector-attr\">[, locals]</span> <span class=\"hljs-selector-attr\">[, callback]</span>)\nres<span class=\"hljs-selector-class\">.send</span>(<span class=\"hljs-selector-attr\">[body]</span>)\nres<span class=\"hljs-selector-class\">.sendFile</span>(<span class=\"hljs-selector-tag\">path</span> <span class=\"hljs-selector-attr\">[, options]</span> <span class=\"hljs-selector-attr\">[, fn]</span>)\nres<span class=\"hljs-selector-class\">.sendStatus</span>(statusCode)\nres<span class=\"hljs-selector-class\">.set</span>(field <span class=\"hljs-selector-attr\">[, value]</span>)\nres<span class=\"hljs-selector-class\">.status</span>(code)\nres<span class=\"hljs-selector-class\">.type</span>(type)\nres<span class=\"hljs-selector-class\">.vary</span>(field)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2369,2396"}}],"payload":{"tag":"h2","lines":"2359,2360"}}],"payload":{"tag":"h1","lines":"1747,1748"}},{"content":"&#x8def;&#x7531;","children":[{"content":"<pre data-lines=\"2402,2409\"><code data-lines=\"2402,2409\">router<span class=\"hljs-selector-class\">.all</span>(<span class=\"hljs-selector-tag\">path</span>, <span class=\"hljs-selector-attr\">[callback, ...]</span> callback)\nrouter<span class=\"hljs-selector-class\">.METHOD</span>(<span class=\"hljs-selector-tag\">path</span>, <span class=\"hljs-selector-attr\">[callback, ...]</span> callback)\nrouter<span class=\"hljs-selector-class\">.param</span>(name, callback)\nrouter<span class=\"hljs-selector-class\">.route</span>(path)\nrouter<span class=\"hljs-selector-class\">.use</span>(<span class=\"hljs-selector-attr\">[path]</span>, <span class=\"hljs-selector-attr\">[function, ...]</span> function)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2402,2409"}},{"content":"&#x8def;&#x7531;&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2412,2419\"><code>router &#x5bf9;&#x8c61;&#x662f;&#x4e2d;&#x95f4;&#x4ef6;&#x548c;&#x8def;&#x7531;&#x7684;&#x9694;&#x79bb;&#x5b9e;&#x4f8b;&#x3002;&#x4f60;&#x53ef;&#x4ee5;&#x628a;&#x5b83;&#x60f3;&#x8c61;&#x6210;&#x4e00;&#x4e2a;&#x53ea;&#x80fd;&#x6267;&#x884c;&#x4e2d;&#x95f4;&#x4ef6;&#x548c;&#x8def;&#x7531;&#x529f;&#x80fd;&#x7684; &quot;mini-application,&quot;&#x3002;&#x6bcf;&#x4e2a; Express &#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x90fd;&#x6709;&#x4e00;&#x4e2a;&#x5185;&#x7f6e;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x8def;&#x7531;&#x3002;\n\n&#x8def;&#x7531;&#x7684;&#x884c;&#x4e3a;&#x7c7b;&#x4f3c;&#x4e8e;&#x4e2d;&#x95f4;&#x4ef6;&#x672c;&#x8eab;&#xff0c;&#x56e0;&#x6b64;&#x60a8;&#x53ef;&#x4ee5;&#x5c06;&#x5176;&#x7528;&#x4f5c; app.use() &#x7684;&#x53c2;&#x6570;&#x6216;&#x7528;&#x4f5c;&#x53e6;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x7684; use() &#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#x3002;\n\n&#x9876;&#x7ea7; express &#x5bf9;&#x8c61;&#x5177;&#x6709;&#x521b;&#x5efa;&#x65b0; router &#x5bf9;&#x8c61;&#x7684; Router() &#x65b9;&#x6cd5;&#x3002;\n\n&#x4e00;&#x65e6;&#x4f60;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x5bf9;&#x8c61;&#xff0c;&#x4f60;&#x5c31;&#x53ef;&#x4ee5;&#x50cf;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e00;&#x6837;&#x5411;&#x5b83;&#x6dfb;&#x52a0;&#x4e2d;&#x95f4;&#x4ef6;&#x548c; HTTP &#x65b9;&#x6cd5;&#x8def;&#x7531;&#xff08;&#x4f8b;&#x5982; get&#x3001;put&#x3001;post &#x7b49;&#xff09;&#x3002;&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2412,2419"}},{"content":"<pre data-lines=\"2420,2433\"><code class=\"language-js\"><span class=\"hljs-comment\">// invoked for any requests passed to this router</span>\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// .. some logic here .. like any other middleware</span>\n  <span class=\"hljs-title function_\">next</span>()\n})\n\n<span class=\"hljs-comment\">// will handle any request that ends in /events</span>\n<span class=\"hljs-comment\">// depends on where the router is &quot;use()&apos;d&quot;</span>\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/events&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ..</span>\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2420,2433"}},{"content":"<pre data-lines=\"2434,2435\"><code>&#x7136;&#x540e;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x5c06;&#x8def;&#x7531;&#x7528;&#x4e8e;&#x7279;&#x5b9a;&#x7684;&#x6839; URL&#xff0c;&#x4ee5;&#x8fd9;&#x79cd;&#x65b9;&#x5f0f;&#x5c06;&#x60a8;&#x7684;&#x8def;&#x7531;&#x5206;&#x6210;&#x6587;&#x4ef6;&#x751a;&#x81f3;&#x8ff7;&#x4f60;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2434,2435"}},{"content":"<pre data-lines=\"2436,2440\"><code class=\"language-js\"><span class=\"hljs-comment\">// only requests to /calendar/* will be sent to our &quot;router&quot;</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/calendar&apos;</span>, router)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2436,2440"}}],"payload":{"tag":"h2","lines":"2410,2411"}},{"content":"router.all(path, [callback, ...] callback)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2443,2446\"><code>&#x6b64;&#x65b9;&#x6cd5;&#x4e0e; router.METHOD() &#x65b9;&#x6cd5;&#x4e00;&#x6837;&#xff0c;&#x53ea;&#x662f;&#x5b83;&#x5339;&#x914d;&#x6240;&#x6709; HTTP &#x65b9;&#x6cd5;&#xff08;&#x52a8;&#x8bcd;&#xff09;&#x3002;\n\n&#x6b64;&#x65b9;&#x6cd5;&#x5bf9;&#x4e8e;&#x4e3a;&#x7279;&#x5b9a;&#x8def;&#x5f84;&#x524d;&#x7f00;&#x6216;&#x4efb;&#x610f;&#x5339;&#x914d;&#x6620;&#x5c04; &quot;global&quot; &#x903b;&#x8f91;&#x975e;&#x5e38;&#x6709;&#x7528;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x5982;&#x679c;&#x60a8;&#x5c06;&#x4ee5;&#x4e0b;&#x8def;&#x7531;&#x653e;&#x5728;&#x6240;&#x6709;&#x5176;&#x4ed6;&#x8def;&#x7531;&#x5b9a;&#x4e49;&#x7684;&#x9876;&#x90e8;&#xff0c;&#x5219;&#x8981;&#x6c42;&#x4ece;&#x8be5;&#x70b9;&#x5f00;&#x59cb;&#x7684;&#x6240;&#x6709;&#x8def;&#x7531;&#x90fd;&#x9700;&#x8981;&#x8eab;&#x4efd;&#x9a8c;&#x8bc1;&#xff0c;&#x5e76;&#x81ea;&#x52a8;&#x52a0;&#x8f7d;&#x7528;&#x6237;&#x3002;&#x8bf7;&#x8bb0;&#x4f4f;&#xff0c;&#x8fd9;&#x4e9b;&#x56de;&#x8c03;&#x4e0d;&#x5fc5;&#x5145;&#x5f53;&#x7aef;&#x70b9;&#xff1b; loadUser &#x53ef;&#x4ee5;&#x6267;&#x884c;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x7136;&#x540e;&#x8c03;&#x7528; next() &#x7ee7;&#x7eed;&#x5339;&#x914d;&#x540e;&#x7eed;&#x8def;&#x7531;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2443,2446"}},{"content":"<pre data-lines=\"2447,2450\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;*&apos;</span>, requireAuthentication, loadUser)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2447,2450"}},{"content":"<pre data-lines=\"2453,2457\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;*&apos;</span>, requireAuthentication)\nrouter.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;*&apos;</span>, loadUser)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2453,2457"}},{"content":"<pre data-lines=\"2458,2459\"><code>&#x53e6;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x662f;&#x5217;&#x5165;&#x767d;&#x540d;&#x5355;&#x7684; &quot;global&quot; &#x529f;&#x80fd;&#x3002;&#x8fd9;&#x91cc;&#x7684;&#x4f8b;&#x5b50;&#x5f88;&#x50cf;&#x4ee5;&#x524d;&#xff0c;&#x4f46;&#x5b83;&#x53ea;&#x9650;&#x5236;&#x4ee5; &quot;/api&quot; &#x4e3a;&#x524d;&#x7f00;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2458,2459"}},{"content":"<pre data-lines=\"2460,2463\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-string\">&apos;/api/*&apos;</span>, requireAuthentication)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2460,2463"}}],"payload":{"tag":"h2","lines":"2441,2442"}},{"content":"router.METHOD(path, [callback, ...] callback)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2466,2473\"><code>router.METHOD() &#x65b9;&#x6cd5;&#x5728; Express &#x4e2d;&#x63d0;&#x4f9b;&#x8def;&#x7531;&#x529f;&#x80fd;&#xff0c;&#x5176;&#x4e2d; METHOD &#x662f; HTTP &#x65b9;&#x6cd5;&#x4e4b;&#x4e00;&#xff0c;&#x4f8b;&#x5982; GET&#x3001;PUT&#x3001;POST &#x7b49;&#xff0c;&#x5c0f;&#x5199;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x5b9e;&#x9645;&#x7684;&#x65b9;&#x6cd5;&#x662f; router.get()&#x3001;router.post()&#x3001;router.put() &#x7b49;&#x7b49;&#x3002;\n\n&#x5982;&#x679c; router.get() &#x4e4b;&#x524d;&#x7684;&#x8def;&#x5f84;&#x6ca1;&#x6709;&#x8c03;&#x7528; router.head()&#xff0c;&#x5219;&#x9664;&#x4e86; GET &#x65b9;&#x6cd5;&#x4e4b;&#x5916;&#xff0c;&#x8fd8;&#x4f1a;&#x4e3a; HTTP HEAD &#x65b9;&#x6cd5;&#x81ea;&#x52a8;&#x8c03;&#x7528; router.get() &#x51fd;&#x6570;&#x3002;\n\n&#x60a8;&#x53ef;&#x4ee5;&#x63d0;&#x4f9b;&#x591a;&#x4e2a;&#x56de;&#x8c03;&#xff0c;&#x5e76;&#x4e14;&#x6240;&#x6709;&#x56de;&#x8c03;&#x90fd;&#x88ab;&#x5e73;&#x7b49;&#x5bf9;&#x5f85;&#xff0c;&#x5e76;&#x4e14;&#x8868;&#x73b0;&#x5f97;&#x50cf;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x9664;&#x4e86;&#x8fd9;&#x4e9b;&#x56de;&#x8c03;&#x53ef;&#x80fd;&#x4f1a;&#x8c03;&#x7528; next(&apos;route&apos;) &#x4ee5;&#x7ed5;&#x8fc7;&#x5269;&#x4f59;&#x7684;&#x8def;&#x7531;&#x56de;&#x8c03;&#x3002;&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x6b64;&#x673a;&#x5236;&#x5bf9;&#x8def;&#x7531;&#x6267;&#x884c;&#x524d;&#x7f6e;&#x6761;&#x4ef6;&#xff0c;&#x7136;&#x540e;&#x5728;&#x6ca1;&#x6709;&#x7406;&#x7531;&#x7ee7;&#x7eed;&#x5339;&#x914d;&#x8def;&#x7531;&#x65f6;&#x5c06;&#x63a7;&#x5236;&#x6743;&#x4f20;&#x9012;&#x7ed9;&#x540e;&#x7eed;&#x8def;&#x7531;&#x3002;\n\n&#x4ee5;&#x4e0b;&#x7247;&#x6bb5;&#x8bf4;&#x660e;&#x4e86;&#x53ef;&#x80fd;&#x7684;&#x6700;&#x7b80;&#x5355;&#x7684;&#x8def;&#x7531;&#x5b9a;&#x4e49;&#x3002;Express &#x5c06;&#x8def;&#x5f84;&#x5b57;&#x7b26;&#x4e32;&#x8f6c;&#x6362;&#x4e3a;&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;&#xff0c;&#x5728;&#x5185;&#x90e8;&#x7528;&#x4e8e;&#x5339;&#x914d;&#x4f20;&#x5165;&#x7684;&#x8bf7;&#x6c42;&#x3002;&#x6267;&#x884c;&#x8fd9;&#x4e9b;&#x5339;&#x914d;&#x65f6;&#x4e0d;&#x8003;&#x8651;&#x67e5;&#x8be2;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4f8b;&#x5982; &quot;GET /&quot; &#x5c06;&#x5339;&#x914d;&#x4ee5;&#x4e0b;&#x8def;&#x7531;&#xff0c;&quot;GET /?name=tobi&quot; &#x4e5f;&#x662f;&#x5982;&#x6b64;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2466,2473"}},{"content":"<pre data-lines=\"2474,2479\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;hello world&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2474,2479"}},{"content":"<pre data-lines=\"2480,2481\"><code>&#x60a8;&#x8fd8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;&#x2014;&#x2014;&#x5982;&#x679c;&#x60a8;&#x6709;&#x975e;&#x5e38;&#x5177;&#x4f53;&#x7684;&#x7ea6;&#x675f;&#xff0c;&#x5219;&#x5f88;&#x6709;&#x7528;&#xff0c;&#x4f8b;&#x5982;&#x4ee5;&#x4e0b;&#x5c06;&#x5339;&#x914d; &quot;GET /commits/71dbb9c&quot; &#x548c; &quot;GET /commits/71dbb9c..4c084f9&quot;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2480,2481"}},{"content":"<pre data-lines=\"2482,2489\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-regexp\">/^\\/commits\\/(\\w+)(?:\\.\\.(\\w+))?&#x24;/</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">from</span> = req.<span class=\"hljs-property\">params</span>[<span class=\"hljs-number\">0</span>]\n  <span class=\"hljs-keyword\">const</span> to = req.<span class=\"hljs-property\">params</span>[<span class=\"hljs-number\">1</span>] || <span class=\"hljs-string\">&apos;HEAD&apos;</span>\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">`commit range <span class=\"hljs-subst\">&#x24;{<span class=\"hljs-keyword\">from</span>}</span>..<span class=\"hljs-subst\">&#x24;{to}</span>`</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2482,2489"}},{"content":"<pre data-lines=\"2490,2493\"><code>&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; next &#x539f;&#x8bed;&#x6839;&#x636e;&#x7279;&#x5b9a;&#x7684;&#x7a0b;&#x5e8f;&#x72b6;&#x6001;&#x5728;&#x4e0d;&#x540c;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x4e4b;&#x95f4;&#x5b9e;&#x73b0;&#x6d41;&#x63a7;&#x5236;&#x3002;&#x4f7f;&#x7528;&#x5b57;&#x7b26;&#x4e32; &apos;router&apos; &#x8c03;&#x7528; next &#x5c06;&#x5bfc;&#x81f4;&#x8be5;&#x8def;&#x7531;&#x4e0a;&#x6240;&#x6709;&#x5269;&#x4f59;&#x7684;&#x8def;&#x7531;&#x56de;&#x8c03;&#x88ab;&#x7ed5;&#x8fc7;&#x3002;\n\n&#x4ee5;&#x4e0b;&#x793a;&#x4f8b;&#x8bf4;&#x660e;&#x4e86; next(&apos;router&apos;) &#x7684;&#x7528;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2490,2493"}},{"content":"<pre data-lines=\"2494,2510\"><code class=\"language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fn</span> (<span class=\"hljs-params\">req, res, next</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;I come here&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-string\">&apos;router&apos;</span>)\n}\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/foo&apos;</span>, fn, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;I dont come here&apos;</span>)\n})\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/foo&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;I dont come here&apos;</span>)\n})\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/foo&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos; I come here too&apos;</span>)\n  res.<span class=\"hljs-title function_\">end</span>(<span class=\"hljs-string\">&apos;good&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2494,2510"}}],"payload":{"tag":"h2","lines":"2464,2465"}},{"content":"router.param(name, callback)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2513,2530\"><code>&#x4e3a;&#x8def;&#x7531;&#x53c2;&#x6570;&#x6dfb;&#x52a0;&#x56de;&#x8c03;&#x89e6;&#x53d1;&#x5668;&#xff0c;&#x5176;&#x4e2d;name&#x4e3a;&#x53c2;&#x6570;&#x540d;&#x79f0;&#xff0c;callback&#x4e3a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x5c3d;&#x7ba1; name &#x5728;&#x6280;&#x672f;&#x4e0a;&#x662f;&#x53ef;&#x9009;&#x7684;&#xff0c;&#x4f46;&#x4ece; Express v4.11.0 &#x5f00;&#x59cb;&#x4e0d;&#x63a8;&#x8350;&#x4f7f;&#x7528;&#x6b64;&#x65b9;&#x6cd5;&#xff08;&#x89c1;&#x4e0b;&#x6587;&#xff09;&#x3002;\n\n&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x4e3a;&#x200b;&#x200b;&#xff1a;\n\n- req&#xff0c;&#x8bf7;&#x6c42;&#x5bf9;&#x8c61;&#x3002;\n\n- res&#xff0c;&#x54cd;&#x5e94;&#x5bf9;&#x8c61;&#x3002;\n\n- next&#xff0c;&#x8868;&#x793a;&#x4e0b;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x3002;\n\n- name &#x53c2;&#x6570;&#x7684;&#x503c;&#x3002;\n\n&#x53c2;&#x6570;&#x7684;&#x540d;&#x79f0;&#x3002;\n\n&#x4e0e; app.param() &#x4e0d;&#x540c;&#xff0c;router.param() &#x4e0d;&#x63a5;&#x53d7;&#x8def;&#x7531;&#x53c2;&#x6570;&#x6570;&#x7ec4;&#x3002;\n\n&#x4f8b;&#x5982;&#xff0c;&#x5f53; :user &#x51fa;&#x73b0;&#x5728;&#x8def;&#x7531;&#x8def;&#x5f84;&#x4e2d;&#x65f6;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x6620;&#x5c04;&#x7528;&#x6237;&#x52a0;&#x8f7d;&#x903b;&#x8f91;&#x4ee5;&#x81ea;&#x52a8;&#x5c06; req.user &#x63d0;&#x4f9b;&#x7ed9;&#x8def;&#x7531;&#xff0c;&#x6216;&#x5bf9;&#x53c2;&#x6570;&#x8f93;&#x5165;&#x6267;&#x884c;&#x9a8c;&#x8bc1;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2513,2530"}},{"content":"<pre data-lines=\"2531,2546\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;user&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, id</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// try to get the user details from the User model and attach it to the request object</span>\n  <span class=\"hljs-title class_\">User</span>.<span class=\"hljs-title function_\">find</span>(id, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, user</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (err) {\n      <span class=\"hljs-title function_\">next</span>(err)\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (user) {\n      req.<span class=\"hljs-property\">user</span> = user\n      <span class=\"hljs-title function_\">next</span>()\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&apos;failed to load user&apos;</span>))\n    }\n  })\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2531,2546"}},{"content":"<pre data-lines=\"2547,2550\"><code>&#x53c2;&#x6570;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5728;&#x5b9a;&#x4e49;&#x5b83;&#x4eec;&#x7684;&#x8def;&#x7531;&#x4e0a;&#x662f;&#x672c;&#x5730;&#x7684;&#x3002;&#x5b83;&#x4eec;&#x4e0d;&#x4f1a;&#x88ab;&#x5b89;&#x88c5;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x6216;&#x8def;&#x7531;&#x7ee7;&#x627f;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x5728; router &#x4e0a;&#x5b9a;&#x4e49;&#x7684;&#x53c2;&#x6570;&#x56de;&#x8c03;&#x5c06;&#x4ec5;&#x7531;&#x5728; router &#x8def;&#x7531;&#x4e0a;&#x5b9a;&#x4e49;&#x7684;&#x8def;&#x7531;&#x53c2;&#x6570;&#x89e6;&#x53d1;&#x3002;\n\n&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x56de;&#x8c03;&#x5728;&#x8bf7;&#x6c42;-&#x54cd;&#x5e94;&#x5468;&#x671f;&#x4e2d;&#x53ea;&#x4f1a;&#x88ab;&#x8c03;&#x7528;&#x4e00;&#x6b21;&#xff0c;&#x5373;&#x4f7f;&#x8be5;&#x53c2;&#x6570;&#x5728;&#x591a;&#x4e2a;&#x8def;&#x7531;&#x4e2d;&#x5339;&#x914d;&#xff0c;&#x5982;&#x4e0b;&#x4f8b;&#x6240;&#x793a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2547,2550"}},{"content":"<pre data-lines=\"2551,2567\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, id</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;CALLED ONLY ONCE&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;although this matches&apos;</span>)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;and this matches too&apos;</span>)\n  res.<span class=\"hljs-title function_\">end</span>()\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2551,2567"}},{"content":"<pre data-lines=\"2568,2569\"><code>&#x5728; GET /user/42 &#x4e0a;&#xff0c;&#x6253;&#x5370;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2568,2569"}},{"content":"<pre data-lines=\"2570,2575\"><code data-lines=\"2570,2575\">CALLED ONLY ONCE\nalthough <span class=\"hljs-keyword\">this</span> matches\nand <span class=\"hljs-keyword\">this</span> matches too\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2570,2575"}},{"content":"<pre data-lines=\"2576,2585\"><code>&#x4ee5;&#x4e0b;&#x90e8;&#x5206;&#x63cf;&#x8ff0;&#x4e86; router.param(callback)&#xff0c;&#x81ea; v4.11.0 &#x8d77;&#x5df2;&#x5f03;&#x7528;&#x3002;\n\nrouter.param(name, callback) &#x65b9;&#x6cd5;&#x7684;&#x884c;&#x4e3a;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x53ea;&#x5411; router.param() &#x4f20;&#x9012;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#x6765;&#x5b8c;&#x5168;&#x6539;&#x53d8;&#x3002;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x662f; router.param(name, callback) &#x5e94;&#x8be5;&#x5982;&#x4f55;&#x8868;&#x73b0;&#x7684;&#x81ea;&#x5b9a;&#x4e49;&#x5b9e;&#x73b0;&#x2014;&#x2014;&#x5b83;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x5e76;&#x4e14;&#x5fc5;&#x987b;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;\n\n&#x6b64;&#x51fd;&#x6570;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x5e94;&#x6355;&#x83b7;&#x7684; URL &#x53c2;&#x6570;&#x7684;&#x540d;&#x79f0;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x662f;&#x4efb;&#x4f55;&#x53ef;&#x80fd;&#x7528;&#x4e8e;&#x8fd4;&#x56de;&#x4e2d;&#x95f4;&#x4ef6;&#x5b9e;&#x73b0;&#x7684; JavaScript &#x5bf9;&#x8c61;&#x3002;\n\n&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51b3;&#x5b9a;&#x4e86;&#x6355;&#x83b7; URL &#x53c2;&#x6570;&#x65f6;&#x53d1;&#x751f;&#x7684;&#x884c;&#x4e3a;&#x3002;\n\n&#x5728;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x5c06; router.param(name, callback) &#x7b7e;&#x540d;&#x4fee;&#x6539;&#x4e3a; router.param(name, accessId)&#x3002;router.param() &#x73b0;&#x5728;&#x5c06;&#x63a5;&#x53d7;&#x540d;&#x79f0;&#x548c;&#x53f7;&#x7801;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x63a5;&#x53d7;&#x540d;&#x79f0;&#x548c;&#x56de;&#x8c03;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2576,2585"}},{"content":"<pre data-lines=\"2586,2616\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n<span class=\"hljs-keyword\">const</span> router = express.<span class=\"hljs-title class_\">Router</span>()\n\n<span class=\"hljs-comment\">// customizing the behavior of router.param()</span>\nrouter.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">param, option</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, val</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (val === option) {\n      <span class=\"hljs-title function_\">next</span>()\n    } <span class=\"hljs-keyword\">else</span> {\n      res.<span class=\"hljs-title function_\">sendStatus</span>(<span class=\"hljs-number\">403</span>)\n    }\n  }\n})\n\n<span class=\"hljs-comment\">// using the customized router.param()</span>\nrouter.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;id&apos;</span>, <span class=\"hljs-number\">1337</span>)\n\n<span class=\"hljs-comment\">// route to trigger the capture</span>\nrouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/user/:id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;OK&apos;</span>)\n})\n\napp.<span class=\"hljs-title function_\">use</span>(router)\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Ready&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2586,2616"}},{"content":"<pre data-lines=\"2617,2618\"><code>&#x5728;&#x6b64;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;router.param(name, callback) &#x7b7e;&#x540d;&#x4fdd;&#x6301;&#x4e0d;&#x53d8;&#xff0c;&#x4f46;&#x6ca1;&#x6709;&#x4f7f;&#x7528;&#x4e2d;&#x95f4;&#x4ef6;&#x56de;&#x8c03;&#xff0c;&#x800c;&#x662f;&#x5b9a;&#x4e49;&#x4e86;&#x81ea;&#x5b9a;&#x4e49;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x68c0;&#x67e5;&#x51fd;&#x6570;&#x6765;&#x9a8c;&#x8bc1;&#x7528;&#x6237; ID &#x7684;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2617,2618"}},{"content":"<pre data-lines=\"2619,2634\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">param, validator</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, val</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">validator</span>(val)) {\n      <span class=\"hljs-title function_\">next</span>()\n    } <span class=\"hljs-keyword\">else</span> {\n      res.<span class=\"hljs-title function_\">sendStatus</span>(<span class=\"hljs-number\">403</span>)\n    }\n  }\n})\n\nrouter.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">candidate</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">return</span> !<span class=\"hljs-built_in\">isNaN</span>(<span class=\"hljs-built_in\">parseFloat</span>(candidate)) &amp;&amp; <span class=\"hljs-built_in\">isFinite</span>(candidate)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2619,2634"}}],"payload":{"tag":"h2","lines":"2511,2512"}},{"content":"router.route(path)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2637,2640\"><code>&#x8fd4;&#x56de;&#x5355;&#x4e2a;&#x8def;&#x7531;&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x7136;&#x540e;&#x60a8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x8be5;&#x5b9e;&#x4f8b;&#x5904;&#x7406;&#x5e26;&#x6709;&#x53ef;&#x9009;&#x4e2d;&#x95f4;&#x4ef6;&#x7684; HTTP &#x52a8;&#x8bcd;&#x3002;&#x4f7f;&#x7528; router.route() &#x6765;&#x907f;&#x514d;&#x91cd;&#x590d;&#x7684;&#x8def;&#x7531;&#x547d;&#x540d;&#xff0c;&#x4ece;&#x800c;&#x907f;&#x514d;&#x8f93;&#x5165;&#x9519;&#x8bef;&#x3002;\n\n&#x5728;&#x4e0a;&#x9762;&#x7684; router.param() &#x793a;&#x4f8b;&#x7684;&#x57fa;&#x7840;&#x4e0a;&#xff0c;&#x4ee5;&#x4e0b;&#x4ee3;&#x7801;&#x663e;&#x793a;&#x4e86;&#x5982;&#x4f55;&#x4f7f;&#x7528; router.route() &#x6765;&#x6307;&#x5b9a;&#x5404;&#x79cd; HTTP &#x65b9;&#x6cd5;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2637,2640"}},{"content":"<pre data-lines=\"2641,2675\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> router = express.<span class=\"hljs-title class_\">Router</span>()\n\nrouter.<span class=\"hljs-title function_\">param</span>(<span class=\"hljs-string\">&apos;user_id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next, id</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// sample user, would actually fetch from DB, etc...</span>\n  req.<span class=\"hljs-property\">user</span> = {\n    id,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&apos;TJ&apos;</span>\n  }\n  <span class=\"hljs-title function_\">next</span>()\n})\n\nrouter.<span class=\"hljs-title function_\">route</span>(<span class=\"hljs-string\">&apos;/users/:user_id&apos;</span>)\n  .<span class=\"hljs-title function_\">all</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// runs for all HTTP verbs first</span>\n  <span class=\"hljs-comment\">// think of it as route specific middleware!</span>\n    <span class=\"hljs-title function_\">next</span>()\n  })\n  .<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n    res.<span class=\"hljs-title function_\">json</span>(req.<span class=\"hljs-property\">user</span>)\n  })\n  .<span class=\"hljs-title function_\">put</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// just an example of maybe updating the user</span>\n    req.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">name</span> = req.<span class=\"hljs-property\">params</span>.<span class=\"hljs-property\">name</span>\n    <span class=\"hljs-comment\">// save user ... etc</span>\n    res.<span class=\"hljs-title function_\">json</span>(req.<span class=\"hljs-property\">user</span>)\n  })\n  .<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n    <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&apos;not implemented&apos;</span>))\n  })\n  .<span class=\"hljs-title function_\">delete</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n    <span class=\"hljs-title function_\">next</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&apos;not implemented&apos;</span>))\n  })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2641,2675"}},{"content":"<pre data-lines=\"2676,2679\"><code>&#x6b64;&#x65b9;&#x6cd5;&#x91cd;&#x7528;&#x5355;&#x4e2a; /users/:user_id &#x8def;&#x5f84;&#x5e76;&#x4e3a;&#x5404;&#x79cd; HTTP &#x65b9;&#x6cd5;&#x6dfb;&#x52a0;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x3002;\n\n&#x6ce8;&#x610f;&#xff1a;&#x5f53;&#x60a8;&#x4f7f;&#x7528; router.route() &#x65f6;&#xff0c;&#x4e2d;&#x95f4;&#x4ef6;&#x6392;&#x5e8f;&#x57fa;&#x4e8e;&#x8def;&#x7531;&#x521b;&#x5efa;&#x7684;&#x65f6;&#x95f4;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x65b9;&#x6cd5;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6dfb;&#x52a0;&#x5230;&#x8def;&#x7531;&#x7684;&#x65f6;&#x95f4;&#x3002;&#x4e3a;&#x6b64;&#xff0c;&#x60a8;&#x53ef;&#x4ee5;&#x8ba4;&#x4e3a;&#x65b9;&#x6cd5;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x5c5e;&#x4e8e;&#x6dfb;&#x52a0;&#x5b83;&#x4eec;&#x7684;&#x8def;&#x7531;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2676,2679"}}],"payload":{"tag":"h2","lines":"2635,2636"}},{"content":"router.use([path], [function, ...] function)&#x4e2d;&#x82f1;","children":[{"content":"<pre data-lines=\"2682,2687\"><code>&#x4f7f;&#x7528;&#x6307;&#x5b9a;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x6216;&#x51fd;&#x6570;&#xff0c;&#x5e26;&#x6709;&#x53ef;&#x9009;&#x7684;&#x6302;&#x8f7d;&#x8def;&#x5f84; path&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a; &quot;/&quot;&#x3002;\n\n&#x6b64;&#x65b9;&#x6cd5;&#x4e0e; app.use() &#x7c7b;&#x4f3c;&#x3002;&#x4e0b;&#x9762;&#x63cf;&#x8ff0;&#x4e86;&#x4e00;&#x4e2a;&#x7b80;&#x5355;&#x7684;&#x793a;&#x4f8b;&#x548c;&#x7528;&#x4f8b;&#x3002;&#x6709;&#x5173;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;&#xff0c;&#x8bf7;&#x53c2;&#x9605; app.use()&#x3002;\n\n&#x4e2d;&#x95f4;&#x4ef6;&#x5c31;&#x50cf;&#x4e00;&#x4e2a;&#x7ba1;&#x9053;&#xff1a;&#x8bf7;&#x6c42;&#x4ece;&#x5b9a;&#x4e49;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x5f00;&#x59cb;&#xff0c;&#x5e76;&#x6309;&#x7167;&#x5b83;&#x4eec;&#x5339;&#x914d;&#x7684;&#x6bcf;&#x4e2a;&#x8def;&#x5f84;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x5806;&#x6808;&#x5904;&#x7406;&#x65b9;&#x5f0f;&#x5de5;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2682,2687"}},{"content":"<pre data-lines=\"2688,2715\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;express&apos;</span>)\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()\n<span class=\"hljs-keyword\">const</span> router = express.<span class=\"hljs-title class_\">Router</span>()\n\n<span class=\"hljs-comment\">// simple logger for this router&apos;s requests</span>\n<span class=\"hljs-comment\">// all requests to this router will first hit this middleware</span>\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;%s %s %s&apos;</span>, req.<span class=\"hljs-property\">method</span>, req.<span class=\"hljs-property\">url</span>, req.<span class=\"hljs-property\">path</span>)\n  <span class=\"hljs-title function_\">next</span>()\n})\n\n<span class=\"hljs-comment\">// this will only be invoked if the path starts with /bar from the mount point</span>\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/bar&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ... maybe some additional /bar logging ...</span>\n  <span class=\"hljs-title function_\">next</span>()\n})\n\n<span class=\"hljs-comment\">// always invoked</span>\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Hello World&apos;</span>)\n})\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/foo&apos;</span>, router)\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2688,2715"}},{"content":"<pre data-lines=\"2716,2719\"><code>&quot;mount&quot; &#x8def;&#x5f84;&#x88ab;&#x5265;&#x79bb;&#x5e76;&#x4e14;&#x5bf9;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x4e0d;&#x53ef;&#x89c1;&#x3002;&#x6b64;&#x529f;&#x80fd;&#x7684;&#x4e3b;&#x8981;&#x6548;&#x679c;&#x662f;&#x6302;&#x8f7d;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x53ef;&#x4ee5;&#x5728;&#x4e0d;&#x66f4;&#x6539;&#x4ee3;&#x7801;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x8fd0;&#x884c;&#xff0c;&#x65e0;&#x8bba;&#x5176; &quot;prefix&quot; &#x8def;&#x5f84;&#x540d;&#x5982;&#x4f55;&#x3002;\n\n&#x4f7f;&#x7528; router.use() &#x5b9a;&#x4e49;&#x4e2d;&#x95f4;&#x4ef6;&#x7684;&#x987a;&#x5e8f;&#x975e;&#x5e38;&#x91cd;&#x8981;&#x3002;&#x5b83;&#x4eec;&#x6309;&#x987a;&#x5e8f;&#x8c03;&#x7528;&#xff0c;&#x56e0;&#x6b64;&#x987a;&#x5e8f;&#x5b9a;&#x4e49;&#x4e86;&#x4e2d;&#x95f4;&#x4ef6;&#x4f18;&#x5148;&#x7ea7;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x901a;&#x5e38;&#x8bb0;&#x5f55;&#x5668;&#x662f;&#x60a8;&#x5c06;&#x4f7f;&#x7528;&#x7684;&#x7b2c;&#x4e00;&#x4e2a;&#x4e2d;&#x95f4;&#x4ef6;&#xff0c;&#x4ee5;&#x4fbf;&#x8bb0;&#x5f55;&#x6bcf;&#x4e2a;&#x8bf7;&#x6c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2716,2719"}},{"content":"<pre data-lines=\"2720,2729\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> logger = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;morgan&apos;</span>)\n\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">logger</span>())\nrouter.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Hello&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2720,2729"}},{"content":"<pre data-lines=\"2730,2731\"><code>&#x73b0;&#x5728;&#x5047;&#x8bbe;&#x60a8;&#x60f3;&#x5ffd;&#x7565;&#x5bf9;&#x9759;&#x6001;&#x6587;&#x4ef6;&#x7684;&#x65e5;&#x5fd7;&#x8bb0;&#x5f55;&#x8bf7;&#x6c42;&#xff0c;&#x4f46;&#x7ee7;&#x7eed;&#x8bb0;&#x5f55; logger() &#x4e4b;&#x540e;&#x5b9a;&#x4e49;&#x7684;&#x8def;&#x7531;&#x548c;&#x4e2d;&#x95f4;&#x4ef6;&#x3002;&#x5728;&#x6dfb;&#x52a0;&#x8bb0;&#x5f55;&#x5668;&#x4e2d;&#x95f4;&#x4ef6;&#x4e4b;&#x524d;&#xff0c;&#x60a8;&#x53ea;&#x9700;&#x5c06;&#x5bf9; express.static() &#x7684;&#x8c03;&#x7528;&#x79fb;&#x81f3;&#x9876;&#x90e8;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2730,2731"}},{"content":"<pre data-lines=\"2732,2739\"><code class=\"language-js\">router.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">logger</span>())\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&apos;Hello&apos;</span>)\n})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2732,2739"}},{"content":"<pre data-lines=\"2740,2741\"><code>&#x53e6;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x662f;&#x4ece;&#x591a;&#x4e2a;&#x76ee;&#x5f55;&#x63d0;&#x4f9b;&#x6587;&#x4ef6;&#xff0c;&#x8ba9; &quot;./public&quot; &#x4f18;&#x5148;&#x4e8e;&#x5176;&#x4ed6;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2740,2741"}},{"content":"<pre data-lines=\"2742,2747\"><code class=\"language-js\">app.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;public&apos;</span>)))\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;files&apos;</span>)))\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">static</span>(path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">&apos;uploads&apos;</span>)))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2742,2747"}},{"content":"<pre data-lines=\"2748,2751\"><code>router.use() &#x65b9;&#x6cd5;&#x8fd8;&#x652f;&#x6301;&#x547d;&#x540d;&#x53c2;&#x6570;&#xff0c;&#x56e0;&#x6b64;&#x60a8;&#x7684;&#x5176;&#x4ed6;&#x8def;&#x7531;&#x7684;&#x6302;&#x8f7d;&#x70b9;&#x53ef;&#x4ee5;&#x4ece;&#x4f7f;&#x7528;&#x547d;&#x540d;&#x53c2;&#x6570;&#x7684;&#x9884;&#x52a0;&#x8f7d;&#x4e2d;&#x53d7;&#x76ca;&#x3002;\n\n&#x6ce8;&#x610f;&#xff1a;&#x5c3d;&#x7ba1;&#x8fd9;&#x4e9b;&#x4e2d;&#x95f4;&#x4ef6;&#x51fd;&#x6570;&#x662f;&#x901a;&#x8fc7;&#x7279;&#x5b9a;&#x7684;&#x8def;&#x7531;&#x6dfb;&#x52a0;&#x7684;&#xff0c;&#x4f46;&#x5b83;&#x4eec;&#x8fd0;&#x884c;&#x65f6;&#x662f;&#x7531;&#x5b83;&#x4eec;&#x6240;&#x8fde;&#x63a5;&#x7684;&#x8def;&#x5f84;&#xff08;&#x800c;&#x4e0d;&#x662f;&#x8def;&#x7531;&#xff09;&#x5b9a;&#x4e49;&#x7684;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x5982;&#x679c;&#x8def;&#x7531;&#x5339;&#x914d;&#xff0c;&#x901a;&#x8fc7;&#x4e00;&#x4e2a;&#x8def;&#x7531;&#x6dfb;&#x52a0;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x53ef;&#x4ee5;&#x4e3a;&#x5176;&#x4ed6;&#x8def;&#x7531;&#x8fd0;&#x884c;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x6b64;&#x4ee3;&#x7801;&#x663e;&#x793a;&#x4e86;&#x5b89;&#x88c5;&#x5728;&#x540c;&#x4e00;&#x8def;&#x5f84;&#x4e0a;&#x7684;&#x4e24;&#x4e2a;&#x4e0d;&#x540c;&#x8def;&#x7531;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2748,2751"}},{"content":"<pre data-lines=\"2752,2771\"><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> authRouter = express.<span class=\"hljs-title class_\">Router</span>()\n<span class=\"hljs-keyword\">const</span> openRouter = express.<span class=\"hljs-title class_\">Router</span>()\n\nauthRouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;./authenticate&apos;</span>).<span class=\"hljs-title function_\">basic</span>(usersdb))\n\nauthRouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/:user_id/edit&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ... Edit user UI ...</span>\n})\nopenRouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ... List users ...</span>\n})\nopenRouter.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&apos;/:user_id&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// ... View user ...</span>\n})\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/users&apos;</span>, authRouter)\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">&apos;/users&apos;</span>, openRouter)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2752,2771"}},{"content":"<pre data-lines=\"2772,2773\"><code>&#x5373;&#x4f7f;&#x8eab;&#x4efd;&#x9a8c;&#x8bc1;&#x4e2d;&#x95f4;&#x4ef6;&#x662f;&#x901a;&#x8fc7; authRouter &#x6dfb;&#x52a0;&#x7684;&#xff0c;&#x5b83;&#x4e5f;&#x4f1a;&#x5728; openRouter &#x5b9a;&#x4e49;&#x7684;&#x8def;&#x7531;&#x4e0a;&#x8fd0;&#x884c;&#xff0c;&#x56e0;&#x4e3a;&#x4e24;&#x4e2a;&#x8def;&#x7531;&#x90fd;&#x5b89;&#x88c5;&#x5728; /users &#x4e0a;&#x3002;&#x4e3a;&#x907f;&#x514d;&#x6b64;&#x884c;&#x4e3a;&#xff0c;&#x8bf7;&#x4e3a;&#x6bcf;&#x4e2a;&#x8def;&#x7531;&#x4f7f;&#x7528;&#x4e0d;&#x540c;&#x7684;&#x8def;&#x5f84;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2772,2773"}},{"content":"<pre data-lines=\"2776,2783\"><code data-lines=\"2776,2783\">router<span class=\"hljs-selector-class\">.all</span>(<span class=\"hljs-selector-tag\">path</span>, <span class=\"hljs-selector-attr\">[callback, ...]</span> callback)\nrouter<span class=\"hljs-selector-class\">.METHOD</span>(<span class=\"hljs-selector-tag\">path</span>, <span class=\"hljs-selector-attr\">[callback, ...]</span> callback)\nrouter<span class=\"hljs-selector-class\">.param</span>(name, callback)\nrouter<span class=\"hljs-selector-class\">.route</span>(path)\nrouter<span class=\"hljs-selector-class\">.use</span>(<span class=\"hljs-selector-attr\">[path]</span>, <span class=\"hljs-selector-attr\">[function, ...]</span> function)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2776,2783"}}],"payload":{"tag":"h2","lines":"2680,2681"}}],"payload":{"tag":"h1","lines":"2398,2399"}}]},{})</script>
</body>
</html>
