<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#%E7%BC%96%E8%AF%91%E5%85%A5%E5%8F%A3\">#</a> &#x7f16;&#x8bd1;&#x5165;&#x53e3;","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,7\"><code>&#x5f53;&#x6211;&#x4eec;&#x4f7f;&#x7528; Runtime + Compiler &#x7684; Vue.js&#xff0c;&#x5b83;&#x7684;&#x5165;&#x53e3;&#x662f; `src/platforms/web/entry-runtime-with-compiler.js`&#xff0c;&#x770b;&#x4e00;&#x4e0b;&#x5b83;&#x5bf9; `&#x24;mount` &#x51fd;&#x6570;&#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,7"}},{"content":"<pre data-lines=\"8,76\"><code data-lines=\"8,76\">const mount = Vue.prototype.&#x24;mount\nVue.prototype.&#x24;mount = <span class=\"hljs-keyword\">function</span> (\n  el?: string | Element,\n  hydrating?: <span class=\"hljs-type\">boolean</span>\n): Component {\n  el = el &amp;&amp; query(el)\n\n  <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n  <span class=\"hljs-keyword\">if</span> (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; warn(\n      `<span class=\"hljs-keyword\">Do</span> <span class=\"hljs-keyword\">not</span> mount Vue <span class=\"hljs-keyword\">to</span> &lt;html&gt; <span class=\"hljs-keyword\">or</span> &lt;body&gt; - mount <span class=\"hljs-keyword\">to</span> normal elements <span class=\"hljs-keyword\">instead</span>.`\n    )\n    <span class=\"hljs-keyword\">return</span> this\n  }\n\n  const <span class=\"hljs-keyword\">options</span> = this.&#x24;<span class=\"hljs-keyword\">options</span>\n  // resolve <span class=\"hljs-keyword\">template</span>/el <span class=\"hljs-keyword\">and</span> convert <span class=\"hljs-keyword\">to</span> render <span class=\"hljs-keyword\">function</span>\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">options</span>.render) {\n    let template = <span class=\"hljs-keyword\">options</span>.<span class=\"hljs-keyword\">template</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">template</span>) {\n      <span class=\"hljs-keyword\">if</span> (typeof template === <span class=\"hljs-string\">&apos;string&apos;</span>) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">template</span>.charAt(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;#&apos;</span>) {\n          template = idToTemplate(<span class=\"hljs-keyword\">template</span>)\n          <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n          <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; !<span class=\"hljs-keyword\">template</span>) {\n            warn(\n              `<span class=\"hljs-keyword\">Template</span> element <span class=\"hljs-keyword\">not</span> <span class=\"hljs-built_in\">found</span> <span class=\"hljs-keyword\">or</span> <span class=\"hljs-keyword\">is</span> empty: &#x24;{<span class=\"hljs-keyword\">options</span>.<span class=\"hljs-keyword\">template</span>}`,\n              this\n            )\n          }\n        }\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">template</span>.nodeType) {\n        template = <span class=\"hljs-keyword\">template</span>.innerHTML\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n          warn(<span class=\"hljs-string\">&apos;invalid template option:&apos;</span> + <span class=\"hljs-keyword\">template</span>, this)\n        }\n        <span class=\"hljs-keyword\">return</span> this\n      }\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (el) {\n      template = getOuterHTML(el)\n    }\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">template</span>) {\n      <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n      <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; config.performance &amp;&amp; mark) {\n        mark(<span class=\"hljs-string\">&apos;compile&apos;</span>)\n      }\n\n      const { render, staticRenderFns } = compileToFunctions(<span class=\"hljs-keyword\">template</span>, {\n        shouldDecodeNewlines,\n        shouldDecodeNewlinesForHref,\n        delimiters: <span class=\"hljs-keyword\">options</span>.delimiters,\n        comments: <span class=\"hljs-keyword\">options</span>.comments\n      }, this)\n      <span class=\"hljs-keyword\">options</span>.render = render\n      <span class=\"hljs-keyword\">options</span>.staticRenderFns = staticRenderFns\n\n      <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n      <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; config.performance &amp;&amp; mark) {\n        mark(<span class=\"hljs-string\">&apos;compile end&apos;</span>)\n        measure(`vue &#x24;{this._name} compile`, <span class=\"hljs-string\">&apos;compile&apos;</span>, <span class=\"hljs-string\">&apos;compile end&apos;</span>)\n      }\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> mount.<span class=\"hljs-keyword\">call</span>(this, el, hydrating)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"8,76"}},{"content":"<pre data-lines=\"77,78\"><code>&#x8fd9;&#x6bb5;&#x51fd;&#x6570;&#x903b;&#x8f91;&#x4e4b;&#x524d;&#x5206;&#x6790;&#x8fc7;&#xff0c;&#x5173;&#x4e8e;&#x7f16;&#x8bd1;&#x7684;&#x5165;&#x53e3;&#x5c31;&#x662f;&#x5728;&#x8fd9;&#x91cc;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"77,78"}},{"content":"<pre data-lines=\"79,89\"><code data-lines=\"79,89\">const { render, staticRenderFns } =  compileToFunctions(template, {\n    shouldDecodeNewlines,\n    shouldDecodeNewlinesForHref,\n    delimiters: <span class=\"hljs-keyword\">options</span>.delimiters,\n    comments: <span class=\"hljs-keyword\">options</span>.comments\n  }, <span class=\"hljs-keyword\">this</span>)\n<span class=\"hljs-keyword\">options</span>.render = render\n<span class=\"hljs-keyword\">options</span>.staticRenderFns = staticRenderFns \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"79,89"}},{"content":"<pre data-lines=\"90,91\"><code>`compileToFunctions` &#x65b9;&#x6cd5;&#x5c31;&#x662f;&#x628a;&#x6a21;&#x677f; `template` &#x7f16;&#x8bd1;&#x751f;&#x6210; `render` &#x4ee5;&#x53ca; `staticRenderFns`&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/platforms/web/compiler/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"90,91"}},{"content":"<pre data-lines=\"92,100\"><code data-lines=\"92,100\"><span class=\"hljs-keyword\">import</span> { baseOptions } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./options&apos;</span>\n<span class=\"hljs-keyword\">import</span> { createCompiler } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;compiler/index&apos;</span>\n\nconst { <span class=\"hljs-keyword\">compile</span>, compileToFunctions } = createCompiler(baseOptions)\n\nexport { <span class=\"hljs-keyword\">compile</span>, compileToFunctions } \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"92,100"}},{"content":"<pre data-lines=\"101,102\"><code>&#x53ef;&#x4ee5;&#x770b;&#x5230; `compileToFunctions` &#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x662f; `createCompiler` &#x65b9;&#x6cd5;&#x7684;&#x8fd4;&#x56de;&#x503c;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x63a5;&#x6536;&#x4e00;&#x4e2a;&#x7f16;&#x8bd1;&#x914d;&#x7f6e;&#x53c2;&#x6570;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x6765;&#x770b;&#x4e00;&#x4e0b; `createCompiler` &#x65b9;&#x6cd5;&#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x5728; `src/compiler/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"101,102"}},{"content":"<pre data-lines=\"103,123\"><code data-lines=\"103,123\"><span class=\"hljs-comment\">// `createCompilerCreator` allows creating compilers that use alternative</span>\n<span class=\"hljs-comment\">// parser/optimizer/codegen, e.g the SSR optimizing compiler.</span>\n<span class=\"hljs-comment\">// Here we just export a default compiler using the default parts.</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> createCompiler = createCompilerCreator(<span class=\"hljs-keyword\">function</span> baseCompile (\n  template: <span class=\"hljs-keyword\">string</span>,\n  options: CompilerOptions\n): CompiledResult {\n  <span class=\"hljs-keyword\">const</span> ast = parse(template<span class=\"hljs-variable\">.trim</span>(), options)\n  <span class=\"hljs-keyword\">if</span> (options<span class=\"hljs-variable\">.optimize</span> !== false) {\n    optimize(ast, options)\n  }\n  <span class=\"hljs-keyword\">const</span> code = <span class=\"hljs-keyword\">generate</span>(ast, options)\n  <span class=\"hljs-keyword\">return</span> {\n    ast,\n    render: code<span class=\"hljs-variable\">.render</span>,\n    staticRenderFns: code<span class=\"hljs-variable\">.staticRenderFns</span>\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"103,123"}},{"content":"<pre data-lines=\"124,125\"><code>`createCompiler` &#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x901a;&#x8fc7;&#x8c03;&#x7528; `createCompilerCreator` &#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x4f20;&#x5165;&#x7684;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x771f;&#x6b63;&#x7684;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x90fd;&#x5728;&#x8fd9;&#x4e2a; `baseCompile` &#x51fd;&#x6570;&#x91cc;&#x6267;&#x884c;&#xff0c;&#x90a3;&#x4e48; `createCompilerCreator` &#x53c8;&#x662f;&#x4ec0;&#x4e48;&#x5462;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/create-compiler.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"124,125"}},{"content":"<pre data-lines=\"126,177\"><code data-lines=\"126,177\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createCompilerCreator</span> (<span class=\"hljs-params\">baseCompile: <span class=\"hljs-built_in\">Function</span></span>): <span class=\"hljs-title class_\">Function</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createCompiler</span> (<span class=\"hljs-params\">baseOptions: CompilerOptions</span>) {\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">compile</span> (<span class=\"hljs-params\">\n      template: string,\n      options?: CompilerOptions\n    </span>): <span class=\"hljs-title class_\">CompiledResult</span> {\n      <span class=\"hljs-keyword\">const</span> finalOptions = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(baseOptions)\n      <span class=\"hljs-keyword\">const</span> errors = []\n      <span class=\"hljs-keyword\">const</span> tips = []\n      finalOptions.<span class=\"hljs-property\">warn</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">msg, tip</span>) =&gt;</span> {\n        (tip ? tips : errors).<span class=\"hljs-title function_\">push</span>(msg)\n      }\n\n      <span class=\"hljs-keyword\">if</span> (options) {\n        <span class=\"hljs-comment\">// merge custom modules</span>\n        <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">modules</span>) {\n          finalOptions.<span class=\"hljs-property\">modules</span> =\n            (baseOptions.<span class=\"hljs-property\">modules</span> || []).<span class=\"hljs-title function_\">concat</span>(options.<span class=\"hljs-property\">modules</span>)\n        }\n        <span class=\"hljs-comment\">// merge custom directives</span>\n        <span class=\"hljs-keyword\">if</span> (options.<span class=\"hljs-property\">directives</span>) {\n          finalOptions.<span class=\"hljs-property\">directives</span> = <span class=\"hljs-title function_\">extend</span>(\n            <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(baseOptions.<span class=\"hljs-property\">directives</span> || <span class=\"hljs-literal\">null</span>),\n            options.<span class=\"hljs-property\">directives</span>\n          )\n        }\n        <span class=\"hljs-comment\">// copy other options</span>\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">const</span> key <span class=\"hljs-keyword\">in</span> options) {\n          <span class=\"hljs-keyword\">if</span> (key !== <span class=\"hljs-string\">&apos;modules&apos;</span> &amp;&amp; key !== <span class=\"hljs-string\">&apos;directives&apos;</span>) {\n            finalOptions[key] = options[key]\n          }\n        }\n      }\n\n      <span class=\"hljs-keyword\">const</span> compiled = <span class=\"hljs-title function_\">baseCompile</span>(template, finalOptions)\n      <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n        errors.<span class=\"hljs-property\">push</span>.<span class=\"hljs-title function_\">apply</span>(errors, <span class=\"hljs-title function_\">detectErrors</span>(compiled.<span class=\"hljs-property\">ast</span>))\n      }\n      compiled.<span class=\"hljs-property\">errors</span> = errors\n      compiled.<span class=\"hljs-property\">tips</span> = tips\n      <span class=\"hljs-keyword\">return</span> compiled\n    }\n\n    <span class=\"hljs-keyword\">return</span> {\n      compile,\n      <span class=\"hljs-attr\">compileToFunctions</span>: <span class=\"hljs-title function_\">createCompileToFunctionFn</span>(compile)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"126,177"}},{"content":"<pre data-lines=\"178,179\"><code>&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e86;&#x4e00;&#x4e2a; `createCompiler` &#x7684;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x63a5;&#x6536;&#x4e00;&#x4e2a; `baseOptions` &#x7684;&#x53c2;&#x6570;&#xff0c;&#x8fd4;&#x56de;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x5305;&#x62ec; `compile` &#x65b9;&#x6cd5;&#x5c5e;&#x6027;&#x548c; `compileToFunctions` &#x5c5e;&#x6027;&#xff0c;&#x8fd9;&#x4e2a; `compileToFunctions` &#x5bf9;&#x5e94;&#x7684;&#x5c31;&#x662f; `&#x24;mount` &#x51fd;&#x6570;&#x8c03;&#x7528;&#x7684; `compileToFunctions` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x662f;&#x8c03;&#x7528; `createCompileToFunctionFn` &#x65b9;&#x6cd5;&#x7684;&#x8fd4;&#x56de;&#x503c;&#xff0c;&#x6211;&#x4eec;&#x63a5;&#x4e0b;&#x6765;&#x770b;&#x4e00;&#x4e0b; `createCompileToFunctionFn` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/to-function/js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"178,179"}},{"content":"<pre data-lines=\"180,262\"><code data-lines=\"180,262\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createCompileToFunctionFn</span> (<span class=\"hljs-params\">compile: Function</span>): <span class=\"hljs-title function_\">Function</span> {\n  const cache = Object.create(<span class=\"hljs-literal\">null</span>)\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">compileToFunctions</span> (<span class=\"hljs-params\">\n    template: string,\n    options?: CompilerOptions,\n    vm?: Component\n  </span>): <span class=\"hljs-title function_\">CompiledFunctionResult</span> {\n    options = extend({}, options)\n    const warn = options.warn || baseWarn\n    delete options.warn\n\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n      <span class=\"hljs-comment\">// detect possible CSP restriction</span>\n      <span class=\"hljs-keyword\">try</span> {\n        <span class=\"hljs-keyword\">new</span> <span class=\"hljs-keyword\">Function</span>(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;return 1&apos;</span></span>)\n      } <span class=\"hljs-title function_\">catch</span> (<span class=\"hljs-params\">e</span>) {\n        <span class=\"hljs-keyword\">if</span> (e.toString().match(<span class=\"hljs-regexp\">/unsafe-eval|CSP/</span>)) {\n          warn(\n            <span class=\"hljs-string\">&apos;It seems you are using the standalone build of Vue.js in an &apos;</span> +\n            <span class=\"hljs-string\">&apos;environment with Content Security Policy that prohibits unsafe-eval. &apos;</span> +\n            <span class=\"hljs-string\">&apos;The template compiler cannot work in this environment. Consider &apos;</span> +\n            <span class=\"hljs-string\">&apos;relaxing the policy to allow unsafe-eval or pre-compiling your &apos;</span> +\n            <span class=\"hljs-string\">&apos;templates into render functions.&apos;</span>\n          )\n        }\n      }\n    }\n\n    <span class=\"hljs-comment\">// check cache</span>\n    const key = options.delimiters\n      ? String(options.delimiters) + template\n      : template\n    <span class=\"hljs-keyword\">if</span> (cache[key]) {\n      <span class=\"hljs-keyword\">return</span> cache[key]\n    }\n\n    <span class=\"hljs-comment\">// compile</span>\n    const compiled = compile(template, options)\n\n    <span class=\"hljs-comment\">// check compilation errors/tips</span>\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n      <span class=\"hljs-keyword\">if</span> (compiled.errors &amp;&amp; compiled.errors.<span class=\"hljs-built_in\">length</span>) {\n        warn(\n          <span class=\"hljs-string\">`Error compiling template:\\n\\n<span class=\"hljs-subst\">&#x24;{template}</span>\\n\\n`</span> +\n          compiled.errors.<span class=\"hljs-built_in\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">e</span> =&gt;</span> <span class=\"hljs-string\">`- <span class=\"hljs-subst\">&#x24;{e}</span>`</span>).join(<span class=\"hljs-string\">&apos;\\n&apos;</span>) + <span class=\"hljs-string\">&apos;\\n&apos;</span>,\n          vm\n        )\n      }\n      <span class=\"hljs-keyword\">if</span> (compiled.tips &amp;&amp; compiled.tips.<span class=\"hljs-built_in\">length</span>) {\n        compiled.tips.forEach(<span class=\"hljs-function\"><span class=\"hljs-params\">msg</span> =&gt;</span> tip(msg, vm))\n      }\n    }\n\n    <span class=\"hljs-comment\">// turn code into functions</span>\n    const res = {}\n    const fnGenErrors = []\n    res.render = createFunction(compiled.render, fnGenErrors)\n    res.staticRenderFns = compiled.staticRenderFns.<span class=\"hljs-built_in\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">code</span> =&gt;</span> {\n      <span class=\"hljs-keyword\">return</span> createFunction(code, fnGenErrors)\n    })\n\n    <span class=\"hljs-comment\">// check function generation errors.</span>\n    <span class=\"hljs-comment\">// this should only happen if there is a bug in the compiler itself.</span>\n    <span class=\"hljs-comment\">// mostly for codegen development use</span>\n    <span class=\"hljs-comment\">/* istanbul ignore if */</span>\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n      <span class=\"hljs-keyword\">if</span> ((!compiled.errors || !compiled.errors.<span class=\"hljs-built_in\">length</span>) &amp;&amp; fnGenErrors.<span class=\"hljs-built_in\">length</span>) {\n        warn(\n          <span class=\"hljs-string\">`Failed to generate render function:\\n\\n`</span> +\n          fnGenErrors.<span class=\"hljs-built_in\">map</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">{ err, code }</span>) =&gt;</span> <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{err.toString()}</span> in\\n\\n<span class=\"hljs-subst\">&#x24;{code}</span>\\n`</span>).join(<span class=\"hljs-string\">&apos;\\n&apos;</span>),\n          vm\n        )\n      }\n    }\n\n    <span class=\"hljs-keyword\">return</span> (cache[key] = res)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"180,262"}},{"content":"<pre data-lines=\"263,264\"><code>&#x81f3;&#x6b64;&#x6211;&#x4eec;&#x603b;&#x7b97;&#x627e;&#x5230;&#x4e86; `compileToFunctions` &#x7684;&#x6700;&#x7ec8;&#x5b9a;&#x4e49;&#xff0c;&#x5b83;&#x63a5;&#x6536; 3 &#x4e2a;&#x53c2;&#x6570;&#x3001;&#x7f16;&#x8bd1;&#x6a21;&#x677f; `template`&#xff0c;&#x7f16;&#x8bd1;&#x914d;&#x7f6e; `options` &#x548c; Vue &#x5b9e;&#x4f8b; `vm`&#x3002;&#x6838;&#x5fc3;&#x7684;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x5c31;&#x4e00;&#x884c;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"263,264"}},{"content":"<pre data-lines=\"265,268\"><code data-lines=\"265,268\"><span class=\"hljs-type\">const</span> compiled = <span class=\"hljs-built_in\">compile</span>(<span class=\"hljs-keyword\">template</span>, options) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"265,268"}},{"content":"<pre data-lines=\"269,270\"><code>`compile` &#x51fd;&#x6570;&#x5728;&#x6267;&#x884c; `createCompileToFunctionFn` &#x7684;&#x65f6;&#x5019;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x5b83;&#x662f; `createCompiler` &#x51fd;&#x6570;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; `compile` &#x51fd;&#x6570;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"269,270"}},{"content":"<pre data-lines=\"271,313\"><code data-lines=\"271,313\">function compile (\n  template: string,\n  <span class=\"hljs-keyword\">options</span>?: CompilerOptions\n): CompiledResult {\n  const finalOptions = Object.<span class=\"hljs-keyword\">create</span>(baseOptions)\n  const errors = []\n  const tips = []\n  finalOptions.warn = (msg, tip) =&gt; {\n    (tip ? tips : errors).push(msg)\n  }\n\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">options</span>) {\n    // <span class=\"hljs-keyword\">merge</span> custom modules\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">options</span>.modules) {\n      finalOptions.modules =\n        (baseOptions.modules || []).concat(<span class=\"hljs-keyword\">options</span>.modules)\n    }\n    // <span class=\"hljs-keyword\">merge</span> custom directives\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">options</span>.directives) {\n      finalOptions.directives = extend(\n        Object.<span class=\"hljs-keyword\">create</span>(baseOptions.directives || <span class=\"hljs-keyword\">null</span>),\n        <span class=\"hljs-keyword\">options</span>.directives\n      )\n    }\n    // copy other <span class=\"hljs-keyword\">options</span>\n    for (const <span class=\"hljs-keyword\">key</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-keyword\">options</span>) {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">key</span> !== <span class=\"hljs-string\">&apos;modules&apos;</span> <span class=\"hljs-variable\">&amp;&amp;</span> <span class=\"hljs-keyword\">key</span> !== <span class=\"hljs-string\">&apos;directives&apos;</span>) {\n        finalOptions[<span class=\"hljs-keyword\">key</span>] = <span class=\"hljs-keyword\">options</span>[<span class=\"hljs-keyword\">key</span>]\n      }\n    }\n  }\n\n  const compiled = baseCompile(template, finalOptions)\n  <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">&apos;production&apos;</span>) {\n    errors.push.apply(errors, detectErrors(compiled.ast))\n  }\n  compiled.errors = errors\n  compiled.tips = tips\n  <span class=\"hljs-keyword\">return</span> compiled\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"271,313"}},{"content":"<pre data-lines=\"314,315\"><code>`compile` &#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x903b;&#x8f91;&#x662f;&#x5148;&#x5904;&#x7406;&#x914d;&#x7f6e;&#x53c2;&#x6570;&#xff0c;&#x771f;&#x6b63;&#x6267;&#x884c;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x5c31;&#x4e00;&#x884c;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"314,315"}},{"content":"<pre data-lines=\"316,319\"><code data-lines=\"316,319\"><span class=\"hljs-type\">const</span> compiled = <span class=\"hljs-built_in\">baseCompile</span>(<span class=\"hljs-keyword\">template</span>, finalOptions) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"316,319"}},{"content":"<pre data-lines=\"320,321\"><code>`baseCompile` &#x5728;&#x6267;&#x884c; `createCompilerCreator` &#x65b9;&#x6cd5;&#x65f6;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"320,321"}},{"content":"<pre data-lines=\"322,337\"><code data-lines=\"322,337\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> createCompiler = createCompilerCreator(<span class=\"hljs-keyword\">function</span> baseCompile (\n  template: <span class=\"hljs-keyword\">string</span>,\n  options: CompilerOptions\n): CompiledResult {\n  <span class=\"hljs-keyword\">const</span> ast = parse(template<span class=\"hljs-variable\">.trim</span>(), options)\n  optimize(ast, options)\n  <span class=\"hljs-keyword\">const</span> code = <span class=\"hljs-keyword\">generate</span>(ast, options)\n  <span class=\"hljs-keyword\">return</span> {\n    ast,\n    render: code<span class=\"hljs-variable\">.render</span>,\n    staticRenderFns: code<span class=\"hljs-variable\">.staticRenderFns</span>\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"322,337"}},{"content":"<pre data-lines=\"338,341\"><code>&#x6240;&#x4ee5;&#x7f16;&#x8bd1;&#x7684;&#x5165;&#x53e3;&#x6211;&#x4eec;&#x7ec8;&#x4e8e;&#x627e;&#x5230;&#x4e86;&#xff0c;&#x5b83;&#x4e3b;&#x8981;&#x5c31;&#x662f;&#x6267;&#x884c;&#x4e86;&#x5982;&#x4e0b;&#x51e0;&#x4e2a;&#x903b;&#x8f91;&#xff1a;\n\n*   &#x89e3;&#x6790;&#x6a21;&#x677f;&#x5b57;&#x7b26;&#x4e32;&#x751f;&#x6210; AST\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"338,341"}},{"content":"<pre data-lines=\"342,345\"><code data-lines=\"342,345\">const ast = parse(<span class=\"hljs-keyword\">template</span>.trim(), <span class=\"hljs-keyword\">options</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"342,345"}},{"content":"<pre data-lines=\"346,347\"><code>*   &#x4f18;&#x5316;&#x8bed;&#x6cd5;&#x6811;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"346,347"}},{"content":"<pre data-lines=\"348,351\"><code data-lines=\"348,351\"><span class=\"hljs-function\"><span class=\"hljs-title\">optimize</span><span class=\"hljs-params\">(ast, options)</span></span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"348,351"}},{"content":"<pre data-lines=\"352,353\"><code>*   &#x751f;&#x6210;&#x4ee3;&#x7801;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"352,353"}},{"content":"<pre data-lines=\"354,357\"><code data-lines=\"354,357\"><span class=\"hljs-keyword\">const</span> code = <span class=\"hljs-keyword\">generate</span>(ast, options) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"354,357"}},{"content":"<pre data-lines=\"358,359\"><code>&#x90a3;&#x4e48;&#x63a5;&#x4e0b;&#x6765;&#x7684;&#x7ae0;&#x8282;&#x6211;&#x4f1a;&#x5e26;&#x5927;&#x5bb6;&#x53bb;&#x9010;&#x6b65;&#x5206;&#x6790;&#x8fd9;&#x51e0;&#x4e2a;&#x8fc7;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"358,359"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"363,364\"><code>&#x7f16;&#x8bd1;&#x5165;&#x53e3;&#x903b;&#x8f91;&#x4e4b;&#x6240;&#x4ee5;&#x8fd9;&#x4e48;&#x7ed5;&#xff0c;&#x662f;&#x56e0;&#x4e3a; Vue.js &#x5728;&#x4e0d;&#x540c;&#x7684;&#x5e73;&#x53f0;&#x4e0b;&#x90fd;&#x4f1a;&#x6709;&#x7f16;&#x8bd1;&#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x56e0;&#x6b64;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x4e2d;&#x7684;&#x4f9d;&#x8d56;&#x7684;&#x914d;&#x7f6e; `baseOptions` &#x4f1a;&#x6709;&#x6240;&#x4e0d;&#x540c;&#x3002;&#x800c;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x4f1a;&#x591a;&#x6b21;&#x6267;&#x884c;&#xff0c;&#x4f46;&#x8fd9;&#x540c;&#x4e00;&#x4e2a;&#x5e73;&#x53f0;&#x4e0b;&#x6bcf;&#x4e00;&#x6b21;&#x7684;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x914d;&#x7f6e;&#x53c8;&#x662f;&#x76f8;&#x540c;&#x7684;&#xff0c;&#x4e3a;&#x4e86;&#x4e0d;&#x8ba9;&#x8fd9;&#x4e9b;&#x914d;&#x7f6e;&#x5728;&#x6bcf;&#x6b21;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x90fd;&#x901a;&#x8fc7;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;Vue.js &#x5229;&#x7528;&#x4e86;&#x51fd;&#x6570;&#x67ef;&#x91cc;&#x5316;&#x7684;&#x6280;&#x5de7;&#x5f88;&#x597d;&#x7684;&#x5b9e;&#x73b0;&#x4e86; `baseOptions` &#x7684;&#x53c2;&#x6570;&#x4fdd;&#x7559;&#x3002;&#x540c;&#x6837;&#xff0c;Vue.js &#x4e5f;&#x662f;&#x5229;&#x7528;&#x51fd;&#x6570;&#x67ef;&#x91cc;&#x5316;&#x6280;&#x5de7;&#x628a;&#x57fa;&#x7840;&#x7684;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x51fd;&#x6570;&#x62bd;&#x51fa;&#x6765;&#xff0c;&#x901a;&#x8fc7; `createCompilerCreator(baseCompile)` &#x7684;&#x65b9;&#x5f0f;&#x628a;&#x771f;&#x6b63;&#x7f16;&#x8bd1;&#x7684;&#x8fc7;&#x7a0b;&#x548c;&#x5176;&#x5b83;&#x903b;&#x8f91;&#x5982;&#x5bf9;&#x7f16;&#x8bd1;&#x914d;&#x7f6e;&#x5904;&#x7406;&#x3001;&#x7f13;&#x5b58;&#x5904;&#x7406;&#x7b49;&#x5265;&#x79bb;&#x5f00;&#xff0c;&#x8fd9;&#x6837;&#x7684;&#x8bbe;&#x8ba1;&#x8fd8;&#x662f;&#x975e;&#x5e38;&#x5de7;&#x5999;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"363,364"}}],"payload":{"tag":"h2","lines":"360,362"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
