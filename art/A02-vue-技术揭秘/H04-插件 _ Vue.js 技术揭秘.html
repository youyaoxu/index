<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#%E6%8F%92%E4%BB%B6\">#</a> &#x63d2;&#x4ef6;","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,9\"><code>Vuex &#x9664;&#x4e86;&#x63d0;&#x4f9b;&#x7684;&#x5b58;&#x53d6;&#x80fd;&#x529b;&#xff0c;&#x8fd8;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x79cd;&#x63d2;&#x4ef6;&#x80fd;&#x529b;&#xff0c;&#x8ba9;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x76d1;&#x63a7; `store` &#x7684;&#x53d8;&#x5316;&#x8fc7;&#x7a0b;&#x6765;&#x505a;&#x4e00;&#x4e9b;&#x4e8b;&#x60c5;&#x3002;\n\nVuex &#x7684; `store` &#x63a5;&#x53d7; `plugins` &#x9009;&#x9879;&#xff0c;&#x6211;&#x4eec;&#x5728;&#x5b9e;&#x4f8b;&#x5316; `Store` &#x7684;&#x65f6;&#x5019;&#x53ef;&#x4ee5;&#x4f20;&#x5165;&#x63d2;&#x4ef6;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x7136;&#x540e;&#x5728;&#x6267;&#x884c; `Store` &#x6784;&#x9020;&#x51fd;&#x6570;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c;&#x8fd9;&#x4e9b;&#x63d2;&#x4ef6;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,9"}},{"content":"<pre data-lines=\"10,18\"><code data-lines=\"10,18\"><span class=\"hljs-keyword\">const</span> {\n  plugins = [],\n  strict = <span class=\"hljs-keyword\">false</span>\n} = options\n<span class=\"hljs-comment\">// apply plugins</span>\nplugins.forEach(plugin =&gt; plugin(<span class=\"hljs-keyword\">this</span>)) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"10,18"}},{"content":"<pre data-lines=\"19,20\"><code>&#x5728;&#x6211;&#x4eec;&#x5b9e;&#x9645;&#x9879;&#x76ee;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x7528;&#x5230;&#x7684;&#x6700;&#x591a;&#x7684;&#x5c31;&#x662f; Vuex &#x5185;&#x7f6e;&#x7684; `Logger` &#x63d2;&#x4ef6;&#xff0c;&#x5b83;&#x80fd;&#x591f;&#x5e2e;&#x6211;&#x4eec;&#x8ffd;&#x8e2a; `state` &#x53d8;&#x5316;&#xff0c;&#x7136;&#x540e;&#x8f93;&#x51fa;&#x4e00;&#x4e9b;&#x683c;&#x5f0f;&#x5316;&#x65e5;&#x5fd7;&#x3002;&#x4e0b;&#x9762;&#x6211;&#x4eec;&#x5c31;&#x6765;&#x5206;&#x6790;&#x8fd9;&#x4e2a;&#x63d2;&#x4ef6;&#x7684;&#x5b9e;&#x73b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"19,20"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#logger-%E6%8F%92%E4%BB%B6\">#</a> <code>Logger</code> &#x63d2;&#x4ef6;","children":[{"content":"<pre data-lines=\"24,25\"><code>`Logger` &#x63d2;&#x4ef6;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/plugins/logger.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"24,25"}},{"content":"<pre data-lines=\"26,83\"><code data-lines=\"26,83\">export <span class=\"hljs-keyword\">default</span> function createLogger ({\n  collapsed = true,\n  filter = (mutation, <span class=\"hljs-keyword\">state</span>Before, <span class=\"hljs-keyword\">state</span>After) =&gt; true,\n  transformer = <span class=\"hljs-keyword\">state</span> =&gt; <span class=\"hljs-keyword\">state</span>,\n  mutationTransformer = mut =&gt; mut,\n  logger = console\n} = {}) {\n  return store =&gt; {\n    let prevState = deepCopy(store.<span class=\"hljs-keyword\">state</span>)\n\n    store.subscribe((mutation, <span class=\"hljs-keyword\">state</span>) =&gt; {\n      if (typeof logger === &apos;undefined&apos;) {\n        return\n      }\n      <span class=\"hljs-keyword\">const</span> nextState = deepCopy(<span class=\"hljs-keyword\">state</span>)\n\n      if (filter(mutation, prevState, nextState)) {\n        <span class=\"hljs-keyword\">const</span> time = new Date()\n        <span class=\"hljs-keyword\">const</span> formattedTime = ` @ &#x24;{pad(time.getHours(), <span class=\"hljs-number\">2</span>)}:&#x24;{pad(time.getMinutes(), <span class=\"hljs-number\">2</span>)}:&#x24;{pad(time.getSeconds(), <span class=\"hljs-number\">2</span>)}.&#x24;{pad(time.getMilliseconds(), <span class=\"hljs-number\">3</span>)}`\n        <span class=\"hljs-keyword\">const</span> formattedMutation = mutationTransformer(mutation)\n        <span class=\"hljs-keyword\">const</span> message = `mutation &#x24;{mutation.type}&#x24;{formattedTime}`\n        <span class=\"hljs-keyword\">const</span> startMessage = collapsed\n          ? logger.<span class=\"hljs-keyword\">group</span>Collapsed\n          : logger.<span class=\"hljs-keyword\">group</span>\n\n        // render\n        try {\n          startMessage.call(logger, message)\n        } catch (e) {\n          console.<span class=\"hljs-keyword\">log</span>(message)\n        }\n\n        logger.<span class=\"hljs-keyword\">log</span>(&apos;%c prev <span class=\"hljs-keyword\">state</span>&apos;, &apos;color: <span class=\"hljs-comment\">#9E9E9E; font-weight: bold&apos;, transformer(prevState))</span>\n        logger.<span class=\"hljs-keyword\">log</span>(&apos;%c mutation&apos;, &apos;color: <span class=\"hljs-comment\">#03A9F4; font-weight: bold&apos;, formattedMutation)</span>\n        logger.<span class=\"hljs-keyword\">log</span>(&apos;%c next <span class=\"hljs-keyword\">state</span>&apos;, &apos;color: <span class=\"hljs-comment\">#4CAF50; font-weight: bold&apos;, transformer(nextState))</span>\n\n        try {\n          logger.<span class=\"hljs-keyword\">group</span>End()\n        } catch (e) {\n          logger.<span class=\"hljs-keyword\">log</span>(&apos;&#x2014;&#x2014; <span class=\"hljs-keyword\">log</span> end &#x2014;&#x2014;&apos;)\n        }\n      }\n\n      prevState = nextState\n    })\n  }\n}\n\nfunction repeat (str, times) {\n  return (new Array(times + <span class=\"hljs-number\">1</span>)).join(str)\n}\n\nfunction pad (num, <span class=\"hljs-keyword\">max</span>Length) {\n  return repeat(&apos;<span class=\"hljs-number\">0</span>&apos;, <span class=\"hljs-keyword\">max</span>Length - num.<span class=\"hljs-keyword\">to</span>String().length) + num\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"26,83"}},{"content":"<pre data-lines=\"84,85\"><code>&#x63d2;&#x4ef6;&#x51fd;&#x6570;&#x63a5;&#x6536;&#x7684;&#x53c2;&#x6570;&#x662f; `store` &#x5b9e;&#x4f8b;&#xff0c;&#x5b83;&#x6267;&#x884c;&#x4e86; `store.subscribe` &#x65b9;&#x6cd5;&#xff0c;&#x5148;&#x6765;&#x770b;&#x4e00;&#x4e0b; `subscribe` &#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"84,85"}},{"content":"<pre data-lines=\"86,103\"><code data-lines=\"86,103\">subscribe (fn) {\n  <span class=\"hljs-keyword\">return</span> genericSubscribe(fn, this._subscribers)\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genericSubscribe</span> (<span class=\"hljs-params\">fn, subs</span>) {\n  <span class=\"hljs-keyword\">if</span> (subs.<span class=\"hljs-built_in\">indexOf</span>(fn) &lt; <span class=\"hljs-number\">0</span>) {\n    subs.<span class=\"hljs-built_in\">push</span>(fn)\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n    const i = subs.<span class=\"hljs-built_in\">indexOf</span>(fn)\n    <span class=\"hljs-keyword\">if</span> (i &gt; <span class=\"hljs-number\">-1</span>) {\n      subs.<span class=\"hljs-built_in\">splice</span>(i, <span class=\"hljs-number\">1</span>)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"86,103"}},{"content":"<pre data-lines=\"104,107\"><code>`subscribe` &#x7684;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x5c31;&#x662f;&#x5f80; `this._subscribers` &#x53bb;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; `unsubscribe` &#x7684;&#x65b9;&#x6cd5;&#x3002;\n\n&#x800c;&#x6211;&#x4eec;&#x5728;&#x6267;&#x884c; `store.commit` &#x7684;&#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x904d;&#x5386; `this._subscribers` &#x6267;&#x884c;&#x5b83;&#x4eec;&#x5bf9;&#x5e94;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"104,107"}},{"content":"<pre data-lines=\"108,121\"><code data-lines=\"108,121\"><span class=\"hljs-title function_\">commit</span> (_type, _payload, _options) {\n  <span class=\"hljs-keyword\">const</span> {\n    <span class=\"hljs-keyword\">type</span>,\n    payload,\n    options\n  } = <span class=\"hljs-title function_\">unifyObjectStyle</span>(_type, _payload, _options)\n\n  <span class=\"hljs-keyword\">const</span> mutation = { <span class=\"hljs-keyword\">type</span>, payload }\n  <span class=\"hljs-comment\">// ...</span>\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_subscribers</span>.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">sub</span> =&gt;</span> <span class=\"hljs-title function_\">sub</span>(mutation, <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span>))  \n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"108,121"}},{"content":"<pre data-lines=\"122,127\"><code>&#x56de;&#x5230;&#x6211;&#x4eec;&#x7684; `Logger` &#x51fd;&#x6570;&#xff0c;&#x5b83;&#x76f8;&#x5f53;&#x4e8e;&#x8ba2;&#x9605;&#x4e86; `mutation` &#x7684;&#x63d0;&#x4ea4;&#xff0c;&#x5b83;&#x7684; `prevState` &#x8868;&#x793a;&#x4e4b;&#x524d;&#x7684; `state`&#xff0c;`nextState` &#x8868;&#x793a;&#x63d0;&#x4ea4; `mutation` &#x540e;&#x7684; `state`&#xff0c;&#x8fd9;&#x4e24;&#x4e2a; `state` &#x90fd;&#x9700;&#x8981;&#x6267;&#x884c; `deepCopy` &#x65b9;&#x6cd5;&#x62f7;&#x8d1d;&#x4e00;&#x4efd;&#x5bf9;&#x8c61;&#x7684;&#x526f;&#x672c;&#xff0c;&#x8fd9;&#x6837;&#x5bf9;&#x4ed6;&#x4eec;&#x7684;&#x4fee;&#x6539;&#x5c31;&#x4e0d;&#x4f1a;&#x5f71;&#x54cd;&#x539f;&#x59cb; `store.state`&#x3002;\n\n&#x63a5;&#x4e0b;&#x6765;&#x5c31;&#x6784;&#x9020;&#x4e00;&#x4e9b;&#x683c;&#x5f0f;&#x5316;&#x7684;&#x6d88;&#x606f;&#xff0c;&#x6253;&#x5370;&#x51fa;&#x4e00;&#x4e9b;&#x65f6;&#x95f4;&#x6d88;&#x606f; `message`&#xff0c; &#x4e4b;&#x524d;&#x7684;&#x72b6;&#x6001; `prevState`&#xff0c;&#x5bf9;&#x5e94;&#x7684; `mutation` &#x64cd;&#x4f5c; `formattedMutation` &#x4ee5;&#x53ca;&#x4e0b;&#x4e00;&#x4e2a;&#x72b6;&#x6001; `nextState`&#x3002;\n\n&#x6700;&#x540e;&#x66f4;&#x65b0; `prevState = nextState`&#xff0c;&#x4e3a;&#x4e0b;&#x4e00;&#x6b21;&#x63d0;&#x4ea4; `mutation` &#x8f93;&#x51fa;&#x65e5;&#x5fd7;&#x505a;&#x51c6;&#x5907;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"122,127"}}],"payload":{"tag":"h2","lines":"21,23"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"131,132\"><code>&#x90a3;&#x4e48;&#x81f3;&#x6b64; Vuex &#x7684;&#x63d2;&#x4ef6;&#x5206;&#x6790;&#x5c31;&#x7ed3;&#x675f;&#x4e86;&#xff0c;Vuex &#x4ece;&#x8bbe;&#x8ba1;&#x4e0a;&#x652f;&#x6301;&#x4e86;&#x63d2;&#x4ef6;&#xff0c;&#x8ba9;&#x6211;&#x4eec;&#x5f88;&#x597d;&#x5730;&#x4ece;&#x5916;&#x90e8;&#x8ffd;&#x8e2a; `store` &#x5185;&#x90e8;&#x7684;&#x53d8;&#x5316;&#xff0c;`Logger` &#x63d2;&#x4ef6;&#x5728;&#x6211;&#x4eec;&#x7684;&#x5f00;&#x53d1;&#x9636;&#x6bb5;&#x4e5f;&#x63d0;&#x4f9b;&#x4e86;&#x5f88;&#x597d;&#x5730;&#x6307;&#x5f15;&#x4f5c;&#x7528;&#x3002;&#x5f53;&#x7136;&#x6211;&#x4eec;&#x4e5f;&#x53ef;&#x4ee5;&#x81ea;&#x5df1;&#x53bb;&#x5b9e;&#x73b0; `Vuex` &#x7684;&#x63d2;&#x4ef6;&#xff0c;&#x6765;&#x5e2e;&#x52a9;&#x6211;&#x4eec;&#x5b9e;&#x73b0;&#x4e00;&#x4e9b;&#x7279;&#x5b9a;&#x7684;&#x9700;&#x6c42;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,132"}}],"payload":{"tag":"h2","lines":"128,130"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
