<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Web Worker","children":[{"content":"&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"4,35\"><code>JavaScript &#x8bed;&#x8a00;&#x91c7;&#x7528;&#x7684;&#x662f;&#x5355;&#x7ebf;&#x7a0b;&#x6a21;&#x578b;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x6240;&#x6709;&#x4efb;&#x52a1;&#x53ea;&#x80fd;&#x5728;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x4e0a;&#x5b8c;&#x6210;&#xff0c;&#x4e00;&#x6b21;&#x53ea;&#x80fd;&#x505a;&#x4e00;&#x4ef6;&#x4e8b;&#x3002;&#x524d;&#x9762;&#x7684;&#x4efb;&#x52a1;&#x6ca1;&#x505a;&#x5b8c;&#xff0c;&#x540e;&#x9762;&#x7684;&#x4efb;&#x52a1;&#x53ea;&#x80fd;&#x7b49;&#x7740;&#x3002;&#x968f;&#x7740;&#x7535;&#x8111;&#x8ba1;&#x7b97;&#x80fd;&#x529b;&#x7684;&#x589e;&#x5f3a;&#xff0c;&#x5c24;&#x5176;&#x662f;&#x591a;&#x6838; CPU &#x7684;&#x51fa;&#x73b0;&#xff0c;&#x5355;&#x7ebf;&#x7a0b;&#x5e26;&#x6765;&#x5f88;&#x5927;&#x7684;&#x4e0d;&#x4fbf;&#xff0c;&#x65e0;&#x6cd5;&#x5145;&#x5206;&#x53d1;&#x6325;&#x8ba1;&#x7b97;&#x673a;&#x7684;&#x8ba1;&#x7b97;&#x80fd;&#x529b;&#x3002;\n\nWeb Worker &#x7684;&#x4f5c;&#x7528;&#xff0c;&#x5c31;&#x662f;&#x4e3a; JavaScript &#x521b;&#x9020;&#x591a;&#x7ebf;&#x7a0b;&#x73af;&#x5883;&#xff0c;&#x5141;&#x8bb8;&#x4e3b;&#x7ebf;&#x7a0b;&#x521b;&#x5efa; Worker &#x7ebf;&#x7a0b;&#xff0c;&#x5c06;&#x4e00;&#x4e9b;&#x4efb;&#x52a1;&#x5206;&#x914d;&#x7ed9;&#x540e;&#x8005;&#x8fd0;&#x884c;&#x3002;&#x5728;&#x4e3b;&#x7ebf;&#x7a0b;&#x8fd0;&#x884c;&#x7684;&#x540c;&#x65f6;&#xff0c;Worker &#x7ebf;&#x7a0b;&#x5728;&#x540e;&#x53f0;&#x8fd0;&#x884c;&#xff0c;&#x4e24;&#x8005;&#x4e92;&#x4e0d;&#x5e72;&#x6270;&#x3002;&#x7b49;&#x5230; Worker &#x7ebf;&#x7a0b;&#x5b8c;&#x6210;&#x8ba1;&#x7b97;&#x4efb;&#x52a1;&#xff0c;&#x518d;&#x628a;&#x7ed3;&#x679c;&#x8fd4;&#x56de;&#x7ed9;&#x4e3b;&#x7ebf;&#x7a0b;&#x3002;&#x8fd9;&#x6837;&#x7684;&#x597d;&#x5904;&#x662f;&#xff0c;&#x4e00;&#x4e9b;&#x8ba1;&#x7b97;&#x5bc6;&#x96c6;&#x578b;&#x6216;&#x9ad8;&#x5ef6;&#x8fdf;&#x7684;&#x4efb;&#x52a1;&#x53ef;&#x4ee5;&#x4ea4;&#x7531; Worker &#x7ebf;&#x7a0b;&#x6267;&#x884c;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#xff08;&#x901a;&#x5e38;&#x8d1f;&#x8d23; UI &#x4ea4;&#x4e92;&#xff09;&#x80fd;&#x591f;&#x4fdd;&#x6301;&#x6d41;&#x7545;&#xff0c;&#x4e0d;&#x4f1a;&#x88ab;&#x963b;&#x585e;&#x6216;&#x62d6;&#x6162;&#x3002;\n\nWorker &#x7ebf;&#x7a0b;&#x4e00;&#x65e6;&#x65b0;&#x5efa;&#x6210;&#x529f;&#xff0c;&#x5c31;&#x4f1a;&#x59cb;&#x7ec8;&#x8fd0;&#x884c;&#xff0c;&#x4e0d;&#x4f1a;&#x88ab;&#x4e3b;&#x7ebf;&#x7a0b;&#x4e0a;&#x7684;&#x6d3b;&#x52a8;&#xff08;&#x6bd4;&#x5982;&#x7528;&#x6237;&#x70b9;&#x51fb;&#x6309;&#x94ae;&#x3001;&#x63d0;&#x4ea4;&#x8868;&#x5355;&#xff09;&#x6253;&#x65ad;&#x3002;&#x8fd9;&#x6837;&#x6709;&#x5229;&#x4e8e;&#x968f;&#x65f6;&#x54cd;&#x5e94;&#x4e3b;&#x7ebf;&#x7a0b;&#x7684;&#x901a;&#x4fe1;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x8fd9;&#x4e5f;&#x9020;&#x6210;&#x4e86; Worker &#x6bd4;&#x8f83;&#x8017;&#x8d39;&#x8d44;&#x6e90;&#xff0c;&#x4e0d;&#x5e94;&#x8be5;&#x8fc7;&#x5ea6;&#x4f7f;&#x7528;&#xff0c;&#x800c;&#x4e14;&#x4e00;&#x65e6;&#x4f7f;&#x7528;&#x5b8c;&#x6bd5;&#xff0c;&#x5c31;&#x5e94;&#x8be5;&#x5173;&#x95ed;&#x3002;\n\nWeb Worker &#x6709;&#x4ee5;&#x4e0b;&#x51e0;&#x4e2a;&#x4f7f;&#x7528;&#x6ce8;&#x610f;&#x70b9;&#x3002;\n\n&#xff08;1&#xff09;**&#x540c;&#x6e90;&#x9650;&#x5236;**\n\n&#x5206;&#x914d;&#x7ed9; Worker &#x7ebf;&#x7a0b;&#x8fd0;&#x884c;&#x7684;&#x811a;&#x672c;&#x6587;&#x4ef6;&#xff0c;&#x5fc5;&#x987b;&#x4e0e;&#x4e3b;&#x7ebf;&#x7a0b;&#x7684;&#x811a;&#x672c;&#x6587;&#x4ef6;&#x540c;&#x6e90;&#x3002;\n\n&#xff08;2&#xff09;**DOM &#x9650;&#x5236;**\n\nWorker &#x7ebf;&#x7a0b;&#x6240;&#x5728;&#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;&#xff0c;&#x4e0e;&#x4e3b;&#x7ebf;&#x7a0b;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x65e0;&#x6cd5;&#x8bfb;&#x53d6;&#x4e3b;&#x7ebf;&#x7a0b;&#x6240;&#x5728;&#x7f51;&#x9875;&#x7684; DOM &#x5bf9;&#x8c61;&#xff0c;&#x4e5f;&#x65e0;&#x6cd5;&#x4f7f;&#x7528;`document`&#x3001;`window`&#x3001;`parent`&#x8fd9;&#x4e9b;&#x5bf9;&#x8c61;&#x3002;&#x4f46;&#x662f;&#xff0c;Worker &#x7ebf;&#x7a0b;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;`navigator`&#x5bf9;&#x8c61;&#x548c;`location`&#x5bf9;&#x8c61;&#x3002;\n\n&#xff08;3&#xff09;**&#x5168;&#x5c40;&#x5bf9;&#x8c61;&#x9650;&#x5236;**\n\nWorker &#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;`WorkerGlobalScope`&#xff0c;&#x4e0d;&#x540c;&#x4e8e;&#x7f51;&#x9875;&#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;`Window`&#xff0c;&#x5f88;&#x591a;&#x63a5;&#x53e3;&#x62ff;&#x4e0d;&#x5230;&#x3002;&#x6bd4;&#x5982;&#xff0c;&#x7406;&#x8bba;&#x4e0a; Worker &#x7ebf;&#x7a0b;&#x4e0d;&#x80fd;&#x4f7f;&#x7528;`console.log`&#xff0c;&#x56e0;&#x4e3a;&#x6807;&#x51c6;&#x91cc;&#x9762;&#x6ca1;&#x6709;&#x63d0;&#x5230; Worker &#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;&#x5b58;&#x5728;`console`&#x63a5;&#x53e3;&#xff0c;&#x53ea;&#x5b9a;&#x4e49;&#x4e86;`Navigator`&#x63a5;&#x53e3;&#x548c;`Location`&#x63a5;&#x53e3;&#x3002;&#x4e0d;&#x8fc7;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x5b9e;&#x9645;&#x4e0a;&#x652f;&#x6301; Worker &#x7ebf;&#x7a0b;&#x4f7f;&#x7528;`console.log`&#xff0c;&#x4fdd;&#x9669;&#x7684;&#x505a;&#x6cd5;&#x8fd8;&#x662f;&#x4e0d;&#x4f7f;&#x7528;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x3002;\n\n&#xff08;4&#xff09;**&#x901a;&#x4fe1;&#x8054;&#x7cfb;**\n\nWorker &#x7ebf;&#x7a0b;&#x548c;&#x4e3b;&#x7ebf;&#x7a0b;&#x4e0d;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x4e0a;&#x4e0b;&#x6587;&#x73af;&#x5883;&#xff0c;&#x5b83;&#x4eec;&#x4e0d;&#x80fd;&#x76f4;&#x63a5;&#x901a;&#x4fe1;&#xff0c;&#x5fc5;&#x987b;&#x901a;&#x8fc7;&#x6d88;&#x606f;&#x5b8c;&#x6210;&#x3002;\n\n&#xff08;5&#xff09;**&#x811a;&#x672c;&#x9650;&#x5236;**\n\nWorker &#x7ebf;&#x7a0b;&#x4e0d;&#x80fd;&#x6267;&#x884c;`alert()`&#x65b9;&#x6cd5;&#x548c;`confirm()`&#x65b9;&#x6cd5;&#xff0c;&#x4f46;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; XMLHttpRequest &#x5bf9;&#x8c61;&#x53d1;&#x51fa; AJAX &#x8bf7;&#x6c42;&#x3002;\n\n&#xff08;6&#xff09;**&#x6587;&#x4ef6;&#x9650;&#x5236;**\n\nWorker &#x7ebf;&#x7a0b;&#x65e0;&#x6cd5;&#x8bfb;&#x53d6;&#x672c;&#x5730;&#x6587;&#x4ef6;&#xff0c;&#x5373;&#x4e0d;&#x80fd;&#x6253;&#x5f00;&#x672c;&#x673a;&#x7684;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#xff08;`file://`&#xff09;&#xff0c;&#x5b83;&#x6240;&#x52a0;&#x8f7d;&#x7684;&#x811a;&#x672c;&#xff0c;&#x5fc5;&#x987b;&#x6765;&#x81ea;&#x7f51;&#x7edc;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,35"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"&#x57fa;&#x672c;&#x7528;&#x6cd5;","children":[{"content":"&#x4e3b;&#x7ebf;&#x7a0b;","children":[{"content":"<pre data-lines=\"40,41\"><code>&#x4e3b;&#x7ebf;&#x7a0b;&#x91c7;&#x7528;`new`&#x547d;&#x4ee4;&#xff0c;&#x8c03;&#x7528;`Worker()`&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x65b0;&#x5efa;&#x4e00;&#x4e2a; Worker &#x7ebf;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"40,41"}},{"content":"<pre data-lines=\"42,45\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> worker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(<span class=\"hljs-string\">&apos;work.js&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"42,45"}},{"content":"<pre data-lines=\"46,49\"><code>`Worker()`&#x6784;&#x9020;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x811a;&#x672c;&#x6587;&#x4ef6;&#xff0c;&#x8be5;&#x6587;&#x4ef6;&#x5c31;&#x662f; Worker &#x7ebf;&#x7a0b;&#x6240;&#x8981;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x3002;&#x7531;&#x4e8e; Worker &#x4e0d;&#x80fd;&#x8bfb;&#x53d6;&#x672c;&#x5730;&#x6587;&#x4ef6;&#xff0c;&#x6240;&#x4ee5;&#x8fd9;&#x4e2a;&#x811a;&#x672c;&#x5fc5;&#x987b;&#x6765;&#x81ea;&#x7f51;&#x7edc;&#x3002;&#x5982;&#x679c;&#x4e0b;&#x8f7d;&#x6ca1;&#x6709;&#x6210;&#x529f;&#xff08;&#x6bd4;&#x5982;404&#x9519;&#x8bef;&#xff09;&#xff0c;Worker &#x5c31;&#x4f1a;&#x9ed8;&#x9ed8;&#x5730;&#x5931;&#x8d25;&#x3002;\n\n&#x7136;&#x540e;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x8c03;&#x7528;`worker.postMessage()`&#x65b9;&#x6cd5;&#xff0c;&#x5411; Worker &#x53d1;&#x6d88;&#x606f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,49"}},{"content":"<pre data-lines=\"50,54\"><code class=\"language-javascript\">worker.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;Hello World&apos;</span>);\nworker.<span class=\"hljs-title function_\">postMessage</span>({<span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&apos;echo&apos;</span>, <span class=\"hljs-attr\">args</span>: [<span class=\"hljs-string\">&apos;Work&apos;</span>]});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"50,54"}},{"content":"<pre data-lines=\"55,58\"><code>`worker.postMessage()`&#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#xff0c;&#x5c31;&#x662f;&#x4e3b;&#x7ebf;&#x7a0b;&#x4f20;&#x7ed9; Worker &#x7684;&#x6570;&#x636e;&#x3002;&#x5b83;&#x53ef;&#x4ee5;&#x662f;&#x5404;&#x79cd;&#x6570;&#x636e;&#x7c7b;&#x578b;&#xff0c;&#x5305;&#x62ec;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#x3002;\n\n&#x63a5;&#x7740;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x901a;&#x8fc7;`worker.onmessage`&#x6307;&#x5b9a;&#x76d1;&#x542c;&#x51fd;&#x6570;&#xff0c;&#x63a5;&#x6536;&#x5b50;&#x7ebf;&#x7a0b;&#x53d1;&#x56de;&#x6765;&#x7684;&#x6d88;&#x606f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,58"}},{"content":"<pre data-lines=\"59,69\"><code class=\"language-javascript\">worker.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-title function_\">doSomething</span>(event.<span class=\"hljs-property\">data</span>);\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">doSomething</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">// &#x6267;&#x884c;&#x4efb;&#x52a1;</span>\n  worker.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;Work done!&apos;</span>);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,69"}},{"content":"<pre data-lines=\"70,73\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#x7684;`data`&#x5c5e;&#x6027;&#x53ef;&#x4ee5;&#x83b7;&#x53d6; Worker &#x53d1;&#x6765;&#x7684;&#x6570;&#x636e;&#x3002;\n\nWorker &#x5b8c;&#x6210;&#x4efb;&#x52a1;&#x4ee5;&#x540e;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x5c31;&#x53ef;&#x4ee5;&#x628a;&#x5b83;&#x5173;&#x6389;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"70,73"}},{"content":"<pre data-lines=\"74,77\"><code class=\"language-javascript\">worker.terminate();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"74,77"}}],"payload":{"tag":"h3","lines":"38,39"}},{"content":"Worker &#x7ebf;&#x7a0b;","children":[{"content":"<pre data-lines=\"80,81\"><code>Worker &#x7ebf;&#x7a0b;&#x5185;&#x90e8;&#x9700;&#x8981;&#x6709;&#x4e00;&#x4e2a;&#x76d1;&#x542c;&#x51fd;&#x6570;&#xff0c;&#x76d1;&#x542c;`message`&#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"80,81"}},{"content":"<pre data-lines=\"82,87\"><code class=\"language-javascript\">self.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;message&apos;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  self.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;You said: &apos;</span> + e.<span class=\"hljs-property\">data</span>);\n}, <span class=\"hljs-literal\">false</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"82,87"}},{"content":"<pre data-lines=\"88,89\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`self`&#x4ee3;&#x8868;&#x5b50;&#x7ebf;&#x7a0b;&#x81ea;&#x8eab;&#xff0c;&#x5373;&#x5b50;&#x7ebf;&#x7a0b;&#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x7b49;&#x540c;&#x4e8e;&#x4e0b;&#x9762;&#x4e24;&#x79cd;&#x5199;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"88,89"}},{"content":"<pre data-lines=\"90,101\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// &#x5199;&#x6cd5;&#x4e00;</span>\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;message&apos;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;You said: &apos;</span> + e.<span class=\"hljs-property\">data</span>);\n}, <span class=\"hljs-literal\">false</span>);\n\n<span class=\"hljs-comment\">// &#x5199;&#x6cd5;&#x4e8c;</span>\n<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;message&apos;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;You said: &apos;</span> + e.<span class=\"hljs-property\">data</span>);\n}, <span class=\"hljs-literal\">false</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"90,101"}},{"content":"<pre data-lines=\"102,105\"><code>&#x9664;&#x4e86;&#x4f7f;&#x7528;`self.addEventListener()`&#x6307;&#x5b9a;&#x76d1;&#x542c;&#x51fd;&#x6570;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;`self.onmessage`&#x6307;&#x5b9a;&#x3002;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x4e8b;&#x4ef6;&#x5bf9;&#x8c61;&#xff0c;&#x5b83;&#x7684;`data`&#x5c5e;&#x6027;&#x5305;&#x542b;&#x4e3b;&#x7ebf;&#x7a0b;&#x53d1;&#x6765;&#x7684;&#x6570;&#x636e;&#x3002;`self.postMessage()`&#x65b9;&#x6cd5;&#x7528;&#x6765;&#x5411;&#x4e3b;&#x7ebf;&#x7a0b;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x3002;\n\n&#x6839;&#x636e;&#x4e3b;&#x7ebf;&#x7a0b;&#x53d1;&#x6765;&#x7684;&#x6570;&#x636e;&#xff0c;Worker &#x7ebf;&#x7a0b;&#x53ef;&#x4ee5;&#x8c03;&#x7528;&#x4e0d;&#x540c;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"102,105"}},{"content":"<pre data-lines=\"106,122\"><code class=\"language-javascript\">self.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;message&apos;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-keyword\">var</span> data = e.<span class=\"hljs-property\">data</span>;\n  <span class=\"hljs-keyword\">switch</span> (data.<span class=\"hljs-property\">cmd</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&apos;start&apos;</span>:\n      self.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;WORKER STARTED: &apos;</span> + data.<span class=\"hljs-property\">msg</span>);\n      <span class=\"hljs-keyword\">break</span>;\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&apos;stop&apos;</span>:\n      self.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;WORKER STOPPED: &apos;</span> + data.<span class=\"hljs-property\">msg</span>);\n      self.<span class=\"hljs-title function_\">close</span>(); <span class=\"hljs-comment\">// Terminates the worker.</span>\n      <span class=\"hljs-keyword\">break</span>;\n    <span class=\"hljs-attr\">default</span>:\n      self.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;Unknown command: &apos;</span> + data.<span class=\"hljs-property\">msg</span>);\n  };\n}, <span class=\"hljs-literal\">false</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"106,122"}},{"content":"<pre data-lines=\"123,124\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`self.close()`&#x7528;&#x4e8e;&#x5728; Worker &#x5185;&#x90e8;&#x5173;&#x95ed;&#x81ea;&#x8eab;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"123,124"}}],"payload":{"tag":"h3","lines":"78,79"}},{"content":"Worker &#x52a0;&#x8f7d;&#x811a;&#x672c;","children":[{"content":"<pre data-lines=\"127,128\"><code>Worker &#x5185;&#x90e8;&#x5982;&#x679c;&#x8981;&#x52a0;&#x8f7d;&#x5176;&#x4ed6;&#x811a;&#x672c;&#xff0c;&#x6709;&#x4e00;&#x4e2a;&#x4e13;&#x95e8;&#x7684;&#x65b9;&#x6cd5;`importScripts()`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"127,128"}},{"content":"<pre data-lines=\"129,132\"><code class=\"language-javascript\"><span class=\"hljs-title function_\">importScripts</span>(<span class=\"hljs-string\">&apos;script1.js&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"129,132"}},{"content":"<pre data-lines=\"133,134\"><code>&#x8be5;&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x540c;&#x65f6;&#x52a0;&#x8f7d;&#x591a;&#x4e2a;&#x811a;&#x672c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"133,134"}},{"content":"<pre data-lines=\"135,138\"><code class=\"language-javascript\"><span class=\"hljs-title function_\">importScripts</span>(<span class=\"hljs-string\">&apos;script1.js&apos;</span>, <span class=\"hljs-string\">&apos;script2.js&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"135,138"}}],"payload":{"tag":"h3","lines":"125,126"}},{"content":"&#x9519;&#x8bef;&#x5904;&#x7406;","children":[{"content":"<pre data-lines=\"141,142\"><code>&#x4e3b;&#x7ebf;&#x7a0b;&#x53ef;&#x4ee5;&#x76d1;&#x542c; Worker &#x662f;&#x5426;&#x53d1;&#x751f;&#x9519;&#x8bef;&#x3002;&#x5982;&#x679c;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;Worker &#x4f1a;&#x89e6;&#x53d1;&#x4e3b;&#x7ebf;&#x7a0b;&#x7684;`error`&#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"141,142"}},{"content":"<pre data-lines=\"143,155\"><code class=\"language-javascript\">worker.<span class=\"hljs-title function_\">onerror</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>([\n    <span class=\"hljs-string\">&apos;ERROR: Line &apos;</span>, event.<span class=\"hljs-property\">lineno</span>, <span class=\"hljs-string\">&apos; in &apos;</span>, event.<span class=\"hljs-property\">filename</span>, <span class=\"hljs-string\">&apos;: &apos;</span>, event.<span class=\"hljs-property\">message</span>\n  ].<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&apos;&apos;</span>));\n});\n\n<span class=\"hljs-comment\">// &#x6216;&#x8005;</span>\nworker.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;error&apos;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-comment\">// ...</span>\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"143,155"}},{"content":"<pre data-lines=\"156,157\"><code>Worker &#x5185;&#x90e8;&#x4e5f;&#x53ef;&#x4ee5;&#x76d1;&#x542c;`error`&#x4e8b;&#x4ef6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"156,157"}}],"payload":{"tag":"h3","lines":"139,140"}},{"content":"&#x5173;&#x95ed; Worker","children":[{"content":"<pre data-lines=\"160,161\"><code>&#x4f7f;&#x7528;&#x5b8c;&#x6bd5;&#xff0c;&#x4e3a;&#x4e86;&#x8282;&#x7701;&#x7cfb;&#x7edf;&#x8d44;&#x6e90;&#xff0c;&#x5fc5;&#x987b;&#x5173;&#x95ed; Worker&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"160,161"}},{"content":"<pre data-lines=\"162,169\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// &#x4e3b;&#x7ebf;&#x7a0b;</span>\nworker.<span class=\"hljs-title function_\">terminate</span>();\n\n<span class=\"hljs-comment\">// Worker &#x7ebf;&#x7a0b;</span>\nself.<span class=\"hljs-title function_\">close</span>();\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"162,169"}}],"payload":{"tag":"h3","lines":"158,159"}}],"payload":{"tag":"h2","lines":"36,37"}},{"content":"&#x6570;&#x636e;&#x901a;&#x4fe1;","children":[{"content":"<pre data-lines=\"172,175\"><code>&#x524d;&#x9762;&#x8bf4;&#x8fc7;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x4e0e; Worker &#x4e4b;&#x95f4;&#x7684;&#x901a;&#x4fe1;&#x5185;&#x5bb9;&#xff0c;&#x53ef;&#x4ee5;&#x662f;&#x6587;&#x672c;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x662f;&#x5bf9;&#x8c61;&#x3002;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x8fd9;&#x79cd;&#x901a;&#x4fe1;&#x662f;&#x62f7;&#x8d1d;&#x5173;&#x7cfb;&#xff0c;&#x5373;&#x662f;&#x4f20;&#x503c;&#x800c;&#x4e0d;&#x662f;&#x4f20;&#x5740;&#xff0c;Worker &#x5bf9;&#x901a;&#x4fe1;&#x5185;&#x5bb9;&#x7684;&#x4fee;&#x6539;&#xff0c;&#x4e0d;&#x4f1a;&#x5f71;&#x54cd;&#x5230;&#x4e3b;&#x7ebf;&#x7a0b;&#x3002;&#x4e8b;&#x5b9e;&#x4e0a;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x5185;&#x90e8;&#x7684;&#x8fd0;&#x884c;&#x673a;&#x5236;&#x662f;&#xff0c;&#x5148;&#x5c06;&#x901a;&#x4fe1;&#x5185;&#x5bb9;&#x4e32;&#x884c;&#x5316;&#xff0c;&#x7136;&#x540e;&#x628a;&#x4e32;&#x884c;&#x5316;&#x540e;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#x53d1;&#x7ed9; Worker&#xff0c;&#x540e;&#x8005;&#x518d;&#x5c06;&#x5b83;&#x8fd8;&#x539f;&#x3002;\n\n&#x4e3b;&#x7ebf;&#x7a0b;&#x4e0e; Worker &#x4e4b;&#x95f4;&#x4e5f;&#x53ef;&#x4ee5;&#x4ea4;&#x6362;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#xff0c;&#x6bd4;&#x5982; File&#x3001;Blob&#x3001;ArrayBuffer &#x7b49;&#x7c7b;&#x578b;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5728;&#x7ebf;&#x7a0b;&#x4e4b;&#x95f4;&#x53d1;&#x9001;&#x3002;&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"172,175"}},{"content":"<pre data-lines=\"176,191\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// &#x4e3b;&#x7ebf;&#x7a0b;</span>\n<span class=\"hljs-keyword\">var</span> uInt8Array = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Uint8Array</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayBuffer</span>(<span class=\"hljs-number\">10</span>));\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; uInt8Array.<span class=\"hljs-property\">length</span>; ++i) {\n  uInt8Array[i] = i * <span class=\"hljs-number\">2</span>; <span class=\"hljs-comment\">// [0, 2, 4, 6, 8,...]</span>\n}\nworker.<span class=\"hljs-title function_\">postMessage</span>(uInt8Array);\n\n<span class=\"hljs-comment\">// Worker &#x7ebf;&#x7a0b;</span>\nself.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-keyword\">var</span> uInt8Array = e.<span class=\"hljs-property\">data</span>;\n  <span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;Inside worker.js: uInt8Array.toString() = &apos;</span> + uInt8Array.<span class=\"hljs-title function_\">toString</span>());\n  <span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;Inside worker.js: uInt8Array.byteLength = &apos;</span> + uInt8Array.<span class=\"hljs-property\">byteLength</span>);\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"176,191"}},{"content":"<pre data-lines=\"192,195\"><code>&#x4f46;&#x662f;&#xff0c;&#x62f7;&#x8d1d;&#x65b9;&#x5f0f;&#x53d1;&#x9001;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#xff0c;&#x4f1a;&#x9020;&#x6210;&#x6027;&#x80fd;&#x95ee;&#x9898;&#x3002;&#x6bd4;&#x5982;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x5411; Worker &#x53d1;&#x9001;&#x4e00;&#x4e2a; 500MB &#x6587;&#x4ef6;&#xff0c;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#x6d4f;&#x89c8;&#x5668;&#x4f1a;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x539f;&#x6587;&#x4ef6;&#x7684;&#x62f7;&#x8d1d;&#x3002;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#xff0c;JavaScript &#x5141;&#x8bb8;&#x4e3b;&#x7ebf;&#x7a0b;&#x628a;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#x76f4;&#x63a5;&#x8f6c;&#x79fb;&#x7ed9;&#x5b50;&#x7ebf;&#x7a0b;&#xff0c;&#x4f46;&#x662f;&#x4e00;&#x65e6;&#x8f6c;&#x79fb;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x5c31;&#x65e0;&#x6cd5;&#x518d;&#x4f7f;&#x7528;&#x8fd9;&#x4e9b;&#x4e8c;&#x8fdb;&#x5236;&#x6570;&#x636e;&#x4e86;&#xff0c;&#x8fd9;&#x662f;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x51fa;&#x73b0;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x540c;&#x65f6;&#x4fee;&#x6539;&#x6570;&#x636e;&#x7684;&#x9ebb;&#x70e6;&#x5c40;&#x9762;&#x3002;&#x8fd9;&#x79cd;&#x8f6c;&#x79fb;&#x6570;&#x636e;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x53eb;&#x505a;[Transferable Objects](http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#transferable-objects)&#x3002;&#x8fd9;&#x4f7f;&#x5f97;&#x4e3b;&#x7ebf;&#x7a0b;&#x53ef;&#x4ee5;&#x5feb;&#x901f;&#x628a;&#x6570;&#x636e;&#x4ea4;&#x7ed9; Worker&#xff0c;&#x5bf9;&#x4e8e;&#x5f71;&#x50cf;&#x5904;&#x7406;&#x3001;&#x58f0;&#x97f3;&#x5904;&#x7406;&#x3001;3D &#x8fd0;&#x7b97;&#x7b49;&#x5c31;&#x975e;&#x5e38;&#x65b9;&#x4fbf;&#x4e86;&#xff0c;&#x4e0d;&#x4f1a;&#x4ea7;&#x751f;&#x6027;&#x80fd;&#x8d1f;&#x62c5;&#x3002;\n\n&#x5982;&#x679c;&#x8981;&#x76f4;&#x63a5;&#x8f6c;&#x79fb;&#x6570;&#x636e;&#x7684;&#x63a7;&#x5236;&#x6743;&#xff0c;&#x5c31;&#x8981;&#x4f7f;&#x7528;&#x4e0b;&#x9762;&#x7684;&#x5199;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"192,195"}},{"content":"<pre data-lines=\"196,204\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// Transferable Objects &#x683c;&#x5f0f;</span>\nworker.<span class=\"hljs-title function_\">postMessage</span>(arrayBuffer, [arrayBuffer]);\n\n<span class=\"hljs-comment\">// &#x4f8b;&#x5b50;</span>\n<span class=\"hljs-keyword\">var</span> ab = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ArrayBuffer</span>(<span class=\"hljs-number\">1</span>);\nworker.<span class=\"hljs-title function_\">postMessage</span>(ab, [ab]);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"196,204"}}],"payload":{"tag":"h2","lines":"170,171"}},{"content":"&#x540c;&#x9875;&#x9762;&#x7684; Web Worker","children":[{"content":"<pre data-lines=\"207,208\"><code>&#x901a;&#x5e38;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;Worker &#x8f7d;&#x5165;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x5355;&#x72ec;&#x7684; JavaScript &#x811a;&#x672c;&#x6587;&#x4ef6;&#xff0c;&#x4f46;&#x662f;&#x4e5f;&#x53ef;&#x4ee5;&#x8f7d;&#x5165;&#x4e0e;&#x4e3b;&#x7ebf;&#x7a0b;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x7f51;&#x9875;&#x7684;&#x4ee3;&#x7801;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"207,208"}},{"content":"<pre data-lines=\"209,220\"><code class=\"language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;worker&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;app/worker&quot;</span>&gt;</span><span class=\"language-javascript\">\n      <span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;message&apos;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;some message&apos;</span>);\n      }, <span class=\"hljs-literal\">false</span>);\n    </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"209,220"}},{"content":"<pre data-lines=\"221,224\"><code>&#x4e0a;&#x9762;&#x662f;&#x4e00;&#x6bb5;&#x5d4c;&#x5165;&#x7f51;&#x9875;&#x7684;&#x811a;&#x672c;&#xff0c;&#x6ce8;&#x610f;&#x5fc5;&#x987b;&#x6307;&#x5b9a;`&lt;script&gt;`&#x6807;&#x7b7e;&#x7684;`type`&#x5c5e;&#x6027;&#x662f;&#x4e00;&#x4e2a;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x8ba4;&#x8bc6;&#x7684;&#x503c;&#xff0c;&#x4e0a;&#x4f8b;&#x662f;`app/worker`&#x3002;\n\n&#x7136;&#x540e;&#xff0c;&#x8bfb;&#x53d6;&#x8fd9;&#x4e00;&#x6bb5;&#x5d4c;&#x5165;&#x9875;&#x9762;&#x7684;&#x811a;&#x672c;&#xff0c;&#x7528; Worker &#x6765;&#x5904;&#x7406;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"221,224"}},{"content":"<pre data-lines=\"225,234\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> blob = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Blob</span>([<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&apos;#worker&apos;</span>).<span class=\"hljs-property\">textContent</span>]);\n<span class=\"hljs-keyword\">var</span> url = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">URL</span>.<span class=\"hljs-title function_\">createObjectURL</span>(blob);\n<span class=\"hljs-keyword\">var</span> worker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(url);\n\nworker.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-comment\">// e.data === &apos;some message&apos;</span>\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"225,234"}},{"content":"<pre data-lines=\"235,236\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5148;&#x5c06;&#x5d4c;&#x5165;&#x7f51;&#x9875;&#x7684;&#x811a;&#x672c;&#x4ee3;&#x7801;&#xff0c;&#x8f6c;&#x6210;&#x4e00;&#x4e2a;&#x4e8c;&#x8fdb;&#x5236;&#x5bf9;&#x8c61;&#xff0c;&#x7136;&#x540e;&#x4e3a;&#x8fd9;&#x4e2a;&#x4e8c;&#x8fdb;&#x5236;&#x5bf9;&#x8c61;&#x751f;&#x6210; URL&#xff0c;&#x518d;&#x8ba9; Worker &#x52a0;&#x8f7d;&#x8fd9;&#x4e2a; URL&#x3002;&#x8fd9;&#x6837;&#x5c31;&#x505a;&#x5230;&#x4e86;&#xff0c;&#x4e3b;&#x7ebf;&#x7a0b;&#x548c; Worker &#x7684;&#x4ee3;&#x7801;&#x90fd;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x7f51;&#x9875;&#x4e0a;&#x9762;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"235,236"}}],"payload":{"tag":"h2","lines":"205,206"}},{"content":"&#x5b9e;&#x4f8b;&#xff1a;Worker &#x7ebf;&#x7a0b;&#x5b8c;&#x6210;&#x8f6e;&#x8be2;","children":[{"content":"<pre data-lines=\"239,240\"><code>&#x6709;&#x65f6;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x9700;&#x8981;&#x8f6e;&#x8be2;&#x670d;&#x52a1;&#x5668;&#x72b6;&#x6001;&#xff0c;&#x4ee5;&#x4fbf;&#x7b2c;&#x4e00;&#x65f6;&#x95f4;&#x5f97;&#x77e5;&#x72b6;&#x6001;&#x6539;&#x53d8;&#x3002;&#x8fd9;&#x4e2a;&#x5de5;&#x4f5c;&#x53ef;&#x4ee5;&#x653e;&#x5728; Worker &#x91cc;&#x9762;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"239,240"}},{"content":"<pre data-lines=\"241,272\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createWorker</span>(<span class=\"hljs-params\">f</span>) {\n  <span class=\"hljs-keyword\">var</span> blob = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Blob</span>([<span class=\"hljs-string\">&apos;(&apos;</span> + f.<span class=\"hljs-title function_\">toString</span>() + <span class=\"hljs-string\">&apos;)()&apos;</span>]);\n  <span class=\"hljs-keyword\">var</span> url = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">URL</span>.<span class=\"hljs-title function_\">createObjectURL</span>(blob);\n  <span class=\"hljs-keyword\">var</span> worker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(url);\n  <span class=\"hljs-keyword\">return</span> worker;\n}\n\n<span class=\"hljs-keyword\">var</span> pollingWorker = <span class=\"hljs-title function_\">createWorker</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">e</span>) {\n  <span class=\"hljs-keyword\">var</span> cache;\n\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">compare</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">new</span>, old</span>) { ... };\n\n  <span class=\"hljs-built_in\">setInterval</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&apos;/my-api-endpoint&apos;</span>).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">res</span>) {\n      <span class=\"hljs-keyword\">var</span> data = res.<span class=\"hljs-title function_\">json</span>();\n\n      <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">compare</span>(data, cache)) {\n        cache = data;\n        self.<span class=\"hljs-title function_\">postMessage</span>(data);\n      }\n    })\n  }, <span class=\"hljs-number\">1000</span>)\n});\n\npollingWorker.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-comment\">// render data</span>\n}\n\npollingWorker.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&apos;init&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"241,272"}},{"content":"<pre data-lines=\"273,274\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;Worker &#x6bcf;&#x79d2;&#x949f;&#x8f6e;&#x8be2;&#x4e00;&#x6b21;&#x6570;&#x636e;&#xff0c;&#x7136;&#x540e;&#x8ddf;&#x7f13;&#x5b58;&#x505a;&#x6bd4;&#x8f83;&#x3002;&#x5982;&#x679c;&#x4e0d;&#x4e00;&#x81f4;&#xff0c;&#x5c31;&#x8bf4;&#x660e;&#x670d;&#x52a1;&#x7aef;&#x6709;&#x4e86;&#x65b0;&#x7684;&#x53d8;&#x5316;&#xff0c;&#x56e0;&#x6b64;&#x5c31;&#x8981;&#x901a;&#x77e5;&#x4e3b;&#x7ebf;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"273,274"}}],"payload":{"tag":"h2","lines":"237,238"}},{"content":"&#x5b9e;&#x4f8b;&#xff1a; Worker &#x65b0;&#x5efa; Worker","children":[{"content":"<pre data-lines=\"277,280\"><code>Worker &#x7ebf;&#x7a0b;&#x5185;&#x90e8;&#x8fd8;&#x80fd;&#x518d;&#x65b0;&#x5efa; Worker &#x7ebf;&#x7a0b;&#xff08;&#x76ee;&#x524d;&#x53ea;&#x6709; Firefox &#x6d4f;&#x89c8;&#x5668;&#x652f;&#x6301;&#xff09;&#x3002;&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x662f;&#x5c06;&#x4e00;&#x4e2a;&#x8ba1;&#x7b97;&#x5bc6;&#x96c6;&#x7684;&#x4efb;&#x52a1;&#xff0c;&#x5206;&#x914d;&#x5230;10&#x4e2a; Worker&#x3002;\n\n&#x4e3b;&#x7ebf;&#x7a0b;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"277,280"}},{"content":"<pre data-lines=\"281,287\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> worker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(<span class=\"hljs-string\">&apos;worker.js&apos;</span>);\nworker.<span class=\"hljs-property\">onmessage</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">event</span>) {\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;result&apos;</span>).<span class=\"hljs-property\">textContent</span> = event.<span class=\"hljs-property\">data</span>;\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,287"}},{"content":"<pre data-lines=\"288,289\"><code>Worker &#x7ebf;&#x7a0b;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"288,289"}},{"content":"<pre data-lines=\"290,315\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// worker.js</span>\n\n<span class=\"hljs-comment\">// settings</span>\n<span class=\"hljs-keyword\">var</span> num_workers = <span class=\"hljs-number\">10</span>;\n<span class=\"hljs-keyword\">var</span> items_per_worker = <span class=\"hljs-number\">1000000</span>;\n\n<span class=\"hljs-comment\">// start the workers</span>\n<span class=\"hljs-keyword\">var</span> result = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">var</span> pending_workers = num_workers;\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; num_workers; i += <span class=\"hljs-number\">1</span>) {\n  <span class=\"hljs-keyword\">var</span> worker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(<span class=\"hljs-string\">&apos;core.js&apos;</span>);\n  worker.<span class=\"hljs-title function_\">postMessage</span>(i * items_per_worker);\n  worker.<span class=\"hljs-title function_\">postMessage</span>((i + <span class=\"hljs-number\">1</span>) * items_per_worker);\n  worker.<span class=\"hljs-property\">onmessage</span> = storeResult;\n}\n\n<span class=\"hljs-comment\">// handle the results</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">storeResult</span>(<span class=\"hljs-params\">event</span>) {\n  result += event.<span class=\"hljs-property\">data</span>;\n  pending_workers -= <span class=\"hljs-number\">1</span>;\n  <span class=\"hljs-keyword\">if</span> (pending_workers &lt;= <span class=\"hljs-number\">0</span>)\n    <span class=\"hljs-title function_\">postMessage</span>(result); <span class=\"hljs-comment\">// finished!</span>\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"290,315"}},{"content":"<pre data-lines=\"316,317\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;Worker &#x7ebf;&#x7a0b;&#x5185;&#x90e8;&#x65b0;&#x5efa;&#x4e86;10&#x4e2a; Worker &#x7ebf;&#x7a0b;&#xff0c;&#x5e76;&#x4e14;&#x4f9d;&#x6b21;&#x5411;&#x8fd9;10&#x4e2a; Worker &#x53d1;&#x9001;&#x6d88;&#x606f;&#xff0c;&#x544a;&#x77e5;&#x4e86;&#x8ba1;&#x7b97;&#x7684;&#x8d77;&#x70b9;&#x548c;&#x7ec8;&#x70b9;&#x3002;&#x8ba1;&#x7b97;&#x4efb;&#x52a1;&#x811a;&#x672c;&#x7684;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"316,317"}},{"content":"<pre data-lines=\"318,344\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// core.js</span>\n<span class=\"hljs-keyword\">var</span> start;\nonmessage = getStart;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getStart</span>(<span class=\"hljs-params\">event</span>) {\n  start = event.<span class=\"hljs-property\">data</span>;\n  onmessage = getEnd;\n}\n\n<span class=\"hljs-keyword\">var</span> end;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getEnd</span>(<span class=\"hljs-params\">event</span>) {\n  end = event.<span class=\"hljs-property\">data</span>;\n  onmessage = <span class=\"hljs-literal\">null</span>;\n  <span class=\"hljs-title function_\">work</span>();\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">work</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> result = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = start; i &lt; end; i += <span class=\"hljs-number\">1</span>) {\n    <span class=\"hljs-comment\">// perform some complex calculation here</span>\n    result += <span class=\"hljs-number\">1</span>;\n  }\n  <span class=\"hljs-title function_\">postMessage</span>(result);\n  <span class=\"hljs-title function_\">close</span>();\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"318,344"}}],"payload":{"tag":"h2","lines":"275,276"}},{"content":"API","children":[{"content":"&#x4e3b;&#x7ebf;&#x7a0b;","children":[{"content":"<pre data-lines=\"349,350\"><code>&#x6d4f;&#x89c8;&#x5668;&#x539f;&#x751f;&#x63d0;&#x4f9b;`Worker()`&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x7528;&#x6765;&#x4f9b;&#x4e3b;&#x7ebf;&#x7a0b;&#x751f;&#x6210; Worker &#x7ebf;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"349,350"}},{"content":"<pre data-lines=\"351,354\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> myWorker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(jsUrl, options);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"351,354"}},{"content":"<pre data-lines=\"355,356\"><code>`Worker()`&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x3002;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x811a;&#x672c;&#x7684;&#x7f51;&#x5740;&#xff08;&#x5fc5;&#x987b;&#x9075;&#x5b88;&#x540c;&#x6e90;&#x653f;&#x7b56;&#xff09;&#xff0c;&#x8be5;&#x53c2;&#x6570;&#x662f;&#x5fc5;&#x9700;&#x7684;&#xff0c;&#x4e14;&#x53ea;&#x80fd;&#x52a0;&#x8f7d; JS &#x811a;&#x672c;&#xff0c;&#x5426;&#x5219;&#x4f1a;&#x62a5;&#x9519;&#x3002;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x914d;&#x7f6e;&#x5bf9;&#x8c61;&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x53ef;&#x9009;&#x3002;&#x5b83;&#x7684;&#x4e00;&#x4e2a;&#x4f5c;&#x7528;&#x5c31;&#x662f;&#x6307;&#x5b9a; Worker &#x7684;&#x540d;&#x79f0;&#xff0c;&#x7528;&#x6765;&#x533a;&#x5206;&#x591a;&#x4e2a; Worker &#x7ebf;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"355,356"}},{"content":"<pre data-lines=\"357,364\"><code class=\"language-javascript\"><span class=\"hljs-comment\">// &#x4e3b;&#x7ebf;&#x7a0b;</span>\n<span class=\"hljs-keyword\">var</span> myWorker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Worker</span>(<span class=\"hljs-string\">&apos;worker.js&apos;</span>, { name : <span class=\"hljs-string\">&apos;myWorker&apos;</span> });\n\n<span class=\"hljs-comment\">// Worker &#x7ebf;&#x7a0b;</span>\nself.<span class=\"hljs-property\">name</span> <span class=\"hljs-comment\">// myWorker</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"357,364"}},{"content":"<pre data-lines=\"365,372\"><code>`Worker()`&#x6784;&#x9020;&#x51fd;&#x6570;&#x8fd4;&#x56de;&#x4e00;&#x4e2a; Worker &#x7ebf;&#x7a0b;&#x5bf9;&#x8c61;&#xff0c;&#x7528;&#x6765;&#x4f9b;&#x4e3b;&#x7ebf;&#x7a0b;&#x64cd;&#x4f5c; Worker&#x3002;Worker &#x7ebf;&#x7a0b;&#x5bf9;&#x8c61;&#x7684;&#x5c5e;&#x6027;&#x548c;&#x65b9;&#x6cd5;&#x5982;&#x4e0b;&#x3002;\n\n- Worker.onerror&#xff1a;&#x6307;&#x5b9a; error &#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- Worker.onmessage&#xff1a;&#x6307;&#x5b9a; message &#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#xff0c;&#x53d1;&#x9001;&#x8fc7;&#x6765;&#x7684;&#x6570;&#x636e;&#x5728;`Event.data`&#x5c5e;&#x6027;&#x4e2d;&#x3002;\n- Worker.onmessageerror&#xff1a;&#x6307;&#x5b9a; messageerror &#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;&#x53d1;&#x9001;&#x7684;&#x6570;&#x636e;&#x65e0;&#x6cd5;&#x5e8f;&#x5217;&#x5316;&#x6210;&#x5b57;&#x7b26;&#x4e32;&#x65f6;&#xff0c;&#x4f1a;&#x89e6;&#x53d1;&#x8fd9;&#x4e2a;&#x4e8b;&#x4ef6;&#x3002;\n- Worker.postMessage()&#xff1a;&#x5411; Worker &#x7ebf;&#x7a0b;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x3002;\n- Worker.terminate()&#xff1a;&#x7acb;&#x5373;&#x7ec8;&#x6b62; Worker &#x7ebf;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"365,372"}}],"payload":{"tag":"h3","lines":"347,348"}},{"content":"Worker &#x7ebf;&#x7a0b;","children":[{"content":"<pre data-lines=\"375,387\"><code>Web Worker &#x6709;&#x81ea;&#x5df1;&#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;&#xff0c;&#x4e0d;&#x662f;&#x4e3b;&#x7ebf;&#x7a0b;&#x7684;`window`&#xff0c;&#x800c;&#x662f;&#x4e00;&#x4e2a;&#x4e13;&#x95e8;&#x4e3a; Worker &#x5b9a;&#x5236;&#x7684;&#x5168;&#x5c40;&#x5bf9;&#x8c61;&#x3002;&#x56e0;&#x6b64;&#x5b9a;&#x4e49;&#x5728;`window`&#x4e0a;&#x9762;&#x7684;&#x5bf9;&#x8c61;&#x548c;&#x65b9;&#x6cd5;&#x4e0d;&#x662f;&#x5168;&#x90e8;&#x90fd;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x3002;\n\nWorker &#x7ebf;&#x7a0b;&#x6709;&#x4e00;&#x4e9b;&#x81ea;&#x5df1;&#x7684;&#x5168;&#x5c40;&#x5c5e;&#x6027;&#x548c;&#x65b9;&#x6cd5;&#x3002;\n\n- self.name&#xff1a; Worker &#x7684;&#x540d;&#x5b57;&#x3002;&#x8be5;&#x5c5e;&#x6027;&#x53ea;&#x8bfb;&#xff0c;&#x7531;&#x6784;&#x9020;&#x51fd;&#x6570;&#x6307;&#x5b9a;&#x3002;\n- self.onmessage&#xff1a;&#x6307;&#x5b9a;`message`&#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n- self.onmessageerror&#xff1a;&#x6307;&#x5b9a; messageerror &#x4e8b;&#x4ef6;&#x7684;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;&#x53d1;&#x9001;&#x7684;&#x6570;&#x636e;&#x65e0;&#x6cd5;&#x5e8f;&#x5217;&#x5316;&#x6210;&#x5b57;&#x7b26;&#x4e32;&#x65f6;&#xff0c;&#x4f1a;&#x89e6;&#x53d1;&#x8fd9;&#x4e2a;&#x4e8b;&#x4ef6;&#x3002;\n- self.close()&#xff1a;&#x5173;&#x95ed; Worker &#x7ebf;&#x7a0b;&#x3002;\n- self.postMessage()&#xff1a;&#x5411;&#x4ea7;&#x751f;&#x8fd9;&#x4e2a; Worker &#x7ebf;&#x7a0b;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x3002;\n- self.importScripts()&#xff1a;&#x52a0;&#x8f7d; JS &#x811a;&#x672c;&#x3002;\n\n&#xff08;&#x5b8c;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"375,387"}}],"payload":{"tag":"h3","lines":"373,374"}}],"payload":{"tag":"h2","lines":"345,346"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
