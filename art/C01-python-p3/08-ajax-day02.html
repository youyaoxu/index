<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"08-ajax-day02","children":[{"content":"&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"4,115\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask\n<span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> render_template\n<span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> request\n\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-comment\"># app = Flask(__name__,static_folder=&apos;static&apos;,template_folder=&apos;templates&apos;)</span>\napp = Flask(__name__)\n\n<span class=\"hljs-comment\">#&#x663e;&#x793a;&#x6a21;&#x677f;&#x9875;&#x9762;</span>\n<span class=\"hljs-comment\"># http://127.0.0.1:5000/demo</span>\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/demo&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">demo_view</span>():\n    <span class=\"hljs-comment\"># return &apos;&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x6f14;&#x793a;&#x7684;&#x9875;&#x9762;&apos;</span>\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;demo.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/demo_server&apos;</span>,methods=[<span class=\"hljs-string\">&apos;get&apos;</span>,<span class=\"hljs-string\">&apos;post&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">demo_server</span>():\n    <span class=\"hljs-comment\"># request.args get&#x8bf7;&#x6c42;&#x7684;&#x6570;&#x636e;</span>\n    <span class=\"hljs-comment\"># username = request.args.get(&apos;username&apos;)</span>\n    <span class=\"hljs-comment\"># request.form  post&#x8bf7;&#x6c42;&#x7684;&#x6570;&#x636e;</span>\n    username = request.form.get(<span class=\"hljs-string\">&apos;username&apos;</span>)\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;&#x6b22;&#x8fce; %s&apos;</span> % username\n\n<span class=\"hljs-comment\"># http://127.0.0.1:5000/login</span>\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/login&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login_view</span>():\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;homework.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/login_server&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login_server</span>():\n    username = request.args.get(<span class=\"hljs-string\">&apos;username&apos;</span>)\n    <span class=\"hljs-built_in\">print</span>(username)\n    user_list = [<span class=\"hljs-string\">&apos;qtx&apos;</span>,<span class=\"hljs-string\">&apos;maria&apos;</span>,<span class=\"hljs-string\">&apos;shibw&apos;</span>,<span class=\"hljs-string\">&apos;guoxiaonao&apos;</span>]\n    <span class=\"hljs-comment\">#&#x5982;&#x679c;&#x524d;&#x7aef;&#x6570;&#x636e;&#x63d0;&#x4ea4;&#x7684;&#x7528;&#x6237;&#x540d;&#x5728;user_list&#x4e2d; &#x5c31;&#x7981;&#x6b62;&#x4f7f;&#x7528;</span>\n    <span class=\"hljs-comment\">#&#x89c4;&#x5b9a;101&#x8868;&#x793a;&#x7528;&#x6237;&#x540d;&#x91cd;&#x590d;    102&#x8868;&#x793a;&#x7528;&#x6237;&#x540d;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;</span>\n    <span class=\"hljs-keyword\">if</span> username <span class=\"hljs-keyword\">in</span> user_list:\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;101&apos;</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;102&apos;</span>\n\n<span class=\"hljs-comment\"># http://127.0.0.1:5000/post</span>\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/post&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">post_view</span>():\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;post.html&apos;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/post_server&apos;</span>,methods=[<span class=\"hljs-string\">&apos;post&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">post_server</span>():\n    uname = request.form.get(<span class=\"hljs-string\">&apos;uname&apos;</span>)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;&#x6b22;&#x8fce;%s&apos;</span> % uname\n\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/get_user&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_user</span>():\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;get_user.html&apos;</span>)\n\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/get_user_server&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_user_server</span>():\n    <span class=\"hljs-comment\">#uid_uname_upwd|uid_uname_upwd|...</span>\n    <span class=\"hljs-comment\"># all_user = &apos;1_qtx_123456|2_maria_123123|3_shibw_147258|4_guoxiaonao_123789&apos;</span>\n    <span class=\"hljs-comment\"># &gt;&gt;&gt; dic = {&apos;name&apos;:&apos;shibw&apos;,&apos;age&apos;:18}  json&#x683c;&#x5f0f;&#x7684;&#x5bf9;&#x8c61;</span>\n    <span class=\"hljs-comment\"># &gt;&gt;&gt; json.dumps(dic)</span>\n    <span class=\"hljs-comment\"># &apos;{&quot;name&quot;: &quot;shibw&quot;, &quot;age&quot;: 18}&apos;  json&#x683c;&#x5f0f;&#x7684;&#x5b57;&#x7b26;&#x4e32;</span>\n    <span class=\"hljs-comment\"># &#x4f11;&#x606f;15:51~16:05</span>\n    json_obj = [\n        {<span class=\"hljs-string\">&quot;id&quot;</span>:<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&quot;uname&quot;</span>:<span class=\"hljs-string\">&quot;qtx&quot;</span>,<span class=\"hljs-string\">&quot;upwd&quot;</span>:<span class=\"hljs-string\">&quot;123456&quot;</span>},\n        {<span class=\"hljs-string\">&quot;id&quot;</span>:<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&quot;uname&quot;</span>:<span class=\"hljs-string\">&quot;maria&quot;</span>,<span class=\"hljs-string\">&quot;upwd&quot;</span>:<span class=\"hljs-string\">&quot;123456&quot;</span>},\n        {<span class=\"hljs-string\">&quot;id&quot;</span>:<span class=\"hljs-number\">3</span>,<span class=\"hljs-string\">&quot;uname&quot;</span>:<span class=\"hljs-string\">&quot;shibw&quot;</span>,<span class=\"hljs-string\">&quot;upwd&quot;</span>:<span class=\"hljs-string\">&quot;123456&quot;</span>},\n        {<span class=\"hljs-string\">&quot;id&quot;</span>:<span class=\"hljs-number\">4</span>,<span class=\"hljs-string\">&quot;uname&quot;</span>:<span class=\"hljs-string\">&quot;guoxiaonao&quot;</span>,<span class=\"hljs-string\">&quot;upwd&quot;</span>:<span class=\"hljs-string\">&quot;123456&quot;</span>},\n    ]\n    <span class=\"hljs-comment\"># import json </span>\n    <span class=\"hljs-comment\"># separators=(&apos;,&apos;,&apos;:&apos;)  &#x9ed8;&#x8ba4;&#x503c;(&apos;, &apos;,&apos;: &apos;)</span>\n    <span class=\"hljs-comment\"># sort_keys &#x5bf9;&#x6570;&#x636e;&#x7684;&#x952e;&#x8fdb;&#x884c;&#x6392;&#x5e8f; &#x4fdd;&#x8bc1;&#x6bcf;&#x6b21;&#x4f20;&#x8f93;&#x6570;&#x636e;&#x7684;&#x952e;&#x7684;&#x987a;&#x5e8f;&#x4e00;&#x81f4;</span>\n    json_str = json.dumps(json_obj,separators=(<span class=\"hljs-string\">&apos;,&apos;</span>,<span class=\"hljs-string\">&apos;:&apos;</span>),sort_keys=<span class=\"hljs-literal\">True</span>)\n    <span class=\"hljs-keyword\">return</span> json_str\n\n<span class=\"hljs-comment\"># http://127.0.0.1:5000/post_json</span>\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/post_json&apos;</span>,methods=[<span class=\"hljs-string\">&apos;get&apos;</span>,<span class=\"hljs-string\">&apos;post&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">post_json</span>():\n    <span class=\"hljs-comment\">#&#x5982;&#x679c;&#x7528;&#x6237;&#x901a;&#x8fc7;get&#x8bf7;&#x6c42;&#x8bbf;&#x95ee;&#x670d;&#x52a1;&#x5668;&#x7a0b;&#x5e8f; </span>\n    <span class=\"hljs-comment\">#xxx</span>\n    <span class=\"hljs-comment\">#&#x5982;&#x679c;&#x7528;&#x6237;&#x901a;&#x8fc7;post&#x8bf7;&#x6c42;&#x8bbf;&#x95ee;&#x670d;&#x52a1;&#x5668;&#x7a0b;&#x5e8f;</span>\n    <span class=\"hljs-comment\">#xxx</span>\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&apos;GET&apos;</span>:\n        <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;post_json.html&apos;</span>)\n    <span class=\"hljs-keyword\">elif</span> request.method == <span class=\"hljs-string\">&apos;POST&apos;</span>:\n        <span class=\"hljs-comment\"># print(request.form)</span>\n        <span class=\"hljs-comment\"># uname = request.form.get(&apos;uname&apos;)</span>\n        <span class=\"hljs-comment\"># upwd = request.form.get(&apos;upwd&apos;)</span>\n        <span class=\"hljs-comment\"># get_json &#x83b7;&#x53d6;&#x524d;&#x7aef;&#x4f20;&#x9012;&#x7684;JSON&#x683c;&#x5f0f;&#x7684;&#x6570;&#x636e; &#x8fd4;&#x56de;JSON&#x5bf9;&#x8c61;</span>\n        <span class=\"hljs-comment\"># print(json_obj)</span>\n        <span class=\"hljs-comment\"># print(json_obj.get(&apos;uname&apos;))</span>\n        <span class=\"hljs-comment\"># print(json_obj.get(&apos;upwd&apos;))</span>\n        json_obj = request.get_json()\n        uname = json_obj.get(<span class=\"hljs-string\">&apos;uname&apos;</span>)\n        upwd = json_obj.get(<span class=\"hljs-string\">&apos;upwd&apos;</span>)\n        <span class=\"hljs-keyword\">if</span> uname == <span class=\"hljs-string\">&apos;laowang&apos;</span> <span class=\"hljs-keyword\">and</span> upwd == <span class=\"hljs-string\">&apos;123456&apos;</span>:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;&#x767b;&#x5f55;&#x6210;&#x529f;&apos;</span>\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&apos;&#x767b;&#x5f55;&#x5931;&#x8d25;&apos;</span>\n\n\n\n\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    <span class=\"hljs-comment\"># app.run(debug=True,host=&apos;127.0.0.1&apos;,port=&apos;5000&apos;)</span>\n    app.run(debug=<span class=\"hljs-literal\">True</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,115"}}],"payload":{"tag":"h3","lines":"2,3"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
