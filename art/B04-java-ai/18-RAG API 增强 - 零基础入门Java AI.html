<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"RAG API &#x589e;&#x5f3a;","children":[{"content":"<img src=\"https://minio.pigx.top/oss/202410/1728458493.png\" alt>","children":[],"payload":{"tag":"img","lines":"5,6"}},{"content":"&#x68c0;&#x7d22;&#x589e;&#x5f3a;&#x5668;&#xff08;Retrieval Augmentor&#xff09;","children":[{"content":"<pre data-lines=\"9,12\"><code>`RetrievalAugmentor` &#x662f; RAG&#xff08;&#x68c0;&#x7d22;&#x589e;&#x5f3a;&#x751f;&#x6210;&#xff09;&#x6d41;&#x7a0b;&#x7684;&#x6838;&#x5fc3;&#xff0c;&#x5b83;&#x901a;&#x8fc7;&#x4ece;&#x4e0d;&#x540c;&#x7684;&#x6570;&#x636e;&#x6e90;&#x4e2d;&#x68c0;&#x7d22;&#x76f8;&#x5173;&#x5185;&#x5bb9;&#x6765;&#x589e;&#x5f3a;&#x7528;&#x6237;&#x7684;&#x6d88;&#x606f;&#x3002;\n\n&#x5728;&#x521b;&#x5efa; AI service &#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x6307;&#x5b9a; `RetrievalAugmentor` &#x5b9e;&#x4f8b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"9,12"}},{"content":"<pre data-lines=\"15,35\"><code data-lines=\"15,35\"> @Bean\npublic ChatAssistant assistant<span class=\"hljs-params\">(ChatLanguageModel chatLanguageModel, EmbeddingStore&lt;TextSegment&gt; embeddingStore)</span> {\n\n DefaultRetrievalAugmentor retrievalAugmentor = DefaultRetrievalAugmentor.builder<span class=\"hljs-params\">()</span>\n <span class=\"hljs-string\">.queryTransformer</span><span class=\"hljs-params\">()</span>  <span class=\"hljs-string\">//</span> &#x67e5;&#x8be2;&#x589e;&#x5f3a;\n <span class=\"hljs-string\">.contentRetriever</span><span class=\"hljs-params\">()</span> <span class=\"hljs-string\">//</span> &#x5185;&#x5bb9;&#x6e90; &#x5355;&#x4e2a;&#x76f4;&#x63a5;&#x914d;&#x7f6e;\n <span class=\"hljs-string\">.queryRouter</span><span class=\"hljs-params\">(new DefaultQueryRouter()</span>)<span class=\"hljs-string\">//</span> &#x591a;&#x4e2a;&#x5185;&#x5bb9;&#x6e90;&#xff0c;&#x8def;&#x7531;\n <span class=\"hljs-string\">.contentAggregator</span><span class=\"hljs-params\">()</span> <span class=\"hljs-string\">//</span> &#x5339;&#x914d;&#x7ed3;&#x679c;&#x805a;&#x5408;\n <span class=\"hljs-string\">.contentInjector</span><span class=\"hljs-params\">()</span>   <span class=\"hljs-string\">//</span> &#x7ed3;&#x679c;&#x63d0;&#x793a;&#x8bcd;&#x6ce8;&#x5165;\n <span class=\"hljs-string\">.executor</span><span class=\"hljs-params\">()</span>  <span class=\"hljs-string\">//</span> &#x5e76;&#x884c;&#x5316;\n <span class=\"hljs-string\">.build</span><span class=\"hljs-params\">()</span>;\n\n return AiServices.builder<span class=\"hljs-params\">(ChatAssistant.class)</span>\n <span class=\"hljs-string\">.chatLanguageModel</span><span class=\"hljs-params\">(chatLanguageModel)</span>\n <span class=\"hljs-string\">.chatMemory</span><span class=\"hljs-params\">(MessageWindowChatMemory.withMaxMessages(10)</span>)\n <span class=\"hljs-string\">.retrievalAugmentor</span><span class=\"hljs-params\">(retrievalAugmentor)</span>\n <span class=\"hljs-string\">.build</span><span class=\"hljs-params\">()</span>;\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"15,35"}},{"content":"<pre data-lines=\"36,37\"><code>&#x6bcf;&#x6b21;&#x8c03;&#x7528; AI &#x670d;&#x52a1;&#x65f6;&#xff0c;&#x90fd;&#x4f1a;&#x81ea;&#x52a8;&#x4f7f;&#x7528;&#x8fd9;&#x4e2a;&#x589e;&#x5f3a;&#x5668;&#x6765;&#x5904;&#x7406;&#x5f53;&#x524d;&#x7684;&#x7528;&#x6237;&#x6d88;&#x606f;&#x3002;&#x4f60;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x9ed8;&#x8ba4;&#x7684;&#x589e;&#x5f3a;&#x5668;&#x5b9e;&#x73b0;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x9700;&#x6c42;&#x81ea;&#x5b9a;&#x4e49;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"36,37"}}],"payload":{"tag":"h3","lines":"7,8"}},{"content":"&#x9ed8;&#x8ba4;&#x68c0;&#x7d22;&#x589e;&#x5f3a;&#x5668;","children":[{"content":"<pre data-lines=\"40,41\"><code>LangChain4j &#x63d0;&#x4f9b;&#x4e86;&#x5f00;&#x7bb1;&#x5373;&#x7528;&#x7684; `RetrievalAugmentor` &#x5b9e;&#x73b0;&#xff1a;`DefaultRetrievalAugmentor`&#x3002;&#x5b83;&#x9002;&#x7528;&#x4e8e;&#x5927;&#x591a;&#x6570;&#x7684; RAG &#x573a;&#x666f;&#x3002;&#x8fd9;&#x4e2a;&#x5b9e;&#x73b0;&#x7684;&#x7075;&#x611f;&#x6765;&#x6e90;&#x4e8e; [LangChain &#x535a;&#x5ba2;&#x6587;&#x7ae0;](https://blog.langchain.dev/deconstructing-rag) &#x548c; [&#x76f8;&#x5173;&#x8bba;&#x6587;](https://arxiv.org/abs/2312.10997)&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"40,41"}}],"payload":{"tag":"h3","lines":"38,39"}},{"content":"&#x67e5;&#x8be2;&#xff08;Query&#xff09;","children":[{"content":"<pre data-lines=\"46,47\"><code>`Query` &#x4ee3;&#x8868;&#x7528;&#x6237;&#x7684;&#x67e5;&#x8be2;&#x8bf7;&#x6c42;&#xff0c;&#x5305;&#x542b;&#x67e5;&#x8be2;&#x7684;&#x6587;&#x672c;&#x4ee5;&#x53ca;&#x76f8;&#x5173;&#x7684;&#x5143;&#x6570;&#x636e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,47"}},{"content":"&#x67e5;&#x8be2;&#x5143;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"50,55\"><code>`Query` &#x4e2d;&#x7684; `Metadata` &#x5305;&#x542b;&#x5728; RAG &#x6d41;&#x7a0b;&#x4e2d;&#x6709;&#x7528;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x4fe1;&#x606f;&#xff0c;&#x4f8b;&#x5982;&#xff1a;\n\n*   `Metadata.userMessage()`&#xff1a;&#x8868;&#x793a;&#x7528;&#x6237;&#x8f93;&#x5165;&#x7684;&#x539f;&#x59cb;&#x6d88;&#x606f;&#x3002;\n*   `Metadata.chatMemoryId()`&#xff1a;&#x4e00;&#x4e2a;&#x7528;&#x4e8e;&#x6807;&#x8bc6;&#x7528;&#x6237;&#x7684;ID&#xff0c;&#x53ef;&#x4ee5;&#x5e94;&#x7528;&#x5728;&#x6570;&#x636e;&#x8bbf;&#x95ee;&#x9650;&#x5236;&#x6216;&#x8fc7;&#x6ee4;&#x4e0a;&#x3002;\n*   `Metadata.chatMemory()`&#xff1a;&#x4e4b;&#x524d;&#x7684;&#x6240;&#x6709;&#x5bf9;&#x8bdd;&#x6d88;&#x606f;&#xff0c;&#x7528;&#x4e8e;&#x7406;&#x89e3;&#x67e5;&#x8be2;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"50,55"}}],"payload":{"tag":"h4","lines":"48,49"}}],"payload":{"tag":"h3","lines":"42,43"}},{"content":"&#x67e5;&#x8be2;&#x8f6c;&#x6362;&#x5668;&#xff08;Query Transformer&#xff09;","children":[{"content":"","children":[{"content":"<pre data-lines=\"59,66\"><code>`QueryTransformer` &#x7528;&#x4e8e;&#x5c06;&#x539f;&#x59cb;&#x67e5;&#x8be2;&#x8f6c;&#x6362;&#x4e3a;&#x4e00;&#x4e2a;&#x6216;&#x591a;&#x4e2a;&#x65b0;&#x7684;&#x67e5;&#x8be2;&#xff0c;&#x4ee5;&#x63d0;&#x9ad8;&#x68c0;&#x7d22;&#x7684;&#x51c6;&#x786e;&#x6027;&#x3002;&#x5e38;&#x89c1;&#x7684;&#x67e5;&#x8be2;&#x4f18;&#x5316;&#x65b9;&#x5f0f;&#x5305;&#x62ec;&#xff1a;\n\n*   &#x67e5;&#x8be2;&#x538b;&#x7f29;&#xff1a;&#x538b;&#x7f29;&#x5197;&#x957f;&#x7684;&#x5bf9;&#x8bdd;&#xff0c;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x7b80;&#x660e;&#x7684;&#x67e5;&#x8be2;&#x3002;\n*   &#x67e5;&#x8be2;&#x6269;&#x5c55;&#xff1a;&#x5c06;&#x7b80;&#x5355;&#x7684;&#x67e5;&#x8be2;&#x6269;&#x5c55;&#x4e3a;&#x591a;&#x4e2a;&#x76f8;&#x5173;&#x7684;&#x67e5;&#x8be2;&#x3002;\n*   &#x67e5;&#x8be2;&#x91cd;&#x5199;&#xff1a;&#x5bf9;&#x67e5;&#x8be2;&#x8fdb;&#x884c;&#x6539;&#x5199;&#xff0c;&#x4f7f;&#x5176;&#x66f4;&#x9002;&#x5408;&#x68c0;&#x7d22;&#x3002;\n\n**&#x793a;&#x4f8b;&#xff1a;** \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"59,66"}},{"content":"<pre data-lines=\"69,72\"><code data-lines=\"69,72\">QueryTransformer transformer <span class=\"hljs-operator\">=</span> new CompressingQueryTransformer()<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"69,72"}}],"payload":{"tag":"h4","lines":"58,59"}},{"content":"&#x9ed8;&#x8ba4;&#x67e5;&#x8be2;&#x8f6c;&#x6362;&#x5668;","children":[{"content":"<pre data-lines=\"75,76\"><code>`DefaultQueryTransformer` &#x662f;&#x6700;&#x7b80;&#x5355;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5b83;&#x76f4;&#x63a5;&#x4f20;&#x9012;&#x539f;&#x59cb;&#x67e5;&#x8be2;&#x800c;&#x4e0d;&#x8fdb;&#x884c;&#x4efb;&#x4f55;&#x4fee;&#x6539;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"75,76"}}],"payload":{"tag":"h4","lines":"73,74"}},{"content":"&#x538b;&#x7f29;&#x67e5;&#x8be2;&#x8f6c;&#x6362;&#x5668;","children":[{"content":"<pre data-lines=\"79,80\"><code>`CompressingQueryTransformer` &#x4f7f;&#x7528;&#x5927;&#x8bed;&#x8a00;&#x6a21;&#x578b;&#xff08;LLM&#xff09;&#x538b;&#x7f29;&#x67e5;&#x8be2;&#x548c;&#x5bf9;&#x8bdd;&#x4e0a;&#x4e0b;&#x6587;&#xff0c;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x66f4;&#x7b80;&#x6d01;&#x3001;&#x72ec;&#x7acb;&#x7684;&#x67e5;&#x8be2;&#x3002;&#x4f8b;&#x5982;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"79,80"}},{"content":"<pre data-lines=\"83,88\"><code data-lines=\"83,88\">&#x7528;&#x6237;&#xff1a;&#x544a;&#x8bc9;&#x6211;&#x5173;&#x4e8e;<span class=\"hljs-keyword\">John </span>Doe&#x7684;&#x4fe1;&#x606f;&#x3002;\nAI&#xff1a;<span class=\"hljs-keyword\">John </span>Doe &#x662f;&#x4e00;&#x4e2a;&#x8457;&#x540d;&#x4f5c;&#x5bb6;&#x3002;\n&#x7528;&#x6237;&#xff1a;&#x4ed6;&#x4f4f;&#x5728;&#x54ea;&#x91cc;&#xff1f; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"83,88"}},{"content":"<pre data-lines=\"89,90\"><code>&#x5bf9;&#x4e8e;&#x201d;&#x4ed6;&#x4f4f;&#x5728;&#x54ea;&#x91cc;&#xff1f;&#x201c;&#x8fd9;&#x6837;&#x7684;&#x67e5;&#x8be2;&#xff0c;`CompressingQueryTransformer` &#x4f1a;&#x81ea;&#x52a8;&#x8f6c;&#x6362;&#x4e3a;&#x201d;John Doe &#x4f4f;&#x5728;&#x54ea;&#x91cc;&#xff1f;&#x201c;&#xff0c;&#x4ee5;&#x4fbf;&#x66f4;&#x7cbe;&#x51c6;&#x5730;&#x68c0;&#x7d22;&#x4fe1;&#x606f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"89,90"}}],"payload":{"tag":"h4","lines":"77,78"}},{"content":"&#x6269;&#x5c55;&#x67e5;&#x8be2;&#x8f6c;&#x6362;&#x5668;","children":[{"content":"<pre data-lines=\"93,94\"><code>`ExpandingQueryTransformer` &#x53ef;&#x4ee5;&#x5c06;&#x7b80;&#x5355;&#x7684;&#x67e5;&#x8be2;&#x6269;&#x5c55;&#x4e3a;&#x591a;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x8868;&#x8fbe;&#x65b9;&#x5f0f;&#xff0c;&#x4ece;&#x800c;&#x63d0;&#x9ad8;&#x76f8;&#x5173;&#x5185;&#x5bb9;&#x7684;&#x8986;&#x76d6;&#x9762;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"93,94"}}],"payload":{"tag":"h4","lines":"91,92"}}],"payload":{"tag":"h3","lines":"56,57"}},{"content":"&#x5185;&#x5bb9;&#xff08;Content&#xff09;","children":[{"content":"<pre data-lines=\"97,98\"><code>`Content` &#x4ee3;&#x8868;&#x7cfb;&#x7edf;&#x4ece;&#x6570;&#x636e;&#x6e90;&#x4e2d;&#x68c0;&#x7d22;&#x5230;&#x7684;&#x4e0e;&#x67e5;&#x8be2;&#x76f8;&#x5173;&#x7684;&#x5185;&#x5bb9;&#x3002;&#x76ee;&#x524d;&#x652f;&#x6301;&#x7684;&#x4e3b;&#x8981;&#x662f;&#x6587;&#x672c;&#x5185;&#x5bb9;&#xff08;`TextSegment`&#xff09;&#xff0c;&#x672a;&#x6765;&#x53ef;&#x80fd;&#x4f1a;&#x6269;&#x5c55;&#x652f;&#x6301;&#x5176;&#x4ed6;&#x6a21;&#x6001;&#xff0c;&#x5982;&#x56fe;&#x50cf;&#x3001;&#x97f3;&#x9891;&#x3001;&#x89c6;&#x9891;&#x7b49;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"97,98"}}],"payload":{"tag":"h3","lines":"95,96"}},{"content":"&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;&#xff08;Content Retriever&#xff09;","children":[{"content":"<pre data-lines=\"103,111\"><code>`ContentRetriever` &#x6839;&#x636e;&#x7528;&#x6237;&#x7684;&#x67e5;&#x8be2;&#x4ece;&#x5e95;&#x5c42;&#x6570;&#x636e;&#x6e90;&#x4e2d;&#x83b7;&#x53d6;&#x5185;&#x5bb9;&#xff0c;&#x6570;&#x636e;&#x6e90;&#x53ef;&#x4ee5;&#x662f;&#xff1a;\n\n*   &#x5d4c;&#x5165;&#x5411;&#x91cf;&#x5b58;&#x50a8;\n*   &#x5168;&#x6587;&#x641c;&#x7d22;&#x5f15;&#x64ce;\n*   &#x5411;&#x91cf;&#x4e0e;&#x5168;&#x6587;&#x68c0;&#x7d22;&#x7ed3;&#x5408;\n*   &#x7f51;&#x7edc;&#x641c;&#x7d22;&#x5f15;&#x64ce;\n*   SQL&#x6570;&#x636e;&#x5e93;\n*   &#x77e5;&#x8bc6;&#x56fe;&#x8c31;&#x7b49;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"103,111"}},{"content":"&#x5d4c;&#x5165;&#x5b58;&#x50a8;&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;","children":[{"content":"<pre data-lines=\"114,117\"><code>`EmbeddingStoreContentRetriever` &#x4f7f;&#x7528;&#x5d4c;&#x5165;&#x6a21;&#x578b;&#x5c06;&#x67e5;&#x8be2;&#x8f6c;&#x5316;&#x4e3a;&#x5411;&#x91cf;&#xff0c;&#x5e76;&#x4ece;&#x5d4c;&#x5165;&#x5b58;&#x50a8;&#x4e2d;&#x68c0;&#x7d22;&#x76f8;&#x5173;&#x7684;&#x5185;&#x5bb9;&#x3002;\n\n**&#x793a;&#x4f8b;&#x4ee3;&#x7801;&#xff1a;** \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"114,117"}},{"content":"<pre data-lines=\"120,138\"><code data-lines=\"120,138\">EmbeddingStore embeddingStore = <span class=\"hljs-string\">...</span>\nEmbeddingModel embeddingModel = <span class=\"hljs-string\">...</span>\n\nContentRetriever contentRetriever = EmbeddingStoreContentRetriever.builder<span class=\"hljs-params\">()</span>\n <span class=\"hljs-string\">.embeddingStore</span><span class=\"hljs-params\">(embeddingStore)</span>\n <span class=\"hljs-string\">.embeddingModel</span><span class=\"hljs-params\">(embeddingModel)</span>\n <span class=\"hljs-string\">.maxResults</span><span class=\"hljs-params\">(3)</span>   <span class=\"hljs-string\">//</span> &#x8fd4;&#x56de;&#x6700;&#x591a;3&#x6761;&#x7ed3;&#x679c;\n <span class=\"hljs-string\">.dynamicMaxResults</span><span class=\"hljs-params\">(query -&gt; 3)</span>  <span class=\"hljs-string\">//</span> &#x6839;&#x636e;&#x67e5;&#x8be2;&#x52a8;&#x6001;&#x6307;&#x5b9a;maxResults\n <span class=\"hljs-string\">.minScore</span><span class=\"hljs-params\">(0.75)</span>  <span class=\"hljs-string\">//</span> &#x8fc7;&#x6ee4;&#x5206;&#x6570;&#x4f4e;&#x4e8e;0.75&#x7684;&#x5185;&#x5bb9;\n <span class=\"hljs-string\">.dynamicMinScore</span><span class=\"hljs-params\">(query -&gt; 0.75)</span>  <span class=\"hljs-string\">//</span> &#x6839;&#x636e;&#x67e5;&#x8be2;&#x52a8;&#x6001;&#x6307;&#x5b9a;minScore\n <span class=\"hljs-string\">.filter</span><span class=\"hljs-params\">(metadataKey(&quot;userId&quot;)</span><span class=\"hljs-string\">.isEqualTo</span><span class=\"hljs-params\">(&quot;12345&quot;)</span>)  <span class=\"hljs-string\">//</span> &#x8fc7;&#x6ee4;&#x6307;&#x5b9a;&#x7528;&#x6237;&#x7684;&#x5185;&#x5bb9;\n <span class=\"hljs-string\">.dynamicFilter</span><span class=\"hljs-params\">(query -&gt; {\n String <span class=\"hljs-attr\">userId</span> = getUserId(query.metadata()</span><span class=\"hljs-string\">.chatMemoryId</span><span class=\"hljs-params\">()</span>);\n return metadataKey<span class=\"hljs-params\">(&quot;userId&quot;)</span><span class=\"hljs-string\">.isEqualTo</span><span class=\"hljs-params\">(userId)</span>;  <span class=\"hljs-string\">//</span> &#x52a8;&#x6001;&#x8fc7;&#x6ee4;\n })\n <span class=\"hljs-string\">.build</span><span class=\"hljs-params\">()</span>; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,138"}}],"payload":{"tag":"h4","lines":"112,113"}},{"content":"&#x7f51;&#x7edc;&#x641c;&#x7d22;&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;","children":[{"content":"<pre data-lines=\"141,144\"><code>`WebSearchContentRetriever` &#x901a;&#x8fc7; `WebSearchEngine` &#x4ece;&#x4e92;&#x8054;&#x7f51;&#x4e0a;&#x68c0;&#x7d22;&#x76f8;&#x5173;&#x5185;&#x5bb9;&#x3002;\n\n**&#x793a;&#x4f8b;&#x4ee3;&#x7801;&#xff1a;** \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"141,144"}},{"content":"<pre data-lines=\"147,158\"><code data-lines=\"147,158\">WebSearchEngine googleSearchEngine = GoogleCustomWebSearchEngine<span class=\"hljs-number\">.</span>builder()\n<span class=\"hljs-meta\"> .apiKey</span>(System<span class=\"hljs-number\">.</span>getenv(<span class=\"hljs-string\">&quot;GOOGLE_API_KEY&quot;</span>))\n<span class=\"hljs-meta\"> .csi</span>(System<span class=\"hljs-number\">.</span>getenv(<span class=\"hljs-string\">&quot;GOOGLE_SEARCH_ENGINE_ID&quot;</span>))\n<span class=\"hljs-meta\"> .build</span>()<span class=\"hljs-comment\">;</span>\n\nContentRetriever contentRetriever = WebSearchContentRetriever<span class=\"hljs-number\">.</span>builder()\n<span class=\"hljs-meta\"> .webSearchEngine</span>(googleSearchEngine)\n<span class=\"hljs-meta\"> .maxResults</span>(<span class=\"hljs-number\">3</span>)\n<span class=\"hljs-meta\"> .build</span>()<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"147,158"}},{"content":"<pre data-lines=\"159,160\"><code>&#x67e5;&#x770b;&#x5b8c;&#x6574;&#x793a;&#x4f8b;&#x8bf7;&#x53c2;&#x8003;[&#x8fd9;&#x91cc;](https://github.com/langchain4j/langchain4j-examples/blob/main/rag-examples/src/main/java/_3_advanced/_08_Advanced_RAG_Web_Search_Example.java)&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"159,160"}}],"payload":{"tag":"h4","lines":"139,140"}},{"content":"SQL&#x6570;&#x636e;&#x5e93;&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;","children":[{"content":"<pre data-lines=\"163,164\"><code>`SqlDatabaseContentRetriever` &#x662f;&#x7528;&#x4e8e;&#x4ece;SQL&#x6570;&#x636e;&#x5e93;&#x68c0;&#x7d22;&#x6570;&#x636e;&#x7684;&#x5b9e;&#x9a8c;&#x6027;&#x5b9e;&#x73b0;&#x3002;&#x66f4;&#x591a;&#x4fe1;&#x606f;&#x53ef;&#x53c2;&#x8003;&#x76f8;&#x5173;javadoc&#x6587;&#x6863;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"163,164"}}],"payload":{"tag":"h4","lines":"161,162"}},{"content":"Azure AI &#x641c;&#x7d22;&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;","children":[{"content":"<pre data-lines=\"167,168\"><code>`AzureAiSearchContentRetriever` &#x5728; `langchain4j-azure-ai-search` &#x6a21;&#x5757;&#x4e2d;&#x53ef;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"167,168"}}],"payload":{"tag":"h4","lines":"165,166"}},{"content":"Neo4j&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;","children":[{"content":"<pre data-lines=\"171,172\"><code>`Neo4jContentRetriever` &#x53ef;&#x7528;&#x4e8e;&#x4ece;Neo4j&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x68c0;&#x7d22;&#x4e0e;&#x67e5;&#x8be2;&#x76f8;&#x5173;&#x7684;&#x5185;&#x5bb9;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"171,172"}}],"payload":{"tag":"h4","lines":"169,170"}}],"payload":{"tag":"h3","lines":"99,100"}},{"content":"&#x67e5;&#x8be2;&#x8def;&#x7531;&#x5668;&#xff08;Query Router&#xff09;","children":[{"content":"<pre data-lines=\"177,178\"><code>`QueryRouter` &#x8d1f;&#x8d23;&#x5c06;&#x67e5;&#x8be2;&#x5206;&#x914d;&#x5230;&#x5408;&#x9002;&#x7684;&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"177,178"}},{"content":"&#x9ed8;&#x8ba4;&#x67e5;&#x8be2;&#x8def;&#x7531;&#x5668;","children":[{"content":"<pre data-lines=\"181,182\"><code>`DefaultQueryRouter` &#x5c06;&#x6bcf;&#x4e2a;&#x67e5;&#x8be2;&#x8def;&#x7531;&#x5230;&#x6240;&#x6709;&#x914d;&#x7f6e;&#x7684;&#x5185;&#x5bb9;&#x68c0;&#x7d22;&#x5668;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"181,182"}}],"payload":{"tag":"h4","lines":"179,180"}},{"content":"&#x8bed;&#x8a00;&#x6a21;&#x578b;&#x67e5;&#x8be2;&#x8def;&#x7531;&#x5668;","children":[{"content":"<pre data-lines=\"185,186\"><code>`LanguageModelQueryRouter` &#x4f7f;&#x7528;&#x5927;&#x8bed;&#x8a00;&#x6a21;&#x578b;&#xff08;LLM&#xff09;&#x51b3;&#x5b9a;&#x5e94;&#x8be5;&#x5c06;&#x67e5;&#x8be2;&#x53d1;&#x9001;&#x5230;&#x54ea;&#x4e2a;&#x68c0;&#x7d22;&#x5668;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"185,186"}}],"payload":{"tag":"h4","lines":"183,184"}}],"payload":{"tag":"h3","lines":"173,174"}},{"content":"&#x5e76;&#x884c;&#x5316;&#x5904;&#x7406;","children":[{"content":"<pre data-lines=\"189,190\"><code>&#x5f53;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x67e5;&#x8be2;&#x548c;&#x4e00;&#x4e2a;&#x68c0;&#x7d22;&#x5668;&#x65f6;&#xff0c;`DefaultRetrievalAugmentor` &#x4f1a;&#x5728;&#x5355;&#x7ebf;&#x7a0b;&#x4e2d;&#x6267;&#x884c;&#x67e5;&#x8be2;&#x548c;&#x68c0;&#x7d22;&#x3002;&#x5426;&#x5219;&#xff0c;&#x5b83;&#x4f1a;&#x4f7f;&#x7528; `Executor` &#x5e76;&#x884c;&#x5904;&#x7406;&#x591a;&#x4e2a;&#x67e5;&#x8be2;&#x548c;&#x68c0;&#x7d22;&#x4efb;&#x52a1;&#x3002;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x7cfb;&#x7edf;&#x4f1a;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x4fee;&#x6539;&#x540e;&#x7684; `Executors.newCachedThreadPool()` &#x6765;&#x5b9e;&#x73b0;&#x8fd9;&#x4e00;&#x529f;&#x80fd;&#xff0c;&#x4f60;&#x4e5f;&#x53ef;&#x4ee5;&#x63d0;&#x4f9b;&#x81ea;&#x5b9a;&#x4e49;&#x7684; `Executor`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"189,190"}},{"content":"<pre data-lines=\"193,198\"><code data-lines=\"193,198\">DefaultRetrievalAugmentor augmentor <span class=\"hljs-operator\">=</span> DefaultRetrievalAugmentor.builder()\n .executor(executor)\n .build()<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"193,198"}}],"payload":{"tag":"h3","lines":"187,188"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
