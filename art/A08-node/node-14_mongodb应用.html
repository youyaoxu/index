<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"MongoDB&#x7684;&#x5e94;&#x7528;","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"4,17\"><code data-lines=\"4,17\">&#x76ee;&#x5f55;\n\n&#x57fa;&#x672c;&#x7528;&#x6cd5;\n<span class=\"hljs-code\">    &#x63d2;&#x5165;&#x6570;&#x636e;\n    &#x67e5;&#x8be2;&#x64cd;&#x4f5c;\n    &#x66f4;&#x65b0;&#x6570;&#x636e;\n    &#x5220;&#x9664;&#x6570;&#x636e;\n    &#x805a;&#x5408;&#x64cd;&#x4f5c;\n    &#x7d22;&#x5f15;\n&#x547d;&#x4ee4;&#x884c;&#x64cd;&#x4f5c;\nMongoose\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"4,17"}},{"content":"<pre data-lines=\"18,23\"><code>MongoDB&#x662f;&#x76ee;&#x524d;&#x6700;&#x6d41;&#x884c;&#x7684;noSQL&#x6570;&#x636e;&#x5e93;&#x4e4b;&#x4e00;&#xff0c;&#x5b83;&#x662f;&#x4e13;&#x4e3a;Node&#x5f00;&#x53d1;&#x7684;&#x3002;\n\nMongoDB&#x7684;&#x4e00;&#x6761;&#x8bb0;&#x5f55;&#x53eb;&#x505a;&#x6587;&#x6863;&#xff08;document&#xff09;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x5305;&#x542b;&#x591a;&#x4e2a;&#x5b57;&#x6bb5;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;&#x5f88;&#x7c7b;&#x4f3c;&#x4e8e;JSON&#x683c;&#x5f0f;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x6587;&#x6863;&#x7684;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"18,23"}},{"content":"<pre data-lines=\"24,51\"><code class=\"language-json\">{\n   &quot;_id&quot; : ObjectId(&quot;54c955492b7c8eb21818bd09&quot;),\n   &quot;address&quot; : {\n      &quot;street&quot; : &quot;2 Avenue&quot;,\n      &quot;zipcode&quot; : &quot;10075&quot;,\n      &quot;building&quot; : &quot;1480&quot;,\n      &quot;coord&quot; : [ -73.9557413, 40.7720266 ]\n   },\n   &quot;borough&quot; : &quot;Manhattan&quot;,\n   &quot;cuisine&quot; : &quot;Italian&quot;,\n   &quot;grades&quot; : [\n      {\n         &quot;date&quot; : ISODate(&quot;2014-10-01T00:00:00Z&quot;),\n         &quot;grade&quot; : &quot;A&quot;,\n         &quot;score&quot; : 11\n      },\n      {\n         &quot;date&quot; : ISODate(&quot;2014-01-16T00:00:00Z&quot;),\n         &quot;grade&quot; : &quot;B&quot;,\n         &quot;score&quot; : 17\n      }\n   ],\n   &quot;name&quot; : &quot;Vella&quot;,\n   &quot;restaurant_id&quot; : &quot;41704620&quot;\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"24,51"}},{"content":"<pre data-lines=\"52,54\"><code>&#x6587;&#x6863;&#x50a8;&#x5b58;&#x5728;&#x96c6;&#x5408;&#xff08;collection&#xff09;&#x4e4b;&#x4e2d;&#xff0c;&#x7c7b;&#x4f3c;&#x4e8e;&#x5173;&#x7cfb;&#x578b;&#x6570;&#x636e;&#x5e93;&#x7684;&#x8868;&#x3002;&#x5728;&#x4e00;&#x4e2a;&#x96c6;&#x5408;&#x4e4b;&#x4e2d;&#xff0c;&#x8bb0;&#x5f55;&#x7684;&#x683c;&#x5f0f;&#x5e76;&#x4e0d;&#x9700;&#x8981;&#x76f8;&#x540c;&#x3002;\n&#x6bcf;&#x4e2a;&#x96c6;&#x5408;&#x4e4b;&#x4e2d;&#x7684;&#x6bcf;&#x4e2a;&#x6587;&#x6863;&#xff0c;&#x5fc5;&#x987b;&#x6709;&#x4e00;&#x4e2a;_id&#x5b57;&#x6bb5;&#x4f5c;&#x4e3a;&#x4e3b;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"52,54"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"&#x57fa;&#x672c;&#x7528;&#x6cd5;","children":[{"content":"&#x63d2;&#x5165;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"85,117\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> insertDocument = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">insertOne</span>( {\n      <span class=\"hljs-string\">&quot;address&quot;</span> : {\n         <span class=\"hljs-string\">&quot;street&quot;</span> : <span class=\"hljs-string\">&quot;2 Avenue&quot;</span>,\n         <span class=\"hljs-string\">&quot;zipcode&quot;</span> : <span class=\"hljs-string\">&quot;10075&quot;</span>,\n         <span class=\"hljs-string\">&quot;building&quot;</span> : <span class=\"hljs-string\">&quot;1480&quot;</span>,\n         <span class=\"hljs-string\">&quot;coord&quot;</span> : [ -<span class=\"hljs-number\">73.9557413</span>, <span class=\"hljs-number\">40.7720266</span> ]\n      },\n      <span class=\"hljs-string\">&quot;borough&quot;</span> : <span class=\"hljs-string\">&quot;Manhattan&quot;</span>,\n      <span class=\"hljs-string\">&quot;cuisine&quot;</span> : <span class=\"hljs-string\">&quot;Italian&quot;</span>,\n      <span class=\"hljs-string\">&quot;grades&quot;</span> : [\n         {\n            <span class=\"hljs-string\">&quot;date&quot;</span> : <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(<span class=\"hljs-string\">&quot;2014-10-01T00:00:00Z&quot;</span>),\n            <span class=\"hljs-string\">&quot;grade&quot;</span> : <span class=\"hljs-string\">&quot;A&quot;</span>,\n            <span class=\"hljs-string\">&quot;score&quot;</span> : <span class=\"hljs-number\">11</span>\n         },\n         {\n            <span class=\"hljs-string\">&quot;date&quot;</span> : <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>(<span class=\"hljs-string\">&quot;2014-01-16T00:00:00Z&quot;</span>),\n            <span class=\"hljs-string\">&quot;grade&quot;</span> : <span class=\"hljs-string\">&quot;B&quot;</span>,\n            <span class=\"hljs-string\">&quot;score&quot;</span> : <span class=\"hljs-number\">17</span>\n         }\n      ],\n      <span class=\"hljs-string\">&quot;name&quot;</span> : <span class=\"hljs-string\">&quot;Vella&quot;</span>,\n      <span class=\"hljs-string\">&quot;restaurant_id&quot;</span> : <span class=\"hljs-string\">&quot;41704620&quot;</span>\n   }, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, result</span>) {\n    assert.<span class=\"hljs-title function_\">equal</span>(err, <span class=\"hljs-literal\">null</span>);\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Inserted a document into the restaurants collection.&quot;</span>);\n    <span class=\"hljs-title function_\">callback</span>();\n  });\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"85,117"}},{"content":"<pre data-lines=\"118,119\"><code>&#x6267;&#x884c;&#x8fd9;&#x4e2a;&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"118,119"}},{"content":"<pre data-lines=\"120,128\"><code class=\"language-js\"><span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n  <span class=\"hljs-title function_\">insertDocument</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,128"}}],"payload":{"tag":"h3","lines":"83,84"}},{"content":"&#x67e5;&#x8be2;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"131,132\"><code>&#x53d6;&#x51fa;&#x4e00;&#x4e2a;collection&#x91cc;&#x9762;&#x7684;&#x6240;&#x6709;&#x6587;&#x6863;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,132"}},{"content":"<pre data-lines=\"133,146\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> findRestaurants = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   <span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>( );\n   cursor.<span class=\"hljs-title function_\">each</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, doc</span>) {\n      assert.<span class=\"hljs-title function_\">equal</span>(err, <span class=\"hljs-literal\">null</span>);\n      <span class=\"hljs-keyword\">if</span> (doc !== <span class=\"hljs-literal\">null</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(doc);\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-title function_\">callback</span>();\n      }\n   });\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"133,146"}},{"content":"<pre data-lines=\"147,148\"><code>&#x6267;&#x884c;&#x4e0a;&#x9762;&#x7684;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"147,148"}},{"content":"<pre data-lines=\"149,157\"><code class=\"language-js\"><span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n  <span class=\"hljs-title function_\">findRestaurants</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n      db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"149,157"}},{"content":"<pre data-lines=\"158,162\"><code>&#x67e5;&#x8be2;&#x8bed;&#x53e5;&#x7684;&#x5199;&#x6cd5;&#x5982;&#x4e0b;&#x3002;\n\n{ &lt;field1&gt;: &lt;value1&gt;, &lt;field2&gt;: &lt;value2&gt;, ... }\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x6307;&#x5b9a;&#x67e5;&#x8be2;&#x6761;&#x4ef6;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"158,162"}},{"content":"<pre data-lines=\"163,176\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> findRestaurants = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   <span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>( { <span class=\"hljs-string\">&quot;borough&quot;</span>: <span class=\"hljs-string\">&quot;Manhattan&quot;</span> } );\n   cursor.<span class=\"hljs-title function_\">each</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, doc</span>) {\n      assert.<span class=\"hljs-title function_\">equal</span>(err, <span class=\"hljs-literal\">null</span>);\n      <span class=\"hljs-keyword\">if</span> (doc != <span class=\"hljs-literal\">null</span>) {\n         <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">dir</span>(doc);\n      } <span class=\"hljs-keyword\">else</span> {\n         <span class=\"hljs-title function_\">callback</span>();\n      }\n   });\n};\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"163,176"}},{"content":"<pre data-lines=\"177,178\"><code>&#x6267;&#x884c;&#x4e0a;&#x9762;&#x7684;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"177,178"}},{"content":"<pre data-lines=\"179,187\"><code class=\"language-js\"><span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n  <span class=\"hljs-title function_\">findRestaurants</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n      db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"179,187"}},{"content":"<pre data-lines=\"188,189\"><code>&#x67e5;&#x8be2;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x5d4c;&#x5957;&#x5c5e;&#x6027;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"188,189"}},{"content":"<pre data-lines=\"190,193\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>( { <span class=\"hljs-string\">&quot;address.zipcode&quot;</span>: <span class=\"hljs-string\">&quot;10075&quot;</span> } );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"190,193"}},{"content":"<pre data-lines=\"194,195\"><code>&#x67e5;&#x8be2;&#x6761;&#x4ef6;&#x8fd8;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x6570;&#x7ec4;&#x7684;&#x4e00;&#x4e2a;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"194,195"}},{"content":"<pre data-lines=\"196,199\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>( { <span class=\"hljs-string\">&quot;grades.grade&quot;</span>: <span class=\"hljs-string\">&quot;B&quot;</span> } );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"196,199"}},{"content":"<pre data-lines=\"200,201\"><code>&#x67e5;&#x8be2;&#x6761;&#x4ef6;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x8fd0;&#x7b97;&#x7b26;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"200,201"}},{"content":"<pre data-lines=\"202,209\"><code class=\"language-js\"><span class=\"hljs-comment\">// &#x5927;&#x4e8e;</span>\n<span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>( { <span class=\"hljs-string\">&quot;grades.score&quot;</span>: { <span class=\"hljs-attr\">&#x24;gt</span>: <span class=\"hljs-number\">30</span> } } );\n\n<span class=\"hljs-comment\">// &#x5c0f;&#x4e8e;</span>\n<span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>( { <span class=\"hljs-string\">&quot;grades.score&quot;</span>: { <span class=\"hljs-attr\">&#x24;lt</span>: <span class=\"hljs-number\">10</span> } } );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"202,209"}},{"content":"<pre data-lines=\"210,211\"><code>&#x67e5;&#x8be2;&#x6761;&#x4ef6;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x903b;&#x8f91;&#x8fd0;&#x7b97;&#x7b26;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"210,211"}},{"content":"<pre data-lines=\"212,223\"><code class=\"language-js\"><span class=\"hljs-comment\">// AND &#x8fd0;&#x7b97;</span>\n<span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>(\n  { <span class=\"hljs-string\">&quot;cuisine&quot;</span>: <span class=\"hljs-string\">&quot;Italian&quot;</span>, <span class=\"hljs-string\">&quot;address.zipcode&quot;</span>: <span class=\"hljs-string\">&quot;10075&quot;</span> }\n);\n\n<span class=\"hljs-comment\">// OR &#x8fd0;&#x7b97;</span>\n<span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>(\n  { <span class=\"hljs-attr\">&#x24;or</span>: [ { <span class=\"hljs-string\">&quot;cuisine&quot;</span>: <span class=\"hljs-string\">&quot;Italian&quot;</span> }, { <span class=\"hljs-string\">&quot;address.zipcode&quot;</span>: <span class=\"hljs-string\">&quot;10075&quot;</span> } ] }\n);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"212,223"}},{"content":"<pre data-lines=\"224,225\"><code>sort&#x65b9;&#x6cd5;&#x7528;&#x4e8e;&#x6392;&#x5e8f;&#xff0c;1&#x4ee3;&#x8868;&#x5347;&#x5e8f;&#xff0c;-1&#x4ee3;&#x8868;&#x964d;&#x5e8f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"224,225"}},{"content":"<pre data-lines=\"226,229\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> cursor =db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">find</span>().<span class=\"hljs-title function_\">sort</span>( { <span class=\"hljs-string\">&quot;borough&quot;</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;address.zipcode&quot;</span>: <span class=\"hljs-number\">1</span> } );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"226,229"}}],"payload":{"tag":"h3","lines":"129,130"}},{"content":"&#x66f4;&#x65b0;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"232,233\"><code>&#x66f4;&#x65b0;&#x6307;&#x5b9a;&#x6587;&#x6863;&#x3002;updateOne&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x66f4;&#x65b0;&#x7684;&#x6587;&#x6863;&#x7684;&#x6570;&#x76ee;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"232,233"}},{"content":"<pre data-lines=\"234,255\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> updateRestaurants = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">updateOne</span>(\n      { <span class=\"hljs-string\">&quot;name&quot;</span> : <span class=\"hljs-string\">&quot;Juni&quot;</span> },\n      {\n        <span class=\"hljs-attr\">&#x24;set</span>: { <span class=\"hljs-string\">&quot;cuisine&quot;</span>: <span class=\"hljs-string\">&quot;American (New)&quot;</span> },\n        <span class=\"hljs-attr\">&#x24;currentDate</span>: { <span class=\"hljs-string\">&quot;lastModified&quot;</span>: <span class=\"hljs-literal\">true</span> }\n      }, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n      <span class=\"hljs-title function_\">callback</span>();\n   });\n};\n\n<span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n\n  <span class=\"hljs-title function_\">updateRestaurants</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n    db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"234,255"}},{"content":"<pre data-lines=\"256,257\"><code>&#x66f4;&#x65b0;&#x5d4c;&#x5165;&#x7684;&#x5b57;&#x6bb5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"256,257"}},{"content":"<pre data-lines=\"258,268\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">updateOne</span>(\n  { <span class=\"hljs-string\">&quot;restaurant_id&quot;</span> : <span class=\"hljs-string\">&quot;41156888&quot;</span> },\n  { <span class=\"hljs-attr\">&#x24;set</span>: { <span class=\"hljs-string\">&quot;address.street&quot;</span>: <span class=\"hljs-string\">&quot;East 31st Street&quot;</span> } },\n  <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n    <span class=\"hljs-title function_\">callback</span>();\n  }\n);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"258,268"}},{"content":"<pre data-lines=\"269,270\"><code>&#x66f4;&#x65b0;&#x591a;&#x4e2a;&#x5b57;&#x6bb5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"269,270"}},{"content":"<pre data-lines=\"271,284\"><code class=\"language-js\">   db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">updateMany</span>(\n      { <span class=\"hljs-string\">&quot;address.zipcode&quot;</span>: <span class=\"hljs-string\">&quot;10016&quot;</span>, <span class=\"hljs-attr\">cuisine</span>: <span class=\"hljs-string\">&quot;Other&quot;</span> },\n      {\n        <span class=\"hljs-attr\">&#x24;set</span>: { <span class=\"hljs-attr\">cuisine</span>: <span class=\"hljs-string\">&quot;Category To Be Determined&quot;</span> },\n        <span class=\"hljs-attr\">&#x24;currentDate</span>: { <span class=\"hljs-string\">&quot;lastModified&quot;</span>: <span class=\"hljs-literal\">true</span> }\n      }\n      ,\n      <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n        <span class=\"hljs-title function_\">callback</span>();\n   });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"271,284"}},{"content":"<pre data-lines=\"284,285\"><code>&#x66ff;&#x6362;&#x6574;&#x4e2a;&#x6587;&#x6863;&#xff0c;&#x9664;&#x4e86;_id&#x5b57;&#x6bb5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"284,285"}},{"content":"<pre data-lines=\"286,303\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">replaceOne</span>(\n      { <span class=\"hljs-string\">&quot;restaurant_id&quot;</span> : <span class=\"hljs-string\">&quot;41704620&quot;</span> },\n      {\n        <span class=\"hljs-string\">&quot;name&quot;</span> : <span class=\"hljs-string\">&quot;Vella 2&quot;</span>,\n        <span class=\"hljs-string\">&quot;address&quot;</span> : {\n           <span class=\"hljs-string\">&quot;coord&quot;</span> : [ -<span class=\"hljs-number\">73.9557413</span>, <span class=\"hljs-number\">40.7720266</span> ],\n           <span class=\"hljs-string\">&quot;building&quot;</span> : <span class=\"hljs-string\">&quot;1480&quot;</span>,\n           <span class=\"hljs-string\">&quot;street&quot;</span> : <span class=\"hljs-string\">&quot;2 Avenue&quot;</span>,\n           <span class=\"hljs-string\">&quot;zipcode&quot;</span> : <span class=\"hljs-string\">&quot;10075&quot;</span>\n        }\n      },\n      <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n        <span class=\"hljs-title function_\">callback</span>();\n   });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"286,303"}},{"content":"<pre data-lines=\"303,304\"><code>_id&#x5b57;&#x6bb5;&#x4e0d;&#x80fd;&#x66f4;&#x65b0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"303,304"}}],"payload":{"tag":"h3","lines":"230,231"}},{"content":"&#x5220;&#x9664;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"307,308\"><code>&#x5220;&#x9664;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x7684;&#x6240;&#x6709;&#x6587;&#x6863;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"307,308"}},{"content":"<pre data-lines=\"309,328\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> removeRestaurants = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">deleteMany</span>(\n      { <span class=\"hljs-string\">&quot;borough&quot;</span>: <span class=\"hljs-string\">&quot;Manhattan&quot;</span> },\n      <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n         <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n         <span class=\"hljs-title function_\">callback</span>();\n      }\n   );\n};\n\n<span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n\n  <span class=\"hljs-title function_\">removeRestaurants</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n      db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"309,328"}},{"content":"<pre data-lines=\"329,330\"><code>&#x5220;&#x9664;&#x5355;&#x4e00;&#x6587;&#x6863;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"329,330"}},{"content":"<pre data-lines=\"331,340\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">deleteOne</span>(\n      { <span class=\"hljs-string\">&quot;borough&quot;</span>: <span class=\"hljs-string\">&quot;Queens&quot;</span> },\n      <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n         <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n         <span class=\"hljs-title function_\">callback</span>();\n      }\n   );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"331,340"}},{"content":"<pre data-lines=\"341,342\"><code>&#x5220;&#x9664;&#x6240;&#x6709;&#x6587;&#x6863;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"341,342"}},{"content":"<pre data-lines=\"343,349\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">deleteMany</span>( {}, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n      <span class=\"hljs-title function_\">callback</span>();\n   });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"343,349"}},{"content":"<pre data-lines=\"350,351\"><code>&#x5220;&#x9664;&#x6574;&#x4e2a;&#x96c6;&#x5408;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"350,351"}},{"content":"<pre data-lines=\"352,358\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">drop</span>( <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, response</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(response)\n      <span class=\"hljs-title function_\">callback</span>();\n   });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"352,358"}}],"payload":{"tag":"h3","lines":"305,306"}},{"content":"&#x805a;&#x5408;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"361,380\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> aggregateRestaurants = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">aggregate</span>(\n     [\n       { <span class=\"hljs-attr\">&#x24;group</span>: { <span class=\"hljs-string\">&quot;_id&quot;</span>: <span class=\"hljs-string\">&quot;&#x24;borough&quot;</span>, <span class=\"hljs-string\">&quot;count&quot;</span>: { <span class=\"hljs-attr\">&#x24;sum</span>: <span class=\"hljs-number\">1</span> } } }\n     ]).<span class=\"hljs-title function_\">toArray</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, result</span>) {\n     assert.<span class=\"hljs-title function_\">equal</span>(err, <span class=\"hljs-literal\">null</span>);\n     <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(result);\n     <span class=\"hljs-title function_\">callback</span>(result);\n   });\n};\n\n<span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n  <span class=\"hljs-title function_\">aggregateRestaurants</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n      db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"361,380"}},{"content":"<pre data-lines=\"381,382\"><code>&#x4e0a;&#x9762;&#x7684;&#x4ee3;&#x7801;&#x4ea7;&#x751f;&#x4e0b;&#x9762;&#x7684;&#x7ed3;&#x679c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"381,382"}},{"content":"<pre data-lines=\"383,391\"><code data-lines=\"383,391\">[ { <span class=\"hljs-variable\">_id</span>: <span class=\"hljs-string\">&apos;Missing&apos;</span>, <span class=\"hljs-built_in\">count</span>: <span class=\"hljs-number\">51</span> },\n  { <span class=\"hljs-variable\">_id</span>: <span class=\"hljs-string\">&apos;Staten Island&apos;</span>, <span class=\"hljs-built_in\">count</span>: <span class=\"hljs-number\">969</span> },\n  { <span class=\"hljs-variable\">_id</span>: <span class=\"hljs-string\">&apos;Manhattan&apos;</span>, <span class=\"hljs-built_in\">count</span>: <span class=\"hljs-number\">10259</span> },\n  { <span class=\"hljs-variable\">_id</span>: <span class=\"hljs-string\">&apos;Brooklyn&apos;</span>, <span class=\"hljs-built_in\">count</span>: <span class=\"hljs-number\">6086</span> },\n  { <span class=\"hljs-variable\">_id</span>: <span class=\"hljs-string\">&apos;Queens&apos;</span>, <span class=\"hljs-built_in\">count</span>: <span class=\"hljs-number\">5656</span> },\n  { <span class=\"hljs-variable\">_id</span>: <span class=\"hljs-string\">&apos;Bronx&apos;</span>, <span class=\"hljs-built_in\">count</span>: <span class=\"hljs-number\">2338</span> } ]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"383,391"}},{"content":"<pre data-lines=\"392,393\"><code>&#x5e26;&#x6709;&#x8fc7;&#x6ee4;&#x6761;&#x4ef6;&#x7684;&#x805a;&#x5408;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"392,393"}},{"content":"<pre data-lines=\"394,405\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">aggregate</span>(\n     [\n       { <span class=\"hljs-attr\">&#x24;match</span>: { <span class=\"hljs-string\">&quot;borough&quot;</span>: <span class=\"hljs-string\">&quot;Queens&quot;</span>, <span class=\"hljs-string\">&quot;cuisine&quot;</span>: <span class=\"hljs-string\">&quot;Brazilian&quot;</span> } },\n       { <span class=\"hljs-attr\">&#x24;group</span>: { <span class=\"hljs-string\">&quot;_id&quot;</span>: <span class=\"hljs-string\">&quot;&#x24;address.zipcode&quot;</span> , <span class=\"hljs-string\">&quot;count&quot;</span>: { <span class=\"hljs-attr\">&#x24;sum</span>: <span class=\"hljs-number\">1</span> } } }\n     ]).<span class=\"hljs-title function_\">toArray</span>(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, result</span>) {\n       assert.<span class=\"hljs-title function_\">equal</span>(err, <span class=\"hljs-literal\">null</span>);\n       <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(result);\n       <span class=\"hljs-title function_\">callback</span>(result);\n     });\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"394,405"}}],"payload":{"tag":"h3","lines":"359,360"}}],"payload":{"tag":"h2","lines":"55,56"}},{"content":"&#x7d22;&#x5f15;","children":[{"content":"<pre data-lines=\"408,409\"><code>&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x5355;&#x5b57;&#x6bb5;&#x7684;&#x7d22;&#x5f15;&#xff0c;1&#x8868;&#x793a;&#x5347;&#x5e8f;&#xff0c;-1&#x8868;&#x793a;&#x964d;&#x5e8f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"408,409"}},{"content":"<pre data-lines=\"410,429\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> indexRestaurants = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">db, callback</span>) {\n   db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">createIndex</span>(\n      { <span class=\"hljs-string\">&quot;cuisine&quot;</span>: <span class=\"hljs-number\">1</span> },\n      <span class=\"hljs-literal\">null</span>,\n      <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n         <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n         <span class=\"hljs-title function_\">callback</span>();\n      }\n   );\n};\n\n<span class=\"hljs-title class_\">MongoClient</span>.<span class=\"hljs-title function_\">connect</span>(url, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, db</span>) {\n  assert.<span class=\"hljs-title function_\">equal</span>(<span class=\"hljs-literal\">null</span>, err);\n  <span class=\"hljs-title function_\">indexRestaurants</span>(db, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n      db.<span class=\"hljs-title function_\">close</span>();\n  });\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"410,429"}},{"content":"<pre data-lines=\"430,431\"><code>&#x751f;&#x6210;&#x591a;&#x4e2a;&#x5b57;&#x6bb5;&#x7684;&#x7d22;&#x5f15;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"430,431"}},{"content":"<pre data-lines=\"432,442\"><code class=\"language-js\">db.<span class=\"hljs-title function_\">collection</span>(<span class=\"hljs-string\">&apos;restaurants&apos;</span>).<span class=\"hljs-title function_\">createIndex</span>(\n      { <span class=\"hljs-string\">&quot;cuisine&quot;</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;address.zipcode&quot;</span>: -<span class=\"hljs-number\">1</span> },\n      <span class=\"hljs-literal\">null</span>,\n      <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">err, results</span>) {\n         <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(results);\n         <span class=\"hljs-title function_\">callback</span>();\n      }\n   );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"432,442"}}],"payload":{"tag":"h2","lines":"406,407"}},{"content":"&#x547d;&#x4ee4;&#x884c;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"445,446\"><code>&#x8f93;&#x5165;&#x6570;&#x636e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"445,446"}},{"content":"<pre data-lines=\"447,450\"><code class=\"language-bash\">&#x24; mongoimport --db <span class=\"hljs-built_in\">test</span> --collection restaurants --drop --file primer-dataset.json\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"447,450"}}],"payload":{"tag":"h2","lines":"443,444"}},{"content":"Mongoose","children":[{"content":"<pre data-lines=\"453,456\"><code>&#x591a;&#x79cd;&#x4e2d;&#x95f4;&#x4ef6;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x8fde;&#x63a5;node.js&#x4e0e;MongoDB&#xff0c;&#x76ee;&#x524d;&#x6bd4;&#x8f83;&#x5e38;&#x7528;&#x7684;Mongoose&#x3002;\n\n&#x9996;&#x5148;&#xff0c;&#x5728;&#x9879;&#x76ee;&#x76ee;&#x5f55;&#x5c06;Mongoose&#x5b89;&#x88c5;&#x4e3a;&#x672c;&#x5730;&#x6a21;&#x5757;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"453,456"}},{"content":"<pre data-lines=\"457,460\"><code class=\"language-js\">npm install mongoose --save\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"457,460"}},{"content":"<pre data-lines=\"461,462\"><code>&#x7136;&#x540e;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x5728;node.js&#x811a;&#x672c;&#x4e2d;&#x8fde;&#x63a5;MongoDB&#x6570;&#x636e;&#x5e93;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"461,462"}},{"content":"<pre data-lines=\"463,469\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> mongoose = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&apos;mongoose&apos;</span>);\n\n<span class=\"hljs-comment\">// &#x8fde;&#x63a5;&#x5b57;&#x7b26;&#x4e32;&#x683c;&#x5f0f;&#x4e3a;mongodb://&#x4e3b;&#x673a;/&#x6570;&#x636e;&#x5e93;&#x540d;</span>\nmongoose.<span class=\"hljs-title function_\">connect</span>(<span class=\"hljs-string\">&apos;mongodb://localhost/mydatabase&apos;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"463,469"}},{"content":"<pre data-lines=\"470,473\"><code>&#x6ce8;&#x610f;&#xff0c;&#x8fd0;&#x884c;&#x4e0a;&#x9762;&#x8fd9;&#x4e2a;&#x811a;&#x672c;&#x65f6;&#xff0c;&#x5fc5;&#x987b;&#x786e;&#x4fdd;MongoDB&#x5904;&#x4e8e;&#x8fd0;&#x884c;&#x4e2d;&#x3002;\n\n&#x6570;&#x636e;&#x5e93;&#x8fde;&#x63a5;&#x540e;&#xff0c;&#x53ef;&#x4ee5;&#x5bf9;open&#x548c;error&#x4e8b;&#x4ef6;&#x6307;&#x5b9a;&#x76d1;&#x542c;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"470,473"}},{"content":"<pre data-lines=\"474,485\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> db = mongoose.<span class=\"hljs-property\">connection</span>;\n\ndb.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&apos;error&apos;</span>, <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">callback</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Connection error&quot;</span>);\n});\n\ndb.<span class=\"hljs-title function_\">once</span>(<span class=\"hljs-string\">&apos;open&apos;</span>, <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">callback</span> (<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;Mongo working!&quot;</span>);\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"474,485"}},{"content":"<pre data-lines=\"486,487\"><code>mongoose.Schema&#x65b9;&#x6cd5;&#x7528;&#x6765;&#x5b9a;&#x4e49;&#x6570;&#x636e;&#x96c6;&#x7684;&#x683c;&#x5f0f;&#xff08;schema&#xff09;&#xff0c;mongoose.model&#x65b9;&#x6cd5;&#x5c06;&#x683c;&#x5f0f;&#x5206;&#x914d;&#x7ed9;&#x6307;&#x5b9a;&#x7684;&#x6570;&#x636e;&#x96c6;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"486,487"}},{"content":"<pre data-lines=\"488,514\"><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">Schema</span> = mongoose.<span class=\"hljs-property\">Schema</span>;\n<span class=\"hljs-keyword\">var</span> userSchema = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Schema</span>({\n  name : <span class=\"hljs-title class_\">String</span>,\n  age : <span class=\"hljs-title class_\">Number</span>,\n  <span class=\"hljs-variable constant_\">DOB</span> : <span class=\"hljs-title class_\">Date</span>,\n  isAlive : <span class=\"hljs-title class_\">Boolean</span>\n});\n\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-title class_\">User</span> = mongoose.<span class=\"hljs-title function_\">model</span>(<span class=\"hljs-string\">&apos;User&apos;</span>, userSchema);\n\n<span class=\"hljs-keyword\">var</span> arvind = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">User</span>({\n  name : <span class=\"hljs-string\">&apos;Arvind&apos;</span>,\n  age : <span class=\"hljs-number\">99</span>,\n  <span class=\"hljs-variable constant_\">DOB</span> : <span class=\"hljs-string\">&apos;01/01/1915&apos;</span>,\n  isAlive : <span class=\"hljs-literal\">true</span>\n});\n\narvind.<span class=\"hljs-title function_\">save</span>(<span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, data</span>) {\n  <span class=\"hljs-keyword\">if</span> (err){\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(err);\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;Saved : &apos;</span>, data );\n  }\n});\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"488,514"}},{"content":"<pre data-lines=\"515,528\"><code data-lines=\"515,528\">&#x76ee;&#x5f55;\n\n&#x57fa;&#x672c;&#x7528;&#x6cd5;\n<span class=\"hljs-code\">    &#x63d2;&#x5165;&#x6570;&#x636e;\n    &#x67e5;&#x8be2;&#x64cd;&#x4f5c;\n    &#x66f4;&#x65b0;&#x6570;&#x636e;\n    &#x5220;&#x9664;&#x6570;&#x636e;\n    &#x805a;&#x5408;&#x64cd;&#x4f5c;\n    &#x7d22;&#x5f15;\n&#x547d;&#x4ee4;&#x884c;&#x64cd;&#x4f5c;\nMongoose\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"515,528"}}],"payload":{"tag":"h2","lines":"451,452"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
