<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"","children":[{"content":"&#x57fa;&#x7840;&#x73af;&#x5883;&#x642d;&#x5efa;","children":[{"content":"&#x2460; &#x8d2d;&#x4e70; ECS","children":[],"payload":{"tag":"h3","lines":"3,4"}}],"payload":{"tag":"h2","lines":"0,2"}},{"content":"&#x963f;&#x91cc;&#x4e91; ECS &#x8d2d;&#x4e70;","children":[{"content":"&#x2461; &#x521d;&#x59cb;&#x5316; CentOS7","children":[{"content":"<pre data-lines=\"30,34\"><code data-lines=\"30,34\">curl -O http:<span class=\"hljs-comment\">//vip.pigx.top/os7init.sh </span>\n<span class=\"hljs-keyword\">sh</span> os7init.<span class=\"hljs-keyword\">sh</span> pig4cloud \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"30,34"}}],"payload":{"tag":"h3","lines":"28,29"}},{"content":"&#x2462; &#x5b89;&#x88c5; JDK","children":[{"content":"<pre data-lines=\"37,43\"><code data-lines=\"37,43\"><span class=\"hljs-attribute\">wget</span> https://cdn.azul.com/zulu/bin/zulu17.<span class=\"hljs-number\">44</span>.<span class=\"hljs-number\">15</span>-ca-jdk17.<span class=\"hljs-number\">0</span>.<span class=\"hljs-number\">8</span>-linux.x86_64.rpm\n<span class=\"hljs-attribute\">rpm</span> -ivh zulu17.<span class=\"hljs-number\">44</span>.<span class=\"hljs-number\">15</span>-ca-jdk17.<span class=\"hljs-number\">0</span>.<span class=\"hljs-number\">8</span>-linux.x86_64.rpm\n<span class=\"hljs-attribute\">java</span> -version\n<span class=\"hljs-attribute\">yum</span> install -y fontconfig mkfontscale \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"37,43"}}],"payload":{"tag":"h3","lines":"35,36"}},{"content":"&#x2463; &#x5b89;&#x88c5; Mysql 8","children":[{"content":"<pre data-lines=\"46,75\"><code data-lines=\"46,75\">wget http://vip.pigx.top/mysql80-community-<span class=\"hljs-keyword\">release</span>-el7<span class=\"hljs-number\">-11.</span>noarch.rpm -O mysql80-community-<span class=\"hljs-keyword\">release</span>-el7<span class=\"hljs-number\">-7.</span>noarch.rpm\nrpm -ivh mysql80-community-<span class=\"hljs-keyword\">release</span>-el7<span class=\"hljs-number\">-7.</span>noarch.rpm\nyum install -y mysql mysql-<span class=\"hljs-keyword\">server</span>\n\n# &#x4fee;&#x6539;&#x914d;&#x7f6e;&#x6587;&#x4ef6;\nvim /etc/my.cnf\nlower_case_table_names=<span class=\"hljs-number\">1</span>\n\n# &#x91cd;&#x542f; mysql\nsystemctl <span class=\"hljs-keyword\">restart</span> mysqld\n\n# &#x67e5;&#x770b;&#x9ed8;&#x8ba4;&#x5bc6;&#x7801;\ngrep <span class=\"hljs-keyword\">password</span> /var/<span class=\"hljs-keyword\">log</span>/mysqld.<span class=\"hljs-keyword\">log</span>\n\n# mysql client &#x94fe;&#x63a5; mysql\nmysql -uroot -p\n\n<span class=\"hljs-keyword\">alter</span> <span class=\"hljs-keyword\">user</span> <span class=\"hljs-string\">&apos;root&apos;</span>@<span class=\"hljs-string\">&apos;localhost&apos;</span> identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-string\">&apos;ZxcRoot123!@#&apos;</span>;\n<span class=\"hljs-keyword\">set</span> <span class=\"hljs-keyword\">global</span> validate_password.check_user_name=<span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">set</span> <span class=\"hljs-keyword\">global</span> validate_password.<span class=\"hljs-keyword\">policy</span>=<span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">set</span> <span class=\"hljs-keyword\">global</span> validate_password.length=<span class=\"hljs-number\">1</span>;\n<span class=\"hljs-keyword\">alter</span> <span class=\"hljs-keyword\">user</span> <span class=\"hljs-string\">&apos;root&apos;</span>@<span class=\"hljs-string\">&apos;localhost&apos;</span> identified <span class=\"hljs-keyword\">by</span> <span class=\"hljs-string\">&apos;root&apos;</span>;\n\n# &#x4fee;&#x6539;&#x4e3a;&#x5141;&#x8bb8;&#x8fdc;&#x7a0b;&#x8bbf;&#x95ee;\nuse mysql;\n<span class=\"hljs-keyword\">update</span> <span class=\"hljs-keyword\">user</span> <span class=\"hljs-keyword\">set</span> host = <span class=\"hljs-string\">&apos;%&apos;</span> <span class=\"hljs-keyword\">where</span> <span class=\"hljs-keyword\">user</span> = <span class=\"hljs-string\">&apos;root&apos;</span>;\nFLUSH <span class=\"hljs-keyword\">PRIVILEGES</span>; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,75"}}],"payload":{"tag":"h3","lines":"44,45"}},{"content":"&#x2464; &#x5b89;&#x88c5; Redis","children":[{"content":"<pre data-lines=\"78,82\"><code data-lines=\"78,82\">yum <span class=\"hljs-keyword\">install</span> redis\nsystemctl restart redis \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"78,82"}}],"payload":{"tag":"h3","lines":"76,77"}},{"content":"&#x2465; &#x5b89;&#x88c5; NGINX","children":[{"content":"<pre data-lines=\"85,104\"><code data-lines=\"85,104\">vim /etc/yum.repos.d/nginx.repo\n\n[nginx-stable]\n<span class=\"hljs-attribute\">name</span>=nginx stable repo\n<span class=\"hljs-attribute\">baseurl</span>=http://nginx.org/packages/centos/&#x24;releasever/&#x24;basearch/\n<span class=\"hljs-attribute\">gpgcheck</span>=1\n<span class=\"hljs-attribute\">enabled</span>=1\n<span class=\"hljs-attribute\">gpgkey</span>=https://nginx.org/keys/nginx_signing.key\n<span class=\"hljs-attribute\">module_hotfixes</span>=<span class=\"hljs-literal\">true</span>\n\n[nginx-mainline]\n<span class=\"hljs-attribute\">name</span>=nginx mainline repo\n<span class=\"hljs-attribute\">baseurl</span>=http://nginx.org/packages/mainline/centos/&#x24;releasever/&#x24;basearch/\n<span class=\"hljs-attribute\">gpgcheck</span>=1\n<span class=\"hljs-attribute\">enabled</span>=0\n<span class=\"hljs-attribute\">gpgkey</span>=https://nginx.org/keys/nginx_signing.key\n<span class=\"hljs-attribute\">module_hotfixes</span>=<span class=\"hljs-literal\">true</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"85,104"}},{"content":"<pre data-lines=\"105,110\"><code data-lines=\"105,110\">yum install -<span class=\"hljs-attribute\">y</span> yum-utils\nyum-config-manager <span class=\"hljs-attr\">--enable</span> nginx-mainline\nyum install -<span class=\"hljs-attribute\">y</span> nginx \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"105,110"}}],"payload":{"tag":"h3","lines":"83,84"}}],"payload":{"tag":"h2","lines":"7,9"}},{"content":"&#x90e8;&#x7f72;&#x5e94;&#x7528;&#x4ee3;&#x7801;","children":[{"content":"&#x51c6;&#x5907;&#x6e90;&#x7801;&#x5305;","children":[{"content":"<pre data-lines=\"116,123\"><code data-lines=\"116,123\"><span class=\"hljs-comment\"># &#x5fae;&#x670d;&#x52a1;&#x7248;&#x672c;&#x6253;&#x5305;</span>\nmvn clean <span class=\"hljs-keyword\">install</span> -Pcloud\n\n<span class=\"hljs-comment\"># &#x5355;&#x4f53;&#x7248;&#x672c;&#x6253;&#x5305;</span>\nmvn clean <span class=\"hljs-keyword\">install</span> -Pboot \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"116,123"}}],"payload":{"tag":"h3","lines":"114,115"}},{"content":"&#x521d;&#x59cb;&#x5316;&#x6570;&#x636e;&#x5e93;","children":[{"content":"<pre data-lines=\"126,134\"><code data-lines=\"126,134\">mysql -uroot -proot\n\n-- &#x6838;&#x5fc3;&#x6570;&#x636e;&#x5e93;\n<span class=\"hljs-built_in\">source</span> db/pig.sql;\n-- nacos&#x914d;&#x7f6e;\n<span class=\"hljs-built_in\">source</span> db/pig_config.sql; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"126,134"}}],"payload":{"tag":"h3","lines":"124,125"}},{"content":"&#x542f;&#x52a8;&#x670d;&#x52a1;&#x7aef;","children":[{"content":"<pre data-lines=\"137,148\"><code data-lines=\"137,148\"><span class=\"hljs-comment\"># &#x5fae;&#x670d;&#x52a1;&#x7248;&#x672c;&#x542f;&#x52a8;&#x547d;&#x4ee4;</span>\n<span class=\"hljs-attribute\">nohup</span> java -Dfile.encoding=utf-<span class=\"hljs-number\">8</span> -jar pig-register.jar &gt; /dev/null <span class=\"hljs-number\">2</span>&gt;&amp;<span class=\"hljs-number\">1</span> &amp;\n<span class=\"hljs-attribute\">nohup</span> java -Dfile.encoding=utf-<span class=\"hljs-number\">8</span> -jar pig-monitor.jar &gt; /dev/null <span class=\"hljs-number\">2</span>&gt;&amp;<span class=\"hljs-number\">1</span> &amp;\n<span class=\"hljs-attribute\">nohup</span> java -Dfile.encoding=utf-<span class=\"hljs-number\">8</span> -jar pig-gateway.jar &gt; /dev/null <span class=\"hljs-number\">2</span>&gt;&amp;<span class=\"hljs-number\">1</span> &amp;\n<span class=\"hljs-attribute\">nohup</span> java -Dfile.encoding=utf-<span class=\"hljs-number\">8</span> -jar pig-auth.jar &gt; /dev/null <span class=\"hljs-number\">2</span>&gt;&amp;<span class=\"hljs-number\">1</span> &amp;\n<span class=\"hljs-attribute\">nohup</span> java -Dfile.encoding=utf-<span class=\"hljs-number\">8</span> -jar pig-upms-biz.jar &gt; /dev/null <span class=\"hljs-number\">2</span>&gt;&amp;<span class=\"hljs-number\">1</span> &amp;\n\n<span class=\"hljs-comment\"># &#x5355;&#x4f53;&#x7248;&#x672c;&#x542f;&#x52a8;&#x547d;&#x4ee4;</span>\n<span class=\"hljs-attribute\">nohup</span> java -Dfile.encoding=utf-<span class=\"hljs-number\">8</span> -jar pig-boot.jar &gt; /dev/null <span class=\"hljs-number\">2</span>&gt;&amp;<span class=\"hljs-number\">1</span> &amp; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"137,148"}}],"payload":{"tag":"h3","lines":"135,136"}},{"content":"&#x90e8;&#x7f72;&#x524d;&#x7aef;","children":[{"content":"<pre data-lines=\"151,156\"><code data-lines=\"151,156\"><span class=\"hljs-built_in\">mkdir</span> -p /data/pig-ui &amp;&amp; <span class=\"hljs-built_in\">cp</span> -r dist/* /data/pig-ui\n<span class=\"hljs-built_in\">cd</span> /etc/nginx/conf.d &amp;&amp; <span class=\"hljs-built_in\">rm</span> -f default.conf\nvim pig.conf \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"151,156"}},{"content":"<pre data-lines=\"157,197\"><code data-lines=\"157,197\"><span class=\"hljs-section\">server</span> {\n <span class=\"hljs-attribute\">listen</span> <span class=\"hljs-number\">80</span>;\n <span class=\"hljs-attribute\">server_name</span> localhost;\n\n <span class=\"hljs-attribute\">gzip</span> <span class=\"hljs-literal\">on</span>;\n <span class=\"hljs-attribute\">gzip_static</span> <span class=\"hljs-literal\">on</span>;     <span class=\"hljs-comment\"># &#x9700;&#x8981;http_gzip_static_module &#x6a21;&#x5757;</span>\n <span class=\"hljs-attribute\">gzip_min_length</span> <span class=\"hljs-number\">1k</span>;\n <span class=\"hljs-attribute\">gzip_comp_level</span> <span class=\"hljs-number\">4</span>;\n <span class=\"hljs-attribute\">gzip_proxied</span> any;\n <span class=\"hljs-attribute\">gzip_types</span> text/plain text/xml text/css;\n <span class=\"hljs-attribute\">gzip_vary</span> <span class=\"hljs-literal\">on</span>;\n <span class=\"hljs-attribute\">gzip_http_version</span>   <span class=\"hljs-number\">1</span>.<span class=\"hljs-number\">0</span>; <span class=\"hljs-comment\">#&#x517c;&#x5bb9;&#x591a;&#x5c42;nginx &#x53cd;&#x4ee3;</span>\n <span class=\"hljs-attribute\">gzip_disable</span> <span class=\"hljs-string\">&quot;MSIE [1-6]\\.(?!.*SV1)&quot;</span>;\n\n <span class=\"hljs-comment\"># &#x6253;&#x5305;&#x597d;&#x7684;dist&#x76ee;&#x5f55;&#x6587;&#x4ef6;&#xff0c;&#x653e;&#x7f6e;&#x5230;&#x8fd9;&#x4e2a;&#x76ee;&#x5f55;&#x4e0b;</span>\n <span class=\"hljs-attribute\">root</span> /data/pig-ui;\n    \n <span class=\"hljs-comment\"># &#x6ce8;&#x610f;&#x7ef4;&#x62a4;&#x65b0;&#x589e;&#x5fae;&#x670d;&#x52a1;&#xff0c;gateway &#x8def;&#x7531;&#x524d;&#x7f00;</span>\n <span class=\"hljs-section\">location</span><span class=\"hljs-regexp\"> ^~/api/</span> {\n <span class=\"hljs-attribute\">proxy_pass</span> http://127.0.0.1:9999/; <span class=\"hljs-comment\">#&#x6ce8;&#x610f;/&#x540e;&#x7f00;</span>\n <span class=\"hljs-attribute\">proxy_connect_timeout</span> <span class=\"hljs-number\">60s</span>;\n <span class=\"hljs-attribute\">proxy_read_timeout</span> <span class=\"hljs-number\">120s</span>;\n <span class=\"hljs-attribute\">proxy_send_timeout</span> <span class=\"hljs-number\">120s</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> X-Real-IP <span class=\"hljs-variable\">&#x24;remote_addr</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> X-Forwarded-For <span class=\"hljs-variable\">&#x24;proxy_add_x_forwarded_for</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> X-Forwarded-Proto http;\n <span class=\"hljs-attribute\">proxy_http_version</span> <span class=\"hljs-number\">1</span>.<span class=\"hljs-number\">1</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> Upgrade <span class=\"hljs-variable\">&#x24;http_upgrade</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> Connection <span class=\"hljs-string\">&quot;upgrade&quot;</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> Host <span class=\"hljs-variable\">&#x24;http_host</span>;\n <span class=\"hljs-attribute\">proxy_set_header</span> from <span class=\"hljs-string\">&quot;&quot;</span>;\n }\n    \n <span class=\"hljs-comment\"># &#x907f;&#x514d;&#x7aef;&#x70b9;&#x5b89;&#x5168;&#x95ee;&#x9898;</span>\n <span class=\"hljs-attribute\">if</span> (<span class=\"hljs-variable\">&#x24;request_uri</span> <span class=\"hljs-regexp\">~ &quot;/actuator&quot;)</span>{\n <span class=\"hljs-attribute\">return</span> <span class=\"hljs-number\">403</span>;\n }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"157,197"}}],"payload":{"tag":"h3","lines":"149,150"}}],"payload":{"tag":"h2","lines":"111,113"}},{"content":"ECS &#x5b89;&#x5168;&#x7ec4;","children":[{"content":"<pre data-lines=\"201,207\"><code>**&#x6ce8;&#x610f;&#x914d;&#x7f6e;&#x5b89;&#x5168;&#x7ec4;&#xff0c;&#x670d;&#x52a1;&#x76f8;&#x5173;&#x7684;&#x7aef;&#x53e3;&#x5bf9;&#x5916;&#x66b4;&#x9732;**\n\n*   80/443 (&#x751f;&#x4ea7;&#x6a21;&#x5f0f;&#x53ea;&#x9700;&#x8981;&#x5f00;&#x542f;&#x6b64;&#x5173;&#x53e3;)\n*   9999 &#x7f51;&#x5173;&#xff08;&#x5982;&#x9700;&#x8bbf;&#x95ee; swagger &#x9700;&#x8981;&#xff09;\n*   5001 &#x76d1;&#x63a7;&#xff08;&#x5982;&#x9700;&#x8bbf;&#x95ee; monitor &#x9700;&#x8981;&#xff09;\n*   5020 &#x76d1;&#x63a7;&#xff08;&#x5982;&#x9700;&#x8bbf;&#x95ee; monitor &#x9700;&#x8981;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"201,207"}},{"content":"<img src=\"https://mintlify.s3.us-west-1.amazonaws.com/xzcxz/images/1600526129960-ccee8fcd-1db8-4597-a9ab-411b0ea84f67.png\" alt>","children":[],"payload":{"tag":"img","lines":"208,209"}},{"content":"<pre data-lines=\"210,211\"><code>ECS &#x5b89;&#x5168;&#x7ec4;&#x914d;&#x7f6e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"210,211"}}],"payload":{"tag":"h2","lines":"198,200"}}]},{})</script>
</body>
</html>
