<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"https://www.cnblogs.com/xiaohuochai/p/7457742.html\">javascript&#x5e27;&#x52a8;&#x753b;</a><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoklEQVQ4T+2T4Q2CMBCFv27CBjgCG+gIjAAbOAIjOIJs4Ai6gRvIBpjXXCOp19T/8pJLoTneXcj3Ah91wAV4bu68xwXoAZ2EzEAmE9AWTB6AelRDyaAx9zgh0wE4ATczcTdIE7wl0oe7wX/8RMHigfQTB3fDdM1IEvYyONdIVEOSqDwCY2Z2NaS/UNbqMSQmvauUPlfbNKpBSdTUVyXSs/XyBlRCNBG20I28AAAAAElFTkSuQmCC\" alt=\"img\">","children":[{"content":"&#x524d;&#x9762;&#x7684;&#x8bdd;","children":[{"content":"&#x6982;&#x8ff0;","children":[{"content":"<pre data-lines=\"10,29\"><code>&#x3010;&#x5206;&#x7c7b;&#x3011;\n\n&#x3000;&#x3000;&#x5e38;&#x89c1;&#x7684;&#x5e27;&#x52a8;&#x753b;&#x7684;&#x65b9;&#x5f0f;&#x6709;&#x4e09;&#x79cd;&#xff0c;&#x5305;&#x62ec;gif&#x3001;CSS3 animation&#x548c;javascript\n\n&#x3000;&#x3000;git&#x548c;CSS3 animation&#x4e0d;&#x80fd;&#x7075;&#x6d3b;&#x5730;&#x63a7;&#x5236;&#x52a8;&#x753b;&#x7684;&#x6682;&#x505c;&#x548c;&#x64ad;&#x653e;&#x3001;&#x4e0d;&#x80fd;&#x5bf9;&#x5e27;&#x52a8;&#x753b;&#x505a;&#x66f4;&#x52a0;&#x7075;&#x6d3b;&#x5730;&#x6269;&#x5c55;&#x3002;&#x53e6;&#x5916;&#xff0c;gif&#x56fe;&#x4e0d;&#x80fd;&#x6355;&#x6349;&#x52a8;&#x753b;&#x5b8c;&#x6210;&#x7684;&#x4e8b;&#x4ef6;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x4e00;&#x822c;&#x5730;&#xff0c;&#x4f7f;&#x7528;javascript&#x6765;&#x5b9e;&#x73b0;&#x5e27;&#x52a8;&#x753b;\n\n&#x3010;&#x539f;&#x7406;&#x3011;\n\n&#x3000;&#x3000;js&#x5b9e;&#x73b0;&#x5e27;&#x52a8;&#x753b;&#x6709;&#x4e24;&#x79cd;&#x5b9e;&#x73b0;&#x65b9;&#x5f0f;\n\n&#x3000;&#x3000;1&#x3001;&#x5982;&#x679c;&#x6709;&#x591a;&#x5f20;&#x5e27;&#x52a8;&#x753b;&#x56fe;&#x7247;&#xff0c;&#x53ef;&#x4ee5;&#x7528;&#x4e00;&#x4e2a;image&#x6807;&#x7b7e;&#x53bb;&#x627f;&#x8f7d;&#x56fe;&#x7247;&#xff0c;&#x5b9a;&#x65f6;&#x6539;&#x53d8;image&#x7684;src&#x5c5e;&#x6027;(&#x4e0d;&#x63a8;&#x8350;)\n\n&#x3000;&#x3000;2&#x3001;&#x628a;&#x6240;&#x6709;&#x7684;&#x52a8;&#x753b;&#x5173;&#x952e;&#x5e27;&#x90fd;&#x7ed8;&#x5236;&#x5728;&#x4e00;&#x5f20;&#x56fe;&#x7247;&#x91cc;&#xff0c;&#x628a;&#x56fe;&#x7247;&#x4f5c;&#x4e3a;&#x5143;&#x7d20;&#x7684;background-image&#xff0c;&#x5b9a;&#x65f6;&#x6539;&#x53d8;&#x5143;&#x7d20;&#x7684;background-position&#x5c5e;&#x6027;(&#x63a8;&#x8350;)\n\n&#x3000;&#x3000;&#x56e0;&#x4e3a;&#x7b2c;&#x4e00;&#x79cd;&#x65b9;&#x5f0f;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x591a;&#x4e2a;HTTP&#x8bf7;&#x6c42;&#xff0c;&#x6240;&#x4ee5;&#x4e00;&#x822c;&#x5730;&#x63a8;&#x8350;&#x4f7f;&#x7528;&#x7b2c;&#x4e8c;&#x79cd;&#x65b9;&#x5f0f;\n\n&#x3010;&#x5b9e;&#x4f8b;&#x3011;\n\n&#x3000;&#x3000;&#x4e0b;&#x9762;&#x662f;&#x4f7f;&#x7528;&#x5e27;&#x52a8;&#x753b;&#x5236;&#x4f5c;&#x7684;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"10,29"}},{"content":"<pre data-lines=\"32,67\"><code data-lines=\"32,67\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;rabbit&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;width:102px;height:80px&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span>&gt;</span>&#x6682;&#x505c;&#x8fd0;&#x52a8;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> url = <span class=\"hljs-string\">&apos;rabbit-big.png&apos;</span>;\n<span class=\"hljs-keyword\">var</span> positions = [<span class=\"hljs-string\">&apos;0,-854&apos;</span>,<span class=\"hljs-string\">&apos;-174 -852&apos;</span>,<span class=\"hljs-string\">&apos;-349 -852&apos;</span>,<span class=\"hljs-string\">&apos;-524 -852&apos;</span>,<span class=\"hljs-string\">&apos;-698 -852&apos;</span>,<span class=\"hljs-string\">&apos;-873 -848&apos;</span>];\n<span class=\"hljs-keyword\">var</span> ele = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;rabbit&apos;</span>);\n<span class=\"hljs-keyword\">var</span> oTimer = <span class=\"hljs-literal\">null</span>;\nbtn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">if</span>(btn.<span class=\"hljs-property\">innerHTML</span> == <span class=\"hljs-string\">&apos;&#x5f00;&#x59cb;&#x8fd0;&#x52a8;&apos;</span>){\n    <span class=\"hljs-title function_\">frameAnimation</span>(ele,positions,url);\n    btn.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-string\">&apos;&#x6682;&#x505c;&#x8fd0;&#x52a8;&apos;</span>;\n  }<span class=\"hljs-keyword\">else</span>{\n    <span class=\"hljs-built_in\">clearTimeout</span>(oTimer);\n    btn.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-string\">&apos;&#x5f00;&#x59cb;&#x8fd0;&#x52a8;&apos;</span>;\n  } \n}\n<span class=\"hljs-title function_\">frameAnimation</span>(ele,positions,url);\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">frameAnimation</span>(<span class=\"hljs-params\">ele,positions,url</span>){\n  ele.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">backgroundImage</span> = <span class=\"hljs-string\">&apos;url(&apos;</span> + url + <span class=\"hljs-string\">&apos;)&apos;</span>;\n  ele.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">backgroundRepeat</span> = <span class=\"hljs-string\">&apos;no-repeat&apos;</span>; \n  <span class=\"hljs-keyword\">var</span> index = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">var</span> pos = positions[index].<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">&apos; &apos;</span>);\n    ele.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">backgroundPosition</span> = pos[<span class=\"hljs-number\">0</span>] + <span class=\"hljs-string\">&apos;px &apos;</span> + pos[<span class=\"hljs-number\">1</span>] + <span class=\"hljs-string\">&apos;px&apos;</span>;\n    index++;\n    <span class=\"hljs-keyword\">if</span>(index &gt;= positions.<span class=\"hljs-property\">length</span>){\n      index = <span class=\"hljs-number\">0</span>;\n    }\n    oTimer = <span class=\"hljs-built_in\">setTimeout</span>(run,<span class=\"hljs-number\">80</span>);\n  }\n  <span class=\"hljs-title function_\">run</span>();\n}  \n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"32,67"}}],"payload":{"tag":"h3","lines":"8,9"}},{"content":"&#x901a;&#x7528;&#x5e27;&#x52a8;&#x753b;","children":[{"content":"<pre data-lines=\"76,131\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#x6765;&#x8bbe;&#x8ba1;&#x4e00;&#x4e2a;&#x901a;&#x7528;&#x7684;&#x5e27;&#x52a8;&#x753b;&#x5e93;\n\n&#x3010;&#x9700;&#x6c42;&#x5206;&#x6790;&#x3011;\n\n&#x3000;&#x3000;1&#x3001;&#x652f;&#x6301;&#x56fe;&#x7247;&#x9884;&#x52a0;&#x8f7d;\n\n&#x3000;&#x3000;2&#x3001;&#x652f;&#x6301;&#x4e24;&#x79cd;&#x52a8;&#x753b;&#x64ad;&#x653e;&#x65b9;&#x5f0f;&#xff0c;&#x53ca;&#x81ea;&#x5b9a;&#x4e49;&#x6bcf;&#x5e27;&#x52a8;&#x753b;\n\n&#x3000;&#x3000;3&#x3001;&#x652f;&#x6301;&#x5355;&#x7ec4;&#x52a8;&#x753b;&#x63a7;&#x5236;&#x5faa;&#x73af;&#x6b21;&#x6570;(&#x53ef;&#x652f;&#x6301;&#x65e0;&#x9650;&#x6b21;)\n\n&#x3000;&#x3000;4&#x3001;&#x652f;&#x6301;&#x4e00;&#x7ec4;&#x52a8;&#x753b;&#x5b8c;&#x6210;&#xff0c;&#x8fdb;&#x884c;&#x4e0b;&#x4e00;&#x7ec4;&#x52a8;&#x753b;\n\n&#x3000;&#x3000;5&#x3001;&#x652f;&#x6301;&#x6bcf;&#x4e2a;&#x52a8;&#x753b;&#x5b8c;&#x6210;&#x540e;&#x6709;&#x7b49;&#x5f85;&#x65f6;&#x95f4;\n\n&#x3000;&#x3000;6&#x3001;&#x652f;&#x6301;&#x52a8;&#x753b;&#x6682;&#x505c;&#x548c;&#x7ee7;&#x7eed;&#x64ad;&#x653e;\n\n&#x3000;&#x3000;7&#x3001;&#x652f;&#x6301;&#x52a8;&#x753b;&#x5b8c;&#x6210;&#x540e;&#x6267;&#x884c;&#x56de;&#x8c03;&#x51fd;&#x6570;\n\n&#x3010;&#x7f16;&#x7a0b;&#x63a5;&#x53e3;&#x3011;\n\n&#x3000;&#x3000;1&#x3001;loadImage(imglist)//&#x9884;&#x52a0;&#x8f7d;&#x56fe;&#x7247;\n\n&#x3000;&#x3000;2&#x3001;changePosition(ele,positions,imageUrl)//&#x901a;&#x8fc7;&#x6539;&#x53d8;&#x5143;&#x7d20;&#x7684;background-position&#x5b9e;&#x73b0;&#x52a8;&#x753b;\n\n&#x3000;&#x3000;3&#x3001;changeSrc(ele,imglist)//&#x901a;&#x8fc7;&#x6539;&#x53d8;image&#x5143;&#x7d20;&#x7684;src\n\n&#x3000;&#x3000;4&#x3001;enterFrame(callback)//&#x6bcf;&#x4e00;&#x5e27;&#x52a8;&#x753b;&#x6267;&#x884c;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x81ea;&#x5b9a;&#x4e49;&#x6bcf;&#x4e00;&#x5e27;&#x52a8;&#x753b;&#x7684;callback\n\n&#x3000;&#x3000;5&#x3001;repeat(times)//&#x52a8;&#x753b;&#x91cd;&#x590d;&#x6267;&#x884c;&#x7684;&#x6b21;&#x6570;&#xff0c;times&#x4e3a;&#x7a7a;&#x65f6;&#x8868;&#x793a;&#x65e0;&#x9650;&#x6b21;\n\n&#x3000;&#x3000;6&#x3001;repeatForever()//&#x65e0;&#x9650;&#x91cd;&#x590d;&#x4e0a;&#x4e00;&#x6b21;&#x52a8;&#x753b;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;repeat()\n\n&#x3000;&#x3000;7&#x3001;wait(time)//&#x6bcf;&#x4e2a;&#x52a8;&#x753b;&#x6267;&#x884c;&#x5b8c;&#x6210;&#x540e;&#x7b49;&#x5f85;&#x7684;&#x65f6;&#x95f4;\n\n&#x3000;&#x3000;8&#x3001;then(callback)//&#x52a8;&#x753b;&#x6267;&#x884c;&#x5b8c;&#x6210;&#x540e;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;\n\n&#x3000;&#x3000;9&#x3001;start(interval)//&#x52a8;&#x753b;&#x5f00;&#x59cb;&#x6267;&#x884c;&#xff0c;interval&#x8868;&#x793a;&#x52a8;&#x753b;&#x6267;&#x884c;&#x7684;&#x95f4;&#x9694;\n\n&#x3000;&#x3000;10&#x3001;pause()//&#x52a8;&#x753b;&#x6682;&#x505c;\n\n&#x3000;&#x3000;11&#x3001;restart()//&#x52a8;&#x753b;&#x4ece;&#x4e0a;&#x4e00;&#x4ea4;&#x6682;&#x505c;&#x5904;&#x91cd;&#x65b0;&#x6267;&#x884c;\n\n&#x3000;&#x3000;12&#x3001;dispose()//&#x91ca;&#x653e;&#x8d44;&#x6e90;\n\n&#x3010;&#x8c03;&#x7528;&#x65b9;&#x5f0f;&#x3011;\n\n&#x3000;&#x3000;&#x652f;&#x6301;&#x94fe;&#x5f0f;&#x8c03;&#x7528;&#xff0c;&#x7528;&#x52a8;&#x8bcd;&#x7684;&#x65b9;&#x5f0f;&#x63cf;&#x8ff0;&#x63a5;&#x53e3;\n\n&#x3010;&#x4ee3;&#x7801;&#x8bbe;&#x8ba1;&#x3011;\n\n&#x3000;&#x3000;1&#x3001;&#x628a;&#x56fe;&#x7247;&#x9884;&#x52a0;&#x8f7d; -&gt; &#x52a8;&#x753b;&#x6267;&#x884c; -&gt; &#x52a8;&#x753b;&#x7ed3;&#x675f;&#x7b49;&#x4e00;&#x7cfb;&#x5217;&#x64cd;&#x4f5c;&#x770b;&#x6210;&#x4e00;&#x6761;&#x4efb;&#x52a1;&#x94fe;&#x3002;&#x4efb;&#x52a1;&#x94fe;&#x5305;&#x62ec;&#x540c;&#x6b65;&#x6267;&#x884c;&#x548c;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x6267;&#x884c;&#x4e24;&#x79cd;&#x4efb;&#x52a1;\n\n&#x3000;&#x3000;2&#x3001;&#x8bb0;&#x5f55;&#x5f53;&#x524d;&#x4efb;&#x52a1;&#x94fe;&#x7684;&#x7d22;&#x5f15;\n\n&#x3000;&#x3000;3&#x3001;&#x6bcf;&#x4e2a;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x5b8c;&#x6bd5;&#x540e;&#xff0c;&#x901a;&#x8fc7;&#x8c03;&#x7528;next&#x65b9;&#x6cd5;&#xff0c;&#x6267;&#x884c;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x540c;&#x65f6;&#x66f4;&#x65b0;&#x4efb;&#x52a1;&#x94fe;&#x7d22;&#x5f15;&#x503c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,131"}},{"content":"<img src=\"https://images2017.cnblogs.com/blog/740839/201709/740839-20170901094149812-1724379298.png\" alt=\"img\">","children":[],"payload":{"tag":"img","lines":"132,133"}},{"content":"<pre data-lines=\"134,135\"><code>&#x3010;&#x63a5;&#x53e3;&#x5b9a;&#x4e49;&#x3011;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"134,135"}},{"content":"<pre data-lines=\"138,208\"><code data-lines=\"138,208\"><span class=\"hljs-meta\">&apos;use strict&apos;</span>;\n<span class=\"hljs-comment\">/* &#x5e27;&#x52a8;&#x753b;&#x5e93;&#x7c7b;\n * @constructor\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">FrameAnimation</span>(<span class=\"hljs-params\"></span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x53bb;&#x9884;&#x52a0;&#x8f7d;&#x56fe;&#x7247;\n * @param imglist &#x56fe;&#x7247;&#x6570;&#x7ec4;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">loadImage</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">imglist</span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#xff0c;&#x901a;&#x8fc7;&#x5b9a;&#x65f6;&#x6539;&#x53d8;&#x56fe;&#x7247;&#x80cc;&#x666f;&#x4f4d;&#x7f6e;&#xff0c;&#x5b9e;&#x73b0;&#x5e27;&#x52a8;&#x753b;\n * @param ele dom&#x5bf9;&#x8c61;\n * @param positions &#x80cc;&#x666f;&#x4f4d;&#x7f6e;&#x6570;&#x7ec4;\n * @param imageUrl &#x56fe;&#x7247;URL&#x5730;&#x5740;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">changePosition</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">ele,positions,imageUrl</span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#xff0c;&#x901a;&#x8fc7;&#x5b9a;&#x65f6;&#x6539;&#x53d8;image&#x6807;&#x7b7e;&#x7684;src&#x5c5e;&#x6027;&#xff0c;&#x5b9e;&#x73b0;&#x5e27;&#x52a8;&#x753b;\n * @param ele dom&#x5bf9;&#x8c61;\n * @param imglist &#x56fe;&#x7247;&#x6570;&#x7ec4;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">changeSrc</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">ele,imglist</span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#xff0c;&#x81ea;&#x5b9a;&#x4e49;&#x52a8;&#x753b;&#x6bcf;&#x5e27;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x51fd;&#x6570;\n * @param tastFn &#x81ea;&#x5b9a;&#x4e49;&#x6bcf;&#x5e27;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x51fd;&#x6570;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">enterFrame</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">taskFn</span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x5728;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x5b8c;&#x6210;&#x540e;&#x6267;&#x884c;&#x56de;&#x8c03;&#x51fd;&#x6570;\n * @param callback &#x56de;&#x8c03;&#x51fd;&#x6570;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">then</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">callback</span>){}\n\n<span class=\"hljs-comment\">/* &#x5f00;&#x59cb;&#x6267;&#x884c;&#x4efb;&#x52a1;&#xff0c;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x7684;&#x95f4;&#x9694;\n * @param interval\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">start</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">interval</span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x56de;&#x9000;&#x5230;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x5b9e;&#x73b0;&#x91cd;&#x590d;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x7684;&#x6548;&#x679c;&#xff0c;&#x53ef;&#x4ee5;&#x5b9a;&#x4e49;&#x91cd;&#x590d;&#x7684;&#x6b21;&#x6570;\n * @param times &#x91cd;&#x590d;&#x6b21;&#x6570;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">repeat</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">times</span>){}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;repeat()&#xff0c;&#x65e0;&#x9650;&#x5faa;&#x73af;&#x4e0a;&#x4e00;&#x6b21;&#x4efb;&#x52a1;\n * \n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">repeatForever</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){}\n\n<span class=\"hljs-comment\">/* &#x8bbe;&#x7f6e;&#x5f53;&#x524d;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x7ed3;&#x675f;&#x540e;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x5f00;&#x59cb;&#x524d;&#x7684;&#x7b49;&#x5f85;&#x65f6;&#x95f4;\n * @param time &#x7b49;&#x5f85;&#x65f6;&#x957f;\n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">wait</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">time</span>){}\n\n<span class=\"hljs-comment\">/* &#x6682;&#x505c;&#x5f53;&#x524d;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;\n * \n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">pause</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){}\n\n<span class=\"hljs-comment\">/* &#x91cd;&#x65b0;&#x6267;&#x884c;&#x4e0a;&#x4e00;&#x6b21;&#x6682;&#x505c;&#x7684;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;\n * \n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">restart</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){}\n\n<span class=\"hljs-comment\">/* &#x91ca;&#x653e;&#x8d44;&#x6e90;\n * \n */</span>\n<span class=\"hljs-title class_\">FrameAnimation</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">dispose</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"138,208"}}],"payload":{"tag":"h3","lines":"74,75"}},{"content":"&#x56fe;&#x7247;&#x9884;&#x52a0;&#x8f7d;","children":[{"content":"<pre data-lines=\"215,216\"><code>&#x3000;&#x3000;&#x56fe;&#x7247;&#x9884;&#x52a0;&#x8f7d;&#x662f;&#x4e00;&#x4e2a;&#x76f8;&#x5bf9;&#x72ec;&#x7acb;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x53ef;&#x4ee5;&#x5c06;&#x5176;&#x5c01;&#x88c5;&#x4e3a;&#x4e00;&#x4e2a;&#x6a21;&#x5757;imageloader.js\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"215,216"}},{"content":"<pre data-lines=\"219,321\"><code data-lines=\"219,321\"><span class=\"hljs-meta\">&apos;use strict&apos;</span>;\n<span class=\"hljs-comment\">/**\n * &#x9884;&#x52a0;&#x8f7d;&#x56fe;&#x7247;&#x51fd;&#x6570;\n * <span class=\"hljs-doctag\">@param</span>    images   &#x52a0;&#x8f7d;&#x56fe;&#x7247;&#x7684;&#x6570;&#x7ec4;&#x6216;&#x8005;&#x5bf9;&#x8c61;\n * <span class=\"hljs-doctag\">@param</span>    callback &#x5168;&#x90e8;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x5b8c;&#x6bd5;&#x540e;&#x8c03;&#x7528;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;\n * <span class=\"hljs-doctag\">@param</span>    timeout  &#x52a0;&#x8f7d;&#x8d85;&#x65f6;&#x7684;&#x65f6;&#x957f;\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">loadImage</span>(<span class=\"hljs-params\">images,callback,timeout</span>){\n  <span class=\"hljs-comment\">//&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x56fe;&#x7247;&#x7684;&#x8ba1;&#x6570;&#x5668;</span>\n  <span class=\"hljs-keyword\">var</span> count = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-comment\">//&#x5168;&#x90e8;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x6210;&#x529f;&#x7684;&#x6807;&#x5fd7;&#x4f4d;</span>\n  <span class=\"hljs-keyword\">var</span> success = <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-comment\">//&#x8d85;&#x65f6;timer&#x7684;id</span>\n  <span class=\"hljs-keyword\">var</span> timeoutId = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-comment\">//&#x662f;&#x5426;&#x52a0;&#x8f7d;&#x8d85;&#x65f6;&#x7684;&#x6807;&#x5fd7;&#x4f4d;</span>\n  <span class=\"hljs-keyword\">var</span> isTimeout = <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-comment\">//&#x5bf9;&#x56fe;&#x7247;&#x6570;&#x7ec4;(&#x6216;&#x5bf9;&#x8c61;)&#x8fdb;&#x884c;&#x904d;&#x5386;</span>\n  <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> key <span class=\"hljs-keyword\">in</span> images){\n    <span class=\"hljs-comment\">//&#x8fc7;&#x6ee4;prototype&#x4e0a;&#x7684;&#x5c5e;&#x6027;</span>\n    <span class=\"hljs-keyword\">if</span>(!images.<span class=\"hljs-title function_\">hasOwnProperty</span>(key)){\n      <span class=\"hljs-keyword\">continue</span>;\n    }\n    <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x6bcf;&#x4e2a;&#x56fe;&#x7247;&#x5143;&#x7d20;</span>\n    <span class=\"hljs-comment\">//&#x671f;&#x671b;&#x683c;&#x5f0f;&#x662f;object:{src:xxx}</span>\n    <span class=\"hljs-keyword\">var</span> item = images[key];\n    <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">typeof</span> item === <span class=\"hljs-string\">&apos;string&apos;</span>){\n      item = images[key] = {\n        <span class=\"hljs-attr\">src</span>:item\n      };\n    }\n    <span class=\"hljs-comment\">//&#x5982;&#x679c;&#x683c;&#x5f0f;&#x4e0d;&#x6ee1;&#x8db3;&#x671f;&#x671b;&#xff0c;&#x5219;&#x4e22;&#x5f03;&#x6b64;&#x6761;&#x6570;&#x636e;&#xff0c;&#x8fdb;&#x884c;&#x4e0b;&#x4e00;&#x6b21;&#x904d;&#x5386;</span>\n    <span class=\"hljs-keyword\">if</span>(!item || !item.<span class=\"hljs-property\">src</span>){\n      <span class=\"hljs-keyword\">continue</span>;\n    }\n    <span class=\"hljs-comment\">//&#x8ba1;&#x6570;+1</span>\n    count++;\n    <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x56fe;&#x7247;&#x5143;&#x7d20;&#x7684;id</span>\n    item.<span class=\"hljs-property\">id</span> = <span class=\"hljs-string\">&apos;__img__&apos;</span> + key + <span class=\"hljs-title function_\">getId</span>();\n    <span class=\"hljs-comment\">//&#x8bbe;&#x7f6e;&#x56fe;&#x7247;&#x5143;&#x7d20;&#x7684;img&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a;Image&#x5bf9;&#x8c61;</span>\n    item.<span class=\"hljs-property\">img</span> = <span class=\"hljs-variable language_\">window</span>[item.<span class=\"hljs-property\">id</span>] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Image</span>();\n    <span class=\"hljs-title function_\">doLoad</span>(item);\n  }\n  <span class=\"hljs-comment\">//&#x904d;&#x5386;&#x5b8c;&#x6210;&#x5982;&#x679c;&#x8ba1;&#x6570;&#x4e3a;0&#xff0c;&#x5219;&#x76f4;&#x63a5;&#x8c03;&#x7528;callback</span>\n  <span class=\"hljs-keyword\">if</span>(!count){\n    <span class=\"hljs-title function_\">callback</span>(success);\n  }<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(timeout){\n    timeoutId = <span class=\"hljs-built_in\">setTimeout</span>(onTimeout,timeout);\n  }\n\n  <span class=\"hljs-comment\">/**\n   * &#x771f;&#x6b63;&#x8fdb;&#x884c;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x7684;&#x51fd;&#x6570;\n   * <span class=\"hljs-doctag\">@param</span>   item &#x56fe;&#x7247;&#x5143;&#x7d20;&#x5bf9;&#x8c61;\n   */</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">doLoad</span>(<span class=\"hljs-params\">item</span>){\n    item.<span class=\"hljs-property\">status</span> = <span class=\"hljs-string\">&apos;loading&apos;</span>;\n    <span class=\"hljs-keyword\">var</span> img = item.<span class=\"hljs-property\">img</span>;\n    <span class=\"hljs-comment\">//&#x5b9a;&#x4e49;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x6210;&#x529f;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;</span>\n    img.<span class=\"hljs-property\">onload</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      success = success &amp;&amp; <span class=\"hljs-literal\">true</span>;\n      item.<span class=\"hljs-property\">status</span> = <span class=\"hljs-string\">&apos;loaded&apos;</span>;\n      <span class=\"hljs-title function_\">done</span>();\n    }\n    <span class=\"hljs-comment\">//&#x5b9a;&#x4e49;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x5931;&#x8d25;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;</span>\n    img.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n      success = <span class=\"hljs-literal\">false</span>;\n      item.<span class=\"hljs-property\">status</span> = <span class=\"hljs-string\">&apos;error&apos;</span>;\n      <span class=\"hljs-title function_\">done</span>();\n    }\n    <span class=\"hljs-comment\">//&#x53d1;&#x8d77;&#x4e00;&#x4e2a;http(s)&#x8bf7;&#x6c42;</span>\n    img.<span class=\"hljs-property\">src</span> = item.<span class=\"hljs-property\">src</span>;\n    <span class=\"hljs-comment\">/**\n     * &#x6bcf;&#x5f20;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;\n     */</span>\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">done</span>(<span class=\"hljs-params\"></span>){\n      img.<span class=\"hljs-property\">onload</span> = img.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-literal\">null</span>;\n      <span class=\"hljs-keyword\">try</span>{\n        <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-variable language_\">window</span>[item.<span class=\"hljs-property\">id</span>];\n      }<span class=\"hljs-keyword\">catch</span>(e){\n\n      }\n      <span class=\"hljs-comment\">//&#x6bcf;&#x5f20;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#xff0c;&#x8ba1;&#x6570;&#x5668;&#x51cf;1&#xff0c;&#x5f53;&#x6240;&#x6709;&#x56fe;&#x7247;&#x52a0;&#x8f7d;&#x5b8c;&#x6210;&#xff0c;&#x4e14;&#x6ca1;&#x6709;&#x8d85;&#x65f6;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x6e05;&#x9664;&#x8d85;&#x65f6;&#x8ba1;&#x65f6;&#x5668;&#xff0c;&#x4e14;&#x6267;&#x884c;&#x56de;&#x8c03;&#x51fd;&#x6570;</span>\n      <span class=\"hljs-keyword\">if</span>(!--count &amp;&amp; !isTimeout){\n        <span class=\"hljs-built_in\">clearTimeout</span>(timeoutId);\n        <span class=\"hljs-title function_\">callback</span>(success);\n      }\n    }\n  }\n  <span class=\"hljs-comment\">/**\n   * &#x8d85;&#x65f6;&#x51fd;&#x6570;\n   */</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">onTimeout</span>(<span class=\"hljs-params\"></span>){\n    isTimeout = <span class=\"hljs-literal\">true</span>;\n    <span class=\"hljs-title function_\">callback</span>(<span class=\"hljs-literal\">false</span>);\n  }\n}\n<span class=\"hljs-keyword\">var</span> __id = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getId</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">return</span> ++__id;\n}\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = loadImage;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"219,321"}}],"payload":{"tag":"h3","lines":"213,214"}},{"content":"&#x65f6;&#x95f4;&#x8f74;","children":[{"content":"<pre data-lines=\"328,329\"><code>&#x3000;&#x3000;&#x5728;&#x52a8;&#x753b;&#x5904;&#x7406;&#x4e2d;&#xff0c;&#x662f;&#x901a;&#x8fc7;&#x8fed;&#x4ee3;&#x4f7f;&#x7528;setTimeout()&#x5b9e;&#x73b0;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x4e2a;&#x95f4;&#x9694;&#x65f6;&#x95f4;&#x5e76;&#x4e0d;&#x51c6;&#x786e;&#x3002;&#x4e0b;&#x9762;&#xff0c;&#x6765;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x65f6;&#x95f4;&#x8f74;&#x7c7b;timeline.js\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"328,329"}},{"content":"<pre data-lines=\"332,439\"><code data-lines=\"332,439\"><span class=\"hljs-meta\">&apos;use strict&apos;</span>;\n\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">DEFAULT_INTERVAL</span> = <span class=\"hljs-number\">1000</span>/<span class=\"hljs-number\">60</span>;\n\n<span class=\"hljs-comment\">//&#x521d;&#x59cb;&#x5316;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">STATE_INITIAL</span> = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-comment\">//&#x5f00;&#x59cb;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">STATE_START</span> = <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-comment\">//&#x505c;&#x6b62;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">var</span> <span class=\"hljs-variable constant_\">STATE_STOP</span> = <span class=\"hljs-number\">2</span>;\n\n<span class=\"hljs-keyword\">var</span> requestAnimationFrame = (<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">requestAnimationFrame</span> || <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">webkitRequestAnimationFrame</span>|| <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">mozRequestAnimationFrame</span> || <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">oRequestAnimationFrame</span>  || <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">callback</span>){\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-built_in\">setTimeout</span>(callback,(callback.<span class=\"hljs-property\">interval</span> || <span class=\"hljs-variable constant_\">DEFAULT_INTERVAL</span>));\n        }\n})();\n\n<span class=\"hljs-keyword\">var</span> cancelAnimationFrame = (<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">cancelAnimationFrame</span> || <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">webkitCancelAnimationFrame</span> || <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">mozCancelAnimationFrame</span> || <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">oCancelAnimationFrame</span>   || <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">id</span>){\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-built_in\">clearTimeout</span>(id);\n        }  \n})();\n<span class=\"hljs-comment\">/**\n * &#x65f6;&#x95f4;&#x8f74;&#x7c7b;\n * <span class=\"hljs-doctag\">@constructor</span>\n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Timeline</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">animationHandler</span> = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = <span class=\"hljs-variable constant_\">STATE_INITIAL</span>;\n}\n<span class=\"hljs-comment\">/**\n * &#x65f6;&#x95f4;&#x8f74;&#x4e0a;&#x6bcf;&#x4e00;&#x6b21;&#x56de;&#x8c03;&#x6267;&#x884c;&#x7684;&#x51fd;&#x6570;\n * <span class=\"hljs-doctag\">@param</span>   time &#x4ece;&#x52a8;&#x753b;&#x5f00;&#x59cb;&#x5230;&#x5f53;&#x524d;&#x6267;&#x884c;&#x7684;&#x65f6;&#x95f4;\n */</span>\n<span class=\"hljs-title class_\">Timeline</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">onenterframe</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">time</span>){\n\n}\n<span class=\"hljs-comment\">/**\n * &#x52a8;&#x753b;&#x5f00;&#x59cb;\n * <span class=\"hljs-doctag\">@param</span> interval &#x6bcf;&#x4e00;&#x6b21;&#x56de;&#x8c03;&#x7684;&#x95f4;&#x9694;&#x65f6;&#x95f4;\n */</span>\n<span class=\"hljs-title class_\">Timeline</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">start</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">interval</span>){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> === <span class=\"hljs-variable constant_\">STATE_START</span>){\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = <span class=\"hljs-variable constant_\">STATE_START</span>;\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">interval</span> = interval || <span class=\"hljs-variable constant_\">DEFAULT_INTERVAL</span>;\n  <span class=\"hljs-title function_\">startTimeline</span>(<span class=\"hljs-variable language_\">this</span>,+<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>());\n}\n\n<span class=\"hljs-comment\">/**\n * &#x52a8;&#x753b;&#x505c;&#x6b62;\n */</span>\n<span class=\"hljs-title class_\">Timeline</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">stop</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> !== <span class=\"hljs-variable constant_\">STATE_START</span>){\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = <span class=\"hljs-variable constant_\">STATE_STOP</span>;\n  <span class=\"hljs-comment\">//&#x5982;&#x679c;&#x52a8;&#x753b;&#x5f00;&#x59cb;&#x8fc7;&#xff0c;&#x5219;&#x8bb0;&#x5f55;&#x52a8;&#x753b;&#x4ece;&#x5f00;&#x59cb;&#x5230;&#x73b0;&#x5728;&#x6240;&#x7ecf;&#x5386;&#x7684;&#x65f6;&#x95f4;</span>\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">startTime</span>){\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dur</span> = +<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>() - <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">startTime</span>;\n  }\n  <span class=\"hljs-title function_\">cancelAnimationFrame</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">animationHandler</span>);\n}\n\n<span class=\"hljs-comment\">/**\n * &#x91cd;&#x65b0;&#x5f00;&#x59cb;&#x52a8;&#x753b;\n */</span>\n<span class=\"hljs-title class_\">Timeline</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">restart</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> === <span class=\"hljs-variable constant_\">STATE_START</span>){\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dur</span> || !<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">interval</span>){\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = <span class=\"hljs-variable constant_\">STATE_START</span>;\n  <span class=\"hljs-comment\">//&#x65e0;&#x7f1d;&#x8fde;&#x63a5;&#x52a8;&#x753b;</span>\n  <span class=\"hljs-title function_\">startTimeline</span>(<span class=\"hljs-variable language_\">this</span>,+<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>()-<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dur</span>);\n}\n\n<span class=\"hljs-comment\">/**\n * &#x65f6;&#x95f4;&#x8f74;&#x52a8;&#x753b;&#x542f;&#x52a8;&#x51fd;&#x6570;\n * <span class=\"hljs-doctag\">@param</span>   timeline  &#x65f6;&#x95f4;&#x8f74;&#x7684;&#x5b9e;&#x4f8b;\n * <span class=\"hljs-doctag\">@param</span>   startTime &#x52a8;&#x753b;&#x5f00;&#x59cb;&#x65f6;&#x95f4;&#x6233;          \n */</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">startTimeline</span>(<span class=\"hljs-params\">timeline,startTime</span>){\n  <span class=\"hljs-comment\">//&#x8bb0;&#x5f55;&#x4e0a;&#x4e00;&#x6b21;&#x56de;&#x8c03;&#x7684;&#x65f6;&#x95f4;&#x6233;</span>\n  <span class=\"hljs-keyword\">var</span> lastTick = +<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>();\n  timeline.<span class=\"hljs-property\">startTime</span> = startTime;\n  nextTick.<span class=\"hljs-property\">interval</span> = timeline.<span class=\"hljs-property\">interval</span>;\n  <span class=\"hljs-title function_\">nextTick</span>();\n  <span class=\"hljs-comment\">/**\n   * &#x6bcf;&#x4e00;&#x5e27;&#x6267;&#x884c;&#x7684;&#x51fd;&#x6570;\n   */</span>\n  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">nextTick</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">var</span> now = +<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>();\n    timeline.<span class=\"hljs-property\">animationHandler</span> = <span class=\"hljs-title function_\">requestAnimationFrame</span>(nextTick);\n    <span class=\"hljs-comment\">//&#x5982;&#x679c;&#x5f53;&#x524d;&#x65f6;&#x95f4;&#x4e0e;&#x4e0a;&#x4e00;&#x6b21;&#x56de;&#x8c03;&#x7684;&#x65f6;&#x95f4;&#x6233;&#x5927;&#x4e8e;&#x8bbe;&#x7f6e;&#x7684;&#x65f6;&#x95f4;&#x95f4;&#x9694;&#xff0c;&#x8868;&#x793a;&#x8fd9;&#x4e00;&#x6b21;&#x53ef;&#x4ee5;&#x6267;&#x884c;&#x56de;&#x8c03;&#x51fd;&#x6570;</span>\n    <span class=\"hljs-keyword\">if</span>(now - lastTick &gt;= timeline.<span class=\"hljs-property\">interval</span>){\n      timeline.<span class=\"hljs-title function_\">onenterframe</span>(now - startTime);\n      lastTick = now;\n    }\n  }\n}\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = <span class=\"hljs-title class_\">Timeline</span>;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"332,439"}}],"payload":{"tag":"h3","lines":"326,327"}},{"content":"&#x52a8;&#x753b;&#x7c7b;&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"446,447\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#x662f;&#x52a8;&#x753b;&#x7c7b;animation.js&#x5b9e;&#x73b0;&#x7684;&#x5b8c;&#x6574;&#x4ee3;&#x7801;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"446,447"}},{"content":"<pre data-lines=\"450,761\"><code data-lines=\"450,761\"><span class=\"hljs-string\">&apos;use strict&apos;</span>;\n\n<span class=\"hljs-keyword\">var</span> loadImage = require(<span class=\"hljs-string\">&apos;./imageloader&apos;</span>);\n<span class=\"hljs-keyword\">var</span> Timeline = require(<span class=\"hljs-string\">&apos;./timeline&apos;</span>);\n<span class=\"hljs-comment\">//&#x521d;&#x59cb;&#x5316;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">var</span> STATE_INITIAL = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-comment\">//&#x5f00;&#x59cb;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">var</span> STATE_START = <span class=\"hljs-number\">1</span>;\n<span class=\"hljs-comment\">//&#x505c;&#x6b62;&#x72b6;&#x6001;</span>\n<span class=\"hljs-keyword\">var</span> STATE_STOP = <span class=\"hljs-number\">2</span>;\n<span class=\"hljs-comment\">//&#x540c;&#x6b65;&#x4efb;&#x52a1;</span>\n<span class=\"hljs-keyword\">var</span> TASK_SYNC = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-comment\">//&#x5f02;&#x6b65;&#x4efb;&#x52a1;</span>\n<span class=\"hljs-keyword\">var</span> TASK_ASYNC = <span class=\"hljs-number\">1</span>;\n\n<span class=\"hljs-comment\">/**\n * &#x7b80;&#x5355;&#x7684;&#x51fd;&#x6570;&#x5c01;&#x88c5;&#xff0c;&#x6267;&#x884c;callback\n * <span class=\"hljs-doctag\">@param</span>   callback &#x6267;&#x884c;&#x51fd;&#x6570;\n */</span>\nfunction next(callback){\n  callback &amp;&amp; callback();\n}\n<span class=\"hljs-comment\">/* &#x5e27;&#x52a8;&#x753b;&#x5e93;&#x7c7b;\n * @constructor\n */</span>\nfunction FrameAnimation(){\n  <span class=\"hljs-keyword\">this</span>.taskQueue = [];\n  <span class=\"hljs-keyword\">this</span>.index = <span class=\"hljs-number\">0</span>;\n  <span class=\"hljs-keyword\">this</span>.timeline = new Timeline();\n  <span class=\"hljs-keyword\">this</span>.state = STATE_INITIAL;\n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x53bb;&#x9884;&#x52a0;&#x8f7d;&#x56fe;&#x7247;\n * @param imglist &#x56fe;&#x7247;&#x6570;&#x7ec4;\n */</span>\nFrameAnimation.prototype.loadImage = function(imglist){\n  <span class=\"hljs-keyword\">var</span> taskFn = function(next){\n    loadImage(imglist.slice(),next);\n  };\n  <span class=\"hljs-keyword\">var</span> type = TASK_SYNC;\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._add(taskFn,type);\n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#xff0c;&#x901a;&#x8fc7;&#x5b9a;&#x65f6;&#x6539;&#x53d8;&#x56fe;&#x7247;&#x80cc;&#x666f;&#x4f4d;&#x7f6e;&#xff0c;&#x5b9e;&#x73b0;&#x5e27;&#x52a8;&#x753b;\n * @param ele dom&#x5bf9;&#x8c61;\n * @param positions &#x80cc;&#x666f;&#x4f4d;&#x7f6e;&#x6570;&#x7ec4;\n * @param imageUrl &#x56fe;&#x7247;URL&#x5730;&#x5740;\n */</span>\nFrameAnimation.prototype.changePosition = function(ele,positions,imageUrl){\n  <span class=\"hljs-keyword\">var</span> len = positions.length;\n  <span class=\"hljs-keyword\">var</span> taskFn;\n  <span class=\"hljs-keyword\">var</span> type;\n  <span class=\"hljs-keyword\">if</span>(len){\n    <span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-keyword\">this</span>;\n    taskFn = function(next,time){\n      <span class=\"hljs-keyword\">if</span>(imageUrl){\n        ele.style.backgroundImage = <span class=\"hljs-string\">&apos;url(&apos;</span> + imageUrl + <span class=\"hljs-string\">&apos;)&apos;</span>;\n      }\n      <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x5f53;&#x524d;&#x80cc;&#x666f;&#x56fe;&#x7247;&#x4f4d;&#x7f6e;&#x7d22;&#x5f15;</span>\n      <span class=\"hljs-keyword\">var</span> index = Math.min(time/me.interval|<span class=\"hljs-number\">0</span>,len);\n      <span class=\"hljs-keyword\">var</span> position = positions[index-<span class=\"hljs-number\">1</span>].split(<span class=\"hljs-string\">&apos; &apos;</span>);\n      <span class=\"hljs-comment\">//&#x6539;&#x53d8;dom&#x5bf9;&#x8c61;&#x7684;&#x80cc;&#x666f;&#x56fe;&#x7247;&#x4f4d;&#x7f6e;</span>\n      ele.style.backgroundPosition = position[<span class=\"hljs-number\">0</span>] + <span class=\"hljs-string\">&apos;px &apos;</span> + position[<span class=\"hljs-number\">1</span>] + <span class=\"hljs-string\">&apos;px&apos;</span>;\n      <span class=\"hljs-keyword\">if</span>(index === len){\n        next();\n      }\n    }\n    type = TASK_ASYNC;\n  }<span class=\"hljs-keyword\">else</span>{\n    taskFn = next;\n    type = TASK_SYNC;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._add(taskFn,type);\n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#xff0c;&#x901a;&#x8fc7;&#x5b9a;&#x65f6;&#x6539;&#x53d8;image&#x6807;&#x7b7e;&#x7684;src&#x5c5e;&#x6027;&#xff0c;&#x5b9e;&#x73b0;&#x5e27;&#x52a8;&#x753b;\n * @param ele dom&#x5bf9;&#x8c61;\n * @param imglist &#x56fe;&#x7247;&#x6570;&#x7ec4;\n */</span>\nFrameAnimation.prototype.changeSrc = function(ele,imglist){\n  <span class=\"hljs-keyword\">var</span> len = imglist.length;\n  <span class=\"hljs-keyword\">var</span> taskFn;\n  <span class=\"hljs-keyword\">var</span> type;\n  <span class=\"hljs-keyword\">if</span>(len){\n    <span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-keyword\">this</span>;\n    taskFn = function(next,time){\n      <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x5f53;&#x524d;&#x80cc;&#x666f;&#x56fe;&#x7247;&#x4f4d;&#x7f6e;&#x7d22;&#x5f15;</span>\n      <span class=\"hljs-keyword\">var</span> index = Math.min(time/me.interval|<span class=\"hljs-number\">0</span>,len);\n      <span class=\"hljs-comment\">//&#x6539;&#x53d8;image&#x5bf9;&#x8c61;&#x7684;&#x80cc;&#x666f;&#x56fe;&#x7247;&#x4f4d;&#x7f6e;</span>\n      ele.src = imglist[index-<span class=\"hljs-number\">1</span>];\n      <span class=\"hljs-keyword\">if</span>(index === len){\n        next();\n      }\n    }\n    type = TASK_ASYNC;\n  }<span class=\"hljs-keyword\">else</span>{\n    taskFn = next;\n    type = TASK_SYNC;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._add(taskFn,type);  \n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;&#xff0c;&#x81ea;&#x5b9a;&#x4e49;&#x52a8;&#x753b;&#x6bcf;&#x5e27;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x51fd;&#x6570;\n * @param tastFn &#x81ea;&#x5b9a;&#x4e49;&#x6bcf;&#x5e27;&#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x51fd;&#x6570;\n */</span>\nFrameAnimation.prototype.enterFrame = function(taskFn){\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._add(taskFn,TASK_ASYNC);\n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x5728;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x5b8c;&#x6210;&#x540e;&#x6267;&#x884c;&#x56de;&#x8c03;&#x51fd;&#x6570;\n * @param callback &#x56de;&#x8c03;&#x51fd;&#x6570;\n */</span>\nFrameAnimation.prototype.then = function(callback){\n  <span class=\"hljs-keyword\">var</span> taskFn = function(next){\n    callback(<span class=\"hljs-keyword\">this</span>);\n    next();\n  };\n  <span class=\"hljs-keyword\">var</span> type  = TASK_SYNC;\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._add(taskFn,type);\n}\n\n<span class=\"hljs-comment\">/* &#x5f00;&#x59cb;&#x6267;&#x884c;&#x4efb;&#x52a1;&#xff0c;&#x5f02;&#x6b65;&#x5b9a;&#x4e49;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x7684;&#x95f4;&#x9694;\n * @param interval\n */</span>\nFrameAnimation.prototype.start = function(interval){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">this</span>.state === STATE_START){\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>; \n  }\n  <span class=\"hljs-comment\">//&#x5982;&#x679c;&#x4efb;&#x52a1;&#x94fe;&#x4e2d;&#x6ca1;&#x6709;&#x4efb;&#x52a1;&#xff0c;&#x5219;&#x8fd4;&#x56de;</span>\n  <span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-keyword\">this</span>.taskQueue.length){\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n  }\n  <span class=\"hljs-keyword\">this</span>.state = STATE_START;\n  <span class=\"hljs-keyword\">this</span>.interval = interval;\n  <span class=\"hljs-keyword\">this</span>._runTask();\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n    \n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x56de;&#x9000;&#x5230;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x5b9e;&#x73b0;&#x91cd;&#x590d;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x7684;&#x6548;&#x679c;&#xff0c;&#x53ef;&#x4ee5;&#x5b9a;&#x4e49;&#x91cd;&#x590d;&#x7684;&#x6b21;&#x6570;\n * @param times &#x91cd;&#x590d;&#x6b21;&#x6570;\n */</span>\nFrameAnimation.prototype.repeat = function(times){\n  <span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-keyword\">this</span>;\n  <span class=\"hljs-keyword\">var</span> taskFn = function(){\n    <span class=\"hljs-keyword\">if</span>(typeof times === <span class=\"hljs-string\">&apos;undefined&apos;</span>){\n      <span class=\"hljs-comment\">//&#x65e0;&#x9650;&#x56de;&#x9000;&#x5230;&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;</span>\n      me.index--;\n      me._runTask();\n      <span class=\"hljs-keyword\">return</span>;\n    }\n    <span class=\"hljs-keyword\">if</span>(times){\n      times--;\n      <span class=\"hljs-comment\">//&#x56de;&#x9000;</span>\n      me.index--;\n      me._runTask();\n    }<span class=\"hljs-keyword\">else</span>{\n      <span class=\"hljs-comment\">//&#x8fbe;&#x5230;&#x91cd;&#x590d;&#x6b21;&#x6570;&#xff0c;&#x8df3;&#x8f6c;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;</span>\n      <span class=\"hljs-keyword\">var</span> task = me.taskQueue[me.index];\n      me._next(task);\n    }\n  }\n  <span class=\"hljs-keyword\">var</span> type = TASK_SYNC;\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._add(taskFn,type);\n}\n\n<span class=\"hljs-comment\">/* &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x540c;&#x6b65;&#x4efb;&#x52a1;&#xff0c;&#x76f8;&#x5f53;&#x4e8e;repeat()&#xff0c;&#x65e0;&#x9650;&#x5faa;&#x73af;&#x4e0a;&#x4e00;&#x6b21;&#x4efb;&#x52a1;\n * \n */</span>\nFrameAnimation.prototype.repeatForever = function(){\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.repeat();\n}\n\n<span class=\"hljs-comment\">/* &#x8bbe;&#x7f6e;&#x5f53;&#x524d;&#x4efb;&#x52a1;&#x6267;&#x884c;&#x7ed3;&#x675f;&#x540e;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x5f00;&#x59cb;&#x524d;&#x7684;&#x7b49;&#x5f85;&#x65f6;&#x95f4;\n * @param time &#x7b49;&#x5f85;&#x65f6;&#x957f;\n */</span>\nFrameAnimation.prototype.wait = function(time){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">this</span>.taskQueue &amp;&amp; <span class=\"hljs-keyword\">this</span>.taskQueue.length &gt; <span class=\"hljs-number\">0</span>){\n    <span class=\"hljs-keyword\">this</span>.taskQueue[<span class=\"hljs-keyword\">this</span>.taskQueue.length - <span class=\"hljs-number\">1</span>].wait = time;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n}\n\n<span class=\"hljs-comment\">/* &#x6682;&#x505c;&#x5f53;&#x524d;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;\n * \n */</span>\nFrameAnimation.prototype.pause = function(){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">this</span>.state === STATE_START){\n    <span class=\"hljs-keyword\">this</span>.state = STATE_STOP;\n    <span class=\"hljs-keyword\">this</span>.timeline.stop();\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n}\n\n<span class=\"hljs-comment\">/* &#x91cd;&#x65b0;&#x6267;&#x884c;&#x4e0a;&#x4e00;&#x6b21;&#x6682;&#x505c;&#x7684;&#x5f02;&#x6b65;&#x5b9a;&#x65f6;&#x4efb;&#x52a1;\n * \n */</span>\nFrameAnimation.prototype.restart = function(){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">this</span>.state === STATE_STOP){\n    <span class=\"hljs-keyword\">this</span>.state = STATE_START;\n    <span class=\"hljs-keyword\">this</span>.timeline.restart();\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;  \n}\n\n<span class=\"hljs-comment\">/* &#x91ca;&#x653e;&#x8d44;&#x6e90;\n * \n */</span>\nFrameAnimation.prototype.dispose = function(){\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">this</span>.state !== STATE_INITIAL){\n    <span class=\"hljs-keyword\">this</span>.state = STATE_INITIAL;\n    <span class=\"hljs-keyword\">this</span>.taskQueue = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">this</span>.timeline.stop();\n    <span class=\"hljs-keyword\">this</span>.timeline = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;    \n}\n\n<span class=\"hljs-comment\">/**\n * &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x5230;&#x4efb;&#x52a1;&#x961f;&#x5217;\n * <span class=\"hljs-doctag\">@param</span> taskFn &#x4efb;&#x52a1;&#x65b9;&#x6cd5;\n * <span class=\"hljs-doctag\">@param</span> type   &#x4efb;&#x52a1;&#x7c7b;&#x578b;\n * <span class=\"hljs-doctag\">@private</span>\n */</span>\nFrameAnimation.prototype._add = function(taskFn,type){\n  <span class=\"hljs-keyword\">this</span>.taskQueue.push({\n    taskFn:taskFn,\n    type:type\n  });\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n}\n\n<span class=\"hljs-comment\">/**\n * &#x6267;&#x884c;&#x4efb;&#x52a1;\n * <span class=\"hljs-doctag\">@private</span>\n */</span>\nFrameAnimation.prototype._runTask = function(){\n  <span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-keyword\">this</span>.taskQueue || <span class=\"hljs-keyword\">this</span>.state !== STATE_START){\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-comment\">//&#x4efb;&#x52a1;&#x6267;&#x884c;&#x5b8c;&#x6bd5;</span>\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-keyword\">this</span>.index === <span class=\"hljs-keyword\">this</span>.taskQueue.length){\n    <span class=\"hljs-keyword\">this</span>.dispose();\n    <span class=\"hljs-keyword\">return</span>;\n  }\n  <span class=\"hljs-comment\">//&#x83b7;&#x5f97;&#x4efb;&#x52a1;&#x94fe;&#x4e0a;&#x7684;&#x5f53;&#x524d;&#x4efb;&#x52a1;</span>\n  <span class=\"hljs-keyword\">var</span> task = <span class=\"hljs-keyword\">this</span>.taskQueue[<span class=\"hljs-keyword\">this</span>.index];\n  <span class=\"hljs-keyword\">if</span>(task.type === TASK_SYNC){\n    <span class=\"hljs-keyword\">this</span>._syncTask(task);\n  }<span class=\"hljs-keyword\">else</span>{\n    <span class=\"hljs-keyword\">this</span>._asyncTask(task);\n  }\n}\n\n<span class=\"hljs-comment\">/**\n * &#x540c;&#x6b65;&#x4efb;&#x52a1;\n * <span class=\"hljs-doctag\">@param</span>  task &#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x5bf9;&#x8c61;\n * <span class=\"hljs-doctag\">@private</span>\n */</span>\nFrameAnimation.prototype._syncTask = function(task){\n  <span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-keyword\">this</span>;\n  <span class=\"hljs-keyword\">var</span> next = function(){\n    <span class=\"hljs-comment\">//&#x5207;&#x6362;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;</span>\n    me._next(task);\n  }\n  <span class=\"hljs-keyword\">var</span> taskFn = task.taskFn;\n  taskFn(next);\n}\n\n<span class=\"hljs-comment\">/**\n * &#x5f02;&#x6b65;&#x4efb;&#x52a1;\n * <span class=\"hljs-doctag\">@param</span>  task &#x6267;&#x884c;&#x7684;&#x4efb;&#x52a1;&#x5bf9;&#x8c61;\n * <span class=\"hljs-doctag\">@private</span>\n */</span>\nFrameAnimation.prototype._asyncTask = function(task){\n  <span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-keyword\">this</span>;\n  <span class=\"hljs-comment\">//&#x5b9a;&#x4e49;&#x6bcf;&#x4e00;&#x5e27;&#x6267;&#x884c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;</span>\n  <span class=\"hljs-keyword\">var</span> enterframe = function(time){\n    <span class=\"hljs-keyword\">var</span> taskFn = task.taskFn;\n    <span class=\"hljs-keyword\">var</span> next = function(){\n      <span class=\"hljs-comment\">//&#x505c;&#x6b62;&#x5f53;&#x524d;&#x4efb;&#x52a1;</span>\n      me.timeline.stop();\n      <span class=\"hljs-comment\">//&#x6267;&#x884c;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;</span>\n      me._next(task);\n    };\n    taskFn(next,time);\n  }\n  <span class=\"hljs-keyword\">this</span>.timeline.onenterframe = enterframe;\n  <span class=\"hljs-keyword\">this</span>.timeline.start(<span class=\"hljs-keyword\">this</span>.interval);\n}\n\n<span class=\"hljs-comment\">/**\n * &#x5207;&#x6362;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#xff0c;&#x652f;&#x6301;&#x5982;&#x679c;&#x5f53;&#x524d;&#x4efb;&#x52a1;&#x9700;&#x8981;&#x7b49;&#x5f85;&#xff0c;&#x5219;&#x5ef6;&#x65f6;&#x6267;&#x884c;\n * <span class=\"hljs-doctag\">@private</span>\n */</span>\nFrameAnimation.prototype._next = function(task){\n  <span class=\"hljs-keyword\">this</span>.index++;\n  <span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-keyword\">this</span>;\n  task.wait ? setTimeout(function(){\n    me._runTask();\n  },task.wait) :  <span class=\"hljs-keyword\">this</span>._runTask();\n}\n\nmodule.exports = function(){\n&#x3000;&#x3000;<span class=\"hljs-keyword\">return</span> new FrameAnimation();\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"450,761"}}],"payload":{"tag":"h3","lines":"444,445"}},{"content":"webpack&#x914d;&#x7f6e;","children":[{"content":"<pre data-lines=\"768,769\"><code>&#x3000;&#x3000;&#x7531;&#x4e8e;animation&#x5e27;&#x52a8;&#x753b;&#x5e93;&#x7684;&#x5236;&#x4f5c;&#x4e2d;&#x5e94;&#x7528;&#x4e86;AMD&#x6a21;&#x5757;&#x89c4;&#x8303;&#xff0c;&#x4f46;&#x7531;&#x4e8e;&#x6d4f;&#x89c8;&#x5668;&#x5c42;&#x9762;&#x4e0d;&#x652f;&#x6301;&#xff0c;&#x9700;&#x8981;&#x4f7f;&#x7528;webpack&#x8fdb;&#x884c;&#x6a21;&#x5757;&#x5316;&#x7ba1;&#x7406;&#xff0c;&#x5c06;animation.js&#x3001;imageloader.js&#x548c;timeline.js&#x6253;&#x5305;&#x4e3a;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"768,769"}},{"content":"<pre data-lines=\"772,785\"><code data-lines=\"772,785\">module.<span class=\"hljs-attr\">exports</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">  entry:</span><span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">    animation:</span><span class=\"hljs-string\">&quot;./src/animation.js&quot;</span>\n  <span class=\"hljs-punctuation\">}</span>,\n<span class=\"hljs-symbol\">  output:</span><span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">    path:</span>__dirname + <span class=\"hljs-string\">&quot;/build&quot;</span>,\n<span class=\"hljs-symbol\">    filename:</span><span class=\"hljs-string\">&quot;[name].js&quot;</span>,\n<span class=\"hljs-symbol\">    library:</span><span class=\"hljs-string\">&quot;animation&quot;</span>,\n<span class=\"hljs-symbol\">    libraryTarget:</span><span class=\"hljs-string\">&quot;umd&quot;</span>,\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"772,785"}},{"content":"<pre data-lines=\"788,789\"><code>&#x3000;&#x3000;&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4ee3;&#x7801;&#x5b9e;&#x4f8b;&#xff0c;&#x901a;&#x8fc7;&#x521b;&#x5efa;&#x7684;&#x5e27;&#x52a8;&#x753b;&#x5e93;&#x5b9e;&#x73b0;&#x535a;&#x5ba2;&#x5f00;&#x59cb;&#x7684;&#x52a8;&#x753b;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"788,789"}},{"content":"<pre data-lines=\"792,812\"><code data-lines=\"792,812\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;rabbit&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;width:102px;height:80px;background-repeat:no-repeat&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../build/animation.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> imgUrl = <span class=\"hljs-string\">&apos;rabbit-big.png&apos;</span>;\n<span class=\"hljs-keyword\">var</span> positions = [<span class=\"hljs-string\">&apos;0,-854&apos;</span>,<span class=\"hljs-string\">&apos;-174 -852&apos;</span>,<span class=\"hljs-string\">&apos;-349 -852&apos;</span>,<span class=\"hljs-string\">&apos;-524 -852&apos;</span>,<span class=\"hljs-string\">&apos;-698 -852&apos;</span>,<span class=\"hljs-string\">&apos;-873 -848&apos;</span>];\n<span class=\"hljs-keyword\">var</span> ele = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;rabbit&apos;</span>);\n<span class=\"hljs-keyword\">var</span> animation = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">animation</span>;\n<span class=\"hljs-keyword\">var</span> repeatAnimation = <span class=\"hljs-title function_\">animation</span>().<span class=\"hljs-title function_\">loadImage</span>([imgUrl]).<span class=\"hljs-title function_\">changePosition</span>(ele,positions,imgUrl).<span class=\"hljs-title function_\">repeatForever</span>();\nrepeatAnimation.<span class=\"hljs-title function_\">start</span>(<span class=\"hljs-number\">80</span>); \n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"792,812"}}],"payload":{"tag":"h3","lines":"766,767"}},{"content":"&#x66f4;&#x591a;&#x5b9e;&#x4f8b;","children":[{"content":"<pre data-lines=\"821,822\"><code>&#x3000;&#x3000;&#x9664;&#x4e86;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x5154;&#x5b50;&#x63a8;&#x8f66;&#x7684;&#x6548;&#x679c;&#xff0c;&#x8fd8;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x5e27;&#x52a8;&#x753b;&#x5b9e;&#x73b0;&#x5154;&#x5b50;&#x80dc;&#x5229;&#x548c;&#x5154;&#x5b50;&#x5931;&#x8d25;&#x7684;&#x6548;&#x679c;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"821,822"}},{"content":"<pre data-lines=\"825,871\"><code data-lines=\"825,871\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Document<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n<span class=\"hljs-selector-tag\">div</span>{<span class=\"hljs-attribute\">position</span>:absolute;<span class=\"hljs-attribute\">width</span>:<span class=\"hljs-number\">102px</span>;<span class=\"hljs-attribute\">height</span>:<span class=\"hljs-number\">80px</span>;<span class=\"hljs-attribute\">background-repeat</span>:no-repeat;}  \n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;rabbit1&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;left:10px;top:50px;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;rabbit2&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;left:120px;top:50px;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;rabbit3&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;left:230px;top:50px;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://sandbox.runjs.cn/uploads/rs/26/ddzmgynp/animation.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n<span class=\"hljs-keyword\">var</span> baseUrl = <span class=\"hljs-string\">&apos;http://7xpdkf.com1.z0.glb.clouddn.com/runjs/img/&apos;</span>;\n<span class=\"hljs-keyword\">var</span> images = [<span class=\"hljs-string\">&apos;rabbit-big.png&apos;</span>,<span class=\"hljs-string\">&apos;rabbit-lose.png&apos;</span>,<span class=\"hljs-string\">&apos;rabbit-win.png&apos;</span>];\n<span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; images.<span class=\"hljs-property\">length</span>; i++){\n  images[i] = baseUrl + images[i];\n}\n<span class=\"hljs-keyword\">var</span> rightRunningMap = [<span class=\"hljs-string\">&quot;0 -854&quot;</span>, <span class=\"hljs-string\">&quot;-174 -852&quot;</span>, <span class=\"hljs-string\">&quot;-349 -852&quot;</span>, <span class=\"hljs-string\">&quot;-524 -852&quot;</span>, <span class=\"hljs-string\">&quot;-698 -851&quot;</span>, <span class=\"hljs-string\">&quot;-873 -848&quot;</span>];\n<span class=\"hljs-keyword\">var</span> leftRunningMap = [<span class=\"hljs-string\">&quot;0 -373&quot;</span>, <span class=\"hljs-string\">&quot;-175 -376&quot;</span>, <span class=\"hljs-string\">&quot;-350 -377&quot;</span>, <span class=\"hljs-string\">&quot;-524 -377&quot;</span>, <span class=\"hljs-string\">&quot;-699 -377&quot;</span>, <span class=\"hljs-string\">&quot;-873 -379&quot;</span>];\n<span class=\"hljs-keyword\">var</span> rabbitWinMap = [<span class=\"hljs-string\">&quot;0 0&quot;</span>, <span class=\"hljs-string\">&quot;-198 0&quot;</span>, <span class=\"hljs-string\">&quot;-401 0&quot;</span>, <span class=\"hljs-string\">&quot;-609 0&quot;</span>, <span class=\"hljs-string\">&quot;-816 0&quot;</span>, <span class=\"hljs-string\">&quot;0 -96&quot;</span>, <span class=\"hljs-string\">&quot;-208 -97&quot;</span>, <span class=\"hljs-string\">&quot;-415 -97&quot;</span>, <span class=\"hljs-string\">&quot;-623 -97&quot;</span>, <span class=\"hljs-string\">&quot;-831 -97&quot;</span>, <span class=\"hljs-string\">&quot;0 -203&quot;</span>, <span class=\"hljs-string\">&quot;-207 -203&quot;</span>, <span class=\"hljs-string\">&quot;-415 -203&quot;</span>, <span class=\"hljs-string\">&quot;-623 -203&quot;</span>, <span class=\"hljs-string\">&quot;-831 -203&quot;</span>, <span class=\"hljs-string\">&quot;0 -307&quot;</span>, <span class=\"hljs-string\">&quot;-206 -307&quot;</span>, <span class=\"hljs-string\">&quot;-414 -307&quot;</span>, <span class=\"hljs-string\">&quot;-623 -307&quot;</span>];\n<span class=\"hljs-keyword\">var</span> rabbitLoseMap = [<span class=\"hljs-string\">&quot;0 0&quot;</span>, <span class=\"hljs-string\">&quot;-163 0&quot;</span>, <span class=\"hljs-string\">&quot;-327 0&quot;</span>, <span class=\"hljs-string\">&quot;-491 0&quot;</span>, <span class=\"hljs-string\">&quot;-655 0&quot;</span>, <span class=\"hljs-string\">&quot;-819 0&quot;</span>, <span class=\"hljs-string\">&quot;0 -135&quot;</span>, <span class=\"hljs-string\">&quot;-166 -135&quot;</span>, <span class=\"hljs-string\">&quot;-333 -135&quot;</span>, <span class=\"hljs-string\">&quot;-500 -135&quot;</span>, <span class=\"hljs-string\">&quot;-668 -135&quot;</span>, <span class=\"hljs-string\">&quot;-835 -135&quot;</span>, <span class=\"hljs-string\">&quot;0 -262&quot;</span>];\n\n<span class=\"hljs-keyword\">var</span> animation = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">animation</span>;\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">repeat</span>(<span class=\"hljs-params\"></span>){\n  <span class=\"hljs-keyword\">var</span> repeatAnimation = <span class=\"hljs-title function_\">animation</span>().<span class=\"hljs-title function_\">loadImage</span>(images).<span class=\"hljs-title function_\">changePosition</span>(rabbit1, rightRunningMap, images[<span class=\"hljs-number\">0</span>]).<span class=\"hljs-title function_\">repeatForever</span>();\n  repeatAnimation.<span class=\"hljs-title function_\">start</span>(<span class=\"hljs-number\">80</span>); \n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">win</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> winAnimation = <span class=\"hljs-title function_\">animation</span>().<span class=\"hljs-title function_\">loadImage</span>(images).<span class=\"hljs-title function_\">changePosition</span>(rabbit2, rabbitWinMap, images[<span class=\"hljs-number\">2</span>]).<span class=\"hljs-title function_\">repeatForever</span>();\n  winAnimation.<span class=\"hljs-title function_\">start</span>(<span class=\"hljs-number\">200</span>);\n}\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">lose</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">var</span> loseAnimation = <span class=\"hljs-title function_\">animation</span>().<span class=\"hljs-title function_\">loadImage</span>(images).<span class=\"hljs-title function_\">changePosition</span>(rabbit3, rabbitLoseMap, images[<span class=\"hljs-number\">1</span>]).<span class=\"hljs-title function_\">repeatForever</span>();\n  loseAnimation.<span class=\"hljs-title function_\">start</span>(<span class=\"hljs-number\">200</span>);\n}\n<span class=\"hljs-title function_\">repeat</span>();\n<span class=\"hljs-title function_\">win</span>();\n<span class=\"hljs-title function_\">lose</span>();\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"825,871"}}],"payload":{"tag":"h3","lines":"819,820"}}],"payload":{"tag":"h2","lines":"2,3"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
