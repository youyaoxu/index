<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x8ba1;&#x6a21;&#x5f0f;&#xff1a;&#x884c;&#x4e3a;&#x578b;-&#x547d;&#x4ee4;&#x6a21;&#x5f0f;.md","children":[{"content":"2.1&#x3001;&#x62bd;&#x8c61;&#x547d;&#x4ee4;&#x7c7b;","children":[{"content":"<pre data-lines=\"44,45\"><code>Command\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"44,45"}},{"content":"<pre data-lines=\"46,56\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">Command</span> {\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">execute</span><span class=\"hljs-params\">()</span>;\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">undo</span><span class=\"hljs-params\">()</span>;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,56"}}],"payload":{"tag":"h2","lines":"41,43"}},{"content":"2.2&#x3001;&#x5177;&#x4f53;&#x547d;&#x4ee4;&#x7c7b;","children":[{"content":"<pre data-lines=\"60,61\"><code>NoCommand\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"60,61"}},{"content":"<pre data-lines=\"62,76\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">NoCommand</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Command</span> {\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">execute</span><span class=\"hljs-params\">()</span> {\n\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">undo</span><span class=\"hljs-params\">()</span> {\n\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"62,76"}},{"content":"<pre data-lines=\"77,78\"><code>TVOnCommand\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"77,78"}},{"content":"<pre data-lines=\"79,99\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TVOnCommand</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Command</span> {\n    TVReceiver tv;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">TVOnCommand</span><span class=\"hljs-params\">(TVReceiver tv)</span> {\n        <span class=\"hljs-built_in\">this</span>.tv = tv;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">execute</span><span class=\"hljs-params\">()</span> {\n        tv.on();\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">undo</span><span class=\"hljs-params\">()</span> {\n        tv.off();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"79,99"}},{"content":"<pre data-lines=\"100,101\"><code>TVOffCommand\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"100,101"}},{"content":"<pre data-lines=\"102,122\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TVOffCommand</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">Command</span> {\n    TVReceiver tv;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">TVOffCommand</span><span class=\"hljs-params\">(TVReceiver tv)</span> {\n        <span class=\"hljs-built_in\">this</span>.tv = tv;\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">execute</span><span class=\"hljs-params\">()</span> {\n        tv.off();\n    }\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">undo</span><span class=\"hljs-params\">()</span> {\n        tv.on();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"102,122"}}],"payload":{"tag":"h2","lines":"57,59"}},{"content":"2.3&#x3001;&#x547d;&#x4ee4;&#x63a5;&#x6536;&#x8005;","children":[{"content":"<pre data-lines=\"126,127\"><code>TVReceiver\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"126,127"}},{"content":"<pre data-lines=\"128,140\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TVReceiver</span> {\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">on</span><span class=\"hljs-params\">()</span> {\n        System.out.println(<span class=\"hljs-string\">&quot; &#x7535;&#x89c6;&#x673a;&#x6253;&#x5f00;&#x4e86;... &quot;</span>);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">off</span><span class=\"hljs-params\">()</span> {\n        System.out.println(<span class=\"hljs-string\">&quot; &#x7535;&#x89c6;&#x673a;&#x5173;&#x95ed;&#x4e86;... &quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"128,140"}}],"payload":{"tag":"h2","lines":"123,125"}},{"content":"2.4&#x3001;&#x547d;&#x4ee4;&#x8bf7;&#x6c42;&#x8005;","children":[{"content":"<pre data-lines=\"144,145\"><code>RemoteController\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"144,145"}},{"content":"<pre data-lines=\"146,191\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">RemoteController</span> {\n    Command[] onCommands;   \n    Command[] offCommands;  \n    Command undoCommand;    \n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-title function_\">RemoteController</span><span class=\"hljs-params\">()</span> {\n        onCommands = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Command</span>[<span class=\"hljs-number\">5</span>];\n        offCommands = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Command</span>[<span class=\"hljs-number\">5</span>];\n\n        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">5</span>; i++) {\n            onCommands[i] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">NoCommand</span>();\n            offCommands[i] = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">NoCommand</span>();\n        }\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setCommand</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> no, Command onCommand, Command offCommand)</span> {\n        onCommands[no] = onCommand;\n        offCommands[no] = offCommand;\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">onButtonWasPushed</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> no)</span> {\n        \n        onCommands[no].execute();\n        \n        undoCommand = onCommands[no];\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">offButtonWasPushed</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> no)</span> {\n        \n        offCommands[no].execute();\n        \n        undoCommand = offCommands[no];\n    }\n\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">undoButtonWasPushed</span><span class=\"hljs-params\">()</span> {\n        undoCommand.undo();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"146,191"}}],"payload":{"tag":"h2","lines":"141,143"}},{"content":"2.5&#x3001;&#x6700;&#x7ec8;&#x6d4b;&#x8bd5;&#x7c7b;","children":[{"content":"<pre data-lines=\"195,196\"><code>Client\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"195,196"}},{"content":"<pre data-lines=\"197,215\"><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Client</span> {\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> {\n        \n        <span class=\"hljs-type\">RemoteController</span> <span class=\"hljs-variable\">remoteController</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RemoteController</span>();\n        \n        <span class=\"hljs-type\">TVReceiver</span> <span class=\"hljs-variable\">tvReceiver</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TVReceiver</span>();\n        <span class=\"hljs-type\">TVOffCommand</span> <span class=\"hljs-variable\">tvOffCommand</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TVOffCommand</span>(tvReceiver);\n        <span class=\"hljs-type\">TVOnCommand</span> <span class=\"hljs-variable\">tvOnCommand</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TVOnCommand</span>(tvReceiver);\n        remoteController.setCommand(<span class=\"hljs-number\">0</span>, tvOnCommand, tvOffCommand);\n        \n        remoteController.onButtonWasPushed(<span class=\"hljs-number\">0</span>);\n        remoteController.offButtonWasPushed(<span class=\"hljs-number\">0</span>);\n        remoteController.undoButtonWasPushed();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"197,215"}},{"content":"<pre data-lines=\"216,222\"><code class=\"language-java\"> &#x7535;&#x89c6;&#x673a;&#x6253;&#x5f00;&#x4e86;... \n &#x7535;&#x89c6;&#x673a;&#x5173;&#x95ed;&#x4e86;... \n &#x7535;&#x89c6;&#x673a;&#x6253;&#x5f00;&#x4e86;... \n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"216,222"}},{"content":"<pre data-lines=\"223,226\"><code>Spring &#x6846;&#x67b6;&#x7684; JdbcTemplate &#x5c31;&#x4f7f;&#x7528;&#x5230;&#x4e86;&#x547d;&#x4ee4;&#x6a21;&#x5f0f;&#xff0c;&#x4e0d;&#x8fc7;&#x5e76;&#x4e0d;&#x662f;&#x547d;&#x4ee4;&#x6a21;&#x5f0f;&#x7684;&#x6807;&#x51c6;&#x5b9e;&#x73b0;&#xff0c;&#x53ea;&#x662f;&#x7528;&#x5230;&#x4e86;&#x547d;&#x4ee4;&#x6a21;&#x5f0f;&#x7684;&#x601d;&#x60f3;&#x3002;\n\nStatementCallback&#x5145;&#x5f53;&#x4e86;&#x62bd;&#x8c61;&#x547d;&#x4ee4;&#x7c7b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"223,226"}},{"content":"<pre data-lines=\"227,235\"><code class=\"language-java\"><span class=\"hljs-meta\">@FunctionalInterface</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">StatementCallback</span>&lt;T&gt; {\n\t<span class=\"hljs-meta\">@Nullable</span>\n\tT <span class=\"hljs-title function_\">doInStatement</span><span class=\"hljs-params\">(Statement stmt)</span> <span class=\"hljs-keyword\">throws</span> SQLException, DataAccessException;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"227,235"}},{"content":"<pre data-lines=\"236,237\"><code>&#x4ee5;&#x4e0b;&#x56fe;&#x7247;&#x4e2d;&#x662f;&#x5b9e;&#x73b0;&#x4e86;StatementCallback&#x7684;&#x6240;&#x6709;&#x5177;&#x4f53;&#x547d;&#x4ee4;&#x7c7b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,237"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/c3a730fdf6f61ba56c380a645fadae46.png\" alt>","children":[],"payload":{"tag":"img","lines":"238,239"}},{"content":"<pre data-lines=\"240,241\"><code>&#x8fd9;&#x91cc;QueryStatementCallback&#x4f7f;&#x7528;&#x5230;&#x4e86;&#x533f;&#x540d;&#x5185;&#x90e8;&#x7c7b;&#x800c;&#x4e0d;&#x662f;&#x5355;&#x72ec;&#x5199;&#x6210;&#x4e00;&#x4e2a;&#x7c7b;&#x6587;&#x4ef6;&#xff0c;&#x5b83;&#x5b9e;&#x73b0;&#x4e86;&#x547d;&#x4ee4;&#x63a5;&#x53e3;&#xff0c; &#x540c;&#x65f6;&#x4e5f;&#x5145;&#x5f53;&#x547d;&#x4ee4;&#x63a5;&#x6536;&#x8005;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"240,241"}},{"content":"<pre data-lines=\"242,278\"><code class=\"language-java\"><span class=\"hljs-meta\">@Nullable</span>\n<span class=\"hljs-keyword\">public</span> &lt;T&gt; T <span class=\"hljs-title function_\">query</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String sql, <span class=\"hljs-keyword\">final</span> ResultSetExtractor&lt;T&gt; rse)</span> <span class=\"hljs-keyword\">throws</span> DataAccessException {\n    Assert.notNull(sql, <span class=\"hljs-string\">&quot;SQL must not be null&quot;</span>);\n    Assert.notNull(rse, <span class=\"hljs-string\">&quot;ResultSetExtractor must not be null&quot;</span>);\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">this</span>.logger.isDebugEnabled()) {\n        <span class=\"hljs-built_in\">this</span>.logger.debug(<span class=\"hljs-string\">&quot;Executing SQL query [&quot;</span> + sql + <span class=\"hljs-string\">&quot;]&quot;</span>);\n    }\n\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">QueryStatementCallback</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">StatementCallback</span>&lt;T&gt;, SqlProvider {\n        QueryStatementCallback() {}\n\n        <span class=\"hljs-meta\">@Nullable</span>\n        <span class=\"hljs-keyword\">public</span> T <span class=\"hljs-title function_\">doInStatement</span><span class=\"hljs-params\">(Statement stmt)</span> <span class=\"hljs-keyword\">throws</span> SQLException {\n            <span class=\"hljs-type\">ResultSet</span> <span class=\"hljs-variable\">rs</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;\n\n            Object var3;\n            <span class=\"hljs-keyword\">try</span> {\n                rs = stmt.executeQuery(sql);\n                var3 = rse.extractData(rs);\n            } <span class=\"hljs-keyword\">finally</span> {\n                JdbcUtils.closeResultSet(rs);\n            }\n\n            <span class=\"hljs-keyword\">return</span> var3;\n        }\n\n        <span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title function_\">getSql</span><span class=\"hljs-params\">()</span> {\n            <span class=\"hljs-keyword\">return</span> sql;\n        }\n    }\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">this</span>.execute(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">QueryStatementCallback</span>(), <span class=\"hljs-literal\">true</span>);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"242,278"}},{"content":"<pre data-lines=\"279,280\"><code>&#x547d;&#x4ee4;&#x8c03;&#x7528;&#x8005;&#x662f; JdbcTemplate&#xff0c;&#x5176;&#x4e2d; `execute(StatementCallback&lt;T&gt; action, boolean closeResources)` &#x65b9;&#x6cd5;&#x4e2d;&#xff0c;&#x8c03;&#x7528; `action.doInStatement(stmt)` &#x65b9;&#x6cd5;&#xff0c;&#x4e0d;&#x540c;&#x7684;&#x5b9e;&#x73b0; StatementCallback &#x63a5;&#x53e3;&#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x5bf9;&#x5e94;&#x4e0d;&#x540c;&#x7684; doInStatemnt &#x5b9e;&#x73b0;&#x903b;&#x8f91;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"279,280"}},{"content":"<pre data-lines=\"281,314\"><code class=\"language-java\"><span class=\"hljs-meta\">@Nullable</span>\n<span class=\"hljs-keyword\">private</span> &lt;T&gt; T <span class=\"hljs-title function_\">execute</span><span class=\"hljs-params\">(StatementCallback&lt;T&gt; action, <span class=\"hljs-type\">boolean</span> closeResources)</span> <span class=\"hljs-keyword\">throws</span> DataAccessException {\n    Assert.notNull(action, <span class=\"hljs-string\">&quot;Callback object must not be null&quot;</span>);\n    <span class=\"hljs-type\">Connection</span> <span class=\"hljs-variable\">con</span> <span class=\"hljs-operator\">=</span> DataSourceUtils.getConnection(<span class=\"hljs-built_in\">this</span>.obtainDataSource());\n    <span class=\"hljs-type\">Statement</span> <span class=\"hljs-variable\">stmt</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>;\n\n    Object var12;\n    <span class=\"hljs-keyword\">try</span> {\n        stmt = con.createStatement();\n        <span class=\"hljs-built_in\">this</span>.applyStatementSettings(stmt);\n        <span class=\"hljs-type\">T</span> <span class=\"hljs-variable\">result</span> <span class=\"hljs-operator\">=</span> action.doInStatement(stmt);\n        <span class=\"hljs-built_in\">this</span>.handleWarnings(stmt);\n        var12 = result;\n    } <span class=\"hljs-keyword\">catch</span> (SQLException var10) {\n        <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">sql</span> <span class=\"hljs-operator\">=</span> getSql(action);\n        JdbcUtils.closeStatement(stmt);\n        stmt = <span class=\"hljs-literal\">null</span>;\n        DataSourceUtils.releaseConnection(con, <span class=\"hljs-built_in\">this</span>.getDataSource());\n        con = <span class=\"hljs-literal\">null</span>;\n        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-built_in\">this</span>.translateException(<span class=\"hljs-string\">&quot;StatementCallback&quot;</span>, sql, var10);\n    } <span class=\"hljs-keyword\">finally</span> {\n        <span class=\"hljs-keyword\">if</span> (closeResources) {\n            JdbcUtils.closeStatement(stmt);\n            DataSourceUtils.releaseConnection(con, <span class=\"hljs-built_in\">this</span>.getDataSource());\n        }\n\n    }\n\n    <span class=\"hljs-keyword\">return</span> var12;\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,314"}}],"payload":{"tag":"h2","lines":"192,194"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
