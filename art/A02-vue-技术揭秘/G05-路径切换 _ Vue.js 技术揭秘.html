<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#%E8%B7%AF%E5%BE%84%E5%88%87%E6%8D%A2\">#</a> &#x8def;&#x5f84;&#x5207;&#x6362;","children":[{"content":"<a href=\"#%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB\">#</a> &#x5bfc;&#x822a;&#x5b88;&#x536b;","children":[{"content":"<pre data-lines=\"171,174\"><code>&#x5b98;&#x65b9;&#x7684;&#x8bf4;&#x6cd5;&#x53eb;&#x5bfc;&#x822a;&#x5b88;&#x536b;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x53d1;&#x751f;&#x5728;&#x8def;&#x7531;&#x8def;&#x5f84;&#x5207;&#x6362;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6267;&#x884c;&#x7684;&#x4e00;&#x7cfb;&#x5217;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x3002;\n\n&#x6211;&#x4eec;&#x5148;&#x4ece;&#x6574;&#x4f53;&#x4e0a;&#x770b;&#x4e00;&#x4e0b;&#x8fd9;&#x4e9b;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x903b;&#x8f91;&#xff0c;&#x9996;&#x5148;&#x6784;&#x9020;&#x4e00;&#x4e2a;&#x961f;&#x5217; `queue`&#xff0c;&#x5b83;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff1b;&#x7136;&#x540e;&#x518d;&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x8fed;&#x4ee3;&#x5668;&#x51fd;&#x6570; `iterator`&#xff1b;&#x6700;&#x540e;&#x518d;&#x6267;&#x884c; `runQueue` &#x65b9;&#x6cd5;&#x6765;&#x6267;&#x884c;&#x8fd9;&#x4e2a;&#x961f;&#x5217;&#x3002;&#x6211;&#x4eec;&#x5148;&#x6765;&#x770b;&#x4e00;&#x4e0b; `runQueue` &#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x5728; `src/util/async.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"171,174"}},{"content":"<pre data-lines=\"175,193\"><code data-lines=\"175,193\">export function runQueue (queue: Array&lt;?NavigationGuard&gt;, fn: Function, cb: Function) {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">step</span> = <span class=\"hljs-keyword\">index</span> =&gt; { \n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">index</span> &gt;= queue.<span class=\"hljs-built_in\">length</span>) {\n      cb()\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">if</span> (queue[<span class=\"hljs-keyword\">index</span>]) {\n        fn(queue[<span class=\"hljs-keyword\">index</span>], () =&gt; {\n          <span class=\"hljs-built_in\">step</span>(<span class=\"hljs-keyword\">index</span> + <span class=\"hljs-number\">1</span>)\n        })\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-built_in\">step</span>(<span class=\"hljs-keyword\">index</span> + <span class=\"hljs-number\">1</span>)\n      }\n    }\n  }\n  <span class=\"hljs-built_in\">step</span>(<span class=\"hljs-number\">0</span>)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"175,193"}},{"content":"<pre data-lines=\"194,195\"><code>&#x8fd9;&#x662f;&#x4e00;&#x4e2a;&#x975e;&#x5e38;&#x7ecf;&#x5178;&#x7684;&#x5f02;&#x6b65;&#x51fd;&#x6570;&#x961f;&#x5217;&#x5316;&#x6267;&#x884c;&#x7684;&#x6a21;&#x5f0f;&#xff0c; `queue` &#x662f;&#x4e00;&#x4e2a; `NavigationGuard` &#x7c7b;&#x578b;&#x7684;&#x6570;&#x7ec4;&#xff0c;&#x6211;&#x4eec;&#x5b9a;&#x4e49;&#x4e86; `step` &#x51fd;&#x6570;&#xff0c;&#x6bcf;&#x6b21;&#x6839;&#x636e; `index` &#x4ece; `queue` &#x4e2d;&#x53d6;&#x4e00;&#x4e2a; `guard`&#xff0c;&#x7136;&#x540e;&#x6267;&#x884c; `fn` &#x51fd;&#x6570;&#xff0c;&#x5e76;&#x4e14;&#x628a; `guard` &#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x4e00;&#x4e2a;&#x51fd;&#x6570;&#xff0c;&#x5f53;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x65f6;&#x5019;&#x518d;&#x9012;&#x5f52;&#x6267;&#x884c; `step` &#x51fd;&#x6570;&#xff0c;&#x524d;&#x8fdb;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#xff0c;&#x6ce8;&#x610f;&#x8fd9;&#x91cc;&#x7684; `fn` &#x5c31;&#x662f;&#x6211;&#x4eec;&#x521a;&#x624d;&#x7684; `iterator` &#x51fd;&#x6570;&#xff0c;&#x90a3;&#x4e48;&#x6211;&#x4eec;&#x518d;&#x56de;&#x5230; `iterator` &#x51fd;&#x6570;&#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"194,195"}},{"content":"<pre data-lines=\"196,228\"><code data-lines=\"196,228\"><span class=\"hljs-keyword\">const</span> iterator = (hook: NavigationGuard, next) =&gt; {\n  <span class=\"hljs-keyword\">if</span> (this.pending !== route) {\n    <span class=\"hljs-keyword\">return</span> abort()\n  }\n  <span class=\"hljs-keyword\">try</span> {\n    hook(route, current, (to: any) =&gt; {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">to</span> === <span class=\"hljs-literal\">false</span> || isError(<span class=\"hljs-keyword\">to</span>)) {\n        this.ensureURL(<span class=\"hljs-literal\">true</span>)\n        abort(<span class=\"hljs-keyword\">to</span>)\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (\n        <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">to</span> === <span class=\"hljs-string\">&apos;string&apos;</span> ||\n        (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">to</span> === <span class=\"hljs-string\">&apos;object&apos;</span> &amp;&amp; (\n          <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">to</span>.path === <span class=\"hljs-string\">&apos;string&apos;</span> ||\n          <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">to</span>.name === <span class=\"hljs-string\">&apos;string&apos;</span>\n        ))\n      ) {\n        abort()\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-keyword\">to</span> === <span class=\"hljs-string\">&apos;object&apos;</span> &amp;&amp; <span class=\"hljs-keyword\">to</span>.replace) {\n          this.replace(<span class=\"hljs-keyword\">to</span>)\n        } <span class=\"hljs-keyword\">else</span> {\n          this.push(<span class=\"hljs-keyword\">to</span>)\n        }\n      } <span class=\"hljs-keyword\">else</span> {\n        next(<span class=\"hljs-keyword\">to</span>)\n      }\n    })\n  } <span class=\"hljs-keyword\">catch</span> (e) {\n    abort(e)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"196,228"}},{"content":"<pre data-lines=\"229,232\"><code>`iterator` &#x51fd;&#x6570;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x5b83;&#x5c31;&#x662f;&#x53bb;&#x6267;&#x884c;&#x6bcf;&#x4e00;&#x4e2a; &#x5bfc;&#x822a;&#x5b88;&#x536b; `hook`&#xff0c;&#x5e76;&#x4f20;&#x5165; `route`&#x3001;`current` &#x548c;&#x533f;&#x540d;&#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x4e9b;&#x53c2;&#x6570;&#x5bf9;&#x5e94;&#x6587;&#x6863;&#x4e2d;&#x7684; `to`&#x3001;`from`&#x3001;`next`&#xff0c;&#x5f53;&#x6267;&#x884c;&#x4e86;&#x533f;&#x540d;&#x51fd;&#x6570;&#xff0c;&#x4f1a;&#x6839;&#x636e;&#x4e00;&#x4e9b;&#x6761;&#x4ef6;&#x6267;&#x884c; `abort` &#x6216; `next`&#xff0c;&#x53ea;&#x6709;&#x6267;&#x884c; `next` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x624d;&#x4f1a;&#x524d;&#x8fdb;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x5bfc;&#x822a;&#x5b88;&#x536b;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x4e2d;&#xff0c;&#x8fd9;&#x4e5f;&#x5c31;&#x662f;&#x4e3a;&#x4ec0;&#x4e48;&#x5b98;&#x65b9;&#x6587;&#x6863;&#x4f1a;&#x8bf4;&#x53ea;&#x6709;&#x6267;&#x884c; `next` &#x65b9;&#x6cd5;&#x6765; `resolve` &#x8fd9;&#x4e2a;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#x3002;\n\n&#x90a3;&#x4e48;&#x6700;&#x540e;&#x6211;&#x4eec;&#x6765;&#x770b; `queue` &#x662f;&#x600e;&#x4e48;&#x6784;&#x9020;&#x7684;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"229,232"}},{"content":"<pre data-lines=\"233,242\"><code data-lines=\"233,242\">const queue: Array&lt;?NavigationGuard&gt; = [].<span class=\"hljs-built_in\">concat</span>(\n  <span class=\"hljs-built_in\">extractLeaveGuards</span>(deactivated),\n  this.router.beforeHooks,\n  <span class=\"hljs-built_in\">extractUpdateHooks</span>(updated),\n  activated.<span class=\"hljs-built_in\">map</span>(m =&gt; m.beforeEnter),\n  <span class=\"hljs-built_in\">resolveAsyncComponents</span>(activated)\n) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"233,242"}},{"content":"<pre data-lines=\"243,259\"><code>&#x6309;&#x7167;&#x987a;&#x5e8f;&#x5982;&#x4e0b;&#xff1a;\n\n1.  &#x5728;&#x5931;&#x6d3b;&#x7684;&#x7ec4;&#x4ef6;&#x91cc;&#x8c03;&#x7528;&#x79bb;&#x5f00;&#x5b88;&#x536b;&#x3002;\n\t\n2.  &#x8c03;&#x7528;&#x5168;&#x5c40;&#x7684; `beforeEach` &#x5b88;&#x536b;&#x3002;\n\t\n3.  &#x5728;&#x91cd;&#x7528;&#x7684;&#x7ec4;&#x4ef6;&#x91cc;&#x8c03;&#x7528; `beforeRouteUpdate` &#x5b88;&#x536b;\n\t\n4.  &#x5728;&#x6fc0;&#x6d3b;&#x7684;&#x8def;&#x7531;&#x914d;&#x7f6e;&#x91cc;&#x8c03;&#x7528; `beforeEnter`&#x3002;\n\t\n5.  &#x89e3;&#x6790;&#x5f02;&#x6b65;&#x8def;&#x7531;&#x7ec4;&#x4ef6;&#x3002;\n\t\n\n&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x6765;&#x5206;&#x522b;&#x4ecb;&#x7ecd;&#x8fd9; 5 &#x6b65;&#x7684;&#x5b9e;&#x73b0;&#x3002;\n\n&#x7b2c;&#x4e00;&#x6b65;&#x662f;&#x901a;&#x8fc7;&#x6267;&#x884c; `extractLeaveGuards(deactivated)`&#xff0c;&#x5148;&#x6765;&#x770b;&#x4e00;&#x4e0b; `extractLeaveGuards` &#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"243,259"}},{"content":"<pre data-lines=\"260,265\"><code data-lines=\"260,265\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">extractLeaveGuards</span> (deactivated: Array&lt;RouteRecord&gt;): Array&lt;?<span class=\"hljs-keyword\">Function</span>&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">extractGuards(deactivated,</span> <span class=\"hljs-symbol\">&apos;beforeRouteLeave</span>&apos;, bindGuard, <span class=\"hljs-literal\">true</span>)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"260,265"}},{"content":"<pre data-lines=\"266,267\"><code>&#x5b83;&#x5185;&#x90e8;&#x8c03;&#x7528;&#x4e86; `extractGuards` &#x7684;&#x901a;&#x7528;&#x65b9;&#x6cd5;&#xff0c;&#x53ef;&#x4ee5;&#x4ece; `RouteRecord` &#x6570;&#x7ec4;&#x4e2d;&#x63d0;&#x53d6;&#x5404;&#x4e2a;&#x9636;&#x6bb5;&#x7684;&#x5b88;&#x536b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"266,267"}},{"content":"<pre data-lines=\"268,286\"><code data-lines=\"268,286\">function <span class=\"hljs-title function_\">extractGuards</span> (\n  records: <span class=\"hljs-built_in\">Array</span>&lt;RouteRecord&gt;,\n  name: string,\n  bind: Function,\n  <span class=\"hljs-built_in\">reverse</span>?: <span class=\"hljs-type\">boolean</span>\n): <span class=\"hljs-built_in\">Array</span>&lt;?Function&gt; {\n  <span class=\"hljs-keyword\">const</span> guards = <span class=\"hljs-title function_\">flatMapComponents</span>(records, (def, instance, <span class=\"hljs-built_in\">match</span>, <span class=\"hljs-built_in\">key</span>) =&gt; {\n    <span class=\"hljs-keyword\">const</span> guard = <span class=\"hljs-title function_\">extractGuard</span>(def, name)\n    <span class=\"hljs-keyword\">if</span> (guard) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">Array</span>.<span class=\"hljs-property\">isArray</span>(guard)\n        ? guard.<span class=\"hljs-property\">map</span>(guard =&gt; <span class=\"hljs-title function_\">bind</span>(guard, instance, <span class=\"hljs-built_in\">match</span>, <span class=\"hljs-built_in\">key</span>))\n        : <span class=\"hljs-title function_\">bind</span>(guard, instance, <span class=\"hljs-built_in\">match</span>, <span class=\"hljs-built_in\">key</span>)\n    }\n  })\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">flatten</span>(<span class=\"hljs-built_in\">reverse</span> ? guards.<span class=\"hljs-property\">reverse</span>() : guards)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"268,286"}},{"content":"<pre data-lines=\"287,288\"><code>&#x8fd9;&#x91cc;&#x7528;&#x5230;&#x4e86; `flatMapComponents` &#x65b9;&#x6cd5;&#x53bb;&#x4ece; `records` &#x4e2d;&#x83b7;&#x53d6;&#x6240;&#x6709;&#x7684;&#x5bfc;&#x822a;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/util/resolve-components.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"287,288"}},{"content":"<pre data-lines=\"289,307\"><code data-lines=\"289,307\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">flatMapComponents</span> (<span class=\"hljs-params\">\n  matched: <span class=\"hljs-built_in\">Array</span>&lt;RouteRecord&gt;,\n  fn: <span class=\"hljs-built_in\">Function</span>\n</span>): <span class=\"hljs-title class_\">Array</span>&lt;?<span class=\"hljs-title class_\">Function</span>&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">flatten</span>(matched.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">m</span> =&gt;</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(m.<span class=\"hljs-property\">components</span>).<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">key</span> =&gt;</span> <span class=\"hljs-title function_\">fn</span>(\n      m.<span class=\"hljs-property\">components</span>[key],\n      m.<span class=\"hljs-property\">instances</span>[key],\n      m, key\n    ))\n  }))\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">flatten</span> (<span class=\"hljs-params\">arr: <span class=\"hljs-built_in\">Array</span>&lt;any&gt;</span>): <span class=\"hljs-title class_\">Array</span>&lt;any&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">concat</span>.<span class=\"hljs-title function_\">apply</span>([], arr)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"289,307"}},{"content":"<pre data-lines=\"308,311\"><code>`flatMapComponents` &#x7684;&#x4f5c;&#x7528;&#x5c31;&#x662f;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x6570;&#x7ec4;&#x7684;&#x5143;&#x7d20;&#x662f;&#x4ece; `matched` &#x91cc;&#x83b7;&#x53d6;&#x5230;&#x6240;&#x6709;&#x7ec4;&#x4ef6;&#x7684; `key`&#xff0c;&#x7136;&#x540e;&#x8fd4;&#x56de; `fn` &#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x7ed3;&#x679c;&#xff0c;`flatten` &#x4f5c;&#x7528;&#x662f;&#x628a;&#x4e8c;&#x7ef4;&#x6570;&#x7ec4;&#x62cd;&#x5e73;&#x6210;&#x4e00;&#x7ef4;&#x6570;&#x7ec4;&#x3002;\n\n&#x90a3;&#x4e48;&#x5bf9;&#x4e8e; `extractGuards` &#x4e2d; `flatMapComponents` &#x7684;&#x8c03;&#x7528;&#xff0c;&#x6267;&#x884c;&#x6bcf;&#x4e2a; `fn` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x901a;&#x8fc7; `extractGuard(def, name)` &#x83b7;&#x53d6;&#x5230;&#x7ec4;&#x4ef6;&#x4e2d;&#x5bf9;&#x5e94; `name` &#x7684;&#x5bfc;&#x822a;&#x5b88;&#x536b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"308,311"}},{"content":"<pre data-lines=\"312,323\"><code data-lines=\"312,323\">function extractGuard (\n  <span class=\"hljs-keyword\">def</span>: Object | Function,\n  key: string\n): NavigationGuard | Array&lt;NavigationGuard&gt; {\n  <span class=\"hljs-keyword\">if</span> (typeof <span class=\"hljs-keyword\">def</span> !== <span class=\"hljs-string\">&apos;function&apos;</span>) {\n    <span class=\"hljs-keyword\">def</span> = _Vue.extend(<span class=\"hljs-keyword\">def</span>)\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">def</span>.<span class=\"hljs-keyword\">options</span>[key]\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"312,323"}},{"content":"<pre data-lines=\"324,325\"><code>&#x83b7;&#x53d6;&#x5230; `guard` &#x540e;&#xff0c;&#x8fd8;&#x4f1a;&#x8c03;&#x7528; `bind` &#x65b9;&#x6cd5;&#x628a;&#x7ec4;&#x4ef6;&#x7684;&#x5b9e;&#x4f8b; `instance` &#x4f5c;&#x4e3a;&#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x7ed1;&#x5b9a;&#x5230; `guard` &#x4e0a;&#xff0c;`bind` &#x65b9;&#x6cd5;&#x7684;&#x5bf9;&#x5e94;&#x7684;&#x662f; `bindGuard`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"324,325"}},{"content":"<pre data-lines=\"326,335\"><code data-lines=\"326,335\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">bindGuard</span> (<span class=\"hljs-params\">guard: NavigationGuard, instance: ?_Vue</span>): ?<span class=\"hljs-title class_\">NavigationGuard</span> {\n  <span class=\"hljs-keyword\">if</span> (instance) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">boundRouteGuard</span> (<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">return</span> guard.<span class=\"hljs-title function_\">apply</span>(instance, <span class=\"hljs-variable language_\">arguments</span>)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"326,335"}},{"content":"<pre data-lines=\"336,339\"><code>&#x90a3;&#x4e48;&#x5bf9;&#x4e8e; `extractLeaveGuards(deactivated)` &#x800c;&#x8a00;&#xff0c;&#x83b7;&#x53d6;&#x5230;&#x7684;&#x5c31;&#x662f;&#x6240;&#x6709;&#x5931;&#x6d3b;&#x7ec4;&#x4ef6;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; `beforeRouteLeave` &#x94a9;&#x5b50;&#x51fd;&#x6570;&#x3002;\n\n&#x7b2c;&#x4e8c;&#x6b65;&#x662f; `this.router.beforeHooks`&#xff0c;&#x5728;&#x6211;&#x4eec;&#x7684; `VueRouter` &#x7c7b;&#x4e2d;&#x5b9a;&#x4e49;&#x4e86; `beforeEach` &#x65b9;&#x6cd5;&#xff0c;&#x5728; `src/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"336,339"}},{"content":"<pre data-lines=\"340,353\"><code data-lines=\"340,353\">beforeEach (fn: <span class=\"hljs-keyword\">Function</span>): <span class=\"hljs-keyword\">Function</span> <span class=\"hljs-title\">{</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">registerHook(this.beforeHooks,</span> fn)\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">registerHook</span> (list: Array&lt;any&gt;, fn: <span class=\"hljs-keyword\">Function</span>): <span class=\"hljs-keyword\">Function</span> <span class=\"hljs-title\">{</span>\n  list.push(fn)\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">()</span> =&gt; {\n    const i = list.indexOf(fn)\n    <span class=\"hljs-keyword\">if</span> (i &gt; -<span class=\"hljs-number\">1</span>) list.splice(i, <span class=\"hljs-number\">1</span>)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"340,353"}},{"content":"<pre data-lines=\"354,357\"><code>&#x5f53;&#x7528;&#x6237;&#x4f7f;&#x7528; `router.beforeEach` &#x6ce8;&#x518c;&#x4e86;&#x4e00;&#x4e2a;&#x5168;&#x5c40;&#x5b88;&#x536b;&#xff0c;&#x5c31;&#x4f1a;&#x5f80; `router.beforeHooks` &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x6837; `this.router.beforeHooks` &#x83b7;&#x53d6;&#x7684;&#x5c31;&#x662f;&#x7528;&#x6237;&#x6ce8;&#x518c;&#x7684;&#x5168;&#x5c40; `beforeEach` &#x5b88;&#x536b;&#x3002;\n\n&#x7b2c;&#x4e09;&#x6b65;&#x6267;&#x884c;&#x4e86; `extractUpdateHooks(updated)`&#xff0c;&#x6765;&#x770b;&#x4e00;&#x4e0b; `extractUpdateHooks` &#x7684;&#x5b9a;&#x4e49;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"354,357"}},{"content":"<pre data-lines=\"358,363\"><code data-lines=\"358,363\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">extractUpdateHooks</span> (updated: Array&lt;RouteRecord&gt;): Array&lt;?<span class=\"hljs-keyword\">Function</span>&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">extractGuards(updated,</span> <span class=\"hljs-symbol\">&apos;beforeRouteUpdate</span>&apos;, bindGuard)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"358,363"}},{"content":"<pre data-lines=\"364,369\"><code>&#x548c; `extractLeaveGuards(deactivated)` &#x7c7b;&#x4f3c;&#xff0c;`extractUpdateHooks(updated)` &#x83b7;&#x53d6;&#x5230;&#x7684;&#x5c31;&#x662f;&#x6240;&#x6709;&#x91cd;&#x7528;&#x7684;&#x7ec4;&#x4ef6;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; `beforeRouteUpdate` &#x94a9;&#x5b50;&#x51fd;&#x6570;&#x3002;\n\n&#x7b2c;&#x56db;&#x6b65;&#x662f;&#x6267;&#x884c; `activated.map(m =&gt; m.beforeEnter)`&#xff0c;&#x83b7;&#x53d6;&#x7684;&#x662f;&#x5728;&#x6fc0;&#x6d3b;&#x7684;&#x8def;&#x7531;&#x914d;&#x7f6e;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; `beforeEnter` &#x51fd;&#x6570;&#x3002;\n\n&#x7b2c;&#x4e94;&#x6b65;&#x662f;&#x6267;&#x884c; `resolveAsyncComponents(activated)` &#x89e3;&#x6790;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#xff0c;&#x5148;&#x6765;&#x770b;&#x4e00;&#x4e0b; `resolveAsyncComponents` &#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x5728; `src/util/resolve-components.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"364,369"}},{"content":"<pre data-lines=\"370,430\"><code data-lines=\"370,430\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">resolveAsyncComponents</span> (<span class=\"hljs-params\">matched: <span class=\"hljs-built_in\">Array</span>&lt;RouteRecord&gt;</span>): <span class=\"hljs-title class_\">Function</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">(<span class=\"hljs-params\">to, <span class=\"hljs-keyword\">from</span>, next</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">let</span> hasAsync = <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-keyword\">let</span> pending = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-keyword\">let</span> error = <span class=\"hljs-literal\">null</span>\n\n    <span class=\"hljs-title function_\">flatMapComponents</span>(matched, <span class=\"hljs-function\">(<span class=\"hljs-params\">def, _, match, key</span>) =&gt;</span> {\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> def === <span class=\"hljs-string\">&apos;function&apos;</span> &amp;&amp; def.<span class=\"hljs-property\">cid</span> === <span class=\"hljs-literal\">undefined</span>) {\n        hasAsync = <span class=\"hljs-literal\">true</span>\n        pending++\n\n        <span class=\"hljs-keyword\">const</span> resolve = <span class=\"hljs-title function_\">once</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolvedDef</span> =&gt;</span> {\n          <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isESModule</span>(resolvedDef)) {\n            resolvedDef = resolvedDef.<span class=\"hljs-property\">default</span>\n          }\n          def.<span class=\"hljs-property\">resolved</span> = <span class=\"hljs-keyword\">typeof</span> resolvedDef === <span class=\"hljs-string\">&apos;function&apos;</span>\n            ? resolvedDef\n            : _Vue.<span class=\"hljs-title function_\">extend</span>(resolvedDef)\n          match.<span class=\"hljs-property\">components</span>[key] = resolvedDef\n          pending--\n          <span class=\"hljs-keyword\">if</span> (pending &lt;= <span class=\"hljs-number\">0</span>) {\n            <span class=\"hljs-title function_\">next</span>()\n          }\n        })\n\n        <span class=\"hljs-keyword\">const</span> reject = <span class=\"hljs-title function_\">once</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">reason</span> =&gt;</span> {\n          <span class=\"hljs-keyword\">const</span> msg = <span class=\"hljs-string\">`Failed to resolve async component <span class=\"hljs-subst\">&#x24;{key}</span>: <span class=\"hljs-subst\">&#x24;{reason}</span>`</span>\n          process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp; <span class=\"hljs-title function_\">warn</span>(<span class=\"hljs-literal\">false</span>, msg)\n          <span class=\"hljs-keyword\">if</span> (!error) {\n            error = <span class=\"hljs-title function_\">isError</span>(reason)\n              ? reason\n              : <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(msg)\n            <span class=\"hljs-title function_\">next</span>(error)\n          }\n        })\n\n        <span class=\"hljs-keyword\">let</span> res\n        <span class=\"hljs-keyword\">try</span> {\n          res = <span class=\"hljs-title function_\">def</span>(resolve, reject)\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n          <span class=\"hljs-title function_\">reject</span>(e)\n        }\n        <span class=\"hljs-keyword\">if</span> (res) {\n          <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> res.<span class=\"hljs-property\">then</span> === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n            res.<span class=\"hljs-title function_\">then</span>(resolve, reject)\n          } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">const</span> comp = res.<span class=\"hljs-property\">component</span>\n            <span class=\"hljs-keyword\">if</span> (comp &amp;&amp; <span class=\"hljs-keyword\">typeof</span> comp.<span class=\"hljs-property\">then</span> === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n              comp.<span class=\"hljs-title function_\">then</span>(resolve, reject)\n            }\n          }\n        }\n      }\n    })\n\n    <span class=\"hljs-keyword\">if</span> (!hasAsync) <span class=\"hljs-title function_\">next</span>()\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"370,430"}},{"content":"<pre data-lines=\"431,434\"><code>`resolveAsyncComponents` &#x8fd4;&#x56de;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x5bfc;&#x822a;&#x5b88;&#x536b;&#x51fd;&#x6570;&#xff0c;&#x6709;&#x6807;&#x51c6;&#x7684; `to`&#x3001;`from`&#x3001;`next` &#x53c2;&#x6570;&#x3002;&#x5b83;&#x7684;&#x5185;&#x90e8;&#x5b9e;&#x73b0;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x5229;&#x7528;&#x4e86; `flatMapComponents` &#x65b9;&#x6cd5;&#x4ece; `matched` &#x4e2d;&#x83b7;&#x53d6;&#x5230;&#x6bcf;&#x4e2a;&#x7ec4;&#x4ef6;&#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x5224;&#x65ad;&#x5982;&#x679c;&#x662f;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#xff0c;&#x5219;&#x6267;&#x884c;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x52a0;&#x8f7d;&#x903b;&#x8f91;&#xff0c;&#x8fd9;&#x5757;&#x548c;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x5206;&#x6790; `Vue` &#x52a0;&#x8f7d;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x5f88;&#x7c7b;&#x4f3c;&#xff0c;&#x52a0;&#x8f7d;&#x6210;&#x529f;&#x540e;&#x4f1a;&#x6267;&#x884c; `match.components[key] = resolvedDef` &#x628a;&#x89e3;&#x6790;&#x597d;&#x7684;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x653e;&#x5230;&#x5bf9;&#x5e94;&#x7684; `components` &#x4e0a;&#xff0c;&#x5e76;&#x4e14;&#x6267;&#x884c; `next` &#x51fd;&#x6570;&#x3002;\n\n&#x8fd9;&#x6837;&#x5728; `resolveAsyncComponents(activated)` &#x89e3;&#x6790;&#x5b8c;&#x6240;&#x6709;&#x6fc0;&#x6d3b;&#x7684;&#x5f02;&#x6b65;&#x7ec4;&#x4ef6;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x53ef;&#x4ee5;&#x62ff;&#x5230;&#x8fd9;&#x4e00;&#x6b21;&#x6240;&#x6709;&#x6fc0;&#x6d3b;&#x7684;&#x7ec4;&#x4ef6;&#x3002;&#x8fd9;&#x6837;&#x6211;&#x4eec;&#x5728;&#x505a;&#x5b8c;&#x8fd9; 5 &#x6b65;&#x540e;&#x53c8;&#x505a;&#x4e86;&#x4e00;&#x4e9b;&#x4e8b;&#x60c5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"431,434"}},{"content":"<pre data-lines=\"435,455\"><code data-lines=\"435,455\">runQueue(queue, iterator, () =&gt; {\n  <span class=\"hljs-keyword\">const</span> postEnterCbs = []\n  <span class=\"hljs-keyword\">const</span> isValid = () =&gt; <span class=\"hljs-keyword\">this</span>.current === route\n  <span class=\"hljs-keyword\">const</span> enterGuards = extractEnterGuards(activated, postEnterCbs, isValid)\n  <span class=\"hljs-keyword\">const</span> queue = enterGuards.concat(<span class=\"hljs-keyword\">this</span>.router.resolveHooks)\n  runQueue(queue, iterator, () =&gt; {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.pending !== route) {\n      <span class=\"hljs-keyword\">return</span> abort()\n    }\n    <span class=\"hljs-keyword\">this</span>.pending = <span class=\"hljs-literal\">null</span>\n    onComplete(route)\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.router.app) {\n      <span class=\"hljs-keyword\">this</span>.router.app.&#x24;nextTick(() =&gt; {\n        postEnterCbs.forEach(cb =&gt; { cb() })\n      })\n    }\n  })\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"435,455"}},{"content":"<pre data-lines=\"456,464\"><code>6.  &#x5728;&#x88ab;&#x6fc0;&#x6d3b;&#x7684;&#x7ec4;&#x4ef6;&#x91cc;&#x8c03;&#x7528; `beforeRouteEnter`&#x3002;\n\t\n7.  &#x8c03;&#x7528;&#x5168;&#x5c40;&#x7684; `beforeResolve` &#x5b88;&#x536b;&#x3002;\n\t\n8.  &#x8c03;&#x7528;&#x5168;&#x5c40;&#x7684; `afterEach` &#x94a9;&#x5b50;&#x3002;\n\t\n\n&#x5bf9;&#x4e8e;&#x7b2c;&#x516d;&#x6b65;&#x6709;&#x8fd9;&#x4e9b;&#x76f8;&#x5173;&#x7684;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"456,464"}},{"content":"<pre data-lines=\"465,514\"><code data-lines=\"465,514\"><span class=\"hljs-keyword\">const</span> postEnterCbs = []\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">isValid</span> = (<span class=\"hljs-params\"></span>) =&gt; <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">current</span> === route\n<span class=\"hljs-keyword\">const</span> enterGuards = <span class=\"hljs-title function_\">extractEnterGuards</span>(activated, postEnterCbs, isValid)\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">extractEnterGuards</span> (<span class=\"hljs-params\">\n  <span class=\"hljs-attr\">activated</span>: <span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">RouteRecord</span>&gt;,\n  <span class=\"hljs-attr\">cbs</span>: <span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">Function</span>&gt;,\n  <span class=\"hljs-attr\">isValid</span>: () =&gt; <span class=\"hljs-built_in\">boolean</span>\n</span>): <span class=\"hljs-title class_\">Array</span>&lt;?<span class=\"hljs-title class_\">Function</span>&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">extractGuards</span>(activated, <span class=\"hljs-string\">&apos;beforeRouteEnter&apos;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">guard, _, match, key</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">bindEnterGuard</span>(guard, match, key, cbs, isValid)\n  })\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">bindEnterGuard</span> (<span class=\"hljs-params\">\n  <span class=\"hljs-attr\">guard</span>: <span class=\"hljs-title class_\">NavigationGuard</span>,\n  <span class=\"hljs-attr\">match</span>: <span class=\"hljs-title class_\">RouteRecord</span>,\n  <span class=\"hljs-attr\">key</span>: <span class=\"hljs-built_in\">string</span>,\n  <span class=\"hljs-attr\">cbs</span>: <span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">Function</span>&gt;,\n  <span class=\"hljs-attr\">isValid</span>: () =&gt; <span class=\"hljs-built_in\">boolean</span>\n</span>): <span class=\"hljs-title class_\">NavigationGuard</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">routeEnterGuard</span> (<span class=\"hljs-params\">to, <span class=\"hljs-keyword\">from</span>, next</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">guard</span>(to, <span class=\"hljs-keyword\">from</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">cb</span> =&gt;</span> {\n      <span class=\"hljs-title function_\">next</span>(cb)\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> cb === <span class=\"hljs-string\">&apos;function&apos;</span>) {\n        cbs.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-function\">() =&gt;</span> {\n          <span class=\"hljs-title function_\">poll</span>(cb, match.<span class=\"hljs-property\">instances</span>, key, isValid)\n        })\n      }\n    })\n  }\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">poll</span> (<span class=\"hljs-params\">\n  <span class=\"hljs-attr\">cb</span>: <span class=\"hljs-built_in\">any</span>,\n  <span class=\"hljs-attr\">instances</span>: <span class=\"hljs-title class_\">Object</span>,\n  <span class=\"hljs-attr\">key</span>: <span class=\"hljs-built_in\">string</span>,\n  <span class=\"hljs-attr\">isValid</span>: () =&gt; <span class=\"hljs-built_in\">boolean</span>\n</span>) {\n  <span class=\"hljs-keyword\">if</span> (instances[key]) {\n    <span class=\"hljs-title function_\">cb</span>(instances[key])\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">isValid</span>()) {\n    <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =&gt;</span> {\n      <span class=\"hljs-title function_\">poll</span>(cb, instances, key, isValid)\n    }, <span class=\"hljs-number\">16</span>)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"465,514"}},{"content":"<pre data-lines=\"515,516\"><code>`extractEnterGuards` &#x51fd;&#x6570;&#x7684;&#x5b9e;&#x73b0;&#x4e5f;&#x662f;&#x5229;&#x7528;&#x4e86; `extractGuards` &#x65b9;&#x6cd5;&#x63d0;&#x53d6;&#x7ec4;&#x4ef6;&#x4e2d;&#x7684; `beforeRouteEnter` &#x5bfc;&#x822a;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x548c;&#x4e4b;&#x524d;&#x4e0d;&#x540c;&#x7684;&#x662f; `bind` &#x65b9;&#x6cd5;&#x7684;&#x4e0d;&#x540c;&#x3002;&#x6587;&#x6863;&#x4e2d;&#x7279;&#x610f;&#x5f3a;&#x8c03;&#x4e86; `beforeRouteEnter` &#x94a9;&#x5b50;&#x51fd;&#x6570;&#x4e2d;&#x662f;&#x62ff;&#x4e0d;&#x5230;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684;&#xff0c;&#x56e0;&#x4e3a;&#x5f53;&#x5b88;&#x536b;&#x6267;&#x884c;&#x524d;&#xff0c;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x8fd8;&#x6ca1;&#x88ab;&#x521b;&#x5efa;&#xff0c;&#x4f46;&#x662f;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x4f20;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x7ed9; `next` &#x6765;&#x8bbf;&#x95ee;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x3002;&#x5728;&#x5bfc;&#x822a;&#x88ab;&#x786e;&#x8ba4;&#x7684;&#x65f6;&#x5019;&#x6267;&#x884c;&#x56de;&#x8c03;&#xff0c;&#x5e76;&#x4e14;&#x628a;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x4f5c;&#x4e3a;&#x56de;&#x8c03;&#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"515,516"}},{"content":"<pre data-lines=\"517,524\"><code data-lines=\"517,524\">beforeRouteEnter (<span class=\"hljs-keyword\">to</span>, from, <span class=\"hljs-keyword\">next</span>) {\n  <span class=\"hljs-keyword\">next</span>(<span class=\"hljs-keyword\">vm</span> =&gt; {\n    // &#x901a;&#x8fc7; `<span class=\"hljs-keyword\">vm</span>` &#x8bbf;&#x95ee;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"517,524"}},{"content":"<pre data-lines=\"525,528\"><code>&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x8fd9;&#x662f;&#x600e;&#x4e48;&#x5b9e;&#x73b0;&#x7684;&#x3002;\n\n&#x5728; `bindEnterGuard` &#x51fd;&#x6570;&#x4e2d;&#xff0c;&#x8fd4;&#x56de;&#x7684;&#x662f; `routeEnterGuard` &#x51fd;&#x6570;&#xff0c;&#x6240;&#x4ee5;&#x5728;&#x6267;&#x884c; `iterator` &#x4e2d;&#x7684; `hook` &#x51fd;&#x6570;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5c31;&#x76f8;&#x5f53;&#x4e8e;&#x6267;&#x884c; `routeEnterGuard` &#x51fd;&#x6570;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x4f1a;&#x6267;&#x884c;&#x6211;&#x4eec;&#x5b9a;&#x4e49;&#x7684;&#x5bfc;&#x822a;&#x5b88;&#x536b; `guard` &#x51fd;&#x6570;&#xff0c;&#x5e76;&#x4e14;&#x5f53;&#x8fd9;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6267;&#x884c;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x9996;&#x5148;&#x6267;&#x884c; `next` &#x51fd;&#x6570; `rersolve` &#x5f53;&#x524d;&#x5bfc;&#x822a;&#x94a9;&#x5b50;&#xff0c;&#x7136;&#x540e;&#x628a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#xff0c;&#x5b83;&#x4e5f;&#x662f;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7528; `cbs` &#x6536;&#x96c6;&#x8d77;&#x6765;&#xff0c;&#x5176;&#x5b9e;&#x5c31;&#x662f;&#x6536;&#x96c6;&#x5230;&#x5916;&#x9762;&#x5b9a;&#x4e49;&#x7684; `postEnterCbs` &#x4e2d;&#xff0c;&#x7136;&#x540e;&#x5728;&#x6700;&#x540e;&#x4f1a;&#x6267;&#x884c;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"525,528"}},{"content":"<pre data-lines=\"529,536\"><code data-lines=\"529,536\"><span class=\"hljs-keyword\">if</span> (this<span class=\"hljs-selector-class\">.router</span>.app) {\n  this<span class=\"hljs-selector-class\">.router</span><span class=\"hljs-selector-class\">.app</span>.<span class=\"hljs-variable\">&#x24;nextTick</span>(() =&gt; {\n    postEnterCbs<span class=\"hljs-selector-class\">.forEach</span>(cb =&gt; { <span class=\"hljs-built_in\">cb</span>() })\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"529,536"}},{"content":"<pre data-lines=\"537,540\"><code>&#x5728;&#x6839;&#x8def;&#x7531;&#x7ec4;&#x4ef6;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x540e;&#xff0c;&#x904d;&#x5386; `postEnterCbs` &#x6267;&#x884c;&#x56de;&#x8c03;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x6267;&#x884c;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5176;&#x5b9e;&#x662f;&#x6267;&#x884c; `poll(cb, match.instances, key, isValid)` &#x65b9;&#x6cd5;&#xff0c;&#x56e0;&#x4e3a;&#x8003;&#x8651;&#x5230;&#x4e00;&#x4e9b;&#x4e86;&#x8def;&#x7531;&#x7ec4;&#x4ef6;&#x88ab;&#x5957; `transition` &#x7d44;&#x4ef6;&#x5728;&#x4e00;&#x4e9b;&#x7f13;&#x52a8;&#x6a21;&#x5f0f;&#x4e0b;&#x4e0d;&#x4e00;&#x5b9a;&#x80fd;&#x62ff;&#x5230;&#x5b9e;&#x4f8b;&#xff0c;&#x6240;&#x4ee5;&#x7528;&#x4e00;&#x4e2a;&#x8f6e;&#x8be2;&#x65b9;&#x6cd5;&#x4e0d;&#x65ad;&#x53bb;&#x5224;&#x65ad;&#xff0c;&#x76f4;&#x5230;&#x80fd;&#x83b7;&#x53d6;&#x5230;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#xff0c;&#x518d;&#x53bb;&#x8c03;&#x7528; `cb`&#xff0c;&#x5e76;&#x628a;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x8fd9;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x5728;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e2d;&#x80fd;&#x62ff;&#x5230;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684;&#x539f;&#x56e0;&#x3002;\n\n&#x7b2c;&#x4e03;&#x6b65;&#x662f;&#x83b7;&#x53d6; `this.router.resolveHooks`&#xff0c;&#x8fd9;&#x4e2a;&#x548c; `this.router.beforeHooks` &#x7684;&#x83b7;&#x53d6;&#x7c7b;&#x4f3c;&#xff0c;&#x5728;&#x6211;&#x4eec;&#x7684; `VueRouter` &#x7c7b;&#x4e2d;&#x5b9a;&#x4e49;&#x4e86; `beforeResolve` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"537,540"}},{"content":"<pre data-lines=\"541,546\"><code data-lines=\"541,546\">beforeResolve (fn: <span class=\"hljs-keyword\">Function</span>): <span class=\"hljs-keyword\">Function</span> <span class=\"hljs-title\">{</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">registerHook(this.resolveHooks,</span> fn)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"541,546"}},{"content":"<pre data-lines=\"547,550\"><code>&#x5f53;&#x7528;&#x6237;&#x4f7f;&#x7528; `router.beforeResolve` &#x6ce8;&#x518c;&#x4e86;&#x4e00;&#x4e2a;&#x5168;&#x5c40;&#x5b88;&#x536b;&#xff0c;&#x5c31;&#x4f1a;&#x5f80; `router.resolveHooks` &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x6837; `this.router.resolveHooks` &#x83b7;&#x53d6;&#x7684;&#x5c31;&#x662f;&#x7528;&#x6237;&#x6ce8;&#x518c;&#x7684;&#x5168;&#x5c40; `beforeResolve` &#x5b88;&#x536b;&#x3002;\n\n&#x7b2c;&#x516b;&#x6b65;&#x662f;&#x5728;&#x6700;&#x540e;&#x6267;&#x884c;&#x4e86; `onComplete(route)` &#x540e;&#xff0c;&#x4f1a;&#x6267;&#x884c; `this.updateRoute(route)` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"547,550"}},{"content":"<pre data-lines=\"551,561\"><code data-lines=\"551,561\">updateRoute (route: Route) {\n  <span class=\"hljs-keyword\">const</span> prev = <span class=\"hljs-keyword\">this</span>.current\n  <span class=\"hljs-keyword\">this</span>.current = route\n  <span class=\"hljs-keyword\">this</span>.cb &amp;&amp; <span class=\"hljs-keyword\">this</span>.cb(route)\n  <span class=\"hljs-keyword\">this</span>.router.afterHooks.forEach(hook =&gt; {\n    hook &amp;&amp; hook(route, prev)\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"551,561"}},{"content":"<pre data-lines=\"562,563\"><code>&#x540c;&#x6837;&#x5728;&#x6211;&#x4eec;&#x7684; `VueRouter` &#x7c7b;&#x4e2d;&#x5b9a;&#x4e49;&#x4e86; `afterEach` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"562,563"}},{"content":"<pre data-lines=\"564,569\"><code data-lines=\"564,569\">afterEach (fn: <span class=\"hljs-keyword\">Function</span>): <span class=\"hljs-keyword\">Function</span> <span class=\"hljs-title\">{</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">registerHook(this.afterHooks,</span> fn)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"564,569"}},{"content":"<pre data-lines=\"570,573\"><code>&#x5f53;&#x7528;&#x6237;&#x4f7f;&#x7528; `router.afterEach` &#x6ce8;&#x518c;&#x4e86;&#x4e00;&#x4e2a;&#x5168;&#x5c40;&#x5b88;&#x536b;&#xff0c;&#x5c31;&#x4f1a;&#x5f80; `router.afterHooks` &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x6837; `this.router.afterHooks` &#x83b7;&#x53d6;&#x7684;&#x5c31;&#x662f;&#x7528;&#x6237;&#x6ce8;&#x518c;&#x7684;&#x5168;&#x5c40; `afterHooks` &#x5b88;&#x536b;&#x3002;\n\n&#x90a3;&#x4e48;&#x81f3;&#x6b64;&#x6211;&#x4eec;&#x628a;&#x6240;&#x6709;&#x5bfc;&#x822a;&#x5b88;&#x536b;&#x7684;&#x6267;&#x884c;&#x5206;&#x6790;&#x5b8c;&#x6bd5;&#x4e86;&#xff0c;&#x6211;&#x4eec;&#x77e5;&#x9053;&#x8def;&#x7531;&#x5207;&#x6362;&#x9664;&#x4e86;&#x6267;&#x884c;&#x8fd9;&#x4e9b;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x4ece;&#x8868;&#x8c61;&#x4e0a;&#x6709; 2 &#x4e2a;&#x5730;&#x65b9;&#x4f1a;&#x53d1;&#x751f;&#x53d8;&#x5316;&#xff0c;&#x4e00;&#x4e2a;&#x662f; url &#x53d1;&#x751f;&#x53d8;&#x5316;&#xff0c;&#x4e00;&#x4e2a;&#x662f;&#x7ec4;&#x4ef6;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x3002;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x5206;&#x522b;&#x4ecb;&#x7ecd;&#x8fd9;&#x4e24;&#x5757;&#x7684;&#x5b9e;&#x73b0;&#x539f;&#x7406;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"570,573"}}],"payload":{"tag":"h2","lines":"168,170"}},{"content":"<a href=\"#url\">#</a> url","children":[{"content":"<pre data-lines=\"577,578\"><code>&#x5f53;&#x6211;&#x4eec;&#x70b9;&#x51fb; `router-link` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x6700;&#x7ec8;&#x4f1a;&#x6267;&#x884c; `router.push`&#xff0c;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"577,578"}},{"content":"<pre data-lines=\"579,584\"><code data-lines=\"579,584\"><span class=\"hljs-keyword\">push</span> (location: RawLocation, onComplete?: <span class=\"hljs-keyword\">Function</span>, onAbort?: <span class=\"hljs-keyword\">Function</span>) {\n  this.history.<span class=\"hljs-keyword\">push</span>(location, onComplete, onAbort)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"579,584"}},{"content":"<pre data-lines=\"585,586\"><code>`this.history.push` &#x51fd;&#x6570;&#xff0c;&#x8fd9;&#x4e2a;&#x51fd;&#x6570;&#x662f;&#x5b50;&#x7c7b;&#x5b9e;&#x73b0;&#x7684;&#xff0c;&#x4e0d;&#x540c;&#x6a21;&#x5f0f;&#x4e0b;&#x8be5;&#x51fd;&#x6570;&#x7684;&#x5b9e;&#x73b0;&#x7565;&#x6709;&#x4e0d;&#x540c;&#xff0c;&#x6211;&#x4eec;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x5e73;&#x65f6;&#x4f7f;&#x7528;&#x6bd4;&#x8f83;&#x591a;&#x7684; `hash` &#x6a21;&#x5f0f;&#x8be5;&#x51fd;&#x6570;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5728; `src/history/hash.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"585,586"}},{"content":"<pre data-lines=\"587,597\"><code data-lines=\"587,597\">push (location: RawLocation, <span class=\"hljs-keyword\">on</span>Complete?: Function, <span class=\"hljs-keyword\">on</span>Abort?: Function) {\n  <span class=\"hljs-keyword\">const</span> { current: <span class=\"hljs-keyword\">from</span>Route } = this\n  this.transitionTo(location, <span class=\"hljs-keyword\">route</span> =&gt; {\n    pushHash(<span class=\"hljs-keyword\">route</span>.fullPath)\n    handleScroll(this.router, <span class=\"hljs-keyword\">route</span>, <span class=\"hljs-keyword\">from</span>Route, false)\n    <span class=\"hljs-keyword\">on</span>Complete &amp;&amp; <span class=\"hljs-keyword\">on</span>Complete(<span class=\"hljs-keyword\">route</span>)\n  }, <span class=\"hljs-keyword\">on</span>Abort)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"587,597"}},{"content":"<pre data-lines=\"598,599\"><code>`push` &#x51fd;&#x6570;&#x4f1a;&#x5148;&#x6267;&#x884c; `this.transitionTo` &#x505a;&#x8def;&#x5f84;&#x5207;&#x6362;&#xff0c;&#x5728;&#x5207;&#x6362;&#x5b8c;&#x6210;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4e2d;&#xff0c;&#x6267;&#x884c; `pushHash` &#x51fd;&#x6570;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"598,599"}},{"content":"<pre data-lines=\"600,609\"><code data-lines=\"600,609\"><span class=\"hljs-keyword\">function</span> pushHash (<span class=\"hljs-type\">path</span>) {\n  <span class=\"hljs-keyword\">if</span> (supportsPushState) {\n    pushState(getUrl(<span class=\"hljs-type\">path</span>))\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-keyword\">window</span>.<span class=\"hljs-keyword\">location</span>.hash = <span class=\"hljs-type\">path</span>\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"600,609"}},{"content":"<pre data-lines=\"610,611\"><code>`supportsPushState` &#x7684;&#x5b9a;&#x4e49;&#x5728; `src/util/push-state.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"610,611"}},{"content":"<pre data-lines=\"612,628\"><code data-lines=\"612,628\">export const supportsPushState = inBrowser &amp;&amp; (<span class=\"hljs-name\">function</span> () {\n  const ua = window.navigator.userAgent\n\n  if (\n    (<span class=\"hljs-name\">ua</span>.indexOf(&apos;Android <span class=\"hljs-number\">2</span>.&apos;) !== <span class=\"hljs-number\">-1</span> || ua.indexOf(&apos;Android <span class=\"hljs-number\">4.0</span>&apos;) !== <span class=\"hljs-number\">-1</span>) <span class=\"hljs-symbol\">&amp;&amp;</span>\n    ua.indexOf(&apos;Mobile Safari&apos;) !== <span class=\"hljs-number\">-1</span> <span class=\"hljs-symbol\">&amp;&amp;</span>\n    ua.indexOf(&apos;Chrome&apos;) === <span class=\"hljs-number\">-1</span> <span class=\"hljs-symbol\">&amp;&amp;</span>\n    ua.indexOf(&apos;Windows Phone&apos;) === <span class=\"hljs-number\">-1</span>\n  ) {\n    return false\n  }\n\n  return window.history <span class=\"hljs-symbol\">&amp;&amp;</span> &apos;pushState&apos; in window.history\n})() \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"612,628"}},{"content":"<pre data-lines=\"629,630\"><code>&#x5982;&#x679c;&#x652f;&#x6301;&#x7684;&#x8bdd;&#xff0c;&#x5219;&#x83b7;&#x53d6;&#x5f53;&#x524d;&#x5b8c;&#x6574;&#x7684; `url`&#xff0c;&#x6267;&#x884c; `pushState` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"629,630"}},{"content":"<pre data-lines=\"631,647\"><code data-lines=\"631,647\">export <span class=\"hljs-keyword\">function</span> pushState (url?:<span class=\"hljs-built_in\"> string</span>,<span class=\"hljs-built_in\"> replace</span>?:<span class=\"hljs-built_in\"> boolean</span>) {\n  saveScrollPosition()\n  const history = <span class=\"hljs-keyword\">window</span>.history\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">(replace</span>) {\n      history.replaceState({<span class=\"hljs-built_in\"> key</span>: _key }, <span class=\"hljs-string\">&apos;&apos;</span>, url)\n    } <span class=\"hljs-keyword\">else</span> {\n      _key = genKey()\n      history.pushState({<span class=\"hljs-built_in\"> key</span>: _key }, <span class=\"hljs-string\">&apos;&apos;</span>, url)\n    }\n  } <span class=\"hljs-keyword\">catch</span> (e) {\n    <span class=\"hljs-keyword\">window</span>.location<span class=\"hljs-built_in\">[replace</span> ? <span class=\"hljs-string\">&apos;replace&apos;</span> : <span class=\"hljs-string\">&apos;assign&apos;</span>](url)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"631,647"}},{"content":"<pre data-lines=\"648,651\"><code>`pushState` &#x4f1a;&#x8c03;&#x7528;&#x6d4f;&#x89c8;&#x5668;&#x539f;&#x751f;&#x7684; `history` &#x7684; `pushState` &#x63a5;&#x53e3;&#x6216;&#x8005; `replaceState` &#x63a5;&#x53e3;&#xff0c;&#x66f4;&#x65b0;&#x6d4f;&#x89c8;&#x5668;&#x7684; url &#x5730;&#x5740;&#xff0c;&#x5e76;&#x628a;&#x5f53;&#x524d; url &#x538b;&#x5165;&#x5386;&#x53f2;&#x6808;&#x4e2d;&#x3002;\n\n&#x7136;&#x540e;&#x5728; `history` &#x7684;&#x521d;&#x59cb;&#x5316;&#x4e2d;&#xff0c;&#x4f1a;&#x8bbe;&#x7f6e;&#x4e00;&#x4e2a;&#x76d1;&#x542c;&#x5668;&#xff0c;&#x76d1;&#x542c;&#x5386;&#x53f2;&#x6808;&#x7684;&#x53d8;&#x5316;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"648,651"}},{"content":"<pre data-lines=\"652,678\"><code data-lines=\"652,678\">setupListeners () {\n  <span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-keyword\">this</span>.router\n  <span class=\"hljs-keyword\">const</span> expectScroll = router.options.scrollBehavior\n  <span class=\"hljs-keyword\">const</span> supportsScroll = supportsPushState &amp;&amp; expectScroll\n\n  <span class=\"hljs-keyword\">if</span> (supportsScroll) {\n    setupScroll()\n  }\n\n  window.addEventListener(supportsPushState ? <span class=\"hljs-string\">&apos;popstate&apos;</span> : <span class=\"hljs-string\">&apos;hashchange&apos;</span>, () =&gt; {\n    <span class=\"hljs-keyword\">const</span> current = <span class=\"hljs-keyword\">this</span>.current\n    <span class=\"hljs-keyword\">if</span> (!ensureSlash()) {\n      <span class=\"hljs-keyword\">return</span>\n    }\n    <span class=\"hljs-keyword\">this</span>.transitionTo(getHash(), route =&gt; {\n      <span class=\"hljs-keyword\">if</span> (supportsScroll) {\n        handleScroll(<span class=\"hljs-keyword\">this</span>.router, route, current, <span class=\"hljs-literal\">true</span>)\n      }\n      <span class=\"hljs-keyword\">if</span> (!supportsPushState) {\n        replaceHash(route.fullPath)\n      }\n    })\n  })\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"652,678"}},{"content":"<pre data-lines=\"679,682\"><code>&#x5f53;&#x70b9;&#x51fb;&#x6d4f;&#x89c8;&#x5668;&#x8fd4;&#x56de;&#x6309;&#x94ae;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5982;&#x679c;&#x5df2;&#x7ecf;&#x6709; url &#x88ab;&#x538b;&#x5165;&#x5386;&#x53f2;&#x6808;&#xff0c;&#x5219;&#x4f1a;&#x89e6;&#x53d1; `popstate` &#x4e8b;&#x4ef6;&#xff0c;&#x7136;&#x540e;&#x62ff;&#x5230;&#x5f53;&#x524d;&#x8981;&#x8df3;&#x8f6c;&#x7684; `hash`&#xff0c;&#x6267;&#x884c; `transtionTo` &#x65b9;&#x6cd5;&#x505a;&#x4e00;&#x6b21;&#x8def;&#x5f84;&#x8f6c;&#x6362;&#x3002;\n\n&#x540c;&#x5b66;&#x4eec;&#x5728;&#x4f7f;&#x7528; Vue-Router &#x5f00;&#x53d1;&#x9879;&#x76ee;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6253;&#x5f00;&#x8c03;&#x8bd5;&#x9875;&#x9762; `http://localhost:8080` &#x540e;&#x4f1a;&#x81ea;&#x52a8;&#x628a; url &#x4fee;&#x6539;&#x4e3a; `http://localhost:8080/#/`&#xff0c;&#x8fd9;&#x662f;&#x600e;&#x4e48;&#x505a;&#x5230;&#x5462;&#xff1f;&#x539f;&#x6765;&#x5728;&#x5b9e;&#x4f8b;&#x5316; `HashHistory` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x6784;&#x9020;&#x51fd;&#x6570;&#x4f1a;&#x6267;&#x884c; `ensureSlash()` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"679,682"}},{"content":"<pre data-lines=\"683,720\"><code data-lines=\"683,720\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">ensureSlash</span> (<span class=\"hljs-params\"></span>): boolean {\n  <span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-title function_\">getHash</span>()\n  <span class=\"hljs-keyword\">if</span> (path.<span class=\"hljs-title function_\">charAt</span>(<span class=\"hljs-number\">0</span>) === <span class=\"hljs-string\">&apos;/&apos;</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n  }\n  <span class=\"hljs-title function_\">replaceHash</span>(<span class=\"hljs-string\">&apos;/&apos;</span> + path)\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getHash</span> (<span class=\"hljs-params\"></span>): string {\n  <span class=\"hljs-comment\">// We can&apos;t use window.location.hash here because it&apos;s not</span>\n  <span class=\"hljs-comment\">// consistent across browsers - Firefox will pre-decode it!</span>\n  <span class=\"hljs-keyword\">const</span> href = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">href</span>\n  <span class=\"hljs-keyword\">const</span> index = href.<span class=\"hljs-title function_\">indexOf</span>(<span class=\"hljs-string\">&apos;#&apos;</span>)\n  <span class=\"hljs-keyword\">return</span> index === -<span class=\"hljs-number\">1</span> ? <span class=\"hljs-string\">&apos;&apos;</span> : href.<span class=\"hljs-title function_\">slice</span>(index + <span class=\"hljs-number\">1</span>)\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getUrl</span> (<span class=\"hljs-params\">path</span>) {\n  <span class=\"hljs-keyword\">const</span> href = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">href</span>\n  <span class=\"hljs-keyword\">const</span> i = href.<span class=\"hljs-title function_\">indexOf</span>(<span class=\"hljs-string\">&apos;#&apos;</span>)\n  <span class=\"hljs-keyword\">const</span> base = i &gt;= <span class=\"hljs-number\">0</span> ? href.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>, i) : href\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{base}</span>#<span class=\"hljs-subst\">&#x24;{path}</span>`</span>\n}\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">replaceHash</span> (<span class=\"hljs-params\">path</span>) {\n  <span class=\"hljs-keyword\">if</span> (supportsPushState) {\n    <span class=\"hljs-title function_\">replaceState</span>(<span class=\"hljs-title function_\">getUrl</span>(path))\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-title function_\">getUrl</span>(path))\n  }\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">replaceState</span> (<span class=\"hljs-params\">url?: string</span>) {\n  <span class=\"hljs-title function_\">pushState</span>(url, <span class=\"hljs-literal\">true</span>)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"683,720"}},{"content":"<pre data-lines=\"721,722\"><code>&#x8fd9;&#x4e2a;&#x65f6;&#x5019; `path` &#x4e3a;&#x7a7a;&#xff0c;&#x6240;&#x4ee5;&#x6267;&#x884c; `replaceHash(&apos;/&apos; + path)`&#xff0c;&#x7136;&#x540e;&#x5185;&#x90e8;&#x4f1a;&#x6267;&#x884c;&#x4e00;&#x6b21; `getUrl`&#xff0c;&#x8ba1;&#x7b97;&#x51fa;&#x6765;&#x7684;&#x65b0;&#x7684; `url` &#x4e3a; `http://localhost:8080/#/`&#xff0c;&#x6700;&#x7ec8;&#x4f1a;&#x6267;&#x884c; `pushState(url, true)`&#xff0c;&#x8fd9;&#x5c31;&#x662f; url &#x4f1a;&#x6539;&#x53d8;&#x7684;&#x539f;&#x56e0;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"721,722"}}],"payload":{"tag":"h2","lines":"574,576"}},{"content":"<a href=\"#%E7%BB%84%E4%BB%B6\">#</a> &#x7ec4;&#x4ef6;","children":[{"content":"<pre data-lines=\"726,727\"><code>&#x8def;&#x7531;&#x6700;&#x7ec8;&#x7684;&#x6e32;&#x67d3;&#x79bb;&#x4e0d;&#x5f00;&#x7ec4;&#x4ef6;&#xff0c;Vue-Router &#x5185;&#x7f6e;&#x4e86; `&lt;router-view&gt;` &#x7ec4;&#x4ef6;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/components/view.js` &#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"726,727"}},{"content":"<pre data-lines=\"728,801\"><code data-lines=\"728,801\">export <span class=\"hljs-keyword\">default</span> {\n <span class=\"hljs-built_in\"> name</span>: <span class=\"hljs-string\">&apos;RouterView&apos;</span>,\n  functional:<span class=\"hljs-built_in\"> true</span>,\n  props: {\n   <span class=\"hljs-built_in\"> name</span>: {\n      type: String,\n      default: <span class=\"hljs-string\">&apos;default&apos;</span>\n    }\n  },\n  render (<span class=\"hljs-number\">_</span>, { props, children, parent, data }) {\n    data.routerView =<span class=\"hljs-built_in\"> true</span>\n   \n    const h = parent.<span class=\"hljs-variable\">&#x24;createElement</span>\n    const<span class=\"hljs-built_in\"> name</span> = props<span class=\"hljs-built_in\">.name</span>\n    const route = parent.<span class=\"hljs-variable\">&#x24;route</span>\n    const cache = parent._routerViewCache || (parent._routerViewCache = {})\n\n    <span class=\"hljs-keyword\">let</span> depth = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-keyword\">let</span> inactive =<span class=\"hljs-built_in\"> false</span>\n    while (parent &amp;&amp; parent._routerRoot !== parent) {\n      <span class=\"hljs-keyword\">if</span> (parent.<span class=\"hljs-variable\">&#x24;vnode</span> &amp;&amp; parent.<span class=\"hljs-variable\">&#x24;vnode</span>.data.routerView) {\n        depth++\n      }\n      <span class=\"hljs-keyword\">if</span> (parent._inactive) {\n        inactive =<span class=\"hljs-built_in\"> true</span>\n      }\n      parent = parent.<span class=\"hljs-variable\">&#x24;parent</span>\n    }\n    data.routerViewDepth = depth\n\n    <span class=\"hljs-keyword\">if</span> (inactive) {\n      <span class=\"hljs-keyword\">return</span> h(cache<span class=\"hljs-built_in\">[name</span>], data, children)\n    }\n\n    const matched = route.matched[depth]\n    <span class=\"hljs-keyword\">if</span> (!matched) {\n      cache<span class=\"hljs-built_in\">[name</span>] = null\n      <span class=\"hljs-keyword\">return</span> h()\n    }\n\n    const component = cache<span class=\"hljs-built_in\">[name</span>] = matched.components<span class=\"hljs-built_in\">[name</span>]\n   \n    data.registerRouteInstance = (vm, val) =&gt; {     \n      const current = matched.instances<span class=\"hljs-built_in\">[name</span>]\n      <span class=\"hljs-keyword\">if</span> (\n        (val &amp;&amp; current !== vm) ||\n        (!val &amp;&amp; current === vm)\n      ) {\n        matched.instances<span class=\"hljs-built_in\">[name</span>] = val\n      }\n    }\n    \n    ;(data.hook || (data.hook = {})).prepatch = (<span class=\"hljs-number\">_</span>, vnode) =&gt; {\n      matched.instances<span class=\"hljs-built_in\">[name</span>] = vnode.componentInstance\n    }\n\n    <span class=\"hljs-keyword\">let</span> propsToPass = data.props = resolveProps(route, matched.props &amp;&amp; matched.props<span class=\"hljs-built_in\">[name</span>])\n    <span class=\"hljs-keyword\">if</span> (propsToPass) {\n      propsToPass = data.props = extend({}, propsToPass)\n      const attrs = data.attrs = data.attrs || {}\n      <span class=\"hljs-keyword\">for</span> (const<span class=\"hljs-built_in\"> key</span> <span class=\"hljs-keyword\">in</span> propsToPass) {\n        <span class=\"hljs-keyword\">if</span> (!component.props || !<span class=\"hljs-built_in\">(key</span> <span class=\"hljs-keyword\">in</span> component.props)) {\n          attrs<span class=\"hljs-built_in\">[key</span>] = propsToPass<span class=\"hljs-built_in\">[key</span>]\n          <span class=\"hljs-keyword\">delete</span> propsToPass<span class=\"hljs-built_in\">[key</span>]\n        }\n      }\n    }\n\n    <span class=\"hljs-keyword\">return</span> h(component, data, children)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"728,801"}},{"content":"<pre data-lines=\"802,803\"><code>`&lt;router-view&gt;` &#x662f;&#x4e00;&#x4e2a; `functional` &#x7ec4;&#x4ef6;&#xff0c;&#x5b83;&#x7684;&#x6e32;&#x67d3;&#x4e5f;&#x662f;&#x4f9d;&#x8d56; `render` &#x51fd;&#x6570;&#xff0c;&#x90a3;&#x4e48; `&lt;router-view&gt;` &#x5177;&#x4f53;&#x5e94;&#x8be5;&#x6e32;&#x67d3;&#x4ec0;&#x4e48;&#x7ec4;&#x4ef6;&#x5462;&#xff0c;&#x9996;&#x5148;&#x83b7;&#x53d6;&#x5f53;&#x524d;&#x7684;&#x8def;&#x5f84;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"802,803"}},{"content":"<pre data-lines=\"804,807\"><code data-lines=\"804,807\"><span class=\"hljs-keyword\">const</span> route = parent.&#x24;route \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"804,807"}},{"content":"<pre data-lines=\"808,809\"><code>&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x5206;&#x6790;&#x8fc7;&#xff0c;&#x5728; `src/install.js` &#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x7ed9; Vue &#x7684;&#x539f;&#x578b;&#x4e0a;&#x5b9a;&#x4e49;&#x4e86; `&#x24;route`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"808,809"}},{"content":"<pre data-lines=\"810,815\"><code data-lines=\"810,815\"><span class=\"hljs-built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"hljs-string\">&apos;<span class=\"hljs-subst\">&#x24;route</span>&apos;</span>, {\n  <span class=\"hljs-keyword\">get</span> () { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._routerRoot._route }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"810,815"}},{"content":"<pre data-lines=\"816,817\"><code>&#x7136;&#x540e;&#x5728; `VueRouter` &#x7684;&#x5b9e;&#x4f8b;&#x6267;&#x884c; `router.init` &#x65b9;&#x6cd5;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x903b;&#x8f91;&#xff0c;&#x5b9a;&#x4e49;&#x5728; `src/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"816,817"}},{"content":"<pre data-lines=\"818,825\"><code data-lines=\"818,825\">history.listen(<span class=\"hljs-function\"><span class=\"hljs-params\">route</span> =&gt;</span> {\n  this.apps.forEach(<span class=\"hljs-function\">(<span class=\"hljs-params\">app</span>) =&gt;</span> {\n    app._route = route\n  })\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"818,825"}},{"content":"<pre data-lines=\"826,827\"><code>&#x800c; `history.listen` &#x65b9;&#x6cd5;&#x5b9a;&#x4e49;&#x5728; `src/history/base.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"826,827"}},{"content":"<pre data-lines=\"828,833\"><code data-lines=\"828,833\">listen (<span class=\"hljs-keyword\">cb</span>: Function) {\n  this.<span class=\"hljs-keyword\">cb</span> = <span class=\"hljs-keyword\">cb</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"828,833"}},{"content":"<pre data-lines=\"834,835\"><code>&#x7136;&#x540e;&#x5728; `updateRoute` &#x7684;&#x65f6;&#x5019;&#x6267;&#x884c; `this.cb`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"834,835"}},{"content":"<pre data-lines=\"836,844\"><code data-lines=\"836,844\">updateRoute (route: Route) {\n  <span class=\"hljs-comment\">//. ..</span>\n  <span class=\"hljs-keyword\">this</span>.current = route\n  <span class=\"hljs-keyword\">this</span>.cb &amp;&amp; <span class=\"hljs-keyword\">this</span>.cb(route)\n  <span class=\"hljs-comment\">// ...</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"836,844"}},{"content":"<pre data-lines=\"845,848\"><code>&#x4e5f;&#x5c31;&#x662f;&#x6211;&#x4eec;&#x6267;&#x884c; `transitionTo` &#x65b9;&#x6cd5;&#x6700;&#x540e;&#x6267;&#x884c; `updateRoute` &#x7684;&#x65f6;&#x5019;&#x4f1a;&#x6267;&#x884c;&#x56de;&#x8c03;&#xff0c;&#x7136;&#x540e;&#x4f1a;&#x66f4;&#x65b0; `this.apps` &#x4fdd;&#x5b58;&#x7684;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x7684; `_route` &#x503c;&#xff0c;`this.apps` &#x6570;&#x7ec4;&#x4fdd;&#x5b58;&#x7684;&#x5b9e;&#x4f8b;&#x7684;&#x7279;&#x70b9;&#x90fd;&#x662f;&#x5728;&#x521d;&#x59cb;&#x5316;&#x7684;&#x65f6;&#x5019;&#x4f20;&#x5165;&#x4e86; `router` &#x914d;&#x7f6e;&#x9879;&#xff0c;&#x4e00;&#x822c;&#x7684;&#x573a;&#x666f;&#x6570;&#x7ec4;&#x53ea;&#x4f1a;&#x4fdd;&#x5b58;&#x6839; Vue &#x5b9e;&#x4f8b;&#xff0c;&#x56e0;&#x4e3a;&#x6211;&#x4eec;&#x662f;&#x5728; `new Vue` &#x4f20;&#x5165;&#x4e86; \b`router` &#x5b9e;&#x4f8b;&#x3002;`&#x24;route` &#x662f;&#x5b9a;&#x4e49;&#x5728; `Vue.prototype` &#x4e0a;&#x3002;&#x6bcf;&#x4e2a;&#x7ec4;&#x4ef6;&#x5b9e;&#x4f8b;&#x8bbf;&#x95ee; `&#x24;route` &#x5c5e;&#x6027;&#xff0c;&#x5c31;&#x662f;&#x8bbf;&#x95ee;&#x6839;&#x5b9e;&#x4f8b;&#x7684; `_route`&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x5f53;&#x524d;&#x7684;&#x8def;&#x7531;&#x7ebf;&#x8def;&#x3002;\n\n`&lt;router-view&gt;` &#x662f;&#x652f;&#x6301;&#x5d4c;&#x5957;&#x7684;&#xff0c;&#x56de;&#x5230; `render` &#x51fd;&#x6570;&#xff0c;&#x5176;&#x4e2d;&#x5b9a;&#x4e49;&#x4e86; `depth` &#x7684;&#x6982;&#x5ff5;&#xff0c;&#x5b83;&#x8868;&#x793a; `&lt;router-view&gt;` &#x5d4c;&#x5957;&#x7684;&#x6df1;&#x5ea6;&#x3002;&#x6bcf;&#x4e2a; `&lt;router-view&gt;` &#x5728;&#x6e32;&#x67d3;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"845,848"}},{"content":"<pre data-lines=\"849,866\"><code data-lines=\"849,866\">data<span class=\"hljs-selector-class\">.routerView</span> = true\n<span class=\"hljs-comment\">// ...</span>\nwhile (parent &amp;&amp; parent._routerRoot !== parent) {\n  <span class=\"hljs-keyword\">if</span> (parent.<span class=\"hljs-variable\">&#x24;vnode</span> &amp;&amp; parent.<span class=\"hljs-variable\">&#x24;vnode</span><span class=\"hljs-selector-class\">.data</span>.routerView) {\n    depth++\n  }\n  <span class=\"hljs-keyword\">if</span> (parent._inactive) {\n    inactive = true\n  }\n  parent = parent.<span class=\"hljs-variable\">&#x24;parent</span>\n}\n\nconst matched = route<span class=\"hljs-selector-class\">.matched</span><span class=\"hljs-selector-attr\">[depth]</span>\n<span class=\"hljs-comment\">// ...</span>\nconst component = cache<span class=\"hljs-selector-attr\">[name]</span> = matched<span class=\"hljs-selector-class\">.components</span><span class=\"hljs-selector-attr\">[name]</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"849,866"}},{"content":"<pre data-lines=\"867,870\"><code>`parent._routerRoot` &#x8868;&#x793a;&#x7684;&#x662f;&#x6839; Vue &#x5b9e;&#x4f8b;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x5faa;&#x73af;&#x5c31;&#x662f;&#x4ece;&#x5f53;&#x524d;&#x7684; `&lt;router-view&gt;` &#x7684;&#x7236;&#x8282;&#x70b9;&#x5411;&#x4e0a;&#x627e;&#xff0c;&#x4e00;&#x76f4;&#x627e;&#x5230;&#x6839; Vue &#x5b9e;&#x4f8b;&#xff0c;&#x5728;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#xff0c;&#x5982;&#x679c;&#x78b0;&#x5230;&#x4e86;&#x7236;&#x8282;&#x70b9;&#x4e5f;&#x662f; `&lt;router-view&gt;` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x8bf4;&#x660e; `&lt;router-view&gt;` &#x6709;&#x5d4c;&#x5957;&#x7684;&#x60c5;&#x51b5;&#xff0c;`depth++`&#x3002;&#x904d;&#x5386;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x6839;&#x636e;&#x5f53;&#x524d;&#x7ebf;&#x8def;&#x5339;&#x914d;&#x7684;&#x8def;&#x5f84;&#x548c; `depth` &#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684; `RouteRecord`&#xff0c;&#x8fdb;&#x800c;&#x627e;&#x5230;&#x8be5;&#x6e32;&#x67d3;&#x7684;&#x7ec4;&#x4ef6;&#x3002;\n\n&#x9664;&#x4e86;&#x627e;&#x5230;&#x4e86;&#x5e94;&#x8be5;&#x6e32;&#x67d3;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x8fd8;&#x5b9a;&#x4e49;&#x4e86;&#x4e00;&#x4e2a;&#x6ce8;&#x518c;&#x8def;&#x7531;&#x5b9e;&#x4f8b;&#x7684;&#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"867,870"}},{"content":"<pre data-lines=\"871,882\"><code data-lines=\"871,882\"><span class=\"hljs-keyword\">data</span>.registerRouteInstance = (vm, <span class=\"hljs-keyword\">val</span>) =&gt; {     \n  <span class=\"hljs-keyword\">const</span> current = matched.instances[name]\n  <span class=\"hljs-keyword\">if</span> (\n    (<span class=\"hljs-keyword\">val</span> &amp;&amp; current !== vm) ||\n    (!<span class=\"hljs-keyword\">val</span> &amp;&amp; current === vm)\n  ) {\n    matched.instances[name] = <span class=\"hljs-keyword\">val</span>\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"871,882"}},{"content":"<pre data-lines=\"883,884\"><code>&#x7ed9; `vnode` &#x7684; `data` &#x5b9a;&#x4e49;&#x4e86; `registerRouteInstance` &#x65b9;&#x6cd5;&#xff0c;&#x5728; `src/install.js` &#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x4f1a;&#x8c03;&#x7528;&#x8be5;&#x65b9;&#x6cd5;&#x53bb;&#x6ce8;&#x518c;&#x8def;&#x7531;&#x7684;&#x5b9e;&#x4f8b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"883,884"}},{"content":"<pre data-lines=\"885,903\"><code data-lines=\"885,903\"><span class=\"hljs-keyword\">const</span> registerInstance = (vm, callVal) =&gt; {\n  let i = vm.&#x24;options._parentVnode\n  <span class=\"hljs-keyword\">if</span> (isDef(i) &amp;&amp; isDef(i = i.data) &amp;&amp; isDef(i = i.registerRouteInstance)) {\n    i(vm, callVal)\n  }\n}\n\nVue.<span class=\"hljs-keyword\">mixin</span>({\n  beforeCreate () {\n    <span class=\"hljs-comment\">// ...</span>\n    registerInstance(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-keyword\">this</span>)\n  },\n  destroyed () {\n    registerInstance(<span class=\"hljs-keyword\">this</span>)\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"885,903"}},{"content":"<pre data-lines=\"904,907\"><code>&#x5728;&#x6df7;&#x5165;&#x7684; `beforeCreate` &#x94a9;&#x5b50;&#x51fd;&#x6570;&#x4e2d;&#xff0c;&#x4f1a;&#x6267;&#x884c; `registerInstance` &#x65b9;&#x6cd5;&#xff0c;&#x8fdb;&#x800c;&#x6267;&#x884c; `render` &#x51fd;&#x6570;&#x4e2d;&#x5b9a;&#x4e49;&#x7684; `registerRouteInstance` &#x65b9;&#x6cd5;&#xff0c;&#x4ece;&#x800c;&#x7ed9; `matched.instances[name]` &#x8d4b;&#x503c;&#x5f53;&#x524d;&#x7ec4;&#x4ef6;&#x7684; `vm` &#x5b9e;&#x4f8b;&#x3002;\n\n`render` &#x51fd;&#x6570;&#x7684;&#x6700;&#x540e;&#x6839;&#x636e; `component` &#x6e32;&#x67d3;&#x51fa;&#x5bf9;&#x5e94;&#x7684;&#x7ec4;&#x4ef6; `vonde`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"904,907"}},{"content":"<pre data-lines=\"908,911\"><code data-lines=\"908,911\"><span class=\"hljs-keyword\">return</span> h(component, <span class=\"hljs-keyword\">data</span>, children) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"908,911"}},{"content":"<pre data-lines=\"912,913\"><code>&#x90a3;&#x4e48;&#x5f53;&#x6211;&#x4eec;&#x6267;&#x884c; `transitionTo` &#x6765;&#x66f4;&#x6539;&#x8def;&#x7531;&#x7ebf;&#x8def;&#x540e;&#xff0c;&#x7ec4;&#x4ef6;&#x662f;&#x5982;&#x4f55;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7684;&#x5462;&#xff1f;&#x5728;&#x6211;&#x4eec;&#x6df7;&#x5165;&#x7684; `beforeCreate` &#x94a9;&#x5b50;&#x51fd;&#x6570;&#x4e2d;&#x6709;&#x8fd9;&#x4e48;&#x4e00;&#x6bb5;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"912,913"}},{"content":"<pre data-lines=\"914,924\"><code data-lines=\"914,924\">Vue.<span class=\"hljs-keyword\">mixin</span>({\n  beforeCreate () {\n    <span class=\"hljs-keyword\">if</span> (isDef(<span class=\"hljs-keyword\">this</span>.&#x24;options.router)) {\n      Vue.util.defineReactive(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">&apos;_route&apos;</span>, <span class=\"hljs-keyword\">this</span>._router.history.current)\n    }\n    <span class=\"hljs-comment\">// ...</span>\n  }\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"914,924"}},{"content":"<pre data-lines=\"925,938\"><code>&#x7531;&#x4e8e;&#x6211;&#x4eec;&#x628a;&#x6839; Vue &#x5b9e;&#x4f8b;&#x7684; `_route` &#x5c5e;&#x6027;&#x5b9a;&#x4e49;&#x6210;&#x54cd;&#x5e94;&#x5f0f;&#x7684;&#xff0c;&#x6211;&#x4eec;&#x5728;&#x6bcf;&#x4e2a; `&lt;router-view&gt;` &#x6267;&#x884c; `render` &#x51fd;&#x6570;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x90fd;&#x4f1a;&#x8bbf;&#x95ee; `parent.&#x24;route`&#xff0c;&#x5982;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x5206;&#x6790;&#x4f1a;&#x8bbf;&#x95ee; `this._routerRoot._route`&#xff0c;&#x89e6;&#x53d1;&#x4e86;&#x5b83;&#x7684; `getter`&#xff0c;&#x76f8;&#x5f53;&#x4e8e; `&lt;router-view&gt;` &#x5bf9;&#x5b83;&#x6709;&#x4f9d;&#x8d56;&#xff0c;&#x7136;&#x540e;&#x518d;&#x6267;&#x884c;&#x5b8c; `transitionTo` &#x540e;&#xff0c;&#x4fee;&#x6539; `app._route` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x53c8;&#x89e6;&#x53d1;&#x4e86;`setter`&#xff0c;&#x56e0;&#x6b64;&#x4f1a;&#x901a;&#x77e5; `&lt;router-view&gt;` &#x7684;&#x6e32;&#x67d3; `watcher` &#x66f4;&#x65b0;&#xff0c;&#x91cd;&#x65b0;&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;&#x3002;\n\nVue-Router &#x8fd8;&#x5185;&#x7f6e;&#x4e86;&#x53e6;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6; `&lt;router-link&gt;`&#xff0c; &#x5b83;&#x652f;&#x6301;&#x7528;&#x6237;&#x5728;&#x5177;&#x6709;&#x8def;&#x7531;&#x529f;&#x80fd;&#x7684;&#x5e94;&#x7528;&#x4e2d;&#xff08;&#x70b9;&#x51fb;&#xff09;&#x5bfc;&#x822a;&#x3002; &#x901a;&#x8fc7; `to` &#x5c5e;&#x6027;&#x6307;&#x5b9a;&#x76ee;&#x6807;&#x5730;&#x5740;&#xff0c;&#x9ed8;&#x8ba4;&#x6e32;&#x67d3;&#x6210;&#x5e26;&#x6709;&#x6b63;&#x786e;&#x94fe;&#x63a5;&#x7684; `&lt;a&gt;` &#x6807;&#x7b7e;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x914d;&#x7f6e; `tag` &#x5c5e;&#x6027;&#x751f;&#x6210;&#x522b;&#x7684;&#x6807;&#x7b7e;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x5f53;&#x76ee;&#x6807;&#x8def;&#x7531;&#x6210;&#x529f;&#x6fc0;&#x6d3b;&#x65f6;&#xff0c;&#x94fe;&#x63a5;&#x5143;&#x7d20;&#x81ea;&#x52a8;&#x8bbe;&#x7f6e;&#x4e00;&#x4e2a;&#x8868;&#x793a;&#x6fc0;&#x6d3b;&#x7684; CSS &#x7c7b;&#x540d;&#x3002;\n\n`&lt;router-link&gt;` &#x6bd4;&#x8d77;&#x5199;&#x6b7b;&#x7684; `&lt;a href=&quot;...&quot;&gt;` &#x4f1a;&#x597d;&#x4e00;&#x4e9b;&#xff0c;&#x7406;&#x7531;&#x5982;&#x4e0b;&#xff1a;\n\n&#x65e0;&#x8bba;&#x662f; HTML5 `history` &#x6a21;&#x5f0f;&#x8fd8;&#x662f; `hash` &#x6a21;&#x5f0f;&#xff0c;&#x5b83;&#x7684;&#x8868;&#x73b0;&#x884c;&#x4e3a;&#x4e00;&#x81f4;&#xff0c;&#x6240;&#x4ee5;&#xff0c;&#x5f53;&#x4f60;&#x8981;&#x5207;&#x6362;&#x8def;&#x7531;&#x6a21;&#x5f0f;&#xff0c;&#x6216;&#x8005;&#x5728; IE9 &#x964d;&#x7ea7;&#x4f7f;&#x7528; `hash` &#x6a21;&#x5f0f;&#xff0c;&#x65e0;&#x987b;&#x4f5c;&#x4efb;&#x4f55;&#x53d8;&#x52a8;&#x3002;\n\n&#x5728; HTML5 `history` &#x6a21;&#x5f0f;&#x4e0b;&#xff0c;`router-link` &#x4f1a;&#x5b88;&#x536b;&#x70b9;&#x51fb;&#x4e8b;&#x4ef6;&#xff0c;&#x8ba9;&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x518d;&#x91cd;&#x65b0;&#x52a0;&#x8f7d;&#x9875;&#x9762;&#x3002;\n\n&#x5f53;&#x4f60;&#x5728; HTML5 `history` &#x6a21;&#x5f0f;&#x4e0b;&#x4f7f;&#x7528; `base` &#x9009;&#x9879;&#x4e4b;&#x540e;&#xff0c;&#x6240;&#x6709;&#x7684; to &#x5c5e;&#x6027;&#x90fd;&#x4e0d;&#x9700;&#x8981;&#x5199;&#xff08;&#x57fa;&#x8def;&#x5f84;&#xff09;&#x4e86;&#x3002;\n\n&#x90a3;&#x4e48;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x5c31;&#x6765;&#x5206;&#x6790;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/components/link.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"925,938"}},{"content":"<pre data-lines=\"939,1032\"><code data-lines=\"939,1032\">export default {\n  name: <span class=\"hljs-string\">&apos;RouterLink&apos;</span>,\n  props: {\n    to: {\n      type: toTypes,\n      required: <span class=\"hljs-literal\">true</span>\n    },\n    tag: {\n      type: String,\n      default: <span class=\"hljs-string\">&apos;a&apos;</span>\n    },\n    exact: <span class=\"hljs-built_in\">Boolean</span>,\n    append: <span class=\"hljs-built_in\">Boolean</span>,\n    replace: <span class=\"hljs-built_in\">Boolean</span>,\n    activeClass: String,\n    exactActiveClass: String,\n    event: {\n      type: eventTypes,\n      default: <span class=\"hljs-string\">&apos;click&apos;</span>\n    }\n  },\n  render (h: Function) {\n    <span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-keyword\">this</span>.&#x24;router\n    <span class=\"hljs-keyword\">const</span> current = <span class=\"hljs-keyword\">this</span>.&#x24;route\n    <span class=\"hljs-keyword\">const</span> { location, route, href } = router.resolve(<span class=\"hljs-keyword\">this</span>.to, current, <span class=\"hljs-keyword\">this</span>.append)\n\n    <span class=\"hljs-keyword\">const</span> classes = {}\n    <span class=\"hljs-keyword\">const</span> globalActiveClass = router.options.linkActiveClass\n    <span class=\"hljs-keyword\">const</span> globalExactActiveClass = router.options.linkExactActiveClass\n    <span class=\"hljs-keyword\">const</span> activeClassFallback = globalActiveClass == <span class=\"hljs-literal\">null</span>\n            ? <span class=\"hljs-string\">&apos;router-link-active&apos;</span>\n            : globalActiveClass\n    <span class=\"hljs-keyword\">const</span> exactActiveClassFallback = globalExactActiveClass == <span class=\"hljs-literal\">null</span>\n            ? <span class=\"hljs-string\">&apos;router-link-exact-active&apos;</span>\n            : globalExactActiveClass\n    <span class=\"hljs-keyword\">const</span> activeClass = <span class=\"hljs-keyword\">this</span>.activeClass == <span class=\"hljs-literal\">null</span>\n            ? activeClassFallback\n            : <span class=\"hljs-keyword\">this</span>.activeClass\n    <span class=\"hljs-keyword\">const</span> exactActiveClass = <span class=\"hljs-keyword\">this</span>.exactActiveClass == <span class=\"hljs-literal\">null</span>\n            ? exactActiveClassFallback\n            : <span class=\"hljs-keyword\">this</span>.exactActiveClass\n    <span class=\"hljs-keyword\">const</span> compareTarget = location.path\n      ? createRoute(<span class=\"hljs-literal\">null</span>, location, <span class=\"hljs-literal\">null</span>, router)\n      : route\n\n    classes[exactActiveClass] = isSameRoute(current, compareTarget)\n    classes[activeClass] = <span class=\"hljs-keyword\">this</span>.exact\n      ? classes[exactActiveClass]\n      : isIncludedRoute(current, compareTarget)\n\n    <span class=\"hljs-keyword\">const</span> handler = e =&gt; {\n      <span class=\"hljs-keyword\">if</span> (guardEvent(e)) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.replace) {\n          router.replace(location)\n        } <span class=\"hljs-keyword\">else</span> {\n          router.push(location)\n        }\n      }\n    }\n\n    <span class=\"hljs-keyword\">const</span> on = { click: guardEvent }\n    <span class=\"hljs-keyword\">if</span> (Array.isArray(<span class=\"hljs-keyword\">this</span>.event)) {\n      <span class=\"hljs-keyword\">this</span>.event.forEach(e =&gt; { on[e] = handler })\n    } <span class=\"hljs-keyword\">else</span> {\n      on[<span class=\"hljs-keyword\">this</span>.event] = handler\n    }\n\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">data</span>: any = {\n      <span class=\"hljs-keyword\">class</span>: classes\n    }\n\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.tag === <span class=\"hljs-string\">&apos;a&apos;</span>) {\n      <span class=\"hljs-keyword\">data</span>.on = on\n      <span class=\"hljs-keyword\">data</span>.attrs = { href }\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">const</span> a = findAnchor(<span class=\"hljs-keyword\">this</span>.&#x24;slots.default)\n      <span class=\"hljs-keyword\">if</span> (a) {\n        a.isStatic = <span class=\"hljs-literal\">false</span>\n        <span class=\"hljs-keyword\">const</span> extend = _Vue.util.extend\n        <span class=\"hljs-keyword\">const</span> aData = a.<span class=\"hljs-keyword\">data</span> = extend({}, a.<span class=\"hljs-keyword\">data</span>)\n        aData.on = on\n        <span class=\"hljs-keyword\">const</span> aAttrs = a.<span class=\"hljs-keyword\">data</span>.attrs = extend({}, a.<span class=\"hljs-keyword\">data</span>.attrs)\n        aAttrs.href = href\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-keyword\">data</span>.on = on\n      }\n    }\n\n    <span class=\"hljs-keyword\">return</span> h(<span class=\"hljs-keyword\">this</span>.tag, <span class=\"hljs-keyword\">data</span>, <span class=\"hljs-keyword\">this</span>.&#x24;slots.default)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"939,1032"}},{"content":"<pre data-lines=\"1033,1034\"><code>`&lt;router-link&gt;` &#x6807;&#x7b7e;&#x7684;&#x6e32;&#x67d3;&#x4e5f;&#x662f;&#x57fa;&#x4e8e; `render` &#x51fd;&#x6570;&#xff0c;&#x5b83;&#x9996;&#x5148;&#x505a;&#x4e86;&#x8def;&#x7531;&#x89e3;&#x6790;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1033,1034"}},{"content":"<pre data-lines=\"1035,1040\"><code data-lines=\"1035,1040\"><span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-keyword\">this</span>.&#x24;router\n<span class=\"hljs-keyword\">const</span> current = <span class=\"hljs-keyword\">this</span>.&#x24;route\n<span class=\"hljs-keyword\">const</span> { location, route, href } = router.resolve(<span class=\"hljs-keyword\">this</span>.to, current, <span class=\"hljs-keyword\">this</span>.append) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1035,1040"}},{"content":"<pre data-lines=\"1041,1042\"><code>`router.resolve` &#x662f; `VueRouter` &#x7684;&#x5b9e;&#x4f8b;&#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1041,1042"}},{"content":"<pre data-lines=\"1043,1079\"><code data-lines=\"1043,1079\">resolve (\n  to: RawLocation,\n  current?: Route,\n  append?: boolean\n): {\n  location: Location,\n  route: Route,\n  href: <span class=\"hljs-built_in\">string</span>,\n  normalizedTo: Location,\n  resolved: Route\n} {\n  <span class=\"hljs-keyword\">const</span> location = normalizeLocation(\n    to,\n    current || <span class=\"hljs-keyword\">this</span>.history.current,\n    append,\n    <span class=\"hljs-keyword\">this</span>\n  )\n  <span class=\"hljs-keyword\">const</span> route = <span class=\"hljs-keyword\">this</span>.match(location, current)\n  <span class=\"hljs-keyword\">const</span> fullPath = route.redirectedFrom || route.fullPath\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">base</span> = <span class=\"hljs-keyword\">this</span>.history.<span class=\"hljs-keyword\">base</span>\n  <span class=\"hljs-keyword\">const</span> href = createHref(<span class=\"hljs-keyword\">base</span>, fullPath, <span class=\"hljs-keyword\">this</span>.mode)\n  <span class=\"hljs-keyword\">return</span> {\n    location,\n    route,\n    href,\n    normalizedTo: location,\n    resolved: route\n  }\n}\n\n<span class=\"hljs-function\">function <span class=\"hljs-title\">createHref</span> (<span class=\"hljs-params\"><span class=\"hljs-keyword\">base</span>: <span class=\"hljs-built_in\">string</span>, fullPath: <span class=\"hljs-built_in\">string</span>, mode</span>)</span> {\n  <span class=\"hljs-keyword\">var</span> path = mode === <span class=\"hljs-string\">&apos;hash&apos;</span> ? <span class=\"hljs-string\">&apos;#&apos;</span> + fullPath : fullPath\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">base</span> ? cleanPath(<span class=\"hljs-keyword\">base</span> + <span class=\"hljs-string\">&apos;/&apos;</span> + path) : path\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1043,1079"}},{"content":"<pre data-lines=\"1080,1085\"><code>&#x5b83;&#x5148;&#x89c4;&#x8303;&#x751f;&#x6210;&#x76ee;&#x6807; `location`&#xff0c;&#x518d;&#x6839;&#x636e; `location` &#x548c; `match` &#x901a;&#x8fc7; `this.match` &#x65b9;&#x6cd5;&#x8ba1;&#x7b97;&#x751f;&#x6210;&#x76ee;&#x6807;&#x8def;&#x5f84; `route`&#xff0c;&#x7136;&#x540e;&#x518d;&#x6839;&#x636e; `base`&#x3001;`fullPath` &#x548c; `this.mode` &#x901a;&#x8fc7; `createHref` &#x65b9;&#x6cd5;&#x8ba1;&#x7b97;&#x51fa;&#x6700;&#x7ec8;&#x8df3;&#x8f6c;&#x7684; `href`&#x3002;\n\n&#x89e3;&#x6790;&#x5b8c; `router` &#x83b7;&#x5f97;&#x76ee;&#x6807; `location`&#x3001;`route`&#x3001;`href` &#x540e;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x5bf9; `exactActiveClass` &#x548c; `activeClass` &#x505a;&#x5904;&#x7406;&#xff0c;&#x5f53;&#x914d;&#x7f6e; `exact` &#x4e3a; true &#x7684;&#x65f6;&#x5019;&#xff0c;&#x53ea;&#x6709;&#x5f53;&#x76ee;&#x6807;&#x8def;&#x5f84;&#x548c;&#x5f53;&#x524d;&#x8def;&#x5f84;&#x5b8c;&#x5168;&#x5339;&#x914d;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6dfb;&#x52a0; `exactActiveClass`&#xff1b;&#x800c;&#x5f53;&#x76ee;&#x6807;&#x8def;&#x5f84;&#x5305;&#x542b;&#x5f53;&#x524d;&#x8def;&#x5f84;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6dfb;&#x52a0; `activeClass`&#x3002;\n\n&#x63a5;&#x7740;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x5b88;&#x536b;&#x51fd;&#x6570; &#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1080,1085"}},{"content":"<pre data-lines=\"1086,1118\"><code data-lines=\"1086,1118\"><span class=\"hljs-keyword\">const</span> handler = e =&gt; {\n  <span class=\"hljs-keyword\">if</span> (guardEvent(e)) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.replace) {\n      router.replace(location)\n    } <span class=\"hljs-keyword\">else</span> {\n      router.push(location)\n    }\n  }\n}\n\nfunction guardEvent (e) {\n  <span class=\"hljs-keyword\">if</span> (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) <span class=\"hljs-keyword\">return</span>\n  <span class=\"hljs-keyword\">if</span> (e.defaultPrevented) <span class=\"hljs-keyword\">return</span>\n  <span class=\"hljs-keyword\">if</span> (e.button !== undefined &amp;&amp; e.button !== <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">return</span> \n  <span class=\"hljs-keyword\">if</span> (e.currentTarget &amp;&amp; e.currentTarget.getAttribute) {\n    <span class=\"hljs-keyword\">const</span> target = e.currentTarget.getAttribute(<span class=\"hljs-string\">&apos;target&apos;</span>)\n    <span class=\"hljs-keyword\">if</span> (/\\b_blank\\b/i.test(target)) <span class=\"hljs-keyword\">return</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (e.preventDefault) {\n    e.preventDefault()\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n}\n\n<span class=\"hljs-keyword\">const</span> on = { click: guardEvent }\n  <span class=\"hljs-keyword\">if</span> (Array.isArray(<span class=\"hljs-keyword\">this</span>.event)) {\n    <span class=\"hljs-keyword\">this</span>.event.forEach(e =&gt; { on[e] = handler })\n  } <span class=\"hljs-keyword\">else</span> {\n    on[<span class=\"hljs-keyword\">this</span>.event] = handler\n  } \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1086,1118"}},{"content":"<pre data-lines=\"1119,1120\"><code>&#x6700;&#x7ec8;&#x4f1a;&#x76d1;&#x542c;&#x70b9;&#x51fb;&#x4e8b;&#x4ef6;&#x6216;&#x8005;&#x5176;&#x5b83;&#x53ef;&#x4ee5;&#x901a;&#x8fc7; `prop` &#x4f20;&#x5165;&#x7684;&#x4e8b;&#x4ef6;&#x7c7b;&#x578b;&#xff0c;&#x6267;&#x884c; `hanlder` &#x51fd;&#x6570;&#xff0c;&#x6700;&#x7ec8;&#x6267;&#x884c; `router.push` &#x6216;&#x8005; `router.replace` &#x51fd;&#x6570;&#xff0c;&#x5b83;&#x4eec;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1119,1120"}},{"content":"<pre data-lines=\"1121,1130\"><code data-lines=\"1121,1130\">push (<span class=\"hljs-keyword\">location</span>: RawLocation, onComplete?: <span class=\"hljs-keyword\">Function</span>, onAbort?: <span class=\"hljs-keyword\">Function</span>) {\n  this.history.push(<span class=\"hljs-keyword\">location</span>, onComplete, onAbort)\n}\n\nreplace (<span class=\"hljs-keyword\">location</span>: RawLocation, onComplete?: <span class=\"hljs-keyword\">Function</span>, onAbort?: <span class=\"hljs-keyword\">Function</span>) {\n this.history.replace(<span class=\"hljs-keyword\">location</span>, onComplete, onAbort)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1121,1130"}},{"content":"<pre data-lines=\"1131,1134\"><code>&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x6267;&#x884c;&#x4e86; `history` &#x7684; `push` &#x548c; `replace` &#x65b9;&#x6cd5;&#x505a;&#x8def;&#x7531;&#x8df3;&#x8f6c;&#x3002;\n\n&#x6700;&#x540e;&#x5224;&#x65ad;&#x5f53;&#x524d; `tag` &#x662f;&#x5426;&#x662f; `&lt;a&gt;` &#x6807;&#x7b7e;&#xff0c;`&lt;router-link&gt;` &#x9ed8;&#x8ba4;&#x4f1a;&#x6e32;&#x67d3;&#x6210; `&lt;a&gt;` &#x6807;&#x7b7e;&#xff0c;&#x5f53;&#x7136;&#x6211;&#x4eec;&#x4e5f;&#x53ef;&#x4ee5;&#x4fee;&#x6539; `tag` &#x7684; `prop` &#x6e32;&#x67d3;&#x6210;&#x5176;&#x4ed6;&#x8282;&#x70b9;&#xff0c;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#x4f1a;&#x5c1d;&#x8bd5;&#x627e;&#x5b83;&#x5b50;&#x5143;&#x7d20;&#x7684; `&lt;a&gt;` &#x6807;&#x7b7e;&#xff0c;&#x5982;&#x679c;&#x6709;&#x5219;&#x628a;&#x4e8b;&#x4ef6;&#x7ed1;&#x5b9a;&#x5230; `&lt;a&gt;` &#x6807;&#x7b7e;&#x4e0a;&#x5e76;&#x6dfb;&#x52a0; `href` &#x5c5e;&#x6027;&#xff0c;&#x5426;&#x5219;&#x7ed1;&#x5b9a;&#x5230;&#x5916;&#x5c42;&#x5143;&#x7d20;&#x672c;&#x8eab;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1131,1134"}}],"payload":{"tag":"h2","lines":"723,725"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"1138,1141\"><code>&#x90a3;&#x4e48;&#x81f3;&#x6b64;&#x6211;&#x4eec;&#x628a;&#x8def;&#x7531;&#x7684; `transitionTo` &#x7684;&#x4e3b;&#x4f53;&#x8fc7;&#x7a0b;&#x5206;&#x6790;&#x5b8c;&#x6bd5;&#x4e86;&#xff0c;&#x5176;&#x4ed6;&#x4e00;&#x4e9b;&#x5206;&#x652f;&#x6bd4;&#x5982;&#x91cd;&#x5b9a;&#x5411;&#x3001;&#x522b;&#x540d;&#x3001;&#x6eda;&#x52a8;&#x884c;&#x4e3a;&#x7b49;&#x540c;&#x5b66;&#x4eec;&#x53ef;&#x4ee5;&#x81ea;&#x884c;&#x518d;&#x53bb;&#x5206;&#x6790;&#x3002;\n\n&#x8def;&#x5f84;&#x53d8;&#x5316;&#x662f;&#x8def;&#x7531;&#x4e2d;&#x6700;&#x91cd;&#x8981;&#x7684;&#x529f;&#x80fd;&#xff0c;&#x6211;&#x4eec;&#x8981;&#x8bb0;&#x4f4f;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff1a;&#x8def;&#x7531;&#x59cb;&#x7ec8;&#x4f1a;&#x7ef4;&#x62a4;&#x5f53;&#x524d;&#x7684;&#x7ebf;&#x8def;&#xff0c;&#x8def;&#x7531;&#x5207;&#x6362;&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x628a;&#x5f53;&#x524d;&#x7ebf;&#x8def;&#x5207;&#x6362;&#x5230;&#x76ee;&#x6807;&#x7ebf;&#x8def;&#xff0c;&#x5207;&#x6362;&#x8fc7;&#x7a0b;&#x4e2d;&#x4f1a;&#x6267;&#x884c;&#x4e00;&#x7cfb;&#x5217;&#x7684;&#x5bfc;&#x822a;&#x5b88;&#x536b;&#x94a9;&#x5b50;&#x51fd;&#x6570;&#xff0c;&#x4f1a;&#x66f4;&#x6539; url&#xff0c;&#x540c;&#x6837;&#x4e5f;&#x4f1a;&#x6e32;&#x67d3;&#x5bf9;&#x5e94;&#x7684;&#x7ec4;&#x4ef6;&#xff0c;&#x5207;&#x6362;&#x5b8c;&#x6bd5;&#x540e;&#x4f1a;&#x628a;&#x76ee;&#x6807;&#x7ebf;&#x8def;&#x66f4;&#x65b0;&#x66ff;&#x6362;&#x5f53;&#x524d;&#x7ebf;&#x8def;&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x4f1a;&#x4f5c;&#x4e3a;&#x4e0b;&#x4e00;&#x6b21;&#x7684;&#x8def;&#x5f84;&#x5207;&#x6362;&#x7684;&#x4f9d;&#x636e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1138,1141"}}],"payload":{"tag":"h2","lines":"1135,1137"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
