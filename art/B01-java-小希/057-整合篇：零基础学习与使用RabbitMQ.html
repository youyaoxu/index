<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x6574;&#x5408;&#x7bc7;&#xff1a;&#x96f6;&#x57fa;&#x7840;&#x5b66;&#x4e60;&#x4e0e;&#x4f7f;&#x7528;RabbitMQ","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"5,34\"><code>RabbitMQ\n\nRabbitMQ&#x662f;&#x4f7f;&#x7528;[Erlang](https://so.csdn.net/so/search?q=Erlang&amp;spm=1001.2101.3001.7020)&#x8bed;&#x8a00;&#x6765;&#x7f16;&#x5199;&#x7684;&#x5e76;&#x4e14;RabbitMQ&#x662f;&#x57fa;&#x4e8e;AMQP&#x534f;&#x8bae;&#x7684;&#x3002;Erlang&#x8bed;&#x8a00;&#x5728;&#x6570;&#x636e;&#x4ea4;&#x4e92;&#x65b9;&#x9762;&#x6027;&#x80fd;&#x4f18;&#x79c0;&#xff0c;&#x6709;&#x7740;&#x548c;&#x539f;&#x751f;Socket&#x4e00;&#x6837;&#x7684;&#x5ef6;&#x8fdf;&#xff0c;&#x8fd9;&#x4e5f;&#x662f;RabbitMQ&#x9ad8;&#x6027;&#x80fd;&#x7684;&#x539f;&#x56e0;&#x6240;&#x5728;&#x3002;&#x53ef;&#x8c13;&#x201c;&#x4eba;&#x5982;&#x5176;&#x540d;&#x201d;&#xff0c;RabbitMQ&#x50cf;&#x5154;&#x5b50;&#x4e00;&#x6837;&#x8fc5;&#x901f;&#x3002;RabbitMQ&#x9664;&#x4e86;&#x50cf;&#x5154;&#x5b50;&#x4e00;&#x6837;&#x8dd1;&#x7684;&#x5f88;&#x5feb;&#x4ee5;&#x5916;&#xff0c;&#x8fd8;&#x6709;&#x8fd9;&#x4e9b;&#x7279;&#x70b9;&#xff1a;\n\n*   &#x5f00;&#x6e90;&#x3001;&#x6027;&#x80fd;&#x4f18;&#x79c0;&#xff0c;&#x7a33;&#x5b9a;&#x6027;&#x4fdd;&#x969c;\n*   &#x63d0;&#x4f9b;&#x53ef;&#x9760;&#x6027;&#x6d88;&#x606f;&#x6295;&#x9012;&#x6a21;&#x5f0f;&#x3001;&#x8fd4;&#x56de;&#x6a21;&#x5f0f;\n*   &#x4e0e;Spring AMQP&#x5b8c;&#x7f8e;&#x6574;&#x5408;&#xff0c;API&#x4e30;&#x5bcc;\n*   &#x96c6;&#x7fa4;&#x6a21;&#x5f0f;&#x4e30;&#x5bcc;&#xff0c;&#x8868;&#x8fbe;&#x5f0f;&#x914d;&#x7f6e;&#xff0c;HA&#x6a21;&#x5f0f;&#xff0c;&#x955c;&#x50cf;&#x961f;&#x5217;&#x6a21;&#x578b;\n*   &#x4fdd;&#x8bc1;&#x6570;&#x636e;&#x4e0d;&#x4e22;&#x5931;&#x7684;&#x524d;&#x63d0;&#x505a;&#x5230;&#x9ad8;&#x53ef;&#x9760;&#x6027;&#x3001;&#x53ef;&#x7528;&#x6027;\n\nAMQP&#x534f;&#x8bae;\n\n&#x63d0;&#x5230;RabbitMQ&#xff0c;&#x5c31;&#x4e0d;&#x5f97;&#x4e0d;&#x63d0;AMQP&#x534f;&#x8bae;&#x3002;AMQP&#x534f;&#x8bae;&#x662f;&#x5177;&#x6709;&#x73b0;&#x4ee3;&#x7279;&#x5f81;&#x7684;&#x4e8c;&#x8fdb;&#x5236;&#x534f;&#x8bae;&#x3002;&#x662f;&#x4e00;&#x4e2a;&#x63d0;&#x4f9b;&#x7edf;&#x4e00;&#x6d88;&#x606f;&#x670d;&#x52a1;&#x7684;&#x5e94;&#x7528;&#x5c42;&#x6807;&#x51c6;&#x9ad8;&#x7ea7;&#x6d88;&#x606f;&#x961f;&#x5217;&#x534f;&#x8bae;&#xff0c;&#x662f;&#x5e94;&#x7528;&#x5c42;&#x534f;&#x8bae;&#x7684;&#x4e00;&#x4e2a;&#x5f00;&#x653e;&#x6807;&#x51c6;&#xff0c;&#x4e3a;&#x9762;&#x5411;&#x6d88;&#x606f;&#x7684;&#x4e2d;&#x95f4;&#x4ef6;&#x8bbe;&#x8ba1;&#x3002;&#x5148;&#x4e86;&#x89e3;&#x4e00;&#x4e0b;AMQP&#x534f;&#x8bae;&#x4e2d;&#x95f4;&#x7684;&#x51e0;&#x4e2a;&#x91cd;&#x8981;&#x6982;&#x5ff5;&#xff1a;\n\n*   Server&#xff1a;&#x63a5;&#x6536;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x8fde;&#x63a5;&#xff0c;&#x5b9e;&#x73b0;AMQP&#x5b9e;&#x4f53;&#x670d;&#x52a1;&#x3002;\n*   Connection&#xff1a;&#x8fde;&#x63a5;&#xff0c;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e0e;Server&#x7684;&#x7f51;&#x7edc;&#x8fde;&#x63a5;&#xff0c;TCP&#x8fde;&#x63a5;&#x3002;\n*   Channel&#xff1a;&#x4fe1;&#x9053;&#xff0c;&#x6d88;&#x606f;&#x8bfb;&#x5199;&#x7b49;&#x64cd;&#x4f5c;&#x5728;&#x4fe1;&#x9053;&#x4e2d;&#x8fdb;&#x884c;&#x3002;&#x5ba2;&#x6237;&#x7aef;&#x53ef;&#x4ee5;&#x5efa;&#x7acb;&#x591a;&#x4e2a;&#x4fe1;&#x9053;&#xff0c;&#x6bcf;&#x4e2a;&#x4fe1;&#x9053;&#x4ee3;&#x8868;&#x4e00;&#x4e2a;&#x4f1a;&#x8bdd;&#x4efb;&#x52a1;&#x3002;\n*   Message&#xff1a;&#x6d88;&#x606f;&#xff0c;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x548c;&#x670d;&#x52a1;&#x5668;&#x4e4b;&#x95f4;&#x4f20;&#x9001;&#x7684;&#x6570;&#x636e;&#xff0c;&#x6d88;&#x606f;&#x53ef;&#x4ee5;&#x975e;&#x5e38;&#x7b80;&#x5355;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5f88;&#x590d;&#x6742;&#x3002;&#x6709;Properties&#x548c;Body&#x7ec4;&#x6210;&#x3002;Properties&#x4e3a;&#x5916;&#x5305;&#x88c5;&#xff0c;&#x53ef;&#x4ee5;&#x5bf9;&#x6d88;&#x606f;&#x8fdb;&#x884c;&#x4fee;&#x9970;&#xff0c;&#x6bd4;&#x5982;&#x6d88;&#x606f;&#x7684;&#x4f18;&#x5148;&#x7ea7;&#x3001;&#x5ef6;&#x8fdf;&#x7b49;&#x9ad8;&#x7ea7;&#x7279;&#x6027;&#xff1b;Body&#x5c31;&#x662f;&#x6d88;&#x606f;&#x4f53;&#x5185;&#x5bb9;&#x3002;\n*   Virtual Host&#xff1a;&#x865a;&#x62df;&#x4e3b;&#x673a;&#xff0c;&#x7528;&#x4e8e;&#x903b;&#x8f91;&#x9694;&#x79bb;&#x3002;&#x4e00;&#x4e2a;&#x865a;&#x62df;&#x4e3b;&#x673a;&#x91cc;&#x9762;&#x53ef;&#x4ee5;&#x6709;&#x82e5;&#x5e72;&#x4e2a;Exchange&#x548c;Queue&#xff0c;&#x540c;&#x4e00;&#x4e2a;&#x865a;&#x62df;&#x4e3b;&#x673a;&#x91cc;&#x9762;&#x4e0d;&#x80fd;&#x6709;&#x76f8;&#x540c;&#x540d;&#x79f0;&#x7684;Exchange&#x6216;Queue&#x3002;\n*   Exchange&#xff1a;&#x4ea4;&#x6362;&#x5668;&#xff0c;&#x63a5;&#x6536;&#x6d88;&#x606f;&#xff0c;&#x6309;&#x7167;&#x8def;&#x7531;&#x89c4;&#x5219;&#x5c06;&#x6d88;&#x606f;&#x8def;&#x7531;&#x5230;&#x4e00;&#x4e2a;&#x6216;&#x8005;&#x591a;&#x4e2a;&#x961f;&#x5217;&#x3002;&#x5982;&#x679c;&#x8def;&#x7531;&#x4e0d;&#x5230;&#xff0c;&#x6216;&#x8005;&#x8fd4;&#x56de;&#x7ed9;&#x751f;&#x4ea7;&#x8005;&#xff0c;&#x6216;&#x8005;&#x76f4;&#x63a5;&#x4e22;&#x5f03;&#x3002;RabbitMQ&#x5e38;&#x7528;&#x7684;&#x4ea4;&#x6362;&#x5668;&#x5e38;&#x7528;&#x7c7b;&#x578b;&#x6709;direct&#x3001;topic&#x3001;fanout&#x3001;headers&#x56db;&#x79cd;&#xff0c;&#x540e;&#x9762;&#x8be6;&#x7ec6;&#x4ecb;&#x7ecd;&#x3002;\n*   Binding&#xff1a;&#x7ed1;&#x5b9a;&#xff0c;&#x4ea4;&#x6362;&#x5668;&#x548c;&#x6d88;&#x606f;&#x961f;&#x5217;&#x4e4b;&#x95f4;&#x7684;&#x865a;&#x62df;&#x8fde;&#x63a5;&#xff0c;&#x7ed1;&#x5b9a;&#x4e2d;&#x53ef;&#x4ee5;&#x5305;&#x542b;&#x4e00;&#x4e2a;&#x6216;&#x8005;&#x591a;&#x4e2a;RoutingKey&#x3002;\n*   RoutingKey&#xff1a;&#x8def;&#x7531;&#x952e;&#xff0c;&#x751f;&#x4ea7;&#x8005;&#x5c06;&#x6d88;&#x606f;&#x53d1;&#x9001;&#x7ed9;&#x4ea4;&#x6362;&#x5668;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x53d1;&#x9001;&#x4e00;&#x4e2a;RoutingKey&#xff0c;&#x7528;&#x6765;&#x6307;&#x5b9a;&#x8def;&#x7531;&#x89c4;&#x5219;&#xff0c;&#x8fd9;&#x6837;&#x4ea4;&#x6362;&#x5668;&#x5c31;&#x77e5;&#x9053;&#x628a;&#x6d88;&#x606f;&#x53d1;&#x9001;&#x5230;&#x54ea;&#x4e2a;&#x961f;&#x5217;&#x3002;&#x8def;&#x7531;&#x952e;&#x901a;&#x5e38;&#x4e3a;&#x4e00;&#x4e2a;&#x201c;.&#x201d;&#x5206;&#x5272;&#x7684;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4f8b;&#x5982;&#x201c;com.rabbitmq&#x201d;&#x3002;\n*   Queue&#xff1a;&#x6d88;&#x606f;&#x961f;&#x5217;&#xff0c;&#x7528;&#x6765;&#x4fdd;&#x5b58;&#x6d88;&#x606f;&#xff0c;&#x4f9b;&#x6d88;&#x8d39;&#x8005;&#x6d88;&#x8d39;&#x3002;\n\n&#x6211;&#x4eec;&#x5b8c;&#x5168;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x4f7f;&#x7528; Connection &#x5c31;&#x80fd;&#x5b8c;&#x6210;&#x4fe1;&#x9053;&#x7684;&#x5de5;&#x4f5c;&#xff0c;&#x4e3a;&#x4ec0;&#x4e48;&#x8fd8;&#x8981;&#x5f15;&#x5165;&#x4fe1;&#x9053;&#x5462;?\n\n&#x8bd5;&#x60f3;&#x8fd9;&#x6837;&#x4e00;&#x4e2a;&#x573a;&#x666f;&#xff0c; &#x4e00;&#x4e2a;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e2d;&#x6709;&#x5f88;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x9700;&#x8981;&#x4ece; RabbitMQ &#x4e2d;&#x6d88;&#x8d39;&#x6d88;&#x606f;&#xff0c;&#x6216;&#x8005;&#x751f;&#x4ea7;&#x6d88;&#x606f;&#xff0c;&#x90a3;&#x4e48;&#x5fc5;&#x7136;&#x9700;&#x8981;&#x5efa;&#x7acb;&#x5f88;&#x591a;&#x4e2a; Connection&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bb8;&#x591a;&#x4e2a; TCP &#x8fde;&#x63a5;&#x3002;&#x7136;&#x800c;&#x5bf9;&#x4e8e;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x800c;&#x8a00;&#xff0c;&#x5efa;&#x7acb;&#x548c;&#x9500;&#x6bc1; TCP &#x8fde;&#x63a5;&#x662f;&#x975e;&#x5e38;&#x6602;&#x8d35;&#x7684;&#x5f00;&#x9500;&#xff0c;&#x5982;&#x679c;&#x9047;&#x5230;&#x4f7f;&#x7528;&#x9ad8;&#x5cf0;&#xff0c;&#x6027;&#x80fd;&#x74f6;&#x9888;&#x4e5f;&#x968f;&#x4e4b;&#x663e;&#x73b0;&#x3002; RabbitMQ &#x91c7;&#x7528; TCP &#x8fde;&#x63a5;&#x590d;&#x7528;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x4e0d;&#x4ec5;&#x53ef;&#x4ee5;&#x51cf;&#x5c11;&#x6027;&#x80fd;&#x5f00;&#x9500;&#xff0c;&#x540c;&#x65f6;&#x4e5f;&#x4fbf;&#x4e8e;&#x7ba1;&#x7406; &#x3002;\n\n&#x4e0b;&#x56fe;&#x662f;AMQP&#x7684;&#x534f;&#x8bae;&#x6a21;&#x578b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5,34"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0f3465b92b95cb2c6671151fb4fb5a95.png\" alt>","children":[],"payload":{"tag":"img","lines":"35,36"}},{"content":"<pre data-lines=\"37,42\"><code>&#x6b63;&#x5982;&#x56fe;&#x4e2d;&#x6240;&#x770b;&#x5230;&#x7684;&#xff0c;AMQP&#x534f;&#x8bae;&#x6a21;&#x578b;&#x6709;&#x4e09;&#x90e8;&#x5206;&#x7ec4;&#x6210;&#xff1a;&#x751f;&#x4ea7;&#x8005;&#x3001;&#x6d88;&#x8d39;&#x8005;&#x548c;&#x670d;&#x52a1;&#x7aef;&#x3002;\n\n&#x751f;&#x4ea7;&#x8005;&#x662f;&#x6295;&#x9012;&#x6d88;&#x606f;&#x7684;&#x4e00;&#x65b9;&#xff0c;&#x9996;&#x5148;&#x8fde;&#x63a5;&#x5230;Server&#xff0c;&#x5efa;&#x7acb;&#x4e00;&#x4e2a;&#x8fde;&#x63a5;&#xff0c;&#x5f00;&#x542f;&#x4e00;&#x4e2a;&#x4fe1;&#x9053;&#xff1b;&#x7136;&#x540e;&#x751f;&#x4ea7;&#x8005;&#x58f0;&#x660e;&#x4ea4;&#x6362;&#x5668;&#x548c;&#x961f;&#x5217;&#xff0c;&#x8bbe;&#x7f6e;&#x76f8;&#x5173;&#x5c5e;&#x6027;&#xff0c;&#x5e76;&#x901a;&#x8fc7;&#x8def;&#x7531;&#x952e;&#x5c06;&#x4ea4;&#x6362;&#x5668;&#x548c;&#x961f;&#x5217;&#x8fdb;&#x884c;&#x7ed1;&#x5b9a;&#x3002;&#x540c;&#x7406;&#xff0c;&#x6d88;&#x8d39;&#x8005;&#x4e5f;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x5efa;&#x7acb;&#x8fde;&#x63a5;&#xff0c;&#x5f00;&#x542f;&#x4fe1;&#x9053;&#x7b49;&#x64cd;&#x4f5c;&#xff0c;&#x4fbf;&#x4e8e;&#x63a5;&#x6536;&#x6d88;&#x606f;&#x3002;&#x63a5;&#x7740;&#x751f;&#x4ea7;&#x8005;&#x5c31;&#x53ef;&#x4ee5;&#x53d1;&#x9001;&#x6d88;&#x606f;&#xff0c;&#x53d1;&#x9001;&#x5230;&#x670d;&#x52a1;&#x7aef;&#x4e2d;&#x7684;&#x865a;&#x62df;&#x4e3b;&#x673a;&#xff0c;&#x865a;&#x62df;&#x4e3b;&#x673a;&#x4e2d;&#x7684;&#x4ea4;&#x6362;&#x5668;&#x6839;&#x636e;&#x8def;&#x7531;&#x952e;&#x9009;&#x62e9;&#x8def;&#x7531;&#x89c4;&#x5219;&#xff0c;&#x7136;&#x540e;&#x53d1;&#x9001;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x4e2d;&#xff0c;&#x8fd9;&#x6837;&#x8ba2;&#x9605;&#x4e86;&#x6d88;&#x606f;&#x961f;&#x5217;&#x7684;&#x6d88;&#x8d39;&#x8005;&#x5c31;&#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x5230;&#x6d88;&#x606f;&#xff0c;&#x8fdb;&#x884c;&#x6d88;&#x8d39;&#x3002;&#x6700;&#x540e;&#x8fd8;&#x8981;&#x5173;&#x95ed;&#x4fe1;&#x9053;&#x548c;&#x8fde;&#x63a5;&#x3002;\n\nRabbitMQ&#x662f;&#x57fa;&#x4e8e;AMQP&#x534f;&#x8bae;&#x5b9e;&#x73b0;&#x7684;&#xff0c;&#x5176;&#x7ed3;&#x6784;&#x5982;&#x4e0b;&#x56fe;&#x6240;&#x793a;&#xff0c;&#x548c;AMQP&#x534f;&#x8bae;&#x7b80;&#x76f4;&#x5c31;&#x662f;&#x4e00;&#x6a21;&#x4e00;&#x6837;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"37,42"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/f0e815d6ac6f7759933f926fd0edcda4.png\" alt>","children":[],"payload":{"tag":"img","lines":"43,44"}},{"content":"<pre data-lines=\"45,52\"><code>&#x5e38;&#x7528;&#x4ea4;&#x6362;&#x5668;\n\nRabbitMQ&#x5e38;&#x7528;&#x7684;&#x4ea4;&#x6362;&#x5668;&#x7c7b;&#x578b;&#x6709;direct&#x3001;topic&#x3001;fanout&#x3001;headers&#x56db;&#x79cd;&#x3002;\n\n**Direct Exchange**\n\n&#x8be5;&#x7c7b;&#x578b;&#x7684;&#x4ea4;&#x6362;&#x5668;&#x5c06;&#x6240;&#x6709;&#x53d1;&#x9001;&#x5230;&#x8be5;&#x4ea4;&#x6362;&#x5668;&#x7684;&#x6d88;&#x606f;&#x88ab;&#x8f6c;&#x53d1;&#x5230;RoutingKey&#x6307;&#x5b9a;&#x7684;&#x961f;&#x5217;&#x4e2d;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x8def;&#x7531;&#x5230;BindingKey&#x548c;RoutingKey&#x5b8c;&#x5168;&#x5339;&#x914d;&#x7684;&#x961f;&#x5217;&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"45,52"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/db35d701c44a86e4c54683da8865b0a2.png\" alt>","children":[],"payload":{"tag":"img","lines":"53,54"}},{"content":"<pre data-lines=\"55,58\"><code>**Topic Exchange**\n\n&#x8be5;&#x7c7b;&#x578b;&#x7684;&#x4ea4;&#x6362;&#x5668;&#x5c06;&#x6240;&#x6709;&#x53d1;&#x9001;&#x5230;Topic Exchange&#x7684;&#x6d88;&#x606f;&#x88ab;&#x8f6c;&#x53d1;&#x5230;&#x6240;&#x6709;RoutingKey&#x4e2d;&#x6307;&#x5b9a;&#x7684;Topic&#x7684;&#x961f;&#x5217;&#x4e0a;&#x9762;&#x3002;Exchange&#x5c06;RoutingKey&#x548c;&#x67d0;Topic&#x8fdb;&#x884c;&#x6a21;&#x7cca;&#x5339;&#x914d;&#xff0c;&#x5176;&#x4e2d;&#x201c;\\*&#x201d;&#x7528;&#x6765;&#x5339;&#x914d;&#x4e00;&#x4e2a;&#x8bcd;&#xff0c;&#x201c;#&#x201d;&#x7528;&#x4e8e;&#x5339;&#x914d;&#x4e00;&#x4e2a;&#x6216;&#x8005;&#x591a;&#x4e2a;&#x8bcd;&#x3002;&#x4f8b;&#x5982;&#x201c;com.#&#x201d;&#x80fd;&#x5339;&#x914d;&#x5230;&#x201c;com.rabbitmq.oa&#x201d;&#x548c;&#x201c;com.rabbitmq&#x201d;&#xff1b;&#x800c;&quot;login.\\*&quot;&#x53ea;&#x80fd;&#x5339;&#x914d;&#x5230;&#x201c;com.rabbitmq&#x201d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,58"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a0274f6fdf939042d2f87380ed5070fe.png\" alt>","children":[],"payload":{"tag":"img","lines":"59,60"}},{"content":"<pre data-lines=\"61,64\"><code>**Fanout Exchange**\n\n&#x8be5;&#x7c7b;&#x578b;&#x4e0d;&#x5904;&#x7406;&#x8def;&#x7531;&#x952e;&#xff0c;&#x4f1a;&#x628a;&#x6240;&#x6709;&#x53d1;&#x9001;&#x5230;&#x4ea4;&#x6362;&#x5668;&#x7684;&#x6d88;&#x606f;&#x8def;&#x7531;&#x5230;&#x6240;&#x6709;&#x7ed1;&#x5b9a;&#x7684;&#x961f;&#x5217;&#x4e2d;&#x3002;&#x4f18;&#x70b9;&#x662f;&#x8f6c;&#x53d1;&#x6d88;&#x606f;&#x6700;&#x5feb;&#xff0c;&#x6027;&#x80fd;&#x6700;&#x597d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"61,64"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/10106aa286159405cf2baf9c560a56eb.png\" alt>","children":[],"payload":{"tag":"img","lines":"65,66"}},{"content":"<pre data-lines=\"67,70\"><code>**Headers Exchange**\n\n&#x8be5;&#x7c7b;&#x578b;&#x7684;&#x4ea4;&#x6362;&#x5668;&#x4e0d;&#x4f9d;&#x8d56;&#x8def;&#x7531;&#x89c4;&#x5219;&#x6765;&#x8def;&#x7531;&#x6d88;&#x606f;&#xff0c;&#x800c;&#x662f;&#x6839;&#x636e;&#x6d88;&#x606f;&#x5185;&#x5bb9;&#x4e2d;&#x7684;headers&#x5c5e;&#x6027;&#x8fdb;&#x884c;&#x5339;&#x914d;&#x3002;headers&#x7c7b;&#x578b;&#x4ea4;&#x6362;&#x5668;&#x6027;&#x80fd;&#x5dee;&#xff0c;&#x5728;&#x5b9e;&#x9645;&#x4e2d;&#x5e76;&#x4e0d;&#x5e38;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"67,70"}}],"payload":{"tag":"h2","lines":"2,4"}},{"content":"2.1&#x3001;&#x5b89;&#x88c5;Erlang","children":[{"content":"<pre data-lines=\"74,77\"><code>&#x4e0b;&#x8f7d;&#x5730;&#x5740;&#xff1a;https://www.erlang.org/downloads\n\n&gt; &#x6e29;&#x99a8;&#x63d0;&#x793a;&#xff1a;&#x5982;&#x679c;&#x4e0b;&#x8f7d;&#x4e0d;&#x4e0b;&#x6765;&#xff0c;&#x914d;&#x5957;&#x8d44;&#x6599;&#x4e2d;&#x5df2;&#x7ecf;&#x5e2e;&#x4f60;&#x90fd;&#x4e0b;&#x8f7d;&#x597d;&#x4e86;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"74,77"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/7da6eed5289a0ab2bbc20906919e5069.png\" alt>","children":[],"payload":{"tag":"img","lines":"78,79"}},{"content":"<pre data-lines=\"80,83\"><code>&#x5b89;&#x88c5;&#x6b65;&#x9aa4;&#xff1a;&#x6253;&#x5f00;&#x5b89;&#x88c5;&#x5305;&#xff0c;&#x9ed8;&#x8ba4;&#x4e0b;&#x4e00;&#x6b65;&#x5373;&#x53ef;&#x3002;\n\n&#x73af;&#x5883;&#x53d8;&#x91cf;&#xff1a;&#x65b0;&#x5efa;ERLANG\\_HOME&#xff0c;&#x53d8;&#x91cf;&#x503c;&#x4e3a;&#x5b89;&#x88c5;&#x76ee;&#x5f55;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"80,83"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b8b2829cee5bceba4f8a2a471c12ccec.png\" alt>","children":[],"payload":{"tag":"img","lines":"84,85"}},{"content":"<pre data-lines=\"86,87\"><code>&#x4fee;&#x6539; Path &#x73af;&#x5883;&#x53d8;&#x91cf;&#xff0c;&#x65b0;&#x589e;&#x4e00;&#x6761; `%ERLANG_HOME%\\bin` &#xff0c;&#x5982;&#x4e0b;&#x6240;&#x793a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"86,87"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/bb9edbbdc4494b86b889989d9bae6d2d.png\" alt>","children":[],"payload":{"tag":"img","lines":"88,89"}},{"content":"<pre data-lines=\"90,91\"><code>&#x6d4b;&#x8bd5;&#x662f;&#x5426;&#x5b89;&#x88c5;&#x6210;&#x529f;&#xff0c;&#x8bf7;&#x91cd;&#x65b0;&#x6253;&#x5f00;&#x4e00;&#x4e2a; cmd &#x547d;&#x4ee4;&#x884c;&#x7a97;&#x53e3;&#xff0c;&#x8f93;&#x5165; `erl`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"90,91"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0e85be886474d6e17e788cc14c551f41.png\" alt>","children":[],"payload":{"tag":"img","lines":"92,93"}}],"payload":{"tag":"h2","lines":"71,73"}},{"content":"2.2&#x3001;&#x5b89;&#x88c5;RabbitMQ","children":[{"content":"<pre data-lines=\"97,108\"><code>&#x4e0b;&#x8f7d;&#x5730;&#x5740;&#x7684;&#x9996;&#x9875;&#xff1a;https://www.rabbitmq.com/download.html\n\n&#x5b89;&#x88c5;&#x7248;&#x4e0b;&#x8f7d;&#x5730;&#x5740;&#xff1a;https://www.rabbitmq.com/install-windows.html\n\n&#x89e3;&#x538b;&#x7248;&#x4e0b;&#x8f7d;&#x5730;&#x5740;&#xff1a;https://www.rabbitmq.com/install-windows-manual.html\n\n&#x5c06; [rabbitmq-server-windows-3.8.9.zip](https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.9/rabbitmq-server-windows-3.8.9.zip) &#x89e3;&#x538b;&#x5230; `C:\\DevTools\\`\n\n![](https://img-blog.csdnimg.cn/img_convert/5db15989428e9d34cb73ce61e35d4836.png)\n\n&#x73af;&#x5883;&#x53d8;&#x91cf;&#xff1a;&#x65b0;&#x5efa;RABBITMQ\\_SERVER&#xff0c;&#x53d8;&#x91cf;&#x503c;&#x4e3a;&#x89e3;&#x538b;&#x540e;&#x76ee;&#x5f55;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"97,108"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/b512a70c35aed0073066d9985eb84b74.png\" alt>","children":[],"payload":{"tag":"img","lines":"109,110"}},{"content":"<pre data-lines=\"111,112\"><code>&#x4fee;&#x6539; Path &#x73af;&#x5883;&#x53d8;&#x91cf;&#xff0c;&#x65b0;&#x589e;&#x4e00;&#x6761; `%RABBITMQ_SERVER%\\sbin` &#xff0c;&#x5982;&#x4e0b;&#x6240;&#x793a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"111,112"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/8cc56db8e4604b2e4b1aec51461d7801.png\" alt>","children":[],"payload":{"tag":"img","lines":"113,114"}},{"content":"<pre data-lines=\"115,116\"><code>&#x5b89;&#x88c5;RabbitMQ&#x63a7;&#x5236;&#x53f0;&#xff0c;&#x8bf7;&#x5230; `C:\\DevTools\\rabbitmq_server-3.8.9\\sbin` &#x76ee;&#x5f55;&#x4e0b;&#xff0c;&#x8f93;&#x5165;&#x547d;&#x4ee4; `rabbitmq-plugins enable rabbitmq_management`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"115,116"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/c441211695b9e962f2d1a34d8fd1f60b.png\" alt>","children":[],"payload":{"tag":"img","lines":"117,118"}},{"content":"<pre data-lines=\"119,120\"><code>&#x542f;&#x52a8;RabbitMQ&#x670d;&#x52a1;&#xff0c;&#x8f93;&#x5165;&#x547d;&#x4ee4;&#xff1a;`rabbitmq-server.bat`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"119,120"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/d5bb1b4332de10715b0d36bb5a654b50.png\" alt>","children":[],"payload":{"tag":"img","lines":"121,122"}},{"content":"<pre data-lines=\"123,124\"><code>&#x542f;&#x52a8;&#x6210;&#x529f;&#x540e;&#xff0c;&#x5982;&#x4e0b;&#x56fe;&#x6240;&#x793a;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"123,124"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/9695bc13f5d7b32841c205b47af8af8d.png\" alt>","children":[],"payload":{"tag":"img","lines":"125,126"}},{"content":"<pre data-lines=\"127,128\"><code>Rabbitmq&#x542f;&#x52a8;&#x6210;&#x529f;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4e2d;[http://localhost:15672](http://localhost:15672/)&#xff0c;&#x767b;&#x5f55;&#x8d26;&#x6237;&#xff1a;guest&#xff0c;&#x767b;&#x5f55;&#x5bc6;&#x7801;&#xff1a;guest\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"127,128"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/2fb999c03e18fda48267ba513d892809.png\" alt>","children":[],"payload":{"tag":"img","lines":"129,130"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/37d430bd1100aa44ab3545be335435e2.png\" alt>","children":[],"payload":{"tag":"img","lines":"131,132"}}],"payload":{"tag":"h2","lines":"94,96"}},{"content":"3.1&#x3001;&#x5355;&#x64ad;&#x6a21;&#x5f0f;","children":[{"content":"3.1.1&#x3001;&#x6d88;&#x606f;&#x751f;&#x4ea7;&#x8005;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ef914db946fce64d7641e12490ce00c3.png\" alt>","children":[],"payload":{"tag":"img","lines":"140,141"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/d46dc386126b6b187afc14fc3395eb8d.png\" alt>","children":[],"payload":{"tag":"img","lines":"142,143"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ee5c3e15d852094edd86d45b0ece7d97.png\" alt>","children":[],"payload":{"tag":"img","lines":"144,145"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/f77e1d37d4bd3eff74d5ecd93caaddb7.png\" alt>","children":[],"payload":{"tag":"img","lines":"146,147"}},{"content":"<pre data-lines=\"148,149\"><code>&#x7f16;&#x5199;&#x914d;&#x7f6e;&#x4fe1;&#x606f;&#xff1a;application.yaml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"148,149"}},{"content":"<pre data-lines=\"150,159\"><code class=\"language-yaml\"><span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">rabbitmq:</span>\n    <span class=\"hljs-attr\">host:</span> <span class=\"hljs-string\">localhost</span>\n    <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">5672</span>\n    <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">guest</span>\n    <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">guest</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,159"}},{"content":"<pre data-lines=\"160,163\"><code>&#x7f16;&#x5199;&#x914d;&#x7f6e;&#x7c7b;&#xff1a;com.caochenlei.integrationrabbitmqproducer.config.DirectConfig\n\n*   &#x914d;&#x7f6e;&#x4e00;&#x4e2a;q.direct&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x5e76;&#x7ed1;&#x5b9a;&#x5728;e.direct&#x4ea4;&#x6362;&#x673a;&#x4e0a;&#x3002;&#xff08;&#x4ea4;&#x6362;&#x673a;&#x7684;&#x5339;&#x914d;&#x89c4;&#x5219;&#x4e3a;rk.direct&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"160,163"}},{"content":"<pre data-lines=\"164,187\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DirectConfig</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Queue <span class=\"hljs-title function_\">directQueue</span><span class=\"hljs-params\">()</span> {\n        \n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>(<span class=\"hljs-string\">&quot;q.direct&quot;</span>, <span class=\"hljs-literal\">false</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> DirectExchange <span class=\"hljs-title function_\">directExchange</span><span class=\"hljs-params\">()</span> {\n        \n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DirectExchange</span>(<span class=\"hljs-string\">&quot;e.direct&quot;</span>, <span class=\"hljs-literal\">false</span>, <span class=\"hljs-literal\">false</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Binding <span class=\"hljs-title function_\">directBinding</span><span class=\"hljs-params\">(Queue directQueue, DirectExchange directExchange)</span> {\n        \n        <span class=\"hljs-keyword\">return</span> BindingBuilder.bind(directQueue).to(directExchange).with(<span class=\"hljs-string\">&quot;rk.direct&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"164,187"}},{"content":"<pre data-lines=\"188,191\"><code>&#x7f16;&#x5199;&#x751f;&#x4ea7;&#x8005;&#xff1a;com.caochenlei.integrationrabbitmqproducer.bean.DirectProducer\n\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;send()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;e.direct&#x4ea4;&#x6362;&#x673a;&#x4e14;routingKey&#x4e3a;rk.direct\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"188,191"}},{"content":"<pre data-lines=\"192,204\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DirectProducer</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AmqpTemplate amqpTemplate;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">send</span><span class=\"hljs-params\">(String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;e.direct&quot;</span>, <span class=\"hljs-string\">&quot;rk.direct&quot;</span>, message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"192,204"}},{"content":"<pre data-lines=\"205,206\"><code>&#x6d4b;&#x8bd5;&#x751f;&#x4ea7;&#x8005;&#xff1a;com.caochenlei.integrationrabbitmqproducer.IntegrationRabbitmqProducerApplicationTests\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"205,206"}},{"content":"<pre data-lines=\"207,220\"><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootTest</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IntegrationRabbitmqProducerApplicationTests</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> DirectProducer directProducer;\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testDirectSend</span><span class=\"hljs-params\">()</span> {\n        directProducer.send(<span class=\"hljs-string\">&quot;&#x5f20;&#x4e09;&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"207,220"}},{"content":"<pre data-lines=\"221,222\"><code>&#x67e5;&#x770b;&#x961f;&#x5217;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"221,222"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/f2495848f68e6a7ae1a4ff33717a0592.png\" alt>","children":[],"payload":{"tag":"img","lines":"223,224"}},{"content":"<pre data-lines=\"225,226\"><code>&#x67e5;&#x770b;&#x4ea4;&#x6362;&#x673a;&#xff1a;http://localhost:15672/#/exchanges\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"225,226"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a5d8e58f9d163cf5399c58b757b10ebb.png\" alt>","children":[],"payload":{"tag":"img","lines":"227,228"}},{"content":"<pre data-lines=\"229,230\"><code>&#x67e5;&#x770b;&#x7ed1;&#x5b9a;&#xff1a;http://localhost:15672/#/exchanges/%2F/e.direct\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"229,230"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/cf2da7d17aeb925921eaab60e127b5c9.png\" alt>","children":[],"payload":{"tag":"img","lines":"231,232"}}],"payload":{"tag":"h3","lines":"138,139"}},{"content":"3.1.2&#x3001;&#x6d88;&#x606f;&#x6d88;&#x8d39;&#x8005;","children":[{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/a05d3e66a97821e02c7fa0a774cdd5c6.png\" alt>","children":[],"payload":{"tag":"img","lines":"235,236"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/bcbc5ad5278193a6bf0ae40e837ed411.png\" alt>","children":[],"payload":{"tag":"img","lines":"237,238"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/df1e974c3d3bf39c2e64c4331f6cc69c.png\" alt>","children":[],"payload":{"tag":"img","lines":"239,240"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/8409eb00e15082d1cf3df8b455fc1283.png\" alt>","children":[],"payload":{"tag":"img","lines":"241,242"}},{"content":"<pre data-lines=\"243,244\"><code>&#x7f16;&#x5199;&#x914d;&#x7f6e;&#x4fe1;&#x606f;&#xff1a;application.yaml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"243,244"}},{"content":"<pre data-lines=\"245,254\"><code class=\"language-yaml\"><span class=\"hljs-attr\">spring:</span>\n  <span class=\"hljs-attr\">rabbitmq:</span>\n    <span class=\"hljs-attr\">host:</span> <span class=\"hljs-string\">localhost</span>\n    <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">5672</span>\n    <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">guest</span>\n    <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">guest</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"245,254"}},{"content":"<pre data-lines=\"255,258\"><code>&#x7f16;&#x5199;&#x6d88;&#x8d39;&#x8005;&#xff1a;com.caochenlei.integrationrabbitmqconsumer.bean.DirectConsumer\n\n*   &#x6dfb;&#x52a0;receive()&#x65b9;&#x6cd5;&#xff0c;&#x76d1;&#x542c;&#x961f;&#x5217;&#x540d;&#x79f0;&#x4e3a;q.direct&#x7684;&#x961f;&#x5217;&#x6d88;&#x606f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"255,258"}},{"content":"<pre data-lines=\"259,269\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">DirectConsumer</span> {\n    <span class=\"hljs-meta\">@RabbitListener(queues = &quot;q.direct&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">receive</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(<span class=\"hljs-string\">&quot;&#x63a5;&#x6536;&#x6d88;&#x606f;&#xff1a;&quot;</span> + message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"259,269"}},{"content":"<pre data-lines=\"270,271\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x8fd9;&#x4e2a;&#x5de5;&#x7a0b;&#xff0c;&#x7136;&#x540e;&#x8fdb;&#x884c;&#x89c2;&#x5bdf;&#x7f51;&#x9875;&#x961f;&#x5217;&#x548c;&#x63a7;&#x5236;&#x53f0;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"270,271"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/35351022e6c0e6cd0a6713413284f08a.png\" alt>","children":[],"payload":{"tag":"img","lines":"272,273"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/3b83aaf1e19f007c9af4667489c5743e.png\" alt>","children":[],"payload":{"tag":"img","lines":"274,275"}}],"payload":{"tag":"h3","lines":"233,234"}}],"payload":{"tag":"h2","lines":"133,135"}},{"content":"3.2&#x3001;&#x4e3b;&#x9898;&#x6a21;&#x5f0f;","children":[{"content":"3.2.1&#x3001;&#x6d88;&#x606f;&#x751f;&#x4ea7;&#x8005;","children":[{"content":"<pre data-lines=\"283,287\"><code>com.caochenlei.integrationrabbitmqproducer.config.TopicConfig\n\n*   &#x914d;&#x7f6e;&#x4e00;&#x4e2a;api.core&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x5e76;&#x7ed1;&#x5b9a;&#x5728;coreExchange&#x4ea4;&#x6362;&#x673a;&#x4e0a;&#x3002;&#xff08;&#x4ea4;&#x6362;&#x673a;&#x7684;&#x5339;&#x914d;&#x89c4;&#x5219;&#x4e3a;api.core.\\*&#xff09;\n*   &#x914d;&#x7f6e;&#x4e00;&#x4e2a;api.payment&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x5e76;&#x7ed1;&#x5b9a;&#x5728;paymentExchange&#x4ea4;&#x6362;&#x673a;&#x4e0a;&#x3002;&#xff08;&#x4ea4;&#x6362;&#x673a;&#x7684;&#x5339;&#x914d;&#x89c4;&#x5219;&#x4e3a;api.payment.#&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"283,287"}},{"content":"<pre data-lines=\"288,323\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TopicConfig</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Queue <span class=\"hljs-title function_\">coreQueue</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>(<span class=\"hljs-string\">&quot;api.core&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Queue <span class=\"hljs-title function_\">paymentQueue</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>(<span class=\"hljs-string\">&quot;api.payment&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TopicExchange <span class=\"hljs-title function_\">coreExchange</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TopicExchange</span>(<span class=\"hljs-string\">&quot;coreExchange&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> TopicExchange <span class=\"hljs-title function_\">paymentExchange</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TopicExchange</span>(<span class=\"hljs-string\">&quot;paymentExchange&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Binding <span class=\"hljs-title function_\">bindingCoreExchange</span><span class=\"hljs-params\">(Queue coreQueue, TopicExchange coreExchange)</span> {\n        <span class=\"hljs-keyword\">return</span> BindingBuilder.bind(coreQueue).to(coreExchange).with(<span class=\"hljs-string\">&quot;api.core.*&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Binding <span class=\"hljs-title function_\">bindingPaymentExchange</span><span class=\"hljs-params\">(Queue paymentQueue, TopicExchange paymentExchange)</span> {\n        <span class=\"hljs-keyword\">return</span> BindingBuilder.bind(paymentQueue).to(paymentExchange).with(<span class=\"hljs-string\">&quot;api.payment.#&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"288,323"}},{"content":"<pre data-lines=\"324,330\"><code>com.caochenlei.integrationrabbitmqproducer.bean.TopicProducer\n\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;user()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;coreExchange&#x4ea4;&#x6362;&#x673a;&#x4e14;routingKey&#x4e3a;api.core.user\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;userQuery()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;coreExchange&#x4ea4;&#x6362;&#x673a;&#x4e14;routingKey&#x4e3a;api.core.user.query\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;order()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;paymentExchange&#x4ea4;&#x6362;&#x673a;&#x4e14;routingKey&#x4e3a;api.payment.order\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;orderQuery()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;paymentExchange&#x4ea4;&#x6362;&#x673a;&#x4e14;routingKey&#x4e3a;api.payment.order.query\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"324,330"}},{"content":"<pre data-lines=\"331,355\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TopicProducer</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AmqpTemplate amqpTemplate;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">user</span><span class=\"hljs-params\">(String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;coreExchange&quot;</span>, <span class=\"hljs-string\">&quot;api.core.user&quot;</span>, message);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">userQuery</span><span class=\"hljs-params\">(String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;coreExchange&quot;</span>, <span class=\"hljs-string\">&quot;api.core.user.query&quot;</span>, message);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">order</span><span class=\"hljs-params\">(String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;paymentExchange&quot;</span>, <span class=\"hljs-string\">&quot;api.payment.order&quot;</span>, message);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">orderQuery</span><span class=\"hljs-params\">(String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;paymentExchange&quot;</span>, <span class=\"hljs-string\">&quot;api.payment.order.query&quot;</span>, message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"331,355"}},{"content":"<pre data-lines=\"356,357\"><code>com.caochenlei.integrationrabbitmqproducer.IntegrationRabbitmqProducerApplicationTests\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"356,357"}},{"content":"<pre data-lines=\"358,386\"><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootTest</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IntegrationRabbitmqProducerApplicationTests</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> TopicProducer topicProducer;\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testTopicUserSend</span><span class=\"hljs-params\">()</span> {\n        topicProducer.user(<span class=\"hljs-string\">&quot;&#x7528;&#x6237;&#x7f16;&#x53f7;&#xff1a;987654321&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testTopicUserQuerySend</span><span class=\"hljs-params\">()</span> {\n        topicProducer.userQuery(<span class=\"hljs-string\">&quot;&#x67e5;&#x8be2;&#x7528;&#x6237;&#xff1a;987654321&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testTopicOrderSend</span><span class=\"hljs-params\">()</span> {\n        topicProducer.order(<span class=\"hljs-string\">&quot;&#x8ba2;&#x5355;&#x7f16;&#x53f7;&#xff1a;123456789&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testTopicOrderQuerySend</span><span class=\"hljs-params\">()</span> {\n        topicProducer.orderQuery(<span class=\"hljs-string\">&quot;&#x67e5;&#x8be2;&#x8ba2;&#x5355;&#xff1a;123456789&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"358,386"}},{"content":"<pre data-lines=\"387,388\"><code>&#x6d4b;&#x8bd5;testTopicUserSend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"387,388"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/e0c13ec66710fc82a8ca63044c18ebba.png\" alt>","children":[],"payload":{"tag":"img","lines":"389,390"}},{"content":"<pre data-lines=\"391,394\"><code>&#x6d4b;&#x8bd5;testTopicUserQuerySend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n\n&gt; &#x6ce8;&#x610f;&#xff1a;&#x56e0;&#x4e3a;&#x5728;TopicConfig&#x914d;&#x7f6e;&#x7c7b;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x5bf9;api.core&#x961f;&#x5217;&#x7ed1;&#x5b9a;&#x7684;&#x4ea4;&#x6362;&#x673a;&#x89c4;&#x5219;&#x662f;api.core.\\*&#xff0c;&#x800c;&#x901a;&#x914d;&#x7b26;&#x201c;\\*&#x201d;&#x53ea;&#x80fd;&#x5411;&#x540e;&#x591a;&#x5339;&#x914d;&#x4e00;&#x5c42;&#x8def;&#x5f84;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"391,394"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/568f74a9f6732c6063edc691c011f824.png\" alt>","children":[],"payload":{"tag":"img","lines":"395,396"}},{"content":"<pre data-lines=\"397,398\"><code>&#x6d4b;&#x8bd5;testTopicOrderSend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"397,398"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/d244f8fa4d3de4201ac5c5cd8db753ac.png\" alt>","children":[],"payload":{"tag":"img","lines":"399,400"}},{"content":"<pre data-lines=\"401,402\"><code>&#x6d4b;&#x8bd5;testTopicOrderQuerySend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"401,402"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/eeef50fa8bd70d9b4798482529200ecd.png\" alt>","children":[],"payload":{"tag":"img","lines":"403,404"}}],"payload":{"tag":"h3","lines":"281,282"}},{"content":"3.2.2&#x3001;&#x6d88;&#x606f;&#x6d88;&#x8d39;&#x8005;","children":[{"content":"<pre data-lines=\"407,411\"><code>com.caochenlei.integrationrabbitmqconsumer.bean.TopicConsumer\n\n*   &#x6dfb;&#x52a0;user()&#x65b9;&#x6cd5;&#xff0c;&#x76d1;&#x542c;&#x961f;&#x5217;&#x540d;&#x79f0;&#x4e3a;api.core&#x7684;&#x961f;&#x5217;&#x6d88;&#x606f;\n*   &#x6dfb;&#x52a0;order()&#x65b9;&#x6cd5;&#xff0c;&#x76d1;&#x542c;&#x961f;&#x5217;&#x540d;&#x79f0;&#x4e3a;api.payment&#x7684;&#x961f;&#x5217;&#x6d88;&#x606f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"407,411"}},{"content":"<pre data-lines=\"412,427\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TopicConsumer</span> {\n    <span class=\"hljs-meta\">@RabbitListener(queues = &quot;api.core&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">user</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(message);\n    }\n\n    <span class=\"hljs-meta\">@RabbitListener(queues = &quot;api.payment&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">order</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"412,427"}},{"content":"<pre data-lines=\"428,429\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x8fd9;&#x4e2a;&#x5de5;&#x7a0b;&#xff0c;&#x7136;&#x540e;&#x8fdb;&#x884c;&#x89c2;&#x5bdf;&#x7f51;&#x9875;&#x961f;&#x5217;&#x548c;&#x63a7;&#x5236;&#x53f0;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"428,429"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/89a373bbbd3fbf10ab207ef572da3f02.png\" alt>","children":[],"payload":{"tag":"img","lines":"430,431"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/d9c2fff12ace279f214255273ef9cb9c.png\" alt>","children":[],"payload":{"tag":"img","lines":"432,433"}}],"payload":{"tag":"h3","lines":"405,406"}}],"payload":{"tag":"h2","lines":"276,278"}},{"content":"3.3&#x3001;&#x5e7f;&#x64ad;&#x6a21;&#x5f0f;","children":[{"content":"3.3.1&#x3001;&#x6d88;&#x606f;&#x751f;&#x4ea7;&#x8005;","children":[{"content":"<pre data-lines=\"441,445\"><code>com.caochenlei.integrationrabbitmqproducer.config.FanoutConfig\n\n*   &#x914d;&#x7f6e;&#x4e00;&#x4e2a;api.report.payment&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x5e76;&#x7ed1;&#x5b9a;&#x5728;reportExchange&#x4ea4;&#x6362;&#x673a;&#x4e0a;&#x3002;\n*   &#x914d;&#x7f6e;&#x4e00;&#x4e2a;api.report.refund&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x5e76;&#x7ed1;&#x5b9a;&#x5728;reportExchange&#x4ea4;&#x6362;&#x673a;&#x4e0a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"441,445"}},{"content":"<pre data-lines=\"446,476\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FanoutConfig</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Queue <span class=\"hljs-title function_\">reportPaymentQueue</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>(<span class=\"hljs-string\">&quot;api.report.payment&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Queue <span class=\"hljs-title function_\">reportRefundQueue</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>(<span class=\"hljs-string\">&quot;api.report.refund&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> FanoutExchange <span class=\"hljs-title function_\">reportExchange</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FanoutExchange</span>(<span class=\"hljs-string\">&quot;reportExchange&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Binding <span class=\"hljs-title function_\">bindingReportPaymentExchange</span><span class=\"hljs-params\">(Queue reportPaymentQueue, FanoutExchange reportExchange)</span> {\n        <span class=\"hljs-keyword\">return</span> BindingBuilder.bind(reportPaymentQueue).to(reportExchange);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Binding <span class=\"hljs-title function_\">bindingReportRefundExchange</span><span class=\"hljs-params\">(Queue reportRefundQueue, FanoutExchange reportExchange)</span> {\n        <span class=\"hljs-keyword\">return</span> BindingBuilder.bind(reportRefundQueue).to(reportExchange);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"446,476"}},{"content":"<pre data-lines=\"477,480\"><code>com.caochenlei.integrationrabbitmqproducer.bean.TopicProducer\n\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;generateReports()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;reportExchange&#x4ea4;&#x6362;&#x673a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"477,480"}},{"content":"<pre data-lines=\"481,493\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FanoutProducer</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AmqpTemplate amqpTemplate;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">generateReports</span><span class=\"hljs-params\">(String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;reportExchange&quot;</span>, <span class=\"hljs-string\">&quot;api.report&quot;</span>, message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"481,493"}},{"content":"<pre data-lines=\"494,495\"><code>com.caochenlei.integrationrabbitmqproducer.IntegrationRabbitmqProducerApplicationTests#fanoutProducer\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"494,495"}},{"content":"<pre data-lines=\"496,509\"><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootTest</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IntegrationRabbitmqProducerApplicationTests</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> FanoutProducer fanoutProducer;\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testGenerateReportsSend</span><span class=\"hljs-params\">()</span> {\n        fanoutProducer.generateReports(<span class=\"hljs-string\">&quot;&#x5f00;&#x59cb;&#x751f;&#x6210;&#x62a5;&#x8868;&#xff01;&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"496,509"}},{"content":"<pre data-lines=\"510,511\"><code>&#x6d4b;&#x8bd5;testGenerateReportsSend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"510,511"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/1e3be5dd07b5e471920297a3f2912bff.png\" alt>","children":[],"payload":{"tag":"img","lines":"512,513"}}],"payload":{"tag":"h3","lines":"439,440"}},{"content":"3.3.2&#x3001;&#x6d88;&#x606f;&#x6d88;&#x8d39;&#x8005;","children":[{"content":"<pre data-lines=\"516,520\"><code>com.caochenlei.integrationrabbitmqconsumer.bean.FanoutConsumer\n\n*   &#x6dfb;&#x52a0;payment()&#x65b9;&#x6cd5;&#xff0c;&#x76d1;&#x542c;&#x961f;&#x5217;&#x540d;&#x79f0;&#x4e3a;api.report.payment&#x7684;&#x961f;&#x5217;&#x6d88;&#x606f;\n*   &#x6dfb;&#x52a0;refund()&#x65b9;&#x6cd5;&#xff0c;&#x76d1;&#x542c;&#x961f;&#x5217;&#x540d;&#x79f0;&#x4e3a;api.report.refund&#x7684;&#x961f;&#x5217;&#x6d88;&#x606f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"516,520"}},{"content":"<pre data-lines=\"521,536\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FanoutConsumer</span> {\n    <span class=\"hljs-meta\">@RabbitListener(queues = &quot;api.report.payment&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">payment</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(message);\n    }\n\n    <span class=\"hljs-meta\">@RabbitListener(queues = &quot;api.report.refund&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">refund</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"521,536"}},{"content":"<pre data-lines=\"537,538\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x8fd9;&#x4e2a;&#x5de5;&#x7a0b;&#xff0c;&#x7136;&#x540e;&#x8fdb;&#x884c;&#x89c2;&#x5bdf;&#x7f51;&#x9875;&#x961f;&#x5217;&#x548c;&#x63a7;&#x5236;&#x53f0;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"537,538"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/3738f653735be885b2275967870d848e.png\" alt>","children":[],"payload":{"tag":"img","lines":"539,540"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/165761ac984986cc17a5c3bf631d5568.png\" alt>","children":[],"payload":{"tag":"img","lines":"541,542"}}],"payload":{"tag":"h3","lines":"514,515"}}],"payload":{"tag":"h2","lines":"434,436"}},{"content":"3.4&#x3001;&#x5934;&#x90e8;&#x6a21;&#x5f0f;","children":[{"content":"3.4.1&#x3001;&#x6d88;&#x606f;&#x751f;&#x4ea7;&#x8005;","children":[{"content":"<pre data-lines=\"550,553\"><code>com.caochenlei.integrationrabbitmqproducer.config.HeadersConfig\n\n*   &#x914d;&#x7f6e;&#x4e00;&#x4e2a;credit.bank&#x7684;&#x6d88;&#x606f;&#x961f;&#x5217;&#x5e76;&#x7ed1;&#x5b9a;&#x5728;creditBankExchange&#x4ea4;&#x6362;&#x673a;&#x4e0a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"550,553"}},{"content":"<pre data-lines=\"554,577\"><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">HeadersConfig</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Queue <span class=\"hljs-title function_\">creditBankQueue</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Queue</span>(<span class=\"hljs-string\">&quot;credit.bank&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> HeadersExchange <span class=\"hljs-title function_\">creditBankExchange</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HeadersExchange</span>(<span class=\"hljs-string\">&quot;creditBankExchange&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> Binding <span class=\"hljs-title function_\">bindingCreditBankExchange</span><span class=\"hljs-params\">(Queue creditBankQueue, HeadersExchange creditBankExchange)</span> {\n        Map&lt;String, Object&gt; headerValues = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();\n        headerValues.put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cash&quot;</span>);\n        headerValues.put(<span class=\"hljs-string\">&quot;aging&quot;</span>, <span class=\"hljs-string\">&quot;fast&quot;</span>);\n        <span class=\"hljs-keyword\">return</span> BindingBuilder.bind(creditBankQueue).to(creditBankExchange).whereAll(headerValues).match();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"554,577"}},{"content":"<pre data-lines=\"578,581\"><code>com.caochenlei.integrationrabbitmqproducer.bean.HeadersProducer\n\n*   &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;creditBank()&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x6d88;&#x606f;&#x81f3;creditBankExchange&#x4ea4;&#x6362;&#x673a;&#x4e14;routingKey&#x4e3a;credit.bank\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"578,581"}},{"content":"<pre data-lines=\"582,608\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">HeadersProducer</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> AmqpTemplate amqpTemplate;\n\n    <span class=\"hljs-keyword\">private</span> Message <span class=\"hljs-title function_\">getMessage</span><span class=\"hljs-params\">(Map&lt;String, Object&gt; head, String message)</span> {\n        \n        <span class=\"hljs-type\">MessageProperties</span> <span class=\"hljs-variable\">messageProperties</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MessageProperties</span>();\n        \n        Set&lt;Map.Entry&lt;String, Object&gt;&gt; headerEntries = head.entrySet();\n        <span class=\"hljs-keyword\">for</span> (Map.Entry&lt;String, Object&gt; header : headerEntries) {\n            <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">key</span> <span class=\"hljs-operator\">=</span> header.getKey();\n            <span class=\"hljs-type\">Object</span> <span class=\"hljs-variable\">value</span> <span class=\"hljs-operator\">=</span> header.getValue();\n            messageProperties.setHeader(key, value);\n        }\n        \n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Message</span>(message.getBytes(), messageProperties);\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">creditBank</span><span class=\"hljs-params\">(Map&lt;String, Object&gt; head, String message)</span> {\n        amqpTemplate.convertAndSend(<span class=\"hljs-string\">&quot;creditBankExchange&quot;</span>, <span class=\"hljs-string\">&quot;credit.bank&quot;</span>, getMessage(head, message));\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"582,608"}},{"content":"<pre data-lines=\"609,610\"><code>com.caochenlei.integrationrabbitmqproducer.IntegrationRabbitmqProducerApplicationTests\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"609,610"}},{"content":"<pre data-lines=\"611,634\"><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootTest</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">IntegrationRabbitmqProducerApplicationTests</span> {\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> HeadersProducer headersProducer;\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testCreditBankSend</span><span class=\"hljs-params\">()</span> {\n        Map&lt;String, Object&gt; head = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();\n        head.put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cash&quot;</span>);\n        headersProducer.creditBank(head, <span class=\"hljs-string\">&quot;&#x94f6;&#x884c;&#x6388;&#x4fe1;(&#x90e8;&#x5206;&#x5339;&#x914d;)&quot;</span>);\n    }\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">testCreditBankAllSend</span><span class=\"hljs-params\">()</span> {\n        Map&lt;String, Object&gt; head = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">HashMap</span>&lt;&gt;();\n        head.put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cash&quot;</span>);\n        head.put(<span class=\"hljs-string\">&quot;aging&quot;</span>, <span class=\"hljs-string\">&quot;fast&quot;</span>);\n        headersProducer.creditBank(head, <span class=\"hljs-string\">&quot;&#x94f6;&#x884c;&#x6388;&#x4fe1;(&#x5168;&#x90e8;&#x5339;&#x914d;)&quot;</span>);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"611,634"}},{"content":"<pre data-lines=\"635,638\"><code>&#x6d4b;&#x8bd5;testCreditBankSend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n\n&gt; &#x6ce8;&#x610f;&#xff1a;&#x90e8;&#x5206;&#x5339;&#x914d;&#x662f;&#x65e0;&#x6cd5;&#x5c06;&#x6d88;&#x606f;&#x53d1;&#x9001;&#x5230;&#x6307;&#x5b9a;&#x961f;&#x5217;&#x4e2d;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"635,638"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/bf178100ea0f352c40bd53a26d827e6c.png\" alt>","children":[],"payload":{"tag":"img","lines":"639,640"}},{"content":"<pre data-lines=\"641,642\"><code>&#x6d4b;&#x8bd5;testCreditBankAllSend()&#xff0c;&#x6d4b;&#x8bd5;&#x5b8c;&#x6bd5;&#xff0c;&#x6253;&#x5f00;&#x961f;&#x5217;&#x67e5;&#x770b;&#x5f53;&#x524d;&#x961f;&#x5217;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"641,642"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/0bd252995b914b18607685fb128911c8.png\" alt>","children":[],"payload":{"tag":"img","lines":"643,644"}}],"payload":{"tag":"h3","lines":"548,549"}},{"content":"3.4.2&#x3001;&#x6d88;&#x606f;&#x6d88;&#x8d39;&#x8005;","children":[{"content":"<pre data-lines=\"647,650\"><code>com.caochenlei.integrationrabbitmqconsumer.bean.HeadersConsumer\n\n*   &#x6dfb;&#x52a0;creditBank()&#x65b9;&#x6cd5;&#xff0c;&#x76d1;&#x542c;&#x961f;&#x5217;&#x540d;&#x79f0;&#x4e3a;credit.bank&#x7684;&#x961f;&#x5217;&#x6d88;&#x606f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"647,650"}},{"content":"<pre data-lines=\"651,661\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">HeadersConsumer</span> {\n    <span class=\"hljs-meta\">@RabbitListener(queues = &quot;credit.bank&quot;)</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">creditBank</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(message);\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"651,661"}},{"content":"<pre data-lines=\"662,663\"><code>&#x91cd;&#x65b0;&#x542f;&#x52a8;&#x8fd9;&#x4e2a;&#x5de5;&#x7a0b;&#xff0c;&#x7136;&#x540e;&#x8fdb;&#x884c;&#x89c2;&#x5bdf;&#x7f51;&#x9875;&#x961f;&#x5217;&#x548c;&#x63a7;&#x5236;&#x53f0;&#x60c5;&#x51b5;&#xff1a;http://localhost:15672/#/queues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"662,663"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/d3f5f719376fc4e43e49352cddcd62e0.png\" alt>","children":[],"payload":{"tag":"img","lines":"664,665"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/5c644a66a74f0f39a9d70287435c9fe9.png\" alt>","children":[],"payload":{"tag":"img","lines":"666,667"}}],"payload":{"tag":"h3","lines":"645,646"}}],"payload":{"tag":"h2","lines":"543,545"}},{"content":"4.1&#x3001;@RabbitListener &#x7528;&#x6cd5;","children":[{"content":"<pre data-lines=\"671,672\"><code>&#x4f7f;&#x7528; @RabbitListener &#x6ce8;&#x89e3;&#x6807;&#x8bb0;&#x65b9;&#x6cd5;&#xff0c;&#x5f53;&#x76d1;&#x542c;&#x5230;&#x961f;&#x5217; debug &#x4e2d;&#x6709;&#x6d88;&#x606f;&#x65f6;&#x5219;&#x4f1a;&#x8fdb;&#x884c;&#x63a5;&#x6536;&#x5e76;&#x5904;&#x7406;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"671,672"}},{"content":"<pre data-lines=\"673,680\"><code class=\"language-java\"><span class=\"hljs-meta\">@RabbitListener(queues = &quot;debug&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">processMessage</span><span class=\"hljs-params\">(Message bytes)</span> {\n    System.out.println(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(bytes));\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"673,680"}},{"content":"<pre data-lines=\"681,684\"><code>&#x6d88;&#x606f;&#x5904;&#x7406;&#x65b9;&#x6cd5;&#x53c2;&#x6570;&#x662f;&#x7531; MessageConverter &#x8f6c;&#x5316;&#xff0c;&#x9ed8;&#x8ba4; Spring &#x4f7f;&#x7528;&#x7684;&#x5b9e;&#x73b0;&#x662f; SimpleRabbitListenerContainerFactory&#xff0c;SimpleMessageConverter &#x5bf9;&#x4e8e;&#x8981;&#x53d1;&#x9001;&#x7684;&#x6d88;&#x606f;&#x4f53; body &#x4e3a; byte\\[\\] &#x65f6;&#x4e0d;&#x8fdb;&#x884c;&#x5904;&#x7406;&#xff0c;&#x5982;&#x679c;&#x662f; String &#x5219;&#x8f6c;&#x6210;&#x5b57;&#x8282;&#x6570;&#x7ec4;&#xff0c;&#x5982;&#x679c;&#x662f; Java &#x5bf9;&#x8c61;&#xff0c;&#x5219;&#x4f7f;&#x7528; Jdk &#x5e8f;&#x5217;&#x5316;&#x5c06;&#x6d88;&#x606f;&#x8f6c;&#x6210;&#x5b57;&#x8282;&#x6570;&#x7ec4;&#xff0c;&#x8f6c;&#x51fa;&#x6765;&#x7684;&#x7ed3;&#x679c;&#x8f83;&#x5927;&#xff0c;&#x542b;class&#x7c7b;&#x540d;&#xff0c;&#x7c7b;&#x76f8;&#x5e94;&#x65b9;&#x6cd5;&#x7b49;&#x4fe1;&#x606f;&#xff0c;&#x56e0;&#x6b64;&#x6027;&#x80fd;&#x8f83;&#x5dee;&#x3002;&#x6d88;&#x606f;&#x7684; content\\_type &#x5c5e;&#x6027;&#x8868;&#x793a;&#x6d88;&#x606f; body &#x6570;&#x636e;&#x4ee5;&#x4ec0;&#x4e48;&#x6570;&#x636e;&#x683c;&#x5f0f;&#x5b58;&#x50a8;&#xff0c;&#x63a5;&#x6536;&#x6d88;&#x606f;&#x9664;&#x4e86;&#x4f7f;&#x7528; Message &#x5bf9;&#x8c61;&#x63a5;&#x6536;&#x6d88;&#x606f;&#xff08;&#x5305;&#x542b;&#x6d88;&#x606f;&#x5c5e;&#x6027;&#x7b49;&#x4fe1;&#x606f;&#xff09;&#x4e4b;&#x5916;&#xff0c;&#x8fd8;&#x53ef;&#x76f4;&#x63a5;&#x4f7f;&#x7528;&#x5bf9;&#x5e94;&#x7c7b;&#x578b;&#x63a5;&#x6536;&#x6d88;&#x606f; body &#x5185;&#x5bb9;&#xff0c;&#x4f46;&#x82e5;&#x65b9;&#x6cd5;&#x53c2;&#x6570;&#x7c7b;&#x578b;&#x4e0d;&#x6b63;&#x786e;&#x4f1a;&#x629b;&#x5f02;&#x5e38;&#xff1a;\n\n*   application/octet-stream&#xff1a;&#x4e8c;&#x8fdb;&#x5236;&#x5b57;&#x8282;&#x6570;&#x7ec4;&#x5b58;&#x50a8;&#xff0c;&#x4f7f;&#x7528; byte\\[\\]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"681,684"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/ad3956a3bd485763722c4c2b2ab46e5e.png\" alt>","children":[],"payload":{"tag":"img","lines":"685,686"}},{"content":"<pre data-lines=\"687,688\"><code>*   text/plain&#xff1a;&#x6587;&#x672c;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x5b58;&#x50a8;&#xff0c;&#x4f7f;&#x7528; String\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"687,688"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/da14a52858f0aa061848743c77717436.png\" alt>","children":[],"payload":{"tag":"img","lines":"689,690"}},{"content":"<pre data-lines=\"691,692\"><code>*   application/x-java-serialized-object&#xff1a;java &#x5bf9;&#x8c61;&#x5e8f;&#x5217;&#x5316;&#x683c;&#x5f0f;&#x5b58;&#x50a8;&#xff0c;&#x4f7f;&#x7528; Object&#x3001;&#x76f8;&#x5e94;&#x7c7b;&#x578b;&#xff08;&#x53cd;&#x5e8f;&#x5217;&#x5316;&#x65f6;&#x7c7b;&#x578b;&#x5e94;&#x8be5;&#x540c;&#x5305;&#x540c;&#x540d;&#xff0c;&#x5426;&#x8005;&#x4f1a;&#x629b;&#x51fa;&#x627e;&#x4e0d;&#x5230;&#x7c7b;&#x5f02;&#x5e38;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"691,692"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/28c844fea5a50df709af42d1333aed38.png\" alt>","children":[],"payload":{"tag":"img","lines":"693,694"}},{"content":"<pre data-lines=\"695,696\"><code>*   application/json&#xff1a;JSON &#x683c;&#x5f0f;&#xff0c;&#x4f7f;&#x7528; Object&#x3001;&#x76f8;&#x5e94;&#x7c7b;&#x578b;&#xff0c;&#x9700;&#x8981;&#x81ea;&#x5df1;&#x914d;&#x7f6e; Jackson2JsonMessageConverter\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"695,696"}},{"content":"<img src=\"https://img-blog.csdnimg.cn/img_convert/379b3632d05a4f76df3eb52d27471117.png\" alt>","children":[],"payload":{"tag":"img","lines":"697,698"}},{"content":"<pre data-lines=\"699,700\"><code>&#x5f53;&#x4f7f;&#x7528; RabbitMQ &#x4f5c;&#x4e3a;&#x4e2d;&#x95f4;&#x4ef6;&#x65f6;&#xff0c;&#x6570;&#x636e;&#x91cf;&#x6bd4;&#x8f83;&#x5927;&#xff0c;&#x6b64;&#x65f6;&#x5c31;&#x8981;&#x8003;&#x8651;&#x4f7f;&#x7528; Jackson2JsonMessageConverter &#x7b49;&#x5e8f;&#x5217;&#x5316;&#x5f62;&#x5f0f;&#x4ee5;&#x6b64;&#x63d0;&#x9ad8;&#x6027;&#x80fd;&#xff0c;&#x5e8f;&#x5217;&#x5316;&#x4e0e;&#x53cd;&#x5e8f;&#x5217;&#x5316;&#x914d;&#x7f6e;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"699,700"}},{"content":"<pre data-lines=\"701,716\"><code class=\"language-java\"><span class=\"hljs-keyword\">import</span> org.springframework.amqp.support.converter.Jackson2JsonMessageConverter;\n<span class=\"hljs-keyword\">import</span> org.springframework.amqp.support.converter.MessageConverter;\n<span class=\"hljs-keyword\">import</span> org.springframework.context.annotation.Bean;\n<span class=\"hljs-keyword\">import</span> org.springframework.context.annotation.Configuration;\n\n<span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AMQPConfig</span> {\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-keyword\">public</span> MessageConverter <span class=\"hljs-title function_\">messageConverter</span><span class=\"hljs-params\">()</span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Jackson2JsonMessageConverter</span>();\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"701,716"}},{"content":"<pre data-lines=\"717,718\"><code>&#x751f;&#x4ea7;&#x8005;&#x548c;&#x6d88;&#x8d39;&#x8005;&#x90fd;&#x9700;&#x8981;&#x914d;&#x7f6e;&#x4e0a;&#x8fb9;&#x8fd9;&#x4e00;&#x6bb5;&#x914d;&#x7f6e;&#xff0c;&#x4f7f;&#x7528;&#x4e86;&#x4e4b;&#x540e;&#xff0c;&#x6240;&#x6709;&#x5e8f;&#x5217;&#x5316;&#x548c;&#x53cd;&#x5e8f;&#x5217;&#x5316;&#x90fd;&#x5c06;&#x4f7f;&#x7528; Jackson2JsonMessageConverter &#xff0c;&#x5982;&#x679c;&#x542f;&#x52a8;&#x62a5;&#x9519;&#xff0c;&#x8bf7;&#x52a0;&#x5165;&#x4f9d;&#x8d56;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"717,718"}},{"content":"<pre data-lines=\"719,726\"><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>jackson-databind<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"719,726"}},{"content":"<pre data-lines=\"727,728\"><code>&#x901a;&#x8fc7; @RabbitListener &#x7684; bindings &#x5c5e;&#x6027;&#x58f0;&#x660e; Binding&#xff08;&#x82e5; RabbitMQ &#x4e2d;&#x4e0d;&#x5b58;&#x5728;&#x8be5;&#x7ed1;&#x5b9a;&#x6240;&#x9700;&#x8981;&#x7684; Queue&#x3001;Exchange&#x3001;RouteKey &#x5219;&#x81ea;&#x52a8;&#x521b;&#x5efa;&#xff0c;&#x82e5;&#x5b58;&#x5728;&#x5219;&#x629b;&#x51fa;&#x5f02;&#x5e38;&#xff09;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"727,728"}},{"content":"<pre data-lines=\"729,740\"><code class=\"language-java\"><span class=\"hljs-meta\">@RabbitListener(bindings = @QueueBinding(\n        exchange = @Exchange(value = &quot;topic.exchange&quot;,durable = &quot;true&quot;,type = &quot;topic&quot;),\n        value = @Queue(value = &quot;consumer_queue&quot;,durable = &quot;true&quot;),\n        key = &quot;key.#&quot;\n))</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">processMessage</span><span class=\"hljs-params\">(Message message)</span> {\n    System.out.println(message);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"729,740"}}],"payload":{"tag":"h2","lines":"668,670"}},{"content":"4.2&#x3001;@RabbitHandler &#x7528;&#x6cd5;","children":[{"content":"<pre data-lines=\"744,745\"><code>@RabbitListener &#x53ef;&#x4ee5;&#x6807;&#x6ce8;&#x5728;&#x7c7b;&#x4e0a;&#x9762;&#xff0c;&#x9700;&#x914d;&#x5408; @RabbitHandler &#x6ce8;&#x89e3;&#x4e00;&#x8d77;&#x4f7f;&#x7528;&#xff0c;@RabbitListener &#x6807;&#x6ce8;&#x5728;&#x7c7b;&#x4e0a;&#x9762;&#x8868;&#x793a;&#x5f53;&#x6709;&#x6536;&#x5230;&#x6d88;&#x606f;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5c31;&#x4ea4;&#x7ed9; @RabbitHandler &#x7684;&#x65b9;&#x6cd5;&#x5904;&#x7406;&#xff0c;&#x5177;&#x4f53;&#x4f7f;&#x7528;&#x54ea;&#x4e2a;&#x65b9;&#x6cd5;&#x5904;&#x7406;&#xff0c;&#x6839;&#x636e; MessageConverter &#x8f6c;&#x6362;&#x540e;&#x7684;&#x53c2;&#x6570;&#x7c7b;&#x578b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"744,745"}},{"content":"<pre data-lines=\"746,762\"><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>\n<span class=\"hljs-meta\">@RabbitListener(queues = &quot;consumer_queue&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Receiver</span> {\n    <span class=\"hljs-meta\">@RabbitHandler</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">processMessage1</span><span class=\"hljs-params\">(String message)</span> {\n        System.out.println(message);\n    }\n\n    <span class=\"hljs-meta\">@RabbitHandler</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">processMessage2</span><span class=\"hljs-params\">(<span class=\"hljs-type\">byte</span>[] message)</span> {\n        System.out.println(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">String</span>(message));\n    }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"746,762"}}],"payload":{"tag":"h2","lines":"741,743"}},{"content":"4.3&#x3001;@Payload &#x4e0e; @Headers &#x7528;&#x6cd5;","children":[{"content":"<pre data-lines=\"766,767\"><code>&#x4f7f;&#x7528; @Payload &#x548c; @Headers &#x6ce8;&#x89e3;&#x53ef;&#x4ee5;&#x6d88;&#x606f;&#x4e2d;&#x7684; body &#x4e0e; headers &#x4fe1;&#x606f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"766,767"}},{"content":"<pre data-lines=\"768,776\"><code class=\"language-java\"><span class=\"hljs-meta\">@RabbitListener(queues = &quot;debug&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">processMessage1</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Payload</span> String body, <span class=\"hljs-meta\">@Headers</span> Map&lt;String,Object&gt; headers)</span> {\n    System.out.println(<span class=\"hljs-string\">&quot;body&#xff1a;&quot;</span>+body);\n    System.out.println(<span class=\"hljs-string\">&quot;Headers&#xff1a;&quot;</span>+headers);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"768,776"}},{"content":"<pre data-lines=\"777,778\"><code>&#x4e5f;&#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x5355;&#x4e2a; Header &#x5c5e;&#x6027;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"777,778"}},{"content":"<pre data-lines=\"779,787\"><code class=\"language-java\"><span class=\"hljs-meta\">@RabbitListener(queues = &quot;debug&quot;)</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">processMessage1</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Payload</span> String body, <span class=\"hljs-meta\">@Header</span> String token)</span> {\n    System.out.println(<span class=\"hljs-string\">&quot;body&#xff1a;&quot;</span>+body);\n    System.out.println(<span class=\"hljs-string\">&quot;token&#xff1a;&quot;</span>+token);\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"779,787"}}],"payload":{"tag":"h2","lines":"763,765"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
