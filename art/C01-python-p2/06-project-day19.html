<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"06-project-day19","children":[{"content":"Project","children":[{"content":"httpserver","children":[{"content":"<pre data-lines=\"75,96\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nconfig.py\n\n&#x914d;&#x7f6e;&#x6587;&#x4ef6;\n&#x8d1f;&#x8d23;&#x5bf9;&#x8f6f;&#x4ef6;&#x7684;&#x529f;&#x80fd;&#x8fdb;&#x884c;&#x914d;&#x7f6e;\n&#x8be5;&#x6587;&#x4ef6;&#x66b4;&#x9732;&#x7ed9;&#x7528;&#x6237;\n&quot;&quot;&quot;</span>\n\nHOST = <span class=\"hljs-string\">&apos;0.0.0.0&apos;</span>\nPORT = <span class=\"hljs-number\">8000</span>\n\n<span class=\"hljs-comment\"># &#x8c03;&#x8bd5;&#x6a21;&#x5f0f;</span>\nDEBUG = <span class=\"hljs-literal\">True</span>\n\n<span class=\"hljs-comment\"># &#x914d;&#x7f6e;webframe&#x5730;&#x5740;</span>\nframe_ip = <span class=\"hljs-string\">&apos;127.0.0.1&apos;</span>\nframe_port = <span class=\"hljs-number\">8080</span>\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"75,96"}},{"content":"<pre data-lines=\"97,210\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nhttpserver.py\nhttpserver&#x4e3b;&#x8981;&#x529f;&#x80fd;\n\n&#x83b7;&#x53d6;http&#x8bf7;&#x6c42;\n&#x89e3;&#x6790;http&#x8bf7;&#x6c42;\n&#x5c06;&#x8bf7;&#x6c42;&#x53d1;&#x9001;&#x7ed9;WebFrame\n&#x4ece;WebFrame&#x63a5;&#x6536;&#x53cd;&#x9988;&#x6570;&#x636e;\n&#x5c06;&#x6570;&#x636e;&#x7ec4;&#x7ec7;&#x4e3a;Response&#x683c;&#x5f0f;&#x53d1;&#x9001;&#x7ed9;&#x5ba2;&#x6237;&#x7aef;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> socket <span class=\"hljs-keyword\">import</span> *\n<span class=\"hljs-keyword\">from</span> config <span class=\"hljs-keyword\">import</span> *\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">import</span> re\n\n<span class=\"hljs-comment\"># &#x548c;&#x5e94;&#x7528;&#x4ea4;&#x4e92;</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">connect_frame</span>(<span class=\"hljs-params\">env</span>):\n    <span class=\"hljs-comment\"># tcp&#x5ba2;&#x6237;&#x7aef;</span>\n    s = socket()\n    <span class=\"hljs-keyword\">try</span>:\n        s.connect((frame_ip,frame_port))\n    <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n        <span class=\"hljs-built_in\">print</span>(e)\n        <span class=\"hljs-keyword\">return</span>\n    <span class=\"hljs-comment\"># &#x5c06;env&#x53d1;&#x9001;&#x7ed9;webframe</span>\n    data = json.dumps(env) <span class=\"hljs-comment\"># &#x5c06;&#x5b57;&#x5178;&#x8f6c;&#x6362;&#x4e3a;json</span>\n    s.send(data.encode())\n    data = s.recv(<span class=\"hljs-number\">1024</span>*<span class=\"hljs-number\">1024</span>*<span class=\"hljs-number\">10</span>).decode()\n    <span class=\"hljs-keyword\">try</span>:\n        data = json.loads(data)\n        <span class=\"hljs-keyword\">return</span> data\n    <span class=\"hljs-keyword\">except</span>:\n        <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&apos;status&apos;</span>:<span class=\"hljs-string\">&apos;500&apos;</span>,<span class=\"hljs-string\">&apos;data&apos;</span>:<span class=\"hljs-string\">&apos;Error!&apos;</span>}\n\n<span class=\"hljs-comment\"># &#x4e3b;&#x4f53;&#x529f;&#x80fd;&#x7c7b;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">HTTPServer</span>:\n    <span class=\"hljs-comment\"># &#x521d;&#x59cb;&#x5316;&#x5bf9;&#x8c61;&#x5373;&#x5b8c;&#x6210;&#x5957;&#x63a5;&#x5b57;&#x521b;&#x5efa;,&#x7ed1;&#x5b9a;,&#x548c;&#x90e8;&#x5206;&#x5c5e;&#x6027;&#x7684;&#x8bbe;&#x7f6e;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.address = (HOST,PORT)\n        <span class=\"hljs-variable language_\">self</span>.create_socket()\n        <span class=\"hljs-variable language_\">self</span>.bind()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">create_socket</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.sockfd = socket()\n        <span class=\"hljs-variable language_\">self</span>.sockfd.setsockopt(SOL_SOCKET,\n                               SO_REUSEADDR,\n                               DEBUG)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.sockfd.bind(<span class=\"hljs-variable language_\">self</span>.address)\n        <span class=\"hljs-variable language_\">self</span>.host = HOST\n        <span class=\"hljs-variable language_\">self</span>.port = PORT\n\n    <span class=\"hljs-comment\"># &#x542f;&#x52a8;&#x670d;&#x52a1; &#x591a;&#x7ebf;&#x7a0b;&#x5e76;&#x53d1;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">serve_forever</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.sockfd.listen(<span class=\"hljs-number\">3</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Listen the port %d..&quot;</span>%<span class=\"hljs-variable language_\">self</span>.port)\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            connfd,addr = <span class=\"hljs-variable language_\">self</span>.sockfd.accept()\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Connect from&quot;</span>,addr)\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.handle,\n                       args=(connfd,))\n            t.setDaemon(<span class=\"hljs-literal\">True</span>)\n            t.start()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">handle</span>(<span class=\"hljs-params\">self,connfd</span>):\n        <span class=\"hljs-comment\"># &#x63a5;&#x53d7;HTTP&#x8bf7;&#x6c42;</span>\n        request = connfd.recv(<span class=\"hljs-number\">4096</span>).decode()\n        <span class=\"hljs-comment\"># &#x7ed9;webframe {&apos;method&apos;:&apos;GET&apos;,&apos;info&apos;:XX}</span>\n        pattern=<span class=\"hljs-string\">r&quot;(?P&lt;method&gt;[A-Z]+)\\s+(?P&lt;info&gt;/\\S*)&quot;</span>\n        <span class=\"hljs-keyword\">try</span>:\n            env = re.<span class=\"hljs-keyword\">match</span>(pattern,request).groupdict()\n        <span class=\"hljs-keyword\">except</span>:\n            connfd.close()\n            <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-comment\"># &#x5c06;env &#x53d1;&#x9001;&#x7ed9;webframe&#x5f97;&#x5230;&#x6570;&#x636e;</span>\n            data = connect_frame(env)\n            <span class=\"hljs-keyword\">if</span> data:\n                <span class=\"hljs-variable language_\">self</span>.response(connfd,data)\n\n    <span class=\"hljs-comment\"># &#x5c06;&#x6570;&#x636e;&#x7ec4;&#x7ec7;&#x4e3a;&#x54cd;&#x5e94;&#x7ed9;&#x6d4f;&#x89c8;&#x5668;&#x53d1;&#x9001;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">response</span>(<span class=\"hljs-params\">self,connfd,data</span>):\n        <span class=\"hljs-comment\"># data--&gt; {&apos;status&apos;:&apos;200&apos;,&apos;data&apos;:&apos;xxxx&apos;}</span>\n        <span class=\"hljs-keyword\">if</span> data[<span class=\"hljs-string\">&apos;status&apos;</span>] == <span class=\"hljs-string\">&apos;200&apos;</span>:\n            content = <span class=\"hljs-string\">&quot;HTTP/1.1 200 OK\\r\\n&quot;</span>\n            content += <span class=\"hljs-string\">&quot;Content-Type:text/html\\r\\n&quot;</span>\n            content += <span class=\"hljs-string\">&quot;\\r\\n&quot;</span>\n            content += data[<span class=\"hljs-string\">&apos;data&apos;</span>]\n        <span class=\"hljs-keyword\">elif</span> data[<span class=\"hljs-string\">&apos;status&apos;</span>] == <span class=\"hljs-string\">&apos;404&apos;</span>:\n            content = <span class=\"hljs-string\">&quot;HTTP/1.1 404 Not Found\\r\\n&quot;</span>\n            content += <span class=\"hljs-string\">&quot;Content-Type:text/html\\r\\n&quot;</span>\n            content += <span class=\"hljs-string\">&quot;\\r\\n&quot;</span>\n            content += data[<span class=\"hljs-string\">&apos;data&apos;</span>]\n        <span class=\"hljs-keyword\">elif</span> data[<span class=\"hljs-string\">&apos;status&apos;</span>] == <span class=\"hljs-string\">&apos;500&apos;</span>:\n            content = <span class=\"hljs-string\">&quot;HTTP/1.1 500 Server Error\\r\\n&quot;</span>\n            content += <span class=\"hljs-string\">&quot;Content-Type:text/html\\r\\n&quot;</span>\n            content += <span class=\"hljs-string\">&quot;\\r\\n&quot;</span>\n            content += data[<span class=\"hljs-string\">&apos;data&apos;</span>]\n        connfd.send(content.encode()) <span class=\"hljs-comment\"># &#x7ed9;&#x6d4f;&#x89c8;&#x5668;</span>\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    <span class=\"hljs-comment\"># host = &apos;0.0.0.0&apos;</span>\n    <span class=\"hljs-comment\"># port = 8888</span>\n    <span class=\"hljs-comment\">#</span>\n    httpd = HTTPServer()\n    httpd.serve_forever() <span class=\"hljs-comment\"># &#x542f;&#x52a8;&#x670d;&#x52a1;</span>\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"97,210"}},{"content":"<pre data-lines=\"211,232\"><code class=\"language-python\"><span class=\"hljs-comment\"># httpserver_test.py</span>\n<span class=\"hljs-keyword\">from</span> socket <span class=\"hljs-keyword\">import</span> *\n<span class=\"hljs-keyword\">import</span> json\n\ns = socket()\ns.bind((<span class=\"hljs-string\">&apos;0.0.0.0&apos;</span>,<span class=\"hljs-number\">8080</span>))\ns.listen(<span class=\"hljs-number\">3</span>)\n\nc,addr = s.accept()\n\ndata = c.recv(<span class=\"hljs-number\">1024</span>)\n<span class=\"hljs-built_in\">print</span>(data)\ndata = json.dumps({<span class=\"hljs-string\">&apos;status&apos;</span>:<span class=\"hljs-string\">&apos;200&apos;</span>,<span class=\"hljs-string\">&apos;data&apos;</span>:<span class=\"hljs-string\">&apos;OKOKOK&apos;</span>})\nc.send(data.encode())\n\nc.close()\ns.close()\n\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"211,232"}}],"payload":{"tag":"h5","lines":"73,74"}},{"content":"webframe","children":[{"content":"<pre data-lines=\"237,245\"><code data-lines=\"237,245\">static/\n\t<span class=\"hljs-number\">404</span><span class=\"hljs-selector-class\">.html</span>\n\tindex<span class=\"hljs-selector-class\">.html</span>\n\tLinux<span class=\"hljs-selector-class\">.html</span>\n\tMysql<span class=\"hljs-selector-class\">.html</span>\n\tRE<span class=\"hljs-selector-class\">.html</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"237,245"}},{"content":"<pre data-lines=\"248,262\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nsettings.py\n&#x914d;&#x7f6e;&#x6587;&#x4ef6;\n&quot;&quot;&quot;</span>\n\nHOST = <span class=\"hljs-string\">&apos;0.0.0.0&apos;</span>\nPORT = <span class=\"hljs-number\">8080</span>\n\nDEBUG = <span class=\"hljs-literal\">True</span>\n\n<span class=\"hljs-comment\"># &#x7f51;&#x9875;&#x4f4d;&#x7f6e;</span>\nDIR = <span class=\"hljs-string\">&apos;./static&apos;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"248,262"}},{"content":"<pre data-lines=\"263,277\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nurls.py\n\n&#x8d1f;&#x8d23;&#x63d0;&#x4f9b;&#x5177;&#x4f53;&#x80fd;&#x6ee1;&#x8db3;&#x54ea;&#x4e9b;&#x8bf7;&#x6c42;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> views <span class=\"hljs-keyword\">import</span> *\n\nurls = [\n    (<span class=\"hljs-string\">&apos;/time&apos;</span>,get_time),\n    (<span class=\"hljs-string\">&apos;/hello&apos;</span>,hello),\n    (<span class=\"hljs-string\">&apos;/bye&apos;</span>,bye)\n]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"263,277"}},{"content":"<pre data-lines=\"278,291\"><code class=\"language-python\"><span class=\"hljs-comment\"># views.py</span>\n<span class=\"hljs-keyword\">import</span> time\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_time</span>():\n    <span class=\"hljs-keyword\">return</span> time.ctime()\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">hello</span>():\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Hello World&quot;</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">bye</span>():\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Good Bye&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"278,291"}},{"content":"<pre data-lines=\"292,387\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nwebframe.py\n\n&#x6a21;&#x62df;&#x540e;&#x7aef;&#x5e94;&#x7528;\n\n&#x4ece;httpserver&#x63a5;&#x6536;&#x5177;&#x4f53;&#x8bf7;&#x6c42;\n&#x6839;&#x636e;&#x8bf7;&#x6c42;&#x8fdb;&#x884c;&#x903b;&#x8f91;&#x5904;&#x7406;&#x548c;&#x6570;&#x636e;&#x5904;&#x7406;\n&#x5c06;&#x9700;&#x8981;&#x7684;&#x6570;&#x636e;&#x53cd;&#x9988;&#x7ed9;httpserver\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> socket <span class=\"hljs-keyword\">import</span> *\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> threading <span class=\"hljs-keyword\">import</span> Thread\n<span class=\"hljs-keyword\">from</span> settings <span class=\"hljs-keyword\">import</span> *\n<span class=\"hljs-keyword\">from</span> urls <span class=\"hljs-keyword\">import</span> *\n\n<span class=\"hljs-comment\"># &#x5e94;&#x7528;&#x529f;&#x80fd;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Application</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.address = (HOST, PORT)\n        <span class=\"hljs-variable language_\">self</span>.create_socket()\n        <span class=\"hljs-variable language_\">self</span>.bind()\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">create_socket</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.sockfd = socket()\n        <span class=\"hljs-variable language_\">self</span>.sockfd.setsockopt(SOL_SOCKET,\n                               SO_REUSEADDR,\n                               DEBUG)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.sockfd.bind(<span class=\"hljs-variable language_\">self</span>.address)\n        <span class=\"hljs-variable language_\">self</span>.host = HOST\n        <span class=\"hljs-variable language_\">self</span>.port = PORT\n\n    <span class=\"hljs-comment\"># &#x670d;&#x52a1;&#x542f;&#x52a8;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.sockfd.listen(<span class=\"hljs-number\">3</span>)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Running server on %d..&quot;</span> % <span class=\"hljs-variable language_\">self</span>.port)\n        <span class=\"hljs-keyword\">while</span> <span class=\"hljs-literal\">True</span>:\n            connfd, addr = <span class=\"hljs-variable language_\">self</span>.sockfd.accept()\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Connect from&quot;</span>, addr)\n            t = Thread(target=<span class=\"hljs-variable language_\">self</span>.handle,\n                       args=(connfd,))\n            t.setDaemon(<span class=\"hljs-literal\">True</span>)\n            t.start()\n\n    <span class=\"hljs-comment\"># &#x5177;&#x4f53;&#x5904;&#x7406;&#x8bf7;&#x6c42;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">handle</span>(<span class=\"hljs-params\">self,connfd</span>):\n        request = connfd.recv(<span class=\"hljs-number\">1024</span>).decode()\n        request = json.loads(request)\n        <span class=\"hljs-comment\"># request-&gt; {&apos;method&apos;:&apos;GET&apos;,&apos;info&apos;:XX}</span>\n        <span class=\"hljs-keyword\">if</span> request[<span class=\"hljs-string\">&apos;method&apos;</span>] == <span class=\"hljs-string\">&apos;GET&apos;</span>:\n            <span class=\"hljs-keyword\">if</span> request[<span class=\"hljs-string\">&apos;info&apos;</span>] == <span class=\"hljs-string\">&apos;/&apos;</span> <span class=\"hljs-keyword\">or</span> request[<span class=\"hljs-string\">&apos;info&apos;</span>][-<span class=\"hljs-number\">5</span>:] == <span class=\"hljs-string\">&apos;.html&apos;</span>:\n                <span class=\"hljs-comment\"># &#x8bf7;&#x6c42;&#x7f51;&#x9875;</span>\n                response = <span class=\"hljs-variable language_\">self</span>.get_html(request[<span class=\"hljs-string\">&apos;info&apos;</span>])\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-comment\"># &#x8bf7;&#x6c42;&#x7684;&#x4e0d;&#x662f;&#x7f51;&#x9875;</span>\n                response = <span class=\"hljs-variable language_\">self</span>.get_data(request[<span class=\"hljs-string\">&apos;info&apos;</span>])\n        <span class=\"hljs-keyword\">elif</span> request[<span class=\"hljs-string\">&apos;method&apos;</span>] == <span class=\"hljs-string\">&apos;POST&apos;</span>:\n            <span class=\"hljs-keyword\">pass</span>\n        <span class=\"hljs-comment\"># response--&gt; {&apos;status&apos;:&apos;200&apos;,&apos;data&apos;:xxxx}</span>\n        response = json.dumps(response)\n        connfd.send(response.encode()) <span class=\"hljs-comment\"># &#x7ed9;httpserver</span>\n\n    <span class=\"hljs-comment\"># &#x5904;&#x7406;&#x7f51;&#x9875; info: &#x8bf7;&#x6c42;&#x5185;&#x5bb9;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_html</span>(<span class=\"hljs-params\">self,info</span>):\n        <span class=\"hljs-keyword\">if</span> info == <span class=\"hljs-string\">&apos;/&apos;</span>:\n            filename = DIR + <span class=\"hljs-string\">&quot;/index.html&quot;</span>\n        <span class=\"hljs-keyword\">else</span>:\n            filename = DIR + info\n        <span class=\"hljs-keyword\">try</span>:\n            fd = <span class=\"hljs-built_in\">open</span>(filename)\n        <span class=\"hljs-keyword\">except</span>:\n            <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(DIR+<span class=\"hljs-string\">&apos;/404.html&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n                <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&apos;status&apos;</span>:<span class=\"hljs-string\">&apos;404&apos;</span>,<span class=\"hljs-string\">&apos;data&apos;</span>:f.read()}\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&apos;status&apos;</span>:<span class=\"hljs-string\">&apos;200&apos;</span>, <span class=\"hljs-string\">&apos;data&apos;</span>:fd.read()}\n\n    <span class=\"hljs-comment\"># &#x5904;&#x7406;&#x6570;&#x636e;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">get_data</span>(<span class=\"hljs-params\">self,info</span>):\n        <span class=\"hljs-keyword\">for</span> url,func <span class=\"hljs-keyword\">in</span> urls:\n            <span class=\"hljs-comment\"># url --&gt; &apos;/time&apos;</span>\n            <span class=\"hljs-comment\"># func --&gt; get_time</span>\n            <span class=\"hljs-keyword\">if</span> info == url:\n                <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&apos;status&apos;</span>:<span class=\"hljs-string\">&apos;200&apos;</span>,<span class=\"hljs-string\">&apos;data&apos;</span>:func()}\n        <span class=\"hljs-comment\"># &#x5982;&#x679c;info&#x8bf7;&#x6c42;&#x6ca1;&#x6709;</span>\n        <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&apos;status&apos;</span>: <span class=\"hljs-string\">&apos;404&apos;</span>, <span class=\"hljs-string\">&apos;data&apos;</span>:<span class=\"hljs-string\">&apos;Sorry...&apos;</span>}\n\n\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    app = Application()\n    app.run() <span class=\"hljs-comment\"># &#x8fd0;&#x884c;&#x670d;&#x52a1;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"292,387"}},{"content":"<img src=\"../../image/12-python-new/06-project/mx.png\" alt=\"img\">","children":[],"payload":{"tag":"img","lines":"388,389"}}],"payload":{"tag":"h5","lines":"235,236"}}],"payload":{"tag":"h3","lines":"2,3"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
