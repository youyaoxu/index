<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#codegen\">#</a> codegen","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,9\"><code>&#x7f16;&#x8bd1;&#x7684;&#x6700;&#x540e;&#x4e00;&#x6b65;&#x5c31;&#x662f;&#x628a;&#x4f18;&#x5316;&#x540e;&#x7684; AST &#x6811;&#x8f6c;&#x6362;&#x6210;&#x53ef;&#x6267;&#x884c;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x8fd9;&#x90e8;&#x5206;&#x5185;&#x5bb9;&#x4e5f;&#x6bd4;&#x8f83;&#x591a;&#xff0c;&#x6211;&#x5e76;&#x4e0d;&#x6253;&#x7b97;&#x628a;&#x6240;&#x6709;&#x7684;&#x7ec6;&#x8282;&#x90fd;&#x8bb2;&#x4e86;&#xff0c;&#x4e86;&#x89e3;&#x6574;&#x4f53;&#x6d41;&#x7a0b;&#x5373;&#x53ef;&#x3002;&#x90e8;&#x5206;&#x7ec6;&#x8282;&#x6211;&#x4eec;&#x4f1a;&#x5728;&#x4e4b;&#x540e;&#x7684;&#x7ae0;&#x8282;&#x914d;&#x5408;&#x4e00;&#x4e2a;&#x5177;&#x4f53; case &#x53bb;&#x8be6;&#x7ec6;&#x8bb2;&#x3002;\n\n&#x4e3a;&#x4e86;&#x65b9;&#x4fbf;&#x7406;&#x89e3;&#xff0c;&#x6211;&#x4eec;&#x8fd8;&#x662f;&#x7528;&#x4e4b;&#x524d;&#x7684;&#x4f8b;&#x5b50;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,9"}},{"content":"<pre data-lines=\"10,15\"><code data-lines=\"10,15\"><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">:class</span>=<span class=\"hljs-string\">&quot;bindCls&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;list&quot;</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">&quot;isShow&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">v-for</span>=<span class=\"hljs-string\">&quot;(item,index) in data&quot;</span> @<span class=\"hljs-attr\">click</span>=<span class=\"hljs-string\">&quot;clickItem(index)&quot;</span>&gt;</span></span><span class=\"hljs-template-variable\">{{<span class=\"hljs-name\">item</span>}}</span><span class=\"language-xml\">:</span><span class=\"hljs-template-variable\">{{<span class=\"hljs-name\">index</span>}}</span><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span> \n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"10,15"}},{"content":"<pre data-lines=\"16,17\"><code>&#x5b83;&#x7ecf;&#x8fc7;&#x7f16;&#x8bd1;&#xff0c;&#x6267;&#x884c; `const code = generate(ast, options)`&#xff0c;&#x751f;&#x6210;&#x7684; `render` &#x4ee3;&#x7801;&#x4e32;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"16,17"}},{"content":"<pre data-lines=\"18,38\"><code data-lines=\"18,38\">with(this){\n  <span class=\"hljs-keyword\">return</span> (isShow) ?\n    _c(<span class=\"hljs-string\">&apos;ul&apos;</span>, {\n        staticClass: <span class=\"hljs-string\">&quot;list&quot;</span>,\n        <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>: <span class=\"hljs-title\">bindCls</span>\n      },\n      _<span class=\"hljs-title\">l</span>((<span class=\"hljs-title\">data</span>), <span class=\"hljs-title\">function</span>(<span class=\"hljs-title\">item</span>, <span class=\"hljs-title\">index</span>) </span>{\n        <span class=\"hljs-keyword\">return</span> _c(<span class=\"hljs-string\">&apos;li&apos;</span>, {\n          on: {\n            <span class=\"hljs-string\">&quot;click&quot;</span>: function(<span class=\"hljs-variable\">&#x24;event</span>) {\n              clickItem(<span class=\"hljs-keyword\">index</span>)\n            }\n          }\n        },\n        [_v(_s(item) + <span class=\"hljs-string\">&quot;:&quot;</span> + _s(<span class=\"hljs-keyword\">index</span>))])\n      })\n    ) : _e()\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"18,38"}},{"content":"<pre data-lines=\"39,40\"><code>&#x8fd9;&#x91cc;&#x7684; `_c` &#x51fd;&#x6570;&#x5b9a;&#x4e49;&#x5728; `src/core/instance/render.js` &#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"39,40"}},{"content":"<pre data-lines=\"41,44\"><code data-lines=\"41,44\">vm._c = (<span class=\"hljs-selector-tag\">a</span>, <span class=\"hljs-selector-tag\">b</span>, c, d) =&gt; <span class=\"hljs-built_in\">createElement</span>(vm, <span class=\"hljs-selector-tag\">a</span>, <span class=\"hljs-selector-tag\">b</span>, c, d, false) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"41,44"}},{"content":"<pre data-lines=\"45,46\"><code>&#x800c; `_l`&#x3001;`_v` &#x5b9a;&#x4e49;&#x5728; `src/core/instance/render-helpers/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"45,46"}},{"content":"<pre data-lines=\"47,66\"><code data-lines=\"47,66\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> installRenderHelpers (<span class=\"hljs-keyword\">target</span>: any) {\n  <span class=\"hljs-keyword\">target</span>._o = markOnce\n  <span class=\"hljs-keyword\">target</span>._n = toNumber\n  <span class=\"hljs-keyword\">target</span>._s = toString\n  <span class=\"hljs-keyword\">target</span>._l = renderList\n  <span class=\"hljs-keyword\">target</span>._t = renderSlot\n  <span class=\"hljs-keyword\">target</span>._q = looseEqual\n  <span class=\"hljs-keyword\">target</span>._i = looseIndexOf\n  <span class=\"hljs-keyword\">target</span>._m = renderStatic\n  <span class=\"hljs-keyword\">target</span>._f = resolveFilter\n  <span class=\"hljs-keyword\">target</span>._k = checkKeyCodes\n  <span class=\"hljs-keyword\">target</span>._b = bindObjectProps\n  <span class=\"hljs-keyword\">target</span>._v = createTextVNode\n  <span class=\"hljs-keyword\">target</span>._e = createEmptyVNode\n  <span class=\"hljs-keyword\">target</span>._u = resolveScopedSlots\n  <span class=\"hljs-keyword\">target</span>._g = bindObjectListeners\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"47,66"}},{"content":"<pre data-lines=\"67,70\"><code>&#x987e;&#x540d;&#x601d;&#x4e49;&#xff0c;`_c` &#x5c31;&#x662f;&#x6267;&#x884c; `createElement` &#x53bb;&#x521b;&#x5efa; VNode&#xff0c;&#x800c; `_l` &#x5bf9;&#x5e94; `renderList` &#x6e32;&#x67d3;&#x5217;&#x8868;&#xff1b;`_v` &#x5bf9;&#x5e94; `createTextVNode` &#x521b;&#x5efa;&#x6587;&#x672c; VNode&#xff1b;`_e` &#x5bf9;&#x4e8e; `createEmptyVNode`&#x521b;&#x5efa;&#x7a7a;&#x7684; VNode&#x3002;\n\n&#x5728; `compileToFunctions` &#x4e2d;&#xff0c;&#x4f1a;&#x628a;&#x8fd9;&#x4e2a; `render` &#x4ee3;&#x7801;&#x4e32;&#x8f6c;&#x6362;&#x6210;&#x51fd;&#x6570;&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compler/to-function.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"67,70"}},{"content":"<pre data-lines=\"71,84\"><code data-lines=\"71,84\">const compiled = compile(template, options)\nres.render = createFunction(compiled.render, fnGenErrors)\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">createFunction</span> (<span class=\"hljs-params\">code, errors</span>) {\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-keyword\">Function</span>(<span class=\"hljs-params\">code</span>)\n  } <span class=\"hljs-title function_\">catch</span> (<span class=\"hljs-params\">err</span>) {\n    errors.<span class=\"hljs-built_in\">push</span>({ err, code })\n    <span class=\"hljs-keyword\">return</span> noop\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"71,84"}},{"content":"<pre data-lines=\"85,86\"><code>&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x628a; `render` &#x4ee3;&#x7801;&#x4e32;&#x901a;&#x8fc7; `new Function` &#x7684;&#x65b9;&#x5f0f;&#x8f6c;&#x6362;&#x6210;&#x53ef;&#x6267;&#x884c;&#x7684;&#x51fd;&#x6570;&#xff0c;&#x8d4b;&#x503c;&#x7ed9; `vm.options.render`&#xff0c;&#x8fd9;&#x6837;&#x5f53;&#x7ec4;&#x4ef6;&#x901a;&#x8fc7; `vm._render` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x5c31;&#x4f1a;&#x6267;&#x884c;&#x8fd9;&#x4e2a; `render` &#x51fd;&#x6570;&#x3002;&#x90a3;&#x4e48;&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x5c31;&#x91cd;&#x70b9;&#x5173;&#x6ce8;&#x4e00;&#x4e0b;&#x8fd9;&#x4e2a; `render` &#x4ee3;&#x7801;&#x4e32;&#x7684;&#x751f;&#x6210;&#x8fc7;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"85,86"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#generate\">#</a> generate","children":[{"content":"<pre data-lines=\"90,93\"><code data-lines=\"90,93\"><span class=\"hljs-keyword\">const</span> code = <span class=\"hljs-keyword\">generate</span>(ast, options) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"90,93"}},{"content":"<pre data-lines=\"94,95\"><code>`generate` &#x51fd;&#x6570;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/codegen/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"94,95"}},{"content":"<pre data-lines=\"96,109\"><code data-lines=\"96,109\">export function generate (\n  ast: ASTElement | void,\n  options: CompilerOptions\n): CodegenResult {\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">state</span> = new CodegenState(options)\n  <span class=\"hljs-keyword\">const</span> code = ast ? genElement(ast, <span class=\"hljs-keyword\">state</span>) : &apos;_c(<span class=\"hljs-string\">&quot;div&quot;</span>)&apos;\n  return {\n    render: `with(this){return &#x24;{code}}`,\n    staticRenderFns: <span class=\"hljs-keyword\">state</span>.staticRenderFns\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"96,109"}},{"content":"<pre data-lines=\"110,111\"><code>`generate` &#x51fd;&#x6570;&#x9996;&#x5148;&#x901a;&#x8fc7; `genElement(ast, state)` &#x751f;&#x6210; `code`&#xff0c;&#x518d;&#x628a; `code` &#x7528; `with(this){return &#x24;{code}}}` &#x5305;&#x88f9;&#x8d77;&#x6765;&#x3002;&#x8fd9;&#x91cc;&#x7684; `state` &#x662f; `CodegenState` &#x7684;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;&#xff0c;&#x7a0d;&#x540e;&#x6211;&#x4eec;&#x5728;&#x7528;&#x5230;&#x5b83;&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x4ecb;&#x7ecd;&#x5b83;&#x3002;&#x5148;&#x6765;&#x770b;&#x4e00;&#x4e0b; `genElement`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"110,111"}},{"content":"<pre data-lines=\"112,149\"><code data-lines=\"112,149\">export function genElement (el: ASTElement, <span class=\"hljs-keyword\">state</span>: CodegenState): string {\n  if (el.staticRoot &amp;&amp; !el.staticProcessed) {\n    return genStatic(el, <span class=\"hljs-keyword\">state</span>)\n  } else if (el.<span class=\"hljs-keyword\">once</span> &amp;&amp; !el.<span class=\"hljs-keyword\">once</span>Processed) {\n    return genOnce(el, <span class=\"hljs-keyword\">state</span>)\n  } else if (el.<span class=\"hljs-keyword\">for</span> &amp;&amp; !el.<span class=\"hljs-keyword\">for</span>Processed) {\n    return genFor(el, <span class=\"hljs-keyword\">state</span>)\n  } else if (el.if &amp;&amp; !el.ifProcessed) {\n    return genIf(el, <span class=\"hljs-keyword\">state</span>)\n  } else if (el.<span class=\"hljs-keyword\">tag</span> === &apos;template&apos; &amp;&amp; !el.slotTarget) {\n    return genChildren(el, <span class=\"hljs-keyword\">state</span>) || &apos;void <span class=\"hljs-number\">0</span>&apos;\n  } else if (el.<span class=\"hljs-keyword\">tag</span> === &apos;slot&apos;) {\n    return genSlot(el, <span class=\"hljs-keyword\">state</span>)\n  } else {\n    // component or element\n    let code\n    if (el.component) {\n      code = genComponent(el.component, el, <span class=\"hljs-keyword\">state</span>)\n    } else {\n      <span class=\"hljs-keyword\">const</span> data = el.plain ? undefined : genData(el, <span class=\"hljs-keyword\">state</span>)\n\n      <span class=\"hljs-keyword\">const</span> children = el.inlineTemplate ? null : genChildren(el, <span class=\"hljs-keyword\">state</span>, true)\n      code = `_c(&apos;&#x24;{el.<span class=\"hljs-keyword\">tag</span>}&apos;&#x24;{\n        data ? `,&#x24;{data}` : &apos;&apos; // data\n      }&#x24;{\n        children ? `,&#x24;{children}` : &apos;&apos; // children\n      })`\n    }\n    // module transforms\n    <span class=\"hljs-keyword\">for</span> (let i = <span class=\"hljs-number\">0</span>; i <span class=\"hljs-variable\">&lt; state.transforms.length; i++) {\n      code = state.transforms[i](el, code)\n    }\n    return code\n  }\n} \n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"112,149"}},{"content":"<pre data-lines=\"150,151\"><code>&#x57fa;&#x672c;&#x5c31;&#x662f;&#x5224;&#x65ad;&#x5f53;&#x524d; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684;&#x5c5e;&#x6027;&#x6267;&#x884c;&#x4e0d;&#x540c;&#x7684;&#x4ee3;&#x7801;&#x751f;&#x6210;&#x51fd;&#x6570;&#xff0c;&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x5148;&#x4e86;&#x89e3;&#x4e00;&#x4e0b; `genFor` &#x548c; `genIf`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"150,151"}}],"payload":{"tag":"h2","lines":"87,89"}},{"content":"<a href=\"#genif\">#</a> <code>genIf</code>","children":[{"content":"<pre data-lines=\"155,197\"><code data-lines=\"155,197\">export function genIf (\n  el: <span class=\"hljs-literal\">any</span>,\n  <span class=\"hljs-keyword\">state</span>: CodegenState,\n  altGen?: Function,\n  altEmpty?: string\n): string {\n  el.ifProcessed = true // avoid recursion\n  return genIfConditions(el.ifConditions.slice(), <span class=\"hljs-keyword\">state</span>, altGen, altEmpty)\n}\n\nfunction genIfConditions (\n  conditions: ASTIfConditions,\n  <span class=\"hljs-keyword\">state</span>: CodegenState,\n  altGen?: Function,\n  altEmpty?: string\n): string {\n  if (!conditions.length) {\n    return altEmpty || &apos;_e()&apos;\n  }\n\n  <span class=\"hljs-keyword\">const</span> condition = conditions.shift()\n  if (condition.exp) {\n    return `(&#x24;{condition.exp})?&#x24;{\n      genTernaryExp(condition.<span class=\"hljs-built_in\">block</span>)\n    }:&#x24;{\n      genIfConditions(conditions, <span class=\"hljs-keyword\">state</span>, altGen, altEmpty)\n    }`\n  } else {\n    return `&#x24;{genTernaryExp(condition.<span class=\"hljs-built_in\">block</span>)}`\n  }\n\n  // v-if with v-once should generate code like (a)?_m(<span class=\"hljs-number\">0</span>):_m(<span class=\"hljs-number\">1</span>)\n  function genTernaryExp (el) {\n    return altGen\n      ? altGen(el, <span class=\"hljs-keyword\">state</span>)\n      : el.<span class=\"hljs-keyword\">once</span>\n        ? genOnce(el, <span class=\"hljs-keyword\">state</span>)\n        : genElement(el, <span class=\"hljs-keyword\">state</span>)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"155,197"}},{"content":"<pre data-lines=\"198,201\"><code>`genIf` &#x4e3b;&#x8981;&#x662f;&#x901a;&#x8fc7;&#x6267;&#x884c; `genIfConditions`&#xff0c;&#x5b83;&#x662f;&#x4f9d;&#x6b21;&#x4ece; `conditions` &#x83b7;&#x53d6;&#x7b2c;&#x4e00;&#x4e2a; `condition`&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7;&#x5bf9; `condition.exp` &#x53bb;&#x751f;&#x6210;&#x4e00;&#x6bb5;&#x4e09;&#x5143;&#x8fd0;&#x7b97;&#x7b26;&#x7684;&#x4ee3;&#x7801;&#xff0c;`:` &#x540e;&#x662f;&#x9012;&#x5f52;&#x8c03;&#x7528; `genIfConditions`&#xff0c;&#x8fd9;&#x6837;&#x5982;&#x679c;&#x6709;&#x591a;&#x4e2a; `conditions`&#xff0c;&#x5c31;&#x751f;&#x6210;&#x591a;&#x5c42;&#x4e09;&#x5143;&#x8fd0;&#x7b97;&#x903b;&#x8f91;&#x3002;&#x8fd9;&#x91cc;&#x6211;&#x4eec;&#x6682;&#x65f6;&#x4e0d;&#x8003;&#x8651; `v-once` &#x7684;&#x60c5;&#x51b5;&#xff0c;&#x6240;&#x4ee5; `genTernaryExp` &#x6700;&#x7ec8;&#x662f;&#x8c03;&#x7528;&#x4e86; `genElement`&#x3002;\n\n&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;&#x53ea;&#x6709;&#x4e00;&#x4e2a; `condition`&#xff0c;`exp` &#x4e3a; `isShow`&#xff0c;&#x56e0;&#x6b64;&#x751f;&#x6210;&#x5982;&#x4e0b;&#x4f2a;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"198,201"}},{"content":"<pre data-lines=\"202,205\"><code data-lines=\"202,205\">return (isShow) ? genElement(el, <span class=\"hljs-keyword\">state</span>) : _e() \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"202,205"}}],"payload":{"tag":"h2","lines":"152,154"}},{"content":"<a href=\"#genfor\">#</a> <code>genFor</code>","children":[{"content":"<pre data-lines=\"209,242\"><code data-lines=\"209,242\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genFor</span> (<span class=\"hljs-params\">\n  <span class=\"hljs-attr\">el</span>: <span class=\"hljs-built_in\">any</span>,\n  <span class=\"hljs-attr\">state</span>: <span class=\"hljs-title class_\">CodegenState</span>,\n  <span class=\"hljs-attr\">altGen</span>?: <span class=\"hljs-title class_\">Function</span>,\n  <span class=\"hljs-attr\">altHelper</span>?: <span class=\"hljs-built_in\">string</span>\n</span>): <span class=\"hljs-built_in\">string</span> {\n  <span class=\"hljs-keyword\">const</span> exp = el.<span class=\"hljs-property\">for</span>\n  <span class=\"hljs-keyword\">const</span> alias = el.<span class=\"hljs-property\">alias</span>\n  <span class=\"hljs-keyword\">const</span> iterator1 = el.<span class=\"hljs-property\">iterator1</span> ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{el.iterator1}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span>\n  <span class=\"hljs-keyword\">const</span> iterator2 = el.<span class=\"hljs-property\">iterator2</span> ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{el.iterator2}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span>\n\n  <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> !== <span class=\"hljs-string\">&apos;production&apos;</span> &amp;&amp;\n    state.<span class=\"hljs-title function_\">maybeComponent</span>(el) &amp;&amp;\n    el.<span class=\"hljs-property\">tag</span> !== <span class=\"hljs-string\">&apos;slot&apos;</span> &amp;&amp;\n    el.<span class=\"hljs-property\">tag</span> !== <span class=\"hljs-string\">&apos;template&apos;</span> &amp;&amp;\n    !el.<span class=\"hljs-property\">key</span>\n  ) {\n    state.<span class=\"hljs-title function_\">warn</span>(\n      <span class=\"hljs-string\">`&lt;<span class=\"hljs-subst\">&#x24;{el.tag}</span> v-for=&quot;<span class=\"hljs-subst\">&#x24;{alias}</span> in <span class=\"hljs-subst\">&#x24;{exp}</span>&quot;&gt;: component lists rendered with `</span> +\n      <span class=\"hljs-string\">`v-for should have explicit keys. `</span> +\n      <span class=\"hljs-string\">`See https://vuejs.org/guide/list.html#key for more info.`</span>,\n      <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">/* tip */</span>\n    )\n  }\n\n  el.<span class=\"hljs-property\">forProcessed</span> = <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// avoid recursion</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{altHelper || <span class=\"hljs-string\">&apos;_l&apos;</span>}</span>((<span class=\"hljs-subst\">&#x24;{exp}</span>),`</span> +\n    <span class=\"hljs-string\">`function(<span class=\"hljs-subst\">&#x24;{alias}</span><span class=\"hljs-subst\">&#x24;{iterator1}</span><span class=\"hljs-subst\">&#x24;{iterator2}</span>){`</span> +\n      <span class=\"hljs-string\">`return <span class=\"hljs-subst\">&#x24;{(altGen || genElement)(el, state)}</span>`</span> +\n    <span class=\"hljs-string\">&apos;})&apos;</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"209,242"}},{"content":"<pre data-lines=\"243,246\"><code>`genFor` &#x7684;&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#xff0c;&#x9996;&#x5148; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x4e2d;&#x83b7;&#x53d6;&#x4e86;&#x548c; `for` &#x76f8;&#x5173;&#x7684;&#x4e00;&#x4e9b;&#x5c5e;&#x6027;&#xff0c;&#x7136;&#x540e;&#x8fd4;&#x56de;&#x4e86;&#x4e00;&#x4e2a;&#x4ee3;&#x7801;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n\n&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;`exp` &#x662f; `data`&#xff0c;`alias` &#x662f; `item`&#xff0c;`iterator1` &#xff0c;&#x56e0;&#x6b64;&#x751f;&#x6210;&#x5982;&#x4e0b;&#x4f2a;&#x4ee3;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"243,246"}},{"content":"<pre data-lines=\"247,252\"><code data-lines=\"247,252\"><span class=\"hljs-built_in\">_l</span>((data), <span class=\"hljs-built_in\">function</span>(item, index) {\n  return <span class=\"hljs-built_in\">genElememt</span>(el, state)\n}) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"247,252"}}],"payload":{"tag":"h2","lines":"206,208"}},{"content":"<a href=\"#gendata-genchildren\">#</a> <code>genData</code> &amp; <code>genChildren</code>","children":[{"content":"<pre data-lines=\"256,257\"><code>&#x518d;&#x6b21;&#x56de;&#x987e;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#xff0c;&#x5b83;&#x7684;&#x6700;&#x5916;&#x5c42;&#x662f; `ul`&#xff0c;&#x9996;&#x5148;&#x6267;&#x884c; `genIf`&#xff0c;&#x5b83;&#x6700;&#x7ec8;&#x8c03;&#x7528;&#x4e86; `genElement(el, state)` &#x53bb;&#x751f;&#x6210;&#x5b50;&#x8282;&#x70b9;&#xff0c;&#x6ce8;&#x610f;&#xff0c;&#x8fd9;&#x91cc;&#x7684; `el` &#x4ecd;&#x7136;&#x6307;&#x5411;&#x7684;&#x662f; `ul` &#x5bf9;&#x5e94;&#x7684; AST &#x8282;&#x70b9;&#xff0c;&#x4f46;&#x662f;&#x6b64;&#x65f6;&#x7684; `el.ifProcessed` &#x4e3a; true&#xff0c;&#x6240;&#x4ee5;&#x547d;&#x4e2d;&#x6700;&#x540e;&#x4e00;&#x4e2a; else &#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"256,257"}},{"content":"<pre data-lines=\"258,279\"><code data-lines=\"258,279\"><span class=\"hljs-comment\">// component or element</span>\n<span class=\"hljs-keyword\">let</span> code\n<span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">component</span>) {\n  code = <span class=\"hljs-title function_\">genComponent</span>(el.<span class=\"hljs-property\">component</span>, el, state)\n} <span class=\"hljs-keyword\">else</span> {\n  <span class=\"hljs-keyword\">const</span> data = el.<span class=\"hljs-property\">plain</span> ? <span class=\"hljs-literal\">undefined</span> : <span class=\"hljs-title function_\">genData</span>(el, state)\n\n  <span class=\"hljs-keyword\">const</span> children = el.<span class=\"hljs-property\">inlineTemplate</span> ? <span class=\"hljs-literal\">null</span> : <span class=\"hljs-title function_\">genChildren</span>(el, state, <span class=\"hljs-literal\">true</span>)\n  code = <span class=\"hljs-string\">`_c(&apos;<span class=\"hljs-subst\">&#x24;{el.tag}</span>&apos;<span class=\"hljs-subst\">&#x24;{\n    data ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{data}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span> // data\n  }</span><span class=\"hljs-subst\">&#x24;{\n    children ? <span class=\"hljs-string\">`,<span class=\"hljs-subst\">&#x24;{children}</span>`</span> : <span class=\"hljs-string\">&apos;&apos;</span> // children\n  }</span>)`</span>\n}\n<span class=\"hljs-comment\">// module transforms</span>\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; state.<span class=\"hljs-property\">transforms</span>.<span class=\"hljs-property\">length</span>; i++) {\n  code = state.<span class=\"hljs-property\">transforms</span>[i](el, code)\n}\n<span class=\"hljs-keyword\">return</span> code \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"258,279"}},{"content":"<pre data-lines=\"280,283\"><code>&#x8fd9;&#x91cc;&#x6211;&#x4eec;&#x53ea;&#x5173;&#x6ce8; 2 &#x4e2a;&#x903b;&#x8f91;&#xff0c;`genData` &#x548c; `genChildren`&#xff1a;\n\n*   genData\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"280,283"}},{"content":"<pre data-lines=\"284,369\"><code data-lines=\"284,369\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genData</span> (<span class=\"hljs-params\">el: ASTElement, state: CodegenState</span>): string {\n  <span class=\"hljs-keyword\">let</span> data = <span class=\"hljs-string\">&apos;{&apos;</span>\n\n  <span class=\"hljs-comment\">// directives first.</span>\n  <span class=\"hljs-comment\">// directives may mutate the el&apos;s other properties before they are generated.</span>\n  <span class=\"hljs-keyword\">const</span> dirs = <span class=\"hljs-title function_\">genDirectives</span>(el, state)\n  <span class=\"hljs-keyword\">if</span> (dirs) data += dirs + <span class=\"hljs-string\">&apos;,&apos;</span>\n\n  <span class=\"hljs-comment\">// key</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">key</span>) {\n    data += <span class=\"hljs-string\">`key:<span class=\"hljs-subst\">&#x24;{el.key}</span>,`</span>\n  }\n  <span class=\"hljs-comment\">// ref</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">ref</span>) {\n    data += <span class=\"hljs-string\">`ref:<span class=\"hljs-subst\">&#x24;{el.ref}</span>,`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">refInFor</span>) {\n    data += <span class=\"hljs-string\">`refInFor:true,`</span>\n  }\n  <span class=\"hljs-comment\">// pre</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">pre</span>) {\n    data += <span class=\"hljs-string\">`pre:true,`</span>\n  }\n  <span class=\"hljs-comment\">// record original tag name for components using &quot;is&quot; attribute</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">component</span>) {\n    data += <span class=\"hljs-string\">`tag:&quot;<span class=\"hljs-subst\">&#x24;{el.tag}</span>&quot;,`</span>\n  }\n  <span class=\"hljs-comment\">// module data generation functions</span>\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; state.<span class=\"hljs-property\">dataGenFns</span>.<span class=\"hljs-property\">length</span>; i++) {\n    data += state.<span class=\"hljs-property\">dataGenFns</span>[i](el)\n  }\n  <span class=\"hljs-comment\">// attributes</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">attrs</span>) {\n    data += <span class=\"hljs-string\">`attrs:{<span class=\"hljs-subst\">&#x24;{genProps(el.attrs)}</span>},`</span>\n  }\n  <span class=\"hljs-comment\">// DOM props</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">props</span>) {\n    data += <span class=\"hljs-string\">`domProps:{<span class=\"hljs-subst\">&#x24;{genProps(el.props)}</span>},`</span>\n  }\n  <span class=\"hljs-comment\">// event handlers</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">events</span>) {\n    data += <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{genHandlers(el.events, <span class=\"hljs-literal\">false</span>, state.warn)}</span>,`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">nativeEvents</span>) {\n    data += <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{genHandlers(el.nativeEvents, <span class=\"hljs-literal\">true</span>, state.warn)}</span>,`</span>\n  }\n  <span class=\"hljs-comment\">// slot target</span>\n  <span class=\"hljs-comment\">// only for non-scoped slots</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">slotTarget</span> &amp;&amp; !el.<span class=\"hljs-property\">slotScope</span>) {\n    data += <span class=\"hljs-string\">`slot:<span class=\"hljs-subst\">&#x24;{el.slotTarget}</span>,`</span>\n  }\n  <span class=\"hljs-comment\">// scoped slots</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">scopedSlots</span>) {\n    data += <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{genScopedSlots(el.scopedSlots, state)}</span>,`</span>\n  }\n  <span class=\"hljs-comment\">// component v-model</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">model</span>) {\n    data += <span class=\"hljs-string\">`model:{value:<span class=\"hljs-subst\">&#x24;{\n      el.model.value\n    }</span>,callback:<span class=\"hljs-subst\">&#x24;{\n      el.model.callback\n    }</span>,expression:<span class=\"hljs-subst\">&#x24;{\n      el.model.expression\n    }</span>},`</span>\n  }\n  <span class=\"hljs-comment\">// inline-template</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">inlineTemplate</span>) {\n    <span class=\"hljs-keyword\">const</span> inlineTemplate = <span class=\"hljs-title function_\">genInlineTemplate</span>(el, state)\n    <span class=\"hljs-keyword\">if</span> (inlineTemplate) {\n      data += <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{inlineTemplate}</span>,`</span>\n    }\n  }\n  data = data.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/,&#x24;/</span>, <span class=\"hljs-string\">&apos;&apos;</span>) + <span class=\"hljs-string\">&apos;}&apos;</span>\n  <span class=\"hljs-comment\">// v-bind data wrap</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">wrapData</span>) {\n    data = el.<span class=\"hljs-title function_\">wrapData</span>(data)\n  }\n  <span class=\"hljs-comment\">// v-on data wrap</span>\n  <span class=\"hljs-keyword\">if</span> (el.<span class=\"hljs-property\">wrapListeners</span>) {\n    data = el.<span class=\"hljs-title function_\">wrapListeners</span>(data)\n  }\n  <span class=\"hljs-keyword\">return</span> data\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"284,369"}},{"content":"<pre data-lines=\"370,373\"><code>`genData` &#x51fd;&#x6570;&#x5c31;&#x662f;&#x6839;&#x636e; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684;&#x5c5e;&#x6027;&#x6784;&#x9020;&#x51fa;&#x4e00;&#x4e2a; `data` &#x5bf9;&#x8c61;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8fd9;&#x4e2a;&#x5728;&#x540e;&#x9762;&#x521b;&#x5efa; VNode &#x7684;&#x65f6;&#x5019;&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x4f20;&#x5165;&#x3002;\n\n&#x4e4b;&#x524d;&#x6211;&#x4eec;&#x63d0;&#x5230;&#x4e86; `CodegenState` &#x7684;&#x5b9e;&#x4f8b; `state`&#xff0c;&#x8fd9;&#x91cc;&#x6709;&#x4e00;&#x6bb5;&#x5173;&#x4e8e; `state` &#x7684;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"370,373"}},{"content":"<pre data-lines=\"374,379\"><code data-lines=\"374,379\"><span class=\"hljs-title\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; state.dataGenFns.length; i++) {\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span> += state.dataGenFns[i](<span class=\"hljs-title\">el</span>)</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"374,379"}},{"content":"<pre data-lines=\"380,381\"><code>`state.dataGenFns` &#x7684;&#x521d;&#x59cb;&#x5316;&#x5728;&#x5b83;&#x7684;&#x6784;&#x9020;&#x5668;&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"380,381"}},{"content":"<pre data-lines=\"382,391\"><code data-lines=\"382,391\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CodegenState</span> {\n  <span class=\"hljs-title function_\">constructor</span> (<span class=\"hljs-params\">options: CompilerOptions</span>) {\n    <span class=\"hljs-comment\">// ...</span>\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dataGenFns</span> = <span class=\"hljs-title function_\">pluckModuleFunction</span>(options.<span class=\"hljs-property\">modules</span>, <span class=\"hljs-string\">&apos;genData&apos;</span>)\n    <span class=\"hljs-comment\">// ...</span>\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"382,391"}},{"content":"<pre data-lines=\"392,393\"><code>&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x83b7;&#x53d6;&#x6240;&#x6709; `modules` &#x4e2d;&#x7684; `genData` &#x51fd;&#x6570;&#xff0c;&#x5176;&#x4e2d;&#xff0c;`class module` &#x548c; `style module` &#x5b9a;&#x4e49;&#x4e86; `genData` &#x51fd;&#x6570;&#x3002;&#x6bd4;&#x5982;&#x5b9a;&#x4e49;&#x5728; `src/platforms/web/compiler/modules/class.js` &#x4e2d;&#x7684; `genData` &#x65b9;&#x6cd5;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"392,393"}},{"content":"<pre data-lines=\"394,406\"><code data-lines=\"394,406\"><span class=\"hljs-title\">function</span> genData (el: <span class=\"hljs-type\">ASTElement</span>): string {\n  <span class=\"hljs-keyword\">let</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span> = &apos;&apos;</span>\n  <span class=\"hljs-keyword\">if</span> (el.staticClass) {\n    <span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span> += `staticClass:&#x24;{<span class=\"hljs-title\">el</span>.<span class=\"hljs-title\">staticClass</span>},`</span>\n  }\n  <span class=\"hljs-keyword\">if</span> (el.classBinding) {\n    <span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span> += `class:&#x24;{<span class=\"hljs-title\">el</span>.<span class=\"hljs-title\">classBinding</span>},`</span>\n  }\n  return <span class=\"hljs-class\"><span class=\"hljs-keyword\">data</span></span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"394,406"}},{"content":"<pre data-lines=\"407,408\"><code>&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;`ul` AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x5b9a;&#x4e49;&#x4e86; `el.staticClass` &#x548c; `el.classBinding`&#xff0c;&#x56e0;&#x6b64;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684; `data` &#x5b57;&#x7b26;&#x4e32;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"407,408"}},{"content":"<pre data-lines=\"409,415\"><code data-lines=\"409,415\"><span class=\"hljs-punctuation\">{</span>\n<span class=\"hljs-symbol\">  staticClass:</span> <span class=\"hljs-string\">&quot;list&quot;</span>,\n<span class=\"hljs-symbol\">  class:</span> bindCls\n<span class=\"hljs-punctuation\">}</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"409,415"}},{"content":"<pre data-lines=\"416,419\"><code>*   genChildren\n\n&#x63a5;&#x4e0b;&#x6765;&#x6211;&#x4eec;&#x518d;&#x6765;&#x770b;&#x4e00;&#x4e0b; `genChildren`&#xff0c;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/codegen/index.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"416,419"}},{"content":"<pre data-lines=\"420,448\"><code data-lines=\"420,448\">export function genChildren (\n  el: ASTElement,\n  <span class=\"hljs-keyword\">state</span>: CodegenState,\n  checkSkip?: boolean,\n  altGenElement?: Function,\n  altGenNode?: Function\n): string | void {\n  <span class=\"hljs-keyword\">const</span> children = el.children\n  if (children.length) {\n    <span class=\"hljs-keyword\">const</span> el: <span class=\"hljs-literal\">any</span> = children[<span class=\"hljs-number\">0</span>]\n    if (children.length === <span class=\"hljs-number\">1</span> &amp;&amp;\n      el.<span class=\"hljs-keyword\">for</span> &amp;&amp;\n      el.<span class=\"hljs-keyword\">tag</span> !== &apos;template&apos; &amp;&amp;\n      el.<span class=\"hljs-keyword\">tag</span> !== &apos;slot&apos;\n    ) {\n      return (altGenElement || genElement)(el, <span class=\"hljs-keyword\">state</span>)\n    }\n    <span class=\"hljs-keyword\">const</span> normalizationType = checkSkip\n      ? getNormalizationType(children, <span class=\"hljs-keyword\">state</span>.maybeComponent)\n      : <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-keyword\">const</span> gen = altGenNode || genNode\n    return `[&#x24;{children.map(c =&gt; gen(c, <span class=\"hljs-keyword\">state</span>)).join(&apos;,&apos;)}]&#x24;{\n      normalizationType ? `,&#x24;{normalizationType}` : &apos;&apos;\n    }`\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"420,448"}},{"content":"<pre data-lines=\"449,450\"><code>&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;`li` AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x662f; `ul` AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684; `children` &#x4e4b;&#x4e00;&#xff0c;&#x6ee1;&#x8db3; `(children.length === 1 &amp;&amp; el.for &amp;&amp; el.tag !== &apos;template&apos; &amp;&amp; el.tag !== &apos;slot&apos;)` &#x6761;&#x4ef6;&#xff0c;&#x56e0;&#x6b64;&#x901a;&#x8fc7; `genElement(el, state)` &#x751f;&#x6210; `li` AST&#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x4e5f;&#x5c31;&#x56de;&#x5230;&#x4e86;&#x6211;&#x4eec;&#x4e4b;&#x524d;&#x8c03;&#x7528; `genFor` &#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#xff0c;&#x628a;&#x5b83;&#x4eec;&#x62fc;&#x5728;&#x4e00;&#x8d77;&#x751f;&#x6210;&#x7684;&#x4f2a;&#x4ee3;&#x7801;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"449,450"}},{"content":"<pre data-lines=\"451,462\"><code data-lines=\"451,462\"><span class=\"hljs-keyword\">return</span> (isShow) ?\n    _c(<span class=\"hljs-string\">&apos;ul&apos;</span>, {\n        staticClass: <span class=\"hljs-string\">&quot;list&quot;</span>,\n        <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>: <span class=\"hljs-title\">bindCls</span>\n      },\n      _<span class=\"hljs-title\">l</span>((<span class=\"hljs-title\">data</span>), <span class=\"hljs-title\">function</span>(<span class=\"hljs-title\">item</span>, <span class=\"hljs-title\">index</span>) </span>{\n        <span class=\"hljs-keyword\">return</span> genElememt(el, <span class=\"hljs-keyword\">state</span>)\n      })\n    ) : _e() \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"451,462"}},{"content":"<pre data-lines=\"463,464\"><code>&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;&#x5728;&#x6267;&#x884c; `genElememt(el, state)` &#x7684;&#x65f6;&#x5019;&#xff0c;`el` &#x8fd8;&#x662f; `li` AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#xff0c;`el.forProcessed` &#x5df2;&#x4e3a; true&#xff0c;&#x6240;&#x4ee5;&#x4f1a;&#x7ee7;&#x7eed;&#x6267;&#x884c; `genData` &#x548c; `genChildren` &#x7684;&#x903b;&#x8f91;&#x3002;&#x7531;&#x4e8e; `el.events` &#x4e0d;&#x4e3a;&#x7a7a;&#xff0c;&#x5728;&#x6267;&#x884c; `genData` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c; &#x5982;&#x4e0b;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"463,464"}},{"content":"<pre data-lines=\"465,470\"><code data-lines=\"465,470\">if (el.events) {\n  data += `&#x24;{genHandlers(el.events, false, <span class=\"hljs-keyword\">state</span>.warn)},`\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"465,470"}},{"content":"<pre data-lines=\"471,472\"><code>`genHandlers` &#x7684;&#x5b9a;&#x4e49;&#x5728; `src/compiler/codegen/events.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"471,472"}},{"content":"<pre data-lines=\"473,486\"><code data-lines=\"473,486\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genHandlers</span> (<span class=\"hljs-params\">\n  <span class=\"hljs-attr\">events</span>: <span class=\"hljs-title class_\">ASTElementHandlers</span>,\n  <span class=\"hljs-attr\">isNative</span>: <span class=\"hljs-built_in\">boolean</span>,\n  <span class=\"hljs-attr\">warn</span>: <span class=\"hljs-title class_\">Function</span>\n</span>): <span class=\"hljs-built_in\">string</span> {\n  <span class=\"hljs-keyword\">let</span> res = isNative ? <span class=\"hljs-string\">&apos;nativeOn:{&apos;</span> : <span class=\"hljs-string\">&apos;on:{&apos;</span>\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">const</span> name <span class=\"hljs-keyword\">in</span> events) {\n    res += <span class=\"hljs-string\">`&quot;<span class=\"hljs-subst\">&#x24;{name}</span>&quot;:<span class=\"hljs-subst\">&#x24;{genHandler(name, events[name])}</span>,`</span>\n  }\n  <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">slice</span>(<span class=\"hljs-number\">0</span>, -<span class=\"hljs-number\">1</span>) + <span class=\"hljs-string\">&apos;}&apos;</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"473,486"}},{"content":"<pre data-lines=\"487,488\"><code>`genHandler` &#x7684;&#x903b;&#x8f91;&#x5c31;&#x4e0d;&#x4ecb;&#x7ecd;&#x4e86;&#xff0c;&#x5f88;&#x5927;&#x90e8;&#x5206;&#x90fd;&#x662f;&#x5bf9;&#x4fee;&#x9970;&#x7b26; `modifier` &#x7684;&#x5904;&#x7406;&#xff0c;&#x611f;&#x5174;&#x8da3;&#x540c;&#x5b66;&#x53ef;&#x4ee5;&#x81ea;&#x5df1;&#x770b;&#xff0c;&#x5bf9;&#x4e8e;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#xff0c;&#x5b83;&#x6700;&#x7ec8; `genData` &#x751f;&#x6210;&#x7684; `data` &#x5b57;&#x7b26;&#x4e32;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"487,488"}},{"content":"<pre data-lines=\"489,498\"><code data-lines=\"489,498\">{\n  <span class=\"hljs-literal\">on</span>: {\n    <span class=\"hljs-string\">&quot;click&quot;</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-variable\">&#x24;event</span>) {\n      clickItem(index)\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"489,498"}},{"content":"<pre data-lines=\"499,500\"><code>`genChildren` &#x7684;&#x65f6;&#x5019;&#xff0c;&#x4f1a;&#x6267;&#x884c;&#x5230;&#x5982;&#x4e0b;&#x903b;&#x8f91;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"499,500"}},{"content":"<pre data-lines=\"501,529\"><code data-lines=\"501,529\">export function genChildren (\n  el: ASTElement,\n  <span class=\"hljs-keyword\">state</span>: CodegenState,\n  checkSkip?: boolean,\n  altGenElement?: Function,\n  altGenNode?: Function\n): string | void {\n  // ...\n  <span class=\"hljs-keyword\">const</span> normalizationType = checkSkip\n    ? getNormalizationType(children, <span class=\"hljs-keyword\">state</span>.maybeComponent)\n    : <span class=\"hljs-number\">0</span>\n  <span class=\"hljs-keyword\">const</span> gen = altGenNode || genNode\n  return `[&#x24;{children.map(c =&gt; gen(c, <span class=\"hljs-keyword\">state</span>)).join(&apos;,&apos;)}]&#x24;{\n    normalizationType ? `,&#x24;{normalizationType}` : &apos;&apos;\n  }`\n}\n\nfunction genNode (node: ASTNode, <span class=\"hljs-keyword\">state</span>: CodegenState): string {\n  if (node.type === <span class=\"hljs-number\">1</span>) {\n    return genElement(node, <span class=\"hljs-keyword\">state</span>)\n  } if (node.type === <span class=\"hljs-number\">3</span> &amp;&amp; node.isComment) {\n    return genComment(node)\n  } else {\n    return genText(node)\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"501,529"}},{"content":"<pre data-lines=\"530,531\"><code>`genChildren` &#x7684;&#x5c31;&#x662f;&#x904d;&#x5386; `children`&#xff0c;&#x7136;&#x540e;&#x6267;&#x884c; `genNode` &#x65b9;&#x6cd5;&#xff0c;&#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684; `type` &#x6267;&#x884c;&#x5177;&#x4f53;&#x7684;&#x65b9;&#x6cd5;&#x3002;&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;`li` AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#x7684; `children` &#x662f; type &#x4e3a; 2 &#x7684;&#x8868;&#x8fbe;&#x5f0f; AST &#x5143;&#x7d20;&#x8282;&#x70b9;&#xff0c;&#x90a3;&#x4e48;&#x4f1a;&#x6267;&#x884c;&#x5230; `genText(node)` &#x903b;&#x8f91;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"530,531"}},{"content":"<pre data-lines=\"532,540\"><code data-lines=\"532,540\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">genText</span> (<span class=\"hljs-params\">text: ASTText | ASTExpression</span>): <span class=\"hljs-title function_\">string</span> {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`_v(<span class=\"hljs-subst\">&#x24;{<span class=\"hljs-built_in\">text</span>.type === <span class=\"hljs-number\">2</span>\n    ? <span class=\"hljs-built_in\">text</span>.expression\n    : transformSpecialNewlines(JSON.stringify(<span class=\"hljs-built_in\">text</span>.<span class=\"hljs-built_in\">text</span>))\n  }</span>)`</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"532,540"}},{"content":"<pre data-lines=\"541,542\"><code>&#x56e0;&#x6b64;&#x5728;&#x6211;&#x4eec;&#x7684;&#x4f8b;&#x5b50;&#x4e2d;&#xff0c;`genChildren` &#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#x4e32;&#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"541,542"}},{"content":"<pre data-lines=\"543,546\"><code data-lines=\"543,546\">[<span class=\"hljs-name\">_v</span>(<span class=\"hljs-name\">_s</span>(<span class=\"hljs-name\">item</span>) + <span class=\"hljs-string\">&quot;:&quot;</span> + _s(<span class=\"hljs-name\">index</span>))] \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"543,546"}},{"content":"<pre data-lines=\"547,548\"><code>&#x548c;&#x4e4b;&#x524d;&#x62fc;&#x5728;&#x4e00;&#x8d77;&#xff0c;&#x6700;&#x7ec8;&#x751f;&#x6210;&#x7684; `code` &#x5982;&#x4e0b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"547,548"}},{"content":"<pre data-lines=\"549,567\"><code data-lines=\"549,567\"> <span class=\"hljs-keyword\">return</span> (isShow) ?\n    _c(<span class=\"hljs-string\">&apos;ul&apos;</span>, {\n        staticClass: <span class=\"hljs-string\">&quot;list&quot;</span>,\n        <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>: <span class=\"hljs-title\">bindCls</span>\n      },\n      _<span class=\"hljs-title\">l</span>((<span class=\"hljs-title\">data</span>), <span class=\"hljs-title\">function</span>(<span class=\"hljs-title\">item</span>, <span class=\"hljs-title\">index</span>) </span>{\n        <span class=\"hljs-keyword\">return</span> _c(<span class=\"hljs-string\">&apos;li&apos;</span>, {\n          on: {\n            <span class=\"hljs-string\">&quot;click&quot;</span>: function(<span class=\"hljs-variable\">&#x24;event</span>) {\n              clickItem(<span class=\"hljs-keyword\">index</span>)\n            }\n          }\n        },\n        [_v(_s(item) + <span class=\"hljs-string\">&quot;:&quot;</span> + _s(<span class=\"hljs-keyword\">index</span>))])\n      })\n    ) : _e() \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"549,567"}}],"payload":{"tag":"h2","lines":"253,255"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"571,574\"><code>&#x8fd9;&#x4e00;&#x8282;&#x901a;&#x8fc7;&#x4f8b;&#x5b50;&#x914d;&#x5408;&#x89e3;&#x6790;&#xff0c;&#x6211;&#x4eec;&#x5bf9;&#x4ece; `ast -&gt; code` &#x8fd9;&#x4e00;&#x6b65;&#x6709;&#x4e86;&#x4e00;&#x4e9b;&#x4e86;&#x89e3;&#xff0c;&#x7f16;&#x8bd1;&#x540e;&#x751f;&#x6210;&#x7684;&#x4ee3;&#x7801;&#x5c31;&#x662f;&#x5728;&#x8fd0;&#x884c;&#x65f6;&#x6267;&#x884c;&#x7684;&#x4ee3;&#x7801;&#x3002;&#x7531;&#x4e8e; `genCode` &#x7684;&#x5185;&#x5bb9;&#x6709;&#x5f88;&#x591a;&#xff0c;&#x6240;&#x4ee5;&#x6211;&#x5bf9;&#x5927;&#x5bb6;&#x7684;&#x5efa;&#x8bae;&#x662f;&#x6ca1;&#x5fc5;&#x8981;&#x628a;&#x6240;&#x6709;&#x7684;&#x7ec6;&#x8282;&#x90fd;&#x4e00;&#x6b21;&#x6027;&#x770b;&#x5b8c;&#xff0c;&#x6211;&#x4eec;&#x5e94;&#x8be5;&#x6839;&#x636e;&#x5177;&#x4f53;&#x4e00;&#x4e2a; case&#xff0c;&#x8d70;&#x5b8c;&#x4e00;&#x6761;&#x4e3b;&#x7ebf;&#x5373;&#x53ef;&#x3002;\n\n&#x5728;&#x4e4b;&#x540e;&#x7684;&#x7ae0;&#x8282;&#x6211;&#x4eec;&#x4f1a;&#x5bf9; `slot` &#x7684;&#x5b9e;&#x73b0;&#x505a;&#x89e3;&#x6790;&#xff0c;&#x6211;&#x4eec;&#x4f1a;&#x91cd;&#x65b0;&#x590d;&#x4e60;&#x7f16;&#x8bd1;&#x7684;&#x7ae0;&#x8282;&#xff0c;&#x9488;&#x5bf9;&#x5177;&#x4f53;&#x95ee;&#x9898;&#x505a;&#x5177;&#x4f53;&#x5206;&#x6790;&#xff0c;&#x6709;&#x5229;&#x4e8e;&#x6211;&#x4eec;&#x6392;&#x9664;&#x5e72;&#x6270;&#xff0c;&#x5bf9;&#x7f16;&#x8bd1;&#x8fc7;&#x7a0b;&#x7684;&#x5b66;&#x4e60;&#x6709;&#x66f4;&#x6df1;&#x5165;&#x7684;&#x7406;&#x89e3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"571,574"}}],"payload":{"tag":"h2","lines":"568,570"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
