<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"#createelement\">#</a> createElement","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"<pre data-lines=\"6,7\"><code>Vue.js &#x5229;&#x7528; createElement &#x65b9;&#x6cd5;&#x521b;&#x5efa; VNode&#xff0c;&#x5b83;&#x5b9a;&#x4e49;&#x5728; `src/core/vdom/create-element.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,7"}},{"content":"<pre data-lines=\"8,30\"><code data-lines=\"8,30\">// <span class=\"hljs-keyword\">wrapper</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-keyword\">for</span> providing a more flexible interface\n// <span class=\"hljs-keyword\">without</span> getting yelled at <span class=\"hljs-keyword\">by</span> flow\nexport <span class=\"hljs-keyword\">function</span> createElement (\n  context: Component,\n  tag: <span class=\"hljs-keyword\">any</span>,\n  data: <span class=\"hljs-keyword\">any</span>,\n  children: <span class=\"hljs-keyword\">any</span>,\n  normalizationType: <span class=\"hljs-keyword\">any</span>,\n  alwaysNormalize: <span class=\"hljs-type\">boolean</span>\n): VNode | <span class=\"hljs-keyword\">Array</span>&lt;VNode&gt; {\n  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">Array</span>.isArray(data) || isPrimitive(data)) {\n    normalizationType = children\n    children = data\n    data = undefined\n  }\n  <span class=\"hljs-keyword\">if</span> (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE\n  }\n  <span class=\"hljs-keyword\">return</span> _createElement(context, tag, data, children, normalizationType)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"8,30"}},{"content":"<pre data-lines=\"31,32\"><code>`createElement` &#x65b9;&#x6cd5;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x5bf9; `_createElement` &#x65b9;&#x6cd5;&#x7684;&#x5c01;&#x88c5;&#xff0c;&#x5b83;&#x5141;&#x8bb8;&#x4f20;&#x5165;&#x7684;&#x53c2;&#x6570;&#x66f4;&#x52a0;&#x7075;&#x6d3b;&#xff0c;&#x5728;&#x5904;&#x7406;&#x8fd9;&#x4e9b;&#x53c2;&#x6570;&#x540e;&#xff0c;&#x8c03;&#x7528;&#x771f;&#x6b63;&#x521b;&#x5efa; VNode &#x7684;&#x51fd;&#x6570; `_createElement`&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"31,32"}},{"content":"<pre data-lines=\"33,119\"><code data-lines=\"33,119\">export function _createElement (\n  <span class=\"hljs-name\">context</span>: Component,\n  tag?: string | Class&lt;Component&gt; | Function | Object,\n  data?: VNodeData,\n  children?: any,\n  normalizationType?: number\n): VNode | Array&lt;VNode&gt; {\n  if (<span class=\"hljs-name\">isDef</span>(<span class=\"hljs-name\">data</span>) <span class=\"hljs-symbol\">&amp;&amp;</span> isDef((<span class=\"hljs-name\">data</span>: any).__ob__)) {\n    process.env.NODE_ENV !== &apos;production&apos; <span class=\"hljs-symbol\">&amp;&amp;</span> warn(\n      `Avoid using observed data object as vnode data: &#x24;{JSON.stringify(<span class=\"hljs-name\">data</span>)}\\n` +\n      &apos;Always create fresh vnode data objects in each render!&apos;,\n      context\n    )\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (<span class=\"hljs-name\">isDef</span>(<span class=\"hljs-name\">data</span>) <span class=\"hljs-symbol\">&amp;&amp;</span> isDef(<span class=\"hljs-name\">data</span>.is)) {\n    tag = data.is\n  }\n  if (!tag) {\n    // in case of component <span class=\"hljs-symbol\">:is</span> set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (<span class=\"hljs-name\">process</span>.env.NODE_ENV !== &apos;production&apos; <span class=\"hljs-symbol\">&amp;&amp;</span>\n    isDef(<span class=\"hljs-name\">data</span>) <span class=\"hljs-symbol\">&amp;&amp;</span> isDef(<span class=\"hljs-name\">data</span>.key) <span class=\"hljs-symbol\">&amp;&amp;</span> !isPrimitive(<span class=\"hljs-name\">data</span>.key)\n  ) {\n    if (!__WEEX__ || !(&apos;@binding&apos; in data.key)) {\n      warn(\n        &apos;Avoid using non-primitive value as key, &apos; +\n        &apos;use string/number value instead.&apos;,\n        context\n      )\n    }\n  }\n  // support single function children as default scoped slot\n  if (<span class=\"hljs-name\">Array</span>.isArray(<span class=\"hljs-name\">children</span>) <span class=\"hljs-symbol\">&amp;&amp;</span>\n    typeof children[<span class=\"hljs-number\">0</span>] === &apos;function&apos;\n  ) {\n    data = data || {}\n    data.scopedSlots = { default: children[<span class=\"hljs-number\">0</span>] }\n    children.length = <span class=\"hljs-number\">0</span>\n  }\n  if (<span class=\"hljs-name\">normalizationType</span> === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(<span class=\"hljs-name\">children</span>)\n  } else if (<span class=\"hljs-name\">normalizationType</span> === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(<span class=\"hljs-name\">children</span>)\n  }\n  let vnode, ns\n  if (<span class=\"hljs-name\">typeof</span> tag === &apos;string&apos;) {\n    let Ctor\n    ns = (<span class=\"hljs-name\">context</span>.&#x24;vnode <span class=\"hljs-symbol\">&amp;&amp;</span> context.&#x24;vnode.ns) || config.getTagNamespace(<span class=\"hljs-name\">tag</span>)\n    if (<span class=\"hljs-name\">config</span>.isReservedTag(<span class=\"hljs-name\">tag</span>)) {\n      // platform built-in elements\n      vnode = new VNode(\n        <span class=\"hljs-name\">config</span>.parsePlatformTagName(<span class=\"hljs-name\">tag</span>), data, children,\n        undefined, undefined, context\n      )\n    } else if (<span class=\"hljs-name\">isDef</span>(<span class=\"hljs-name\">Ctor</span> = resolveAsset(<span class=\"hljs-name\">context</span>.&#x24;options, &apos;components&apos;, tag))) {\n      // component\n      vnode = createComponent(<span class=\"hljs-name\">Ctor</span>, data, context, children, tag)\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        <span class=\"hljs-name\">tag</span>, data, children,\n        undefined, undefined, context\n      )\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(<span class=\"hljs-name\">tag</span>, data, context, children)\n  }\n  if (<span class=\"hljs-name\">Array</span>.isArray(<span class=\"hljs-name\">vnode</span>)) {\n    return vnode\n  } else if (<span class=\"hljs-name\">isDef</span>(<span class=\"hljs-name\">vnode</span>)) {\n    if (<span class=\"hljs-name\">isDef</span>(<span class=\"hljs-name\">ns</span>)) applyNS(<span class=\"hljs-name\">vnode</span>, ns)\n    if (<span class=\"hljs-name\">isDef</span>(<span class=\"hljs-name\">data</span>)) registerDeepBindings(<span class=\"hljs-name\">data</span>)\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"33,119"}},{"content":"<pre data-lines=\"120,123\"><code>`_createElement` &#x65b9;&#x6cd5;&#x6709; 5 &#x4e2a;&#x53c2;&#x6570;&#xff0c;`context` &#x8868;&#x793a; VNode &#x7684;&#x4e0a;&#x4e0b;&#x6587;&#x73af;&#x5883;&#xff0c;&#x5b83;&#x662f; `Component` &#x7c7b;&#x578b;&#xff1b;`tag` &#x8868;&#x793a;&#x6807;&#x7b7e;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x662f;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x662f;&#x4e00;&#x4e2a; `Component`&#xff1b;`data` &#x8868;&#x793a; VNode &#x7684;&#x6570;&#x636e;&#xff0c;&#x5b83;&#x662f;&#x4e00;&#x4e2a; `VNodeData` &#x7c7b;&#x578b;&#xff0c;&#x53ef;&#x4ee5;&#x5728; `flow/vnode.js` &#x4e2d;&#x627e;&#x5230;&#x5b83;&#x7684;&#x5b9a;&#x4e49;&#xff0c;&#x8fd9;&#x91cc;&#x5148;&#x4e0d;&#x5c55;&#x5f00;&#x8bf4;&#xff1b;`children` &#x8868;&#x793a;&#x5f53;&#x524d; VNode &#x7684;&#x5b50;&#x8282;&#x70b9;&#xff0c;&#x5b83;&#x662f;&#x4efb;&#x610f;&#x7c7b;&#x578b;&#x7684;&#xff0c;&#x5b83;&#x63a5;&#x4e0b;&#x6765;&#x9700;&#x8981;&#x88ab;&#x89c4;&#x8303;&#x4e3a;&#x6807;&#x51c6;&#x7684; VNode &#x6570;&#x7ec4;&#xff1b;`normalizationType` &#x8868;&#x793a;&#x5b50;&#x8282;&#x70b9;&#x89c4;&#x8303;&#x7684;&#x7c7b;&#x578b;&#xff0c;&#x7c7b;&#x578b;&#x4e0d;&#x540c;&#x89c4;&#x8303;&#x7684;&#x65b9;&#x6cd5;&#x4e5f;&#x5c31;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x5b83;&#x4e3b;&#x8981;&#x662f;&#x53c2;&#x8003; `render` &#x51fd;&#x6570;&#x662f;&#x7f16;&#x8bd1;&#x751f;&#x6210;&#x7684;&#x8fd8;&#x662f;&#x7528;&#x6237;&#x624b;&#x5199;&#x7684;&#x3002;\n\n`createElement` &#x51fd;&#x6570;&#x7684;&#x6d41;&#x7a0b;&#x7565;&#x5fae;&#x6709;&#x70b9;&#x591a;&#xff0c;&#x6211;&#x4eec;&#x63a5;&#x4e0b;&#x6765;&#x4e3b;&#x8981;&#x5206;&#x6790; 2 &#x4e2a;&#x91cd;&#x70b9;&#x7684;&#x6d41;&#x7a0b; &#x2014;&#x2014; `children` &#x7684;&#x89c4;&#x8303;&#x5316;&#x4ee5;&#x53ca; VNode &#x7684;&#x521b;&#x5efa;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,123"}}],"payload":{"tag":"h2","lines":"3,5"}},{"content":"<a href=\"#children-%E7%9A%84%E8%A7%84%E8%8C%83%E5%8C%96\">#</a> children &#x7684;&#x89c4;&#x8303;&#x5316;","children":[{"content":"<pre data-lines=\"127,130\"><code>&#x7531;&#x4e8e; Virtual DOM &#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x4e2a;&#x6811;&#x72b6;&#x7ed3;&#x6784;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a; VNode &#x53ef;&#x80fd;&#x4f1a;&#x6709;&#x82e5;&#x5e72;&#x4e2a;&#x5b50;&#x8282;&#x70b9;&#xff0c;&#x8fd9;&#x4e9b;&#x5b50;&#x8282;&#x70b9;&#x5e94;&#x8be5;&#x4e5f;&#x662f; VNode &#x7684;&#x7c7b;&#x578b;&#x3002;`_createElement` &#x63a5;&#x6536;&#x7684;&#x7b2c; 4 &#x4e2a;&#x53c2;&#x6570; children &#x662f;&#x4efb;&#x610f;&#x7c7b;&#x578b;&#x7684;&#xff0c;&#x56e0;&#x6b64;&#x6211;&#x4eec;&#x9700;&#x8981;&#x628a;&#x5b83;&#x4eec;&#x89c4;&#x8303;&#x6210; VNode &#x7c7b;&#x578b;&#x3002;\n\n&#x8fd9;&#x91cc;&#x6839;&#x636e; `normalizationType` &#x7684;&#x4e0d;&#x540c;&#xff0c;&#x8c03;&#x7528;&#x4e86; `normalizeChildren(children)` &#x548c; `simpleNormalizeChildren(children)` &#x65b9;&#x6cd5;&#xff0c;&#x5b83;&#x4eec;&#x7684;&#x5b9a;&#x4e49;&#x90fd;&#x5728; `src/core/vdom/helpers/normalzie-children.js` &#x4e2d;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"127,130"}},{"content":"<pre data-lines=\"131,165\"><code data-lines=\"131,165\"><span class=\"hljs-comment\">// The template compiler attempts to minimize the need for normalization by</span>\n<span class=\"hljs-comment\">// statically analyzing the template at compile time.</span>\n<span class=\"hljs-comment\">//</span>\n<span class=\"hljs-comment\">// For plain HTML markup, normalization can be completely skipped because the</span>\n<span class=\"hljs-comment\">// generated render function is guaranteed to return Array&lt;VNode&gt;. There are</span>\n<span class=\"hljs-comment\">// two cases where extra normalization is needed:</span>\n\n<span class=\"hljs-comment\">// 1. When the children contains components - because a functional component</span>\n<span class=\"hljs-comment\">// may return an Array instead of a single root. In this case, just a simple</span>\n<span class=\"hljs-comment\">// normalization is needed - if any child is an Array, we flatten the whole</span>\n<span class=\"hljs-comment\">// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep</span>\n<span class=\"hljs-comment\">// because functional components already normalize their own children.</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">simpleNormalizeChildren</span> (<span class=\"hljs-params\">children: any</span>) {\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; children.<span class=\"hljs-property\">length</span>; i++) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(children[i])) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">concat</span>.<span class=\"hljs-title function_\">apply</span>([], children)\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> children\n}\n\n<span class=\"hljs-comment\">// 2. When the children contains constructs that always generated nested Arrays,</span>\n<span class=\"hljs-comment\">// e.g. &lt;template&gt;, &lt;slot&gt;, v-for, or when the children is provided by user</span>\n<span class=\"hljs-comment\">// with hand-written render functions / JSX. In such cases a full normalization</span>\n<span class=\"hljs-comment\">// is needed to cater to all possible types of children values.</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">normalizeChildren</span> (<span class=\"hljs-params\">children: any</span>): ?<span class=\"hljs-title class_\">Array</span>&lt;<span class=\"hljs-title class_\">VNode</span>&gt; {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">isPrimitive</span>(children)\n    ? [<span class=\"hljs-title function_\">createTextVNode</span>(children)]\n    : <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">isArray</span>(children)\n      ? <span class=\"hljs-title function_\">normalizeArrayChildren</span>(children)\n      : <span class=\"hljs-literal\">undefined</span>\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,165"}},{"content":"<pre data-lines=\"166,169\"><code>`simpleNormalizeChildren` &#x65b9;&#x6cd5;&#x8c03;&#x7528;&#x573a;&#x666f;&#x662f; `render` &#x51fd;&#x6570;&#x662f;&#x7f16;&#x8bd1;&#x751f;&#x6210;&#x7684;&#x3002;&#x7406;&#x8bba;&#x4e0a;&#x7f16;&#x8bd1;&#x751f;&#x6210;&#x7684; `children` &#x90fd;&#x5df2;&#x7ecf;&#x662f; VNode &#x7c7b;&#x578b;&#x7684;&#xff0c;&#x4f46;&#x8fd9;&#x91cc;&#x6709;&#x4e00;&#x4e2a;&#x4f8b;&#x5916;&#xff0c;&#x5c31;&#x662f; `functional component` &#x51fd;&#x6570;&#x5f0f;&#x7ec4;&#x4ef6;&#x8fd4;&#x56de;&#x7684;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x800c;&#x4e0d;&#x662f;&#x4e00;&#x4e2a;&#x6839;&#x8282;&#x70b9;&#xff0c;&#x6240;&#x4ee5;&#x4f1a;&#x901a;&#x8fc7; `Array.prototype.concat` &#x65b9;&#x6cd5;&#x628a;&#x6574;&#x4e2a; `children` &#x6570;&#x7ec4;&#x6253;&#x5e73;&#xff0c;&#x8ba9;&#x5b83;&#x7684;&#x6df1;&#x5ea6;&#x53ea;&#x6709;&#x4e00;&#x5c42;&#x3002;\n\n`normalizeChildren` &#x65b9;&#x6cd5;&#x7684;&#x8c03;&#x7528;&#x573a;&#x666f;&#x6709; 2 &#x79cd;&#xff0c;&#x4e00;&#x4e2a;&#x573a;&#x666f;&#x662f; `render` &#x51fd;&#x6570;&#x662f;&#x7528;&#x6237;&#x624b;&#x5199;&#x7684;&#xff0c;&#x5f53; `children` &#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x8282;&#x70b9;&#x7684;&#x65f6;&#x5019;&#xff0c;Vue.js &#x4ece;&#x63a5;&#x53e3;&#x5c42;&#x9762;&#x5141;&#x8bb8;&#x7528;&#x6237;&#x628a; `children` &#x5199;&#x6210;&#x57fa;&#x7840;&#x7c7b;&#x578b;&#x7528;&#x6765;&#x521b;&#x5efa;&#x5355;&#x4e2a;&#x7b80;&#x5355;&#x7684;&#x6587;&#x672c;&#x8282;&#x70b9;&#xff0c;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4f1a;&#x8c03;&#x7528; `createTextVNode` &#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x6587;&#x672c;&#x8282;&#x70b9;&#x7684; VNode&#xff1b;&#x53e6;&#x4e00;&#x4e2a;&#x573a;&#x666f;&#x662f;&#x5f53;&#x7f16;&#x8bd1; `slot`&#x3001;`v-for` &#x7684;&#x65f6;&#x5019;&#x4f1a;&#x4ea7;&#x751f;&#x5d4c;&#x5957;&#x6570;&#x7ec4;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x4f1a;&#x8c03;&#x7528; `normalizeArrayChildren` &#x65b9;&#x6cd5;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"166,169"}},{"content":"<pre data-lines=\"170,219\"><code data-lines=\"170,219\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">normalizeArrayChildren</span> (<span class=\"hljs-params\">children: any, nestedIndex?: string</span>): <span class=\"hljs-title function_\">Array</span>&lt;<span class=\"hljs-title function_\">VNode</span>&gt; {\n  const res = []\n  let i, c, lastIndex, last\n  <span class=\"hljs-keyword\">for</span> (i = <span class=\"hljs-number\">0</span>; i &lt; children.<span class=\"hljs-built_in\">length</span>; i++) {\n    c = children[i]\n    <span class=\"hljs-keyword\">if</span> (isUndef(c) || <span class=\"hljs-built_in\">typeof</span> c === <span class=\"hljs-string\">&apos;boolean&apos;</span>) <span class=\"hljs-keyword\">continue</span>\n    lastIndex = res.<span class=\"hljs-built_in\">length</span> - <span class=\"hljs-number\">1</span>\n    last = res[lastIndex]\n    <span class=\"hljs-comment\">//  nested</span>\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">Array</span>.isArray(c)) {\n      <span class=\"hljs-keyword\">if</span> (c.<span class=\"hljs-built_in\">length</span> &gt; <span class=\"hljs-number\">0</span>) {\n        c = normalizeArrayChildren(c, <span class=\"hljs-string\">`<span class=\"hljs-subst\">&#x24;{nestedIndex || <span class=\"hljs-string\">&apos;&apos;</span>}</span>_<span class=\"hljs-subst\">&#x24;{i}</span>`</span>)\n        <span class=\"hljs-comment\">// merge adjacent text nodes</span>\n        <span class=\"hljs-keyword\">if</span> (isTextNode(c[<span class=\"hljs-number\">0</span>]) &amp;&amp; isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.<span class=\"hljs-built_in\">text</span> + (c[<span class=\"hljs-number\">0</span>]: <span class=\"hljs-built_in\">any</span>).<span class=\"hljs-built_in\">text</span>)\n          c.shift()\n        }\n        res.<span class=\"hljs-built_in\">push</span>.apply(res, c)\n      }\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (isPrimitive(c)) {\n      <span class=\"hljs-keyword\">if</span> (isTextNode(last)) {\n        <span class=\"hljs-comment\">// merge adjacent text nodes</span>\n        <span class=\"hljs-comment\">// this is necessary for SSR hydration because text nodes are</span>\n        <span class=\"hljs-comment\">// essentially merged when rendered to HTML strings</span>\n        res[lastIndex] = createTextVNode(last.<span class=\"hljs-built_in\">text</span> + c)\n      } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (c !== <span class=\"hljs-string\">&apos;&apos;</span>) {\n        <span class=\"hljs-comment\">// convert primitive to vnode</span>\n        res.<span class=\"hljs-built_in\">push</span>(createTextVNode(c))\n      }\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-keyword\">if</span> (isTextNode(c) &amp;&amp; isTextNode(last)) {\n        <span class=\"hljs-comment\">// merge adjacent text nodes</span>\n        res[lastIndex] = createTextVNode(last.<span class=\"hljs-built_in\">text</span> + c.<span class=\"hljs-built_in\">text</span>)\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-comment\">// default key for nested array children (likely generated by v-for)</span>\n        <span class=\"hljs-keyword\">if</span> (isTrue(children._isVList) &amp;&amp;\n          isDef(c.tag) &amp;&amp;\n          isUndef(c.key) &amp;&amp;\n          isDef(nestedIndex)) {\n          c.key = <span class=\"hljs-string\">`__vlist<span class=\"hljs-subst\">&#x24;{nestedIndex}</span>_<span class=\"hljs-subst\">&#x24;{i}</span>__`</span>\n        }\n        res.<span class=\"hljs-built_in\">push</span>(c)\n      }\n    }\n  }\n  <span class=\"hljs-keyword\">return</span> res\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"170,219"}},{"content":"<pre data-lines=\"220,223\"><code>`normalizeArrayChildren` &#x63a5;&#x6536; 2 &#x4e2a;&#x53c2;&#x6570;&#xff0c;`children` &#x8868;&#x793a;&#x8981;&#x89c4;&#x8303;&#x7684;&#x5b50;&#x8282;&#x70b9;&#xff0c;`nestedIndex` &#x8868;&#x793a;&#x5d4c;&#x5957;&#x7684;&#x7d22;&#x5f15;&#xff0c;&#x56e0;&#x4e3a;&#x5355;&#x4e2a; `child` &#x53ef;&#x80fd;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x7c7b;&#x578b;&#x3002; `normalizeArrayChildren` &#x4e3b;&#x8981;&#x7684;&#x903b;&#x8f91;&#x5c31;&#x662f;&#x904d;&#x5386; `children`&#xff0c;&#x83b7;&#x5f97;&#x5355;&#x4e2a;&#x8282;&#x70b9; `c`&#xff0c;&#x7136;&#x540e;&#x5bf9; `c` &#x7684;&#x7c7b;&#x578b;&#x5224;&#x65ad;&#xff0c;&#x5982;&#x679c;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x7c7b;&#x578b;&#xff0c;&#x5219;&#x9012;&#x5f52;&#x8c03;&#x7528; `normalizeArrayChildren`; &#x5982;&#x679c;&#x662f;&#x57fa;&#x7840;&#x7c7b;&#x578b;&#xff0c;&#x5219;&#x901a;&#x8fc7; `createTextVNode` &#x65b9;&#x6cd5;&#x8f6c;&#x6362;&#x6210; VNode &#x7c7b;&#x578b;&#xff1b;&#x5426;&#x5219;&#x5c31;&#x5df2;&#x7ecf;&#x662f; VNode &#x7c7b;&#x578b;&#x4e86;&#xff0c;&#x5982;&#x679c; `children` &#x662f;&#x4e00;&#x4e2a;&#x5217;&#x8868;&#x5e76;&#x4e14;&#x5217;&#x8868;&#x8fd8;&#x5b58;&#x5728;&#x5d4c;&#x5957;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5219;&#x6839;&#x636e; `nestedIndex` &#x53bb;&#x66f4;&#x65b0;&#x5b83;&#x7684; key&#x3002;&#x8fd9;&#x91cc;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x4e00;&#x70b9;&#xff0c;&#x5728;&#x904d;&#x5386;&#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x5bf9;&#x8fd9; 3 &#x79cd;&#x60c5;&#x51b5;&#x90fd;&#x505a;&#x4e86;&#x5982;&#x4e0b;&#x5904;&#x7406;&#xff1a;&#x5982;&#x679c;&#x5b58;&#x5728;&#x4e24;&#x4e2a;&#x8fde;&#x7eed;&#x7684; `text` &#x8282;&#x70b9;&#xff0c;&#x4f1a;&#x628a;&#x5b83;&#x4eec;&#x5408;&#x5e76;&#x6210;&#x4e00;&#x4e2a; `text` &#x8282;&#x70b9;&#x3002;\n\n&#x7ecf;&#x8fc7;&#x5bf9; `children` &#x7684;&#x89c4;&#x8303;&#x5316;&#xff0c;`children` &#x53d8;&#x6210;&#x4e86;&#x4e00;&#x4e2a;&#x7c7b;&#x578b;&#x4e3a; VNode &#x7684; Array&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"220,223"}}],"payload":{"tag":"h2","lines":"124,126"}},{"content":"<a href=\"#vnode-%E7%9A%84%E5%88%9B%E5%BB%BA\">#</a> VNode &#x7684;&#x521b;&#x5efa;","children":[{"content":"<pre data-lines=\"227,228\"><code>&#x56de;&#x5230; `createElement` &#x51fd;&#x6570;&#xff0c;&#x89c4;&#x8303;&#x5316; `children` &#x540e;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x4f1a;&#x53bb;&#x521b;&#x5efa;&#x4e00;&#x4e2a; VNode &#x7684;&#x5b9e;&#x4f8b;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"227,228"}},{"content":"<pre data-lines=\"229,257\"><code data-lines=\"229,257\"><span class=\"hljs-keyword\">let</span> vnode, ns\n<span class=\"hljs-keyword\">if</span> (typeof <span class=\"hljs-built_in\">tag</span> === <span class=\"hljs-string\">&apos;string&apos;</span>) {\n  <span class=\"hljs-keyword\">let</span> Ctor\n  ns = (context.&#x24;vnode &amp;&amp; context.&#x24;vnode.ns) || config.getTagNamespace(<span class=\"hljs-built_in\">tag</span>)\n  <span class=\"hljs-keyword\">if</span> (config.isReservedTag(<span class=\"hljs-built_in\">tag</span>)) {\n    <span class=\"hljs-comment\">// platform built-in elements</span>\n    vnode = <span class=\"hljs-literal\">new</span> VNode(\n      config.parsePlatformTagName(<span class=\"hljs-built_in\">tag</span>), <span class=\"hljs-built_in\">data</span>, children,\n      undefined, undefined, context\n    )\n  } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (isDef(Ctor = resolveAsset(context.&#x24;options, <span class=\"hljs-string\">&apos;components&apos;</span>, <span class=\"hljs-built_in\">tag</span>))) {\n    <span class=\"hljs-comment\">// component</span>\n    vnode = createComponent(Ctor, <span class=\"hljs-built_in\">data</span>, context, children, <span class=\"hljs-built_in\">tag</span>)\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-comment\">// unknown or unlisted namespaced elements</span>\n    <span class=\"hljs-comment\">// check at runtime because it may get assigned a namespace when its</span>\n    <span class=\"hljs-comment\">// parent normalizes children</span>\n    vnode = <span class=\"hljs-literal\">new</span> VNode(\n      <span class=\"hljs-built_in\">tag</span>, <span class=\"hljs-built_in\">data</span>, children,\n      undefined, undefined, context\n    )\n  }\n} <span class=\"hljs-keyword\">else</span> {\n  <span class=\"hljs-comment\">// direct component options / constructor</span>\n  vnode = createComponent(<span class=\"hljs-built_in\">tag</span>, <span class=\"hljs-built_in\">data</span>, context, children)\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"229,257"}},{"content":"<pre data-lines=\"258,259\"><code>&#x8fd9;&#x91cc;&#x5148;&#x5bf9; `tag` &#x505a;&#x5224;&#x65ad;&#xff0c;&#x5982;&#x679c;&#x662f; `string` &#x7c7b;&#x578b;&#xff0c;&#x5219;&#x63a5;&#x7740;&#x5224;&#x65ad;&#x5982;&#x679c;&#x662f;&#x5185;&#x7f6e;&#x7684;&#x4e00;&#x4e9b;&#x8282;&#x70b9;&#xff0c;&#x5219;&#x76f4;&#x63a5;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x666e;&#x901a; VNode&#xff0c;&#x5982;&#x679c;&#x662f;&#x4e3a;&#x5df2;&#x6ce8;&#x518c;&#x7684;&#x7ec4;&#x4ef6;&#x540d;&#xff0c;&#x5219;&#x901a;&#x8fc7; `createComponent` &#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x7c7b;&#x578b;&#x7684; VNode&#xff0c;&#x5426;&#x5219;&#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x672a;&#x77e5;&#x7684;&#x6807;&#x7b7e;&#x7684; VNode&#x3002; &#x5982;&#x679c;&#x662f; `tag` &#x4e00;&#x4e2a; `Component` &#x7c7b;&#x578b;&#xff0c;&#x5219;&#x76f4;&#x63a5;&#x8c03;&#x7528; `createComponent` &#x521b;&#x5efa;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x7c7b;&#x578b;&#x7684; VNode &#x8282;&#x70b9;&#x3002;&#x5bf9;&#x4e8e; `createComponent` &#x521b;&#x5efa;&#x7ec4;&#x4ef6;&#x7c7b;&#x578b;&#x7684; VNode &#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x6211;&#x4eec;&#x4e4b;&#x540e;&#x4f1a;&#x53bb;&#x4ecb;&#x7ecd;&#xff0c;&#x672c;&#x8d28;&#x4e0a;&#x5b83;&#x8fd8;&#x662f;&#x8fd4;&#x56de;&#x4e86;&#x4e00;&#x4e2a; VNode&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"258,259"}}],"payload":{"tag":"h2","lines":"224,226"}},{"content":"<a href=\"#%E6%80%BB%E7%BB%93\">#</a> &#x603b;&#x7ed3;","children":[{"content":"<pre data-lines=\"263,266\"><code>&#x90a3;&#x4e48;&#x81f3;&#x6b64;&#xff0c;&#x6211;&#x4eec;&#x5927;&#x81f4;&#x4e86;&#x89e3;&#x4e86; `createElement` &#x521b;&#x5efa; VNode &#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x6bcf;&#x4e2a; VNode &#x6709; `children`&#xff0c;`children` &#x6bcf;&#x4e2a;&#x5143;&#x7d20;&#x4e5f;&#x662f;&#x4e00;&#x4e2a; VNode&#xff0c;&#x8fd9;&#x6837;&#x5c31;&#x5f62;&#x6210;&#x4e86;&#x4e00;&#x4e2a; VNode Tree&#xff0c;&#x5b83;&#x5f88;&#x597d;&#x7684;&#x63cf;&#x8ff0;&#x4e86;&#x6211;&#x4eec;&#x7684; DOM Tree&#x3002;\n\n&#x56de;&#x5230; `mountComponent` &#x51fd;&#x6570;&#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x6211;&#x4eec;&#x5df2;&#x7ecf;&#x77e5;&#x9053; `vm._render` &#x662f;&#x5982;&#x4f55;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a; VNode&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x5c31;&#x662f;&#x8981;&#x628a;&#x8fd9;&#x4e2a; VNode &#x6e32;&#x67d3;&#x6210;&#x4e00;&#x4e2a;&#x771f;&#x5b9e;&#x7684; DOM &#x5e76;&#x6e32;&#x67d3;&#x51fa;&#x6765;&#xff0c;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x662f;&#x901a;&#x8fc7; `vm._update` &#x5b8c;&#x6210;&#x7684;&#xff0c;&#x63a5;&#x4e0b;&#x6765;&#x5206;&#x6790;&#x4e00;&#x4e0b;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"263,266"}}],"payload":{"tag":"h2","lines":"260,262"}}],"payload":{"tag":"h1","lines":"0,2"}},{})</script>
</body>
</html>
