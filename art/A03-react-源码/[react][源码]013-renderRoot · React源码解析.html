<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"renderRoot","children":[{"content":"","children":[{"content":"<pre data-lines=\"4,7\"><code>&#x8fd9;&#x5927;&#x6982;&#x662f; React &#x6e90;&#x7801;&#x4e2d;&#x6211;&#x770b;&#x5230;&#x8fc7;&#x6700;&#x957f;&#x7684;&#x65b9;&#x6cd5;&#x4ee3;&#x7801;&#x4e86;&#x3002;&#x3002;&#x3002;&#x8fd9;&#x91cc;&#x5c55;&#x793a;&#x7684;&#x6211;&#x628a;&#x4e00;&#x4e9b;&#x4e0d;&#x662f;&#x7279;&#x522b;&#x91cd;&#x8981;&#x7684;&#x6bd4;&#x5982;&#x63d0;&#x9192;&#x4ee3;&#x7801;&#x6216;&#x8005;&#x5f00;&#x53d1;&#x5de5;&#x5177;&#x4ee3;&#x7801;&#x5220;&#x4e86;&#x4e00;&#x90e8;&#x5206;&#xff0c;&#x8fd8;&#x6709;&#x6ce8;&#x91ca;&#x4e5f;&#x5220;&#x4e86;&#x633a;&#x591a;&#x3002;\n\n&#x9996;&#x5148;&#x662f;&#x4e00;&#x4e2a;&#x5224;&#x65ad;&#x662f;&#x5426;&#x9700;&#x8981;&#x521d;&#x59cb;&#x5316;&#x53d8;&#x91cf;&#x7684;&#x5224;&#x65ad;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,7"}},{"content":"<pre data-lines=\"8,27\"><code data-lines=\"8,27\">if <span class=\"hljs-punctuation\">(</span>\n  expirationTime !<span class=\"hljs-punctuation\">=</span><span class=\"hljs-punctuation\">=</span> nextRenderExpirationTime <span class=\"hljs-string\">||</span>\n  root !<span class=\"hljs-punctuation\">=</span><span class=\"hljs-punctuation\">=</span> nextRoot <span class=\"hljs-string\">||</span>\n  nextUnitOfWork <span class=\"hljs-punctuation\">=</span><span class=\"hljs-punctuation\">=</span><span class=\"hljs-punctuation\">=</span> <span class=\"hljs-literal\">null</span>\n<span class=\"hljs-punctuation\">)</span> {\n  \n  resetStack<span class=\"hljs-punctuation\">(</span><span class=\"hljs-punctuation\">)</span>\n  nextRoot <span class=\"hljs-punctuation\">=</span> root\n  nextRenderExpirationTime <span class=\"hljs-punctuation\">=</span> expirationTime\n  nextUnitOfWork <span class=\"hljs-punctuation\">=</span> createWorkInProgress<span class=\"hljs-punctuation\">(</span>\n    nextRoot.current<span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-literal\">null</span><span class=\"hljs-punctuation\">,</span>\n    nextRenderExpirationTime<span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-punctuation\">)</span>\n  root.pendingCommitExpirationTime <span class=\"hljs-punctuation\">=</span> NoWork\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"8,27"}},{"content":"<pre data-lines=\"28,35\"><code>&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x5224;&#x65ad;&#x662f;&#x4ec0;&#x4e48;&#x610f;&#x601d;&#x5462;&#xff1f;&#x4ed6;&#x5224;&#x65ad;&#x7684;&#x60c5;&#x51b5;&#x662f;&#x662f;&#x5426;&#x6709;&#x65b0;&#x7684;&#x66f4;&#x65b0;&#x8fdb;&#x6765;&#x4e86;&#x3002;&#x5047;&#x8bbe;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#xff1a;_&#x4e0a;&#x4e00;&#x4e2a;&#x4efb;&#x52a1;&#x56e0;&#x4e3a;&#x65f6;&#x95f4;&#x7247;&#x7528;&#x5b8c;&#x4e86;&#x800c;&#x4e2d;&#x65ad;&#x4e86;&#xff0c;&#x8fd9;&#x4e2a;&#x65f6;&#x5019;`nextUnitOfWork`&#x662f;&#x6709;&#x5de5;&#x4f5c;&#x7684;&#xff0c;&#x8fd9;&#x65f6;&#x5019;&#x5982;&#x679c;&#x4e0b;&#x4e00;&#x4e2a;`requestIdleCallback`&#x8fdb;&#x6765;&#x4e86;&#xff0c;&#x4e2d;&#x9014;&#x6ca1;&#x6709;&#x65b0;&#x7684;&#x4efb;&#x52a1;&#x8fdb;&#x6765;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e9b;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#x90fd;&#x6ca1;&#x6709;&#x53d8;&#x8fc7;&#xff0c;`root`&#x7684;`nextExpirationTimeToWorkOn`&#x80af;&#x5b9a;&#x4e5f;&#x6ca1;&#x6709;&#x53d8;&#x5316;&#xff0c;&#x90a3;&#x4e48;&#x4ee3;&#x8868;&#x662f;&#x7ee7;&#x7eed;&#x4e0a;&#x4e00;&#x6b21;&#x7684;&#x4efb;&#x52a1;&#x3002;&#x800c;&#x5982;&#x679c;&#x6709;&#x65b0;&#x7684;&#x66f4;&#x65b0;&#x8fdb;&#x6765;&#xff0c;&#x5219;&#x52bf;&#x5fc5;`nextExpirationTimeToWorkOn`&#x6216;&#x8005;`root`&#x4f1a;&#x53d8;&#x5316;&#xff0c;&#x90a3;&#x4e48;&#x80af;&#x5b9a;&#x9700;&#x8981;&#x91cd;&#x7f6e;&#x53d8;&#x91cf;_\n\n`resetStack`&#x5982;&#x679c;&#x662f;&#x88ab;&#x4e2d;&#x65ad;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x4f1a;&#x63a8;&#x51fa;`context`&#x6808;&#xff0c;&#x5173;&#x4e8e;`context`&#x53ef;&#x4ee5;&#x770b;[&#x8fd9;&#x91cc;](https://react.jokcy.me/book/flow/context.md)\n\nTODO: &#x589e;&#x52a0;`context.md`&#x7684;&#x94fe;&#x63a5;\n\n&#x7136;&#x540e;&#x5c31;&#x8fdb;&#x5165;&#x6574;&#x4f53;&#xff0c;&#x8c03;&#x7528;`workLoop`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"28,35"}},{"content":"<pre data-lines=\"36,52\"><code data-lines=\"36,52\"><span class=\"hljs-variable\">function</span> <span class=\"hljs-function\"><span class=\"hljs-title\">workLoop</span>(<span class=\"hljs-variable\">isYieldy</span>) {\n  <span class=\"hljs-variable\"><span class=\"hljs-keyword\">if</span></span> (<span class=\"hljs-variable\">!isYieldy</span>) {\n    \n    <span class=\"hljs-variable\"><span class=\"hljs-keyword\">while</span></span> (<span class=\"hljs-variable\">nextUnitOfWork</span> <span class=\"hljs-variable\">!</span>== <span class=\"hljs-variable\"><span class=\"hljs-literal\">null</span></span>) {\n      <span class=\"hljs-variable\">nextUnitOfWork</span> = <span class=\"hljs-title\">performUnitOfWork</span>(<span class=\"hljs-variable\">nextUnitOfWork</span>)</span>\n    }\n  } <span class=\"hljs-variable\"><span class=\"hljs-keyword\">else</span></span> {\n    \n    <span class=\"hljs-variable\"><span class=\"hljs-keyword\">while</span></span> (<span class=\"hljs-variable\">nextUnitOfWork</span> <span class=\"hljs-variable\">!</span>== <span class=\"hljs-variable\"><span class=\"hljs-literal\">null</span></span> &amp;&amp; <span class=\"hljs-variable\">!shouldYield</span>()) {\n      <span class=\"hljs-variable\">nextUnitOfWork</span> = <span class=\"hljs-function\"><span class=\"hljs-title\">performUnitOfWork</span>(<span class=\"hljs-variable\">nextUnitOfWork</span>)</span>\n    }\n  }\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"36,52"}},{"content":"<pre data-lines=\"53,54\"><code>`workLoop`&#x903b;&#x8f91;&#x5f88;&#x7b80;&#x5355;&#x7684;&#xff0c;&#x53ea;&#x662f;&#x5224;&#x65ad;&#x662f;&#x5426;&#x9700;&#x8981;&#x7ee7;&#x7eed;&#x8c03;&#x7528;`performUnitOfWork`&#xff0c;&#x90a3;&#x4e48;`performUnitOfWorkoop`&#x6211;&#x4eec;&#x653e;&#x5230;[&#x4e0b;&#x4e00;&#x8282;](https://react.jokcy.me/book/flow/perform-unit-of-work.html)&#x518d;&#x8bb2;&#xff0c;&#x6211;&#x4eec;&#x5148;&#x770b;&#x5982;&#x679c;`catch`&#x5230;&#x9519;&#x8bef;&#x4f1a;&#x600e;&#x4e48;&#x6837;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"53,54"}}],"payload":{"tag":"h3","lines":"2,3"}},{"content":"if catch error","children":[{"content":"<pre data-lines=\"57,62\"><code>&#x9996;&#x5148;&#x5224;&#x65ad;&#x662f;&#x5426;&#x6709;`nextUnitOfWork`&#xff0c;&#x5982;&#x679c;&#x662f;&#x9884;&#x671f;&#x9519;&#x8bef;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x503c;&#x662f;&#x5b58;&#x5728;&#x7684;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x5b58;&#x5728;&#x4ee3;&#x8868;&#x662f; React &#x65e0;&#x6cd5;&#x9884;&#x671f;&#x7684;&#x9519;&#x8bef;\n\n&#x5982;&#x679c;&#x5b58;&#x5728;&#xff0c;&#x5728;&#x5f00;&#x53d1;&#x65f6;&#x4f1a;&#x8c03;&#x7528;`replayUnitOfWork`&#x91cd;&#x653e;&#x4e00;&#x4e0b;&#x3002;&#x7136;&#x540e;&#x770b;&#x4e00;&#x4e0b;`nextUnitOfWork.return`&#x662f;&#x5426;&#x5b58;&#x5728;&#xff0c;&#x5982;&#x679c;&#x4e0d;&#x5b58;&#x5728;&#x4e5f;&#x662f;&#x65e0;&#x6cd5;&#x9884;&#x671f;&#x7684;&#x9519;&#x8bef;&#x3002;&#x7136;&#x540e;&#x6267;&#x884c;`throwException`&#xff0c;&#x8fd9;&#x4e2a;&#x65b9;&#x6cd5;&#x975e;&#x5e38;&#x91cd;&#x8981;&#xff0c;&#x6211;&#x5355;&#x72ec;&#x5199;&#x4e00;&#x7bc7;&#x6587;&#x7ae0;&#x8fdb;&#x884c;&#x5206;&#x6790;&#xff0c;[&#x770b;&#x8fd9;&#x91cc;](https://react.jokcy.me/book/flow/render-root/throw-exception.html)\n\n&#x5728;`throwException`&#x4e4b;&#x540e;&#x4f1a;&#x76f4;&#x63a5;&#x8c03;&#x7528;`completeWork`&#x5f53;&#x524d;&#x7684;`nextUnitOfWork`&#xff0c;&#x56e0;&#x4e3a;&#x4ed6;&#x5df2;&#x7ecf;&#x62a5;&#x9519;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x6ca1;&#x5fc5;&#x8981;&#x518d;&#x6e32;&#x67d3;&#x4ed6;&#x7684;&#x5b50;&#x8282;&#x70b9;&#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"57,62"}}],"payload":{"tag":"h3","lines":"55,56"}},{"content":"&#x6536;&#x5c3e;","children":[{"content":"&#x771f;&#x6b63;&#x7684; sequense","children":[{"content":"<pre data-lines=\"159,160\"><code>&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x5224;&#x65ad;&#x5c31;&#x662f;&#x771f;&#x6b63;&#x7684;&#x6302;&#x8d77;&#x4efb;&#x52a1;&#x4e86;&#xff0c;&#x4e5f;&#x5c31;&#x662f;`suquense`&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5176;&#x5b9e;&#x505a;&#x7684;&#x4e8b;&#x60c5;&#x8ddf;&#x4e0a;&#x9762;&#x4e24;&#x4e2a;&#x5dee;&#x4e0d;&#x591a;&#xff0c;&#x552f;&#x4e00;&#x7684;&#x533a;&#x522b;&#x662f;&#x8c03;&#x7528;`onSuspend`&#x7684;&#x65f6;&#x5019;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x80af;&#x5b9a;&#x662f;&#x5927;&#x4e8e;&#x7b49;&#x4e8e;&#x96f6;&#x7684;&#x3002;&#x4ee3;&#x8868;&#x7740;&#x4ed6;&#x662f;&#x7acb;&#x523b;&#x5c31;&#x8981;`commit`&#x8fd8;&#x662f;&#x5728;&#x4e00;&#x4e2a;`timeout`&#x4e4b;&#x540e;&#x518d;`commit`&#x3002;&#x56e0;&#x4e3a;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x770b;&#x5230;`onTimeout`&#x6700;&#x540e;&#x662f;`flushRoot`&#xff0c;&#x5c31;&#x662f;&#x4ee5;`Sync`&#x7684;&#x65b9;&#x5f0f;&#x8c03;&#x7528;`performWork`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"159,160"}}],"payload":{"tag":"h5","lines":"157,158"}},{"content":"&#x6700;&#x540e;","children":[{"content":"<pre data-lines=\"163,164\"><code>&#x5982;&#x679c;&#x4ee5;&#x4e0a;&#x903b;&#x8f91;&#x90fd;&#x6ca1;&#x6709;&#xff0c;&#x90a3;&#x4e48;&#x76f4;&#x63a5;&#x8c03;&#x7528;`onComplete`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"163,164"}},{"content":"<pre data-lines=\"165,176\"><code data-lines=\"165,176\"><span class=\"hljs-keyword\">function</span> onComplete(\n <span class=\"hljs-built_in\"> root</span>: FiberRoot,\n  finishedWork: Fiber,\n  expirationTime: ExpirationTime,\n) {\n <span class=\"hljs-built_in\"> root</span>.pendingCommitExpirationTime = expirationTime\n <span class=\"hljs-built_in\"> root</span>.finishedWork = finishedWork\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"165,176"}},{"content":"<pre data-lines=\"177,385\"><code data-lines=\"177,385\">function <span class=\"hljs-title function_\">renderRoot</span><span class=\"hljs-params\">(root, isYieldy, isExpired)</span> {\n  !!isWorking\n    ? invariant(\n        <span class=\"hljs-literal\">false</span>,\n        <span class=\"hljs-string\">&apos;renderRoot was called recursively. This error is likely caused by a bug in React. Please file an issue.&apos;</span>,\n      )\n    : <span class=\"hljs-keyword\">void</span> <span class=\"hljs-number\">0</span>\n  isWorking = <span class=\"hljs-literal\">true</span>\n  ReactCurrentOwner&#x24;<span class=\"hljs-number\">2.</span>currentDispatcher = Dispatcher\n\n  \n  <span class=\"hljs-title function_\">logRootTimes</span><span class=\"hljs-params\">(<span class=\"hljs-string\">&apos;start&apos;</span>, root)</span>\n\n  <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">expirationTime</span> <span class=\"hljs-operator\">=</span> root.nextExpirationTimeToWorkOn\n  console.log(expirationTime, nextRenderExpirationTime)\n\n  <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">prevInteractions</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>\n  <span class=\"hljs-title function_\">if</span> <span class=\"hljs-params\">(enableSchedulerTracing)</span> {\n    prevInteractions = tracing.__interactionsRef.current\n    tracing.__interactionsRef.current = root.memoizedInteractions\n  }\n\n  \n  \n  <span class=\"hljs-keyword\">if</span> (\n    expirationTime !== nextRenderExpirationTime ||\n    root !== nextRoot ||\n    nextUnitOfWork === <span class=\"hljs-literal\">null</span>\n  ) {\n    \n    resetStack()\n    nextRoot = <span class=\"hljs-type\">root</span>\n    <span class=\"hljs-variable\">nextRenderExpirationTime</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">expirationTime</span>\n    <span class=\"hljs-variable\">nextUnitOfWork</span> <span class=\"hljs-operator\">=</span> createWorkInProgress(\n      nextRoot.current,\n      <span class=\"hljs-literal\">null</span>,\n      nextRenderExpirationTime,\n    )\n    root.pendingCommitExpirationTime = NoWork\n  }\n\n  <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">didFatal</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-title function_\">startWorkLoopTimer</span><span class=\"hljs-params\">(nextUnitOfWork)</span>\n\n  <span class=\"hljs-keyword\">do</span> {\n    <span class=\"hljs-keyword\">try</span> {\n      workLoop(isYieldy)\n    } <span class=\"hljs-keyword\">catch</span> (thrownValue) {\n      <span class=\"hljs-keyword\">if</span> (nextUnitOfWork === <span class=\"hljs-literal\">null</span>) {\n        \n        didFatal = <span class=\"hljs-literal\">true</span>\n        <span class=\"hljs-title function_\">onUncaughtError</span><span class=\"hljs-params\">(thrownValue)</span>\n      } <span class=\"hljs-keyword\">else</span> {\n        {\n          \n          \n          resetCurrentlyProcessingQueue()\n        }\n\n        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">failedUnitOfWork</span> <span class=\"hljs-operator\">=</span> nextUnitOfWork\n        <span class=\"hljs-title function_\">if</span> <span class=\"hljs-params\">(<span class=\"hljs-literal\">true</span> &amp;&amp; replayFailedUnitOfWorkWithInvokeGuardedCallback)</span> {\n          replayUnitOfWork(failedUnitOfWork, thrownValue, isYieldy)\n        }\n        !(nextUnitOfWork !== <span class=\"hljs-literal\">null</span>)\n          ? invariant(\n              <span class=\"hljs-literal\">false</span>,\n              <span class=\"hljs-string\">&apos;Failed to replay rendering after an error. This is likely caused by a bug in React. Please file an issue with a reproducing case to help us find it.&apos;</span>,\n            )\n          : <span class=\"hljs-keyword\">void</span> <span class=\"hljs-number\">0</span>\n\n        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">sourceFiber</span> <span class=\"hljs-operator\">=</span> nextUnitOfWork\n        <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">returnFiber</span> <span class=\"hljs-operator\">=</span> sourceFiber.return\n        <span class=\"hljs-title function_\">if</span> <span class=\"hljs-params\">(returnFiber === <span class=\"hljs-literal\">null</span>)</span> {\n          didFatal = <span class=\"hljs-literal\">true</span>\n          <span class=\"hljs-title function_\">onUncaughtError</span><span class=\"hljs-params\">(thrownValue)</span>\n        } <span class=\"hljs-keyword\">else</span> {\n          throwException(\n            root,\n            returnFiber,\n            sourceFiber,\n            thrownValue,\n            nextRenderExpirationTime,\n          )\n          nextUnitOfWork = completeUnitOfWork(sourceFiber)\n          <span class=\"hljs-keyword\">continue</span>\n        }\n      }\n    }\n    <span class=\"hljs-keyword\">break</span>\n  } <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>)\n\n  logRootTimes(<span class=\"hljs-number\">1</span>, root)\n\n  <span class=\"hljs-keyword\">if</span> (enableSchedulerTracing) {\n    \n    tracing.__interactionsRef.current = prevInteractions\n  }\n\n  \n  isWorking = <span class=\"hljs-literal\">false</span>\n  ReactCurrentOwner&#x24;<span class=\"hljs-number\">2.</span>currentDispatcher = <span class=\"hljs-literal\">null</span>\n  <span class=\"hljs-title function_\">resetContextDependences</span><span class=\"hljs-params\">()</span>\n\n  \n  <span class=\"hljs-keyword\">if</span> (didFatal) {\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">_didCompleteRoot</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-title function_\">stopWorkLoopTimer</span><span class=\"hljs-params\">(interruptedBy, _didCompleteRoot)</span>\n    interruptedBy = <span class=\"hljs-literal\">null</span>\n    \n    {\n      resetStackAfterFatalErrorInDev()\n    }\n    nextRoot = <span class=\"hljs-literal\">null</span>\n    <span class=\"hljs-title function_\">onFatal</span><span class=\"hljs-params\">(root)</span>\n    <span class=\"hljs-keyword\">return</span>\n  }\n\n  <span class=\"hljs-keyword\">if</span> (nextUnitOfWork !== <span class=\"hljs-literal\">null</span>) {\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">_didCompleteRoot2</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-title function_\">stopWorkLoopTimer</span><span class=\"hljs-params\">(interruptedBy, _didCompleteRoot2)</span>\n    interruptedBy = <span class=\"hljs-literal\">null</span>\n    <span class=\"hljs-title function_\">onYield</span><span class=\"hljs-params\">(root)</span>\n    <span class=\"hljs-keyword\">return</span>\n  }\n\n  \n  <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">didCompleteRoot</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-title function_\">stopWorkLoopTimer</span><span class=\"hljs-params\">(interruptedBy, didCompleteRoot)</span>\n  <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">rootWorkInProgress</span> <span class=\"hljs-operator\">=</span> root.current.alternate\n  !(rootWorkInProgress !== <span class=\"hljs-literal\">null</span>)\n    ? invariant(\n        <span class=\"hljs-literal\">false</span>,\n        <span class=\"hljs-string\">&apos;Finished root should have a work-in-progress. This error is likely caused by a bug in React. Please file an issue.&apos;</span>,\n      )\n    : <span class=\"hljs-keyword\">void</span> <span class=\"hljs-number\">0</span>\n\n  nextRoot = <span class=\"hljs-type\">null</span>\n  <span class=\"hljs-variable\">interruptedBy</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">null</span>\n\n  <span class=\"hljs-title function_\">if</span> <span class=\"hljs-params\">(nextRenderDidError)</span> {\n    <span class=\"hljs-keyword\">if</span> (hasLowerPriorityWork(root, expirationTime)) {\n      markSuspendedPriorityLevel(root, expirationTime)\n      <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">suspendedExpirationTime</span> <span class=\"hljs-operator\">=</span> expirationTime\n      <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">rootExpirationTime</span> <span class=\"hljs-operator\">=</span> root.expirationTime\n      <span class=\"hljs-title function_\">onSuspend</span><span class=\"hljs-params\">(\n        root,\n        rootWorkInProgress,\n        suspendedExpirationTime,\n        rootExpirationTime,\n        -<span class=\"hljs-number\">1</span>, \n      )</span>\n      <span class=\"hljs-keyword\">return</span>\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!root.didError &amp;&amp; !isExpired) {\n      root.didError = <span class=\"hljs-literal\">true</span>\n      <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">_suspendedExpirationTime</span> <span class=\"hljs-operator\">=</span> (root.nextExpirationTimeToWorkOn = expirationTime)\n      <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">_rootExpirationTime</span> <span class=\"hljs-operator\">=</span> (root.expirationTime = Sync)\n      onSuspend(\n        root,\n        rootWorkInProgress,\n        _suspendedExpirationTime,\n        _rootExpirationTime,\n        -<span class=\"hljs-number\">1</span>, \n      )\n      <span class=\"hljs-keyword\">return</span>\n    }\n  }\n\n  <span class=\"hljs-keyword\">if</span> (!isExpired &amp;&amp; nextLatestAbsoluteTimeoutMs !== -<span class=\"hljs-number\">1</span>) {\n    \n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">_suspendedExpirationTime2</span> <span class=\"hljs-operator\">=</span> expirationTime\n    <span class=\"hljs-title function_\">markSuspendedPriorityLevel</span><span class=\"hljs-params\">(root, _suspendedExpirationTime2)</span>\n\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">earliestExpirationTime</span> <span class=\"hljs-operator\">=</span> findEarliestOutstandingPriorityLevel(\n      root,\n      expirationTime,\n    )\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">earliestExpirationTimeMs</span> <span class=\"hljs-operator\">=</span> expirationTimeToMs(earliestExpirationTime)\n    <span class=\"hljs-keyword\">if</span> (earliestExpirationTimeMs &lt; nextLatestAbsoluteTimeoutMs) {\n      nextLatestAbsoluteTimeoutMs = earliestExpirationTimeMs\n    }\n\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">currentTimeMs</span> <span class=\"hljs-operator\">=</span> expirationTimeToMs(requestCurrentTime())\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">msUntilTimeout</span> <span class=\"hljs-operator\">=</span> nextLatestAbsoluteTimeoutMs - <span class=\"hljs-type\">currentTimeMs</span>\n    <span class=\"hljs-variable\">msUntilTimeout</span> <span class=\"hljs-operator\">=</span> msUntilTimeout &lt; <span class=\"hljs-number\">0</span> ? <span class=\"hljs-number\">0</span> : msUntilTimeout\n\n    \n\n    <span class=\"hljs-type\">var</span> <span class=\"hljs-variable\">_rootExpirationTime2</span> <span class=\"hljs-operator\">=</span> root.expirationTime\n    <span class=\"hljs-title function_\">onSuspend</span><span class=\"hljs-params\">(\n      root,\n      rootWorkInProgress,\n      _suspendedExpirationTime2,\n      _rootExpirationTime2,\n      msUntilTimeout,\n    )</span>\n    logRootTimes(<span class=\"hljs-number\">2</span>, root)\n    <span class=\"hljs-keyword\">return</span>\n  }\n\n  logRootTimes(<span class=\"hljs-number\">3</span>, root)\n\n  \n  onComplete(root, rootWorkInProgress, expirationTime)\n}\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"177,385"}}],"payload":{"tag":"h5","lines":"161,162"}}],"payload":{"tag":"h3","lines":"63,64"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
