<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Set &#x548c; Map &#x6570;&#x636e;&#x7ed3;&#x6784;","children":[{"content":"&#x8ba4;&#x8bc6;","children":[{"content":"1. <a href=\"#docs/set-map#Set\">Set</a>","children":[],"payload":{"tag":"li","lines":"5,6","listIndex":1}},{"content":"2. <a href=\"#docs/set-map#WeakSet\">WeakSet</a>","children":[],"payload":{"tag":"li","lines":"6,7","listIndex":2}},{"content":"3. <a href=\"#docs/set-map#Map\">Map</a>","children":[],"payload":{"tag":"li","lines":"7,8","listIndex":3}},{"content":"4. <a href=\"#docs/set-map#WeakMap\">WeakMap</a>","children":[],"payload":{"tag":"li","lines":"8,9","listIndex":4}},{"content":"5. <a href=\"#docs/set-map#WeakRef\">WeakRef</a>","children":[],"payload":{"tag":"li","lines":"9,10","listIndex":5}},{"content":"6. <a href=\"#docs/set-map#FinalizationRegistry\">FinalizationRegistry</a>","children":[],"payload":{"tag":"li","lines":"10,12","listIndex":6}}],"payload":{"tag":"h2","lines":"2,4"}},{"content":"Set","children":[{"content":"&#x57fa;&#x672c;&#x7528;&#x6cd5;","children":[{"content":"<pre data-lines=\"17,20\"><code>ES6 &#x63d0;&#x4f9b;&#x4e86;&#x65b0;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784; Set&#x3002;&#x5b83;&#x7c7b;&#x4f3c;&#x4e8e;&#x6570;&#x7ec4;&#xff0c;&#x4f46;&#x662f;&#x6210;&#x5458;&#x7684;&#x503c;&#x90fd;&#x662f;&#x552f;&#x4e00;&#x7684;&#xff0c;&#x6ca1;&#x6709;&#x91cd;&#x590d;&#x7684;&#x503c;&#x3002;\n\n`Set`&#x672c;&#x8eab;&#x662f;&#x4e00;&#x4e2a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x7528;&#x6765;&#x751f;&#x6210; Set &#x6570;&#x636e;&#x7ed3;&#x6784;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"17,20"}},{"content":"<pre data-lines=\"21,30\"><code data-lines=\"21,30\"><span class=\"hljs-keyword\">const</span> s = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>();\n\n[<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">2</span>].<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> s.<span class=\"hljs-title function_\">add</span>(x));\n\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i <span class=\"hljs-keyword\">of</span> s) {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(i);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"21,30"}},{"content":"<pre data-lines=\"31,34\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x901a;&#x8fc7;`add()`&#x65b9;&#x6cd5;&#x5411; Set &#x7ed3;&#x6784;&#x52a0;&#x5165;&#x6210;&#x5458;&#xff0c;&#x7ed3;&#x679c;&#x8868;&#x660e; Set &#x7ed3;&#x6784;&#x4e0d;&#x4f1a;&#x6dfb;&#x52a0;&#x91cd;&#x590d;&#x7684;&#x503c;&#x3002;\n\n`Set`&#x51fd;&#x6570;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff08;&#x6216;&#x8005;&#x5177;&#x6709; iterable &#x63a5;&#x53e3;&#x7684;&#x5176;&#x4ed6;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff09;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x7528;&#x6765;&#x521d;&#x59cb;&#x5316;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"31,34"}},{"content":"<pre data-lines=\"35,45\"><code data-lines=\"35,45\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">4</span>]);\n[...<span class=\"hljs-keyword\">set</span>]<span class=\"hljs-keyword\">const</span> items = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">5</span>]);\nitems.sizeconst <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(<span class=\"hljs-built_in\">document</span>.<span class=\"hljs-built_in\">querySelectorAll</span>(<span class=\"hljs-string\">&apos;div&apos;</span>));\n<span class=\"hljs-keyword\">set</span>.sizeconst <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>();\n<span class=\"hljs-built_in\">document</span>\n .<span class=\"hljs-built_in\">querySelectorAll</span>(<span class=\"hljs-string\">&apos;div&apos;</span>)\n .forEach(div =&gt; <span class=\"hljs-keyword\">set</span>.add(div));\n<span class=\"hljs-keyword\">set</span>.size\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"35,45"}},{"content":"<pre data-lines=\"46,49\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x4f8b;&#x4e00;&#x548c;&#x4f8b;&#x4e8c;&#x90fd;&#x662f;`Set`&#x51fd;&#x6570;&#x63a5;&#x53d7;&#x6570;&#x7ec4;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x4f8b;&#x4e09;&#x662f;&#x63a5;&#x53d7;&#x7c7b;&#x4f3c;&#x6570;&#x7ec4;&#x7684;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x3002;\n\n&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e5f;&#x5c55;&#x793a;&#x4e86;&#x4e00;&#x79cd;&#x53bb;&#x9664;&#x6570;&#x7ec4;&#x91cd;&#x590d;&#x6210;&#x5458;&#x7684;&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,49"}},{"content":"<pre data-lines=\"50,53\"><code data-lines=\"50,53\"><span class=\"hljs-meta\">[</span><span class=\"hljs-params\">...</span><span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Set</span>(<span class=\"hljs-built_in\">array</span>)<span class=\"hljs-meta\">]</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"50,53"}},{"content":"<pre data-lines=\"54,55\"><code>&#x4e0a;&#x9762;&#x7684;&#x65b9;&#x6cd5;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#xff0c;&#x53bb;&#x9664;&#x5b57;&#x7b26;&#x4e32;&#x91cc;&#x9762;&#x7684;&#x91cd;&#x590d;&#x5b57;&#x7b26;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"54,55"}},{"content":"<pre data-lines=\"56,59\"><code data-lines=\"56,59\">[...<span class=\"hljs-keyword\">new</span> <span class=\"hljs-keyword\">Set</span>(<span class=\"hljs-string\">&apos;ababbc&apos;</span>)].<span class=\"hljs-keyword\">join</span>(<span class=\"hljs-string\">&apos;&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"56,59"}},{"content":"<pre data-lines=\"60,61\"><code>&#x5411; Set &#x52a0;&#x5165;&#x503c;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e0d;&#x4f1a;&#x53d1;&#x751f;&#x7c7b;&#x578b;&#x8f6c;&#x6362;&#xff0c;&#x6240;&#x4ee5;`5`&#x548c;`&quot;5&quot;`&#x662f;&#x4e24;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x503c;&#x3002;Set &#x5185;&#x90e8;&#x5224;&#x65ad;&#x4e24;&#x4e2a;&#x503c;&#x662f;&#x5426;&#x4e0d;&#x540c;&#xff0c;&#x4f7f;&#x7528;&#x7684;&#x7b97;&#x6cd5;&#x53eb;&#x505a;&#x201c;Same-value-zero equality&#x201d;&#xff0c;&#x5b83;&#x7c7b;&#x4f3c;&#x4e8e;&#x7cbe;&#x786e;&#x76f8;&#x7b49;&#x8fd0;&#x7b97;&#x7b26;&#xff08;`===`&#xff09;&#xff0c;&#x4e3b;&#x8981;&#x7684;&#x533a;&#x522b;&#x662f;&#x5411; Set &#x52a0;&#x5165;&#x503c;&#x65f6;&#x8ba4;&#x4e3a;`NaN`&#x7b49;&#x4e8e;&#x81ea;&#x8eab;&#xff0c;&#x800c;&#x7cbe;&#x786e;&#x76f8;&#x7b49;&#x8fd0;&#x7b97;&#x7b26;&#x8ba4;&#x4e3a;`NaN`&#x4e0d;&#x7b49;&#x4e8e;&#x81ea;&#x8eab;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"60,61"}},{"content":"<pre data-lines=\"62,70\"><code data-lines=\"62,70\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> Set();\n<span class=\"hljs-keyword\">let</span> a = NaN;\n<span class=\"hljs-keyword\">let</span> b = NaN;\n<span class=\"hljs-keyword\">set</span>.<span class=\"hljs-keyword\">add</span>(a);\n<span class=\"hljs-keyword\">set</span>.<span class=\"hljs-keyword\">add</span>(b);\n<span class=\"hljs-keyword\">set</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"62,70"}},{"content":"<pre data-lines=\"71,74\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x5411; Set &#x5b9e;&#x4f8b;&#x6dfb;&#x52a0;&#x4e86;&#x4e24;&#x6b21;`NaN`&#xff0c;&#x4f46;&#x662f;&#x53ea;&#x4f1a;&#x52a0;&#x5165;&#x4e00;&#x4e2a;&#x3002;&#x8fd9;&#x8868;&#x660e;&#xff0c;&#x5728; Set &#x5185;&#x90e8;&#xff0c;&#x4e24;&#x4e2a;`NaN`&#x662f;&#x76f8;&#x7b49;&#x7684;&#x3002;\n\n&#x53e6;&#x5916;&#xff0c;&#x4e24;&#x4e2a;&#x5bf9;&#x8c61;&#x603b;&#x662f;&#x4e0d;&#x76f8;&#x7b49;&#x7684;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"71,74"}},{"content":"<pre data-lines=\"75,83\"><code data-lines=\"75,83\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> Set();\n\n<span class=\"hljs-keyword\">set</span>.<span class=\"hljs-keyword\">add</span>({});\n<span class=\"hljs-keyword\">set</span>.size\n<span class=\"hljs-keyword\">set</span>.<span class=\"hljs-keyword\">add</span>({});\n<span class=\"hljs-keyword\">set</span>.size\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"75,83"}},{"content":"<pre data-lines=\"84,85\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8868;&#x793a;&#xff0c;&#x7531;&#x4e8e;&#x4e24;&#x4e2a;&#x7a7a;&#x5bf9;&#x8c61;&#x4e0d;&#x76f8;&#x7b49;&#xff0c;&#x6240;&#x4ee5;&#x5b83;&#x4eec;&#x88ab;&#x89c6;&#x4e3a;&#x4e24;&#x4e2a;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"84,85"}}],"payload":{"tag":"h3","lines":"15,16"}},{"content":"Set &#x5b9e;&#x4f8b;&#x7684;&#x5c5e;&#x6027;&#x548c;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"88,101\"><code>Set &#x7ed3;&#x6784;&#x7684;&#x5b9e;&#x4f8b;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x3002;\n\n*   `Set.prototype.constructor`&#xff1a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x9ed8;&#x8ba4;&#x5c31;&#x662f;`Set`&#x51fd;&#x6570;&#x3002;\n*   `Set.prototype.size`&#xff1a;&#x8fd4;&#x56de;`Set`&#x5b9e;&#x4f8b;&#x7684;&#x6210;&#x5458;&#x603b;&#x6570;&#x3002;\n\nSet &#x5b9e;&#x4f8b;&#x7684;&#x65b9;&#x6cd5;&#x5206;&#x4e3a;&#x4e24;&#x5927;&#x7c7b;&#xff1a;&#x64cd;&#x4f5c;&#x65b9;&#x6cd5;&#xff08;&#x7528;&#x4e8e;&#x64cd;&#x4f5c;&#x6570;&#x636e;&#xff09;&#x548c;&#x904d;&#x5386;&#x65b9;&#x6cd5;&#xff08;&#x7528;&#x4e8e;&#x904d;&#x5386;&#x6210;&#x5458;&#xff09;&#x3002;&#x4e0b;&#x9762;&#x5148;&#x4ecb;&#x7ecd;&#x56db;&#x4e2a;&#x64cd;&#x4f5c;&#x65b9;&#x6cd5;&#x3002;\n\n*   `Set.prototype.add(value)`&#xff1a;&#x6dfb;&#x52a0;&#x67d0;&#x4e2a;&#x503c;&#xff0c;&#x8fd4;&#x56de; Set &#x7ed3;&#x6784;&#x672c;&#x8eab;&#x3002;\n*   `Set.prototype.delete(value)`&#xff1a;&#x5220;&#x9664;&#x67d0;&#x4e2a;&#x503c;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x5220;&#x9664;&#x662f;&#x5426;&#x6210;&#x529f;&#x3002;\n*   `Set.prototype.has(value)`&#xff1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x8be5;&#x503c;&#x662f;&#x5426;&#x4e3a;`Set`&#x7684;&#x6210;&#x5458;&#x3002;\n*   `Set.prototype.clear()`&#xff1a;&#x6e05;&#x9664;&#x6240;&#x6709;&#x6210;&#x5458;&#xff0c;&#x6ca1;&#x6709;&#x8fd4;&#x56de;&#x503c;&#x3002;\n\n&#x4e0a;&#x9762;&#x8fd9;&#x4e9b;&#x5c5e;&#x6027;&#x548c;&#x65b9;&#x6cd5;&#x7684;&#x5b9e;&#x4f8b;&#x5982;&#x4e0b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"88,101"}},{"content":"<pre data-lines=\"102,109\"><code data-lines=\"102,109\"><span class=\"hljs-attribute\">s</span>.add(<span class=\"hljs-number\">1</span>).add(<span class=\"hljs-number\">2</span>).add(<span class=\"hljs-number\">2</span>);\n<span class=\"hljs-attribute\">s</span>.size\n<span class=\"hljs-attribute\">s</span>.has(<span class=\"hljs-number\">1</span>)s.has(<span class=\"hljs-number\">2</span>)s.has(<span class=\"hljs-number\">3</span>)\n<span class=\"hljs-attribute\">s</span>.delete(<span class=\"hljs-number\">2</span>);\n<span class=\"hljs-attribute\">s</span>.has(<span class=\"hljs-number\">2</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"102,109"}},{"content":"<pre data-lines=\"110,111\"><code>&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x5bf9;&#x6bd4;&#xff0c;&#x770b;&#x770b;&#x5728;&#x5224;&#x65ad;&#x662f;&#x5426;&#x5305;&#x62ec;&#x4e00;&#x4e2a;&#x952e;&#x4e0a;&#x9762;&#xff0c;`Object`&#x7ed3;&#x6784;&#x548c;`Set`&#x7ed3;&#x6784;&#x7684;&#x5199;&#x6cd5;&#x4e0d;&#x540c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"110,111"}},{"content":"<pre data-lines=\"112,128\"><code data-lines=\"112,128\">const <span class=\"hljs-built_in\">properties</span> = {\n  &apos;<span class=\"hljs-built_in\">width</span>&apos;: <span class=\"hljs-number\">1</span>,\n  &apos;<span class=\"hljs-built_in\">height</span>&apos;: <span class=\"hljs-number\">1</span>\n};\n\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">properties</span>[someName]) {\n }\nconst <span class=\"hljs-built_in\">properties</span> = <span class=\"hljs-built_in\">new</span> Set();\n\n<span class=\"hljs-built_in\">properties</span>.add(&apos;<span class=\"hljs-built_in\">width</span>&apos;);\n<span class=\"hljs-built_in\">properties</span>.add(&apos;<span class=\"hljs-built_in\">height</span>&apos;);\n\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">properties</span>.has(someName)) {\n } \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"112,128"}},{"content":"<pre data-lines=\"129,130\"><code>`Array.from`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x5c06; Set &#x7ed3;&#x6784;&#x8f6c;&#x4e3a;&#x6570;&#x7ec4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"129,130"}},{"content":"<pre data-lines=\"131,135\"><code data-lines=\"131,135\"><span class=\"hljs-keyword\">const</span> items = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>]);\n<span class=\"hljs-keyword\">const</span> array = <span class=\"hljs-built_in\">Array</span>.<span class=\"hljs-keyword\">from</span>(items); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,135"}},{"content":"<pre data-lines=\"136,137\"><code>&#x8fd9;&#x5c31;&#x63d0;&#x4f9b;&#x4e86;&#x53bb;&#x9664;&#x6570;&#x7ec4;&#x91cd;&#x590d;&#x6210;&#x5458;&#x7684;&#x53e6;&#x4e00;&#x79cd;&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"136,137"}},{"content":"<pre data-lines=\"138,145\"><code data-lines=\"138,145\"><span class=\"hljs-keyword\">function</span> dedupe(<span class=\"hljs-keyword\">array</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">Array</span>.<span class=\"hljs-keyword\">from</span>(<span class=\"hljs-built_in\">new</span> <span class=\"hljs-keyword\">Set</span>(<span class=\"hljs-keyword\">array</span>));\n}\n\ndedupe([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"138,145"}}],"payload":{"tag":"h3","lines":"86,87"}},{"content":"&#x904d;&#x5386;&#x64cd;&#x4f5c;","children":[{"content":"<pre data-lines=\"148,160\"><code>Set &#x7ed3;&#x6784;&#x7684;&#x5b9e;&#x4f8b;&#x6709;&#x56db;&#x4e2a;&#x904d;&#x5386;&#x65b9;&#x6cd5;&#xff0c;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x904d;&#x5386;&#x6210;&#x5458;&#x3002;\n\n*   `Set.prototype.keys()`&#xff1a;&#x8fd4;&#x56de;&#x952e;&#x540d;&#x7684;&#x904d;&#x5386;&#x5668;\n*   `Set.prototype.values()`&#xff1a;&#x8fd4;&#x56de;&#x952e;&#x503c;&#x7684;&#x904d;&#x5386;&#x5668;\n*   `Set.prototype.entries()`&#xff1a;&#x8fd4;&#x56de;&#x952e;&#x503c;&#x5bf9;&#x7684;&#x904d;&#x5386;&#x5668;\n*   `Set.prototype.forEach()`&#xff1a;&#x4f7f;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x904d;&#x5386;&#x6bcf;&#x4e2a;&#x6210;&#x5458;\n\n&#x9700;&#x8981;&#x7279;&#x522b;&#x6307;&#x51fa;&#x7684;&#x662f;&#xff0c;`Set`&#x7684;&#x904d;&#x5386;&#x987a;&#x5e8f;&#x5c31;&#x662f;&#x63d2;&#x5165;&#x987a;&#x5e8f;&#x3002;&#x8fd9;&#x4e2a;&#x7279;&#x6027;&#x6709;&#x65f6;&#x975e;&#x5e38;&#x6709;&#x7528;&#xff0c;&#x6bd4;&#x5982;&#x4f7f;&#x7528; Set &#x4fdd;&#x5b58;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x5217;&#x8868;&#xff0c;&#x8c03;&#x7528;&#x65f6;&#x5c31;&#x80fd;&#x4fdd;&#x8bc1;&#x6309;&#x7167;&#x6dfb;&#x52a0;&#x987a;&#x5e8f;&#x8c03;&#x7528;&#x3002;\n\n**&#xff08;1&#xff09;`keys()`&#xff0c;`values()`&#xff0c;`entries()`**\n\n`keys`&#x65b9;&#x6cd5;&#x3001;`values`&#x65b9;&#x6cd5;&#x3001;`entries`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x90fd;&#x662f;&#x904d;&#x5386;&#x5668;&#x5bf9;&#x8c61;&#xff08;&#x8be6;&#x89c1;&#x300a;Iterator &#x5bf9;&#x8c61;&#x300b;&#x4e00;&#x7ae0;&#xff09;&#x3002;&#x7531;&#x4e8e; Set &#x7ed3;&#x6784;&#x6ca1;&#x6709;&#x952e;&#x540d;&#xff0c;&#x53ea;&#x6709;&#x952e;&#x503c;&#xff08;&#x6216;&#x8005;&#x8bf4;&#x952e;&#x540d;&#x548c;&#x952e;&#x503c;&#x662f;&#x540c;&#x4e00;&#x4e2a;&#x503c;&#xff09;&#xff0c;&#x6240;&#x4ee5;`keys`&#x65b9;&#x6cd5;&#x548c;`values`&#x65b9;&#x6cd5;&#x7684;&#x884c;&#x4e3a;&#x5b8c;&#x5168;&#x4e00;&#x81f4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"148,160"}},{"content":"<pre data-lines=\"161,174\"><code data-lines=\"161,174\">let <span class=\"hljs-keyword\">set</span> = new Set([&apos;red&apos;, &apos;green&apos;, &apos;blue&apos;]);\n\n<span class=\"hljs-keyword\">for</span> (let <span class=\"hljs-built_in\">item</span> <span class=\"hljs-keyword\">of</span> <span class=\"hljs-keyword\">set</span>.keys()) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">item</span>);\n}\n<span class=\"hljs-keyword\">for</span> (let <span class=\"hljs-built_in\">item</span> <span class=\"hljs-keyword\">of</span> <span class=\"hljs-keyword\">set</span>.values()) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">item</span>);\n}\n<span class=\"hljs-keyword\">for</span> (let <span class=\"hljs-built_in\">item</span> <span class=\"hljs-keyword\">of</span> <span class=\"hljs-keyword\">set</span>.entries()) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">item</span>);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"161,174"}},{"content":"<pre data-lines=\"175,178\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`entries`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x904d;&#x5386;&#x5668;&#xff0c;&#x540c;&#x65f6;&#x5305;&#x62ec;&#x952e;&#x540d;&#x548c;&#x952e;&#x503c;&#xff0c;&#x6240;&#x4ee5;&#x6bcf;&#x6b21;&#x8f93;&#x51fa;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x5b83;&#x7684;&#x4e24;&#x4e2a;&#x6210;&#x5458;&#x5b8c;&#x5168;&#x76f8;&#x7b49;&#x3002;\n\nSet &#x7ed3;&#x6784;&#x7684;&#x5b9e;&#x4f8b;&#x9ed8;&#x8ba4;&#x53ef;&#x904d;&#x5386;&#xff0c;&#x5b83;&#x7684;&#x9ed8;&#x8ba4;&#x904d;&#x5386;&#x5668;&#x751f;&#x6210;&#x51fd;&#x6570;&#x5c31;&#x662f;&#x5b83;&#x7684;`values`&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"175,178"}},{"content":"<pre data-lines=\"179,182\"><code data-lines=\"179,182\"><span class=\"hljs-title class_\">Set</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>[<span class=\"hljs-title class_\">Symbol</span>.<span class=\"hljs-property\">iterator</span>] === <span class=\"hljs-title class_\">Set</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">values</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"179,182"}},{"content":"<pre data-lines=\"183,184\"><code>&#x8fd9;&#x610f;&#x5473;&#x7740;&#xff0c;&#x53ef;&#x4ee5;&#x7701;&#x7565;`values`&#x65b9;&#x6cd5;&#xff0c;&#x76f4;&#x63a5;&#x7528;`for...of`&#x5faa;&#x73af;&#x904d;&#x5386; Set&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"183,184"}},{"content":"<pre data-lines=\"185,192\"><code data-lines=\"185,192\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> Set([<span class=\"hljs-string\">&apos;red&apos;</span>, <span class=\"hljs-string\">&apos;green&apos;</span>, <span class=\"hljs-string\">&apos;blue&apos;</span>]);\n\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> x of <span class=\"hljs-keyword\">set</span>) {\n  console.log(x);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"185,192"}},{"content":"<pre data-lines=\"193,196\"><code>**&#xff08;2&#xff09;`forEach()`**\n\nSet &#x7ed3;&#x6784;&#x7684;&#x5b9e;&#x4f8b;&#x4e0e;&#x6570;&#x7ec4;&#x4e00;&#x6837;&#xff0c;&#x4e5f;&#x62e5;&#x6709;`forEach`&#x65b9;&#x6cd5;&#xff0c;&#x7528;&#x4e8e;&#x5bf9;&#x6bcf;&#x4e2a;&#x6210;&#x5458;&#x6267;&#x884c;&#x67d0;&#x79cd;&#x64cd;&#x4f5c;&#xff0c;&#x6ca1;&#x6709;&#x8fd4;&#x56de;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"193,196"}},{"content":"<pre data-lines=\"197,201\"><code data-lines=\"197,201\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-built_in\">new</span> <span class=\"hljs-keyword\">Set</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">9</span>]);\n<span class=\"hljs-keyword\">set</span>.forEach((value, <span class=\"hljs-keyword\">key</span>) =&gt; console.log(<span class=\"hljs-keyword\">key</span> + <span class=\"hljs-comment\">&apos; : &apos; + value))</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"197,201"}},{"content":"<pre data-lines=\"202,209\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8bf4;&#x660e;&#xff0c;`forEach`&#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x5904;&#x7406;&#x51fd;&#x6570;&#x3002;&#x8be5;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x4e0e;&#x6570;&#x7ec4;&#x7684;`forEach`&#x4e00;&#x81f4;&#xff0c;&#x4f9d;&#x6b21;&#x4e3a;&#x952e;&#x503c;&#x3001;&#x952e;&#x540d;&#x3001;&#x96c6;&#x5408;&#x672c;&#x8eab;&#xff08;&#x4e0a;&#x4f8b;&#x7701;&#x7565;&#x4e86;&#x8be5;&#x53c2;&#x6570;&#xff09;&#x3002;&#x8fd9;&#x91cc;&#x9700;&#x8981;&#x6ce8;&#x610f;&#xff0c;Set &#x7ed3;&#x6784;&#x7684;&#x952e;&#x540d;&#x5c31;&#x662f;&#x952e;&#x503c;&#xff08;&#x4e24;&#x8005;&#x662f;&#x540c;&#x4e00;&#x4e2a;&#x503c;&#xff09;&#xff0c;&#x56e0;&#x6b64;&#x7b2c;&#x4e00;&#x4e2a;&#x53c2;&#x6570;&#x4e0e;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#x7684;&#x503c;&#x6c38;&#x8fdc;&#x90fd;&#x662f;&#x4e00;&#x6837;&#x7684;&#x3002;\n\n&#x53e6;&#x5916;&#xff0c;`forEach`&#x65b9;&#x6cd5;&#x8fd8;&#x53ef;&#x4ee5;&#x6709;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x8868;&#x793a;&#x7ed1;&#x5b9a;&#x5904;&#x7406;&#x51fd;&#x6570;&#x5185;&#x90e8;&#x7684;`this`&#x5bf9;&#x8c61;&#x3002;\n\n**&#xff08;3&#xff09;&#x904d;&#x5386;&#x7684;&#x5e94;&#x7528;**\n\n&#x6269;&#x5c55;&#x8fd0;&#x7b97;&#x7b26;&#xff08;`...`&#xff09;&#x5185;&#x90e8;&#x4f7f;&#x7528;`for...of`&#x5faa;&#x73af;&#xff0c;&#x6240;&#x4ee5;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x4e8e; Set &#x7ed3;&#x6784;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"202,209"}},{"content":"<pre data-lines=\"210,214\"><code data-lines=\"210,214\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-built_in\">set</span> = <span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Set</span>(<span class=\"hljs-meta\">[</span><span class=\"hljs-string\">&apos;red&apos;</span>, <span class=\"hljs-string\">&apos;green&apos;</span>, <span class=\"hljs-string\">&apos;blue&apos;</span><span class=\"hljs-meta\">]</span>);\nlet arr = <span class=\"hljs-meta\">[</span><span class=\"hljs-params\">...</span><span class=\"hljs-built_in\">set</span><span class=\"hljs-meta\">]</span>;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"210,214"}},{"content":"<pre data-lines=\"215,216\"><code>&#x6269;&#x5c55;&#x8fd0;&#x7b97;&#x7b26;&#x548c; Set &#x7ed3;&#x6784;&#x76f8;&#x7ed3;&#x5408;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x53bb;&#x9664;&#x6570;&#x7ec4;&#x7684;&#x91cd;&#x590d;&#x6210;&#x5458;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"215,216"}},{"content":"<pre data-lines=\"217,221\"><code data-lines=\"217,221\"><span class=\"hljs-keyword\">let</span> arr = [<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">5</span>];\n<span class=\"hljs-keyword\">let</span> unique = [...<span class=\"hljs-function\"><span class=\"hljs-keyword\">new</span> <span class=\"hljs-title\">Set</span>(<span class=\"hljs-params\">arr</span>)]</span>;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"217,221"}},{"content":"<pre data-lines=\"222,223\"><code>&#x800c;&#x4e14;&#xff0c;&#x6570;&#x7ec4;&#x7684;`map`&#x548c;`filter`&#x65b9;&#x6cd5;&#x4e5f;&#x53ef;&#x4ee5;&#x95f4;&#x63a5;&#x7528;&#x4e8e; Set &#x4e86;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"222,223"}},{"content":"<pre data-lines=\"224,230\"><code data-lines=\"224,230\">let <span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([1, 2, 3]);\n<span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-built_in\">..</span>.<span class=\"hljs-built_in\">set</span>].map(x =&gt; x * 2));\nlet <span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([1, 2, 3, 4, 5]);\n<span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-built_in\">..</span>.<span class=\"hljs-built_in\">set</span>].filter(x =&gt; (x % 2) == 0));\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"224,230"}},{"content":"<pre data-lines=\"231,232\"><code>&#x56e0;&#x6b64;&#x4f7f;&#x7528; Set &#x53ef;&#x4ee5;&#x5f88;&#x5bb9;&#x6613;&#x5730;&#x5b9e;&#x73b0;&#x5e76;&#x96c6;&#xff08;Union&#xff09;&#x3001;&#x4ea4;&#x96c6;&#xff08;Intersect&#xff09;&#x548c;&#x5dee;&#x96c6;&#xff08;Difference&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"231,232"}},{"content":"<pre data-lines=\"233,238\"><code data-lines=\"233,238\"><span class=\"hljs-keyword\">let</span> a = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]);\n<span class=\"hljs-keyword\">let</span> b = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>([<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">2</span>]);\n<span class=\"hljs-keyword\">let</span> union = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>([...a, ...b]);<span class=\"hljs-keyword\">let</span> intersect = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>([...a].<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> b.<span class=\"hljs-title function_\">has</span>(x)));<span class=\"hljs-keyword\">let</span> difference = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>([...a].<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> !b.<span class=\"hljs-title function_\">has</span>(x)));\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"233,238"}},{"content":"<pre data-lines=\"239,240\"><code>&#x5982;&#x679c;&#x60f3;&#x5728;&#x904d;&#x5386;&#x64cd;&#x4f5c;&#x4e2d;&#xff0c;&#x540c;&#x6b65;&#x6539;&#x53d8;&#x539f;&#x6765;&#x7684; Set &#x7ed3;&#x6784;&#xff0c;&#x76ee;&#x524d;&#x6ca1;&#x6709;&#x76f4;&#x63a5;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x4f46;&#x6709;&#x4e24;&#x79cd;&#x53d8;&#x901a;&#x65b9;&#x6cd5;&#x3002;&#x4e00;&#x79cd;&#x662f;&#x5229;&#x7528;&#x539f; Set &#x7ed3;&#x6784;&#x6620;&#x5c04;&#x51fa;&#x4e00;&#x4e2a;&#x65b0;&#x7684;&#x7ed3;&#x6784;&#xff0c;&#x7136;&#x540e;&#x8d4b;&#x503c;&#x7ed9;&#x539f;&#x6765;&#x7684; Set &#x7ed3;&#x6784;&#xff1b;&#x53e6;&#x4e00;&#x79cd;&#x662f;&#x5229;&#x7528;`Array.from`&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"239,240"}},{"content":"<pre data-lines=\"241,246\"><code data-lines=\"241,246\">let <span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([1, 2, 3]);\n<span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-built_in\">..</span>.<span class=\"hljs-built_in\">set</span>].map(val =&gt; val * 2));let <span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>([1, 2, 3]);\n<span class=\"hljs-built_in\">set</span> = new <span class=\"hljs-built_in\">Set</span>(Array.<span class=\"hljs-keyword\">from</span>(set, val =&gt; val * 2));\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"241,246"}},{"content":"<pre data-lines=\"247,248\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x63d0;&#x4f9b;&#x4e86;&#x4e24;&#x79cd;&#x65b9;&#x6cd5;&#xff0c;&#x76f4;&#x63a5;&#x5728;&#x904d;&#x5386;&#x64cd;&#x4f5c;&#x4e2d;&#x6539;&#x53d8;&#x539f;&#x6765;&#x7684; Set &#x7ed3;&#x6784;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"247,248"}}],"payload":{"tag":"h3","lines":"146,147"}}],"payload":{"tag":"h2","lines":"12,14"}},{"content":"WeakSet","children":[{"content":"&#x542b;&#x4e49;","children":[{"content":"<pre data-lines=\"254,257\"><code>WeakSet &#x7ed3;&#x6784;&#x4e0e; Set &#x7c7b;&#x4f3c;&#xff0c;&#x4e5f;&#x662f;&#x4e0d;&#x91cd;&#x590d;&#x7684;&#x503c;&#x7684;&#x96c6;&#x5408;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x5b83;&#x4e0e; Set &#x6709;&#x4e24;&#x4e2a;&#x533a;&#x522b;&#x3002;\n\n&#x9996;&#x5148;&#xff0c;WeakSet &#x7684;&#x6210;&#x5458;&#x53ea;&#x80fd;&#x662f;&#x5bf9;&#x8c61;&#xff0c;&#x800c;&#x4e0d;&#x80fd;&#x662f;&#x5176;&#x4ed6;&#x7c7b;&#x578b;&#x7684;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"254,257"}},{"content":"<pre data-lines=\"258,262\"><code data-lines=\"258,262\"><span class=\"hljs-keyword\">const</span> ws = <span class=\"hljs-keyword\">new</span> WeakSet();\nws.<span class=\"hljs-keyword\">add</span>(<span class=\"hljs-number\">1</span>)ws.<span class=\"hljs-keyword\">add</span>(Symbol())\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"258,262"}},{"content":"<pre data-lines=\"263,272\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8bd5;&#x56fe;&#x5411; WeakSet &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x6570;&#x503c;&#x548c;`Symbol`&#x503c;&#xff0c;&#x7ed3;&#x679c;&#x62a5;&#x9519;&#xff0c;&#x56e0;&#x4e3a; WeakSet &#x53ea;&#x80fd;&#x653e;&#x7f6e;&#x5bf9;&#x8c61;&#x3002;\n\n&#x5176;&#x6b21;&#xff0c;WeakSet &#x4e2d;&#x7684;&#x5bf9;&#x8c61;&#x90fd;&#x662f;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x5373;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x4e0d;&#x8003;&#x8651; WeakSet &#x5bf9;&#x8be5;&#x5bf9;&#x8c61;&#x7684;&#x5f15;&#x7528;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x5982;&#x679c;&#x5176;&#x4ed6;&#x5bf9;&#x8c61;&#x90fd;&#x4e0d;&#x518d;&#x5f15;&#x7528;&#x8be5;&#x5bf9;&#x8c61;&#xff0c;&#x90a3;&#x4e48;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x4f1a;&#x81ea;&#x52a8;&#x56de;&#x6536;&#x8be5;&#x5bf9;&#x8c61;&#x6240;&#x5360;&#x7528;&#x7684;&#x5185;&#x5b58;&#xff0c;&#x4e0d;&#x8003;&#x8651;&#x8be5;&#x5bf9;&#x8c61;&#x8fd8;&#x5b58;&#x5728;&#x4e8e; WeakSet &#x4e4b;&#x4e2d;&#x3002;\n\n&#x8fd9;&#x662f;&#x56e0;&#x4e3a;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6839;&#x636e;&#x5bf9;&#x8c61;&#x7684;&#x53ef;&#x8fbe;&#x6027;&#xff08;reachability&#xff09;&#x6765;&#x5224;&#x65ad;&#x56de;&#x6536;&#xff0c;&#x5982;&#x679c;&#x5bf9;&#x8c61;&#x8fd8;&#x80fd;&#x88ab;&#x8bbf;&#x95ee;&#x5230;&#xff0c;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x5c31;&#x4e0d;&#x4f1a;&#x91ca;&#x653e;&#x8fd9;&#x5757;&#x5185;&#x5b58;&#x3002;&#x7ed3;&#x675f;&#x4f7f;&#x7528;&#x8be5;&#x503c;&#x4e4b;&#x540e;&#xff0c;&#x6709;&#x65f6;&#x4f1a;&#x5fd8;&#x8bb0;&#x53d6;&#x6d88;&#x5f15;&#x7528;&#xff0c;&#x5bfc;&#x81f4;&#x5185;&#x5b58;&#x65e0;&#x6cd5;&#x91ca;&#x653e;&#xff0c;&#x8fdb;&#x800c;&#x53ef;&#x80fd;&#x4f1a;&#x5f15;&#x53d1;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x3002;WeakSet &#x91cc;&#x9762;&#x7684;&#x5f15;&#x7528;&#xff0c;&#x90fd;&#x4e0d;&#x8ba1;&#x5165;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#xff0c;&#x6240;&#x4ee5;&#x5c31;&#x4e0d;&#x5b58;&#x5728;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x3002;&#x56e0;&#x6b64;&#xff0c;WeakSet &#x9002;&#x5408;&#x4e34;&#x65f6;&#x5b58;&#x653e;&#x4e00;&#x7ec4;&#x5bf9;&#x8c61;&#xff0c;&#x4ee5;&#x53ca;&#x5b58;&#x653e;&#x8ddf;&#x5bf9;&#x8c61;&#x7ed1;&#x5b9a;&#x7684;&#x4fe1;&#x606f;&#x3002;&#x53ea;&#x8981;&#x8fd9;&#x4e9b;&#x5bf9;&#x8c61;&#x5728;&#x5916;&#x90e8;&#x6d88;&#x5931;&#xff0c;&#x5b83;&#x5728; WeakSet &#x91cc;&#x9762;&#x7684;&#x5f15;&#x7528;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;&#x6d88;&#x5931;&#x3002;\n\n&#x7531;&#x4e8e;&#x4e0a;&#x9762;&#x8fd9;&#x4e2a;&#x7279;&#x70b9;&#xff0c;WeakSet &#x7684;&#x6210;&#x5458;&#x662f;&#x4e0d;&#x9002;&#x5408;&#x5f15;&#x7528;&#x7684;&#xff0c;&#x56e0;&#x4e3a;&#x5b83;&#x4f1a;&#x968f;&#x65f6;&#x6d88;&#x5931;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x7531;&#x4e8e; WeakSet &#x5185;&#x90e8;&#x6709;&#x591a;&#x5c11;&#x4e2a;&#x6210;&#x5458;&#xff0c;&#x53d6;&#x51b3;&#x4e8e;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6709;&#x6ca1;&#x6709;&#x8fd0;&#x884c;&#xff0c;&#x8fd0;&#x884c;&#x524d;&#x540e;&#x5f88;&#x53ef;&#x80fd;&#x6210;&#x5458;&#x4e2a;&#x6570;&#x662f;&#x4e0d;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x800c;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x4f55;&#x65f6;&#x8fd0;&#x884c;&#x662f;&#x4e0d;&#x53ef;&#x9884;&#x6d4b;&#x7684;&#xff0c;&#x56e0;&#x6b64; ES6 &#x89c4;&#x5b9a; WeakSet &#x4e0d;&#x53ef;&#x904d;&#x5386;&#x3002;\n\n&#x8fd9;&#x4e9b;&#x7279;&#x70b9;&#x540c;&#x6837;&#x9002;&#x7528;&#x4e8e;&#x672c;&#x7ae0;&#x540e;&#x9762;&#x8981;&#x4ecb;&#x7ecd;&#x7684; WeakMap &#x7ed3;&#x6784;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"263,272"}}],"payload":{"tag":"h3","lines":"252,253"}},{"content":"&#x8bed;&#x6cd5;","children":[{"content":"<pre data-lines=\"275,276\"><code>WeakSet &#x662f;&#x4e00;&#x4e2a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;`new`&#x547d;&#x4ee4;&#xff0c;&#x521b;&#x5efa; WeakSet &#x6570;&#x636e;&#x7ed3;&#x6784;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"275,276"}},{"content":"<pre data-lines=\"277,280\"><code data-lines=\"277,280\"><span class=\"hljs-keyword\">const</span> ws = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">WeakSet</span>(); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"277,280"}},{"content":"<pre data-lines=\"281,282\"><code>&#x4f5c;&#x4e3a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;WeakSet &#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x6216;&#x7c7b;&#x4f3c;&#x6570;&#x7ec4;&#x7684;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x3002;&#xff08;&#x5b9e;&#x9645;&#x4e0a;&#xff0c;&#x4efb;&#x4f55;&#x5177;&#x6709; Iterable &#x63a5;&#x53e3;&#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x90fd;&#x53ef;&#x4ee5;&#x4f5c;&#x4e3a; WeakSet &#x7684;&#x53c2;&#x6570;&#x3002;&#xff09;&#x8be5;&#x6570;&#x7ec4;&#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#xff0c;&#x90fd;&#x4f1a;&#x81ea;&#x52a8;&#x6210;&#x4e3a; WeakSet &#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x7684;&#x6210;&#x5458;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,282"}},{"content":"<pre data-lines=\"283,287\"><code data-lines=\"283,287\">const a = <span class=\"hljs-string\">[[1, 2], [3, 4]]</span>;\nconst ws = new WeakSet(a);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"283,287"}},{"content":"<pre data-lines=\"288,291\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`a`&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x5b83;&#x6709;&#x4e24;&#x4e2a;&#x6210;&#x5458;&#xff0c;&#x4e5f;&#x90fd;&#x662f;&#x6570;&#x7ec4;&#x3002;&#x5c06;`a`&#x4f5c;&#x4e3a; WeakSet &#x6784;&#x9020;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#xff0c;`a`&#x7684;&#x6210;&#x5458;&#x4f1a;&#x81ea;&#x52a8;&#x6210;&#x4e3a; WeakSet &#x7684;&#x6210;&#x5458;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x662f;`a`&#x6570;&#x7ec4;&#x7684;&#x6210;&#x5458;&#x6210;&#x4e3a; WeakSet &#x7684;&#x6210;&#x5458;&#xff0c;&#x800c;&#x4e0d;&#x662f;`a`&#x6570;&#x7ec4;&#x672c;&#x8eab;&#x3002;&#x8fd9;&#x610f;&#x5473;&#x7740;&#xff0c;&#x6570;&#x7ec4;&#x7684;&#x6210;&#x5458;&#x53ea;&#x80fd;&#x662f;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"288,291"}},{"content":"<pre data-lines=\"292,296\"><code data-lines=\"292,296\"><span class=\"hljs-attribute\">const b</span> = [3, 4];\n<span class=\"hljs-attribute\">const ws</span> = new WeakSet(b);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"292,296"}},{"content":"<pre data-lines=\"297,306\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6570;&#x7ec4;`b`&#x7684;&#x6210;&#x5458;&#x4e0d;&#x662f;&#x5bf9;&#x8c61;&#xff0c;&#x52a0;&#x5165; WeakSet &#x5c31;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n\nWeakSet &#x7ed3;&#x6784;&#x6709;&#x4ee5;&#x4e0b;&#x4e09;&#x4e2a;&#x65b9;&#x6cd5;&#x3002;\n\n*   **WeakSet.prototype.add(value)**&#xff1a;&#x5411; WeakSet &#x5b9e;&#x4f8b;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x65b0;&#x6210;&#x5458;&#x3002;\n*   **WeakSet.prototype.delete(value)**&#xff1a;&#x6e05;&#x9664; WeakSet &#x5b9e;&#x4f8b;&#x7684;&#x6307;&#x5b9a;&#x6210;&#x5458;&#x3002;\n*   **WeakSet.prototype.has(value)**&#xff1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x67d0;&#x4e2a;&#x503c;&#x662f;&#x5426;&#x5728; WeakSet &#x5b9e;&#x4f8b;&#x4e4b;&#x4e2d;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"297,306"}},{"content":"<pre data-lines=\"307,319\"><code data-lines=\"307,319\">const ws <span class=\"hljs-operator\">=</span> new WeakSet()<span class=\"hljs-comment\">;</span>\nconst obj <span class=\"hljs-operator\">=</span> {}<span class=\"hljs-comment\">;</span>\nconst foo <span class=\"hljs-operator\">=</span> {}<span class=\"hljs-comment\">;</span>\n\nws.add(window)<span class=\"hljs-comment\">;</span>\nws.add(obj)<span class=\"hljs-comment\">;</span>\n\nws.has(window)<span class=\"hljs-comment\">;ws.has(foo);   </span>\nws.delete(window)<span class=\"hljs-comment\">;</span>\nws.has(window)<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"307,319"}},{"content":"<pre data-lines=\"320,321\"><code>WeakSet &#x6ca1;&#x6709;`size`&#x5c5e;&#x6027;&#xff0c;&#x6ca1;&#x6709;&#x529e;&#x6cd5;&#x904d;&#x5386;&#x5b83;&#x7684;&#x6210;&#x5458;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"320,321"}},{"content":"<pre data-lines=\"322,326\"><code data-lines=\"322,326\">ws<span class=\"hljs-selector-class\">.sizews</span><span class=\"hljs-selector-class\">.forEach</span>\nws<span class=\"hljs-selector-class\">.forEach</span>(<span class=\"hljs-built_in\">function</span>(item){ console<span class=\"hljs-selector-class\">.log</span>(<span class=\"hljs-string\">&apos;WeakSet has &apos;</span> + item)})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"322,326"}},{"content":"<pre data-lines=\"327,332\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x8bd5;&#x56fe;&#x83b7;&#x53d6;`size`&#x548c;`forEach`&#x5c5e;&#x6027;&#xff0c;&#x7ed3;&#x679c;&#x90fd;&#x4e0d;&#x80fd;&#x6210;&#x529f;&#x3002;\n\nWeakSet &#x4e0d;&#x80fd;&#x904d;&#x5386;&#xff0c;&#x662f;&#x56e0;&#x4e3a;&#x6210;&#x5458;&#x90fd;&#x662f;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x968f;&#x65f6;&#x53ef;&#x80fd;&#x6d88;&#x5931;&#xff0c;&#x904d;&#x5386;&#x673a;&#x5236;&#x65e0;&#x6cd5;&#x4fdd;&#x8bc1;&#x6210;&#x5458;&#x7684;&#x5b58;&#x5728;&#xff0c;&#x5f88;&#x53ef;&#x80fd;&#x521a;&#x521a;&#x904d;&#x5386;&#x7ed3;&#x675f;&#xff0c;&#x6210;&#x5458;&#x5c31;&#x53d6;&#x4e0d;&#x5230;&#x4e86;&#x3002;WeakSet &#x7684;&#x4e00;&#x4e2a;&#x7528;&#x5904;&#xff0c;&#x662f;&#x50a8;&#x5b58; DOM &#x8282;&#x70b9;&#xff0c;&#x800c;&#x4e0d;&#x7528;&#x62c5;&#x5fc3;&#x8fd9;&#x4e9b;&#x8282;&#x70b9;&#x4ece;&#x6587;&#x6863;&#x79fb;&#x9664;&#x65f6;&#xff0c;&#x4f1a;&#x5f15;&#x53d1;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f; WeakSet &#x7684;&#x53e6;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"327,332"}},{"content":"<pre data-lines=\"333,346\"><code data-lines=\"333,346\"><span class=\"hljs-keyword\">const</span> foos = <span class=\"hljs-keyword\">new</span> WeakSet()\n<span class=\"hljs-keyword\">class</span> Foo <span class=\"hljs-comment\">{\n  constructor() {\n    foos.add(this)\n  }</span>\n  <span class=\"hljs-keyword\">method</span> <span class=\"hljs-params\">()</span> <span class=\"hljs-comment\">{\n    if (!foos.has(this)) {\n      throw new TypeError(&apos;Foo.prototype.method &#x53ea;&#x80fd;&#x5728;Foo&#x7684;&#x5b9e;&#x4f8b;&#x4e0a;&#x8c03;&#x7528;&#xff01;&apos;);\n    }</span>\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"333,346"}},{"content":"<pre data-lines=\"347,348\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4fdd;&#x8bc1;&#x4e86;`Foo`&#x7684;&#x5b9e;&#x4f8b;&#x65b9;&#x6cd5;&#xff0c;&#x53ea;&#x80fd;&#x5728;`Foo`&#x7684;&#x5b9e;&#x4f8b;&#x4e0a;&#x8c03;&#x7528;&#x3002;&#x8fd9;&#x91cc;&#x4f7f;&#x7528; WeakSet &#x7684;&#x597d;&#x5904;&#x662f;&#xff0c;`foos`&#x5bf9;&#x5b9e;&#x4f8b;&#x7684;&#x5f15;&#x7528;&#xff0c;&#x4e0d;&#x4f1a;&#x88ab;&#x8ba1;&#x5165;&#x5185;&#x5b58;&#x56de;&#x6536;&#x673a;&#x5236;&#xff0c;&#x6240;&#x4ee5;&#x5220;&#x9664;&#x5b9e;&#x4f8b;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e0d;&#x7528;&#x8003;&#x8651;`foos`&#xff0c;&#x4e5f;&#x4e0d;&#x4f1a;&#x51fa;&#x73b0;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"347,348"}}],"payload":{"tag":"h3","lines":"273,274"}}],"payload":{"tag":"h2","lines":"249,251"}},{"content":"Map","children":[{"content":"&#x542b;&#x4e49;&#x548c;&#x57fa;&#x672c;&#x7528;&#x6cd5;","children":[{"content":"<pre data-lines=\"354,355\"><code>JavaScript &#x7684;&#x5bf9;&#x8c61;&#xff08;Object&#xff09;&#xff0c;&#x672c;&#x8d28;&#x4e0a;&#x662f;&#x952e;&#x503c;&#x5bf9;&#x7684;&#x96c6;&#x5408;&#xff08;Hash &#x7ed3;&#x6784;&#xff09;&#xff0c;&#x4f46;&#x662f;&#x4f20;&#x7edf;&#x4e0a;&#x53ea;&#x80fd;&#x7528;&#x5b57;&#x7b26;&#x4e32;&#x5f53;&#x4f5c;&#x952e;&#x3002;&#x8fd9;&#x7ed9;&#x5b83;&#x7684;&#x4f7f;&#x7528;&#x5e26;&#x6765;&#x4e86;&#x5f88;&#x5927;&#x7684;&#x9650;&#x5236;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"354,355"}},{"content":"<pre data-lines=\"356,363\"><code data-lines=\"356,363\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">data</span> = {};\n<span class=\"hljs-keyword\">const</span> element = document.getElementById(<span class=\"hljs-string\">&apos;myDiv&apos;</span>);\n\n<span class=\"hljs-keyword\">data</span>[element] = <span class=\"hljs-string\">&apos;metadata&apos;</span>;\n<span class=\"hljs-keyword\">data</span>[<span class=\"hljs-string\">&apos;[object HTMLDivElement]&apos;</span>]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"356,363"}},{"content":"<pre data-lines=\"364,367\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x539f;&#x610f;&#x662f;&#x5c06;&#x4e00;&#x4e2a; DOM &#x8282;&#x70b9;&#x4f5c;&#x4e3a;&#x5bf9;&#x8c61;`data`&#x7684;&#x952e;&#xff0c;&#x4f46;&#x662f;&#x7531;&#x4e8e;&#x5bf9;&#x8c61;&#x53ea;&#x63a5;&#x53d7;&#x5b57;&#x7b26;&#x4e32;&#x4f5c;&#x4e3a;&#x952e;&#x540d;&#xff0c;&#x6240;&#x4ee5;`element`&#x88ab;&#x81ea;&#x52a8;&#x8f6c;&#x4e3a;&#x5b57;&#x7b26;&#x4e32;`[object HTMLDivElement]`&#x3002;\n\n&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#xff0c;ES6 &#x63d0;&#x4f9b;&#x4e86; Map &#x6570;&#x636e;&#x7ed3;&#x6784;&#x3002;&#x5b83;&#x7c7b;&#x4f3c;&#x4e8e;&#x5bf9;&#x8c61;&#xff0c;&#x4e5f;&#x662f;&#x952e;&#x503c;&#x5bf9;&#x7684;&#x96c6;&#x5408;&#xff0c;&#x4f46;&#x662f;&#x201c;&#x952e;&#x201d;&#x7684;&#x8303;&#x56f4;&#x4e0d;&#x9650;&#x4e8e;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x5404;&#x79cd;&#x7c7b;&#x578b;&#x7684;&#x503c;&#xff08;&#x5305;&#x62ec;&#x5bf9;&#x8c61;&#xff09;&#x90fd;&#x53ef;&#x4ee5;&#x5f53;&#x4f5c;&#x952e;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;Object &#x7ed3;&#x6784;&#x63d0;&#x4f9b;&#x4e86;&#x201c;&#x5b57;&#x7b26;&#x4e32;&#x2014;&#x503c;&#x201d;&#x7684;&#x5bf9;&#x5e94;&#xff0c;Map &#x7ed3;&#x6784;&#x63d0;&#x4f9b;&#x4e86;&#x201c;&#x503c;&#x2014;&#x503c;&#x201d;&#x7684;&#x5bf9;&#x5e94;&#xff0c;&#x662f;&#x4e00;&#x79cd;&#x66f4;&#x5b8c;&#x5584;&#x7684; Hash &#x7ed3;&#x6784;&#x5b9e;&#x73b0;&#x3002;&#x5982;&#x679c;&#x4f60;&#x9700;&#x8981;&#x201c;&#x952e;&#x503c;&#x5bf9;&#x201d;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;Map &#x6bd4; Object &#x66f4;&#x5408;&#x9002;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"364,367"}},{"content":"<pre data-lines=\"368,376\"><code data-lines=\"368,376\"><span class=\"hljs-keyword\">const</span> m = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n<span class=\"hljs-keyword\">const</span> o = {p: <span class=\"hljs-string\">&apos;Hello World&apos;</span>};\n\nm.<span class=\"hljs-keyword\">set</span>(o, <span class=\"hljs-string\">&apos;content&apos;</span>)\nm.<span class=\"hljs-keyword\">get</span>(o)\nm.has(o)m.delete(o)m.has(o)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"368,376"}},{"content":"<pre data-lines=\"377,380\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4f7f;&#x7528; Map &#x7ed3;&#x6784;&#x7684;`set`&#x65b9;&#x6cd5;&#xff0c;&#x5c06;&#x5bf9;&#x8c61;`o`&#x5f53;&#x4f5c;`m`&#x7684;&#x4e00;&#x4e2a;&#x952e;&#xff0c;&#x7136;&#x540e;&#x53c8;&#x4f7f;&#x7528;`get`&#x65b9;&#x6cd5;&#x8bfb;&#x53d6;&#x8fd9;&#x4e2a;&#x952e;&#xff0c;&#x63a5;&#x7740;&#x4f7f;&#x7528;`delete`&#x65b9;&#x6cd5;&#x5220;&#x9664;&#x4e86;&#x8fd9;&#x4e2a;&#x952e;&#x3002;\n\n&#x4e0a;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x5c55;&#x793a;&#x4e86;&#x5982;&#x4f55;&#x5411; Map &#x6dfb;&#x52a0;&#x6210;&#x5458;&#x3002;&#x4f5c;&#x4e3a;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;Map &#x4e5f;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x3002;&#x8be5;&#x6570;&#x7ec4;&#x7684;&#x6210;&#x5458;&#x662f;&#x4e00;&#x4e2a;&#x4e2a;&#x8868;&#x793a;&#x952e;&#x503c;&#x5bf9;&#x7684;&#x6570;&#x7ec4;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"377,380"}},{"content":"<pre data-lines=\"381,389\"><code data-lines=\"381,389\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">map</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>([\n  [<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;&#x5f20;&#x4e09;&apos;</span>],\n  [<span class=\"hljs-string\">&apos;title&apos;</span>, <span class=\"hljs-string\">&apos;Author&apos;</span>]\n]);\n\n<span class=\"hljs-keyword\">map</span>.sizemap.has(<span class=\"hljs-string\">&apos;name&apos;</span>)<span class=\"hljs-keyword\">map</span>.get(<span class=\"hljs-string\">&apos;name&apos;</span>)<span class=\"hljs-keyword\">map</span>.has(<span class=\"hljs-string\">&apos;title&apos;</span>)<span class=\"hljs-keyword\">map</span>.get(<span class=\"hljs-string\">&apos;title&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"381,389"}},{"content":"<pre data-lines=\"390,393\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x5728;&#x65b0;&#x5efa; Map &#x5b9e;&#x4f8b;&#x65f6;&#xff0c;&#x5c31;&#x6307;&#x5b9a;&#x4e86;&#x4e24;&#x4e2a;&#x952e;`name`&#x548c;`title`&#x3002;\n\n`Map`&#x6784;&#x9020;&#x51fd;&#x6570;&#x63a5;&#x53d7;&#x6570;&#x7ec4;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x6267;&#x884c;&#x7684;&#x662f;&#x4e0b;&#x9762;&#x7684;&#x7b97;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"390,393"}},{"content":"<pre data-lines=\"394,406\"><code data-lines=\"394,406\"><span class=\"hljs-keyword\">const</span> items = [\n  [<span class=\"hljs-string\">&apos;name&apos;</span>, <span class=\"hljs-string\">&apos;&#x5f20;&#x4e09;&apos;</span>],\n  [<span class=\"hljs-string\">&apos;title&apos;</span>, <span class=\"hljs-string\">&apos;Author&apos;</span>]\n];\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">map</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n\nitems.forEach(\n  ([key, value]) =&gt; <span class=\"hljs-keyword\">map</span>.set(key, value)\n); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"394,406"}},{"content":"<pre data-lines=\"407,408\"><code>&#x4e8b;&#x5b9e;&#x4e0a;&#xff0c;&#x4e0d;&#x4ec5;&#x4ec5;&#x662f;&#x6570;&#x7ec4;&#xff0c;&#x4efb;&#x4f55;&#x5177;&#x6709; Iterator &#x63a5;&#x53e3;&#x3001;&#x4e14;&#x6bcf;&#x4e2a;&#x6210;&#x5458;&#x90fd;&#x662f;&#x4e00;&#x4e2a;&#x53cc;&#x5143;&#x7d20;&#x7684;&#x6570;&#x7ec4;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff08;&#x8be6;&#x89c1;&#x300a;Iterator&#x300b;&#x4e00;&#x7ae0;&#xff09;&#x90fd;&#x53ef;&#x4ee5;&#x5f53;&#x4f5c;`Map`&#x6784;&#x9020;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#x3002;&#x8fd9;&#x5c31;&#x662f;&#x8bf4;&#xff0c;`Set`&#x548c;`Map`&#x90fd;&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x751f;&#x6210;&#x65b0;&#x7684; Map&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"407,408"}},{"content":"<pre data-lines=\"409,420\"><code data-lines=\"409,420\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">set</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>([\n  [<span class=\"hljs-string\">&apos;foo&apos;</span>, <span class=\"hljs-number\">1</span>],\n  [<span class=\"hljs-string\">&apos;bar&apos;</span>, <span class=\"hljs-number\">2</span>]\n]);\n<span class=\"hljs-keyword\">const</span> m1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>(<span class=\"hljs-keyword\">set</span>);\nm1.<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>)\n<span class=\"hljs-keyword\">const</span> m2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>([[<span class=\"hljs-string\">&apos;baz&apos;</span>, <span class=\"hljs-number\">3</span>]]);\n<span class=\"hljs-keyword\">const</span> m3 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>(m2);\nm3.<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-string\">&apos;baz&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"409,420"}},{"content":"<pre data-lines=\"421,424\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x6211;&#x4eec;&#x5206;&#x522b;&#x4f7f;&#x7528; Set &#x5bf9;&#x8c61;&#x548c; Map &#x5bf9;&#x8c61;&#xff0c;&#x5f53;&#x4f5c;`Map`&#x6784;&#x9020;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;&#xff0c;&#x7ed3;&#x679c;&#x90fd;&#x751f;&#x6210;&#x4e86;&#x65b0;&#x7684; Map &#x5bf9;&#x8c61;&#x3002;\n\n&#x5982;&#x679c;&#x5bf9;&#x540c;&#x4e00;&#x4e2a;&#x952e;&#x591a;&#x6b21;&#x8d4b;&#x503c;&#xff0c;&#x540e;&#x9762;&#x7684;&#x503c;&#x5c06;&#x8986;&#x76d6;&#x524d;&#x9762;&#x7684;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"421,424"}},{"content":"<pre data-lines=\"425,434\"><code data-lines=\"425,434\">const <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Map</span>();\n\n<span class=\"hljs-built_in\">map</span>\n.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;aaa&apos;</span>)\n.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;bbb&apos;</span>);\n\n<span class=\"hljs-built_in\">map</span>.get(<span class=\"hljs-number\">1</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"425,434"}},{"content":"<pre data-lines=\"435,438\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x5bf9;&#x952e;`1`&#x8fde;&#x7eed;&#x8d4b;&#x503c;&#x4e24;&#x6b21;&#xff0c;&#x540e;&#x4e00;&#x6b21;&#x7684;&#x503c;&#x8986;&#x76d6;&#x524d;&#x4e00;&#x6b21;&#x7684;&#x503c;&#x3002;\n\n&#x5982;&#x679c;&#x8bfb;&#x53d6;&#x4e00;&#x4e2a;&#x672a;&#x77e5;&#x7684;&#x952e;&#xff0c;&#x5219;&#x8fd4;&#x56de;`undefined`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"435,438"}},{"content":"<pre data-lines=\"439,442\"><code data-lines=\"439,442\"><span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>().<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-string\">&apos;asfddfsasadf&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"439,442"}},{"content":"<pre data-lines=\"443,444\"><code>&#x6ce8;&#x610f;&#xff0c;&#x53ea;&#x6709;&#x5bf9;&#x540c;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x7684;&#x5f15;&#x7528;&#xff0c;Map &#x7ed3;&#x6784;&#x624d;&#x5c06;&#x5176;&#x89c6;&#x4e3a;&#x540c;&#x4e00;&#x4e2a;&#x952e;&#x3002;&#x8fd9;&#x4e00;&#x70b9;&#x8981;&#x975e;&#x5e38;&#x5c0f;&#x5fc3;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"443,444"}},{"content":"<pre data-lines=\"445,451\"><code data-lines=\"445,451\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">map</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n\n<span class=\"hljs-keyword\">map</span>.set([<span class=\"hljs-string\">&apos;a&apos;</span>], <span class=\"hljs-number\">555</span>);\n<span class=\"hljs-keyword\">map</span>.get([<span class=\"hljs-string\">&apos;a&apos;</span>])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"445,451"}},{"content":"<pre data-lines=\"452,455\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x7684;`set`&#x548c;`get`&#x65b9;&#x6cd5;&#xff0c;&#x8868;&#x9762;&#x662f;&#x9488;&#x5bf9;&#x540c;&#x4e00;&#x4e2a;&#x952e;&#xff0c;&#x4f46;&#x5b9e;&#x9645;&#x4e0a;&#x8fd9;&#x662f;&#x4e24;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x6570;&#x7ec4;&#x5b9e;&#x4f8b;&#xff0c;&#x5185;&#x5b58;&#x5730;&#x5740;&#x662f;&#x4e0d;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x56e0;&#x6b64;`get`&#x65b9;&#x6cd5;&#x65e0;&#x6cd5;&#x8bfb;&#x53d6;&#x8be5;&#x952e;&#xff0c;&#x8fd4;&#x56de;`undefined`&#x3002;\n\n&#x540c;&#x7406;&#xff0c;&#x540c;&#x6837;&#x7684;&#x503c;&#x7684;&#x4e24;&#x4e2a;&#x5b9e;&#x4f8b;&#xff0c;&#x5728; Map &#x7ed3;&#x6784;&#x4e2d;&#x88ab;&#x89c6;&#x4e3a;&#x4e24;&#x4e2a;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"452,455"}},{"content":"<pre data-lines=\"456,468\"><code data-lines=\"456,468\"><span class=\"hljs-keyword\">const</span> map = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n\n<span class=\"hljs-keyword\">const</span> k1 = [<span class=\"hljs-string\">&apos;a&apos;</span>];\n<span class=\"hljs-keyword\">const</span> k2 = [<span class=\"hljs-string\">&apos;a&apos;</span>];\n\nmap\n.<span class=\"hljs-keyword\">set</span>(k1, <span class=\"hljs-number\">111</span>)\n.<span class=\"hljs-keyword\">set</span>(k2, <span class=\"hljs-number\">222</span>);\n\nmap.<span class=\"hljs-keyword\">get</span>(k1)map.<span class=\"hljs-keyword\">get</span>(k2)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"456,468"}},{"content":"<pre data-lines=\"469,474\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x53d8;&#x91cf;`k1`&#x548c;`k2`&#x7684;&#x503c;&#x662f;&#x4e00;&#x6837;&#x7684;&#xff0c;&#x4f46;&#x662f;&#x5b83;&#x4eec;&#x5728; Map &#x7ed3;&#x6784;&#x4e2d;&#x88ab;&#x89c6;&#x4e3a;&#x4e24;&#x4e2a;&#x952e;&#x3002;\n\n&#x7531;&#x4e0a;&#x53ef;&#x77e5;&#xff0c;Map &#x7684;&#x952e;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x8ddf;&#x5185;&#x5b58;&#x5730;&#x5740;&#x7ed1;&#x5b9a;&#x7684;&#xff0c;&#x53ea;&#x8981;&#x5185;&#x5b58;&#x5730;&#x5740;&#x4e0d;&#x4e00;&#x6837;&#xff0c;&#x5c31;&#x89c6;&#x4e3a;&#x4e24;&#x4e2a;&#x952e;&#x3002;&#x8fd9;&#x5c31;&#x89e3;&#x51b3;&#x4e86;&#x540c;&#x540d;&#x5c5e;&#x6027;&#x78b0;&#x649e;&#xff08;clash&#xff09;&#x7684;&#x95ee;&#x9898;&#xff0c;&#x6211;&#x4eec;&#x6269;&#x5c55;&#x522b;&#x4eba;&#x7684;&#x5e93;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5982;&#x679c;&#x4f7f;&#x7528;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x952e;&#x540d;&#xff0c;&#x5c31;&#x4e0d;&#x7528;&#x62c5;&#x5fc3;&#x81ea;&#x5df1;&#x7684;&#x5c5e;&#x6027;&#x4e0e;&#x539f;&#x4f5c;&#x8005;&#x7684;&#x5c5e;&#x6027;&#x540c;&#x540d;&#x3002;\n\n&#x5982;&#x679c; Map &#x7684;&#x952e;&#x662f;&#x4e00;&#x4e2a;&#x7b80;&#x5355;&#x7c7b;&#x578b;&#x7684;&#x503c;&#xff08;&#x6570;&#x5b57;&#x3001;&#x5b57;&#x7b26;&#x4e32;&#x3001;&#x5e03;&#x5c14;&#x503c;&#xff09;&#xff0c;&#x5219;&#x53ea;&#x8981;&#x4e24;&#x4e2a;&#x503c;&#x4e25;&#x683c;&#x76f8;&#x7b49;&#xff0c;Map &#x5c06;&#x5176;&#x89c6;&#x4e3a;&#x4e00;&#x4e2a;&#x952e;&#xff0c;&#x6bd4;&#x5982;`0`&#x548c;`-0`&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x952e;&#xff0c;&#x5e03;&#x5c14;&#x503c;`true`&#x548c;&#x5b57;&#x7b26;&#x4e32;`true`&#x5219;&#x662f;&#x4e24;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x952e;&#x3002;&#x53e6;&#x5916;&#xff0c;`undefined`&#x548c;`null`&#x4e5f;&#x662f;&#x4e24;&#x4e2a;&#x4e0d;&#x540c;&#x7684;&#x952e;&#x3002;&#x867d;&#x7136;`NaN`&#x4e0d;&#x4e25;&#x683c;&#x76f8;&#x7b49;&#x4e8e;&#x81ea;&#x8eab;&#xff0c;&#x4f46; Map &#x5c06;&#x5176;&#x89c6;&#x4e3a;&#x540c;&#x4e00;&#x4e2a;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"469,474"}},{"content":"<pre data-lines=\"475,489\"><code data-lines=\"475,489\">let map = new Map();\n\nmap.<span class=\"hljs-built_in\">set</span>(-0, 123);\nmap.<span class=\"hljs-built_in\">get</span>(+0)\nmap.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-literal\">true</span>, 1);\nmap.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-string\">&apos;true&apos;</span>, 2);\nmap.<span class=\"hljs-built_in\">get</span>(<span class=\"hljs-literal\">true</span>)\nmap.<span class=\"hljs-built_in\">set</span>(undefined, 3);\nmap.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-literal\">null</span>, 4);\nmap.<span class=\"hljs-built_in\">get</span>(undefined)\nmap.<span class=\"hljs-built_in\">set</span>(NaN, 123);\nmap.<span class=\"hljs-built_in\">get</span>(NaN)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"475,489"}}],"payload":{"tag":"h3","lines":"352,353"}},{"content":"&#x5b9e;&#x4f8b;&#x7684;&#x5c5e;&#x6027;&#x548c;&#x64cd;&#x4f5c;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"492,497\"><code>Map &#x7ed3;&#x6784;&#x7684;&#x5b9e;&#x4f8b;&#x6709;&#x4ee5;&#x4e0b;&#x5c5e;&#x6027;&#x548c;&#x64cd;&#x4f5c;&#x65b9;&#x6cd5;&#x3002;\n\n**&#xff08;1&#xff09;size &#x5c5e;&#x6027;**\n\n`size`&#x5c5e;&#x6027;&#x8fd4;&#x56de; Map &#x7ed3;&#x6784;&#x7684;&#x6210;&#x5458;&#x603b;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"492,497"}},{"content":"<pre data-lines=\"498,505\"><code data-lines=\"498,505\">const <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Map</span>();\n<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>, <span class=\"hljs-literal\">true</span>);\n<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-string\">&apos;bar&apos;</span>, <span class=\"hljs-literal\">false</span>);\n\n<span class=\"hljs-built_in\">map</span>.size\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"498,505"}},{"content":"<pre data-lines=\"506,509\"><code>**&#xff08;2&#xff09;Map.prototype.set(key, value)**\n\n`set`&#x65b9;&#x6cd5;&#x8bbe;&#x7f6e;&#x952e;&#x540d;`key`&#x5bf9;&#x5e94;&#x7684;&#x952e;&#x503c;&#x4e3a;`value`&#xff0c;&#x7136;&#x540e;&#x8fd4;&#x56de;&#x6574;&#x4e2a; Map &#x7ed3;&#x6784;&#x3002;&#x5982;&#x679c;`key`&#x5df2;&#x7ecf;&#x6709;&#x503c;&#xff0c;&#x5219;&#x952e;&#x503c;&#x4f1a;&#x88ab;&#x66f4;&#x65b0;&#xff0c;&#x5426;&#x5219;&#x5c31;&#x65b0;&#x751f;&#x6210;&#x8be5;&#x952e;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"506,509"}},{"content":"<pre data-lines=\"510,515\"><code data-lines=\"510,515\"><span class=\"hljs-keyword\">const</span> m = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n\nm.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-string\">&apos;edition&apos;</span>, <span class=\"hljs-number\">6</span>)       m.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-number\">262</span>, <span class=\"hljs-string\">&apos;standard&apos;</span>)    m.<span class=\"hljs-keyword\">set</span>(undefined, <span class=\"hljs-string\">&apos;nah&apos;</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"510,515"}},{"content":"<pre data-lines=\"516,517\"><code>`set`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x7684;&#x662f;&#x5f53;&#x524d;&#x7684;`Map`&#x5bf9;&#x8c61;&#xff0c;&#x56e0;&#x6b64;&#x53ef;&#x4ee5;&#x91c7;&#x7528;&#x94fe;&#x5f0f;&#x5199;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"516,517"}},{"content":"<pre data-lines=\"518,524\"><code data-lines=\"518,524\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Map</span>()\n  .<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;a&apos;</span>)\n  .<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&apos;b&apos;</span>)\n  .<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">&apos;c&apos;</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"518,524"}},{"content":"<pre data-lines=\"525,528\"><code>**&#xff08;3&#xff09;Map.prototype.get(key)**\n\n`get`&#x65b9;&#x6cd5;&#x8bfb;&#x53d6;`key`&#x5bf9;&#x5e94;&#x7684;&#x952e;&#x503c;&#xff0c;&#x5982;&#x679c;&#x627e;&#x4e0d;&#x5230;`key`&#xff0c;&#x8fd4;&#x56de;`undefined`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"525,528"}},{"content":"<pre data-lines=\"529,536\"><code data-lines=\"529,536\"><span class=\"hljs-keyword\">const</span> m = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n\n<span class=\"hljs-keyword\">const</span> hello = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {<span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&apos;hello&apos;</span>);};\nm.<span class=\"hljs-title function_\">set</span>(hello, <span class=\"hljs-string\">&apos;Hello ES6!&apos;</span>)\nm.<span class=\"hljs-title function_\">get</span>(hello) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"529,536"}},{"content":"<pre data-lines=\"537,540\"><code>**&#xff08;4&#xff09;Map.prototype.has(key)**\n\n`has`&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x5e03;&#x5c14;&#x503c;&#xff0c;&#x8868;&#x793a;&#x67d0;&#x4e2a;&#x952e;&#x662f;&#x5426;&#x5728;&#x5f53;&#x524d; Map &#x5bf9;&#x8c61;&#x4e4b;&#x4e2d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"537,540"}},{"content":"<pre data-lines=\"541,550\"><code data-lines=\"541,550\"><span class=\"hljs-keyword\">const</span> m = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n\nm.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-string\">&apos;edition&apos;</span>, <span class=\"hljs-number\">6</span>);\nm.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-number\">262</span>, <span class=\"hljs-string\">&apos;standard&apos;</span>);\nm.<span class=\"hljs-keyword\">set</span>(undefined, <span class=\"hljs-string\">&apos;nah&apos;</span>);\n\nm.has(<span class=\"hljs-string\">&apos;edition&apos;</span>)    m.has(<span class=\"hljs-string\">&apos;years&apos;</span>)      m.has(<span class=\"hljs-number\">262</span>)          m.has(undefined) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"541,550"}},{"content":"<pre data-lines=\"551,554\"><code>**&#xff08;5&#xff09;Map.prototype.delete(key)**\n\n`delete`&#x65b9;&#x6cd5;&#x5220;&#x9664;&#x67d0;&#x4e2a;&#x952e;&#xff0c;&#x8fd4;&#x56de;`true`&#x3002;&#x5982;&#x679c;&#x5220;&#x9664;&#x5931;&#x8d25;&#xff0c;&#x8fd4;&#x56de;`false`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"551,554"}},{"content":"<pre data-lines=\"555,562\"><code data-lines=\"555,562\"><span class=\"hljs-keyword\">const</span> m = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\nm.set(<span class=\"hljs-literal\">undefined</span>, <span class=\"hljs-string\">&apos;nah&apos;</span>);\nm.has(<span class=\"hljs-literal\">undefined</span>)    \nm.<span class=\"hljs-keyword\">delete</span>(<span class=\"hljs-literal\">undefined</span>)\nm.has(<span class=\"hljs-literal\">undefined</span>) \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"555,562"}},{"content":"<pre data-lines=\"563,566\"><code>**&#xff08;6&#xff09;Map.prototype.clear()**\n\n`clear`&#x65b9;&#x6cd5;&#x6e05;&#x9664;&#x6240;&#x6709;&#x6210;&#x5458;&#xff0c;&#x6ca1;&#x6709;&#x8fd4;&#x56de;&#x503c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"563,566"}},{"content":"<pre data-lines=\"567,575\"><code data-lines=\"567,575\"><span class=\"hljs-keyword\">let</span> <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Map</span>();\n<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-string\">&apos;foo&apos;</span>, <span class=\"hljs-literal\">true</span>);\n<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-string\">&apos;bar&apos;</span>, <span class=\"hljs-literal\">false</span>);\n\n<span class=\"hljs-built_in\">map</span>.sizemap.clear()\n<span class=\"hljs-built_in\">map</span>.size\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"567,575"}}],"payload":{"tag":"h3","lines":"490,491"}},{"content":"&#x904d;&#x5386;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"578,586\"><code>Map &#x7ed3;&#x6784;&#x539f;&#x751f;&#x63d0;&#x4f9b;&#x4e09;&#x4e2a;&#x904d;&#x5386;&#x5668;&#x751f;&#x6210;&#x51fd;&#x6570;&#x548c;&#x4e00;&#x4e2a;&#x904d;&#x5386;&#x65b9;&#x6cd5;&#x3002;\n\n*   `Map.prototype.keys()`&#xff1a;&#x8fd4;&#x56de;&#x952e;&#x540d;&#x7684;&#x904d;&#x5386;&#x5668;&#x3002;\n*   `Map.prototype.values()`&#xff1a;&#x8fd4;&#x56de;&#x952e;&#x503c;&#x7684;&#x904d;&#x5386;&#x5668;&#x3002;\n*   `Map.prototype.entries()`&#xff1a;&#x8fd4;&#x56de;&#x6240;&#x6709;&#x6210;&#x5458;&#x7684;&#x904d;&#x5386;&#x5668;&#x3002;\n*   `Map.prototype.forEach()`&#xff1a;&#x904d;&#x5386; Map &#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#x3002;\n\n&#x9700;&#x8981;&#x7279;&#x522b;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;Map &#x7684;&#x904d;&#x5386;&#x987a;&#x5e8f;&#x5c31;&#x662f;&#x63d2;&#x5165;&#x987a;&#x5e8f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"578,586"}},{"content":"<pre data-lines=\"587,607\"><code data-lines=\"587,607\">const <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-built_in\">new</span> Map([\n  [&apos;F&apos;, &apos;no&apos;],\n  [&apos;T&apos;,  &apos;yes&apos;],\n]);\n\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">let</span> <span class=\"hljs-built_in\">key</span> of <span class=\"hljs-built_in\">map</span>.keys()) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">key</span>);\n}\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">let</span> value of <span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">values</span>()) {\n  console.<span class=\"hljs-built_in\">log</span>(value);\n}\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">let</span> item of <span class=\"hljs-built_in\">map</span>.entries()) {\n  console.<span class=\"hljs-built_in\">log</span>(item[<span class=\"hljs-number\">0</span>], item[<span class=\"hljs-number\">1</span>]);\n}<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">let</span> [<span class=\"hljs-built_in\">key</span>, value] of <span class=\"hljs-built_in\">map</span>.entries()) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">key</span>, value);\n}<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">let</span> [<span class=\"hljs-built_in\">key</span>, value] of <span class=\"hljs-built_in\">map</span>) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">key</span>, value);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"587,607"}},{"content":"<pre data-lines=\"608,609\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x6700;&#x540e;&#x7684;&#x90a3;&#x4e2a;&#x4f8b;&#x5b50;&#xff0c;&#x8868;&#x793a; Map &#x7ed3;&#x6784;&#x7684;&#x9ed8;&#x8ba4;&#x904d;&#x5386;&#x5668;&#x63a5;&#x53e3;&#xff08;`Symbol.iterator`&#x5c5e;&#x6027;&#xff09;&#xff0c;&#x5c31;&#x662f;`entries`&#x65b9;&#x6cd5;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"608,609"}},{"content":"<pre data-lines=\"610,613\"><code data-lines=\"610,613\">map[Symbol.iterator] <span class=\"hljs-operator\">=</span><span class=\"hljs-operator\">=</span><span class=\"hljs-operator\">=</span> map.entries\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"610,613"}},{"content":"<pre data-lines=\"614,615\"><code>Map &#x7ed3;&#x6784;&#x8f6c;&#x4e3a;&#x6570;&#x7ec4;&#x7ed3;&#x6784;&#xff0c;&#x6bd4;&#x8f83;&#x5feb;&#x901f;&#x7684;&#x65b9;&#x6cd5;&#x662f;&#x4f7f;&#x7528;&#x6269;&#x5c55;&#x8fd0;&#x7b97;&#x7b26;&#xff08;`...`&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"614,615"}},{"content":"<pre data-lines=\"616,628\"><code data-lines=\"616,628\">const <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-literal\">new</span> <span class=\"hljs-built_in\">Map</span>(<span class=\"hljs-meta\">[</span>\n  <span class=\"hljs-meta\">[</span><span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;one&apos;</span><span class=\"hljs-meta\">]</span>,\n  <span class=\"hljs-meta\">[</span><span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&apos;two&apos;</span><span class=\"hljs-meta\">]</span>,\n  <span class=\"hljs-meta\">[</span><span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">&apos;three&apos;</span><span class=\"hljs-meta\">]</span>,\n]);\n\n<span class=\"hljs-meta\">[</span><span class=\"hljs-params\">...</span><span class=\"hljs-built_in\">map</span>.keys()<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-meta\">[</span><span class=\"hljs-params\">...</span><span class=\"hljs-built_in\">map</span>.values()<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-meta\">[</span><span class=\"hljs-params\">...</span><span class=\"hljs-built_in\">map</span>.entries()<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-meta\">[</span><span class=\"hljs-params\">...</span><span class=\"hljs-built_in\">map</span><span class=\"hljs-meta\">]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"616,628"}},{"content":"<pre data-lines=\"629,630\"><code>&#x7ed3;&#x5408;&#x6570;&#x7ec4;&#x7684;`map`&#x65b9;&#x6cd5;&#x3001;`filter`&#x65b9;&#x6cd5;&#xff0c;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0; Map &#x7684;&#x904d;&#x5386;&#x548c;&#x8fc7;&#x6ee4;&#xff08;Map &#x672c;&#x8eab;&#x6ca1;&#x6709;`map`&#x548c;`filter`&#x65b9;&#x6cd5;&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"629,630"}},{"content":"<pre data-lines=\"631,644\"><code data-lines=\"631,644\"><span class=\"hljs-keyword\">const</span> map0 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>()\n  .<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;a&apos;</span>)\n  .<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&apos;b&apos;</span>)\n  .<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">&apos;c&apos;</span>);\n\n<span class=\"hljs-keyword\">const</span> map1 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>(\n  [...map0].filter(([k, v]) =&gt; k &lt; <span class=\"hljs-number\">3</span>)\n);\n<span class=\"hljs-keyword\">const</span> map2 = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>(\n  [...map0].map(([k, v]) =&gt; [k * <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&apos;_&apos;</span> + v])\n    );\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"631,644"}},{"content":"<pre data-lines=\"645,646\"><code>&#x6b64;&#x5916;&#xff0c;Map &#x8fd8;&#x6709;&#x4e00;&#x4e2a;`forEach`&#x65b9;&#x6cd5;&#xff0c;&#x4e0e;&#x6570;&#x7ec4;&#x7684;`forEach`&#x65b9;&#x6cd5;&#x7c7b;&#x4f3c;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x904d;&#x5386;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"645,646"}},{"content":"<pre data-lines=\"647,652\"><code data-lines=\"647,652\"><span class=\"hljs-built_in\">map</span>.forEach(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">value, key, map</span>) {\n  <span class=\"hljs-built_in\">console</span>.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-string\">&quot;Key: %s, Value: %s&quot;</span>, key, value);\n}); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"647,652"}},{"content":"<pre data-lines=\"653,654\"><code>`forEach`&#x65b9;&#x6cd5;&#x8fd8;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#x7b2c;&#x4e8c;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x7528;&#x6765;&#x7ed1;&#x5b9a;`this`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"653,654"}},{"content":"<pre data-lines=\"655,666\"><code data-lines=\"655,666\"><span class=\"hljs-keyword\">const</span> reporter = {\n  report: <span class=\"hljs-title function_\">function</span>(<span class=\"hljs-built_in\">key</span>, value) {\n    console.<span class=\"hljs-property\">log</span>(<span class=\"hljs-string\">&quot;Key: %s, Value: %s&quot;</span>, <span class=\"hljs-built_in\">key</span>, value);\n  }\n};\n\n<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-property\">forEach</span>(<span class=\"hljs-title function_\">function</span>(value, <span class=\"hljs-built_in\">key</span>, <span class=\"hljs-built_in\">map</span>) {\n  <span class=\"hljs-variable\">this</span>.<span class=\"hljs-property\">report</span>(<span class=\"hljs-built_in\">key</span>, value);\n}, reporter); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"655,666"}},{"content":"<pre data-lines=\"667,668\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`forEach`&#x65b9;&#x6cd5;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;`this`&#xff0c;&#x5c31;&#x6307;&#x5411;`reporter`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"667,668"}}],"payload":{"tag":"h3","lines":"576,577"}},{"content":"&#x4e0e;&#x5176;&#x4ed6;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x7684;&#x4e92;&#x76f8;&#x8f6c;&#x6362;","children":[{"content":"<pre data-lines=\"671,674\"><code>**&#xff08;1&#xff09;Map &#x8f6c;&#x4e3a;&#x6570;&#x7ec4;**\n\n&#x524d;&#x9762;&#x5df2;&#x7ecf;&#x63d0;&#x8fc7;&#xff0c;Map &#x8f6c;&#x4e3a;&#x6570;&#x7ec4;&#x6700;&#x65b9;&#x4fbf;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x5c31;&#x662f;&#x4f7f;&#x7528;&#x6269;&#x5c55;&#x8fd0;&#x7b97;&#x7b26;&#xff08;`...`&#xff09;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"671,674"}},{"content":"<pre data-lines=\"675,681\"><code data-lines=\"675,681\"><span class=\"hljs-keyword\">const</span> myMap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>()\n  .<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-keyword\">true</span>, <span class=\"hljs-number\">7</span>)\n  .<span class=\"hljs-keyword\">set</span>({foo: <span class=\"hljs-number\">3</span>}, [<span class=\"hljs-string\">&apos;abc&apos;</span>]);\n[...myMap]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"675,681"}},{"content":"<pre data-lines=\"682,685\"><code>**&#xff08;2&#xff09;&#x6570;&#x7ec4; &#x8f6c;&#x4e3a; Map**\n\n&#x5c06;&#x6570;&#x7ec4;&#x4f20;&#x5165; Map &#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x8f6c;&#x4e3a; Map&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"682,685"}},{"content":"<pre data-lines=\"686,692\"><code data-lines=\"686,692\">new <span class=\"hljs-symbol\">Map</span>([\n  [true, <span class=\"hljs-number\">7</span>],\n  [{foo: <span class=\"hljs-number\">3</span>}, [<span class=\"hljs-string\">&apos;abc&apos;</span>]]\n])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"686,692"}},{"content":"<pre data-lines=\"693,696\"><code>**&#xff08;3&#xff09;Map &#x8f6c;&#x4e3a;&#x5bf9;&#x8c61;**\n\n&#x5982;&#x679c;&#x6240;&#x6709; Map &#x7684;&#x952e;&#x90fd;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x65e0;&#x635f;&#x5730;&#x8f6c;&#x4e3a;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"693,696"}},{"content":"<pre data-lines=\"697,711\"><code data-lines=\"697,711\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">strMapToObj</span>(<span class=\"hljs-params\">strMap</span>) {\n  <span class=\"hljs-keyword\">let</span> obj = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-literal\">null</span>);\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> [k,v] <span class=\"hljs-keyword\">of</span> strMap) {\n    obj[k] = v;\n  }\n  <span class=\"hljs-keyword\">return</span> obj;\n}\n\n<span class=\"hljs-keyword\">const</span> myMap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>()\n  .<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;yes&apos;</span>, <span class=\"hljs-literal\">true</span>)\n  .<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;no&apos;</span>, <span class=\"hljs-literal\">false</span>);\n<span class=\"hljs-title function_\">strMapToObj</span>(myMap)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"697,711"}},{"content":"<pre data-lines=\"712,717\"><code>&#x5982;&#x679c;&#x6709;&#x975e;&#x5b57;&#x7b26;&#x4e32;&#x7684;&#x952e;&#x540d;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x4e2a;&#x952e;&#x540d;&#x4f1a;&#x88ab;&#x8f6c;&#x6210;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x518d;&#x4f5c;&#x4e3a;&#x5bf9;&#x8c61;&#x7684;&#x952e;&#x540d;&#x3002;\n\n**&#xff08;4&#xff09;&#x5bf9;&#x8c61;&#x8f6c;&#x4e3a; Map**\n\n&#x5bf9;&#x8c61;&#x8f6c;&#x4e3a; Map &#x53ef;&#x4ee5;&#x901a;&#x8fc7;`Object.entries()`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"712,717"}},{"content":"<pre data-lines=\"718,722\"><code data-lines=\"718,722\"><span class=\"hljs-keyword\">let</span> obj = {<span class=\"hljs-string\">&quot;a&quot;</span>:<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;b&quot;</span>:<span class=\"hljs-number\">2</span>};\n<span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">map</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>(<span class=\"hljs-built_in\">Object</span>.entries(obj)); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"718,722"}},{"content":"<pre data-lines=\"723,724\"><code>&#x6b64;&#x5916;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x81ea;&#x5df1;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x8f6c;&#x6362;&#x51fd;&#x6570;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"723,724"}},{"content":"<pre data-lines=\"725,736\"><code data-lines=\"725,736\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">objToStrMap</span>(<span class=\"hljs-params\">obj</span>) {\n  <span class=\"hljs-keyword\">let</span> strMap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>();\n  <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> k <span class=\"hljs-keyword\">of</span> <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(obj)) {\n    strMap.<span class=\"hljs-title function_\">set</span>(k, obj[k]);\n  }\n  <span class=\"hljs-keyword\">return</span> strMap;\n}\n\n<span class=\"hljs-title function_\">objToStrMap</span>({<span class=\"hljs-attr\">yes</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-attr\">no</span>: <span class=\"hljs-literal\">false</span>})\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"725,736"}},{"content":"<pre data-lines=\"737,740\"><code>**&#xff08;5&#xff09;Map &#x8f6c;&#x4e3a; JSON**\n\nMap &#x8f6c;&#x4e3a; JSON &#x8981;&#x533a;&#x5206;&#x4e24;&#x79cd;&#x60c5;&#x51b5;&#x3002;&#x4e00;&#x79cd;&#x60c5;&#x51b5;&#x662f;&#xff0c;Map &#x7684;&#x952e;&#x540d;&#x90fd;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8fd9;&#x65f6;&#x53ef;&#x4ee5;&#x9009;&#x62e9;&#x8f6c;&#x4e3a;&#x5bf9;&#x8c61; JSON&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"737,740"}},{"content":"<pre data-lines=\"741,749\"><code data-lines=\"741,749\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">strMapToJson</span>(<span class=\"hljs-params\">strMap</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(<span class=\"hljs-title function_\">strMapToObj</span>(strMap));\n}\n\n<span class=\"hljs-keyword\">let</span> myMap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Map</span>().<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;yes&apos;</span>, <span class=\"hljs-literal\">true</span>).<span class=\"hljs-title function_\">set</span>(<span class=\"hljs-string\">&apos;no&apos;</span>, <span class=\"hljs-literal\">false</span>);\n<span class=\"hljs-title function_\">strMapToJson</span>(myMap)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"741,749"}},{"content":"<pre data-lines=\"750,751\"><code>&#x53e6;&#x4e00;&#x79cd;&#x60c5;&#x51b5;&#x662f;&#xff0c;Map &#x7684;&#x952e;&#x540d;&#x6709;&#x975e;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x8fd9;&#x65f6;&#x53ef;&#x4ee5;&#x9009;&#x62e9;&#x8f6c;&#x4e3a;&#x6570;&#x7ec4; JSON&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"750,751"}},{"content":"<pre data-lines=\"752,760\"><code data-lines=\"752,760\"><span class=\"hljs-keyword\">function</span> mapToArrayJson(<span class=\"hljs-keyword\">map</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">JSON</span>.stringify([...<span class=\"hljs-keyword\">map</span>]);\n}\n\n<span class=\"hljs-keyword\">let</span> myMap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>().set(<span class=\"hljs-literal\">true</span>, <span class=\"hljs-number\">7</span>).set({foo: <span class=\"hljs-number\">3</span>}, [<span class=\"hljs-string\">&apos;abc&apos;</span>]);\nmapToArrayJson(myMap)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"752,760"}},{"content":"<pre data-lines=\"761,764\"><code>**&#xff08;6&#xff09;JSON &#x8f6c;&#x4e3a; Map**\n\nJSON &#x8f6c;&#x4e3a; Map&#xff0c;&#x6b63;&#x5e38;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x6240;&#x6709;&#x952e;&#x540d;&#x90fd;&#x662f;&#x5b57;&#x7b26;&#x4e32;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"761,764"}},{"content":"<pre data-lines=\"765,772\"><code data-lines=\"765,772\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">jsonToStrMap</span>(jsonStr) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">objToStrMap(JSON.parse(jsonStr))</span>;\n}\n\njsonToStrMap(&apos;{<span class=\"hljs-string\">&quot;yes&quot;</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-string\">&quot;no&quot;</span>: <span class=\"hljs-literal\">false</span>}&apos;)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"765,772"}},{"content":"<pre data-lines=\"773,774\"><code>&#x4f46;&#x662f;&#xff0c;&#x6709;&#x4e00;&#x79cd;&#x7279;&#x6b8a;&#x60c5;&#x51b5;&#xff0c;&#x6574;&#x4e2a; JSON &#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x6570;&#x7ec4;&#xff0c;&#x4e14;&#x6bcf;&#x4e2a;&#x6570;&#x7ec4;&#x6210;&#x5458;&#x672c;&#x8eab;&#xff0c;&#x53c8;&#x662f;&#x4e00;&#x4e2a;&#x6709;&#x4e24;&#x4e2a;&#x6210;&#x5458;&#x7684;&#x6570;&#x7ec4;&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x4e00;&#x4e00;&#x5bf9;&#x5e94;&#x5730;&#x8f6c;&#x4e3a; Map&#x3002;&#x8fd9;&#x5f80;&#x5f80;&#x662f; Map &#x8f6c;&#x4e3a;&#x6570;&#x7ec4; JSON &#x7684;&#x9006;&#x64cd;&#x4f5c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"773,774"}},{"content":"<pre data-lines=\"775,782\"><code data-lines=\"775,782\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">jsonToMap</span>(jsonStr) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">new</span> Map(JSON.parse(jsonStr));\n}\n\njsonToMap(&apos;[[<span class=\"hljs-literal\">true</span>,<span class=\"hljs-number\">7</span>],[{<span class=\"hljs-string\">&quot;foo&quot;</span>:<span class=\"hljs-number\">3</span>},[<span class=\"hljs-string\">&quot;abc&quot;</span>]]]&apos;)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"775,782"}}],"payload":{"tag":"h3","lines":"669,670"}}],"payload":{"tag":"h2","lines":"349,351"}},{"content":"WeakMap","children":[{"content":"&#x542b;&#x4e49;","children":[{"content":"<pre data-lines=\"788,789\"><code>`WeakMap`&#x7ed3;&#x6784;&#x4e0e;`Map`&#x7ed3;&#x6784;&#x7c7b;&#x4f3c;&#xff0c;&#x4e5f;&#x662f;&#x7528;&#x4e8e;&#x751f;&#x6210;&#x952e;&#x503c;&#x5bf9;&#x7684;&#x96c6;&#x5408;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"788,789"}},{"content":"<pre data-lines=\"790,799\"><code data-lines=\"790,799\"><span class=\"hljs-keyword\">const</span> wm1 = <span class=\"hljs-keyword\">new</span> WeakMap();\n<span class=\"hljs-keyword\">const</span> key = {foo: <span class=\"hljs-number\">1</span>};\nwm1.<span class=\"hljs-keyword\">set</span>(key, <span class=\"hljs-number\">2</span>);\nwm1.<span class=\"hljs-keyword\">get</span>(key)<span class=\"hljs-keyword\">const</span> k1 = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>];\n<span class=\"hljs-keyword\">const</span> k2 = [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>];\n<span class=\"hljs-keyword\">const</span> wm2 = <span class=\"hljs-keyword\">new</span> WeakMap([[k1, <span class=\"hljs-string\">&apos;foo&apos;</span>], [k2, <span class=\"hljs-string\">&apos;bar&apos;</span>]]);\nwm2.<span class=\"hljs-keyword\">get</span>(k2)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"790,799"}},{"content":"<pre data-lines=\"800,803\"><code>`WeakMap`&#x4e0e;`Map`&#x7684;&#x533a;&#x522b;&#x6709;&#x4e24;&#x70b9;&#x3002;\n\n&#x9996;&#x5148;&#xff0c;`WeakMap`&#x53ea;&#x63a5;&#x53d7;&#x5bf9;&#x8c61;&#x4f5c;&#x4e3a;&#x952e;&#x540d;&#xff08;`null`&#x9664;&#x5916;&#xff09;&#xff0c;&#x4e0d;&#x63a5;&#x53d7;&#x5176;&#x4ed6;&#x7c7b;&#x578b;&#x7684;&#x503c;&#x4f5c;&#x4e3a;&#x952e;&#x540d;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"800,803"}},{"content":"<pre data-lines=\"804,808\"><code data-lines=\"804,808\">const <span class=\"hljs-built_in\">map</span> = <span class=\"hljs-literal\">new</span> WeakMap();\n<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>)<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(Symbol(), <span class=\"hljs-number\">2</span>)<span class=\"hljs-built_in\">map</span>.<span class=\"hljs-built_in\">set</span>(<span class=\"hljs-built_in\">null</span>, <span class=\"hljs-number\">2</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"804,808"}},{"content":"<pre data-lines=\"809,814\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x5c06;&#x6570;&#x503c;`1`&#x548c;`Symbol`&#x503c;&#x4f5c;&#x4e3a; WeakMap &#x7684;&#x952e;&#x540d;&#xff0c;&#x90fd;&#x4f1a;&#x62a5;&#x9519;&#x3002;\n\n&#x5176;&#x6b21;&#xff0c;`WeakMap`&#x7684;&#x952e;&#x540d;&#x6240;&#x6307;&#x5411;&#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x4e0d;&#x8ba1;&#x5165;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x3002;\n\n`WeakMap`&#x7684;&#x8bbe;&#x8ba1;&#x76ee;&#x7684;&#x5728;&#x4e8e;&#xff0c;&#x6709;&#x65f6;&#x6211;&#x4eec;&#x60f3;&#x5728;&#x67d0;&#x4e2a;&#x5bf9;&#x8c61;&#x4e0a;&#x9762;&#x5b58;&#x653e;&#x4e00;&#x4e9b;&#x6570;&#x636e;&#xff0c;&#x4f46;&#x662f;&#x8fd9;&#x4f1a;&#x5f62;&#x6210;&#x5bf9;&#x4e8e;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x7684;&#x5f15;&#x7528;&#x3002;&#x8bf7;&#x770b;&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"809,814"}},{"content":"<pre data-lines=\"815,823\"><code data-lines=\"815,823\"><span class=\"hljs-keyword\">const</span> e1 = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&apos;foo&apos;</span>);\n<span class=\"hljs-keyword\">const</span> e2 = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&apos;bar&apos;</span>);\n<span class=\"hljs-keyword\">const</span> arr = [\n  [e1, <span class=\"hljs-string\">&apos;foo &#x5143;&#x7d20;&apos;</span>],\n  [e2, <span class=\"hljs-string\">&apos;bar &#x5143;&#x7d20;&apos;</span>],\n]; \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"815,823"}},{"content":"<pre data-lines=\"824,827\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`e1`&#x548c;`e2`&#x662f;&#x4e24;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x6211;&#x4eec;&#x901a;&#x8fc7;`arr`&#x6570;&#x7ec4;&#x5bf9;&#x8fd9;&#x4e24;&#x4e2a;&#x5bf9;&#x8c61;&#x6dfb;&#x52a0;&#x4e00;&#x4e9b;&#x6587;&#x5b57;&#x8bf4;&#x660e;&#x3002;&#x8fd9;&#x5c31;&#x5f62;&#x6210;&#x4e86;`arr`&#x5bf9;`e1`&#x548c;`e2`&#x7684;&#x5f15;&#x7528;&#x3002;\n\n&#x4e00;&#x65e6;&#x4e0d;&#x518d;&#x9700;&#x8981;&#x8fd9;&#x4e24;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x6211;&#x4eec;&#x5c31;&#x5fc5;&#x987b;&#x624b;&#x52a8;&#x5220;&#x9664;&#x8fd9;&#x4e2a;&#x5f15;&#x7528;&#xff0c;&#x5426;&#x5219;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x5c31;&#x4e0d;&#x4f1a;&#x91ca;&#x653e;`e1`&#x548c;`e2`&#x5360;&#x7528;&#x7684;&#x5185;&#x5b58;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"824,827"}},{"content":"<pre data-lines=\"828,832\"><code data-lines=\"828,832\">arr [<span class=\"hljs-number\">0</span>] <span class=\"hljs-operator\">=</span> null<span class=\"hljs-comment\">;</span>\narr [<span class=\"hljs-number\">1</span>] <span class=\"hljs-operator\">=</span> null<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"828,832"}},{"content":"<pre data-lines=\"833,838\"><code>&#x4e0a;&#x9762;&#x8fd9;&#x6837;&#x7684;&#x5199;&#x6cd5;&#x663e;&#x7136;&#x5f88;&#x4e0d;&#x65b9;&#x4fbf;&#x3002;&#x4e00;&#x65e6;&#x5fd8;&#x4e86;&#x5199;&#xff0c;&#x5c31;&#x4f1a;&#x9020;&#x6210;&#x5185;&#x5b58;&#x6cc4;&#x9732;&#x3002;\n\nWeakMap &#x5c31;&#x662f;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x800c;&#x8bde;&#x751f;&#x7684;&#xff0c;&#x5b83;&#x7684;&#x952e;&#x540d;&#x6240;&#x5f15;&#x7528;&#x7684;&#x5bf9;&#x8c61;&#x90fd;&#x662f;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x5373;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x4e0d;&#x5c06;&#x8be5;&#x5f15;&#x7528;&#x8003;&#x8651;&#x5728;&#x5185;&#x3002;&#x56e0;&#x6b64;&#xff0c;&#x53ea;&#x8981;&#x6240;&#x5f15;&#x7528;&#x7684;&#x5bf9;&#x8c61;&#x7684;&#x5176;&#x4ed6;&#x5f15;&#x7528;&#x90fd;&#x88ab;&#x6e05;&#x9664;&#xff0c;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x5c31;&#x4f1a;&#x91ca;&#x653e;&#x8be5;&#x5bf9;&#x8c61;&#x6240;&#x5360;&#x7528;&#x7684;&#x5185;&#x5b58;&#x3002;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x4e00;&#x65e6;&#x4e0d;&#x518d;&#x9700;&#x8981;&#xff0c;WeakMap &#x91cc;&#x9762;&#x7684;&#x952e;&#x540d;&#x5bf9;&#x8c61;&#x548c;&#x6240;&#x5bf9;&#x5e94;&#x7684;&#x952e;&#x503c;&#x5bf9;&#x4f1a;&#x81ea;&#x52a8;&#x6d88;&#x5931;&#xff0c;&#x4e0d;&#x7528;&#x624b;&#x52a8;&#x5220;&#x9664;&#x5f15;&#x7528;&#x3002;\n\n&#x57fa;&#x672c;&#x4e0a;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x8981;&#x5f80;&#x5bf9;&#x8c61;&#x4e0a;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#xff0c;&#x53c8;&#x4e0d;&#x60f3;&#x5e72;&#x6270;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; WeakMap&#x3002;&#x4e00;&#x4e2a;&#x5178;&#x578b;&#x5e94;&#x7528;&#x573a;&#x666f;&#x662f;&#xff0c;&#x5728;&#x7f51;&#x9875;&#x7684; DOM &#x5143;&#x7d20;&#x4e0a;&#x6dfb;&#x52a0;&#x6570;&#x636e;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;`WeakMap`&#x7ed3;&#x6784;&#x3002;&#x5f53;&#x8be5; DOM &#x5143;&#x7d20;&#x88ab;&#x6e05;&#x9664;&#xff0c;&#x5176;&#x6240;&#x5bf9;&#x5e94;&#x7684;`WeakMap`&#x8bb0;&#x5f55;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;&#x88ab;&#x79fb;&#x9664;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"833,838"}},{"content":"<pre data-lines=\"839,847\"><code data-lines=\"839,847\"><span class=\"hljs-keyword\">const</span> wm = <span class=\"hljs-keyword\">new</span> WeakMap();\n\n<span class=\"hljs-keyword\">const</span> element = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&apos;example&apos;</span>);\n\nwm.<span class=\"hljs-keyword\">set</span>(element, <span class=\"hljs-string\">&apos;some information&apos;</span>);\nwm.<span class=\"hljs-keyword\">get</span>(element)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"839,847"}},{"content":"<pre data-lines=\"848,855\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x5148;&#x65b0;&#x5efa;&#x4e00;&#x4e2a; WeakMap &#x5b9e;&#x4f8b;&#x3002;&#x7136;&#x540e;&#xff0c;&#x5c06;&#x4e00;&#x4e2a; DOM &#x8282;&#x70b9;&#x4f5c;&#x4e3a;&#x952e;&#x540d;&#x5b58;&#x5165;&#x8be5;&#x5b9e;&#x4f8b;&#xff0c;&#x5e76;&#x5c06;&#x4e00;&#x4e9b;&#x9644;&#x52a0;&#x4fe1;&#x606f;&#x4f5c;&#x4e3a;&#x952e;&#x503c;&#xff0c;&#x4e00;&#x8d77;&#x5b58;&#x653e;&#x5728; WeakMap &#x91cc;&#x9762;&#x3002;&#x8fd9;&#x65f6;&#xff0c;WeakMap &#x91cc;&#x9762;&#x5bf9;`element`&#x7684;&#x5f15;&#x7528;&#x5c31;&#x662f;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x4e0d;&#x4f1a;&#x88ab;&#x8ba1;&#x5165;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x3002;\n\n&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x4e0a;&#x9762;&#x7684; DOM &#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x9664;&#x4e86; WeakMap &#x7684;&#x5f31;&#x5f15;&#x7528;&#x5916;&#xff0c;&#x5176;&#x4ed6;&#x4f4d;&#x7f6e;&#x5bf9;&#x8be5;&#x5bf9;&#x8c61;&#x7684;&#x5f15;&#x7528;&#x4e00;&#x65e6;&#x6d88;&#x9664;&#xff0c;&#x8be5;&#x5bf9;&#x8c61;&#x5360;&#x7528;&#x7684;&#x5185;&#x5b58;&#x5c31;&#x4f1a;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x91ca;&#x653e;&#x3002;WeakMap &#x4fdd;&#x5b58;&#x7684;&#x8fd9;&#x4e2a;&#x952e;&#x503c;&#x5bf9;&#xff0c;&#x4e5f;&#x4f1a;&#x81ea;&#x52a8;&#x6d88;&#x5931;&#x3002;\n\n&#x603b;&#x4e4b;&#xff0c;`WeakMap`&#x7684;&#x4e13;&#x7528;&#x573a;&#x5408;&#x5c31;&#x662f;&#xff0c;&#x5b83;&#x7684;&#x952e;&#x6240;&#x5bf9;&#x5e94;&#x7684;&#x5bf9;&#x8c61;&#xff0c;&#x53ef;&#x80fd;&#x4f1a;&#x5728;&#x5c06;&#x6765;&#x6d88;&#x5931;&#x3002;`WeakMap`&#x7ed3;&#x6784;&#x6709;&#x52a9;&#x4e8e;&#x9632;&#x6b62;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;WeakMap &#x5f31;&#x5f15;&#x7528;&#x7684;&#x53ea;&#x662f;&#x952e;&#x540d;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x952e;&#x503c;&#x3002;&#x952e;&#x503c;&#x4f9d;&#x7136;&#x662f;&#x6b63;&#x5e38;&#x5f15;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"848,855"}},{"content":"<pre data-lines=\"856,865\"><code data-lines=\"856,865\"><span class=\"hljs-keyword\">const</span> wm = <span class=\"hljs-keyword\">new</span> WeakMap();\n<span class=\"hljs-keyword\">let</span> key = {};\n<span class=\"hljs-keyword\">let</span> obj = {foo: <span class=\"hljs-number\">1</span>};\n\nwm.<span class=\"hljs-keyword\">set</span>(key, obj);\nobj = <span class=\"hljs-literal\">null</span>;\nwm.<span class=\"hljs-keyword\">get</span>(key)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"856,865"}},{"content":"<pre data-lines=\"866,867\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x952e;&#x503c;`obj`&#x662f;&#x6b63;&#x5e38;&#x5f15;&#x7528;&#x3002;&#x6240;&#x4ee5;&#xff0c;&#x5373;&#x4f7f;&#x5728; WeakMap &#x5916;&#x90e8;&#x6d88;&#x9664;&#x4e86;`obj`&#x7684;&#x5f15;&#x7528;&#xff0c;WeakMap &#x5185;&#x90e8;&#x7684;&#x5f15;&#x7528;&#x4f9d;&#x7136;&#x5b58;&#x5728;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"866,867"}}],"payload":{"tag":"h3","lines":"786,787"}},{"content":"WeakMap &#x7684;&#x8bed;&#x6cd5;","children":[{"content":"<pre data-lines=\"870,871\"><code>WeakMap &#x4e0e; Map &#x5728; API &#x4e0a;&#x7684;&#x533a;&#x522b;&#x4e3b;&#x8981;&#x662f;&#x4e24;&#x4e2a;&#xff0c;&#x4e00;&#x662f;&#x6ca1;&#x6709;&#x904d;&#x5386;&#x64cd;&#x4f5c;&#xff08;&#x5373;&#x6ca1;&#x6709;`keys()`&#x3001;`values()`&#x548c;`entries()`&#x65b9;&#x6cd5;&#xff09;&#xff0c;&#x4e5f;&#x6ca1;&#x6709;`size`&#x5c5e;&#x6027;&#x3002;&#x56e0;&#x4e3a;&#x6ca1;&#x6709;&#x529e;&#x6cd5;&#x5217;&#x51fa;&#x6240;&#x6709;&#x952e;&#x540d;&#xff0c;&#x67d0;&#x4e2a;&#x952e;&#x540d;&#x662f;&#x5426;&#x5b58;&#x5728;&#x5b8c;&#x5168;&#x4e0d;&#x53ef;&#x9884;&#x6d4b;&#xff0c;&#x8ddf;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x662f;&#x5426;&#x8fd0;&#x884c;&#x76f8;&#x5173;&#x3002;&#x8fd9;&#x4e00;&#x523b;&#x53ef;&#x4ee5;&#x53d6;&#x5230;&#x952e;&#x540d;&#xff0c;&#x4e0b;&#x4e00;&#x523b;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x7a81;&#x7136;&#x8fd0;&#x884c;&#x4e86;&#xff0c;&#x8fd9;&#x4e2a;&#x952e;&#x540d;&#x5c31;&#x6ca1;&#x4e86;&#xff0c;&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x51fa;&#x73b0;&#x4e0d;&#x786e;&#x5b9a;&#x6027;&#xff0c;&#x5c31;&#x7edf;&#x4e00;&#x89c4;&#x5b9a;&#x4e0d;&#x80fd;&#x53d6;&#x5230;&#x952e;&#x540d;&#x3002;&#x4e8c;&#x662f;&#x65e0;&#x6cd5;&#x6e05;&#x7a7a;&#xff0c;&#x5373;&#x4e0d;&#x652f;&#x6301;`clear`&#x65b9;&#x6cd5;&#x3002;&#x56e0;&#x6b64;&#xff0c;`WeakMap`&#x53ea;&#x6709;&#x56db;&#x4e2a;&#x65b9;&#x6cd5;&#x53ef;&#x7528;&#xff1a;`get()`&#x3001;`set()`&#x3001;`has()`&#x3001;`delete()`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"870,871"}},{"content":"<pre data-lines=\"872,876\"><code data-lines=\"872,876\"><span class=\"hljs-type\">const</span> wm = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">WeakMap</span>();\nwm.sizewm.forEachwm.clear\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"872,876"}}],"payload":{"tag":"h3","lines":"868,869"}},{"content":"WeakMap &#x7684;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"879,884\"><code>WeakMap &#x7684;&#x4f8b;&#x5b50;&#x5f88;&#x96be;&#x6f14;&#x793a;&#xff0c;&#x56e0;&#x4e3a;&#x65e0;&#x6cd5;&#x89c2;&#x5bdf;&#x5b83;&#x91cc;&#x9762;&#x7684;&#x5f15;&#x7528;&#x4f1a;&#x81ea;&#x52a8;&#x6d88;&#x5931;&#x3002;&#x6b64;&#x65f6;&#xff0c;&#x5176;&#x4ed6;&#x5f15;&#x7528;&#x90fd;&#x89e3;&#x9664;&#x4e86;&#xff0c;&#x5df2;&#x7ecf;&#x6ca1;&#x6709;&#x5f15;&#x7528;&#x6307;&#x5411; WeakMap &#x7684;&#x952e;&#x540d;&#x4e86;&#xff0c;&#x5bfc;&#x81f4;&#x65e0;&#x6cd5;&#x8bc1;&#x5b9e;&#x90a3;&#x4e2a;&#x952e;&#x540d;&#x662f;&#x4e0d;&#x662f;&#x5b58;&#x5728;&#x3002;\n\n&#x8d3a;&#x5e08;&#x4fca;&#x8001;&#x5e08;[&#x63d0;&#x793a;](https://github.com/ruanyf/es6tutorial/issues/362#issuecomment-292109104)&#xff0c;&#x5982;&#x679c;&#x5f15;&#x7528;&#x6240;&#x6307;&#x5411;&#x7684;&#x503c;&#x5360;&#x7528;&#x7279;&#x522b;&#x591a;&#x7684;&#x5185;&#x5b58;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x901a;&#x8fc7; Node &#x7684;`process.memoryUsage`&#x65b9;&#x6cd5;&#x770b;&#x51fa;&#x6765;&#x3002;&#x6839;&#x636e;&#x8fd9;&#x4e2a;&#x601d;&#x8def;&#xff0c;&#x7f51;&#x53cb;[vtxf](https://github.com/ruanyf/es6tutorial/issues/362#issuecomment-292451925)&#x8865;&#x5145;&#x4e86;&#x4e0b;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x3002;\n\n&#x9996;&#x5148;&#xff0c;&#x6253;&#x5f00; Node &#x547d;&#x4ee4;&#x884c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"879,884"}},{"content":"<pre data-lines=\"885,888\"><code data-lines=\"885,888\">&#x24; <span class=\"hljs-keyword\">node</span> <span class=\"hljs-title\">--expose-gc</span> \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"885,888"}},{"content":"<pre data-lines=\"889,892\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`--expose-gc`&#x53c2;&#x6570;&#x8868;&#x793a;&#x5141;&#x8bb8;&#x624b;&#x52a8;&#x6267;&#x884c;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x3002;\n\n&#x7136;&#x540e;&#xff0c;&#x6267;&#x884c;&#x4e0b;&#x9762;&#x7684;&#x4ee3;&#x7801;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"889,892"}},{"content":"<pre data-lines=\"893,926\"><code data-lines=\"893,926\"><span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"hljs-variable language_\">global</span>.<span class=\"hljs-title function_\">gc</span>();</span>\nundefined\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\">process.<span class=\"hljs-title function_\">memoryUsage</span>();</span>\n{ rss: 21106688,\n  heapTotal: 7376896,\n  heapUsed: 4153936,\n  external: 9059 }\n\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> wm = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">WeakMap</span>();</span>\nundefined\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"hljs-keyword\">let</span> key = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Array</span>(<span class=\"hljs-number\">5</span> * <span class=\"hljs-number\">1024</span> * <span class=\"hljs-number\">1024</span>);</span>\nundefined\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\">wm.<span class=\"hljs-title function_\">set</span>(key, <span class=\"hljs-number\">1</span>);</span>\nWeakMap {}\n\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"hljs-variable language_\">global</span>.<span class=\"hljs-title function_\">gc</span>();</span>\nundefined\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\">process.<span class=\"hljs-title function_\">memoryUsage</span>();</span>\n{ rss: 67538944,\n  heapTotal: 7376896,\n  heapUsed: 45782816,\n  external: 8945 }\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\">key = <span class=\"hljs-literal\">null</span>;</span>\nnull\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\"><span class=\"hljs-variable language_\">global</span>.<span class=\"hljs-title function_\">gc</span>();</span>\nundefined\n<span class=\"hljs-meta prompt_\">&gt;</span> <span class=\"language-javascript\">process.<span class=\"hljs-title function_\">memoryUsage</span>();</span>\n{ rss: 20639744,\n  heapTotal: 8425472,\n  heapUsed: 3979792,\n  external: 8956 } \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"893,926"}},{"content":"<pre data-lines=\"927,930\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;&#x53ea;&#x8981;&#x5916;&#x90e8;&#x7684;&#x5f15;&#x7528;&#x6d88;&#x5931;&#xff0c;WeakMap &#x5185;&#x90e8;&#x7684;&#x5f15;&#x7528;&#xff0c;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x6e05;&#x9664;&#x3002;&#x7531;&#x6b64;&#x53ef;&#x89c1;&#xff0c;&#x6709;&#x4e86; WeakMap &#x7684;&#x5e2e;&#x52a9;&#xff0c;&#x89e3;&#x51b3;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x5c31;&#x4f1a;&#x7b80;&#x5355;&#x5f88;&#x591a;&#x3002;\n\nChrome &#x6d4f;&#x89c8;&#x5668;&#x7684; Dev Tools &#x7684; Memory &#x9762;&#x677f;&#xff0c;&#x6709;&#x4e00;&#x4e2a;&#x5783;&#x573e;&#x6876;&#x7684;&#x6309;&#x94ae;&#xff0c;&#x53ef;&#x4ee5;&#x5f3a;&#x5236;&#x5783;&#x573e;&#x56de;&#x6536;&#xff08;garbage collect&#xff09;&#x3002;&#x8fd9;&#x4e2a;&#x6309;&#x94ae;&#x4e5f;&#x80fd;&#x7528;&#x6765;&#x89c2;&#x5bdf; WeakMap &#x91cc;&#x9762;&#x7684;&#x5f15;&#x7528;&#x662f;&#x5426;&#x6d88;&#x5931;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"927,930"}}],"payload":{"tag":"h3","lines":"877,878"}},{"content":"WeakMap &#x7684;&#x7528;&#x9014;","children":[{"content":"<pre data-lines=\"933,934\"><code>&#x524d;&#x6587;&#x8bf4;&#x8fc7;&#xff0c;WeakMap &#x5e94;&#x7528;&#x7684;&#x5178;&#x578b;&#x573a;&#x5408;&#x5c31;&#x662f; DOM &#x8282;&#x70b9;&#x4f5c;&#x4e3a;&#x952e;&#x540d;&#x3002;&#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"933,934"}},{"content":"<pre data-lines=\"935,948\"><code data-lines=\"935,948\"><span class=\"hljs-keyword\">let</span> myWeakmap = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">WeakMap</span>();\n\nmyWeakmap.<span class=\"hljs-title function_\">set</span>(\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;logo&apos;</span>),\n  {<span class=\"hljs-attr\">timesClicked</span>: <span class=\"hljs-number\">0</span>})\n;\n\n<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;logo&apos;</span>).<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&apos;click&apos;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">let</span> logoData = myWeakmap.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;logo&apos;</span>));\n  logoData.<span class=\"hljs-property\">timesClicked</span>++;\n}, <span class=\"hljs-literal\">false</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"935,948"}},{"content":"<pre data-lines=\"949,952\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`document.getElementById(&apos;logo&apos;)`&#x662f;&#x4e00;&#x4e2a; DOM &#x8282;&#x70b9;&#xff0c;&#x6bcf;&#x5f53;&#x53d1;&#x751f;`click`&#x4e8b;&#x4ef6;&#xff0c;&#x5c31;&#x66f4;&#x65b0;&#x4e00;&#x4e0b;&#x72b6;&#x6001;&#x3002;&#x6211;&#x4eec;&#x5c06;&#x8fd9;&#x4e2a;&#x72b6;&#x6001;&#x4f5c;&#x4e3a;&#x952e;&#x503c;&#x653e;&#x5728; WeakMap &#x91cc;&#xff0c;&#x5bf9;&#x5e94;&#x7684;&#x952e;&#x540d;&#x5c31;&#x662f;&#x8fd9;&#x4e2a;&#x8282;&#x70b9;&#x5bf9;&#x8c61;&#x3002;&#x4e00;&#x65e6;&#x8fd9;&#x4e2a; DOM &#x8282;&#x70b9;&#x5220;&#x9664;&#xff0c;&#x8be5;&#x72b6;&#x6001;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;&#x6d88;&#x5931;&#xff0c;&#x4e0d;&#x5b58;&#x5728;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x98ce;&#x9669;&#x3002;\n\nWeakMap &#x7684;&#x53e6;&#x4e00;&#x4e2a;&#x7528;&#x5904;&#x662f;&#x90e8;&#x7f72;&#x79c1;&#x6709;&#x5c5e;&#x6027;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"949,952"}},{"content":"<pre data-lines=\"953,978\"><code data-lines=\"953,978\"><span class=\"hljs-keyword\">const</span> _counter = new WeakMap();\n<span class=\"hljs-keyword\">const</span> _action = new WeakMap();\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Countdown</span> {\n  <span class=\"hljs-keyword\">constructor</span>(counter, action) {\n    _counter.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-keyword\">this</span>, counter);\n    _action.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-keyword\">this</span>, action);\n  }\n  dec() {\n    let counter = _counter.<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-keyword\">this</span>);\n    <span class=\"hljs-keyword\">if</span> (counter &lt; <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">return</span>;\n    counter--;\n    _counter.<span class=\"hljs-keyword\">set</span>(<span class=\"hljs-keyword\">this</span>, counter);\n    <span class=\"hljs-keyword\">if</span> (counter === <span class=\"hljs-number\">0</span>) {\n      _action.<span class=\"hljs-keyword\">get</span>(<span class=\"hljs-keyword\">this</span>)();\n    }\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> c = new Countdown(<span class=\"hljs-number\">2</span>, () =&gt; console.log(<span class=\"hljs-string\">&apos;DONE&apos;</span>));\n\nc.dec()\nc.dec()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"953,978"}},{"content":"<pre data-lines=\"979,980\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`Countdown`&#x7c7b;&#x7684;&#x4e24;&#x4e2a;&#x5185;&#x90e8;&#x5c5e;&#x6027;`_counter`&#x548c;`_action`&#xff0c;&#x662f;&#x5b9e;&#x4f8b;&#x7684;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x6240;&#x4ee5;&#x5982;&#x679c;&#x5220;&#x9664;&#x5b9e;&#x4f8b;&#xff0c;&#x5b83;&#x4eec;&#x4e5f;&#x5c31;&#x968f;&#x4e4b;&#x6d88;&#x5931;&#xff0c;&#x4e0d;&#x4f1a;&#x9020;&#x6210;&#x5185;&#x5b58;&#x6cc4;&#x6f0f;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"979,980"}}],"payload":{"tag":"h3","lines":"931,932"}}],"payload":{"tag":"h2","lines":"783,785"}},{"content":"WeakRef","children":[{"content":"<pre data-lines=\"984,985\"><code>WeakSet &#x548c; WeakMap &#x662f;&#x57fa;&#x4e8e;&#x5f31;&#x5f15;&#x7528;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;[ES2021](https://github.com/tc39/proposal-weakrefs) &#x66f4;&#x8fdb;&#x4e00;&#x6b65;&#xff0c;&#x63d0;&#x4f9b;&#x4e86; WeakRef &#x5bf9;&#x8c61;&#xff0c;&#x7528;&#x4e8e;&#x76f4;&#x63a5;&#x521b;&#x5efa;&#x5bf9;&#x8c61;&#x7684;&#x5f31;&#x5f15;&#x7528;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"984,985"}},{"content":"<pre data-lines=\"986,990\"><code data-lines=\"986,990\">let target <span class=\"hljs-operator\">=</span> {}<span class=\"hljs-comment\">;</span>\nlet wr <span class=\"hljs-operator\">=</span> new WeakRef(target)<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"986,990"}},{"content":"<pre data-lines=\"991,994\"><code>&#x4e0a;&#x9762;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;`target`&#x662f;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#xff0c;&#x6784;&#x9020;&#x51fd;&#x6570;`WeakRef()`&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;&#x57fa;&#x4e8e;`target`&#x7684;&#x65b0;&#x5bf9;&#x8c61;`wr`&#x3002;&#x8fd9;&#x91cc;&#xff0c;`wr`&#x5c31;&#x662f;&#x4e00;&#x4e2a; WeakRef &#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x5c5e;&#x4e8e;&#x5bf9;`target`&#x7684;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x4e0d;&#x4f1a;&#x8ba1;&#x5165;&#x8fd9;&#x4e2a;&#x5f15;&#x7528;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;`wr`&#x7684;&#x5f15;&#x7528;&#x4e0d;&#x4f1a;&#x59a8;&#x788d;&#x539f;&#x59cb;&#x5bf9;&#x8c61;`target`&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#x3002;\n\nWeakRef &#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x6709;&#x4e00;&#x4e2a;`deref()`&#x65b9;&#x6cd5;&#xff0c;&#x5982;&#x679c;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x5b58;&#x5728;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#xff1b;&#x5982;&#x679c;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x5df2;&#x7ecf;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#xff0c;&#x8be5;&#x65b9;&#x6cd5;&#x8fd4;&#x56de;`undefined`&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"991,994"}},{"content":"<pre data-lines=\"995,1002\"><code data-lines=\"995,1002\">let target <span class=\"hljs-operator\">=</span> {}<span class=\"hljs-comment\">;</span>\nlet wr <span class=\"hljs-operator\">=</span> new WeakRef(target)<span class=\"hljs-comment\">;</span>\n\nlet obj <span class=\"hljs-operator\">=</span> wr.deref()<span class=\"hljs-comment\">;</span>\nif (obj) { } \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"995,1002"}},{"content":"<pre data-lines=\"1003,1006\"><code>&#x4e0a;&#x9762;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;`deref()`&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x5224;&#x65ad;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x662f;&#x5426;&#x5df2;&#x88ab;&#x6e05;&#x9664;&#x3002;\n\n&#x5f31;&#x5f15;&#x7528;&#x5bf9;&#x8c61;&#x7684;&#x4e00;&#x5927;&#x7528;&#x5904;&#xff0c;&#x5c31;&#x662f;&#x4f5c;&#x4e3a;&#x7f13;&#x5b58;&#xff0c;&#x672a;&#x88ab;&#x6e05;&#x9664;&#x65f6;&#x53ef;&#x4ee5;&#x4ece;&#x7f13;&#x5b58;&#x53d6;&#x503c;&#xff0c;&#x4e00;&#x65e6;&#x6e05;&#x9664;&#x7f13;&#x5b58;&#x5c31;&#x81ea;&#x52a8;&#x5931;&#x6548;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1003,1006"}},{"content":"<pre data-lines=\"1007,1025\"><code data-lines=\"1007,1025\"><span class=\"hljs-function\">function <span class=\"hljs-title\">makeWeakCached</span>(<span class=\"hljs-params\">f</span>)</span> {\n  <span class=\"hljs-keyword\">const</span> cache = <span class=\"hljs-keyword\">new</span> Map();\n  <span class=\"hljs-keyword\">return</span> key =&gt; {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">ref</span> = cache.<span class=\"hljs-keyword\">get</span>(key);\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">ref</span>) {\n      <span class=\"hljs-keyword\">const</span> cached = <span class=\"hljs-keyword\">ref</span>.deref();\n      <span class=\"hljs-keyword\">if</span> (cached !== undefined) <span class=\"hljs-keyword\">return</span> cached;\n    }\n\n    <span class=\"hljs-keyword\">const</span> fresh = f(key);\n    cache.<span class=\"hljs-keyword\">set</span>(key, <span class=\"hljs-keyword\">new</span> WeakRef(fresh));\n    <span class=\"hljs-keyword\">return</span> fresh;\n  };\n}\n\n<span class=\"hljs-keyword\">const</span> getImageCached = makeWeakCached(getImage); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1007,1025"}},{"content":"<pre data-lines=\"1026,1029\"><code>&#x4e0a;&#x9762;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;`makeWeakCached()`&#x7528;&#x4e8e;&#x5efa;&#x7acb;&#x4e00;&#x4e2a;&#x7f13;&#x5b58;&#xff0c;&#x7f13;&#x5b58;&#x91cc;&#x9762;&#x4fdd;&#x5b58;&#x5bf9;&#x539f;&#x59cb;&#x6587;&#x4ef6;&#x7684;&#x5f31;&#x5f15;&#x7528;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x6807;&#x51c6;&#x89c4;&#x5b9a;&#xff0c;&#x4e00;&#x65e6;&#x4f7f;&#x7528;`WeakRef()`&#x521b;&#x5efa;&#x4e86;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x7684;&#x5f31;&#x5f15;&#x7528;&#xff0c;&#x90a3;&#x4e48;&#x5728;&#x672c;&#x8f6e;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#xff08;event loop&#xff09;&#xff0c;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x80af;&#x5b9a;&#x4e0d;&#x4f1a;&#x88ab;&#x6e05;&#x9664;&#xff0c;&#x53ea;&#x4f1a;&#x5728;&#x540e;&#x9762;&#x7684;&#x4e8b;&#x4ef6;&#x5faa;&#x73af;&#x624d;&#x4f1a;&#x88ab;&#x6e05;&#x9664;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1026,1029"}}],"payload":{"tag":"h2","lines":"981,983"}},{"content":"FinalizationRegistry","children":[{"content":"<pre data-lines=\"1033,1036\"><code>[ES2021](https://github.com/tc39/proposal-weakrefs#finalizers) &#x5f15;&#x5165;&#x4e86;&#x6e05;&#x7406;&#x5668;&#x6ce8;&#x518c;&#x8868;&#x529f;&#x80fd; FinalizationRegistry&#xff0c;&#x7528;&#x6765;&#x6307;&#x5b9a;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#x4ee5;&#x540e;&#xff0c;&#x6240;&#x8981;&#x6267;&#x884c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n\n&#x9996;&#x5148;&#xff0c;&#x65b0;&#x5efa;&#x4e00;&#x4e2a;&#x6ce8;&#x518c;&#x8868;&#x5b9e;&#x4f8b;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1033,1036"}},{"content":"<pre data-lines=\"1037,1041\"><code data-lines=\"1037,1041\">const registry <span class=\"hljs-operator\">=</span> new FinalizationRegistry(heldValue <span class=\"hljs-operator\">=</span>&gt; {\n })<span class=\"hljs-comment\">; </span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1037,1041"}},{"content":"<pre data-lines=\"1042,1045\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`FinalizationRegistry()`&#x662f;&#x7cfb;&#x7edf;&#x63d0;&#x4f9b;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#xff0c;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x6e05;&#x7406;&#x5668;&#x6ce8;&#x518c;&#x8868;&#x5b9e;&#x4f8b;&#xff0c;&#x91cc;&#x9762;&#x767b;&#x8bb0;&#x4e86;&#x6240;&#x8981;&#x6267;&#x884c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4f5c;&#x4e3a;`FinalizationRegistry()`&#x7684;&#x53c2;&#x6570;&#x4f20;&#x5165;&#xff0c;&#x5b83;&#x672c;&#x8eab;&#x6709;&#x4e00;&#x4e2a;&#x53c2;&#x6570;`heldValue`&#x3002;\n\n&#x7136;&#x540e;&#xff0c;&#x6ce8;&#x518c;&#x8868;&#x5b9e;&#x4f8b;&#x7684;`register()`&#x65b9;&#x6cd5;&#xff0c;&#x7528;&#x6765;&#x6ce8;&#x518c;&#x6240;&#x8981;&#x89c2;&#x5bdf;&#x7684;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1042,1045"}},{"content":"<pre data-lines=\"1046,1049\"><code data-lines=\"1046,1049\"><span class=\"hljs-keyword\">registry</span>.register(theObject, <span class=\"hljs-string\">&quot;some value&quot;</span>); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1046,1049"}},{"content":"<pre data-lines=\"1050,1057\"><code>&#x4e0a;&#x9762;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;`theObject`&#x5c31;&#x662f;&#x6240;&#x8981;&#x89c2;&#x5bdf;&#x7684;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#xff0c;&#x4e00;&#x65e6;&#x8be5;&#x5bf9;&#x8c61;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#xff0c;&#x6ce8;&#x518c;&#x8868;&#x5c31;&#x4f1a;&#x5728;&#x6e05;&#x9664;&#x5b8c;&#x6210;&#x540e;&#xff0c;&#x8c03;&#x7528;&#x65e9;&#x524d;&#x6ce8;&#x518c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x5e76;&#x5c06;`some value`&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff08;&#x524d;&#x9762;&#x7684;`heldValue`&#xff09;&#x4f20;&#x5165;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;\n\n&#x6ce8;&#x610f;&#xff0c;&#x6ce8;&#x518c;&#x8868;&#x4e0d;&#x5bf9;&#x76ee;&#x6807;&#x5bf9;&#x8c61;`theObject`&#x6784;&#x6210;&#x5f3a;&#x5f15;&#x7528;&#xff0c;&#x5c5e;&#x4e8e;&#x5f31;&#x5f15;&#x7528;&#x3002;&#x56e0;&#x4e3a;&#x5f3a;&#x5f15;&#x7528;&#x7684;&#x8bdd;&#xff0c;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x5c31;&#x4e0d;&#x4f1a;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#xff0c;&#x8fd9;&#x5c31;&#x5931;&#x53bb;&#x4f7f;&#x7528;&#x6ce8;&#x518c;&#x8868;&#x7684;&#x610f;&#x4e49;&#x4e86;&#x3002;\n\n&#x56de;&#x8c03;&#x51fd;&#x6570;&#x7684;&#x53c2;&#x6570;`heldValue`&#x53ef;&#x4ee5;&#x662f;&#x4efb;&#x610f;&#x7c7b;&#x578b;&#x7684;&#x503c;&#xff0c;&#x5b57;&#x7b26;&#x4e32;&#x3001;&#x6570;&#x503c;&#x3001;&#x5e03;&#x5c14;&#x503c;&#x3001;&#x5bf9;&#x8c61;&#xff0c;&#x751a;&#x81f3;&#x53ef;&#x4ee5;&#x662f;`undefined`&#x3002;\n\n&#x6700;&#x540e;&#xff0c;&#x5982;&#x679c;&#x4ee5;&#x540e;&#x8fd8;&#x60f3;&#x53d6;&#x6d88;&#x5df2;&#x7ecf;&#x6ce8;&#x518c;&#x7684;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x5219;&#x8981;&#x5411;`register()`&#x4f20;&#x5165;&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x4f5c;&#x4e3a;&#x6807;&#x8bb0;&#x503c;&#x3002;&#x8fd9;&#x4e2a;&#x6807;&#x8bb0;&#x503c;&#x5fc5;&#x987b;&#x662f;&#x5bf9;&#x8c61;&#xff0c;&#x4e00;&#x822c;&#x90fd;&#x7528;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x3002;&#x63a5;&#x7740;&#xff0c;&#x518d;&#x4f7f;&#x7528;&#x6ce8;&#x518c;&#x8868;&#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x7684;`unregister()`&#x65b9;&#x6cd5;&#x53d6;&#x6d88;&#x6ce8;&#x518c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1050,1057"}},{"content":"<pre data-lines=\"1058,1061\"><code data-lines=\"1058,1061\"><span class=\"hljs-keyword\">registry</span>.register(theObject, <span class=\"hljs-string\">&quot;some value&quot;</span>, theObject);<span class=\"hljs-keyword\">registry</span>.unregister(theObject); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1058,1061"}},{"content":"<pre data-lines=\"1062,1067\"><code>&#x4e0a;&#x9762;&#x4ee3;&#x7801;&#x4e2d;&#xff0c;`register()`&#x65b9;&#x6cd5;&#x7684;&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x5c31;&#x662f;&#x6807;&#x8bb0;&#x503c;`theObject`&#x3002;&#x53d6;&#x6d88;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x65f6;&#xff0c;&#x8981;&#x4f7f;&#x7528;`unregister()`&#x65b9;&#x6cd5;&#xff0c;&#x5e76;&#x5c06;&#x6807;&#x8bb0;&#x503c;&#x4f5c;&#x4e3a;&#x8be5;&#x65b9;&#x6cd5;&#x7684;&#x53c2;&#x6570;&#x3002;&#x8fd9;&#x91cc;`register()`&#x65b9;&#x6cd5;&#x5bf9;&#x7b2c;&#x4e09;&#x4e2a;&#x53c2;&#x6570;&#x7684;&#x5f15;&#x7528;&#xff0c;&#x4e5f;&#x5c5e;&#x4e8e;&#x5f31;&#x5f15;&#x7528;&#x3002;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x8fd9;&#x4e2a;&#x53c2;&#x6570;&#xff0c;&#x5219;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x65e0;&#x6cd5;&#x53d6;&#x6d88;&#x3002;\n\n&#x7531;&#x4e8e;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x88ab;&#x8c03;&#x7528;&#x4ee5;&#x540e;&#xff0c;&#x5c31;&#x4e0d;&#x518d;&#x5b58;&#x5728;&#x4e8e;&#x6ce8;&#x518c;&#x8868;&#x4e4b;&#x4e2d;&#x4e86;&#xff0c;&#x6240;&#x4ee5;&#x6267;&#x884c;`unregister()`&#x5e94;&#x8be5;&#x662f;&#x5728;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x8fd8;&#x6ca1;&#x88ab;&#x8c03;&#x7528;&#x4e4b;&#x524d;&#x3002;\n\n&#x4e0b;&#x9762;&#x4f7f;&#x7528;`FinalizationRegistry`&#xff0c;&#x5bf9;&#x524d;&#x4e00;&#x8282;&#x7684;&#x7f13;&#x5b58;&#x51fd;&#x6570;&#x8fdb;&#x884c;&#x589e;&#x5f3a;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1062,1067"}},{"content":"<pre data-lines=\"1068,1092\"><code data-lines=\"1068,1092\"><span class=\"hljs-function\">function <span class=\"hljs-title\">makeWeakCached</span>(<span class=\"hljs-params\">f</span>)</span> {\n  <span class=\"hljs-keyword\">const</span> cache = <span class=\"hljs-keyword\">new</span> Map();\n  <span class=\"hljs-keyword\">const</span> cleanup = <span class=\"hljs-keyword\">new</span> FinalizationRegistry(key =&gt; {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">ref</span> = cache.<span class=\"hljs-keyword\">get</span>(key);\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">ref</span> &amp;&amp; !<span class=\"hljs-keyword\">ref</span>.deref()) cache.delete(key);\n  });\n\n  <span class=\"hljs-keyword\">return</span> key =&gt; {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">ref</span> = cache.<span class=\"hljs-keyword\">get</span>(key);\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">ref</span>) {\n      <span class=\"hljs-keyword\">const</span> cached = <span class=\"hljs-keyword\">ref</span>.deref();\n      <span class=\"hljs-keyword\">if</span> (cached !== undefined) <span class=\"hljs-keyword\">return</span> cached;\n    }\n\n    <span class=\"hljs-keyword\">const</span> fresh = f(key);\n    cache.<span class=\"hljs-keyword\">set</span>(key, <span class=\"hljs-keyword\">new</span> WeakRef(fresh));\n    cleanup.register(fresh, key);\n    <span class=\"hljs-keyword\">return</span> fresh;\n  };\n}\n\n<span class=\"hljs-keyword\">const</span> getImageCached = makeWeakCached(getImage); \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1068,1092"}},{"content":"<pre data-lines=\"1093,1096\"><code>&#x4e0a;&#x9762;&#x793a;&#x4f8b;&#x4e0e;&#x524d;&#x4e00;&#x8282;&#x7684;&#x4f8b;&#x5b50;&#x76f8;&#x6bd4;&#xff0c;&#x5c31;&#x662f;&#x589e;&#x52a0;&#x4e00;&#x4e2a;&#x6e05;&#x7406;&#x5668;&#x6ce8;&#x518c;&#x8868;&#xff0c;&#x4e00;&#x65e6;&#x7f13;&#x5b58;&#x7684;&#x539f;&#x59cb;&#x5bf9;&#x8c61;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#xff0c;&#x4f1a;&#x81ea;&#x52a8;&#x6267;&#x884c;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x3002;&#x8be5;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x4f1a;&#x6e05;&#x9664;&#x7f13;&#x5b58;&#x91cc;&#x9762;&#x5df2;&#x7ecf;&#x5931;&#x6548;&#x7684;&#x952e;&#x3002;\n\n&#x4e0b;&#x9762;&#x662f;&#x53e6;&#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1093,1096"}},{"content":"<pre data-lines=\"1097,1121\"><code data-lines=\"1097,1121\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Thingy</span> {\n  #file;\n  #cleanup = file =&gt; {\n    console.error(\n      `The \\`release\\` method was never called <span class=\"hljs-keyword\">for</span> the \\`Thingy\\` <span class=\"hljs-keyword\">for</span> the file <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">&#x24;{file.name}</span>&quot;</span>`\n    );\n  };\n  #registry = new FinalizationRegistry(<span class=\"hljs-keyword\">this</span>.#cleanup);\n\n  <span class=\"hljs-keyword\">constructor</span>(filename) {\n    <span class=\"hljs-keyword\">this</span>.#file = File.<span class=\"hljs-keyword\">open</span>(filename);\n    <span class=\"hljs-keyword\">this</span>.#registry.register(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-keyword\">this</span>.#file, <span class=\"hljs-keyword\">this</span>.#file);\n  }\n\n  release() {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.#file) {\n      <span class=\"hljs-keyword\">this</span>.#registry.unregister(<span class=\"hljs-keyword\">this</span>.#file);\n      File.close(<span class=\"hljs-keyword\">this</span>.#file);\n      <span class=\"hljs-keyword\">this</span>.#file = <span class=\"hljs-literal\">null</span>;\n    }\n  }\n} \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1097,1121"}},{"content":"<pre data-lines=\"1122,1125\"><code>&#x4e0a;&#x9762;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x7531;&#x4e8e;&#x67d0;&#x79cd;&#x539f;&#x56e0;&#xff0c;`Thingy`&#x7c7b;&#x7684;&#x5b9e;&#x4f8b;&#x5bf9;&#x8c61;&#x6ca1;&#x6709;&#x8c03;&#x7528;`release()`&#x65b9;&#x6cd5;&#xff0c;&#x5c31;&#x88ab;&#x5783;&#x573e;&#x56de;&#x6536;&#x673a;&#x5236;&#x6e05;&#x9664;&#x4e86;&#xff0c;&#x90a3;&#x4e48;&#x6e05;&#x7406;&#x5668;&#x5c31;&#x4f1a;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;`#cleanup()`&#xff0c;&#x8f93;&#x51fa;&#x4e00;&#x6761;&#x9519;&#x8bef;&#x4fe1;&#x606f;&#x3002;\n\n&#x7531;&#x4e8e;&#x65e0;&#x6cd5;&#x77e5;&#x9053;&#x6e05;&#x7406;&#x5668;&#x4f55;&#x65f6;&#x4f1a;&#x6267;&#x884c;&#xff0c;&#x6240;&#x4ee5;&#x6700;&#x597d;&#x907f;&#x514d;&#x4f7f;&#x7528;&#x5b83;&#x3002;&#x53e6;&#x5916;&#xff0c;&#x5982;&#x679c;&#x6d4f;&#x89c8;&#x5668;&#x7a97;&#x53e3;&#x5173;&#x95ed;&#x6216;&#x8005;&#x8fdb;&#x7a0b;&#x610f;&#x5916;&#x9000;&#x51fa;&#xff0c;&#x6e05;&#x7406;&#x5668;&#x5219;&#x4e0d;&#x4f1a;&#x8fd0;&#x884c;&#x3002;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1122,1125"}}],"payload":{"tag":"h2","lines":"1030,1032"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
