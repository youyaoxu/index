<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script><script src="https://unpkg.com/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://unpkg.com/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"<a href=\"https://www.cnblogs.com/xiaohuochai/p/6564303.html\">CORS</a><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAoklEQVQ4T+2T4Q2CMBCFv27CBjgCG+gIjAAbOAIjOIJs4Ai6gRvIBpjXXCOp19T/8pJLoTneXcj3Ah91wAV4bu68xwXoAZ2EzEAmE9AWTB6AelRDyaAx9zgh0wE4ATczcTdIE7wl0oe7wX/8RMHigfQTB3fDdM1IEvYyONdIVEOSqDwCY2Z2NaS/UNbqMSQmvauUPlfbNKpBSdTUVyXSs/XyBlRCNBG20I28AAAAAElFTkSuQmCC\" alt=\"img\">","children":[{"content":"&#x524d;&#x9762;&#x7684;&#x8bdd;","children":[{"content":"<pre data-lines=\"4,5\"><code>&#x3000;&#x3000;&#x901a;&#x8fc7;XHR&#x5b9e;&#x73b0;Ajax&#x901a;&#x4fe1;&#x7684;&#x4e00;&#x4e2a;&#x4e3b;&#x8981;&#x9650;&#x5236;&#xff0c;&#x6765;&#x6e90;&#x4e8e;&#x8de8;&#x57df;&#x5b89;&#x5168;&#x7b56;&#x7565;&#x3002;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;XHR&#x5bf9;&#x8c61;&#x53ea;&#x80fd;&#x8bbf;&#x95ee;&#x4e0e;&#x5305;&#x542b;&#x5b83;&#x7684;&#x9875;&#x9762;&#x4f4d;&#x4e8e;&#x540c;&#x4e00;&#x4e2a;&#x57df;&#x4e2d;&#x7684;&#x8d44;&#x6e90;&#x3002;&#x8fd9;&#x79cd;&#x5b89;&#x5168;&#x7b56;&#x7565;&#x53ef;&#x4ee5;&#x9884;&#x9632;&#x67d0;&#x4e9b;&#x6076;&#x610f;&#x884c;&#x4e3a;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x5b9e;&#x73b0;&#x5408;&#x7406;&#x7684;&#x8de8;&#x57df;&#x8bf7;&#x6c42;&#x5bf9;&#x5f00;&#x53d1;&#x67d0;&#x4e9b;&#x6d4f;&#x89c8;&#x5668;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x4e5f;&#x662f;&#x81f3;&#x5173;&#x91cd;&#x8981;&#x7684;&#x3002;CORS(Cross-Origin Resource Sharing)&#x8de8;&#x6e90;&#x8d44;&#x6e90;&#x5171;&#x4eab;&#x662f;W3C&#x7684;&#x4e00;&#x4e2a;&#x5de5;&#x4f5c;&#x8349;&#x6848;&#xff0c;&#x5b9a;&#x4e49;&#x4e86;&#x5728;&#x5fc5;&#x987b;&#x8bbf;&#x95ee;&#x8de8;&#x6e90;&#x8d44;&#x6e90;&#x65f6;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4e0e;&#x670d;&#x52a1;&#x5668;&#x5e94;&#x8be5;&#x5982;&#x4f55;&#x6c9f;&#x901a;&#x3002;&#x5b83;&#x5141;&#x8bb8;&#x6d4f;&#x89c8;&#x5668;&#x5411;&#x8de8;&#x6e90;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x53d1;&#x51fa;XMLHttpRequest&#x8bf7;&#x6c42;&#xff0c;&#x4ece;&#x800c;&#x514b;&#x670d;&#x4e86;AJAX&#x53ea;&#x80fd;&#x540c;&#x6e90;&#x4f7f;&#x7528;&#x7684;&#x9650;&#x5236;&#x3002;&#x672c;&#x6587;&#x5c06;&#x8be6;&#x7ec6;&#x4ecb;&#x7ecd;CORS&#x7684;&#x5185;&#x5bb9;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,5"}}],"payload":{"tag":"h3","lines":"2,3"}},{"content":"&#x7b80;&#x5355;&#x8bf7;&#x6c42;","children":[{"content":"<pre data-lines=\"10,25\"><code>&#x3000;&#x3000;&#x6d4f;&#x89c8;&#x5668;&#x5c06;CORS&#x8bf7;&#x6c42;&#x5206;&#x6210;&#x4e24;&#x7c7b;&#xff1a;&#x7b80;&#x5355;&#x8bf7;&#x6c42;(simple request)&#x548c;&#x975e;&#x7b80;&#x5355;&#x8bf7;&#x6c42;(not-so-simple request)\n\n&#x3000;&#x3000;&#x53ea;&#x8981;&#x540c;&#x65f6;&#x6ee1;&#x8db3;&#x4ee5;&#x4e0b;&#x4e24;&#x5927;&#x6761;&#x4ef6;&#xff0c;&#x5c31;&#x5c5e;&#x4e8e;&#x7b80;&#x5355;&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;1&#x3001;&#x8bf7;&#x6c42;&#x65b9;&#x6cd5;&#x662f;&#x4ee5;&#x4e0b;&#x4e09;&#x79cd;&#x65b9;&#x6cd5;&#x4e4b;&#x4e00;&#xff1a;HEAD&#x3001;GET&#x3001;POST\n\n&#x3000;&#x3000;2&#x3001;HTTP&#x7684;&#x5934;&#x4fe1;&#x606f;&#x4e0d;&#x8d85;&#x51fa;&#x4ee5;&#x4e0b;&#x51e0;&#x79cd;&#x5b57;&#x6bb5;&#xff1a;Accept&#x3001;Accept-Language&#x3001;Content-Language&#x3001;Last-Event-ID&#x3001;(Content-Type&#xff1a;&#x53ea;&#x9650;&#x4e8e;&#x4e09;&#x4e2a;&#x503c;application/x-www-form-urlencoded&#x3001;multipart/form-data&#x3001;text/plain)\n\n&#x3000;&#x3000;&#x51e1;&#x662f;&#x4e0d;&#x540c;&#x65f6;&#x6ee1;&#x8db3;&#x4e0a;&#x9762;&#x4e24;&#x4e2a;&#x6761;&#x4ef6;&#xff0c;&#x5c31;&#x5c5e;&#x4e8e;&#x975e;&#x7b80;&#x5355;&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;CORS&#x80cc;&#x540e;&#x7684;&#x57fa;&#x672c;&#x601d;&#x60f3;&#xff0c;&#x5c31;&#x662f;&#x4f7f;&#x7528;&#x81ea;&#x5b9a;&#x4e49;&#x7684;HTTP&#x5934;&#x90e8;&#x8ba9;&#x6d4f;&#x89c8;&#x5668;&#x4e0e;&#x670d;&#x52a1;&#x5668;&#x8fdb;&#x884c;&#x6c9f;&#x901a;&#xff0c;&#x4ece;&#x800c;&#x51b3;&#x5b9a;&#x8bf7;&#x6c42;&#x6216;&#x54cd;&#x5e94;&#x662f;&#x5e94;&#x8be5;&#x6210;&#x529f;&#xff0c;&#x8fd8;&#x662f;&#x5e94;&#x8be5;&#x5931;&#x8d25;\n\n&#x3000;&#x3000;&#x5bf9;&#x4e8e;&#x7b80;&#x5355;&#x8bf7;&#x6c42;&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x76f4;&#x63a5;&#x53d1;&#x51fa;CORS&#x8bf7;&#x6c42;&#x3002;&#x5177;&#x4f53;&#x6765;&#x8bf4;&#xff0c;&#x5c31;&#x662f;&#x5728;&#x5934;&#x4fe1;&#x606f;&#x4e4b;&#x4e2d;&#xff0c;&#x9700;&#x8981;&#x7ed9;&#x5b83;&#x9644;&#x52a0;&#x4e00;&#x4e2a;&#x989d;&#x5916;&#x7684;origin&#x5934;&#x90e8;&#xff0c;&#x5176;&#x4e2d;&#x5305;&#x542b;&#x8bf7;&#x6c42;&#x9875;&#x9762;&#x7684;&#x6e90;&#x4fe1;&#x606f;(&#x534f;&#x8bae;&#x3001;&#x57df;&#x540d;&#x548c;&#x7aef;&#x53e3;)&#xff0c;&#x4ee5;&#x4fbf;&#x670d;&#x52a1;&#x5668;&#x6839;&#x636e;&#x8fd9;&#x4e2a;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x6765;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x7ed9;&#x4e88;&#x54cd;&#x5e94;\n\n&#x3000;&#x3000;&#x6d4f;&#x89c8;&#x5668;&#x5982;&#x679c;&#x53d1;&#x73b0;&#x8de8;&#x6e90;AJAX&#x8bf7;&#x6c42;&#x662f;&#x7b80;&#x5355;&#x8bf7;&#x6c42;&#xff0c;&#x5c31;&#x81ea;&#x52a8;&#x5728;&#x5934;&#x4fe1;&#x606f;&#x4e4b;&#x4e2d;&#xff0c;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;Origin&#x5b57;&#x6bb5;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"10,25"}},{"content":"<pre data-lines=\"28,39\"><code data-lines=\"28,39\"><span class=\"hljs-attribute\">Accept</span>:*/*\n<span class=\"hljs-attribute\">Accept</span>-Encoding:gzip, deflate, br\n<span class=\"hljs-attribute\">Accept</span>-Language:zh-CN,zh;q=<span class=\"hljs-number\">0</span>.<span class=\"hljs-number\">8</span>,en;q=<span class=\"hljs-number\">0</span>.<span class=\"hljs-number\">6</span>\n<span class=\"hljs-attribute\">Connection</span>:keep-alive\n<span class=\"hljs-attribute\">Content</span>-Length:<span class=\"hljs-number\">0</span>\n<span class=\"hljs-attribute\">Host</span>:www.webhuochai.com\n<span class=\"hljs-attribute\">Origin</span>:http://<span class=\"hljs-number\">127.0.0.1</span>\n<span class=\"hljs-attribute\">Referer</span>:http://<span class=\"hljs-number\">127.0.0.1</span>/cors.html\n<span class=\"hljs-attribute\">User</span>-Agent:Mozilla/<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">0</span> (Windows NT <span class=\"hljs-number\">10</span>.<span class=\"hljs-number\">0</span>; Win64; x64) AppleWebKit/<span class=\"hljs-number\">537</span>.<span class=\"hljs-number\">36</span> (KHTML, like Gecko) Chrome/<span class=\"hljs-number\">57</span>.<span class=\"hljs-number\">0</span>.<span class=\"hljs-number\">2987</span>.<span class=\"hljs-number\">98</span> Safari/<span class=\"hljs-number\">537</span>.<span class=\"hljs-number\">36</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"28,39"}},{"content":"<pre data-lines=\"42,45\"><code>&#x3000;&#x3000;&#x4e0a;&#x9762;&#x7684;&#x5934;&#x4fe1;&#x606f;&#x4e2d;&#xff0c;Origin&#x5b57;&#x6bb5;&#x7528;&#x6765;&#x8bf4;&#x660e;&#xff0c;&#x672c;&#x6b21;&#x8bf7;&#x6c42;&#x6765;&#x81ea;&#x54ea;&#x4e2a;&#x6e90;(&#x534f;&#x8bae; + &#x57df;&#x540d; + &#x7aef;&#x53e3;)&#x3002;&#x670d;&#x52a1;&#x5668;&#x6839;&#x636e;&#x8fd9;&#x4e2a;&#x503c;&#xff0c;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x540c;&#x610f;&#x8fd9;&#x6b21;&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;&#x5982;&#x679c;&#x670d;&#x52a1;&#x5668;&#x8ba4;&#x4e3a;&#x8fd9;&#x4e2a;&#x8bf7;&#x6c42;&#x53ef;&#x4ee5;&#x63a5;&#x53d7;&#xff0c;&#x5c31;&#x5728;Access-Control-Allow-Origin&#x5934;&#x90e8;&#x4e2d;&#x56de;&#x53d1;&#x76f8;&#x540c;&#x7684;&#x6e90;&#x4fe1;&#x606f;(&#x5982;&#x679c;&#x662f;&#x516c;&#x5171;&#x8d44;&#x6e90;&#xff0c;&#x53ef;&#x4ee5;&#x56de;&#x53d1;&quot; *&quot; )\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"42,45"}},{"content":"<pre data-lines=\"46,53\"><code data-lines=\"46,53\"><span class=\"hljs-title class_\">Request</span> <span class=\"hljs-variable constant_\">URL</span><span class=\"hljs-symbol\">:https</span><span class=\"hljs-symbol\">://www</span>.webhuochai.com/test/iecors.php\n<span class=\"hljs-title class_\">Request</span> <span class=\"hljs-title class_\">Method</span><span class=\"hljs-symbol\">:POST</span>\n<span class=\"hljs-title class_\">Status</span> <span class=\"hljs-title class_\">Code</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">200</span> <span class=\"hljs-variable constant_\">OK</span>\n<span class=\"hljs-title class_\">Remote</span> <span class=\"hljs-title class_\">Address</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">218.247</span>.<span class=\"hljs-number\">93.253</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">443</span>\n<span class=\"hljs-title class_\">Referrer</span> <span class=\"hljs-title class_\">Policy</span><span class=\"hljs-symbol\">:no-referrer-when-downgrade</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"46,53"}},{"content":"<pre data-lines=\"54,57\"><code>&#x3000;&#x3000;&#x5982;&#x679c;Origin&#x6307;&#x5b9a;&#x7684;&#x6e90;&#xff0c;&#x4e0d;&#x5728;&#x8bb8;&#x53ef;&#x8303;&#x56f4;&#x5185;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x4f1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x6b63;&#x5e38;&#x7684;HTTP&#x56de;&#x5e94;&#x3002;&#x6d4f;&#x89c8;&#x5668;&#x53d1;&#x73b0;&#xff0c;&#x8fd9;&#x4e2a;&#x56de;&#x5e94;&#x7684;&#x5934;&#x4fe1;&#x606f;&#x6ca1;&#x6709;&#x5305;&#x542b;Access-Control-Allow-Origin&#x5b57;&#x6bb5;&#xff0c;&#x5c31;&#x77e5;&#x9053;&#x51fa;&#x9519;&#x4e86;&#xff0c;&#x4ece;&#x800c;&#x629b;&#x51fa;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#xff0c;&#x88ab;XMLHttpRequest&#x7684;onerror&#x56de;&#x8c03;&#x51fd;&#x6570;&#x6355;&#x83b7;&#x3002;&#x4f46;&#x662f;&#xff0c;&#x8fd9;&#x79cd;&#x9519;&#x8bef;&#x65e0;&#x6cd5;&#x901a;&#x8fc7;&#x72b6;&#x6001;&#x7801;&#x8bc6;&#x522b;&#xff0c;&#x56e0;&#x4e3a;HTTP&#x56de;&#x5e94;&#x7684;&#x72b6;&#x6001;&#x7801;&#x6709;&#x53ef;&#x80fd;&#x662f;200\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x8bf7;&#x6c42;&#x548c;&#x54cd;&#x5e94;&#x90fd;&#x4e0d;&#x5305;&#x542b;cookie&#x4fe1;&#x606f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"54,57"}}],"payload":{"tag":"h3","lines":"8,9"}},{"content":"&#x539f;&#x751f;&#x652f;&#x6301;","children":[{"content":"<pre data-lines=\"62,65\"><code>&#x3000;&#x3000;&#x6807;&#x51c6;&#x6d4f;&#x89c8;&#x5668;&#x90fd;&#x901a;&#x8fc7;XMLHttpRequest&#x5bf9;&#x8c61;&#x5b9e;&#x73b0;&#x4e86;&#x5bf9;CORS&#x7684;&#x539f;&#x751f;&#x652f;&#x6301;&#x3002;&#x5728;&#x5c1d;&#x8bd5;&#x6253;&#x5f00;&#x4e0d;&#x540c;&#x6765;&#x6e90;&#x7684;&#x8d44;&#x6e90;&#x65f6;&#xff0c;&#x65e0;&#x9700;&#x989d;&#x5916;&#x7f16;&#x5199;&#x4ee3;&#x7801;&#x5c31;&#x53ef;&#x4ee5;&#x89e6;&#x53d1;&#x8fd9;&#x4e2a;&#x884c;&#x4e3a;&#x3002;&#x8981;&#x8bf7;&#x6c42;&#x4f4d;&#x4e8e;&#x53e6;&#x4e00;&#x4e2a;&#x57df;&#x4e2d;&#x7684;&#x8d44;&#x6e90;&#xff0c;&#x4f7f;&#x7528;&#x6807;&#x51c6;&#x7684;XHR&#x5bf9;&#x8c61;&#x5e76;&#x5728;open()&#x65b9;&#x6cd5;&#x4e2d;&#x4f20;&#x5165;&#x7edd;&#x5bf9;URL&#x5373;&#x53ef;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]IE9-&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"62,65"}},{"content":"<pre data-lines=\"68,88\"><code data-lines=\"68,88\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;button&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;&#x8de8;&#x57df;&#x8bf7;&#x6c42;&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;result&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\nbtn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">var</span> xhr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">XMLHttpRequest</span>();\n    xhr.<span class=\"hljs-property\">onreadystatechange</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n        <span class=\"hljs-keyword\">if</span>(xhr.<span class=\"hljs-property\">readyState</span> == <span class=\"hljs-number\">4</span>){\n            <span class=\"hljs-keyword\">if</span> ((xhr.<span class=\"hljs-property\">status</span> &gt;= <span class=\"hljs-number\">200</span> &amp;&amp; xhr.<span class=\"hljs-property\">status</span> &lt; <span class=\"hljs-number\">300</span>)|| xhr.<span class=\"hljs-property\">status</span> == <span class=\"hljs-number\">304</span>){\n                result.<span class=\"hljs-property\">innerHTML</span> = xhr.<span class=\"hljs-property\">responseText</span>;\n            }<span class=\"hljs-keyword\">else</span>{\n                <span class=\"hljs-title function_\">alert</span>(<span class=\"hljs-string\">&quot;Request was unsuccessful: &quot;</span> + xhr.<span class=\"hljs-property\">status</span>);\n            }    \n        }\n    };\n    xhr.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&quot;post&quot;</span>, <span class=\"hljs-string\">&quot;https://www.webhuochai.com/test/iecors.php&quot;</span>, <span class=\"hljs-literal\">true</span>);\n    xhr.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-literal\">null</span>);    \n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"68,88"}},{"content":"<pre data-lines=\"91,94\"><code>&#x3000;&#x3000;CORS&#x4e3b;&#x8981;&#x9700;&#x8981;&#x5728;&#x540e;&#x7aef;&#x8fdb;&#x884c;&#x8bbe;&#x7f6e;&#xff0c;&#x4ee5;PHP&#x4e3a;&#x4f8b;\n\n&#x3000;&#x3000;&#x901a;&#x8fc7;&#x8bbe;&#x7f6e;header()&#x65b9;&#x6cd5;&#xff0c;&#x201c;*&#x201d;&#x53f7;&#x8868;&#x793a;&#x5141;&#x8bb8;&#x4efb;&#x4f55;&#x57df;&#x5411;&#x670d;&#x52a1;&#x7aef;&#x63d0;&#x4ea4;&#x8bf7;&#x6c42;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"91,94"}},{"content":"<pre data-lines=\"95,98\"><code data-lines=\"95,98\">header( <span class=\"hljs-string\">&quot; Access-Control-Allow-Origin: * &quot;</span> )<span class=\"hljs-comment\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"95,98"}},{"content":"<pre data-lines=\"99,100\"><code>&#x3000;&#x3000;&#x4e5f;&#x53ef;&#x4ee5;&#x8bbe;&#x7f6e;&#x6307;&#x5b9a;&#x7684;&#x57df;&#x540d;&#xff0c;&#x5982;&#x57df;&#x540d;&quot;https://www.webhuochai.com&quot;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x5141;&#x8bb8;&#x6765;&#x81ea;&#x8fd9;&#x4e2a;&#x57df;&#x540d;&#x7684;&#x8bf7;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"99,100"}},{"content":"<pre data-lines=\"101,104\"><code data-lines=\"101,104\">header( <span class=\"hljs-string\">&quot; Access-Control-Allow-Origin: https://www.webhuochai.com&quot;</span> )<span class=\"hljs-comment\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"101,104"}},{"content":"<pre data-lines=\"105,114\"><code>&#x3000;&#x3000;&#x901a;&#x8fc7;&#x8de8;&#x57df;XHR&#x5bf9;&#x8c61;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;status&#x548c;statusText&#x5c5e;&#x6027;&#xff0c;&#x800c;&#x4e14;&#x8fd8;&#x652f;&#x6301;&#x540c;&#x6b65;&#x8bf7;&#x6c42;&#x3002;&#x8de8;&#x57df;XHR&#x5bf9;&#x8c61;&#x4e5f;&#x6709;&#x4e00;&#x4e9b;&#x9650;&#x5236;&#xff0c;&#x4f46;&#x4e3a;&#x4e86;&#x5b89;&#x5168;&#x8fd9;&#x4e9b;&#x9650;&#x5236;&#x662f;&#x5fc5;&#x9700;&#x7684;\n\n&#x3000;&#x3000;1&#x3001;&#x4e0d;&#x80fd;&#x4f7f;&#x7528;setRequestHeader()&#x8bbe;&#x7f6e;&#x81ea;&#x5b9a;&#x4e49;&#x5934;&#x90e8;\n\n&#x3000;&#x3000;2&#x3001;&#x4e0d;&#x80fd;&#x53d1;&#x9001;&#x548c;&#x63a5;&#x6536;cookie\n\n&#x3000;&#x3000;3&#x3001;&#x8c03;&#x7528;getAllResponseHeaders()&#x65b9;&#x6cd5;&#x603b;&#x4f1a;&#x8fd4;&#x56de;&#x7a7a;&#x5b57;&#x7b26;&#x4e32;\n\n&#x3000;&#x3000;&#x7531;&#x4e8e;&#x65e0;&#x8bba;&#x540c;&#x6e90;&#x8bf7;&#x6c42;&#x8fd8;&#x662f;&#x8de8;&#x6e90;&#x8bf7;&#x6c42;&#x90fd;&#x4f7f;&#x7528;&#x76f8;&#x540c;&#x7684;&#x63a5;&#x53e3;&#xff0c;&#x56e0;&#x6b64;&#x5bf9;&#x4e8e;&#x672c;&#x5730;&#x8d44;&#x6e90;&#xff0c;&#x6700;&#x597d;&#x4f7f;&#x7528;&#x76f8;&#x5bf9;URL&#xff0c;&#x5728;&#x8bbf;&#x95ee;&#x8fdc;&#x7a0b;&#x8d44;&#x6e90;&#x65f6;&#x518d;&#x4f7f;&#x7528;&#x7edd;&#x5bf9;URL&#x3002;&#x8fd9;&#x6837;&#x505a;&#x80fd;&#x6d88;&#x9664;&#x6b67;&#x4e49;&#xff0c;&#x907f;&#x514d;&#x51fa;&#x73b0;&#x9650;&#x5236;&#x8bbf;&#x95ee;&#x5934;&#x90e8;&#x6216;&#x672c;&#x5730;cookie&#x4fe1;&#x606f;&#x7b49;&#x95ee;&#x9898;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"105,114"}}],"payload":{"tag":"h3","lines":"60,61"}},{"content":"IE&#x5b9e;&#x73b0;","children":[{"content":"<pre data-lines=\"119,138\"><code>&#x3000;&#x3000;&#x5fae;&#x8f6f;&#x5f15;&#x5165;&#x4e86;XDR(XDomainRquest)&#x7c7b;&#x578b;&#x3002;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x4e0e;XHR&#x7c7b;&#x4f3c;&#xff0c;&#x4f46;&#x80fd;&#x5b9e;&#x73b0;&#x5b89;&#x5168;&#x53ef;&#x9760;&#x7684;&#x8de8;&#x57df;&#x901a;&#x4fe1;&#x3002;XDR&#x5bf9;&#x8c61;&#x7684;&#x5b89;&#x5168;&#x673a;&#x5236;&#x90e8;&#x5206;&#x5b9e;&#x73b0;&#x4e86;W3C&#x7684;CORS&#x89c4;&#x8303;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]IE11&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;\n\n&#x3000;&#x3000;&#x4ee5;&#x4e0b;&#x662f;XDR&#x4e0e;XHR&#x7684;&#x4e00;&#x4e9b;&#x4e0d;&#x540c;&#x4e4b;&#x5904;\n\n&#x3000;&#x3000;1&#x3001;cookie&#x4e0d;&#x4f1a;&#x968f;&#x8bf7;&#x6c42;&#x53d1;&#x9001;&#xff0c;&#x4e5f;&#x4e0d;&#x4f1a;&#x968f;&#x54cd;&#x5e94;&#x8fd4;&#x56de;\n\n&#x3000;&#x3000;2&#x3001;&#x53ea;&#x80fd;&#x8bbe;&#x7f6e;&#x8bf7;&#x6c42;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x4e2d;&#x7684;Content-Type&#x5b57;&#x6bb5;\n\n&#x3000;&#x3000;3&#x3001;&#x4e0d;&#x80fd;&#x8bbf;&#x95ee;&#x54cd;&#x5e94;&#x5934;&#x90e8;&#x4fe1;&#x606f;\n\n&#x3000;&#x3000;4&#x3001;&#x53ea;&#x652f;&#x6301;GET&#x548c;POST&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;&#x8fd9;&#x4e9b;&#x53d8;&#x5316;&#x4f7f;CSRF(Cross-Site Request Forgery)&#x8de8;&#x7ad9;&#x70b9;&#x8bf7;&#x6c42;&#x4f2a;&#x9020;&#x548c;XSS(Cross-Site Scripting)&#x8de8;&#x7ad9;&#x70b9;&#x811a;&#x672c;&#x7684;&#x95ee;&#x9898;&#x5f97;&#x5230;&#x4e86;&#x7f13;&#x89e3;&#x3002;&#x88ab;&#x8bf7;&#x6c42;&#x7684;&#x8d44;&#x6e90;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x5b83;&#x8ba4;&#x4e3a;&#x5408;&#x9002;&#x7684;&#x4efb;&#x610f;&#x6570;&#x636e;(&#x7528;&#x6237;&#x4ee3;&#x7406;&#x3001;&#x6765;&#x6e90;&#x9875;&#x9762;&#x7b49;)&#x6765;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x8bbe;&#x7f6e;Access-Control-Allow-Origin&#x5934;&#x90e8;&#x3002;&#x4f5c;&#x4e3a;&#x8bf7;&#x6c42;&#x7684;&#x4e00;&#x90e8;&#x5206;&#xff0c;Origin&#x5934;&#x90e8;&#x7684;&#x503c;&#x8868;&#x793a;&#x8bf7;&#x6c42;&#x7684;&#x6765;&#x6e90;&#x57df;&#xff0c;&#x4ee5;&#x4fbf;&#x8fdc;&#x7a0b;&#x8d44;&#x6e90;&#x660e;&#x786e;&#x5730;&#x8bc6;&#x522b;XDR&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;XDR&#x5bf9;&#x8c61;&#x7684;&#x4f7f;&#x7528;&#x65b9;&#x6cd5;&#x4e0e;XHR&#x5bf9;&#x8c61;&#x975e;&#x5e38;&#x76f8;&#x4f3c;&#x3002;&#x4e5f;&#x662f;&#x521b;&#x5efa;&#x4e00;&#x4e2a;XDomainRequest&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x8c03;&#x7528;open()&#x65b9;&#x6cd5;&#xff0c;&#x518d;&#x8c03;&#x7528;send()&#x65b9;&#x6cd5;&#x3002;&#x4f46;&#x4e0e;XHR&#x5bf9;&#x8c61;&#x7684;open()&#x65b9;&#x6cd5;&#x4e0d;&#x540c;&#xff0c;XDR&#x5bf9;&#x8c61;&#x7684;open()&#x65b9;&#x6cd5;&#x53ea;&#x63a5;&#x6536;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#xff1a;&#x8bf7;&#x6c42;&#x7684;&#x7c7b;&#x578b;&#x548c;URL\n\n&#x3000;&#x3000;&#x6240;&#x6709;XDR&#x8bf7;&#x6c42;&#x90fd;&#x662f;&#x5f02;&#x6b65;&#x6267;&#x884c;&#x7684;&#xff0c;&#x4e0d;&#x80fd;&#x7528;&#x5b83;&#x6765;&#x521b;&#x5efa;&#x540c;&#x6b65;&#x8bf7;&#x6c42;&#x3002;&#x8bf7;&#x6c42;&#x8fd4;&#x56de;&#x4e4b;&#x540e;&#xff0c;&#x4f1a;&#x89e6;&#x53d1;load&#x4e8b;&#x4ef6;&#xff0c;&#x54cd;&#x5e94;&#x7684;&#x6570;&#x636e;&#x4e5f;&#x4f1a;&#x4fdd;&#x5b58;&#x5728;responseText&#x5c5e;&#x6027;&#x4e2d;&#xff0c;&#x5982;&#x4e0b;&#x6240;&#x793a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"119,138"}},{"content":"<pre data-lines=\"141,155\"><code data-lines=\"141,155\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;btn&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;button&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;&#x8de8;&#x57df;&#x8bf7;&#x6c42;&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;result&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\nbtn.<span class=\"hljs-property\">onclick</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">var</span> xdr = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">XDomainRequest</span>();\n    xdr.<span class=\"hljs-property\">onload</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n        result.<span class=\"hljs-property\">innerHTML</span> = xdr.<span class=\"hljs-property\">responseText</span>;\n    };\n    xdr.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&quot;get&quot;</span>, <span class=\"hljs-string\">&quot;https://www.webhuochai.com/test/iecors.php&quot;</span>);\n    xdr.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-literal\">null</span>);\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"141,155"}},{"content":"<pre data-lines=\"158,161\"><code>&#x3000;&#x3000;[&#x6ce8;&#x610f;]&#x5728;IE&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#xff0c;&#x4e0d;&#x652f;&#x6301;http&#x4e0e;https&#x4e4b;&#x95f4;&#xff0c;&#x5373;&#x4e0d;&#x540c;&#x534f;&#x8bae;&#x95f4;&#x7684;&#x8de8;&#x57df;&#x8bf7;&#x6c42;&#xff0c;&#x4f1a;&#x63d0;&#x793a;SCRIPT5: &#x62d2;&#x7edd;&#x8bbf;&#x95ee;\n\n&#x3000;&#x3000;&#x5728;&#x63a5;&#x6536;&#x5230;&#x54cd;&#x5e94;&#x540e;&#xff0c;&#x53ea;&#x80fd;&#x8bbf;&#x95ee;&#x54cd;&#x5e94;&#x7684;&#x539f;&#x59cb;&#x6587;&#x672c;&#xff1b;&#x6ca1;&#x6709;&#x529e;&#x6cd5;&#x786e;&#x5b9a;&#x54cd;&#x5e94;&#x7684;&#x72b6;&#x6001;&#x4ee3;&#x7801;&#x3002;&#x800c;&#x4e14;&#xff0c;&#x53ea;&#x8981;&#x54cd;&#x5e94;&#x6709;&#x6548;&#x5c31;&#x4f1a;&#x89e6;&#x53d1;load&#x4e8b;&#x4ef6;&#xff0c;&#x5982;&#x679c;&#x5931;&#x8d25;(&#x5305;&#x62ec;&#x54cd;&#x5e94;&#x4e2d;&#x7f3a;&#x5c11;Access-Control-Allow-Origin&#x5934;&#x90e8;)&#x5c31;&#x4f1a;&#x89e6;&#x53d1;error&#x4e8b;&#x4ef6;&#x3002;&#x9057;&#x61be;&#x7684;&#x662f;&#xff0c;&#x9664;&#x4e86;&#x9519;&#x8bef;&#x672c;&#x8eab;&#x4e4b;&#x5916;&#xff0c;&#x6ca1;&#x6709;&#x5176;&#x4ed6;&#x4fe1;&#x606f;&#x53ef;&#x7528;&#xff0c;&#x56e0;&#x6b64;&#x552f;&#x4e00;&#x80fd;&#x591f;&#x786e;&#x5b9a;&#x7684;&#x5c31;&#x53ea;&#x6709;&#x8bf7;&#x6c42;&#x672a;&#x6210;&#x529f;&#x4e86;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"158,161"}},{"content":"<pre data-lines=\"164,175\"><code data-lines=\"164,175\"><span class=\"hljs-keyword\">var</span> xdr = <span class=\"hljs-keyword\">new</span> XDomainRequest();\nxdr.onload = <span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{\n    alert(xdr.responseText)&#xff1b;\n};\nxdr.onerror = <span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{\n    alert(<span class=\"hljs-string\">&quot;An error occurred.&quot;</span>);\n}\nxdr.open(<span class=\"hljs-string\">&quot;get&quot;</span>, <span class=\"hljs-string\">&quot;https://www.webhuochai.com/test/iecors.php&quot;</span>);\nxdr.send(<span class=\"hljs-literal\">null</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"164,175"}},{"content":"<pre data-lines=\"178,181\"><code>&#x3000;&#x3000;&#x9274;&#x4e8e;&#x5bfc;&#x81f4;XDR&#x8bf7;&#x6c42;&#x5931;&#x8d25;&#x7684;&#x56e0;&#x7d20;&#x5f88;&#x591a;&#xff0c;&#x56e0;&#x6b64;&#x5efa;&#x8bae;&#x4e0d;&#x8981;&#x5fd8;&#x8bb0;&#x901a;&#x8fc7;onerror&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x6765;&#x6355;&#x83b7;&#x8be5;&#x4e8b;&#x4ef6;&#xff1b;&#x5426;&#x5219;&#xff0c;&#x5373;&#x4f7f;&#x8bf7;&#x6c42;&#x5931;&#x8d25;&#x4e5f;&#x4e0d;&#x4f1a;&#x6709;&#x4efb;&#x4f55;&#x63d0;&#x793a;\n\n&#x3000;&#x3000;&#x5728;&#x8bf7;&#x6c42;&#x8fd4;&#x56de;&#x524d;&#x8c03;&#x7528;abort()&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x7ec8;&#x6b62;&#x8bf7;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"178,181"}},{"content":"<pre data-lines=\"182,185\"><code data-lines=\"182,185\">xdr.<span class=\"hljs-built_in\">abort</span>(); <span class=\"hljs-comment\">//&#x7ec8;&#x6b62;&#x8bf7;&#x6c42;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"182,185"}},{"content":"<pre data-lines=\"186,187\"><code>&#x3000;&#x3000;&#x4e0e;XHR&#x4e00;&#x6837;&#xff0c;XDR&#x5bf9;&#x8c61;&#x4e5f;&#x652f;&#x6301;timeout&#x5c5e;&#x6027;&#x4ee5;&#x53ca;ontimeout&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"186,187"}},{"content":"<pre data-lines=\"190,202\"><code data-lines=\"190,202\"><span class=\"hljs-keyword\">var</span> xdr = <span class=\"hljs-keyword\">new</span> XDomainRequest();\nxdr.onload = <span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{\n    alert(xdr.responseText);\n};\nxdr.timeout = <span class=\"hljs-number\">1000</span>;\nxdr.ontimeout = <span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{\n    alert(<span class=\"hljs-string\">&quot;Request took too long.&quot;</span>);\n};\nxdr.open(<span class=\"hljs-string\">&quot;get&quot;</span>, <span class=\"hljs-string\">&quot;https://www.webhuochai.com/test/iecors.php&quot;</span>);\nxdr.send(<span class=\"hljs-literal\">null</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"190,202"}},{"content":"<pre data-lines=\"205,208\"><code>&#x3000;&#x3000;&#x8fd9;&#x4e2a;&#x4f8b;&#x5b50;&#x4f1a;&#x5728;&#x8fd0;&#x884c;1&#x79d2;&#x949f;&#x540e;&#x8d85;&#x65f6;&#xff0c;&#x5e76;&#x968f;&#x5373;&#x8c03;&#x7528;ontimeout&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;\n\n&#x3000;&#x3000;&#x4e3a;&#x652f;&#x6301;POST&#x8bf7;&#x6c42;&#xff0c;XDR&#x5bf9;&#x8c61;&#x63d0;&#x4f9b;&#x4e86;contentType&#x5c5e;&#x6027;&#xff0c;&#x7528;&#x6765;&#x8868;&#x793a;&#x53d1;&#x9001;&#x6570;&#x636e;&#x7684;&#x683c;&#x5f0f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"205,208"}},{"content":"<pre data-lines=\"211,223\"><code data-lines=\"211,223\"><span class=\"hljs-keyword\">var</span> xdr = <span class=\"hljs-keyword\">new</span> XDomainRequest();\nxdr.onload = <span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{\n    alert(xdr.responseText);\n};\nxdr.onerror = <span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{\n    alert(<span class=\"hljs-string\">&quot;An error occurred.&quot;</span>);\n};\nxdr.open(<span class=\"hljs-string\">&quot;post&quot;</span>, <span class=\"hljs-string\">&quot;https://www.webhuochai.com/test/iecors.php&quot;</span>);\nxdr.contentType = <span class=\"hljs-string\">&quot;application/x-www-form-urlencoded&quot;</span>;\nxdr.send(<span class=\"hljs-string\">&quot;name1=value1&amp;name2=value2&quot;</span>);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"211,223"}},{"content":"<pre data-lines=\"226,227\"><code>&#x3000;&#x3000;&#x8fd9;&#x4e2a;&#x5c5e;&#x6027;&#x662f;&#x901a;&#x8fc7;XDR&#x5bf9;&#x8c61;&#x5f71;&#x54cd;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#x7684;&#x552f;&#x4e00;&#x65b9;&#x5f0f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"226,227"}}],"payload":{"tag":"h3","lines":"117,118"}},{"content":"Preflight","children":[{"content":"<pre data-lines=\"232,245\"><code>&#x3000;&#x3000;CORS&#x901a;&#x8fc7;&#x4e00;&#x79cd;&#x53eb;&#x505a;Preflighted Requests(&#x9884;&#x68c0;&#x8bf7;&#x6c42;)&#x7684;&#x900f;&#x660e;&#x670d;&#x52a1;&#x5668;&#x9a8c;&#x8bc1;&#x673a;&#x5236;&#x652f;&#x6301;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x4f7f;&#x7528;&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x5934;&#x90e8;&#x3001;GET&#x6216;POST&#x4e4b;&#x5916;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x4ee5;&#x53ca;&#x4e0d;&#x540c;&#x7c7b;&#x578b;&#x7684;&#x4e3b;&#x4f53;&#x5185;&#x5bb9;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]IE10-&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;\n\n&#x3000;&#x3000;&#x5728;&#x4f7f;&#x7528;&#x4e0b;&#x5217;&#x9ad8;&#x7ea7;&#x9009;&#x9879;&#x6765;&#x53d1;&#x9001;&#x8bf7;&#x6c42;&#x65f6;&#xff0c;&#x5c31;&#x4f1a;&#x5411;&#x670d;&#x52a1;&#x5668;&#x53d1;&#x9001;&#x4e00;&#x4e2a;Preflight&#x8bf7;&#x6c42;&#x3002;&#x8fd9;&#x79cd;&#x8bf7;&#x6c42;&#x4f7f;&#x7528;OPTIONS&#x65b9;&#x6cd5;&#xff0c;&#x53d1;&#x9001;&#x4e0b;&#x5217;&#x5934;&#x90e8;\n\n&#x3000;&#x3000;1&#x3001;Origin:&#x4e0e;&#x7b80;&#x5355;&#x7684;&#x8bf7;&#x6c42;&#x76f8;&#x540c;\n\n&#x3000;&#x3000;2&#x3001;Access-Control-Request-Method:&#x8bf7;&#x6c42;&#x81ea;&#x8eab;&#x4f7f;&#x7528;&#x7684;&#x65b9;&#x6cd5;\n\n&#x3000;&#x3000;3&#x3001;Access-Control-Request-Headers:(&#x53ef;&#x9009;)&#x81ea;&#x5b9a;&#x4e49;&#x7684;&#x5934;&#x90e8;&#x4fe1;&#x606f;&#xff0c;&#x591a;&#x4e2a;&#x5934;&#x90e8;&#x4ee5;&#x9017;&#x53f7;&#x5206;&#x9694;\n\n&#x3000;&#x3000;&#x4ee5;&#x4e0b;&#x662f;&#x4e00;&#x4e2a;&#x5e26;&#x6709;&#x81ea;&#x5b9a;&#x4e49;&#x5934;&#x90e8;NCZ&#x7684;&#x4f7f;&#x7528;POST&#x65b9;&#x6cd5;&#x53d1;&#x9001;&#x7684;&#x8bf7;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"232,245"}},{"content":"<pre data-lines=\"246,251\"><code data-lines=\"246,251\"><span class=\"hljs-params\">Origin:</span> http:<span class=\"hljs-symbol\">//www.nczonline.net</span>\n<span class=\"hljs-params\">Access-Control-Request-MeChod:</span> POST\n<span class=\"hljs-params\">Access-Control-Request-Headers:</span> NCZ\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"246,251"}},{"content":"<pre data-lines=\"252,261\"><code>&#x3000;&#x3000;&#x53d1;&#x9001;&#x8fd9;&#x4e2a;&#x8bf7;&#x6c42;&#x540e;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x53ef;&#x4ee5;&#x51b3;&#x5b9a;&#x662f;&#x5426;&#x5141;&#x8bb8;&#x8fd9;&#x79cd;&#x7c7b;&#x578b;&#x7684;&#x8bf7;&#x6c42;&#x3002;&#x670d;&#x52a1;&#x5668;&#x901a;&#x8fc7;&#x5728;&#x54cd;&#x5e94;&#x4e2d;&#x53d1;&#x9001;&#x5982;&#x4e0b;&#x5934;&#x90e8;&#x4e0e;&#x6d4f;&#x89c8;&#x5668;&#x8fdb;&#x884c;&#x6c9f;&#x901a;\n\n&#x3000;&#x3000;1&#x3001;Access-Control-Allow-Origin:&#x4e0e;&#x7b80;&#x5355;&#x7684;&#x8bf7;&#x6c42;&#x76f8;&#x540c;\n\n&#x3000;&#x3000;2&#x3001;Access-Control-Allow-Methods:&#x5141;&#x8bb8;&#x7684;&#x65b9;&#x6cd5;&#xff0c;&#x591a;&#x4e2a;&#x65b9;&#x6cd5;&#x4ee5;&#x9017;&#x53f7;&#x5206;&#x9694;\n\n&#x3000;&#x3000;3&#x3001;Access-Control-Allow-Headers:&#x5141;&#x8bb8;&#x7684;&#x5934;&#x90e8;&#xff0c;&#x591a;&#x4e2a;&#x5934;&#x90e8;&#x4ee5;&#x9017;&#x53f7;&#x5206;&#x9694;\n\n&#x3000;&#x3000;4&#x3001;Access-Control-Max-Age:&#x5e94;&#x8be5;&#x5c06;&#x8fd9;&#x4e2a;Preflight&#x8bf7;&#x6c42;&#x7f13;&#x5b58;&#x591a;&#x957f;&#x65f6;&#x95f4;(&#x4ee5;&#x79d2;&#x8868;&#x793a;)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"252,261"}},{"content":"<pre data-lines=\"262,268\"><code data-lines=\"262,268\"><span class=\"hljs-variable\">Access</span><span class=\"hljs-operator\">-</span><span class=\"hljs-built_in\">Control</span><span class=\"hljs-operator\">-</span><span class=\"hljs-variable\">Allow</span><span class=\"hljs-operator\">-</span><span class=\"hljs-variable\">Origin</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-variable\">http</span><span class=\"hljs-operator\">://</span><span class=\"hljs-variable\">www</span><span class=\"hljs-operator\">.</span><span class=\"hljs-variable\">nczonline</span><span class=\"hljs-operator\">.</span><span class=\"hljs-variable\">net</span>\n<span class=\"hljs-variable\">Access</span><span class=\"hljs-operator\">-</span><span class=\"hljs-built_in\">Control</span><span class=\"hljs-operator\">-</span><span class=\"hljs-variable\">Allow</span><span class=\"hljs-operator\">-</span><span class=\"hljs-variable\">Methods</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-variable\">POST</span><span class=\"hljs-operator\">,</span> <span class=\"hljs-variable\">GET</span>\n<span class=\"hljs-variable\">Access</span><span class=\"hljs-operator\">-</span><span class=\"hljs-built_in\">Control</span><span class=\"hljs-operator\">-</span><span class=\"hljs-variable\">Allow</span><span class=\"hljs-operator\">-</span><span class=\"hljs-built_in\">Headers</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-variable\">NCZ</span>\n<span class=\"hljs-variable\">Access</span><span class=\"hljs-operator\">-</span><span class=\"hljs-built_in\">Control</span><span class=\"hljs-operator\">-</span><span class=\"hljs-built_in\">Max</span><span class=\"hljs-operator\">-</span><span class=\"hljs-variable\">Age</span><span class=\"hljs-operator\">:</span> <span class=\"hljs-number\">1728000</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"262,268"}},{"content":"<pre data-lines=\"269,270\"><code>&#x3000;&#x3000;Preflight&#x8bf7;&#x6c42;&#x7ed3;&#x675f;&#x540e;&#xff0c;&#x7ed3;&#x679c;&#x5c06;&#x6309;&#x7167;&#x54cd;&#x5e94;&#x4e2d;&#x6307;&#x5b9a;&#x7684;&#x65f6;&#x95f4;&#x7f13;&#x5b58;&#x8d77;&#x6765;&#x3002;&#x800c;&#x4e3a;&#x6b64;&#x4ed8;&#x51fa;&#x7684;&#x4ee3;&#x4ef7;&#x53ea;&#x662f;&#x7b2c;&#x4e00;&#x6b21;&#x53d1;&#x9001;&#x8fd9;&#x79cd;&#x8bf7;&#x6c42;&#x65f6;&#x4f1a;&#x591a;&#x4e00;&#x6b21;HTTP&#x8bf7;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"269,270"}}],"payload":{"tag":"h3","lines":"230,231"}},{"content":"&#x5e26;&#x51ed;&#x636e;&#x8bf7;&#x6c42;","children":[{"content":"<pre data-lines=\"275,280\"><code>&#x3000;&#x3000;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x8de8;&#x6e90;&#x8bf7;&#x6c42;&#x4e0d;&#x63d0;&#x4f9b;&#x51ed;&#x636e;(cookie&#x3001;HTTP&#x8ba4;&#x8bc1;&#x53ca;&#x5ba2;&#x6237;&#x7aef;SSL&#x8bc1;&#x660e;&#x7b49;)&#x3002;&#x901a;&#x8fc7;&#x5c06;withCredentials&#x5c5e;&#x6027;&#x8bbe;&#x7f6e;&#x4e3a;true&#xff0c;&#x53ef;&#x4ee5;&#x6307;&#x5b9a;&#x67d0;&#x4e2a;&#x8bf7;&#x6c42;&#x5e94;&#x8be5;&#x53d1;&#x9001;&#x51ed;&#x636e;\n\n&#x3000;&#x3000;[&#x6ce8;&#x610f;]IE10-&#x6d4f;&#x89c8;&#x5668;&#x4e0d;&#x652f;&#x6301;\n\n&#x3000;&#x3000;&#x5982;&#x679c;&#x670d;&#x52a1;&#x5668;&#x63a5;&#x53d7;&#x5e26;&#x51ed;&#x636e;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x4f1a;&#x7528;&#x4e0b;&#x9762;&#x7684;HTTP&#x5934;&#x90e8;&#x6765;&#x54cd;&#x5e94;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"275,280"}},{"content":"<pre data-lines=\"281,284\"><code data-lines=\"281,284\"><span class=\"hljs-keyword\">Access</span>-Control-Allow-Credentials: <span class=\"hljs-literal\">true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"281,284"}},{"content":"<pre data-lines=\"285,286\"><code>&#x3000;&#x3000;&#x5f00;&#x53d1;&#x8005;&#x5fc5;&#x987b;&#x5728;AJAX&#x8bf7;&#x6c42;&#x4e2d;&#x6253;&#x5f00;withCredentials&#x5c5e;&#x6027;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"285,286"}},{"content":"<pre data-lines=\"287,291\"><code data-lines=\"287,291\">var xhr <span class=\"hljs-operator\">=</span> new XMLHttpRequest()<span class=\"hljs-comment\">;</span>\nxhr.withCredentials <span class=\"hljs-operator\">=</span> true<span class=\"hljs-comment\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"287,291"}},{"content":"<pre data-lines=\"292,295\"><code>&#x3000;&#x3000;&#x5426;&#x5219;&#xff0c;&#x5373;&#x4f7f;&#x670d;&#x52a1;&#x5668;&#x540c;&#x610f;&#x53d1;&#x9001;Cookie&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4e5f;&#x4e0d;&#x4f1a;&#x53d1;&#x9001;&#x3002;&#x6216;&#x8005;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x8981;&#x6c42;&#x8bbe;&#x7f6e;Cookie&#xff0c;&#x6d4f;&#x89c8;&#x5668;&#x4e5f;&#x4e0d;&#x4f1a;&#x5904;&#x7406;\n\n&#x3000;&#x3000;&#x4f46;&#x662f;&#xff0c;&#x5982;&#x679c;&#x7701;&#x7565;withCredentials&#x8bbe;&#x7f6e;&#xff0c;&#x6709;&#x7684;&#x6d4f;&#x89c8;&#x5668;&#x8fd8;&#x662f;&#x4f1a;&#x4e00;&#x8d77;&#x53d1;&#x9001;Cookie&#x3002;&#x8fd9;&#x65f6;&#xff0c;&#x53ef;&#x4ee5;&#x663e;&#x5f0f;&#x5173;&#x95ed;withCredentials\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"292,295"}},{"content":"<pre data-lines=\"296,299\"><code data-lines=\"296,299\"><span class=\"hljs-attr\">xhr.withCredentials</span> = <span class=\"hljs-literal\">false</span><span class=\"hljs-comment\">;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"296,299"}},{"content":"<pre data-lines=\"300,303\"><code>&#x3000;&#x3000;&#x5982;&#x679c;&#x53d1;&#x9001;&#x7684;&#x662f;&#x5e26;&#x51ed;&#x636e;&#x7684;&#x8bf7;&#x6c42;&#xff0c;&#x4f46;&#x670d;&#x52a1;&#x5668;&#x7684;&#x54cd;&#x5e94;&#x4e2d;&#x6ca1;&#x6709;&#x5305;&#x542b;&#x8fd9;&#x4e2a;&#x5934;&#x90e8;&#xff0c;&#x90a3;&#x4e48;&#x6d4f;&#x89c8;&#x5668;&#x5c31;&#x4e0d;&#x4f1a;&#x628a;&#x54cd;&#x5e94;&#x4ea4;&#x7ed9;javascript(&#x4e8e;&#x662f;&#xff0c;responseText&#x4e2d;&#x5c06;&#x662f;&#x7a7a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;status&#x7684;&#x503c;&#x4e3a;0&#xff0c;&#x800c;&#x4e14;&#x4f1a;&#x8c03;&#x7528;onerror()&#x4e8b;&#x4ef6;&#x5904;&#x7406;&#x7a0b;&#x5e8f;)&#x3002;&#x53e6;&#x5916;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x8fd8;&#x53ef;&#x4ee5;&#x5728;Preflight&#x54cd;&#x5e94;&#x4e2d;&#x53d1;&#x9001;&#x8fd9;&#x4e2a;HTTP&#x5934;&#x90e8;&#xff0c;&#x8868;&#x793a;&#x5141;&#x8bb8;&#x6e90;&#x53d1;&#x9001;&#x5e26;&#x51ed;&#x636e;&#x7684;&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;&#x5982;&#x679c;&#x8981;&#x53d1;&#x9001;Cookie&#xff0c;Access-Control-Allow-Origin&#x5c31;&#x4e0d;&#x80fd;&#x8bbe;&#x4e3a;&#x661f;&#x53f7;&#xff0c;&#x5fc5;&#x987b;&#x6307;&#x5b9a;&#x660e;&#x786e;&#x7684;&#x3001;&#x4e0e;&#x8bf7;&#x6c42;&#x7f51;&#x9875;&#x4e00;&#x81f4;&#x7684;&#x57df;&#x540d;&#x3002;&#x540c;&#x65f6;&#xff0c;Cookie&#x4f9d;&#x7136;&#x9075;&#x5faa;&#x540c;&#x6e90;&#x653f;&#x7b56;&#xff0c;&#x53ea;&#x6709;&#x7528;&#x670d;&#x52a1;&#x5668;&#x57df;&#x540d;&#x8bbe;&#x7f6e;&#x7684;Cookie&#x624d;&#x4f1a;&#x4e0a;&#x4f20;&#xff0c;&#x5176;&#x4ed6;&#x57df;&#x540d;&#x7684;Cookie&#x5e76;&#x4e0d;&#x4f1a;&#x4e0a;&#x4f20;&#xff0c;&#x4e14;(&#x8de8;&#x6e90;)&#x539f;&#x7f51;&#x9875;&#x4ee3;&#x7801;&#x4e2d;&#x7684;document.cookie&#x4e5f;&#x65e0;&#x6cd5;&#x8bfb;&#x53d6;&#x670d;&#x52a1;&#x5668;&#x57df;&#x540d;&#x4e0b;&#x7684;Cookie\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"300,303"}}],"payload":{"tag":"h3","lines":"273,274"}},{"content":"&#x8de8;&#x6d4f;&#x89c8;&#x5668;","children":[{"content":"<pre data-lines=\"308,309\"><code>&#x3000;&#x3000;&#x5373;&#x4f7f;&#x6d4f;&#x89c8;&#x5668;&#x5bf9;CORS&#x7684;&#x652f;&#x6301;&#x7a0b;&#x5ea6;&#x5e76;&#x4e0d;&#x90fd;&#x4e00;&#x6837;&#xff0c;&#x4f46;&#x6240;&#x6709;&#x6d4f;&#x89c8;&#x5668;&#x90fd;&#x652f;&#x6301;&#x7b80;&#x5355;&#x7684;(&#x975e;Preflight&#x548c;&#x4e0d;&#x5e26;&#x51ed;&#x636e;&#x7684;)&#x8bf7;&#x6c42;&#xff0c;&#x56e0;&#x6b64;&#x6709;&#x5fc5;&#x8981;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x8de8;&#x6d4f;&#x89c8;&#x5668;&#x7684;&#x65b9;&#x6848;&#x3002;&#x68c0;&#x6d4b;XHR&#x662f;&#x5426;&#x652f;&#x6301;CORS&#x7684;&#x6700;&#x7b80;&#x5355;&#x65b9;&#x5f0f;&#xff0c;&#x5c31;&#x662f;&#x68c0;&#x67fb;&#x662f;&#x5426;&#x5b58;&#x5728;withCredentials&#x5c5e;&#x6027;&#x3002;&#x518d;&#x7ed3;&#x5408;&#x68c0;&#x6d4b;XDomainRequest&#x5bf9;&#x8c61;&#x662f;&#x5426;&#x5b58;&#x5728;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x517c;&#x987e;&#x6240;&#x6709;&#x6d4f;&#x89c8;&#x5668;&#x4e86;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"308,309"}},{"content":"<pre data-lines=\"312,326\"><code data-lines=\"312,326\">function createCORSRequest(<span class=\"hljs-function\"><span class=\"hljs-keyword\">method</span>, <span class=\"hljs-title\">url</span>)</span>{\n    var xhr = new XMLHttpRequest();\n    <span class=\"hljs-regexp\">//</span>&#x6807;&#x51c6;&#x6d4f;&#x89c8;&#x5668;\n    <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-string\">&quot;withCredentials&quot;</span> in xhr){\n        xhr.open(<span class=\"hljs-function\"><span class=\"hljs-keyword\">method</span>, <span class=\"hljs-title\">url</span>, <span class=\"hljs-title\">true</span>)</span>;\n    //IE10-&#x6d4f;&#x89c8;&#x5668;\n    }<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span>(typeof XDomainRequest != <span class=\"hljs-string\">&quot;undefined&quot;</span>){\n        xhr = new XDomainRequest();\n        xhr.open(<span class=\"hljs-function\"><span class=\"hljs-keyword\">method</span>, <span class=\"hljs-title\">url</span>)</span>; \n    } \n    <span class=\"hljs-keyword\">return</span> xhr;\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"312,326"}},{"content":"<pre data-lines=\"329,340\"><code>&#x3000;&#x3000;&#x975e;IE&#x6d4f;&#x89c8;&#x5668;&#x4e2d;&#x7684;XMLHttpRequest&#x5bf9;&#x8c61;&#x4e0e;IE&#x4e2d;&#x7684;XDomainRequest&#x5bf9;&#x8c61;&#x7c7b;&#x4f3c;&#xff0c;&#x90fd;&#x63d0;&#x4f9b;&#x4e86;&#x591f;&#x7528;&#x7684;&#x63a5;&#x53e3;&#xff0c;&#x56e0;&#x6b64;&#x4ee5;&#x4e0a;&#x6a21;&#x5f0f;&#x8fd8;&#x662f;&#x76f8;&#x5f53;&#x6709;&#x7528;&#x7684;&#x3002;&#x8fd9;&#x4e24;&#x4e2a;&#x5bf9;&#x8c61;&#x5171;&#x540c;&#x7684;&#x5c5e;&#x6027;/&#x65b9;&#x6cd5;&#x5982;&#x4e0b;\n\n&#x3000;&#x3000;1&#x3001;abort():&#x7528;&#x4e8e;&#x505c;&#x6b62;&#x6b63;&#x5728;&#x8fdb;&#x884c;&#x7684;&#x8bf7;&#x6c42;\n\n&#x3000;&#x3000;2&#x3001;onerror:&#x7528;&#x4e8e;&#x66ff;&#x4ee3; onreadystatechange &#x68c0;&#x6d4b;&#x9519;&#x8bef;\n\n&#x3000;&#x3000;3&#x3001;onload:&#x7528;&#x4e8e;&#x66ff;&#x4ee3; onreadystatechange &#x68c0;&#x6d4b;&#x6210;&#x529f;\n\n&#x3000;&#x3000;4&#x3001;responseText:&#x7528;&#x4e8e;&#x53d6;&#x5f97;&#x54cd;&#x5e94;&#x5185;&#x5bb9;\n\n&#x3000;&#x3000;5&#x3001;send():&#x7528;&#x4e8e;&#x53d1;&#x9001;&#x8bf7;&#x6c42;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"329,340"}}],"payload":{"tag":"h3","lines":"306,307"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
