<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x300a;Django Web&#x6846;&#x67b6;&#x6559;&#x5b66;&#x7b14;&#x8bb0;&#x300b;","children":[{"content":"Django&#x4e2d;&#x7684;&#x7528;&#x6237;&#x8ba4;&#x8bc1; (&#x4f7f;&#x7528;Django&#x8ba4;&#x8bc1;&#x7cfb;&#x7edf;)","children":[{"content":"","children":[{"content":"<pre data-lines=\"6,22\"><code data-lines=\"6,22\"><span class=\"hljs-bullet\">-</span> Django&#x5e26;&#x6709;&#x4e00;&#x4e2a;&#x7528;&#x6237;&#x8ba4;&#x8bc1;&#x7cfb;&#x7edf;&#x3002; &#x5b83;&#x5904;&#x7406;&#x7528;&#x6237;&#x8d26;&#x53f7;&#x3001;&#x7ec4;&#x3001;&#x6743;&#x9650;&#x4ee5;&#x53ca;&#x57fa;&#x4e8e;cookie&#x7684;&#x7528;&#x6237;&#x4f1a;&#x8bdd;&#x3002;\n<span class=\"hljs-bullet\">-</span> &#x4f5c;&#x7528;:\n<span class=\"hljs-bullet\">    1.</span> &#x6dfb;&#x52a0;&#x666e;&#x901a;&#x7528;&#x6237;&#x548c;&#x8d85;&#x7ea7;&#x7528;&#x6237;\n<span class=\"hljs-bullet\">    2.</span> &#x4fee;&#x6539;&#x5bc6;&#x7801;\n\n<span class=\"hljs-bullet\">-</span> &#x6587;&#x6863;&#x53c2;&#x89c1;\n  \n<span class=\"hljs-bullet\">-</span> <span class=\"language-xml\">&lt;https://docs.djangoproject.com/en/1.11/topics/auth/&gt;</span>\n  \n<span class=\"hljs-bullet\">-</span> User&#x6a21;&#x578b;&#x7c7b;\n  \n<span class=\"hljs-bullet\">-</span> &#x4f4d;&#x7f6e;: <span class=\"hljs-code\">`from django.contrib.auth.models import User`</span>\n  \n<span class=\"hljs-bullet\">-</span> &#x9ed8;&#x8ba4;user&#x7684;&#x57fa;&#x672c;&#x5c5e;&#x6027;&#x6709;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,22"}},{"content":"<pre data-lines=\"22,34\"><code>| &#x5c5e;&#x6027;&#x540d;       | &#x7c7b;&#x578b;                                                         | &#x662f;&#x5426;&#x5fc5;&#x9009; |\n| ------------ | ------------------------------------------------------------ | -------- |\n| username     | &#x7528;&#x6237;&#x540d;                                                       | &#x662f;       |\n| password     | &#x5bc6;&#x7801;                                                         | &#x662f;       |\n| email        | &#x90ae;&#x7bb1;                                                         | &#x53ef;&#x9009;     |\n| first_name   | &#x540d;                                                           |          |\n| last_name    | &#x59d3;                                                           |          |\n| is_superuser | &#x662f;&#x5426;&#x662f;&#x7ba1;&#x7406;&#x5458;&#x5e10;&#x53f7;(/admin)                                     |          |\n| is_staff     | &#x662f;&#x5426;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;admin&#x7ba1;&#x7406;&#x754c;&#x9762;                                    |          |\n| is_active    | &#x662f;&#x5426;&#x662f;&#x6d3b;&#x8dc3;&#x7528;&#x6237;,&#x9ed8;&#x8ba4;True&#x3002;&#x4e00;&#x822c;&#x4e0d;&#x5220;&#x9664;&#x7528;&#x6237;&#xff0c;&#x800c;&#x662f;&#x5c06;&#x7528;&#x6237;&#x7684;is_active&#x8bbe;&#x4e3a;False&#x3002; |          |\n| last_login   | &#x4e0a;&#x4e00;&#x6b21;&#x7684;&#x767b;&#x5f55;&#x65f6;&#x95f4;                                             |          |\n| date_joined  | &#x7528;&#x6237;&#x521b;&#x5efa;&#x7684;&#x65f6;&#x95f4;                                               |          |\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"22,34"}},{"content":"<pre data-lines=\"35,38\"><code data-lines=\"35,38\"><span class=\"hljs-bullet\">- </span>&#x6570;&#x636e;&#x5e93;&#x8868;&#x73b0;&#x5f62;&#x5f0f;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"35,38"}},{"content":"<pre data-lines=\"39,59\"><code class=\"language-sql\">mysql<span class=\"hljs-operator\">&gt;</span> use myauth;\nmysql<span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-keyword\">desc</span> auth_user;\n<span class=\"hljs-operator\">+</span><span class=\"hljs-comment\">--------------+--------------+------+-----+---------+----------------+</span>\n<span class=\"hljs-operator\">|</span> Field        <span class=\"hljs-operator\">|</span> Type         <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">Null</span> <span class=\"hljs-operator\">|</span> Key <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">Default</span> <span class=\"hljs-operator\">|</span> Extra          <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">+</span><span class=\"hljs-comment\">--------------+--------------+------+-----+---------+----------------+</span>\n<span class=\"hljs-operator\">|</span> id           <span class=\"hljs-operator\">|</span> <span class=\"hljs-type\">int</span>(<span class=\"hljs-number\">11</span>)      <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span> PRI <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span> auto_increment <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> password     <span class=\"hljs-operator\">|</span> <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">128</span>) <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> last_login   <span class=\"hljs-operator\">|</span> datetime(<span class=\"hljs-number\">6</span>)  <span class=\"hljs-operator\">|</span> YES  <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> is_superuser <span class=\"hljs-operator\">|</span> tinyint(<span class=\"hljs-number\">1</span>)   <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> username     <span class=\"hljs-operator\">|</span> <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">150</span>) <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span> UNI <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> first_name   <span class=\"hljs-operator\">|</span> <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">30</span>)  <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> last_name    <span class=\"hljs-operator\">|</span> <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">30</span>)  <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> email        <span class=\"hljs-operator\">|</span> <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">254</span>) <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> is_staff     <span class=\"hljs-operator\">|</span> tinyint(<span class=\"hljs-number\">1</span>)   <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> is_active    <span class=\"hljs-operator\">|</span> tinyint(<span class=\"hljs-number\">1</span>)   <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">|</span> date_joined  <span class=\"hljs-operator\">|</span> datetime(<span class=\"hljs-number\">6</span>)  <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NO</span>   <span class=\"hljs-operator\">|</span>     <span class=\"hljs-operator\">|</span> <span class=\"hljs-keyword\">NULL</span>    <span class=\"hljs-operator\">|</span>                <span class=\"hljs-operator\">|</span>\n<span class=\"hljs-operator\">+</span><span class=\"hljs-comment\">--------------+--------------+------+-----+---------+----------------+</span>\n<span class=\"hljs-number\">11</span> <span class=\"hljs-keyword\">rows</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-keyword\">set</span> (<span class=\"hljs-number\">0.00</span> sec)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"39,59"}}],"payload":{"tag":"h3","lines":"5,6"}},{"content":"auth&#x57fa;&#x672c;&#x6a21;&#x578b;&#x64cd;&#x4f5c;:","children":[{"content":"&#x521b;&#x5efa;&#x7528;&#x6237;","children":[{"content":"&#x521b;&#x5efa;&#x666e;&#x901a;&#x7528;&#x6237;create_user<pre data-lines=\"63,68\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.contrib.auth <span class=\"hljs-keyword\">import</span> models\nuser = models.User.objects.create_user(username=<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x540d;&apos;</span>, password=<span class=\"hljs-string\">&apos;&#x5bc6;&#x7801;&apos;</span>, email=<span class=\"hljs-string\">&apos;&#x90ae;&#x7bb1;&apos;</span>,...)\n\n</code></pre>","children":[],"payload":{"tag":"li","lines":"62,68"}},{"content":"&#x521b;&#x5efa;&#x8d85;&#x7ea7;&#x7528;&#x6237;create_superuser<pre data-lines=\"69,73\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.contrib.auth <span class=\"hljs-keyword\">import</span> models\nuser = models.User.objects.create_superuser(username=<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x540d;&apos;</span>, password=<span class=\"hljs-string\">&apos;&#x5bc6;&#x7801;&apos;</span>, email=<span class=\"hljs-string\">&apos;&#x90ae;&#x7bb1;&apos;</span>,...)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"68,73"}}],"payload":{"tag":"li","lines":"61,73"}},{"content":"&#x5220;&#x9664;&#x7528;&#x6237;<pre data-lines=\"74,85\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.contrib.auth <span class=\"hljs-keyword\">import</span> models\n<span class=\"hljs-keyword\">try</span>:\n    user = models.User.objects.get(username=<span class=\"hljs-string\">&apos;&#x7528;&#x6237;&#x540d;&apos;</span>)\n    user.is_active = <span class=\"hljs-literal\">False</span>  <span class=\"hljs-comment\"># &#x8bb0;&#x5f53;&#x524d;&#x7528;&#x6237;&#x65e0;&#x6548;</span>\n    user.save()\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x5220;&#x9664;&#x666e;&#x901a;&#x7528;&#x6237;&#x6210;&#x529f;&#xff01;&quot;</span>)\n<span class=\"hljs-keyword\">except</span>:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x5220;&#x9664;&#x666e;&#x901a;&#x7528;&#x6237;&#x5931;&#x8d25;&quot;</span>)\n<span class=\"hljs-keyword\">return</span> HttpResponseRedirect(<span class=\"hljs-string\">&apos;/user/info&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"73,85"}},{"content":"&#x4fee;&#x6539;&#x5bc6;&#x7801;set_password<pre data-lines=\"86,96\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.contrib.auth <span class=\"hljs-keyword\">import</span> models\n<span class=\"hljs-keyword\">try</span>:\n    user = models.User.objects.get(username=<span class=\"hljs-string\">&apos;xiaonao&apos;</span>)\n    user.set_password(<span class=\"hljs-string\">&apos;654321&apos;</span>)\n    user.save()\n    <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&quot;&#x4fee;&#x6539;&#x5bc6;&#x7801;&#x6210;&#x529f;&#xff01;&quot;</span>)\n<span class=\"hljs-keyword\">except</span>:\n    <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&quot;&#x4fee;&#x6539;&#x5bc6;&#x7801;&#x5931;&#x8d25;&#xff01;&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"85,96"}},{"content":"&#x68c0;&#x67e5;&#x5bc6;&#x7801;&#x662f;&#x5426;&#x6b63;&#x786e;check_password<pre data-lines=\"97,108\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.contrib.auth <span class=\"hljs-keyword\">import</span> models\n<span class=\"hljs-keyword\">try</span>:\n    user = models.User.objects.get(username=<span class=\"hljs-string\">&apos;xiaonao&apos;</span>)\n    <span class=\"hljs-keyword\">if</span> user.check_password(<span class=\"hljs-string\">&apos;654321&apos;</span>):  <span class=\"hljs-comment\"># &#x6210;&#x529f;&#x8fd4;&#x56de;True,&#x5931;&#x8d25;&#x8fd4;&#x56de;False</span>\n        <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&quot;&#x5bc6;&#x7801;&#x6b63;&#x786e;&quot;</span>)\n    <span class=\"hljs-keyword\">else</span>:\n        <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&quot;&#x5bc6;&#x7801;&#x9519;&#x8bef;&quot;</span>)\n<span class=\"hljs-keyword\">except</span>: \n    <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&quot;&#x6ca1;&#x6709;&#x6b64;&#x7528;&#x6237;&#xff01;&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"li","lines":"96,109"}}],"payload":{"tag":"h3","lines":"60,61"}},{"content":"auth&#x6269;&#x5c55;&#x5b57;&#x6bb5; - &#x9879;&#x76ee;&#x8868;&#x521d;&#x59cb;&#x5316;&#x65f6;&#x51b3;&#x5b9a;","children":[{"content":"<pre data-lines=\"111,134\"><code class=\"language-python\">&#x5982;&#x679c;&#x9700;&#x8981;&#x5728;&#x9ed8;&#x8ba4;auth&#x8868;&#x4e0a;&#x6269;&#x5c55;&#x65b0;&#x7684;&#x5b57;&#x6bb5;&#xff0c;&#x5982;phone\n<span class=\"hljs-number\">1</span>&#xff0c;&#x6dfb;&#x52a0;&#x65b0;&#x7684;&#x5e94;&#x7528;\n<span class=\"hljs-number\">2</span>&#xff0c;&#x5b9a;&#x4e49;&#x6a21;&#x578b;&#x7c7b; &#x7ee7;&#x627f; AbstractUser\n<span class=\"hljs-number\">3</span>&#xff0c;settings.py&#x4e2d; &#x6307;&#x660e; AUTH_USER_MODEL = <span class=\"hljs-string\">&apos;&#x5e94;&#x7528;&#x540d;.&#x7c7b;&#x540d;&apos;</span>\n\n<span class=\"hljs-comment\">#models.py&#x6848;&#x4f8b;</span>\n<span class=\"hljs-keyword\">from</span> django.db <span class=\"hljs-keyword\">import</span> models\n<span class=\"hljs-keyword\">from</span> django.contrib.auth.models <span class=\"hljs-keyword\">import</span> AbstractUser\n\n<span class=\"hljs-comment\"># Create your models here.</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">UserInfo</span>(<span class=\"hljs-title class_ inherited__\">AbstractUser</span>):\n\n    phone = models.CharField(max_length=<span class=\"hljs-number\">11</span>, default=<span class=\"hljs-string\">&apos;&apos;</span>)\n    \n<span class=\"hljs-comment\">#settings.py&#x6dfb;&#x52a0;&#x914d;&#x7f6e;</span>\nAUTH_USER_MODEL = <span class=\"hljs-string\">&apos;user.UserInfo&apos;</span>\n\n<span class=\"hljs-comment\">#&#x6dfb;&#x52a0;&#x7528;&#x6237;</span>\n<span class=\"hljs-keyword\">from</span> user.models <span class=\"hljs-keyword\">import</span> UserInfo\nUserInfo.objects.create_user(username=<span class=\"hljs-string\">&apos;guoxiao&apos;</span>, password=<span class=\"hljs-string\">&apos;123456&apos;</span>, phone=<span class=\"hljs-string\">&apos;13488871101&apos;</span>)\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"111,134"}}],"payload":{"tag":"h3","lines":"109,110"}}],"payload":{"tag":"h2","lines":"3,4"}},{"content":"&#x7535;&#x5b50;&#x90ae;&#x4ef6;&#x53d1;&#x9001;","children":[{"content":"<pre data-lines=\"137,148\"><code data-lines=\"137,148\"><span class=\"hljs-bullet\">-</span> &#x5229;&#x7528;QQ&#x90ae;&#x7bb1;&#x53d1;&#x9001;&#x7535;&#x5b50;&#x90ae;&#x4ef6;\n<span class=\"hljs-bullet\">-</span> django.core.mail &#x5b50;&#x5305;&#x5c01;&#x88c5;&#x4e86; &#x7535;&#x5b50;&#x90ae;&#x4ef6;&#x7684;&#x81ea;&#x52a8;&#x53d1;&#x9001;SMTP&#x534f;&#x8bae;\n<span class=\"hljs-bullet\">-</span> &#x524d;&#x5176;&#x51c6;&#x5907;:\n<span class=\"hljs-bullet\">  1.</span> &#x7533;&#x8bf7;QQ&#x53f7;\n<span class=\"hljs-bullet\">  2.</span> &#x7528;QQ&#x53f7;&#x767b;&#x9646;QQ&#x90ae;&#x7bb1;&#x5e76;&#x4fee;&#x6539;&#x8bbe;&#x7f6e;\n<span class=\"hljs-bullet\">     -</span> &#x7528;&#x7533;&#x8bf7;&#x5230;&#x7684;QQ&#x53f7;&#x548c;&#x5bc6;&#x7801;&#x767b;&#x9646;&#x5230; <span class=\"language-xml\">&lt;https://mail.qq.com/&gt;</span>\n<span class=\"hljs-bullet\">     -</span> &#x4fee;&#x6539; <span class=\"hljs-code\">`QQ&#x90ae;&#x7bb1;-&gt;&#x8bbe;&#x7f6e;-&gt;&#x5e10;&#x6237;-&gt;&#x201c;POP3/IMAP......&#x670d;&#x52a1;&#x201d;`</span>\n<span class=\"hljs-bullet\">  3.</span> &#x8bbe;&#x7f6e;Django&#x670d;&#x52a1;&#x5668;&#x7aef;&#x7684;&#xff0c;&#x7528;&#x7b80;&#x5355;&#x90ae;&#x4ef6;&#x4f20;&#x8f93;&#x534f;&#x8bae;SMTP(Simple Mail Transfer Protocol) &#x53d1;&#x9001;&#x7535;&#x5b50;&#x90ae;&#x4ef6;\n<span class=\"hljs-bullet\">-</span> settings.py &#x8bbe;&#x7f6e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"137,148"}},{"content":"<pre data-lines=\"149,158\"><code class=\"language-python\"><span class=\"hljs-comment\"># &#x53d1;&#x9001;&#x90ae;&#x4ef6;&#x8bbe;&#x7f6e;</span>\nEMAIL_BACKEND = <span class=\"hljs-string\">&apos;django.core.mail.backends.smtp.EmailBackend&apos;</span> <span class=\"hljs-comment\"># &#x56fa;&#x5b9a;&#x5199;&#x6cd5;</span>\nEMAIL_HOST = <span class=\"hljs-string\">&apos;smtp.qq.com&apos;</span> <span class=\"hljs-comment\"># &#x817e;&#x8baf;QQ&#x90ae;&#x7bb1; SMTP &#x670d;&#x52a1;&#x5668;&#x5730;&#x5740;</span>\nEMAIL_PORT = <span class=\"hljs-number\">25</span>  <span class=\"hljs-comment\"># SMTP&#x670d;&#x52a1;&#x7684;&#x7aef;&#x53e3;&#x53f7;</span>\nEMAIL_HOST_USER = <span class=\"hljs-string\">&apos;xxxx@qq.com&apos;</span>  <span class=\"hljs-comment\"># &#x53d1;&#x9001;&#x90ae;&#x4ef6;&#x7684;QQ&#x90ae;&#x7bb1;</span>\nEMAIL_HOST_PASSWORD = <span class=\"hljs-string\">&apos;******&apos;</span>  <span class=\"hljs-comment\"># &#x5728;QQ&#x90ae;&#x7bb1;-&gt;&#x8bbe;&#x7f6e;-&gt;&#x5e10;&#x6237;-&gt;&#x201c;POP3/IMAP......&#x670d;&#x52a1;&#x201d; &#x91cc;&#x5f97;&#x5230;&#x7684;&#x5728;&#x7b2c;&#x4e09;&#x65b9;&#x767b;&#x5f55;QQ&#x90ae;&#x7bb1;&#x6388;&#x6743;&#x7801;</span>\nEMAIL_USE_TLS = <span class=\"hljs-literal\">True</span>  <span class=\"hljs-comment\"># &#x4e0e;SMTP&#x670d;&#x52a1;&#x5668;&#x901a;&#x4fe1;&#x65f6;&#xff0c;&#x662f;&#x5426;&#x542f;&#x52a8;TLS&#x94fe;&#x63a5;(&#x5b89;&#x5168;&#x94fe;&#x63a5;)&#x9ed8;&#x8ba4;false</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"149,158"}},{"content":"<pre data-lines=\"159,162\"><code data-lines=\"159,162\">&#x89c6;&#x56fe;&#x51fd;&#x6570;&#x4e2d;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"159,162"}},{"content":"<pre data-lines=\"163,172\"><code class=\"language-python\"> <span class=\"hljs-keyword\">from</span> django.core <span class=\"hljs-keyword\">import</span> mail\nmail.send_mail(\n            subject,  <span class=\"hljs-comment\">#&#x9898;&#x76ee;</span>\n            message,  <span class=\"hljs-comment\"># &#x6d88;&#x606f;&#x5185;&#x5bb9;</span>\n            from_email,  <span class=\"hljs-comment\"># &#x53d1;&#x9001;&#x8005;[&#x5f53;&#x524d;&#x914d;&#x7f6e;&#x90ae;&#x7bb1;]</span>\n            recipient_list=[<span class=\"hljs-string\">&apos;xxx@qq.com&apos;</span>],  <span class=\"hljs-comment\"># &#x63a5;&#x6536;&#x8005;&#x90ae;&#x4ef6;&#x5217;&#x8868;</span>\n            )\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"163,172"}}],"payload":{"tag":"h2","lines":"135,136"}},{"content":"&#x9879;&#x76ee;&#x90e8;&#x7f72;","children":[{"content":"","children":[{"content":"","children":[{"content":"&#x9879;&#x76ee;&#x90e8;&#x7f72;&#x662f;&#x6307;&#x5728;&#x8f6f;&#x4ef6;&#x5f00;&#x53d1;&#x5b8c;&#x6bd5;&#x540e;&#xff0c;&#x5c06;&#x5f00;&#x53d1;&#x673a;&#x5668;&#x4e0a;&#x8fd0;&#x884c;&#x7684;&#x5f00;&#x53d1;&#x677f;&#x8f6f;&#x4ef6;&#x5b9e;&#x9645;&#x5b89;&#x88c5;&#x5230;&#x670d;&#x52a1;&#x5668;&#x4e0a;&#x8fdb;&#x884c;&#x957f;&#x671f;&#x8fd0;&#x884c;","children":[],"payload":{"tag":"li","lines":"179,180"}},{"content":"&#x90e8;&#x7f72;&#x8981;&#x5206;&#x4ee5;&#x4e0b;&#x51e0;&#x4e2a;&#x6b65;&#x9aa4;&#x8fdb;&#x884c;","children":[{"content":"1. &#x5728;&#x5b89;&#x88c5;&#x673a;&#x5668;&#x4e0a;&#x5b89;&#x88c5;&#x548c;&#x914d;&#x7f6e;&#x540c;&#x7248;&#x672c;&#x7684;&#x6570;&#x636e;&#x5e93;","children":[],"payload":{"tag":"li","lines":"181,182","listIndex":1}},{"content":"2. django &#x9879;&#x76ee;&#x8fc1;&#x79fb;(&#x5728;&#x5b89;&#x88c5;&#x673a;&#x5668;&#x4e0a;&#x914d;&#x7f6e;&#x4e0e;&#x5f00;&#x53d1;&#x73af;&#x5883;&#x76f8;&#x540c;&#x7684;python&#x7248;&#x672c;&#x53ca;&#x4f9d;&#x61d2;&#x7684;&#x5305;)","children":[],"payload":{"tag":"li","lines":"182,183","listIndex":2}},{"content":"3. &#x7528; uwsgi &#x66ff;&#x4ee3;<code>python3 manage.py runserver</code> &#x65b9;&#x6cd5;&#x542f;&#x52a8;&#x670d;&#x52a1;&#x5668;","children":[],"payload":{"tag":"li","lines":"183,184","listIndex":3}},{"content":"4. &#x914d;&#x7f6e; nginx &#x53cd;&#x5411;&#x4ee3;&#x7406;&#x670d;&#x52a1;&#x5668;","children":[],"payload":{"tag":"li","lines":"184,185","listIndex":4}},{"content":"5. &#x7528;nginx &#x914d;&#x7f6e;&#x9759;&#x6001;&#x6587;&#x4ef6;&#x8def;&#x5f84;,&#x89e3;&#x51b3;&#x9759;&#x6001;&#x8def;&#x5f84;&#x95ee;&#x9898;","children":[],"payload":{"tag":"li","lines":"185,187","listIndex":5}}],"payload":{"tag":"li","lines":"180,187"}}],"payload":{"tag":"ul","lines":"179,187"}},{"content":"","children":[{"content":"1. \n<p data-lines=\"187,188\">&#x5b89;&#x88c5;&#x540c;&#x7248;&#x672c;&#x7684;&#x6570;&#x636e;&#x5e93;</p>","children":[{"content":"&#x5b89;&#x88c5;&#x6b65;&#x9aa4;&#x7565;","children":[],"payload":{"tag":"li","lines":"188,190"}}],"payload":{"tag":"li","lines":"187,190","listIndex":1}},{"content":"2. \n<p data-lines=\"190,191\">django &#x9879;&#x76ee;&#x8fc1;&#x79fb;</p>","children":[{"content":"1. \n<p data-lines=\"191,192\">&#x5b89;&#x88c5;python3&amp;pip3</p>","children":[{"content":"<code>&#x24; sudo apt install python3</code>","children":[],"payload":{"tag":"li","lines":"193,194"}}],"payload":{"tag":"li","lines":"191,194","listIndex":1}},{"content":"2. \n<p data-lines=\"194,195\">&#x5b89;&#x88c5;&#x76f8;&#x540c;&#x7248;&#x672c;&#x7684;&#x5305;</p>","children":[{"content":"&#x5bfc;&#x51fa;&#x5f53;&#x524d;&#x6a21;&#x5757;&#x6570;&#x636e;&#x5305;&#x7684;&#x4fe1;&#x606f;:","children":[{"content":"<code>&#x24; pip3 freeze &gt; package_list.txt </code>","children":[],"payload":{"tag":"li","lines":"196,197"}}],"payload":{"tag":"li","lines":"195,197"}},{"content":"&#x5bfc;&#x5165;&#x5230;&#x53e6;&#x4e00;&#x53f0;&#x65b0;&#x4e3b;&#x673a;","children":[{"content":"<code>&#x24; pip3 install -r package_list.txt</code>","children":[],"payload":{"tag":"li","lines":"198,199"}}],"payload":{"tag":"li","lines":"197,199"}}],"payload":{"tag":"li","lines":"194,199","listIndex":2}},{"content":"3. \n<p data-lines=\"199,200\">&#x5c06;&#x5f53;&#x524d;&#x9879;&#x76ee;&#x6e90;&#x4ee3;&#x7801;&#x590d;&#x5236;&#x5230;&#x8fdc;&#x7a0b;&#x4e3b;&#x673a;&#x4e0a;(scp &#x547d;&#x4ee4;)</p>","children":[{"content":"\n<p data-lines=\"201,202\">&#x24; sudo scp &#x5f53;&#x524d;&#x9879;&#x76ee;&#x6e90;&#x4ee3;&#x7801; &#x8fdc;&#x7a0b;&#x4e3b;&#x673a;&#x5730;&#x5740;&#x548c;&#x6587;&#x4ef6;&#x5939;</p>\n<pre data-lines=\"203,207\"><code class=\"language-shell\">sudo scp /home/tarena/django/mysite1 root@88.77.66.55:/home/root/xxx\n&#x8bf7;&#x8f93;&#x5165;root&#x5bc6;&#x7801;&#xff1a;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"201,212"}}],"payload":{"tag":"li","lines":"199,212","listIndex":3}}],"payload":{"tag":"li","lines":"190,212","listIndex":2}}],"payload":{"tag":"ol","lines":"187,212"}}],"payload":{"tag":"h3","lines":"177,178"}},{"content":"WSGI Django&#x5de5;&#x4f5c;&#x73af;&#x5883;&#x90e8;&#x7f72;","children":[{"content":"WSGI (Web Server Gateway Interface)Web&#x670d;&#x52a1;&#x5668;&#x7f51;&#x5173;&#x63a5;&#x53e3;&#xff0c;&#x662f;Python&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x6216;&#x6846;&#x67b6;&#x548c;Web&#x670d;&#x52a1;&#x5668;&#x4e4b;&#x95f4;&#x7684;&#x4e00;&#x79cd;&#x63a5;&#x53e3;&#xff0c;&#x88ab;&#x5e7f;&#x6cdb;&#x4f7f;&#x7528;","children":[],"payload":{"tag":"li","lines":"213,214"}},{"content":"&#x5b83;&#x5b9e;&#x73b0;&#x4e86;WSGI&#x534f;&#x8bae;&#x3001;http&#x7b49;&#x534f;&#x8bae;&#x3002;Nginx&#x4e2d;HttpUwsgiModule&#x7684;&#x4f5c;&#x7528;&#x662f;&#x4e0e;uWSGI&#x670d;&#x52a1;&#x5668;&#x8fdb;&#x884c;&#x4ea4;&#x6362;&#x3002;WSGI&#x662f;&#x4e00;&#x79cd;Web&#x670d;&#x52a1;&#x5668;&#x7f51;&#x5173;&#x63a5;&#x53e3;&#x3002;","children":[],"payload":{"tag":"li","lines":"214,216"}}],"payload":{"tag":"h3","lines":"212,213"}},{"content":"uWSGI &#x7f51;&#x5173;&#x63a5;&#x53e3;&#x914d;&#x7f6e; (ubuntu 18.04 &#x914d;&#x7f6e;)","children":[{"content":"\n<p data-lines=\"217,218\">&#x4f7f;&#x7528; <code>python manage.py runserver</code> &#x901a;&#x5e38;&#x53ea;&#x5728;&#x5f00;&#x53d1;&#x548c;&#x6d4b;&#x8bd5;&#x73af;&#x5883;&#x4e2d;&#x4f7f;&#x7528;&#x3002;</p>","children":[],"payload":{"tag":"li","lines":"217,219"}},{"content":"\n<p data-lines=\"219,220\">&#x5f53;&#x5f00;&#x53d1;&#x7ed3;&#x675f;&#x540e;&#xff0c;&#x5b8c;&#x5584;&#x7684;&#x9879;&#x76ee;&#x4ee3;&#x7801;&#x9700;&#x8981;&#x5728;&#x4e00;&#x4e2a;&#x9ad8;&#x6548;&#x7a33;&#x5b9a;&#x7684;&#x73af;&#x5883;&#x4e2d;&#x8fd0;&#x884c;&#xff0c;&#x8fd9;&#x65f6;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;uWSGI</p>","children":[],"payload":{"tag":"li","lines":"219,221"}},{"content":"\n<p data-lines=\"221,222\">uWSGI&#x662f;WSGI&#x7684;&#x4e00;&#x79cd;,&#x5b83;&#x53ef;&#x4ee5;&#x8ba9;Django&#x3001;Flask&#x7b49;&#x5f00;&#x53d1;&#x7684;web&#x7ad9;&#x70b9;&#x8fd0;&#x884c;&#x5176;&#x4e2d;.</p>","children":[],"payload":{"tag":"li","lines":"221,223"}},{"content":"\n<p data-lines=\"223,224\">&#x5b89;&#x88c5;uWSGI</p>","children":[{"content":"&#x5728;&#x7ebf;&#x5b89;&#x88c5; uwsgi<pre data-lines=\"225,228\"><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> pip3 install uwsgi</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"224,228"}},{"content":"&#x79bb;&#x7ebf;&#x5b89;&#x88c5;","children":[{"content":"1. &#x5728;&#x7ebf;&#x4e0b;&#x8f7d;&#x5b89;&#x88c5;&#x5305;:<pre data-lines=\"230,233\"><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\">pip3 download uwsgi</span>\n</code></pre>","children":[{"content":"&#x4e0b;&#x8f7d;&#x540e;&#x7684;&#x6587;&#x4ef6;&#x4e3a; <code>uwsgi-2.0.18.tar.gz</code>","children":[],"payload":{"tag":"li","lines":"233,234"}}],"payload":{"tag":"li","lines":"229,234","listIndex":1}},{"content":"2. &#x79bb;&#x7ebf;&#x5b89;&#x88c5;<pre data-lines=\"235,240\"><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\">tar -xzvf uwsgi-2.0.18.tar.gz</span>\n<span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">cd</span> uwsgi-2.0.18</span>\n<span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> python3 setup.py install</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"234,241","listIndex":2}}],"payload":{"tag":"li","lines":"228,241"}}],"payload":{"tag":"li","lines":"223,241"}},{"content":"\n<p data-lines=\"241,242\">&#x914d;&#x7f6e;uWSGI</p>","children":[{"content":"\n<p data-lines=\"242,243\">&#x6dfb;&#x52a0;&#x914d;&#x7f6e;&#x6587;&#x4ef6; <code>&#x9879;&#x76ee;&#x6587;&#x4ef6;&#x5939;/uwsgi.ini</code></p>\n<pre data-lines=\"243,246\"><code data-lines=\"243,246\"><span class=\"hljs-bullet\">- </span>&#x5982;: mysite1/uwsgi.ini\n</code></pre>\n<pre data-lines=\"247,267\"><code class=\"language-ini\"><span class=\"hljs-section\">[uwsgi]</span>\n<span class=\"hljs-comment\"># &#x5957;&#x63a5;&#x5b57;&#x65b9;&#x5f0f;&#x7684; IP&#x5730;&#x5740;:&#x7aef;&#x53e3;&#x53f7;</span>\n<span class=\"hljs-comment\"># socket=127.0.0.1:8000</span>\n<span class=\"hljs-comment\"># Http&#x901a;&#x4fe1;&#x65b9;&#x5f0f;&#x7684; IP&#x5730;&#x5740;:&#x7aef;&#x53e3;&#x53f7;</span>\n<span class=\"hljs-attr\">http</span>=<span class=\"hljs-number\">127.0</span>.<span class=\"hljs-number\">0.1</span>:<span class=\"hljs-number\">8000</span>\n<span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x5f53;&#x524d;&#x5de5;&#x4f5c;&#x76ee;&#x5f55;</span>\n<span class=\"hljs-attr\">chdir</span>=/home/tarena/tedu/aid1911/django/day08/mysite7\n<span class=\"hljs-comment\"># &#x9879;&#x76ee;&#x4e2d;wsgi.py&#x6587;&#x4ef6;&#x7684;&#x76ee;&#x5f55;&#xff0c;&#x76f8;&#x5bf9;&#x4e8e;&#x5f53;&#x524d;&#x5de5;&#x4f5c;&#x76ee;&#x5f55;</span>\n<span class=\"hljs-attr\">wsgi-file</span>=mysite7/wsgi.py\n<span class=\"hljs-comment\">#chdir + &apos;/&apos; + wsgi-file &#x627e;&#x5f97;&#x5230;wsgi.py &#x4e24;&#x9879;&#x914d;&#x7f6e;&#x5c31;ok&#x4e86;</span>\n<span class=\"hljs-comment\"># &#x8fdb;&#x7a0b;&#x4e2a;&#x6570;</span>\n<span class=\"hljs-attr\">process</span>=<span class=\"hljs-number\">4</span>\n<span class=\"hljs-comment\"># &#x6bcf;&#x4e2a;&#x8fdb;&#x7a0b;&#x7684;&#x7ebf;&#x7a0b;&#x4e2a;&#x6570;</span>\n<span class=\"hljs-attr\">threads</span>=<span class=\"hljs-number\">2</span>\n<span class=\"hljs-comment\"># &#x670d;&#x52a1;&#x7684;pid&#x8bb0;&#x5f55;&#x6587;&#x4ef6;</span>\n<span class=\"hljs-attr\">pidfile</span>=uwsgi.pid\n<span class=\"hljs-comment\"># &#x670d;&#x52a1;&#x7684;&#x76ee;&#x5fd7;&#x6587;&#x4ef6;&#x4f4d;&#x7f6e;</span>\n<span class=\"hljs-attr\">daemonize</span>=uwsgi.log\n</code></pre>","children":[],"payload":{"tag":"li","lines":"242,267"}},{"content":"\n<p data-lines=\"267,268\">&#x5f00;&#x542f;&#x4e3b;&#x8fdb;&#x7a0b;&#x7ba1;&#x7406;&#x6a21;&#x5f0f;</p>","children":[{"content":"master=true","children":[],"payload":{"tag":"li","lines":"268,270"}}],"payload":{"tag":"li","lines":"267,270"}},{"content":"\n<p data-lines=\"270,271\">&#x4fee;&#x6539;settings.py&#x5c06; DEBUG=True &#x6539;&#x4e3a;DEBUG=False</p>","children":[],"payload":{"tag":"li","lines":"270,272"}},{"content":"\n<p data-lines=\"272,273\">&#x4fee;&#x6539;settings.py &#x5c06;&#x3000;ALLOWED_HOSTS = [] &#x6539;&#x4e3a;&#x3000;ALLOWED_HOSTS = [&apos;&#x7f51;&#x7ad9;&#x57df;&#x540d;&apos;] &#x6216;&#x8005; [&apos;&#x670d;&#x52a1;&#x76d1;&#x542c;&#x7684;ip&#x5730;&#x5740;&apos;]</p>","children":[],"payload":{"tag":"li","lines":"272,274"}}],"payload":{"tag":"li","lines":"241,274"}},{"content":"\n<p data-lines=\"274,275\">uWSGI&#x7684;&#x8fd0;&#x884c;&#x7ba1;&#x7406;</p>","children":[{"content":"\n<p data-lines=\"276,277\">&#x542f;&#x52a8; uwsgi</p>\n<pre data-lines=\"277,281\"><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">cd</span> &#x9879;&#x76ee;&#x6587;&#x4ef6;&#x5939;</span>\n<span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> uwsgi --ini uwsgi.ini</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"276,281"}},{"content":"\n<p data-lines=\"281,282\">&#x505c;&#x6b62; uwsgi</p>\n<pre data-lines=\"282,286\"><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">cd</span> &#x9879;&#x76ee;&#x6587;&#x4ef6;&#x5939;</span>\n<span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> uwsgi --stop uwsgi.pid</span>\n</code></pre>","children":[],"payload":{"tag":"li","lines":"281,286"}},{"content":"\n<p data-lines=\"286,287\">&#x8bf4;&#x660e;:</p>","children":[{"content":"\n<p data-lines=\"288,289\">&#x5f53;uwsgi &#x542f;&#x52a8;&#x540e;,&#x5f53;&#x524d;django&#x9879;&#x76ee;&#x7684;&#x7a0b;&#x5e8f;&#x5df2;&#x53d8;&#x6210;&#x540e;&#x53f0;&#x5b88;&#x62a4;&#x8fdb;&#x7a0b;,&#x5728;&#x5173;&#x95ed;&#x5f53;&#x524d;&#x7ec8;&#x7aef;&#x65f6;&#x6b64;&#x8fdb;&#x7a0b;&#x4e5f;&#x4e0d;&#x4f1a;&#x505c;&#x6b62;&#x3002;</p>","children":[],"payload":{"tag":"li","lines":"288,290"}},{"content":"\n<p data-lines=\"290,291\">&#x82e5;&#x6267;&#x884c; stop &#x64cd;&#x4f5c;&#x5931;&#x8d25;&#xff0c;&#x5219;&#x9700;&#x8981;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x64cd;&#x4f5c;&#x6740;&#x6b7b;&#x8fdb;&#x7a0b;</p>\n<pre data-lines=\"292,300\"><code class=\"language-shell\">ps aux|grep &apos;uwsgi&apos;  -&gt; &#x67e5;&#x770b;uwsgi&#x8fdb;&#x7a0b;\n\ntarena   103408  0.0  0.9 137172 39984 ?        S    10:02   0:01 uwsgi --ini uwsgi.ini\ntarena   103410  0.0  0.9 436200 38552 ?        Sl   10:02   0:00 uwsgi --ini uwsgi.ini\n\nps -ef | grep &apos;uwsgi&apos; | grep -v grep | awk &apos;{print &#x24;2}&apos; | xargs sudo kill -9\n</code></pre>","children":[],"payload":{"tag":"li","lines":"290,303"}}],"payload":{"tag":"li","lines":"286,303"}}],"payload":{"tag":"li","lines":"274,303"}},{"content":"\n<p data-lines=\"303,304\">&#x6d4b;&#x8bd5;:</p>","children":[{"content":"&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x7aef;&#x8f93;&#x5165;<a href=\"http://127.0.0.1:8000\">http://127.0.0.1:8000</a> &#x8fdb;&#x884c;&#x6d4b;&#x8bd5;","children":[],"payload":{"tag":"li","lines":"304,305"}},{"content":"&#x6ce8;&#x610f;&#xff0c;&#x6b64;&#x65f6;&#x7aef;&#x53e3;&#x53f7;&#x4e3a;8000","children":[],"payload":{"tag":"li","lines":"305,307"}}],"payload":{"tag":"li","lines":"303,307"}}],"payload":{"tag":"h3","lines":"216,217"}},{"content":"nginx","children":[{"content":"\n<p data-lines=\"309,310\">&#x53cd;&#x5411;&#x4ee3;&#x7406;&#x914d;&#x7f6e; - [&#x7ec8;&#x7aef;&#x4e2d; nginx -v &#x786e;&#x8ba4;&#x4e00;&#x4e0b;&#x662f;&#x5426;&#x6709;&#x8f93;&#x51fa;  nginx version: nginx/1.14.0 (Ubuntu)]</p>","children":[],"payload":{"tag":"li","lines":"309,310"}},{"content":"\n<p data-lines=\"310,311\">Nginx&#x662f;&#x8f7b;&#x91cf;&#x7ea7;&#x7684;&#x9ad8;&#x6027;&#x80fd;Web&#x670d;&#x52a1;&#x5668;&#xff0c;&#x63d0;&#x4f9b;&#x4e86;&#x8bf8;&#x5982;HTTP&#x4ee3;&#x7406;&#x548c;&#x53cd;&#x5411;&#x4ee3;&#x7406;&#x3001;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x3001;&#x7f13;&#x5b58;&#x7b49;&#x4e00;&#x7cfb;&#x5217;&#x91cd;&#x8981;&#x7279;&#x6027;&#xff0c;&#x5728;&#x5b9e;&#x8df5;&#x4e4b;&#x4e2d;&#x4f7f;&#x7528;&#x5e7f;&#x6cdb;&#x3002;</p>","children":[],"payload":{"tag":"li","lines":"310,312"}},{"content":"\n<p data-lines=\"312,313\">C&#x8bed;&#x8a00;&#x7f16;&#x5199;&#xff0c;&#x6267;&#x884c;&#x6548;&#x7387;&#x9ad8;</p>","children":[],"payload":{"tag":"li","lines":"312,314"}},{"content":"\n<p data-lines=\"314,315\">nginx &#x4f5c;&#x7528;</p>","children":[{"content":"&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#xff0c; &#x591a;&#x53f0;&#x670d;&#x52a1;&#x5668;&#x8f6e;&#x6d41;&#x5904;&#x7406;&#x8bf7;&#x6c42;","children":[],"payload":{"tag":"li","lines":"315,316"}},{"content":"&#x53cd;&#x5411;&#x4ee3;&#x7406;","children":[],"payload":{"tag":"li","lines":"316,318"}}],"payload":{"tag":"li","lines":"314,318"}},{"content":"\n<p data-lines=\"318,319\">&#x539f;&#x7406;:</p>","children":[],"payload":{"tag":"li","lines":"318,320"}},{"content":"\n<p data-lines=\"320,321\">&#x5ba2;&#x6237;&#x7aef;&#x8bf7;&#x6c42;nginx,&#x518d;&#x7531;nginx &#x8bf7;&#x6c42; uwsgi, &#x8fd0;&#x884c;django&#x4e0b;&#x7684;python&#x4ee3;&#x7801;</p>","children":[],"payload":{"tag":"li","lines":"320,322"}},{"content":"\n<p data-lines=\"322,324\">ubuntu &#x4e0b; nginx &#x5b89;&#x88c5;<br>\n&#x24; sudo apt install nginx</p>\n<pre data-lines=\"325,330\"><code class=\"language-shell\">vim /etc/apt/sources.list\n&#x66f4;&#x6539;&#x56fd;&#x5185;&#x6e90;\nsudo apt-get update\n</code></pre>","children":[],"payload":{"tag":"li","lines":"322,331"}},{"content":"\n<p data-lines=\"331,332\">nginx &#x914d;&#x7f6e;</p>","children":[{"content":"&#x4fee;&#x6539;nginx &#x7684;&#x914d;&#x7f6e;&#x6587;&#x4ef6; /etc/nginx/sites-enabled/default","children":[],"payload":{"tag":"li","lines":"332,333"}}],"payload":{"tag":"li","lines":"331,345"}},{"content":"\n<p data-lines=\"345,346\">nginx&#x670d;&#x52a1;&#x63a7;&#x5236;</p>\n<pre data-lines=\"346,351\"><code class=\"language-shell\"><span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> /etc/init.d/nginx start|stop|restart|status</span>\n<span class=\"hljs-meta prompt_\"># </span><span class=\"language-bash\">&#x6216;</span>\n<span class=\"hljs-meta prompt_\">&#x24; </span><span class=\"language-bash\"><span class=\"hljs-built_in\">sudo</span> service nginx start|stop|restart|status</span>\n</code></pre>\n<blockquote data-lines=\"351,352\">\n<p data-lines=\"351,352\">&#x901a;&#x8fc7; start,stop,restart,status &#x53ef;&#x80fd;&#x5b9e;&#x73b0;nginx&#x670d;&#x52a1;&#x7684;&#x542f;&#x52a8;&#x3001;&#x505c;&#x6b62;&#x3001;&#x91cd;&#x542f;&#x3001;&#x67e5;&#x6251;&#x514b;&#x72b6;&#x6001;&#x7b49;&#x64cd;&#x4f5c;</p>\n</blockquote>","children":[],"payload":{"tag":"li","lines":"345,353"}},{"content":"\n<p data-lines=\"353,354\">&#x4fee;&#x6539;uWSGI&#x914d;&#x7f6e;</p>","children":[{"content":"<strong>&#x4fee;&#x6539;<code>&#x9879;&#x76ee;&#x6587;&#x4ef6;&#x5939;/uwsgi.ini</code>&#x4e0b;&#x7684;Http&#x901a;&#x4fe1;&#x65b9;&#x5f0f;&#x6539;&#x4e3a;socket&#x901a;&#x4fe1;&#x65b9;&#x5f0f;</strong>","children":[],"payload":{"tag":"li","lines":"354,355"}},{"content":"<strong>&#x91cd;&#x542f;uWSGI&#x670d;&#x52a1;</strong>","children":[],"payload":{"tag":"li","lines":"362,363"}}],"payload":{"tag":"li","lines":"353,368"}},{"content":"\n<p data-lines=\"368,369\">&#x6d4b;&#x8bd5;:</p>","children":[{"content":"\n<p data-lines=\"369,370\">&#x5728;&#x6d4f;&#x89c8;&#x5668;&#x7aef;&#x8f93;&#x5165;<a href=\"http://127.0.0.1\">http://127.0.0.1</a> &#x8fdb;&#x884c;&#x6d4b;&#x8bd5;</p>","children":[],"payload":{"tag":"li","lines":"369,371"}},{"content":"\n<p data-lines=\"371,372\">&#x6ce8;&#x610f; &#xff1a;</p>\n<pre data-lines=\"373,376\"><code>1&#xff0c;&#x6b64;&#x65f6;&#x7aef;&#x53e3;&#x53f7;&#x4e3a;80(nginx&#x9ed8;&#x8ba4;&#x503c;)\n\n2&#xff0c;**Django&#x4e2d;&#x6709;&#x4efb;&#x4f55;&#x4fee;&#x6539; &#x9700;&#x8981;&#x91cd;&#x542f; uwsgi , &#x5426;&#x5219;&#x4fee;&#x6539;&#x4e0d;&#x751f;&#x6548;**\n</code></pre>","children":[],"payload":{"tag":"li","lines":"371,379"}}],"payload":{"tag":"li","lines":"368,379"}}],"payload":{"tag":"h3","lines":"307,308"}},{"content":"nginx &#x914d;&#x7f6e;&#x9759;&#x6001;&#x6587;&#x4ef6;&#x8def;&#x5f84;","children":[{"content":"\n<p data-lines=\"380,381\">&#x521b;&#x5efa;&#x65b0;&#x8def;&#x5f84;-&#x4e3b;&#x8981;&#x5b58;&#x653e;Django&#x6240;&#x6709;&#x9759;&#x6001;&#x6587;&#x4ef6; &#x5982;&#xff1a; /home/tarena/&#x9879;&#x76ee;&#x540d;_static/</p>","children":[],"payload":{"tag":"li","lines":"380,382"}},{"content":"\n<p data-lines=\"382,383\">&#x5728;Django settings.py &#x4e2d;&#x6dfb;&#x52a0;&#x65b0;&#x914d;&#x7f6e;</p>\n<pre data-lines=\"384,388\"><code class=\"language-python\">STATIC_ROOT = &apos;/home/tarena/&#x9879;&#x76ee;&#x540d;_static/static  \n#&#x6ce8;&#x610f; &#x6b64;&#x914d;&#x7f6e;&#x8def;&#x5f84;&#x4e3a; &#x5b58;&#x653e;&#x6240;&#x6709;&#x6b63;&#x5f0f;&#x73af;&#x5883;&#x4e2d;&#x9700;&#x8981;&#x7684;&#x9759;&#x6001;&#x6587;&#x4ef6;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"382,389"}},{"content":"\n<p data-lines=\"389,390\">&#x8fdb;&#x5165;&#x9879;&#x76ee;&#xff0c;&#x6267;&#x884c;  <strong>python3 manage.py collectstatic</strong> &#x3002;&#x6267;&#x884c;&#x8be5;&#x547d;&#x4ee4;&#x540e;&#xff0c;Django&#x5c06;&#x9879;&#x76ee;&#x91cd;&#x6240;&#x6709;&#x9759;&#x6001;&#x6587;&#x4ef6; &#x590d;&#x5236;&#x5230; STATIC_ROOT &#x4e2d; &#xff0c;&#x5305;&#x62ec;Django&#x5185;&#x5efa;&#x7684;&#x9759;&#x6001;&#x6587;&#x4ef6;&#x3010;&#x5982;admin&#x540e;&#x53f0;&#x7684;&#x6837;&#x5f0f;&#x3011;</p>","children":[],"payload":{"tag":"li","lines":"389,391"}},{"content":"\n<p data-lines=\"391,392\">Nginx&#x914d;&#x7f6e;&#x4e2d;&#x6dfb;&#x52a0;&#x65b0;&#x914d;&#x7f6e;</p>\n<pre data-lines=\"393,405\"><code class=\"language-nginx\"># file : /etc/nginx/sites-enabled/default\n# &#x65b0;&#x6dfb;&#x52a0;location /static &#x8def;&#x7531;&#x914d;&#x7f6e;&#xff0c;&#x91cd;&#x5b9a;&#x5411;&#x5230;&#x6307;&#x5b9a;&#x7684; &#x7b2c;&#x4e00;&#x6b65;&#x521b;&#x5efa;&#x7684;&#x8def;&#x5f84;&#x5373;&#x53ef;\nserver {\n    ...\n    location /static {\n        # root &#x7b2c;&#x4e00;&#x6b65;&#x521b;&#x5efa;&#x6587;&#x4ef6;&#x5939;&#x7684;&#x7edd;&#x5bf9;&#x8def;&#x5f84;,&#x5982;:\n         root /home/tarena/&#x9879;&#x76ee;&#x540d;_static;          \n    }\n    ...      \n}\n</code></pre>","children":[],"payload":{"tag":"li","lines":"391,405"}}],"payload":{"tag":"h3","lines":"379,380"}},{"content":"404/500 &#x754c;&#x9762;","children":[{"content":"<pre data-lines=\"411,416\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.http <span class=\"hljs-keyword\">import</span> Http404\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">xxx_view</span>( ):\n    <span class=\"hljs-keyword\">raise</span> Http404  <span class=\"hljs-comment\"># &#x76f4;&#x63a5;&#x8fd4;&#x56de;404</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"411,416"}}],"payload":{"tag":"h3","lines":"405,406"}},{"content":"&#x90ae;&#x4ef6;&#x544a;&#x8b66;","children":[{"content":"<pre data-lines=\"418,437\"><code data-lines=\"418,437\">- &#x5f53;&#x6b63;&#x5f0f;&#x670d;&#x52a1;&#x5668;&#x4e0a;&#x4ee3;&#x7801;&#x8fd0;&#x884c;&#x6709;&#x62a5;&#x9519;&#x65f6;&#xff0c;&#x53ef;&#x5c06;&#x9519;&#x8bef;&#x8ffd;&#x6eaf;&#x4fe1;&#x606f;&#x53d1;&#x81f3;&#x6307;&#x5b9a;&#x7684;&#x90ae;&#x7bb1;\n\n- &#x914d;&#x7f6e;&#x5982;&#x4e0b; settings.py&#x4e2d;\n\n  ```python\n  <span class=\"hljs-meta\">#&#x5728;&#x57fa;&#x7840;&#x90ae;&#x4ef6;&#x914d;&#x7f6e;&#x4e4b;&#x540e; &#x6dfb;&#x52a0;&#x5982;&#x4e0b;</span>\n  \n  <span class=\"hljs-meta\">#&#x5173;&#x95ed;&#x8c03;&#x8bd5;&#x6a21;&#x5f0f;</span>\n  DEBUG = <span class=\"hljs-literal\">False</span>  \n  \n  <span class=\"hljs-meta\">#&#x9519;&#x8bef;&#x62a5;&#x544a;&#x63a5;&#x6536;&#x65b9;</span>\n  ADMINS = [(<span class=\"hljs-string\">&apos;guoxiaonao&apos;</span>, <span class=\"hljs-string\">&apos;xx xx@example.com&apos;</span>), (<span class=\"hljs-string\">&apos;wanglaoshi&apos;</span>, <span class=\"hljs-string\">&apos;xxxx@example.com&apos;</span>)]\n  \n  <span class=\"hljs-meta\">#&#x53d1;&#x9001;&#x9519;&#x8bef;&#x62a5;&#x544a;&#x65b9;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a; root@localhost&#x8d26;&#x6237;&#xff0c;&#x591a;&#x6570;&#x90ae;&#x4ef6;&#x670d;&#x52a1;&#x5668;&#x4f1a;&#x62d2;&#x7edd;</span>\n  SERVER_EMAIL = <span class=\"hljs-string\">&apos;email&#x914d;&#x7f6e;&#x4e2d;&#x7684;&#x90ae;&#x7bb1;&apos;</span>\n  \n  \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"418,437"}},{"content":"<pre data-lines=\"443,459\"><code data-lines=\"443,459\">```python\n<span class=\"hljs-keyword\">from</span> django.views.decorators.debug <span class=\"hljs-keyword\">import</span> sensitive_variables\n\n<span class=\"hljs-meta\">@sensitive_variables(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;user&apos;</span>, <span class=\"hljs-string\">&apos;pw&apos;</span>, <span class=\"hljs-string\">&apos;cc&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_info</span>(<span class=\"hljs-params\">user</span>):\n    pw = user.pass_word\n    cc = user.credit_card_number\n    name = user.name\n    ...\n<span class=\"hljs-comment\">#&#x6ce8;&#x610f;&#xff1a;</span>\n<span class=\"hljs-comment\">#1 &#x82e5;&#x62a5;&#x9519;&#x90ae;&#x4ef6;&#x4e2d;&#x7275;&#x626f;&#x5230;user,pw,cc&#x7b49;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x7684;&#x503c;&#xff0c;&#x5219;&#x4f1a;&#x5c06;&#x5176;&#x66ff;&#x6362;&#x6210;  *****, &#x800c; name &#x53d8;&#x91cf;&#x8fd8;&#x663e;&#x793a;&#x5176;&#x771f;&#x5b9e;&#x503c;</span>\n<span class=\"hljs-comment\">#2 &#x591a;&#x4e2a;&#x88c5;&#x9970;&#x5668;&#x65f6;&#xff0c;&#x9700;&#x8981;&#x5c06;&#x5176;&#x653e;&#x5728;&#x6700;&#x9876;&#x90e8;</span>\n<span class=\"hljs-comment\">#3 &#x82e5;&#x4e0d;&#x4f20;&#x53c2;&#x6570;&#xff0c;&#x5219;&#x8fc7;&#x6ee4;&#x6240;&#x6709;&#x5c40;&#x90e8;&#x53d8;&#x91cf;&#x7684;&#x503c;</span>\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"443,459"}},{"content":"<pre data-lines=\"462,471\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> django.views.decorators.debug <span class=\"hljs-keyword\">import</span> sensitive_post_parameters\n\n<span class=\"hljs-meta\">@sensitive_post_parameters(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;password&apos;</span>, <span class=\"hljs-string\">&apos;username&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>(<span class=\"hljs-params\">request</span>):\n    s = request.POST[<span class=\"hljs-string\">&apos;username&apos;</span>] + request.POST[<span class=\"hljs-string\">&apos;abcd&apos;</span>]\n\t<span class=\"hljs-comment\">#&apos;abcd&apos; &#x5e76;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x6b64;&#x65f6;&#x5f15;&#x53d1;error</span>\n<span class=\"hljs-comment\">#POST&#x4e2d; username &#x53ca; password&#x7684;&#x503c;&#x4f1a;&#x88ab;&#x66ff;&#x6362;&#x6210;  ******</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"462,471"}},{"content":"<pre data-lines=\"472,480\"><code class=\"language-python\">&#x6ce8;&#x610f;&#xff1a;\nuwsgi &#x542f;&#x52a8;&#x547d;&#x4ee4; &#x4e0d;&#x8981;&#x91cd;&#x590d;&#x6267;&#x884c;&#x3010;&#x91cd;&#x590d;&#x6267;&#x884c;&#xff0c;&#x53ef;&#x80fd;&#x8986;&#x76d6;uwsgi.pid&#x8fdb;&#x7a0b;&#x53f7;&#xff0c;&#x5bfc;&#x81f4;&#x4e8e;&#x505c;&#x6b62;&#x547d;&#x4ee4;&#x5931;&#x6548;&#x3011;\n\n<span class=\"hljs-number\">1</span>&#xff0c;&#x6267;&#x884c;&#x5b8c;&#x4e00;&#x6b21;&#x542f;&#x52a8;&#x540e;&#xff0c;&#x901a;&#x8fc7;ps aux|grep <span class=\"hljs-string\">&apos;uwsgi&apos;</span>&#x68c0;&#x67e5;&#x662f;&#x5426;&#x542f;&#x52a8;&#x6210;&#x529f;\n<span class=\"hljs-number\">2</span>&#xff0c;&#x6ca1;&#x6210;&#x529f; -&gt; &#x68c0;&#x67e5; uwsgi.log \n<span class=\"hljs-number\">3</span>&#xff0c;&#x786e;&#x8ba4;&#x542f;&#x52a8;&#x6210;&#x529f;&#x540e;&#xff0c;&#x5982;&#x679c;&#x8981;&#x505c;&#x6b62;&#xff0c;&#x8bf7;&#x6b63;&#x786e;&#x6267;&#x884c; &#x505c;&#x6b62;&#x547d;&#x4ee4;&#xff1b;&#x5f3a;&#x5236;&#x5173;&#x95ed;&#xff1a;sudo kill -<span class=\"hljs-number\">9</span> &#x7236;&#x8fdb;&#x7a0b;pid \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"472,480"}}],"payload":{"tag":"h3","lines":"417,418"}}],"payload":{"tag":"h2","lines":"175,176"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
