<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(r => {
              setTimeout(r);
            })(function renderToolbar() {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"&#x300a;Django Web&#x6846;&#x67b6;&#x6559;&#x5b66;&#x7b14;&#x8bb0;&#x300b;","children":[{"content":"&#x67e5;&#x8be2;&#x6570;&#x636e;","children":[{"content":"<pre data-lines=\"4,15\"><code data-lines=\"4,15\">- &#x6570;&#x636e;&#x5e93;&#x7684;&#x67e5;&#x8be2;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x7ba1;&#x7406;&#x5668;&#x5bf9;&#x8c61;&#x8fdb;&#x884c; \n- &#x901a;&#x8fc7; MyModel.objects &#x7ba1;&#x7406;&#x5668;&#x65b9;&#x6cd5;&#x8c03;&#x7528;&#x67e5;&#x8be2;&#x63a5;&#x53e3;\n    |<span class=\"hljs-string\"> &#x65b9;&#x6cd5;      </span>|<span class=\"hljs-string\"> &#x8bf4;&#x660e;                              </span>|\n    |<span class=\"hljs-string\"> --------- </span>|<span class=\"hljs-string\"> --------------------------------- </span>|\n    |<span class=\"hljs-string\"> all()     </span>|<span class=\"hljs-string\"> &#x67e5;&#x8be2;&#x5168;&#x90e8;&#x8bb0;&#x5f55;,&#x8fd4;&#x56de;QuerySet&#x67e5;&#x8be2;&#x5bf9;&#x8c61; </span>|\n    |<span class=\"hljs-string\"> get()     </span>|<span class=\"hljs-string\"> &#x67e5;&#x8be2;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x7684;&#x5355;&#x4e00;&#x8bb0;&#x5f55;            </span>|\n    |<span class=\"hljs-string\"> filter()  </span>|<span class=\"hljs-string\"> &#x67e5;&#x8be2;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x7684;&#x591a;&#x6761;&#x8bb0;&#x5f55;            </span>|\n    |<span class=\"hljs-string\"> exclude() </span>|<span class=\"hljs-string\"> &#x67e5;&#x8be2;&#x7b26;&#x5408;&#x6761;&#x4ef6;&#x4e4b;&#x5916;&#x7684;&#x5168;&#x90e8;&#x8bb0;&#x5f55;        </span>|\n    |<span class=\"hljs-string\"> ...       </span>|<span class=\"hljs-string\">                                   </span>|\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,15"}},{"content":"<pre data-lines=\"15,118\"><code data-lines=\"15,118\"><span class=\"hljs-number\">1.</span> <span class=\"hljs-built_in\">all</span>()&#x65b9;&#x6cd5;\n    - &#x65b9;&#x6cd5;: <span class=\"hljs-built_in\">all</span>()\n    - &#x7528;&#x6cd5;: MyModel.objects.<span class=\"hljs-built_in\">all</span>()\n    - &#x4f5c;&#x7528;: &#x67e5;&#x8be2;MyModel&#x5b9e;&#x4f53;&#x4e2d;&#x6240;&#x6709;&#x7684;&#x6570;&#x636e;\n        - &#x7b49;&#x540c;&#x4e8e;\n            - select * <span class=\"hljs-keyword\">from</span> tabel\n    - &#x8fd4;&#x56de;&#x503c;: QuerySet&#x5bb9;&#x5668;&#x5bf9;&#x8c61;,&#x5185;&#x90e8;&#x5b58;&#x653e; MyModel &#x5b9e;&#x4f8b;\n    - &#x793a;&#x4f8b;:\n        ```python\n        <span class=\"hljs-keyword\">from</span> bookstore <span class=\"hljs-keyword\">import</span> models\n        books = models.Book.objects.<span class=\"hljs-built_in\">all</span>()\n        <span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e66;&#x540d;&quot;</span>, book.title, <span class=\"hljs-string\">&apos;&#x51fa;&#x7248;&#x793e;:&apos;</span>, book.pub)\n        ```\n<span class=\"hljs-number\">2.</span> &#x5728;&#x6a21;&#x578b;&#x7c7b;&#x4e2d;&#x5b9a;&#x4e49; `<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__str__</span>(<span class=\"hljs-params\">self</span>): ` &#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x5c06;&#x81ea;&#x5b9a;&#x4e49;&#x9ed8;&#x8ba4;&#x7684;&#x5b57;&#x7b26;&#x4e32;\n    ```python\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Book</span>(models.Model):\n        title = ...\n        <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__str__</span>(<span class=\"hljs-params\">self</span>):\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;&#x4e66;&#x540d;: %s, &#x51fa;&#x7248;&#x793e;: %s, &#x5b9a;&#x4ef7;: %s&quot;</span> % (<span class=\"hljs-variable language_\">self</span>.title, <span class=\"hljs-variable language_\">self</span>.pub, <span class=\"hljs-variable language_\">self</span>.price)\n    ```\n\n<span class=\"hljs-number\">3.</span> &#x67e5;&#x8be2;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x5217;(&#x5b57;&#x5178;&#x8868;&#x793a;)\n    - &#x65b9;&#x6cd5;: values(<span class=\"hljs-string\">&apos;&#x5217;1&apos;</span>, <span class=\"hljs-string\">&apos;&#x5217;2&apos;</span>)\n    - &#x7528;&#x6cd5;: MyModel.objects.values(...)\n    - &#x4f5c;&#x7528;: &#x67e5;&#x8be2;&#x90e8;&#x5206;&#x5217;&#x7684;&#x6570;&#x636e;&#x5e76;&#x8fd4;&#x56de;\n      \n        - select &#x5217;<span class=\"hljs-number\">1</span>,&#x5217;<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">from</span> xxx\n    - &#x8fd4;&#x56de;&#x503c;: QuerySet\n        - &#x8fd4;&#x56de;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x5bb9;&#x5668;&#xff0c;&#x5bb9;&#x5668;&#x5185;&#x5b58;&#x5b57;&#x5178;&#xff0c;&#x6bcf;&#x4e2a;&#x5b57;&#x5178;&#x4ee3;&#x8868;&#x4e00;&#x6761;&#x6570;&#x636e;,\n        - &#x683c;&#x5f0f;&#x4e3a;: {<span class=\"hljs-string\">&apos;&#x5217;1&apos;</span>: &#x503c;<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&apos;&#x5217;2&apos;</span>: &#x503c;<span class=\"hljs-number\">2</span>}\n    - &#x793a;&#x4f8b;:\n        ```python\n        <span class=\"hljs-keyword\">from</span> bookstore <span class=\"hljs-keyword\">import</span> models\n        books = models.Book.objects.values(<span class=\"hljs-string\">&quot;title&quot;</span>, <span class=\"hljs-string\">&quot;pub&quot;</span>)\n        <span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e66;&#x540d;&quot;</span>, book[<span class=\"hljs-string\">&quot;title&quot;</span>], <span class=\"hljs-string\">&apos;&#x51fa;&#x7248;&#x793e;:&apos;</span>, book[<span class=\"hljs-string\">&apos;pub&apos;</span>])\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;book=&quot;</span>, book)\n        ```\n<span class=\"hljs-number\">4.</span> &#x67e5;&#x8be2;&#x8fd4;&#x56de;&#x6307;&#x5b9a;&#x5217;&#xff08;&#x5143;&#x7ec4;&#x8868;&#x793a;)\n    - &#x65b9;&#x6cd5;:values_list(<span class=\"hljs-string\">&apos;&#x5217;1&apos;</span>,<span class=\"hljs-string\">&apos;&#x5217;2&apos;</span>)\n    - &#x7528;&#x6cd5;:MyModel.objects.values_list(...)\n    - &#x4f5c;&#x7528;:\n      \n        - &#x8fd4;&#x56de;&#x5143;&#x7ec4;&#x5f62;&#x5f0f;&#x7684;&#x67e5;&#x8be2;&#x7ed3;&#x679c;\n    - &#x8fd4;&#x56de;&#x503c;: QuerySet&#x5bb9;&#x5668;&#x5bf9;&#x8c61;,&#x5185;&#x90e8;&#x5b58;&#x653e; `&#x5143;&#x7ec4;`\n      \n        - &#x4f1a;&#x5c06;&#x67e5;&#x8be2;&#x51fa;&#x6765;&#x7684;&#x6570;&#x636e;&#x5c01;&#x88c5;&#x5230;&#x5143;&#x7ec4;&#x4e2d;,&#x518d;&#x5c01;&#x88c5;&#x5230;&#x67e5;&#x8be2;&#x96c6;&#x5408;QuerySet&#x4e2d;\n    - &#x793a;&#x4f8b;:\n        ```python\n        <span class=\"hljs-keyword\">from</span> bookstore <span class=\"hljs-keyword\">import</span> models\n        books = models.Book.objects.values_list(<span class=\"hljs-string\">&quot;title&quot;</span>, <span class=\"hljs-string\">&quot;pub&quot;</span>)\n        <span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;book=&quot;</span>, book)  <span class=\"hljs-comment\"># (&apos;Python&apos;, &apos;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&apos;)...</span>\n        ```\n    \n<span class=\"hljs-number\">5.</span> &#x6392;&#x5e8f;&#x67e5;&#x8be2;\n    - &#x65b9;&#x6cd5;:order_by\n    - &#x7528;&#x6cd5;:MyModel.objects.order_by(<span class=\"hljs-string\">&apos;-&#x5217;&apos;</span>,<span class=\"hljs-string\">&apos;&#x5217;&apos;</span>)\n    - &#x4f5c;&#x7528;:\n      \n        - &#x4e0e;<span class=\"hljs-built_in\">all</span>()&#x65b9;&#x6cd5;&#x4e0d;&#x540c;&#xff0c;&#x5b83;&#x4f1a;&#x7528;SQL &#x8bed;&#x53e5;&#x7684;ORDER BY &#x5b50;&#x53e5;&#x5bf9;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x8fdb;&#x884c;&#x6839;&#x636e;&#x67d0;&#x4e2a;&#x5b57;&#x6bb5;&#x9009;&#x62e9;&#x6027;&#x7684;&#x8fdb;&#x884c;&#x6392;&#x5e8f;\n    - &#x8bf4;&#x660e;:\n    \n    -     &#x9ed8;&#x8ba4;&#x662f;&#x6309;&#x7167;&#x5347;&#x5e8f;&#x6392;&#x5e8f;,&#x964d;&#x5e8f;&#x6392;&#x5e8f;&#x5219;&#x9700;&#x8981;&#x5728;&#x5217;&#x524d;&#x589e;&#x52a0;<span class=\"hljs-string\">&apos;-&apos;</span>&#x8868;&#x793a;\n      \n    - &#x793a;&#x4f8b;: \n        ```python\n        <span class=\"hljs-keyword\">from</span> bookstore <span class=\"hljs-keyword\">import</span> models\n        books = models.Book.objects.order_by(<span class=\"hljs-string\">&quot;price&quot;</span>)\n        <span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e66;&#x540d;:&quot;</span>, book.title, <span class=\"hljs-string\">&apos;&#x5b9a;&#x4ef7;:&apos;</span>, book.price)\n        \n        Book.objects.values(<span class=\"hljs-string\">&apos;title&apos;</span>,<span class=\"hljs-string\">&apos;price&apos;</span>).order_by(<span class=\"hljs-string\">&apos;price&apos;</span>)\n        &#x53ea;&#x8981;&#x8fd4;&#x56de;&#x503c;&#x662f;QuerySet.order_by(<span class=\"hljs-string\">&apos;xxx&apos;</span>)\n        \n        ```\n    \n<span class=\"hljs-number\">6.</span> &#x6839;&#x636e;&#x6761;&#x4ef6;&#x67e5;&#x8be2;&#x591a;&#x6761;&#x8bb0;&#x5f55;\n    - &#x65b9;&#x6cd5;: <span class=\"hljs-built_in\">filter</span>(&#x6761;&#x4ef6;)\n    - &#x8bed;&#x6cd5;: \n        ```python\n        MyModel.objects.<span class=\"hljs-built_in\">filter</span>(&#x5c5e;&#x6027;<span class=\"hljs-number\">1</span>=&#x503c;<span class=\"hljs-number\">1</span>, &#x5c5e;&#x6027;<span class=\"hljs-number\">2</span>=&#x503c;<span class=\"hljs-number\">2</span>)\n        ```\n    - &#x8fd4;&#x56de;&#x503c;:\n      \n        - QuerySet&#x5bb9;&#x5668;&#x5bf9;&#x8c61;,&#x5185;&#x90e8;&#x5b58;&#x653e; MyModel &#x5b9e;&#x4f8b;\n    - &#x8bf4;&#x660e;:\n      \n        - &#x5f53;&#x591a;&#x4e2a;&#x5c5e;&#x6027;&#x5728;&#x4e00;&#x8d77;&#x65f6;&#x4e3a;<span class=\"hljs-string\">&quot;&#x4e0e;&quot;</span>&#x5173;&#x7cfb;&#xff0c;&#x5373;&#x5f53;`Books.objects.<span class=\"hljs-built_in\">filter</span>(price=<span class=\"hljs-number\">20</span>, pub=<span class=\"hljs-string\">&quot;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&quot;</span>)` &#x8fd4;&#x56de;&#x5b9a;&#x4ef7;&#x4e3a;<span class=\"hljs-number\">20</span> `&#x4e14;` &#x51fa;&#x7248;&#x793e;&#x4e3a;<span class=\"hljs-string\">&quot;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&quot;</span>&#x7684;&#x5168;&#x90e8;&#x56fe;&#x4e66;\n    - &#x793a;&#x4f8b;:\n        ```python\n        <span class=\"hljs-comment\"># &#x67e5;&#x8be2;&#x4e66;&#x4e2d;&#x51fa;&#x7248;&#x793e;&#x4e3a;&quot;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&quot;&#x7684;&#x56fe;&#x4e66;</span>\n        <span class=\"hljs-keyword\">from</span> bookstore <span class=\"hljs-keyword\">import</span> models\n        books = models.Book.objects.<span class=\"hljs-built_in\">filter</span>(pub=<span class=\"hljs-string\">&quot;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&quot;</span>)\n    <span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x4e66;&#x540d;:&quot;</span>, book.title)\n    \n        <span class=\"hljs-number\">2.</span> &#x67e5;&#x8be2;Author&#x5b9e;&#x4f53;&#x4e2d;<span class=\"hljs-built_in\">id</span>&#x4e3a;<span class=\"hljs-number\">1</span>&#x5e76;&#x4e14;isActive&#x4e3a;<span class=\"hljs-literal\">True</span>&#x7684;\n            - authors=Author.objects.<span class=\"hljs-built_in\">filter</span>(<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-number\">1</span>,isActive=<span class=\"hljs-literal\">True</span>)\n        ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"15,118"}}],"payload":{"tag":"h3","lines":"3,4"}},{"content":"&#x5b57;&#x6bb5;&#x67e5;&#x627e;","children":[{"content":"<pre data-lines=\"122,134\"><code data-lines=\"122,134\"><span class=\"hljs-literal\">-</span> &#x5b57;&#x6bb5;&#x67e5;&#x8be2;&#x662f;&#x6307;&#x5982;&#x4f55;&#x6307;&#x5b9a;SQL&#x8bed;&#x53e5;&#x4e2d; WHERE &#x5b50;&#x53e5;&#x7684;&#x5185;&#x5bb9;&#x3002;\n<span class=\"hljs-literal\">-</span> &#x5b57;&#x6bb5;&#x67e5;&#x8be2;&#x9700;&#x8981;&#x901a;&#x8fc7;QuerySet&#x7684;filter(), exclude() and get()&#x7684;&#x5173;&#x952e;&#x5b57;&#x53c2;&#x6570;&#x6307;&#x5b9a;&#x3002;\n<span class=\"hljs-literal\">-</span> &#x975e;&#x7b49;&#x503c;&#x6761;&#x4ef6;&#x7684;&#x6784;&#x5efa;,&#x9700;&#x8981;&#x4f7f;&#x7528;&#x5b57;&#x6bb5;&#x67e5;&#x8be2;\n<span class=\"hljs-literal\">-</span> &#x793a;&#x4f8b;:\n    \n    <span class=\"hljs-comment\"># &#x67e5;&#x8be2;&#x4f5c;&#x8005;&#x4e2d;&#x5e74;&#x9f84;&#x5927;&#x4e8e;30</span>\n    Author.objects.filter(age__gt=30)\n    <span class=\"hljs-comment\"># &#x5bf9;&#x5e94;</span>\n    <span class=\"hljs-comment\"># SELECT .... WHERE AGE &gt; 30;</span>\n    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"122,134"}},{"content":"&#x67e5;&#x8be2;&#x8c13;&#x8bcd;","children":[{"content":"<pre data-lines=\"135,175\"><code data-lines=\"135,175\">- &#x6bcf;&#x4e00;&#x4e2a;&#x67e5;&#x8be2;&#x8c13;&#x8bcd;&#x662f;&#x4e00;&#x4e2a;&#x72ec;&#x7acb;&#x7684;&#x67e5;&#x8be2;&#x529f;&#x80fd;\n1. `__exact` : &#x7b49;&#x503c;&#x5339;&#x914d;\n   \n    ```python\n    Author.objects.filter(id__exact=1)\n    # &#x7b49;&#x540c;&#x4e8e;<span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> author <span class=\"hljs-keyword\">where</span> id = <span class=\"hljs-number\">1</span>\n    <span class=\"hljs-symbol\">``</span><span class=\"hljs-symbol\">`\n2. `</span>__contains<span class=\"hljs-symbol\">` : &#x5305;&#x542b;&#x6307;&#x5b9a;&#x503c;\n   \n    `</span><span class=\"hljs-symbol\">``</span>python\n    Author.objects.filter(name__contains=<span class=\"hljs-string\">&apos;w&apos;</span>)\n    # &#x7b49;&#x540c;&#x4e8e; <span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> author <span class=\"hljs-keyword\">where</span> name <span class=\"hljs-keyword\">like</span> <span class=\"hljs-string\">&apos;%w%&apos;</span>\n    <span class=\"hljs-symbol\">``</span><span class=\"hljs-symbol\">`\n3. `</span>__startswith<span class=\"hljs-symbol\">` : &#x4ee5; XXX &#x5f00;&#x59cb;  w%\n3. `</span>__endswith<span class=\"hljs-symbol\">` : &#x4ee5; XXX &#x7ed3;&#x675f;    %w\n3. `</span>__gt<span class=\"hljs-symbol\">` : &#x5927;&#x4e8e;&#x6307;&#x5b9a;&#x503c;\n    `</span><span class=\"hljs-symbol\">``</span>python\n    Author.objects.filer(age__gt=<span class=\"hljs-number\">50</span>)\n    # &#x7b49;&#x540c;&#x4e8e; <span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> author <span class=\"hljs-keyword\">where</span> age &gt; <span class=\"hljs-number\">50</span>\n    <span class=\"hljs-symbol\">``</span><span class=\"hljs-symbol\">`\n4. `</span>__gte<span class=\"hljs-symbol\">` : &#x5927;&#x4e8e;&#x7b49;&#x4e8e;\n5. `</span>__lt<span class=\"hljs-symbol\">` : &#x5c0f;&#x4e8e;\n6. `</span>__lte<span class=\"hljs-symbol\">` : &#x5c0f;&#x4e8e;&#x7b49;&#x4e8e;\n7. `</span>__in<span class=\"hljs-symbol\">` : &#x67e5;&#x627e;&#x6570;&#x636e;&#x662f;&#x5426;&#x5728;&#x6307;&#x5b9a;&#x8303;&#x56f4;&#x5185;\n   \n    - &#x793a;&#x4f8b;\n    `</span><span class=\"hljs-symbol\">``</span>python\n    Author.objects.filter(country__in=[<span class=\"hljs-string\">&apos;&#x4e2d;&#x56fd;&apos;</span>,<span class=\"hljs-string\">&apos;&#x65e5;&#x672c;&apos;</span>,<span class=\"hljs-string\">&apos;&#x97e9;&#x56fd;&apos;</span>])\n    # &#x7b49;&#x540c;&#x4e8e; <span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> author <span class=\"hljs-keyword\">where</span> country <span class=\"hljs-keyword\">in</span> (<span class=\"hljs-string\">&apos;&#x4e2d;&#x56fd;&apos;</span>,<span class=\"hljs-string\">&apos;&#x65e5;&#x672c;&apos;</span>,<span class=\"hljs-string\">&apos;&#x97e9;&#x56fd;&apos;</span>)\n    <span class=\"hljs-symbol\">``</span><span class=\"hljs-symbol\">`\n8. `</span>__range<span class=\"hljs-symbol\">`: &#x67e5;&#x627e;&#x6570;&#x636e;&#x662f;&#x5426;&#x5728;&#x6307;&#x5b9a;&#x7684;&#x533a;&#x95f4;&#x8303;&#x56f4;&#x5185;\n   \n    `</span><span class=\"hljs-symbol\">``</span>python\n    # &#x67e5;&#x627e;&#x5e74;&#x9f84;&#x5728;&#x67d0;&#x4e00;&#x533a;&#x95f4;&#x5185;&#x7684;&#x6240;&#x6709;&#x4f5c;&#x8005;\n    Author.objects.filter(age__range=(<span class=\"hljs-number\">35</span>,<span class=\"hljs-number\">50</span>))\n    # &#x7b49;&#x540c;&#x4e8e; <span class=\"hljs-keyword\">SELECT</span> ... <span class=\"hljs-keyword\">WHERE</span> Author <span class=\"hljs-keyword\">BETWEEN</span> <span class=\"hljs-number\">35</span> <span class=\"hljs-keyword\">and</span> <span class=\"hljs-number\">50</span>;\n    ```\n9. &#x8be6;&#x7ec6;&#x5185;&#x5bb9;&#x53c2;&#x89c1;: &lt;https://docs.djangoproject.com/en/1.11/ref/models/querysets/#field-lookups&gt;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"135,175"}},{"content":"<pre data-lines=\"176,196\"><code data-lines=\"176,196\">- &#x793a;&#x4f8b;\n    ```python\n    MyModel.objects.filter(<span class=\"hljs-attribute\">id__gt</span>=4)\n    # &#x7b49;&#x540c;&#x4e8e; SELECT <span class=\"hljs-built_in\">..</span>. WHERE id &gt; 4;\n    ```\n\n- &#x7ec3;&#x4e60;:\n    1. &#x67e5;&#x8be2;Book&#x8868;&#x4e2d;price&#x5927;&#x4e8e;&#x7b49;&#x4e8e;50&#x7684;&#x4fe1;&#x606f;\n       \n       Book.objects.filter(<span class=\"hljs-attribute\">price__gte</span>=50)\n       \n    2. &#x67e5;&#x8be2;Author&#x8868;&#x4e2d;&#x59d3;&#x738b;&#x7684;&#x4eba;&#x7684;&#x4fe1;&#x606f;\n    \n       Author.objects.filter(<span class=\"hljs-attribute\">name__startswith</span>=<span class=\"hljs-string\">&apos;&#x738b;&apos;</span>)\n    \n    3. &#x67e5;&#x8be2;Author&#x8868;&#x4e2d;Email&#x4e2d;&#x5305;&#x542b;<span class=\"hljs-string\">&quot;w &quot;</span>&#x7684;&#x4eba;&#x7684;&#x4fe1;&#x606f;\n    \n        Author.objects.filter(<span class=\"hljs-attribute\">email__contains</span>=<span class=\"hljs-string\">&apos;w&apos;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"176,196"}},{"content":"<pre data-lines=\"197,232\"><code data-lines=\"197,232\">2. &#x4e0d;&#x7b49;&#x7684;&#x6761;&#x4ef6;&#x7b5b;&#x9009;\n    - &#x8bed;&#x6cd5;:\n        MyModel.objects.exclude(&#x6761;&#x4ef6;)\n    - &#x4f5c;&#x7528;:\n      \n        - &#x8fd4;&#x56de;&#x4e0d;&#x5305;&#x542b;&#x6b64; `&#x6761;&#x4ef6;` &#x7684; &#x5168;&#x90e8;&#x7684;&#x6570;&#x636e;&#x96c6;\n    - &#x793a;&#x4f8b;:\n        - &#x67e5;&#x8be2; `&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&#xff0c;&#x5b9a;&#x4ef7;&#x5927;&#x4e8e;50` &#x4ee5;&#x5916;&#x7684;&#x5168;&#x90e8;&#x56fe;&#x4e66;\n        ```python\n        books = models.Book.objects.exclude(<span class=\"hljs-attribute\">pub</span>=<span class=\"hljs-string\">&quot;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&quot;</span>, <span class=\"hljs-attribute\">price__gt</span>=50)\n        <span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n            <span class=\"hljs-built_in\">print</span>(book)\n        ```\n3. &#x67e5;&#x8be2;&#x6307;&#x5b9a;&#x7684;&#x4e00;&#x6761;&#x6570;&#x636e;\n    - &#x8bed;&#x6cd5;:\n        MyModel.objects.<span class=\"hljs-built_in\">get</span>(&#x6761;&#x4ef6;)\n    - &#x4f5c;&#x7528;&#xff1a;\n      \n        - &#x8fd4;&#x56de;&#x6ee1;&#x8db3;&#x6761;&#x4ef6;&#x7684;&#x552f;&#x4e00;&#x4e00;&#x6761;&#x6570;&#x636e;\n    -  &#x8fd4;&#x56de;&#x503c;:\n      \n        - MyModel &#x5bf9;&#x8c61;\n    - \n    - &#x8bf4;&#x660e;:  -  **&#x4f7f;&#x7528;&#x65f6; &#x8bb0;&#x5f97;  try except**\n        - &#x8be5;&#x65b9;&#x6cd5;&#x53ea;&#x80fd;&#x8fd4;&#x56de;&#x4e00;&#x6761;&#x6570;&#x636e;\n        - &#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x591a;&#x4f59;&#x4e00;&#x6761;&#x6570;&#x636e;&#x5219;&#x629b;&#x51fa;,Model.MultipleObjectsReturned&#x5f02;&#x5e38;\n        - &#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6570;&#x636e;&#x5219;&#x629b;&#x51fa;Model.DoesNotExist&#x5f02;&#x5e38;\n    - &#x793a;&#x4f8b;:\n        ```python\n        <span class=\"hljs-keyword\">from</span> bookstore import models\n        book = models.Book.objects.<span class=\"hljs-built_in\">get</span>(<span class=\"hljs-attribute\">id</span>=1)\n        <span class=\"hljs-built_in\">print</span>(book.title)\n        ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"197,232"}},{"content":"<pre data-lines=\"233,239\"><code class=\"language-python\"><span class=\"hljs-built_in\">filter</span>&#x4e5f;&#x53ef;&#x83b7;&#x53d6;&#x5355;&#x4e2a;&#x6570;&#x636e;\n   bgs = Book.objects.<span class=\"hljs-built_in\">filter</span>(<span class=\"hljs-built_in\">id</span>=<span class=\"hljs-number\">1</span>)\n   <span class=\"hljs-keyword\">if</span> bgs:\n       bg = bgs[<span class=\"hljs-number\">0</span>]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"233,239"}}],"payload":{"tag":"h4","lines":"134,135"}}],"payload":{"tag":"h3","lines":"119,120"}},{"content":"&#x4fee;&#x6539;&#x6570;&#x636e;&#x8bb0;&#x5f55;","children":[{"content":"<pre data-lines=\"243,272\"><code data-lines=\"243,272\">1. &#x4fee;&#x6539;&#x5355;&#x4e2a;&#x5b9e;&#x4f53;&#x7684;&#x67d0;&#x4e9b;&#x5b57;&#x6bb5;&#x503c;&#x7684;&#x6b65;&#x9aa4;:\n    1. &#x67e5;\n        - &#x901a;&#x8fc7; <span class=\"hljs-built_in\">get</span>() &#x5f97;&#x5230;&#x8981;&#x4fee;&#x6539;&#x7684;&#x5b9e;&#x4f53;&#x5bf9;&#x8c61;\n    2. &#x6539;\n        - &#x901a;&#x8fc7; &#x5bf9;&#x8c61;.&#x5c5e;&#x6027; &#x7684;&#x65b9;&#x5f0f;&#x4fee;&#x6539;&#x6570;&#x636e; \n    3. &#x4fdd;&#x5b58;\n        - &#x901a;&#x8fc7; &#x5bf9;&#x8c61;.save() &#x4fdd;&#x5b58;&#x6570;&#x636e;\n    - &#x5982;:\n        ```python\n        <span class=\"hljs-keyword\">from</span> bookstore import models\n        abook = models.Book.objects.<span class=\"hljs-built_in\">get</span>(<span class=\"hljs-attribute\">id</span>=10)\n        abook.market_price = <span class=\"hljs-string\">&quot;10.5&quot;</span>\n        abook.save()\n        ```\n2. &#x901a;&#x8fc7; QuerySet &#x6279;&#x91cf;&#x4fee;&#x6539; &#x5bf9;&#x5e94;&#x7684;&#x5168;&#x90e8;&#x5b57;&#x6bb5;\n    - &#x76f4;&#x63a5;&#x8c03;&#x7528;QuerySet&#x7684;update(&#x5c5e;&#x6027;=&#x503c;) &#x5b9e;&#x73b0;&#x6279;&#x91cf;&#x4fee;&#x6539;\n    - &#x5982;:\n        ```python\n        # &#x5c06; id&#x5927;&#x4e8e;3&#x7684;&#x6240;&#x6709;&#x56fe;&#x4e66;&#x4ef7;&#x683c;&#x5b9a;&#x4e3a;0&#x5143;\n        books = Book.objects.filter(<span class=\"hljs-attribute\">id__gt</span>=3)\n        books.update(<span class=\"hljs-attribute\">price</span>=0)\n        # &#x5c06;&#x6240;&#x6709;&#x4e66;&#x7684;&#x96f6;&#x552e;&#x4ef7;&#x5b9a;&#x4e3a;100&#x5143;\n        books = Book.objects.all()\n        books.update(<span class=\"hljs-attribute\">market_price</span>=100)\n        \n        #&#x8fd4;&#x56de;&#x503c;  &#x6210;&#x529f;&#x66f4;&#x65b0;&#x7684;&#x6570;&#x636e;&#x6761;&#x6570;\n        ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"243,272"}}],"payload":{"tag":"h3","lines":"242,243"}},{"content":"&#x5220;&#x9664;&#x8bb0;&#x5f55;","children":[{"content":"<pre data-lines=\"275,301\"><code data-lines=\"275,301\">- &#x5220;&#x9664;&#x8bb0;&#x5f55;&#x662f;&#x6307;&#x5220;&#x9664;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x4e00;&#x6761;&#x6216;&#x591a;&#x6761;&#x8bb0;&#x5f55;\n- &#x5220;&#x9664;&#x5355;&#x4e2a;MyModel&#x5bf9;&#x8c61;&#x6216;&#x5220;&#x9664;&#x4e00;&#x4e2a;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x96c6;(QuerySet)&#x4e2d;&#x7684;&#x5168;&#x90e8;&#x5bf9;&#x8c61;&#x90fd;&#x662f;&#x8c03;&#x7528; <span class=\"hljs-built_in\">delete</span>()&#x65b9;&#x6cd5;\n<span class=\"hljs-number\">1</span>. &#x5220;&#x9664;&#x5355;&#x4e2a;&#x5bf9;&#x8c61;\n    - &#x6b65;&#x9aa4;\n        <span class=\"hljs-number\">1</span>. &#x67e5;&#x627e;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x5bf9;&#x5e94;&#x7684;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x5bf9;&#x8c61;\n        <span class=\"hljs-number\">2</span>. &#x8c03;&#x7528;&#x8fd9;&#x4e2a;&#x6570;&#x636e;&#x5bf9;&#x8c61;&#x7684;<span class=\"hljs-built_in\">delete</span>()&#x65b9;&#x6cd5;&#x5b9e;&#x73b0;&#x5220;&#x9664;\n    - &#x793a;&#x4f8b;:\n        ```python\n        try:\n            auth = Author.objects.<span class=\"hljs-built_in\">get</span>(id=<span class=\"hljs-number\">1</span>)\n            auth.<span class=\"hljs-built_in\">delete</span>()\n        except:\n            <span class=\"hljs-built_in\">print</span>(&#x5220;&#x9664;&#x5931;&#x8d25;)\n        ```\n<span class=\"hljs-number\">2</span>. &#x5220;&#x9664;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x96c6;\n    - &#x6b65;&#x9aa4;\n        <span class=\"hljs-number\">1</span>. &#x67e5;&#x627e;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x96c6;&#x4e2d;&#x6ee1;&#x8db3;&#x6761;&#x4ef6;&#x7684;&#x5168;&#x90e8;QuerySet&#x67e5;&#x8be2;&#x96c6;&#x5408;&#x5bf9;&#x8c61;\n        <span class=\"hljs-number\">2</span>. &#x8c03;&#x7528;&#x67e5;&#x8be2;&#x96c6;&#x5408;&#x5bf9;&#x8c61;&#x7684;<span class=\"hljs-built_in\">delete</span>()&#x65b9;&#x6cd5;&#x5b9e;&#x73b0;&#x5220;&#x9664;\n    - &#x793a;&#x4f8b;:\n        ```python\n        # &#x5220;&#x9664;&#x5168;&#x90e8;&#x4f5c;&#x8005;&#x4e2d;&#xff0c;&#x5e74;&#x9f84;&#x5927;&#x4e8e;<span class=\"hljs-number\">65</span>&#x7684;&#x5168;&#x90e8;&#x4fe1;&#x606f;\n        auths = Author.objects.<span class=\"hljs-built_in\">filter</span>(age__gt=<span class=\"hljs-number\">65</span>)\n        auths.<span class=\"hljs-built_in\">delete</span>()\n         ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"275,301"}},{"content":"<pre data-lines=\"305,312\"><code class=\"language-python\">&#x5728;&#x6570;&#x636e;&#x8868;&#x4e0a; &#x5197;&#x4f59;&#x4e00;&#x4e2a;&#x5b57;&#x6bb5;  is_active=<span class=\"hljs-literal\">True</span>\n\n&#x2018;&#x5220;&#x9664;&#x65f6;&#x2019;&#x5c06; is_active=<span class=\"hljs-literal\">False</span>\n\n&#x6240;&#x6709;&#x6570;&#x636e;&#x67e5;&#x8be2;&#x7684;&#x5730;&#x65b9;&#xff0c; &#x90fd;&#x8981; &#x8fc7;&#x6ee4;&#x4e00;&#x4e0b;  is_active=<span class=\"hljs-literal\">True</span> &#x7684;&#x6570;&#x636e;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"305,312"}}],"payload":{"tag":"h3","lines":"274,275"}},{"content":"&#x805a;&#x5408;&#x67e5;&#x8be2;","children":[{"content":"<pre data-lines=\"316,390\"><code data-lines=\"316,390\">- &#x805a;&#x5408;&#x67e5;&#x8be2;&#x662f;&#x6307;&#x5bf9;&#x4e00;&#x4e2a;&#x6570;&#x636e;&#x8868;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;&#x5b57;&#x6bb5;&#x7684;&#x6570;&#x636e;&#x8fdb;&#x884c;&#x90e8;&#x5206;&#x6216;&#x5168;&#x90e8;&#x8fdb;&#x884c;&#x7edf;&#x8ba1;&#x67e5;&#x8be2;,&#x67e5;bookstore_book&#x6570;&#x636e;&#x8868;&#x4e2d;&#x7684;&#x5168;&#x90e8;&#x4e66;&#x7684;&#x5e73;&#x5747;&#x4ef7;&#x683c;&#xff0c;&#x67e5;&#x8be2;&#x6240;&#x6709;&#x4e66;&#x7684;&#x603b;&#x4e2a;&#x6570;&#x7b49;,&#x90fd;&#x8981;&#x4f7f;&#x7528;&#x805a;&#x5408;&#x67e5;&#x8be2;\n<span class=\"hljs-number\">1.</span> &#x4e0d;&#x5e26;&#x5206;&#x7ec4;&#x805a;&#x5408;\n    - &#x4e0d;&#x5e26;&#x5206;&#x7ec4;&#x7684;&#x805a;&#x5408;&#x67e5;&#x8be2;&#x662f;&#x6307;&#x5bfc;&#x5c06;&#x5168;&#x90e8;&#x6570;&#x636e;&#x8fdb;&#x884c;&#x96c6;&#x4e2d;&#x7edf;&#x8ba1;&#x67e5;&#x8be2;\n    - &#x805a;&#x5408;&#x51fd;&#x6570;:\n        - &#x5b9a;&#x4e49;&#x6a21;&#x5757;: `django.db.models`\n        - &#x7528;&#x6cd5;: `<span class=\"hljs-keyword\">from</span> django.db.models <span class=\"hljs-keyword\">import</span> *`\n        - &#x805a;&#x5408;&#x51fd;&#x6570;: \n            - Sum, Avg, Count, Max, Min\n    - &#x8bed;&#x6cd5;: \n      \n        - MyModel.objects.aggregate(&#x7ed3;&#x679c;&#x53d8;&#x91cf;&#x540d;=&#x805a;&#x5408;&#x51fd;&#x6570;(<span class=\"hljs-string\">&apos;&#x5217;&apos;</span>))\n    - &#x8fd4;&#x56de;&#x7ed3;&#x679c;:\n        - &#x7531; &#x7ed3;&#x679c;&#x53d8;&#x91cf;&#x540d;&#x548c;&#x503c;&#x7ec4;&#x6210;&#x7684;&#x5b57;&#x5178;\n        - &#x683c;&#x5f0f;&#x4e3a;:\n            - `{<span class=\"hljs-string\">&quot;&#x7ed3;&#x679c;&#x53d8;&#x91cf;&#x540d;&quot;</span>: &#x503c;}\n    - &#x793a;&#x4f8b;:    \n        ```python\n        <span class=\"hljs-comment\"># &#x5f97;&#x5230;&#x6240;&#x6709;&#x4e66;&#x7684;&#x5e73;&#x5747;&#x4ef7;&#x683c;</span>\n        <span class=\"hljs-keyword\">from</span> bookstore <span class=\"hljs-keyword\">import</span> models\n        <span class=\"hljs-keyword\">from</span> django.db.models <span class=\"hljs-keyword\">import</span> Avg\n        result = models.Book.objects.aggregate(myAvg=Avg(<span class=\"hljs-string\">&apos;price&apos;</span>))\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x5e73;&#x5747;&#x4ef7;&#x683c;&#x662f;:&quot;</span>, result[<span class=\"hljs-string\">&apos;myAvg&apos;</span>])\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;result=&quot;</span>, result)  <span class=\"hljs-comment\"># {&quot;myAvg&quot;: 58.2}</span>\n        \n        <span class=\"hljs-comment\"># &#x5f97;&#x5230;&#x6570;&#x636e;&#x8868;&#x91cc;&#x6709;&#x591a;&#x5c11;&#x672c;&#x4e66;</span>\n        <span class=\"hljs-keyword\">from</span> django.db.models <span class=\"hljs-keyword\">import</span> Count\n        result = models.Book.objects.aggregate(mycnt=Count(<span class=\"hljs-string\">&apos;title&apos;</span>))\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x6570;&#x636e;&#x8bb0;&#x5f55;&#x603b;&#x4e2a;&#x6570;&#x662f;:&quot;</span>, result[<span class=\"hljs-string\">&apos;mycnt&apos;</span>])\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;result=&quot;</span>, result)  <span class=\"hljs-comment\"># {&quot;mycnt&quot;: 10}</span>\n    \n        ```\n<span class=\"hljs-number\">2.</span> &#x5206;&#x7ec4;&#x805a;&#x5408;\n    - &#x5206;&#x7ec4;&#x805a;&#x5408;&#x662f;&#x6307;&#x901a;&#x8fc7;&#x8ba1;&#x7b97;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x4e2d;&#x6bcf;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x6240;&#x5173;&#x8054;&#x7684;&#x5bf9;&#x8c61;&#x96c6;&#x5408;&#xff0c;&#x4ece;&#x800c;&#x5f97;&#x51fa;&#x603b;&#x8ba1;&#x503c;(&#x4e5f;&#x53ef;&#x4ee5;&#x662f;&#x5e73;&#x5747;&#x503c;&#x6216;&#x603b;&#x548c;)&#xff0c;&#x5373;&#x4e3a;&#x67e5;&#x8be2;&#x96c6;&#x7684;&#x6bcf;&#x4e00;&#x9879;&#x751f;&#x6210;&#x805a;&#x5408;&#x3002;\n\n    - &#x8bed;&#x6cd5;: \n      \n        - QuerySet.annotate(&#x7ed3;&#x679c;&#x53d8;&#x91cf;&#x540d;=&#x805a;&#x5408;&#x51fd;&#x6570;(<span class=\"hljs-string\">&apos;&#x5217;&apos;</span>))\n    - &#x7528;&#x6cd5;&#x6b65;&#x9aa4;:\n        <span class=\"hljs-number\">1.</span> &#x901a;&#x8fc7;&#x5148;&#x7528;&#x67e5;&#x8be2;&#x7ed3;&#x679c;MyModel.objects.values &#x67e5;&#x627e;&#x67e5;&#x8be2;&#x8981;&#x5206;&#x7ec4;&#x805a;&#x5408;&#x7684;&#x5217;\n            - MyModel.objects.values(<span class=\"hljs-string\">&apos;&#x5217;1&apos;</span>, <span class=\"hljs-string\">&apos;&#x5217;2&apos;</span>)\n            - &#x5982;: \n                ```python\n                pub_set = models.Book.objects.values(<span class=\"hljs-string\">&apos;pub&apos;</span>)\n            <span class=\"hljs-built_in\">print</span>(pub_set)  <span class=\"hljs-comment\"># &lt;QuerySet [{&apos;pub&apos;: &apos;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&apos;}, {&apos;pub&apos;: &apos;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&apos;}, {&apos;pub_hou {&apos;pub&apos;: &apos;&#x673a;&#x68b0;&#x5de5;&#x4e1a;&#x51fa;&#x7248;&#x793e;&apos;}, {&apos;pub&apos;: &apos;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&apos;}]&gt;</span>\n    \n                ```\n        <span class=\"hljs-number\">2.</span> &#x901a;&#x8fc7;&#x8fd4;&#x56de;&#x7ed3;&#x679c;&#x7684; QuerySet.annotate &#x65b9;&#x6cd5;&#x5206;&#x7ec4;&#x805a;&#x5408;&#x5f97;&#x5230;&#x5206;&#x7ec4;&#x7ed3;&#x679c;\n            - QuerySet.annotate(&#x540d;=&#x805a;&#x5408;&#x51fd;&#x6570;(<span class=\"hljs-string\">&apos;&#x5217;&apos;</span>))\n            - &#x8fd4;&#x56de; QuerySet &#x7ed3;&#x679c;&#x96c6;,&#x5185;&#x90e8;&#x5b58;&#x50a8;&#x7ed3;&#x679c;&#x7684;&#x5b57;&#x5178;\n            - &#x5982;:\n                ```python\n                pub_count_set = pub_set.annotate(myCount=Count(<span class=\"hljs-string\">&apos;pub&apos;</span>))\n                <span class=\"hljs-built_in\">print</span>(pub_count_set)  <span class=\"hljs-comment\"># &lt;QuerySet [{&apos;pub&apos;: &apos;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&apos;, &apos;myCount&apos;: 7}, {&apos;pub&apos;: &apos;&#x673a;&#x68b0;&#x5de5;&#x4e1a;&#x51fa;&#x7248;&#x793e;&apos;, &apos;myCount&apos;: 3}]&gt;</span>\n                ```\n            \n        \n        - .values(<span class=\"hljs-string\">&apos;&#x67e5;&#x8be2;&#x5217;&#x540d;&apos;</span>)\n    - &#x793a;&#x4f8b;:\n        - &#x5f97;&#x5230;&#x54ea;&#x513f;&#x4e2a;&#x51fa;&#x7248;&#x793e;&#x5171;&#x51fa;&#x7248;&#x591a;&#x5c11;&#x672c;&#x4e66;\n        ```python\n        <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_annotate</span>(<span class=\"hljs-params\">request</span>):\n           <span class=\"hljs-keyword\">from</span> django.db.models <span class=\"hljs-keyword\">import</span> Count\n           <span class=\"hljs-keyword\">from</span> . <span class=\"hljs-keyword\">import</span> models\n    \n            <span class=\"hljs-comment\"># &#x5f97;&#x5230;&#x6240;&#x6709;&#x51fa;&#x7248;&#x793e;&#x7684;&#x67e5;&#x8be2;&#x96c6;&#x5408;QuerySet</span>\n            pub_set = models.Book.objects.values(<span class=\"hljs-string\">&apos;pub&apos;</span>)\n            <span class=\"hljs-comment\"># &#x6839;&#x636e;&#x51fa;&#x7248;&#x793e;&#x67e5;&#x8be2;&#x5206;&#x7ec4;&#xff0c;&#x51fa;&#x7248;&#x793e;&#x548c;Count&#x7684;&#x5206;&#x7ec4;&#x805a;&#x5408;&#x67e5;&#x8be2;&#x96c6;&#x5408;</span>\n            pub_count_set = pub_set.annotate(myCount=Count(<span class=\"hljs-string\">&apos;pub&apos;</span>))  <span class=\"hljs-comment\"># &#x8fd4;&#x56de;&#x67e5;&#x8be2;&#x96c6;&#x5408;</span>\n            <span class=\"hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> pub_count_set:\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;&#x51fa;&#x7248;&#x793e;:&quot;</span>, item[<span class=\"hljs-string\">&apos;pub&apos;</span>], <span class=\"hljs-string\">&quot;&#x56fe;&#x4e66;&#x6709;&#xff1a;&quot;</span>, item[<span class=\"hljs-string\">&apos;myCount&apos;</span>])\n            <span class=\"hljs-keyword\">return</span> HttpResponse(<span class=\"hljs-string\">&apos;&#x8bf7;&#x67e5;&#x770b;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x63a7;&#x5236;&#x53f0;&#x83b7;&#x53d6;&#x7ed3;&#x679c;&apos;</span>)\n        ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"316,390"}}],"payload":{"tag":"h3","lines":"315,316"}},{"content":"F&#x5bf9;&#x8c61;","children":[{"content":"<pre data-lines=\"391,437\"><code data-lines=\"391,437\">- &#x4e00;&#x4e2a;F&#x5bf9;&#x8c61;&#x4ee3;&#x8868;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x67d0;&#x6761;&#x8bb0;&#x5f55;&#x7684;&#x5b57;&#x6bb5;&#x7684;&#x4fe1;&#x606f;\n<span class=\"hljs-number\">1</span>. &#x4f5c;&#x7528;:\n    - &#x901a;&#x5e38;&#x662f;&#x5bf9;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x5b57;&#x6bb5;&#x503c;&#x5728;&#x4e0d;&#x83b7;&#x53d6;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;\n    - &#x7528;&#x4e8e;&#x7c7b;&#x5c5e;&#x6027;(&#x5b57;&#x6bb5;)&#x4e4b;&#x95f4;&#x7684;&#x6bd4;&#x8f83;&#x3002;\n\n<span class=\"hljs-number\">2</span>.  &#x7528;&#x6cd5;\n    - F&#x5bf9;&#x8c61;&#x5728;&#x6570;&#x636e;&#x5305; django.db.models &#x4e2d;&#xff0c;&#x4f7f;&#x7528;&#x65f6;&#x9700;&#x8981;&#x5148;&#x5bfc;&#x5165;\n        - `from django.db.models import F`\n<span class=\"hljs-number\">3</span>. &#x8bed;&#x6cd5;:\n    ```python\n    from django.db.models import F\n    F(&apos;&#x5217;&#x540d;&apos;)  \n    ```\n<span class=\"hljs-number\">4</span>. &#x8bf4;&#x660e;:\n    - &#x4e00;&#x4e2a; F() &#x5bf9;&#x8c61;&#x4ee3;&#x8868;&#x4e86;&#x4e00;&#x4e2a;model&#x7684;&#x5b57;&#x6bb5;&#x7684;&#x503c;\n    - F&#x5bf9;&#x8c61;&#x901a;&#x5e38;&#x662f;&#x5bf9;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x5b57;&#x6bb5;&#x503c;&#x5728;&#x4e0d;&#x52a0;&#x8f7d;&#x5230;&#x5185;&#x5b58;&#x4e2d;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x76f4;&#x63a5;&#x5728;&#x6570;&#x636e;&#x5e93;&#x670d;&#x52a1;&#x5668;&#x7aef;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;\n\n\n\n<span class=\"hljs-number\">5</span>. &#x793a;&#x4f8b;<span class=\"hljs-number\">1</span>\n    - &#x66f4;&#x65b0;Book&#x5b9e;&#x4f8b;&#x4e2d;&#x6240;&#x6709;&#x7684;&#x96f6;&#x552e;&#x4ef7;&#x6da8;<span class=\"hljs-number\">10</span>&#x5143;\n    ```python\n    models.Book.objects.all().update(market_price=F(&apos;market_price&apos;)+<span class=\"hljs-number\">10</span>)\n    \n    \n    &apos;UPDATE `bookstore_book` SET `market_price` = (`bookstore_book`.`market_price` + <span class=\"hljs-number\">10</span>) \n    \n    \n    # &#x4ee5;&#x4e0a;&#x505a;&#x6cd5;&#x597d;&#x4e8e;&#x5982;&#x4e0b;&#x4ee3;&#x7801;\n    books = models.Book.objects.all()\n<span class=\"hljs-title\">    for book in books:</span>\n        book.market_price=book.marget_price+<span class=\"hljs-number\">10</span>\n        book.save()\n    ```\n<span class=\"hljs-number\">6</span>. &#x793a;&#x4f8b;<span class=\"hljs-number\">2</span>\n    - &#x5bf9;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x4e24;&#x4e2a;&#x5b57;&#x6bb5;&#x7684;&#x503c;&#x8fdb;&#x884c;&#x6bd4;&#x8f83;&#xff0c;&#x5217;&#x51fa;&#x54ea;&#x513f;&#x4e9b;&#x4e66;&#x7684;&#x96f6;&#x552e;&#x4ef7;&#x9ad8;&#x4e8e;&#x5b9a;&#x4ef7;?\n    ```python\n    from django.db.models import F\n    from bookstore import models\n    books = models.Book.objects.filter(market_price__gt=F(&apos;price&apos;))\n    &apos;SELECT * FROM `bookstore_book` WHERE `bookstore_book`.`market_price` &gt; (`bookstore_book`.`price`)\n<span class=\"hljs-title\">    for book in books:</span>\n<span class=\"hljs-title\">        print(book.title, &apos;&#x5b9a;&#x4ef7;:&apos;, book.price, &apos;&#x73b0;&#x4ef7;:</span>&apos;, book.market_price)\n    ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"391,437"}}],"payload":{"tag":"h3","lines":"390,391"}},{"content":"Q&#x5bf9;&#x8c61; - Q()","children":[{"content":"<pre data-lines=\"438,472\"><code data-lines=\"438,472\"><span class=\"hljs-selector-tag\">-</span> &#x5f53;&#x5728;&#x83b7;&#x53d6;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x96c6; &#x4f7f;&#x7528;&#x590d;&#x6742;&#x7684;&#x903b;&#x8f91;&#x6216;  `|` &#x3001; &#x903b;&#x8f91;&#x975e; `~` &#x7b49;&#x64cd;&#x4f5c;&#x65f6;&#x53ef;&#x4ee5;&#x501f;&#x52a9;&#x4e8e; <span class=\"hljs-selector-tag\">Q</span>&#x5bf9;&#x8c61;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;\n<span class=\"hljs-selector-tag\">-</span> &#x5982;: &#x60f3;&#x627e;&#x51fa;&#x5b9a;&#x4ef7;&#x4f4e;&#x4e8e;<span class=\"hljs-number\">20</span>&#x5143; &#x6216; &#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&#x7684;&#x5168;&#x90e8;&#x4e66;&#xff0c;&#x53ef;&#x4ee5;&#x5199;&#x6210;\n    ```<span class=\"hljs-selector-tag\">python</span>\n    <span class=\"hljs-selector-tag\">models</span><span class=\"hljs-selector-class\">.Book</span><span class=\"hljs-selector-class\">.objects</span><span class=\"hljs-selector-class\">.filter</span>(<span class=\"hljs-built_in\">Q</span>(price__lt=<span class=\"hljs-number\">20</span>)|<span class=\"hljs-built_in\">Q</span>(pub=<span class=\"hljs-string\">&quot;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&quot;</span>))\n    ```\n<span class=\"hljs-selector-tag\">-</span> <span class=\"hljs-selector-tag\">Q</span>&#x5bf9;&#x8c61;&#x5728; &#x6570;&#x636e;&#x5305; <span class=\"hljs-selector-tag\">django</span><span class=\"hljs-selector-class\">.db</span><span class=\"hljs-selector-class\">.models</span> &#x4e2d;&#x3002;&#x9700;&#x8981;&#x5148;&#x5bfc;&#x5165;&#x518d;&#x4f7f;&#x7528;\n  \n    <span class=\"hljs-selector-tag\">-</span> `<span class=\"hljs-selector-tag\">from</span> <span class=\"hljs-selector-tag\">django</span><span class=\"hljs-selector-class\">.db</span><span class=\"hljs-selector-class\">.models</span> <span class=\"hljs-selector-tag\">import</span> <span class=\"hljs-selector-tag\">Q</span>`\n\n<span class=\"hljs-number\">1</span>. &#x4f5c;&#x7528;\n  \n    <span class=\"hljs-selector-tag\">-</span> &#x5728;&#x6761;&#x4ef6;&#x4e2d;&#x7528;&#x6765;&#x5b9e;&#x73b0;&#x9664; <span class=\"hljs-selector-tag\">and</span>(&amp;) &#x4ee5;&#x5916;&#x7684; <span class=\"hljs-selector-tag\">or</span>(|) &#x6216; <span class=\"hljs-selector-tag\">not</span>(~) &#x64cd;&#x4f5c;\n<span class=\"hljs-number\">2</span>. &#x8fd0;&#x7b97;&#x7b26;:\n    <span class=\"hljs-selector-tag\">-</span> <span class=\"hljs-selector-tag\">&amp;</span> &#x4e0e;&#x64cd;&#x4f5c;\n    <span class=\"hljs-selector-tag\">-</span> | &#x6216;&#x64cd;&#x4f5c;\n    <span class=\"hljs-selector-tag\">-</span> &#x301c; &#x975e;&#x64cd;&#x4f5c;\n<span class=\"hljs-number\">2</span>. &#x8bed;&#x6cd5;\n    ```<span class=\"hljs-selector-tag\">python</span>\n    <span class=\"hljs-selector-tag\">from</span> <span class=\"hljs-selector-tag\">django</span><span class=\"hljs-selector-class\">.db</span><span class=\"hljs-selector-class\">.models</span> <span class=\"hljs-selector-tag\">import</span> <span class=\"hljs-selector-tag\">Q</span>\n    <span class=\"hljs-selector-tag\">Q</span>(&#x6761;&#x4ef6;<span class=\"hljs-number\">1</span>)|<span class=\"hljs-selector-tag\">Q</span>(&#x6761;&#x4ef6;<span class=\"hljs-number\">2</span>)  # &#x6761;&#x4ef6;<span class=\"hljs-number\">1</span>&#x6210;&#x7acb;&#x6216;&#x6761;&#x4ef6;<span class=\"hljs-number\">2</span>&#x6210;&#x7acb;\n    <span class=\"hljs-selector-tag\">Q</span>(&#x6761;&#x4ef6;<span class=\"hljs-number\">1</span>)<span class=\"hljs-selector-tag\">&amp;</span><span class=\"hljs-selector-tag\">Q</span>(&#x6761;&#x4ef6;<span class=\"hljs-number\">2</span>)  # &#x6761;&#x4ef6;<span class=\"hljs-number\">1</span>&#x548c;&#x6761;&#x4ef6;<span class=\"hljs-number\">2</span>&#x540c;&#x65f6;&#x6210;&#x7acb;\n    <span class=\"hljs-selector-tag\">Q</span>(&#x6761;&#x4ef6;<span class=\"hljs-number\">1</span>)<span class=\"hljs-selector-tag\">&amp;</span>~<span class=\"hljs-selector-tag\">Q</span>(&#x6761;&#x4ef6;<span class=\"hljs-number\">2</span>)  # &#x6761;&#x4ef6;<span class=\"hljs-number\">1</span>&#x6210;&#x7acb;&#x4e14;&#x6761;&#x4ef6;<span class=\"hljs-number\">2</span>&#x4e0d;&#x6210;&#x7acb;\n    ...\n    ```\n<span class=\"hljs-number\">3</span>. &#x793a;&#x4f8b;\n    ```<span class=\"hljs-selector-tag\">python</span>\n    <span class=\"hljs-selector-tag\">from</span> <span class=\"hljs-selector-tag\">django</span><span class=\"hljs-selector-class\">.db</span><span class=\"hljs-selector-class\">.models</span> <span class=\"hljs-selector-tag\">import</span> <span class=\"hljs-selector-tag\">Q</span>\n    # &#x67e5;&#x627e;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&#x7684;&#x4e66;&#x6216;&#x4ef7;&#x683c;&#x4f4e;&#x4e8e;<span class=\"hljs-number\">50</span>&#x7684;&#x4e66;\n    <span class=\"hljs-selector-tag\">models</span><span class=\"hljs-selector-class\">.Book</span><span class=\"hljs-selector-class\">.objects</span><span class=\"hljs-selector-class\">.filter</span>(<span class=\"hljs-built_in\">Q</span>(market_price__lt=<span class=\"hljs-number\">50</span>) | <span class=\"hljs-built_in\">Q</span>(pub_house=<span class=\"hljs-string\">&apos;&#x6e05;&#x534e;&#x5927;&#x5b66;&#x51fa;&#x7248;&#x793e;&apos;</span>))\n    # &#x67e5;&#x627e;&#x4e0d;&#x662f;&#x673a;&#x68b0;&#x5de5;&#x4e1a;&#x51fa;&#x7248;&#x793e;&#x7684;&#x4e66;&#x4e14;&#x4ef7;&#x683c;&#x4f4e;&#x4e8e;<span class=\"hljs-number\">50</span>&#x7684;&#x4e66;\n    <span class=\"hljs-selector-tag\">models</span><span class=\"hljs-selector-class\">.Book</span><span class=\"hljs-selector-class\">.objects</span><span class=\"hljs-selector-class\">.filter</span>(<span class=\"hljs-built_in\">Q</span>(market_price__lt=<span class=\"hljs-number\">50</span>) &amp; ~<span class=\"hljs-built_in\">Q</span>(pub_house=<span class=\"hljs-string\">&apos;&#x673a;&#x68b0;&#x5de5;&#x4e1a;&#x51fa;&#x7248;&#x793e;&apos;</span>))\n    ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"438,472"}}],"payload":{"tag":"h3","lines":"437,438"}},{"content":"&#x539f;&#x751f;&#x7684;&#x6570;&#x636e;&#x5e93;&#x64cd;&#x4f5c;&#x65b9;&#x6cd5;","children":[{"content":"<pre data-lines=\"473,488\"><code data-lines=\"473,488\">- &#x4f7f;&#x7528;MyModel<span class=\"hljs-selector-class\">.objects</span><span class=\"hljs-selector-class\">.raw</span>()&#x8fdb;&#x884c; &#x6570;&#x636e;&#x5e93;&#x67e5;&#x8be2;&#x64cd;&#x4f5c;&#x67e5;&#x8be2;\n    - &#x5728;django&#x4e2d;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x6a21;&#x578b;&#x7ba1;&#x7406;&#x5668;&#x7684;raw&#x65b9;&#x6cd5;&#x6765;&#x6267;&#x884c;select&#x8bed;&#x53e5;&#x8fdb;&#x884c;&#x6570;&#x636e;&#x67e5;&#x8be2;\n    <span class=\"hljs-number\">1</span>. &#x8bed;&#x6cd5;: \n      \n        - `MyModel<span class=\"hljs-selector-class\">.objects</span><span class=\"hljs-selector-class\">.raw</span>(sql&#x8bed;&#x53e5;)`\n    <span class=\"hljs-number\">2</span>. &#x7528;&#x6cd5;\n      \n        - `MyModel<span class=\"hljs-selector-class\">.objects</span><span class=\"hljs-selector-class\">.raw</span>(<span class=\"hljs-string\">&apos;sql&#x8bed;&#x53e5;&apos;</span>)`\n    <span class=\"hljs-number\">3</span>. &#x8fd4;&#x56de;&#x503c;:\n      \n        - RawQuerySet &#x96c6;&#x5408;&#x5bf9;&#x8c61; &#x3010;&#x53ea;&#x652f;&#x6301;&#x57fa;&#x7840;&#x64cd;&#x4f5c;&#xff0c;&#x6bd4;&#x5982;&#x5faa;&#x73af;&#x3011;\n        \n    <span class=\"hljs-number\">4</span>. &#x793a;&#x4f8b;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"473,488"}},{"content":"<pre data-lines=\"488,500\"><code class=\"language-python\">books = models.Book.objects.raw(<span class=\"hljs-string\">&apos;select * from bookstore_book&apos;</span>)\n\n<span class=\"hljs-keyword\">for</span> book <span class=\"hljs-keyword\">in</span> books:\n    <span class=\"hljs-built_in\">print</span>(book)\n\n<span class=\"hljs-comment\">#sql&#x6ce8;&#x5165;&#x95ee;&#x9898;</span>\ns1 = Book.objects.raw(<span class=\"hljs-string\">&apos;select * from bookstore_book where id=%s&apos;</span>%(<span class=\"hljs-string\">&apos;1 or 1=1#&apos;</span>))\n\ns2 = Book.objects.raw(<span class=\"hljs-string\">&apos;select * from bookstore_book where id=%s&apos;</span>,[<span class=\"hljs-string\">&apos;1 or 1=1#&apos;</span>])\n    \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"488,500"}},{"content":"<pre data-lines=\"501,530\"><code data-lines=\"501,530\"><span class=\"hljs-operator\">-</span> &#x4f7f;&#x7528;django&#x4e2d;&#x7684;&#x6e38;&#x6807;<span class=\"hljs-keyword\">cursor</span>&#x5bf9;&#x6570;&#x636e;&#x5e93;&#x8fdb;&#x884c; &#x589e;&#x5220;&#x6539;&#x64cd;&#x4f5c;\n    <span class=\"hljs-operator\">-</span> &#x5728;Django&#x4e2d;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; &#x5982;<span class=\"hljs-keyword\">UPDATE</span>,<span class=\"hljs-keyword\">DELETE</span>&#x7b49;<span class=\"hljs-keyword\">SQL</span>&#x8bed;&#x53e5;&#x5bf9;&#x6570;&#x636e;&#x5e93;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;&#x3002;\n    <span class=\"hljs-operator\">-</span> &#x5728;Django&#x4e2d;&#x4f7f;&#x7528;&#x4e0a;&#x8ff0;&#x975e;&#x67e5;&#x8be2;&#x8bed;&#x53e5;&#x5fc5;&#x987b;&#x4f7f;&#x7528;&#x6e38;&#x6807;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;\n    <span class=\"hljs-operator\">-</span> &#x4f7f;&#x7528;&#x6b65;&#x9aa4;:\n        <span class=\"hljs-number\">1.</span> &#x5bfc;&#x5165;<span class=\"hljs-keyword\">cursor</span>&#x6240;&#x5728;&#x7684;&#x5305;\n            <span class=\"hljs-operator\">-</span> Django&#x4e2d;&#x7684;&#x6e38;&#x6807;<span class=\"hljs-keyword\">cursor</span>&#x5b9a;&#x4e49;&#x5728; django.db.connection&#x5305;&#x4e2d;&#xff0c;&#x4f7f;&#x7528;&#x524d;&#x9700;&#x8981;&#x5148;&#x5bfc;&#x5165;\n            <span class=\"hljs-operator\">-</span> &#x5982;&#xff1a;\n                <span class=\"hljs-operator\">-</span> `<span class=\"hljs-keyword\">from</span> django.db import connection`\n        <span class=\"hljs-number\">2.</span> &#x7528;&#x521b;&#x5efa;<span class=\"hljs-keyword\">cursor</span>&#x7c7b;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#x521b;&#x5efa;<span class=\"hljs-keyword\">cursor</span>&#x5bf9;&#x8c61;&#xff0c;&#x518d;&#x4f7f;&#x7528;<span class=\"hljs-keyword\">cursor</span>&#x5bf9;&#x8c61;,&#x4e3a;&#x4fdd;&#x8bc1;&#x5728;&#x51fa;&#x73b0;&#x5f02;&#x5e38;&#x65f6;&#x80fd;&#x91ca;&#x653e;<span class=\"hljs-keyword\">cursor</span>&#x8d44;&#x6e90;,&#x901a;&#x5e38;&#x4f7f;&#x7528;<span class=\"hljs-keyword\">with</span>&#x8bed;&#x53e5;&#x8fdb;&#x884c;&#x521b;&#x5efa;&#x64cd;&#x4f5c;\n            <span class=\"hljs-operator\">-</span> &#x5982;:\n                ```python\n                <span class=\"hljs-keyword\">from</span> django.db import connection\n                <span class=\"hljs-keyword\">with</span> connection.cursor() <span class=\"hljs-keyword\">as</span> cur:\n                    cur.execute(<span class=\"hljs-string\">&apos;&#x6267;&#x884c;SQL&#x8bed;&#x53e5;&apos;</span>)\n                ```\n\n        <span class=\"hljs-operator\">-</span> &#x793a;&#x4f8b;\n            ```python\n            # &#x7528;<span class=\"hljs-keyword\">SQL</span>&#x8bed;&#x53e5;&#x5c06;id &#x4e3a; <span class=\"hljs-number\">10</span>&#x7684; &#x4e66;&#x7684;&#x51fa;&#x7248;&#x793e;&#x6539;&#x4e3a; &quot;XXX&#x51fa;&#x7248;&#x793e;&quot;\n            <span class=\"hljs-keyword\">from</span> django.db import connection\n            <span class=\"hljs-keyword\">with</span> connection.cursor() <span class=\"hljs-keyword\">as</span> cur: \n                cur.execute(<span class=\"hljs-string\">&apos;update bookstore_book set pub_house=&quot;XXX&#x51fa;&#x7248;&#x793e;&quot; where id=10;&apos;</span>)\n\n            <span class=\"hljs-keyword\">with</span> connection.cursor() <span class=\"hljs-keyword\">as</span> cur:\n                # &#x5220;&#x9664; id&#x4e3a;<span class=\"hljs-number\">1</span>&#x7684;&#x4e00;&#x6761;&#x8bb0;&#x5f55;\n                cur.execute(<span class=\"hljs-string\">&apos;delete from bookstore_book where id=10;&apos;</span>)\n            ```\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"501,530"}},{"content":"<pre data-lines=\"531,538\"><code class=\"language-python\"><span class=\"hljs-comment\"># &#x5c0f;&#x6280;&#x5de7; - &#x67e5;&#x770b;orm SQL&#x8bed;&#x53e5;</span>\nf = Book.objects.<span class=\"hljs-built_in\">filter</span>(price__gt=<span class=\"hljs-number\">30</span>)\n<span class=\"hljs-built_in\">print</span>(f.query)\n&#x8f93;&#x51fa;&#x4e3a;&#x5f53;&#x524d;&#x67e5;&#x8be2;&#x5bf9;&#x5e94;&#x7684;sql&#x8bed;&#x53e5;\nSELECT `bookstore_book`.`<span class=\"hljs-built_in\">id</span>`, `bookstore_book`.`title`, `bookstore_book`.`pub`, `bookstore_book`.`price`, `bookstore_book`.`market_price` FROM `bookstore_book` WHERE `bookstore_book`.`price` &gt; <span class=\"hljs-number\">30</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"531,538"}}],"payload":{"tag":"h3","lines":"472,473"}}],"payload":{"tag":"h1","lines":"0,1"}},{})</script>
</body>
</html>
